{"version":3,"file":"index-Dmj7o1hb.js","sources":["../src/infrastructure/tavern/index.ts"],"sourcesContent":["/**\n * 酒馆接口层 - 统一导出\n * \n * 提供 SillyTavern 事件、消息、世界书等功能的封装\n */\n\nexport { EventBus, TavernEventType } from './EventBus';\nexport type { TavernEventTypeValue, EventCallback, Unsubscribe } from './EventBus';\n\nexport { MessageService } from './MessageService';\nexport type { TavernMessage, MessageRole, GetMessagesOptions } from './MessageService';\n\nexport { WorldInfoService } from './WorldInfoService';\nexport type {\n    WorldInfoEntry,\n    WorldInfoPosition,\n    WorldInfoStrategy,\n    WorldInfoRole,\n    WorldInfoTokenStats,\n    CreateWorldInfoEntryParams,\n} from './WorldInfoService';\n\n/**\n * 检查酒馆接口对接状态\n * 输出 JSON 格式的状态报告到 DevLog\n */\nexport async function checkTavernIntegration(): Promise<{\n    eventBus: boolean;\n    messageService: boolean;\n    worldInfoService: boolean;\n    nativeTokenCount: boolean;\n    floorCount: number | null;\n    characterName: string | null;\n}> {\n    const { EventBus } = await import('./EventBus');\n    const { MessageService } = await import('./MessageService');\n    const { WorldInfoService } = await import('./WorldInfoService');\n\n    const status = {\n        eventBus: EventBus.isAvailable(),\n        messageService: MessageService.isAvailable(),\n        worldInfoService: WorldInfoService.isAvailable(),\n        nativeTokenCount: await WorldInfoService.isNativeTokenCountAvailable(),\n        floorCount: MessageService.isAvailable() ? MessageService.getFloorCount() : null,\n        characterName: MessageService.isAvailable() ? MessageService.getCurrentCharacterName() : null,\n    };\n\n    return status;\n}\n"],"names":["checkTavernIntegration","EventBus","n","MessageService","WorldInfoService"],"mappings":";;AA0BA,eAAsBA,IAOnB;AACC,QAAM,EAAE,UAAAC,MAAa,MAAM,OAAO,8BAAY,EAAA,KAAA,CAAAC,MAAAA,EAAA,CAAA,GACxC,EAAE,gBAAAC,MAAmB,MAAM,OAAO,8BAAkB,EAAA,KAAA,CAAAD,MAAAA,EAAA,CAAA,GACpD,EAAE,kBAAAE,MAAqB,MAAM,OAAO,gCAAoB;AAW9D,SATe;AAAA,IACX,UAAUH,EAAS,YAAA;AAAA,IACnB,gBAAgBE,EAAe,YAAA;AAAA,IAC/B,kBAAkBC,EAAiB,YAAA;AAAA,IACnC,kBAAkB,MAAMA,EAAiB,4BAAA;AAAA,IACzC,YAAYD,EAAe,YAAA,IAAgBA,EAAe,kBAAkB;AAAA,IAC5E,eAAeA,EAAe,YAAA,IAAgBA,EAAe,4BAA4B;AAAA,EAAA;AAIjG;"}