var px = Object.defineProperty;
var gx = (n, r, i) => r in n ? px(n, r, { enumerable: !0, configurable: !0, writable: !0, value: i }) : n[r] = i;
var dt = (n, r, i) => gx(n, typeof r != "symbol" ? r + "" : r, i);
var yx = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function ul(n) {
  return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
}
var Vd = { exports: {} }, Es = {};
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var N0;
function bx() {
  if (N0) return Es;
  N0 = 1;
  var n = Symbol.for("react.transitional.element"), r = Symbol.for("react.fragment");
  function i(l, s, c) {
    var f = null;
    if (c !== void 0 && (f = "" + c), s.key !== void 0 && (f = "" + s.key), "key" in s) {
      c = {};
      for (var g in s)
        g !== "key" && (c[g] = s[g]);
    } else c = s;
    return s = c.ref, {
      $$typeof: n,
      type: l,
      key: f,
      ref: s !== void 0 ? s : null,
      props: c
    };
  }
  return Es.Fragment = r, Es.jsx = i, Es.jsxs = i, Es;
}
var A0;
function xx() {
  return A0 || (A0 = 1, Vd.exports = bx()), Vd.exports;
}
var h = xx(), Kd = { exports: {} }, tt = {};
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var z0;
function vx() {
  if (z0) return tt;
  z0 = 1;
  var n = Symbol.for("react.transitional.element"), r = Symbol.for("react.portal"), i = Symbol.for("react.fragment"), l = Symbol.for("react.strict_mode"), s = Symbol.for("react.profiler"), c = Symbol.for("react.consumer"), f = Symbol.for("react.context"), g = Symbol.for("react.forward_ref"), y = Symbol.for("react.suspense"), b = Symbol.for("react.memo"), S = Symbol.for("react.lazy"), x = Symbol.for("react.activity"), _ = Symbol.iterator;
  function E(B) {
    return B === null || typeof B != "object" ? null : (B = _ && B[_] || B["@@iterator"], typeof B == "function" ? B : null);
  }
  var N = {
    isMounted: function() {
      return !1;
    },
    enqueueForceUpdate: function() {
    },
    enqueueReplaceState: function() {
    },
    enqueueSetState: function() {
    }
  }, U = Object.assign, G = {};
  function D(B, he, z) {
    this.props = B, this.context = he, this.refs = G, this.updater = z || N;
  }
  D.prototype.isReactComponent = {}, D.prototype.setState = function(B, he) {
    if (typeof B != "object" && typeof B != "function" && B != null)
      throw Error(
        "takes an object of state variables to update or a function which returns an object of state variables."
      );
    this.updater.enqueueSetState(this, B, he, "setState");
  }, D.prototype.forceUpdate = function(B) {
    this.updater.enqueueForceUpdate(this, B, "forceUpdate");
  };
  function ne() {
  }
  ne.prototype = D.prototype;
  function ie(B, he, z) {
    this.props = B, this.context = he, this.refs = G, this.updater = z || N;
  }
  var _e = ie.prototype = new ne();
  _e.constructor = ie, U(_e, D.prototype), _e.isPureReactComponent = !0;
  var we = Array.isArray;
  function I() {
  }
  var J = { H: null, A: null, T: null, S: null }, De = Object.prototype.hasOwnProperty;
  function He(B, he, z) {
    var ue = z.ref;
    return {
      $$typeof: n,
      type: B,
      key: he,
      ref: ue !== void 0 ? ue : null,
      props: z
    };
  }
  function W(B, he) {
    return He(B.type, he, B.props);
  }
  function Q(B) {
    return typeof B == "object" && B !== null && B.$$typeof === n;
  }
  function ye(B) {
    var he = { "=": "=0", ":": "=2" };
    return "$" + B.replace(/[=:]/g, function(z) {
      return he[z];
    });
  }
  var Be = /\/+/g;
  function Me(B, he) {
    return typeof B == "object" && B !== null && B.key != null ? ye("" + B.key) : he.toString(36);
  }
  function ke(B) {
    switch (B.status) {
      case "fulfilled":
        return B.value;
      case "rejected":
        throw B.reason;
      default:
        switch (typeof B.status == "string" ? B.then(I, I) : (B.status = "pending", B.then(
          function(he) {
            B.status === "pending" && (B.status = "fulfilled", B.value = he);
          },
          function(he) {
            B.status === "pending" && (B.status = "rejected", B.reason = he);
          }
        )), B.status) {
          case "fulfilled":
            return B.value;
          case "rejected":
            throw B.reason;
        }
    }
    throw B;
  }
  function ee(B, he, z, ue, me) {
    var Se = typeof B;
    (Se === "undefined" || Se === "boolean") && (B = null);
    var $e = !1;
    if (B === null) $e = !0;
    else
      switch (Se) {
        case "bigint":
        case "string":
        case "number":
          $e = !0;
          break;
        case "object":
          switch (B.$$typeof) {
            case n:
            case r:
              $e = !0;
              break;
            case S:
              return $e = B._init, ee(
                $e(B._payload),
                he,
                z,
                ue,
                me
              );
          }
      }
    if ($e)
      return me = me(B), $e = ue === "" ? "." + Me(B, 0) : ue, we(me) ? (z = "", $e != null && (z = $e.replace(Be, "$&/") + "/"), ee(me, he, z, "", function(xn) {
        return xn;
      })) : me != null && (Q(me) && (me = W(
        me,
        z + (me.key == null || B && B.key === me.key ? "" : ("" + me.key).replace(
          Be,
          "$&/"
        ) + "/") + $e
      )), he.push(me)), 1;
    $e = 0;
    var ut = ue === "" ? "." : ue + ":";
    if (we(B))
      for (var Ne = 0; Ne < B.length; Ne++)
        ue = B[Ne], Se = ut + Me(ue, Ne), $e += ee(
          ue,
          he,
          z,
          Se,
          me
        );
    else if (Ne = E(B), typeof Ne == "function")
      for (B = Ne.call(B), Ne = 0; !(ue = B.next()).done; )
        ue = ue.value, Se = ut + Me(ue, Ne++), $e += ee(
          ue,
          he,
          z,
          Se,
          me
        );
    else if (Se === "object") {
      if (typeof B.then == "function")
        return ee(
          ke(B),
          he,
          z,
          ue,
          me
        );
      throw he = String(B), Error(
        "Objects are not valid as a React child (found: " + (he === "[object Object]" ? "object with keys {" + Object.keys(B).join(", ") + "}" : he) + "). If you meant to render a collection of children, use an array instead."
      );
    }
    return $e;
  }
  function ve(B, he, z) {
    if (B == null) return B;
    var ue = [], me = 0;
    return ee(B, ue, "", "", function(Se) {
      return he.call(z, Se, me++);
    }), ue;
  }
  function Ie(B) {
    if (B._status === -1) {
      var he = B._result;
      he = he(), he.then(
        function(z) {
          (B._status === 0 || B._status === -1) && (B._status = 1, B._result = z);
        },
        function(z) {
          (B._status === 0 || B._status === -1) && (B._status = 2, B._result = z);
        }
      ), B._status === -1 && (B._status = 0, B._result = he);
    }
    if (B._status === 1) return B._result.default;
    throw B._result;
  }
  var Pe = typeof reportError == "function" ? reportError : function(B) {
    if (typeof window == "object" && typeof window.ErrorEvent == "function") {
      var he = new window.ErrorEvent("error", {
        bubbles: !0,
        cancelable: !0,
        message: typeof B == "object" && B !== null && typeof B.message == "string" ? String(B.message) : String(B),
        error: B
      });
      if (!window.dispatchEvent(he)) return;
    } else if (typeof process == "object" && typeof process.emit == "function") {
      process.emit("uncaughtException", B);
      return;
    }
    console.error(B);
  }, M = {
    map: ve,
    forEach: function(B, he, z) {
      ve(
        B,
        function() {
          he.apply(this, arguments);
        },
        z
      );
    },
    count: function(B) {
      var he = 0;
      return ve(B, function() {
        he++;
      }), he;
    },
    toArray: function(B) {
      return ve(B, function(he) {
        return he;
      }) || [];
    },
    only: function(B) {
      if (!Q(B))
        throw Error(
          "React.Children.only expected to receive a single React element child."
        );
      return B;
    }
  };
  return tt.Activity = x, tt.Children = M, tt.Component = D, tt.Fragment = i, tt.Profiler = s, tt.PureComponent = ie, tt.StrictMode = l, tt.Suspense = y, tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = J, tt.__COMPILER_RUNTIME = {
    __proto__: null,
    c: function(B) {
      return J.H.useMemoCache(B);
    }
  }, tt.cache = function(B) {
    return function() {
      return B.apply(null, arguments);
    };
  }, tt.cacheSignal = function() {
    return null;
  }, tt.cloneElement = function(B, he, z) {
    if (B == null)
      throw Error(
        "The argument must be a React element, but you passed " + B + "."
      );
    var ue = U({}, B.props), me = B.key;
    if (he != null)
      for (Se in he.key !== void 0 && (me = "" + he.key), he)
        !De.call(he, Se) || Se === "key" || Se === "__self" || Se === "__source" || Se === "ref" && he.ref === void 0 || (ue[Se] = he[Se]);
    var Se = arguments.length - 2;
    if (Se === 1) ue.children = z;
    else if (1 < Se) {
      for (var $e = Array(Se), ut = 0; ut < Se; ut++)
        $e[ut] = arguments[ut + 2];
      ue.children = $e;
    }
    return He(B.type, me, ue);
  }, tt.createContext = function(B) {
    return B = {
      $$typeof: f,
      _currentValue: B,
      _currentValue2: B,
      _threadCount: 0,
      Provider: null,
      Consumer: null
    }, B.Provider = B, B.Consumer = {
      $$typeof: c,
      _context: B
    }, B;
  }, tt.createElement = function(B, he, z) {
    var ue, me = {}, Se = null;
    if (he != null)
      for (ue in he.key !== void 0 && (Se = "" + he.key), he)
        De.call(he, ue) && ue !== "key" && ue !== "__self" && ue !== "__source" && (me[ue] = he[ue]);
    var $e = arguments.length - 2;
    if ($e === 1) me.children = z;
    else if (1 < $e) {
      for (var ut = Array($e), Ne = 0; Ne < $e; Ne++)
        ut[Ne] = arguments[Ne + 2];
      me.children = ut;
    }
    if (B && B.defaultProps)
      for (ue in $e = B.defaultProps, $e)
        me[ue] === void 0 && (me[ue] = $e[ue]);
    return He(B, Se, me);
  }, tt.createRef = function() {
    return { current: null };
  }, tt.forwardRef = function(B) {
    return { $$typeof: g, render: B };
  }, tt.isValidElement = Q, tt.lazy = function(B) {
    return {
      $$typeof: S,
      _payload: { _status: -1, _result: B },
      _init: Ie
    };
  }, tt.memo = function(B, he) {
    return {
      $$typeof: b,
      type: B,
      compare: he === void 0 ? null : he
    };
  }, tt.startTransition = function(B) {
    var he = J.T, z = {};
    J.T = z;
    try {
      var ue = B(), me = J.S;
      me !== null && me(z, ue), typeof ue == "object" && ue !== null && typeof ue.then == "function" && ue.then(I, Pe);
    } catch (Se) {
      Pe(Se);
    } finally {
      he !== null && z.types !== null && (he.types = z.types), J.T = he;
    }
  }, tt.unstable_useCacheRefresh = function() {
    return J.H.useCacheRefresh();
  }, tt.use = function(B) {
    return J.H.use(B);
  }, tt.useActionState = function(B, he, z) {
    return J.H.useActionState(B, he, z);
  }, tt.useCallback = function(B, he) {
    return J.H.useCallback(B, he);
  }, tt.useContext = function(B) {
    return J.H.useContext(B);
  }, tt.useDebugValue = function() {
  }, tt.useDeferredValue = function(B, he) {
    return J.H.useDeferredValue(B, he);
  }, tt.useEffect = function(B, he) {
    return J.H.useEffect(B, he);
  }, tt.useEffectEvent = function(B) {
    return J.H.useEffectEvent(B);
  }, tt.useId = function() {
    return J.H.useId();
  }, tt.useImperativeHandle = function(B, he, z) {
    return J.H.useImperativeHandle(B, he, z);
  }, tt.useInsertionEffect = function(B, he) {
    return J.H.useInsertionEffect(B, he);
  }, tt.useLayoutEffect = function(B, he) {
    return J.H.useLayoutEffect(B, he);
  }, tt.useMemo = function(B, he) {
    return J.H.useMemo(B, he);
  }, tt.useOptimistic = function(B, he) {
    return J.H.useOptimistic(B, he);
  }, tt.useReducer = function(B, he, z) {
    return J.H.useReducer(B, he, z);
  }, tt.useRef = function(B) {
    return J.H.useRef(B);
  }, tt.useState = function(B) {
    return J.H.useState(B);
  }, tt.useSyncExternalStore = function(B, he, z) {
    return J.H.useSyncExternalStore(
      B,
      he,
      z
    );
  }, tt.useTransition = function() {
    return J.H.useTransition();
  }, tt.version = "19.2.3", tt;
}
var M0;
function Ks() {
  return M0 || (M0 = 1, Kd.exports = vx()), Kd.exports;
}
var se = Ks();
const cy = /* @__PURE__ */ ul(se);
var Gd = { exports: {} }, _s = {}, $d = { exports: {} }, Yd = {};
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var O0;
function Sx() {
  return O0 || (O0 = 1, (function(n) {
    function r(ee, ve) {
      var Ie = ee.length;
      ee.push(ve);
      e: for (; 0 < Ie; ) {
        var Pe = Ie - 1 >>> 1, M = ee[Pe];
        if (0 < s(M, ve))
          ee[Pe] = ve, ee[Ie] = M, Ie = Pe;
        else break e;
      }
    }
    function i(ee) {
      return ee.length === 0 ? null : ee[0];
    }
    function l(ee) {
      if (ee.length === 0) return null;
      var ve = ee[0], Ie = ee.pop();
      if (Ie !== ve) {
        ee[0] = Ie;
        e: for (var Pe = 0, M = ee.length, B = M >>> 1; Pe < B; ) {
          var he = 2 * (Pe + 1) - 1, z = ee[he], ue = he + 1, me = ee[ue];
          if (0 > s(z, Ie))
            ue < M && 0 > s(me, z) ? (ee[Pe] = me, ee[ue] = Ie, Pe = ue) : (ee[Pe] = z, ee[he] = Ie, Pe = he);
          else if (ue < M && 0 > s(me, Ie))
            ee[Pe] = me, ee[ue] = Ie, Pe = ue;
          else break e;
        }
      }
      return ve;
    }
    function s(ee, ve) {
      var Ie = ee.sortIndex - ve.sortIndex;
      return Ie !== 0 ? Ie : ee.id - ve.id;
    }
    if (n.unstable_now = void 0, typeof performance == "object" && typeof performance.now == "function") {
      var c = performance;
      n.unstable_now = function() {
        return c.now();
      };
    } else {
      var f = Date, g = f.now();
      n.unstable_now = function() {
        return f.now() - g;
      };
    }
    var y = [], b = [], S = 1, x = null, _ = 3, E = !1, N = !1, U = !1, G = !1, D = typeof setTimeout == "function" ? setTimeout : null, ne = typeof clearTimeout == "function" ? clearTimeout : null, ie = typeof setImmediate < "u" ? setImmediate : null;
    function _e(ee) {
      for (var ve = i(b); ve !== null; ) {
        if (ve.callback === null) l(b);
        else if (ve.startTime <= ee)
          l(b), ve.sortIndex = ve.expirationTime, r(y, ve);
        else break;
        ve = i(b);
      }
    }
    function we(ee) {
      if (U = !1, _e(ee), !N)
        if (i(y) !== null)
          N = !0, I || (I = !0, ye());
        else {
          var ve = i(b);
          ve !== null && ke(we, ve.startTime - ee);
        }
    }
    var I = !1, J = -1, De = 5, He = -1;
    function W() {
      return G ? !0 : !(n.unstable_now() - He < De);
    }
    function Q() {
      if (G = !1, I) {
        var ee = n.unstable_now();
        He = ee;
        var ve = !0;
        try {
          e: {
            N = !1, U && (U = !1, ne(J), J = -1), E = !0;
            var Ie = _;
            try {
              t: {
                for (_e(ee), x = i(y); x !== null && !(x.expirationTime > ee && W()); ) {
                  var Pe = x.callback;
                  if (typeof Pe == "function") {
                    x.callback = null, _ = x.priorityLevel;
                    var M = Pe(
                      x.expirationTime <= ee
                    );
                    if (ee = n.unstable_now(), typeof M == "function") {
                      x.callback = M, _e(ee), ve = !0;
                      break t;
                    }
                    x === i(y) && l(y), _e(ee);
                  } else l(y);
                  x = i(y);
                }
                if (x !== null) ve = !0;
                else {
                  var B = i(b);
                  B !== null && ke(
                    we,
                    B.startTime - ee
                  ), ve = !1;
                }
              }
              break e;
            } finally {
              x = null, _ = Ie, E = !1;
            }
            ve = void 0;
          }
        } finally {
          ve ? ye() : I = !1;
        }
      }
    }
    var ye;
    if (typeof ie == "function")
      ye = function() {
        ie(Q);
      };
    else if (typeof MessageChannel < "u") {
      var Be = new MessageChannel(), Me = Be.port2;
      Be.port1.onmessage = Q, ye = function() {
        Me.postMessage(null);
      };
    } else
      ye = function() {
        D(Q, 0);
      };
    function ke(ee, ve) {
      J = D(function() {
        ee(n.unstable_now());
      }, ve);
    }
    n.unstable_IdlePriority = 5, n.unstable_ImmediatePriority = 1, n.unstable_LowPriority = 4, n.unstable_NormalPriority = 3, n.unstable_Profiling = null, n.unstable_UserBlockingPriority = 2, n.unstable_cancelCallback = function(ee) {
      ee.callback = null;
    }, n.unstable_forceFrameRate = function(ee) {
      0 > ee || 125 < ee ? console.error(
        "forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"
      ) : De = 0 < ee ? Math.floor(1e3 / ee) : 5;
    }, n.unstable_getCurrentPriorityLevel = function() {
      return _;
    }, n.unstable_next = function(ee) {
      switch (_) {
        case 1:
        case 2:
        case 3:
          var ve = 3;
          break;
        default:
          ve = _;
      }
      var Ie = _;
      _ = ve;
      try {
        return ee();
      } finally {
        _ = Ie;
      }
    }, n.unstable_requestPaint = function() {
      G = !0;
    }, n.unstable_runWithPriority = function(ee, ve) {
      switch (ee) {
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
          break;
        default:
          ee = 3;
      }
      var Ie = _;
      _ = ee;
      try {
        return ve();
      } finally {
        _ = Ie;
      }
    }, n.unstable_scheduleCallback = function(ee, ve, Ie) {
      var Pe = n.unstable_now();
      switch (typeof Ie == "object" && Ie !== null ? (Ie = Ie.delay, Ie = typeof Ie == "number" && 0 < Ie ? Pe + Ie : Pe) : Ie = Pe, ee) {
        case 1:
          var M = -1;
          break;
        case 2:
          M = 250;
          break;
        case 5:
          M = 1073741823;
          break;
        case 4:
          M = 1e4;
          break;
        default:
          M = 5e3;
      }
      return M = Ie + M, ee = {
        id: S++,
        callback: ve,
        priorityLevel: ee,
        startTime: Ie,
        expirationTime: M,
        sortIndex: -1
      }, Ie > Pe ? (ee.sortIndex = Ie, r(b, ee), i(y) === null && ee === i(b) && (U ? (ne(J), J = -1) : U = !0, ke(we, Ie - Pe))) : (ee.sortIndex = M, r(y, ee), N || E || (N = !0, I || (I = !0, ye()))), ee;
    }, n.unstable_shouldYield = W, n.unstable_wrapCallback = function(ee) {
      var ve = _;
      return function() {
        var Ie = _;
        _ = ve;
        try {
          return ee.apply(this, arguments);
        } finally {
          _ = Ie;
        }
      };
    };
  })(Yd)), Yd;
}
var D0;
function wx() {
  return D0 || (D0 = 1, $d.exports = Sx()), $d.exports;
}
var Xd = { exports: {} }, zn = {};
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var R0;
function kx() {
  if (R0) return zn;
  R0 = 1;
  var n = Ks();
  function r(y) {
    var b = "https://react.dev/errors/" + y;
    if (1 < arguments.length) {
      b += "?args[]=" + encodeURIComponent(arguments[1]);
      for (var S = 2; S < arguments.length; S++)
        b += "&args[]=" + encodeURIComponent(arguments[S]);
    }
    return "Minified React error #" + y + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  function i() {
  }
  var l = {
    d: {
      f: i,
      r: function() {
        throw Error(r(522));
      },
      D: i,
      C: i,
      L: i,
      m: i,
      X: i,
      S: i,
      M: i
    },
    p: 0,
    findDOMNode: null
  }, s = Symbol.for("react.portal");
  function c(y, b, S) {
    var x = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null;
    return {
      $$typeof: s,
      key: x == null ? null : "" + x,
      children: y,
      containerInfo: b,
      implementation: S
    };
  }
  var f = n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;
  function g(y, b) {
    if (y === "font") return "";
    if (typeof b == "string")
      return b === "use-credentials" ? b : "";
  }
  return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = l, zn.createPortal = function(y, b) {
    var S = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null;
    if (!b || b.nodeType !== 1 && b.nodeType !== 9 && b.nodeType !== 11)
      throw Error(r(299));
    return c(y, b, null, S);
  }, zn.flushSync = function(y) {
    var b = f.T, S = l.p;
    try {
      if (f.T = null, l.p = 2, y) return y();
    } finally {
      f.T = b, l.p = S, l.d.f();
    }
  }, zn.preconnect = function(y, b) {
    typeof y == "string" && (b ? (b = b.crossOrigin, b = typeof b == "string" ? b === "use-credentials" ? b : "" : void 0) : b = null, l.d.C(y, b));
  }, zn.prefetchDNS = function(y) {
    typeof y == "string" && l.d.D(y);
  }, zn.preinit = function(y, b) {
    if (typeof y == "string" && b && typeof b.as == "string") {
      var S = b.as, x = g(S, b.crossOrigin), _ = typeof b.integrity == "string" ? b.integrity : void 0, E = typeof b.fetchPriority == "string" ? b.fetchPriority : void 0;
      S === "style" ? l.d.S(
        y,
        typeof b.precedence == "string" ? b.precedence : void 0,
        {
          crossOrigin: x,
          integrity: _,
          fetchPriority: E
        }
      ) : S === "script" && l.d.X(y, {
        crossOrigin: x,
        integrity: _,
        fetchPriority: E,
        nonce: typeof b.nonce == "string" ? b.nonce : void 0
      });
    }
  }, zn.preinitModule = function(y, b) {
    if (typeof y == "string")
      if (typeof b == "object" && b !== null) {
        if (b.as == null || b.as === "script") {
          var S = g(
            b.as,
            b.crossOrigin
          );
          l.d.M(y, {
            crossOrigin: S,
            integrity: typeof b.integrity == "string" ? b.integrity : void 0,
            nonce: typeof b.nonce == "string" ? b.nonce : void 0
          });
        }
      } else b == null && l.d.M(y);
  }, zn.preload = function(y, b) {
    if (typeof y == "string" && typeof b == "object" && b !== null && typeof b.as == "string") {
      var S = b.as, x = g(S, b.crossOrigin);
      l.d.L(y, S, {
        crossOrigin: x,
        integrity: typeof b.integrity == "string" ? b.integrity : void 0,
        nonce: typeof b.nonce == "string" ? b.nonce : void 0,
        type: typeof b.type == "string" ? b.type : void 0,
        fetchPriority: typeof b.fetchPriority == "string" ? b.fetchPriority : void 0,
        referrerPolicy: typeof b.referrerPolicy == "string" ? b.referrerPolicy : void 0,
        imageSrcSet: typeof b.imageSrcSet == "string" ? b.imageSrcSet : void 0,
        imageSizes: typeof b.imageSizes == "string" ? b.imageSizes : void 0,
        media: typeof b.media == "string" ? b.media : void 0
      });
    }
  }, zn.preloadModule = function(y, b) {
    if (typeof y == "string")
      if (b) {
        var S = g(b.as, b.crossOrigin);
        l.d.m(y, {
          as: typeof b.as == "string" && b.as !== "script" ? b.as : void 0,
          crossOrigin: S,
          integrity: typeof b.integrity == "string" ? b.integrity : void 0
        });
      } else l.d.m(y);
  }, zn.requestFormReset = function(y) {
    l.d.r(y);
  }, zn.unstable_batchedUpdates = function(y, b) {
    return y(b);
  }, zn.useFormState = function(y, b, S) {
    return f.H.useFormState(y, b, S);
  }, zn.useFormStatus = function() {
    return f.H.useHostTransitionStatus();
  }, zn.version = "19.2.3", zn;
}
var L0;
function fy() {
  if (L0) return Xd.exports;
  L0 = 1;
  function n() {
    if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function"))
      try {
        __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n);
      } catch (r) {
        console.error(r);
      }
  }
  return n(), Xd.exports = kx(), Xd.exports;
}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var B0;
function Cx() {
  if (B0) return _s;
  B0 = 1;
  var n = wx(), r = Ks(), i = fy();
  function l(e) {
    var t = "https://react.dev/errors/" + e;
    if (1 < arguments.length) {
      t += "?args[]=" + encodeURIComponent(arguments[1]);
      for (var a = 2; a < arguments.length; a++)
        t += "&args[]=" + encodeURIComponent(arguments[a]);
    }
    return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  function s(e) {
    return !(!e || e.nodeType !== 1 && e.nodeType !== 9 && e.nodeType !== 11);
  }
  function c(e) {
    var t = e, a = e;
    if (e.alternate) for (; t.return; ) t = t.return;
    else {
      e = t;
      do
        t = e, (t.flags & 4098) !== 0 && (a = t.return), e = t.return;
      while (e);
    }
    return t.tag === 3 ? a : null;
  }
  function f(e) {
    if (e.tag === 13) {
      var t = e.memoizedState;
      if (t === null && (e = e.alternate, e !== null && (t = e.memoizedState)), t !== null) return t.dehydrated;
    }
    return null;
  }
  function g(e) {
    if (e.tag === 31) {
      var t = e.memoizedState;
      if (t === null && (e = e.alternate, e !== null && (t = e.memoizedState)), t !== null) return t.dehydrated;
    }
    return null;
  }
  function y(e) {
    if (c(e) !== e)
      throw Error(l(188));
  }
  function b(e) {
    var t = e.alternate;
    if (!t) {
      if (t = c(e), t === null) throw Error(l(188));
      return t !== e ? null : e;
    }
    for (var a = e, o = t; ; ) {
      var d = a.return;
      if (d === null) break;
      var p = d.alternate;
      if (p === null) {
        if (o = d.return, o !== null) {
          a = o;
          continue;
        }
        break;
      }
      if (d.child === p.child) {
        for (p = d.child; p; ) {
          if (p === a) return y(d), e;
          if (p === o) return y(d), t;
          p = p.sibling;
        }
        throw Error(l(188));
      }
      if (a.return !== o.return) a = d, o = p;
      else {
        for (var k = !1, T = d.child; T; ) {
          if (T === a) {
            k = !0, a = d, o = p;
            break;
          }
          if (T === o) {
            k = !0, o = d, a = p;
            break;
          }
          T = T.sibling;
        }
        if (!k) {
          for (T = p.child; T; ) {
            if (T === a) {
              k = !0, a = p, o = d;
              break;
            }
            if (T === o) {
              k = !0, o = p, a = d;
              break;
            }
            T = T.sibling;
          }
          if (!k) throw Error(l(189));
        }
      }
      if (a.alternate !== o) throw Error(l(190));
    }
    if (a.tag !== 3) throw Error(l(188));
    return a.stateNode.current === a ? e : t;
  }
  function S(e) {
    var t = e.tag;
    if (t === 5 || t === 26 || t === 27 || t === 6) return e;
    for (e = e.child; e !== null; ) {
      if (t = S(e), t !== null) return t;
      e = e.sibling;
    }
    return null;
  }
  var x = Object.assign, _ = Symbol.for("react.element"), E = Symbol.for("react.transitional.element"), N = Symbol.for("react.portal"), U = Symbol.for("react.fragment"), G = Symbol.for("react.strict_mode"), D = Symbol.for("react.profiler"), ne = Symbol.for("react.consumer"), ie = Symbol.for("react.context"), _e = Symbol.for("react.forward_ref"), we = Symbol.for("react.suspense"), I = Symbol.for("react.suspense_list"), J = Symbol.for("react.memo"), De = Symbol.for("react.lazy"), He = Symbol.for("react.activity"), W = Symbol.for("react.memo_cache_sentinel"), Q = Symbol.iterator;
  function ye(e) {
    return e === null || typeof e != "object" ? null : (e = Q && e[Q] || e["@@iterator"], typeof e == "function" ? e : null);
  }
  var Be = Symbol.for("react.client.reference");
  function Me(e) {
    if (e == null) return null;
    if (typeof e == "function")
      return e.$$typeof === Be ? null : e.displayName || e.name || null;
    if (typeof e == "string") return e;
    switch (e) {
      case U:
        return "Fragment";
      case D:
        return "Profiler";
      case G:
        return "StrictMode";
      case we:
        return "Suspense";
      case I:
        return "SuspenseList";
      case He:
        return "Activity";
    }
    if (typeof e == "object")
      switch (e.$$typeof) {
        case N:
          return "Portal";
        case ie:
          return e.displayName || "Context";
        case ne:
          return (e._context.displayName || "Context") + ".Consumer";
        case _e:
          var t = e.render;
          return e = e.displayName, e || (e = t.displayName || t.name || "", e = e !== "" ? "ForwardRef(" + e + ")" : "ForwardRef"), e;
        case J:
          return t = e.displayName || null, t !== null ? t : Me(e.type) || "Memo";
        case De:
          t = e._payload, e = e._init;
          try {
            return Me(e(t));
          } catch {
          }
      }
    return null;
  }
  var ke = Array.isArray, ee = r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, ve = i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, Ie = {
    pending: !1,
    data: null,
    method: null,
    action: null
  }, Pe = [], M = -1;
  function B(e) {
    return { current: e };
  }
  function he(e) {
    0 > M || (e.current = Pe[M], Pe[M] = null, M--);
  }
  function z(e, t) {
    M++, Pe[M] = e.current, e.current = t;
  }
  var ue = B(null), me = B(null), Se = B(null), $e = B(null);
  function ut(e, t) {
    switch (z(Se, t), z(me, e), z(ue, null), t.nodeType) {
      case 9:
      case 11:
        e = (e = t.documentElement) && (e = e.namespaceURI) ? Wg(e) : 0;
        break;
      default:
        if (e = t.tagName, t = t.namespaceURI)
          t = Wg(t), e = Jg(t, e);
        else
          switch (e) {
            case "svg":
              e = 1;
              break;
            case "math":
              e = 2;
              break;
            default:
              e = 0;
          }
    }
    he(ue), z(ue, e);
  }
  function Ne() {
    he(ue), he(me), he(Se);
  }
  function xn(e) {
    e.memoizedState !== null && z($e, e);
    var t = ue.current, a = Jg(t, e.type);
    t !== a && (z(me, e), z(ue, a));
  }
  function qn(e) {
    me.current === e && (he(ue), he(me)), $e.current === e && (he($e), Ss._currentValue = Ie);
  }
  var bt, Rr;
  function _r(e) {
    if (bt === void 0)
      try {
        throw Error();
      } catch (a) {
        var t = a.stack.trim().match(/\n( *(at )?)/);
        bt = t && t[1] || "", Rr = -1 < a.stack.indexOf(`
    at`) ? " (<anonymous>)" : -1 < a.stack.indexOf("@") ? "@unknown:0:0" : "";
      }
    return `
` + bt + e + Rr;
  }
  var Hn = !1;
  function Bi(e, t) {
    if (!e || Hn) return "";
    Hn = !0;
    var a = Error.prepareStackTrace;
    Error.prepareStackTrace = void 0;
    try {
      var o = {
        DetermineComponentFrameRoot: function() {
          try {
            if (t) {
              var xe = function() {
                throw Error();
              };
              if (Object.defineProperty(xe.prototype, "props", {
                set: function() {
                  throw Error();
                }
              }), typeof Reflect == "object" && Reflect.construct) {
                try {
                  Reflect.construct(xe, []);
                } catch (ce) {
                  var oe = ce;
                }
                Reflect.construct(e, [], xe);
              } else {
                try {
                  xe.call();
                } catch (ce) {
                  oe = ce;
                }
                e.call(xe.prototype);
              }
            } else {
              try {
                throw Error();
              } catch (ce) {
                oe = ce;
              }
              (xe = e()) && typeof xe.catch == "function" && xe.catch(function() {
              });
            }
          } catch (ce) {
            if (ce && oe && typeof ce.stack == "string")
              return [ce.stack, oe.stack];
          }
          return [null, null];
        }
      };
      o.DetermineComponentFrameRoot.displayName = "DetermineComponentFrameRoot";
      var d = Object.getOwnPropertyDescriptor(
        o.DetermineComponentFrameRoot,
        "name"
      );
      d && d.configurable && Object.defineProperty(
        o.DetermineComponentFrameRoot,
        "name",
        { value: "DetermineComponentFrameRoot" }
      );
      var p = o.DetermineComponentFrameRoot(), k = p[0], T = p[1];
      if (k && T) {
        var R = k.split(`
`), ae = T.split(`
`);
        for (d = o = 0; o < R.length && !R[o].includes("DetermineComponentFrameRoot"); )
          o++;
        for (; d < ae.length && !ae[d].includes(
          "DetermineComponentFrameRoot"
        ); )
          d++;
        if (o === R.length || d === ae.length)
          for (o = R.length - 1, d = ae.length - 1; 1 <= o && 0 <= d && R[o] !== ae[d]; )
            d--;
        for (; 1 <= o && 0 <= d; o--, d--)
          if (R[o] !== ae[d]) {
            if (o !== 1 || d !== 1)
              do
                if (o--, d--, 0 > d || R[o] !== ae[d]) {
                  var pe = `
` + R[o].replace(" at new ", " at ");
                  return e.displayName && pe.includes("<anonymous>") && (pe = pe.replace("<anonymous>", e.displayName)), pe;
                }
              while (1 <= o && 0 <= d);
            break;
          }
      }
    } finally {
      Hn = !1, Error.prepareStackTrace = a;
    }
    return (a = e ? e.displayName || e.name : "") ? _r(a) : "";
  }
  function fl(e, t) {
    switch (e.tag) {
      case 26:
      case 27:
      case 5:
        return _r(e.type);
      case 16:
        return _r("Lazy");
      case 13:
        return e.child !== t && t !== null ? _r("Suspense Fallback") : _r("Suspense");
      case 19:
        return _r("SuspenseList");
      case 0:
      case 15:
        return Bi(e.type, !1);
      case 11:
        return Bi(e.type.render, !1);
      case 1:
        return Bi(e.type, !0);
      case 31:
        return _r("Activity");
      default:
        return "";
    }
  }
  function dl(e) {
    try {
      var t = "", a = null;
      do
        t += fl(e, a), a = e, e = e.return;
      while (e);
      return t;
    } catch (o) {
      return `
Error generating stack: ` + o.message + `
` + o.stack;
    }
  }
  var Ui = Object.prototype.hasOwnProperty, Lr = n.unstable_scheduleCallback, jn = n.unstable_cancelCallback, hl = n.unstable_shouldYield, ri = n.unstable_requestPaint, dn = n.unstable_now, ii = n.unstable_getCurrentPriorityLevel, de = n.unstable_ImmediatePriority, Te = n.unstable_UserBlockingPriority, Qe = n.unstable_NormalPriority, rt = n.unstable_LowPriority, xt = n.unstable_IdlePriority, hn = n.log, vn = n.unstable_setDisableYieldValue, Jt = null, Vt = null;
  function Kt(e) {
    if (typeof hn == "function" && vn(e), Vt && typeof Vt.setStrictMode == "function")
      try {
        Vt.setStrictMode(Jt, e);
      } catch {
      }
  }
  var Oe = Math.clz32 ? Math.clz32 : ml, Pn = Math.log, cn = Math.LN2;
  function ml(e) {
    return e >>>= 0, e === 0 ? 32 : 31 - (Pn(e) / cn | 0) | 0;
  }
  var Ue = 256, Ii = 262144, Ea = 4194304;
  function jr(e) {
    var t = e & 42;
    if (t !== 0) return t;
    switch (e & -e) {
      case 1:
        return 1;
      case 2:
        return 2;
      case 4:
        return 4;
      case 8:
        return 8;
      case 16:
        return 16;
      case 32:
        return 32;
      case 64:
        return 64;
      case 128:
        return 128;
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
        return e & 261888;
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
        return e & 3932160;
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        return e & 62914560;
      case 67108864:
        return 67108864;
      case 134217728:
        return 134217728;
      case 268435456:
        return 268435456;
      case 536870912:
        return 536870912;
      case 1073741824:
        return 0;
      default:
        return e;
    }
  }
  function _a(e, t, a) {
    var o = e.pendingLanes;
    if (o === 0) return 0;
    var d = 0, p = e.suspendedLanes, k = e.pingedLanes;
    e = e.warmLanes;
    var T = o & 134217727;
    return T !== 0 ? (o = T & ~p, o !== 0 ? d = jr(o) : (k &= T, k !== 0 ? d = jr(k) : a || (a = T & ~e, a !== 0 && (d = jr(a))))) : (T = o & ~p, T !== 0 ? d = jr(T) : k !== 0 ? d = jr(k) : a || (a = o & ~e, a !== 0 && (d = jr(a)))), d === 0 ? 0 : t !== 0 && t !== d && (t & p) === 0 && (p = d & -d, a = t & -t, p >= a || p === 32 && (a & 4194048) !== 0) ? t : d;
  }
  function ai(e, t) {
    return (e.pendingLanes & ~(e.suspendedLanes & ~e.pingedLanes) & t) === 0;
  }
  function Qc(e, t) {
    switch (e) {
      case 1:
      case 2:
      case 4:
      case 8:
      case 64:
        return t + 250;
      case 16:
      case 32:
      case 128:
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
        return t + 5e3;
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        return -1;
      case 67108864:
      case 134217728:
      case 268435456:
      case 536870912:
      case 1073741824:
        return -1;
      default:
        return -1;
    }
  }
  function Zs() {
    var e = Ea;
    return Ea <<= 1, (Ea & 62914560) === 0 && (Ea = 4194304), e;
  }
  function Br(e) {
    for (var t = [], a = 0; 31 > a; a++) t.push(e);
    return t;
  }
  function hr(e, t) {
    e.pendingLanes |= t, t !== 268435456 && (e.suspendedLanes = 0, e.pingedLanes = 0, e.warmLanes = 0);
  }
  function Co(e, t, a, o, d, p) {
    var k = e.pendingLanes;
    e.pendingLanes = a, e.suspendedLanes = 0, e.pingedLanes = 0, e.warmLanes = 0, e.expiredLanes &= a, e.entangledLanes &= a, e.errorRecoveryDisabledLanes &= a, e.shellSuspendCounter = 0;
    var T = e.entanglements, R = e.expirationTimes, ae = e.hiddenUpdates;
    for (a = k & ~a; 0 < a; ) {
      var pe = 31 - Oe(a), xe = 1 << pe;
      T[pe] = 0, R[pe] = -1;
      var oe = ae[pe];
      if (oe !== null)
        for (ae[pe] = null, pe = 0; pe < oe.length; pe++) {
          var ce = oe[pe];
          ce !== null && (ce.lane &= -536870913);
        }
      a &= ~xe;
    }
    o !== 0 && ja(e, o, 0), p !== 0 && d === 0 && e.tag !== 0 && (e.suspendedLanes |= p & ~(k & ~t));
  }
  function ja(e, t, a) {
    e.pendingLanes |= t, e.suspendedLanes &= ~t;
    var o = 31 - Oe(t);
    e.entangledLanes |= t, e.entanglements[o] = e.entanglements[o] | 1073741824 | a & 261930;
  }
  function Mt(e, t) {
    var a = e.entangledLanes |= t;
    for (e = e.entanglements; a; ) {
      var o = 31 - Oe(a), d = 1 << o;
      d & t | e[o] & t && (e[o] |= t), a &= ~d;
    }
  }
  function Yt(e, t) {
    var a = t & -t;
    return a = (a & 42) !== 0 ? 1 : Eo(a), (a & (e.suspendedLanes | t)) !== 0 ? 0 : a;
  }
  function Eo(e) {
    switch (e) {
      case 2:
        e = 1;
        break;
      case 8:
        e = 4;
        break;
      case 32:
        e = 16;
        break;
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        e = 128;
        break;
      case 268435456:
        e = 134217728;
        break;
      default:
        e = 0;
    }
    return e;
  }
  function qi(e) {
    return e &= -e, 2 < e ? 8 < e ? (e & 134217727) !== 0 ? 32 : 268435456 : 8 : 2;
  }
  function Ta() {
    var e = ve.p;
    return e !== 0 ? e : (e = window.event, e === void 0 ? 32 : w0(e.type));
  }
  function Na(e, t) {
    var a = ve.p;
    try {
      return ve.p = e, t();
    } finally {
      ve.p = a;
    }
  }
  var Ur = Math.random().toString(36).slice(2), Rt = "__reactFiber$" + Ur, Xt = "__reactProps$" + Ur, Rn = "__reactContainer$" + Ur, Hi = "__reactEvents$" + Ur, Zc = "__reactListeners$" + Ur, Ir = "__reactHandles$" + Ur, _o = "__reactResources$" + Ur, er = "__reactMarker$" + Ur;
  function pl(e) {
    delete e[Rt], delete e[Xt], delete e[Hi], delete e[Zc], delete e[Ir];
  }
  function qr(e) {
    var t = e[Rt];
    if (t) return t;
    for (var a = e.parentNode; a; ) {
      if (t = a[Rn] || a[Rt]) {
        if (a = t.alternate, t.child !== null || a !== null && a.child !== null)
          for (e = l0(e); e !== null; ) {
            if (a = e[Rt]) return a;
            e = l0(e);
          }
        return t;
      }
      e = a, a = e.parentNode;
    }
    return null;
  }
  function Tt(e) {
    if (e = e[Rt] || e[Rn]) {
      var t = e.tag;
      if (t === 5 || t === 6 || t === 13 || t === 31 || t === 26 || t === 27 || t === 3)
        return e;
    }
    return null;
  }
  function tr(e) {
    var t = e.tag;
    if (t === 5 || t === 26 || t === 27 || t === 6) return e.stateNode;
    throw Error(l(33));
  }
  function Tn(e) {
    var t = e[_o];
    return t || (t = e[_o] = { hoistableStyles: /* @__PURE__ */ new Map(), hoistableScripts: /* @__PURE__ */ new Map() }), t;
  }
  function Qt(e) {
    e[er] = !0;
  }
  var li = /* @__PURE__ */ new Set(), Aa = {};
  function Tr(e, t) {
    Hr(e, t), Hr(e + "Capture", t);
  }
  function Hr(e, t) {
    for (Aa[e] = t, e = 0; e < t.length; e++)
      li.add(t[e]);
  }
  var oi = RegExp(
    "^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"
  ), jo = {}, za = {};
  function Ws(e) {
    return Ui.call(za, e) ? !0 : Ui.call(jo, e) ? !1 : oi.test(e) ? za[e] = !0 : (jo[e] = !0, !1);
  }
  function st(e, t, a) {
    if (Ws(t))
      if (a === null) e.removeAttribute(t);
      else {
        switch (typeof a) {
          case "undefined":
          case "function":
          case "symbol":
            e.removeAttribute(t);
            return;
          case "boolean":
            var o = t.toLowerCase().slice(0, 5);
            if (o !== "data-" && o !== "aria-") {
              e.removeAttribute(t);
              return;
            }
        }
        e.setAttribute(t, "" + a);
      }
  }
  function Ma(e, t, a) {
    if (a === null) e.removeAttribute(t);
    else {
      switch (typeof a) {
        case "undefined":
        case "function":
        case "symbol":
        case "boolean":
          e.removeAttribute(t);
          return;
      }
      e.setAttribute(t, "" + a);
    }
  }
  function mr(e, t, a, o) {
    if (o === null) e.removeAttribute(a);
    else {
      switch (typeof o) {
        case "undefined":
        case "function":
        case "symbol":
        case "boolean":
          e.removeAttribute(a);
          return;
      }
      e.setAttributeNS(t, a, "" + o);
    }
  }
  function Sn(e) {
    switch (typeof e) {
      case "bigint":
      case "boolean":
      case "number":
      case "string":
      case "undefined":
        return e;
      case "object":
        return e;
      default:
        return "";
    }
  }
  function Pi(e) {
    var t = e.type;
    return (e = e.nodeName) && e.toLowerCase() === "input" && (t === "checkbox" || t === "radio");
  }
  function Js(e, t, a) {
    var o = Object.getOwnPropertyDescriptor(
      e.constructor.prototype,
      t
    );
    if (!e.hasOwnProperty(t) && typeof o < "u" && typeof o.get == "function" && typeof o.set == "function") {
      var d = o.get, p = o.set;
      return Object.defineProperty(e, t, {
        configurable: !0,
        get: function() {
          return d.call(this);
        },
        set: function(k) {
          a = "" + k, p.call(this, k);
        }
      }), Object.defineProperty(e, t, {
        enumerable: o.enumerable
      }), {
        getValue: function() {
          return a;
        },
        setValue: function(k) {
          a = "" + k;
        },
        stopTracking: function() {
          e._valueTracker = null, delete e[t];
        }
      };
    }
  }
  function gl(e) {
    if (!e._valueTracker) {
      var t = Pi(e) ? "checked" : "value";
      e._valueTracker = Js(
        e,
        t,
        "" + e[t]
      );
    }
  }
  function To(e) {
    if (!e) return !1;
    var t = e._valueTracker;
    if (!t) return !0;
    var a = t.getValue(), o = "";
    return e && (o = Pi(e) ? e.checked ? "true" : "false" : e.value), e = o, e !== a ? (t.setValue(e), !0) : !1;
  }
  function Ct(e) {
    if (e = e || (typeof document < "u" ? document : void 0), typeof e > "u") return null;
    try {
      return e.activeElement || e.body;
    } catch {
      return e.body;
    }
  }
  var Oa = /[\n"\\]/g;
  function mn(e) {
    return e.replace(
      Oa,
      function(t) {
        return "\\" + t.charCodeAt(0).toString(16) + " ";
      }
    );
  }
  function Pr(e, t, a, o, d, p, k, T) {
    e.name = "", k != null && typeof k != "function" && typeof k != "symbol" && typeof k != "boolean" ? e.type = k : e.removeAttribute("type"), t != null ? k === "number" ? (t === 0 && e.value === "" || e.value != t) && (e.value = "" + Sn(t)) : e.value !== "" + Sn(t) && (e.value = "" + Sn(t)) : k !== "submit" && k !== "reset" || e.removeAttribute("value"), t != null ? Da(e, k, Sn(t)) : a != null ? Da(e, k, Sn(a)) : o != null && e.removeAttribute("value"), d == null && p != null && (e.defaultChecked = !!p), d != null && (e.checked = d && typeof d != "function" && typeof d != "symbol"), T != null && typeof T != "function" && typeof T != "symbol" && typeof T != "boolean" ? e.name = "" + Sn(T) : e.removeAttribute("name");
  }
  function yl(e, t, a, o, d, p, k, T) {
    if (p != null && typeof p != "function" && typeof p != "symbol" && typeof p != "boolean" && (e.type = p), t != null || a != null) {
      if (!(p !== "submit" && p !== "reset" || t != null)) {
        gl(e);
        return;
      }
      a = a != null ? "" + Sn(a) : "", t = t != null ? "" + Sn(t) : a, T || t === e.value || (e.value = t), e.defaultValue = t;
    }
    o = o ?? d, o = typeof o != "function" && typeof o != "symbol" && !!o, e.checked = T ? e.checked : !!o, e.defaultChecked = !!o, k != null && typeof k != "function" && typeof k != "symbol" && typeof k != "boolean" && (e.name = k), gl(e);
  }
  function Da(e, t, a) {
    t === "number" && Ct(e.ownerDocument) === e || e.defaultValue === "" + a || (e.defaultValue = "" + a);
  }
  function Nr(e, t, a, o) {
    if (e = e.options, t) {
      t = {};
      for (var d = 0; d < a.length; d++)
        t["$" + a[d]] = !0;
      for (a = 0; a < e.length; a++)
        d = t.hasOwnProperty("$" + e[a].value), e[a].selected !== d && (e[a].selected = d), d && o && (e[a].defaultSelected = !0);
    } else {
      for (a = "" + Sn(a), t = null, d = 0; d < e.length; d++) {
        if (e[d].value === a) {
          e[d].selected = !0, o && (e[d].defaultSelected = !0);
          return;
        }
        t !== null || e[d].disabled || (t = e[d]);
      }
      t !== null && (t.selected = !0);
    }
  }
  function No(e, t, a) {
    if (t != null && (t = "" + Sn(t), t !== e.value && (e.value = t), a == null)) {
      e.defaultValue !== t && (e.defaultValue = t);
      return;
    }
    e.defaultValue = a != null ? "" + Sn(a) : "";
  }
  function Ra(e, t, a, o) {
    if (t == null) {
      if (o != null) {
        if (a != null) throw Error(l(92));
        if (ke(o)) {
          if (1 < o.length) throw Error(l(93));
          o = o[0];
        }
        a = o;
      }
      a == null && (a = ""), t = a;
    }
    a = Sn(t), e.defaultValue = a, o = e.textContent, o === a && o !== "" && o !== null && (e.value = o), gl(e);
  }
  function si(e, t) {
    if (t) {
      var a = e.firstChild;
      if (a && a === e.lastChild && a.nodeType === 3) {
        a.nodeValue = t;
        return;
      }
    }
    e.textContent = t;
  }
  var Wc = new Set(
    "animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(
      " "
    )
  );
  function gt(e, t, a) {
    var o = t.indexOf("--") === 0;
    a == null || typeof a == "boolean" || a === "" ? o ? e.setProperty(t, "") : t === "float" ? e.cssFloat = "" : e[t] = "" : o ? e.setProperty(t, a) : typeof a != "number" || a === 0 || Wc.has(t) ? t === "float" ? e.cssFloat = a : e[t] = ("" + a).trim() : e[t] = a + "px";
  }
  function Ao(e, t, a) {
    if (t != null && typeof t != "object")
      throw Error(l(62));
    if (e = e.style, a != null) {
      for (var o in a)
        !a.hasOwnProperty(o) || t != null && t.hasOwnProperty(o) || (o.indexOf("--") === 0 ? e.setProperty(o, "") : o === "float" ? e.cssFloat = "" : e[o] = "");
      for (var d in t)
        o = t[d], t.hasOwnProperty(d) && a[d] !== o && gt(e, d, o);
    } else
      for (var p in t)
        t.hasOwnProperty(p) && gt(e, p, t[p]);
  }
  function zo(e) {
    if (e.indexOf("-") === -1) return !1;
    switch (e) {
      case "annotation-xml":
      case "color-profile":
      case "font-face":
      case "font-face-src":
      case "font-face-uri":
      case "font-face-format":
      case "font-face-name":
      case "missing-glyph":
        return !1;
      default:
        return !0;
    }
  }
  var Jc = /* @__PURE__ */ new Map([
    ["acceptCharset", "accept-charset"],
    ["htmlFor", "for"],
    ["httpEquiv", "http-equiv"],
    ["crossOrigin", "crossorigin"],
    ["accentHeight", "accent-height"],
    ["alignmentBaseline", "alignment-baseline"],
    ["arabicForm", "arabic-form"],
    ["baselineShift", "baseline-shift"],
    ["capHeight", "cap-height"],
    ["clipPath", "clip-path"],
    ["clipRule", "clip-rule"],
    ["colorInterpolation", "color-interpolation"],
    ["colorInterpolationFilters", "color-interpolation-filters"],
    ["colorProfile", "color-profile"],
    ["colorRendering", "color-rendering"],
    ["dominantBaseline", "dominant-baseline"],
    ["enableBackground", "enable-background"],
    ["fillOpacity", "fill-opacity"],
    ["fillRule", "fill-rule"],
    ["floodColor", "flood-color"],
    ["floodOpacity", "flood-opacity"],
    ["fontFamily", "font-family"],
    ["fontSize", "font-size"],
    ["fontSizeAdjust", "font-size-adjust"],
    ["fontStretch", "font-stretch"],
    ["fontStyle", "font-style"],
    ["fontVariant", "font-variant"],
    ["fontWeight", "font-weight"],
    ["glyphName", "glyph-name"],
    ["glyphOrientationHorizontal", "glyph-orientation-horizontal"],
    ["glyphOrientationVertical", "glyph-orientation-vertical"],
    ["horizAdvX", "horiz-adv-x"],
    ["horizOriginX", "horiz-origin-x"],
    ["imageRendering", "image-rendering"],
    ["letterSpacing", "letter-spacing"],
    ["lightingColor", "lighting-color"],
    ["markerEnd", "marker-end"],
    ["markerMid", "marker-mid"],
    ["markerStart", "marker-start"],
    ["overlinePosition", "overline-position"],
    ["overlineThickness", "overline-thickness"],
    ["paintOrder", "paint-order"],
    ["panose-1", "panose-1"],
    ["pointerEvents", "pointer-events"],
    ["renderingIntent", "rendering-intent"],
    ["shapeRendering", "shape-rendering"],
    ["stopColor", "stop-color"],
    ["stopOpacity", "stop-opacity"],
    ["strikethroughPosition", "strikethrough-position"],
    ["strikethroughThickness", "strikethrough-thickness"],
    ["strokeDasharray", "stroke-dasharray"],
    ["strokeDashoffset", "stroke-dashoffset"],
    ["strokeLinecap", "stroke-linecap"],
    ["strokeLinejoin", "stroke-linejoin"],
    ["strokeMiterlimit", "stroke-miterlimit"],
    ["strokeOpacity", "stroke-opacity"],
    ["strokeWidth", "stroke-width"],
    ["textAnchor", "text-anchor"],
    ["textDecoration", "text-decoration"],
    ["textRendering", "text-rendering"],
    ["transformOrigin", "transform-origin"],
    ["underlinePosition", "underline-position"],
    ["underlineThickness", "underline-thickness"],
    ["unicodeBidi", "unicode-bidi"],
    ["unicodeRange", "unicode-range"],
    ["unitsPerEm", "units-per-em"],
    ["vAlphabetic", "v-alphabetic"],
    ["vHanging", "v-hanging"],
    ["vIdeographic", "v-ideographic"],
    ["vMathematical", "v-mathematical"],
    ["vectorEffect", "vector-effect"],
    ["vertAdvY", "vert-adv-y"],
    ["vertOriginX", "vert-origin-x"],
    ["vertOriginY", "vert-origin-y"],
    ["wordSpacing", "word-spacing"],
    ["writingMode", "writing-mode"],
    ["xmlnsXlink", "xmlns:xlink"],
    ["xHeight", "x-height"]
  ]), Ln = /^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;
  function Ar(e) {
    return Ln.test("" + e) ? "javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')" : e;
  }
  function Fn() {
  }
  var pr = null;
  function bl(e) {
    return e = e.target || e.srcElement || window, e.correspondingUseElement && (e = e.correspondingUseElement), e.nodeType === 3 ? e.parentNode : e;
  }
  var ui = null, Ut = null;
  function nr(e) {
    var t = Tt(e);
    if (t && (e = t.stateNode)) {
      var a = e[Xt] || null;
      e: switch (e = t.stateNode, t.type) {
        case "input":
          if (Pr(
            e,
            a.value,
            a.defaultValue,
            a.defaultValue,
            a.checked,
            a.defaultChecked,
            a.type,
            a.name
          ), t = a.name, a.type === "radio" && t != null) {
            for (a = e; a.parentNode; ) a = a.parentNode;
            for (a = a.querySelectorAll(
              'input[name="' + mn(
                "" + t
              ) + '"][type="radio"]'
            ), t = 0; t < a.length; t++) {
              var o = a[t];
              if (o !== e && o.form === e.form) {
                var d = o[Xt] || null;
                if (!d) throw Error(l(90));
                Pr(
                  o,
                  d.value,
                  d.defaultValue,
                  d.defaultValue,
                  d.checked,
                  d.defaultChecked,
                  d.type,
                  d.name
                );
              }
            }
            for (t = 0; t < a.length; t++)
              o = a[t], o.form === e.form && To(o);
          }
          break e;
        case "textarea":
          No(e, a.value, a.defaultValue);
          break e;
        case "select":
          t = a.value, t != null && Nr(e, !!a.multiple, t, !1);
      }
    }
  }
  var ci = !1;
  function Fi(e, t, a) {
    if (ci) return e(t, a);
    ci = !0;
    try {
      var o = e(t);
      return o;
    } finally {
      if (ci = !1, (ui !== null || Ut !== null) && (Pu(), ui && (t = ui, e = Ut, Ut = ui = null, nr(t), e)))
        for (t = 0; t < e.length; t++) nr(e[t]);
    }
  }
  function fi(e, t) {
    var a = e.stateNode;
    if (a === null) return null;
    var o = a[Xt] || null;
    if (o === null) return null;
    a = o[t];
    e: switch (t) {
      case "onClick":
      case "onClickCapture":
      case "onDoubleClick":
      case "onDoubleClickCapture":
      case "onMouseDown":
      case "onMouseDownCapture":
      case "onMouseMove":
      case "onMouseMoveCapture":
      case "onMouseUp":
      case "onMouseUpCapture":
      case "onMouseEnter":
        (o = !o.disabled) || (e = e.type, o = !(e === "button" || e === "input" || e === "select" || e === "textarea")), e = !o;
        break e;
      default:
        e = !1;
    }
    if (e) return null;
    if (a && typeof a != "function")
      throw Error(
        l(231, t, typeof a)
      );
    return a;
  }
  var pn = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u"), Mo = !1;
  if (pn)
    try {
      var Nn = {};
      Object.defineProperty(Nn, "passive", {
        get: function() {
          Mo = !0;
        }
      }), window.addEventListener("test", Nn, Nn), window.removeEventListener("test", Nn, Nn);
    } catch {
      Mo = !1;
    }
  var gr = null, xl = null, Vi = null;
  function Ki() {
    if (Vi) return Vi;
    var e, t = xl, a = t.length, o, d = "value" in gr ? gr.value : gr.textContent, p = d.length;
    for (e = 0; e < a && t[e] === d[e]; e++) ;
    var k = a - e;
    for (o = 1; o <= k && t[a - o] === d[p - o]; o++) ;
    return Vi = d.slice(e, 1 < o ? 1 - o : void 0);
  }
  function Gi(e) {
    var t = e.keyCode;
    return "charCode" in e ? (e = e.charCode, e === 0 && t === 13 && (e = 13)) : e = t, e === 10 && (e = 13), 32 <= e || e === 13 ? e : 0;
  }
  function La() {
    return !0;
  }
  function eu() {
    return !1;
  }
  function en(e) {
    function t(a, o, d, p, k) {
      this._reactName = a, this._targetInst = d, this.type = o, this.nativeEvent = p, this.target = k, this.currentTarget = null;
      for (var T in e)
        e.hasOwnProperty(T) && (a = e[T], this[T] = a ? a(p) : p[T]);
      return this.isDefaultPrevented = (p.defaultPrevented != null ? p.defaultPrevented : p.returnValue === !1) ? La : eu, this.isPropagationStopped = eu, this;
    }
    return x(t.prototype, {
      preventDefault: function() {
        this.defaultPrevented = !0;
        var a = this.nativeEvent;
        a && (a.preventDefault ? a.preventDefault() : typeof a.returnValue != "unknown" && (a.returnValue = !1), this.isDefaultPrevented = La);
      },
      stopPropagation: function() {
        var a = this.nativeEvent;
        a && (a.stopPropagation ? a.stopPropagation() : typeof a.cancelBubble != "unknown" && (a.cancelBubble = !0), this.isPropagationStopped = La);
      },
      persist: function() {
      },
      isPersistent: La
    }), t;
  }
  var di = {
    eventPhase: 0,
    bubbles: 0,
    cancelable: 0,
    timeStamp: function(e) {
      return e.timeStamp || Date.now();
    },
    defaultPrevented: 0,
    isTrusted: 0
  }, vl = en(di), Fr = x({}, di, { view: 0, detail: 0 }), Sl = en(Fr), Ba, Oo, Ua, wl = x({}, Fr, {
    screenX: 0,
    screenY: 0,
    clientX: 0,
    clientY: 0,
    pageX: 0,
    pageY: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    getModifierState: hi,
    button: 0,
    buttons: 0,
    relatedTarget: function(e) {
      return e.relatedTarget === void 0 ? e.fromElement === e.srcElement ? e.toElement : e.fromElement : e.relatedTarget;
    },
    movementX: function(e) {
      return "movementX" in e ? e.movementX : (e !== Ua && (Ua && e.type === "mousemove" ? (Ba = e.screenX - Ua.screenX, Oo = e.screenY - Ua.screenY) : Oo = Ba = 0, Ua = e), Ba);
    },
    movementY: function(e) {
      return "movementY" in e ? e.movementY : Oo;
    }
  }), kl = en(wl), Do = x({}, wl, { dataTransfer: 0 }), tu = en(Do), Cl = x({}, Fr, { relatedTarget: 0 }), $i = en(Cl), El = x({}, di, {
    animationName: 0,
    elapsedTime: 0,
    pseudoElement: 0
  }), nu = en(El), ef = x({}, di, {
    clipboardData: function(e) {
      return "clipboardData" in e ? e.clipboardData : window.clipboardData;
    }
  }), Yi = en(ef), Ro = x({}, di, { data: 0 }), _l = en(Ro), Lo = {
    Esc: "Escape",
    Spacebar: " ",
    Left: "ArrowLeft",
    Up: "ArrowUp",
    Right: "ArrowRight",
    Down: "ArrowDown",
    Del: "Delete",
    Win: "OS",
    Menu: "ContextMenu",
    Apps: "ContextMenu",
    Scroll: "ScrollLock",
    MozPrintableKey: "Unidentified"
  }, Bo = {
    8: "Backspace",
    9: "Tab",
    12: "Clear",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    19: "Pause",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    45: "Insert",
    46: "Delete",
    112: "F1",
    113: "F2",
    114: "F3",
    115: "F4",
    116: "F5",
    117: "F6",
    118: "F7",
    119: "F8",
    120: "F9",
    121: "F10",
    122: "F11",
    123: "F12",
    144: "NumLock",
    145: "ScrollLock",
    224: "Meta"
  }, gn = {
    Alt: "altKey",
    Control: "ctrlKey",
    Meta: "metaKey",
    Shift: "shiftKey"
  };
  function Ia(e) {
    var t = this.nativeEvent;
    return t.getModifierState ? t.getModifierState(e) : (e = gn[e]) ? !!t[e] : !1;
  }
  function hi() {
    return Ia;
  }
  var ru = x({}, Fr, {
    key: function(e) {
      if (e.key) {
        var t = Lo[e.key] || e.key;
        if (t !== "Unidentified") return t;
      }
      return e.type === "keypress" ? (e = Gi(e), e === 13 ? "Enter" : String.fromCharCode(e)) : e.type === "keydown" || e.type === "keyup" ? Bo[e.keyCode] || "Unidentified" : "";
    },
    code: 0,
    location: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    repeat: 0,
    locale: 0,
    getModifierState: hi,
    charCode: function(e) {
      return e.type === "keypress" ? Gi(e) : 0;
    },
    keyCode: function(e) {
      return e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0;
    },
    which: function(e) {
      return e.type === "keypress" ? Gi(e) : e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0;
    }
  }), jl = en(ru), iu = x({}, wl, {
    pointerId: 0,
    width: 0,
    height: 0,
    pressure: 0,
    tangentialPressure: 0,
    tiltX: 0,
    tiltY: 0,
    twist: 0,
    pointerType: 0,
    isPrimary: 0
  }), Uo = en(iu), Tl = x({}, Fr, {
    touches: 0,
    targetTouches: 0,
    changedTouches: 0,
    altKey: 0,
    metaKey: 0,
    ctrlKey: 0,
    shiftKey: 0,
    getModifierState: hi
  }), Io = en(Tl), mi = x({}, di, {
    propertyName: 0,
    elapsedTime: 0,
    pseudoElement: 0
  }), qo = en(mi), Ho = x({}, wl, {
    deltaX: function(e) {
      return "deltaX" in e ? e.deltaX : "wheelDeltaX" in e ? -e.wheelDeltaX : 0;
    },
    deltaY: function(e) {
      return "deltaY" in e ? e.deltaY : "wheelDeltaY" in e ? -e.wheelDeltaY : "wheelDelta" in e ? -e.wheelDelta : 0;
    },
    deltaZ: 0,
    deltaMode: 0
  }), Nl = en(Ho), Po = x({}, di, {
    newState: 0,
    oldState: 0
  }), au = en(Po), tf = [9, 13, 27, 32], qa = pn && "CompositionEvent" in window, Vr = null;
  pn && "documentMode" in document && (Vr = document.documentMode);
  var nf = pn && "TextEvent" in window && !Vr, Al = pn && (!qa || Vr && 8 < Vr && 11 >= Vr), zl = " ", lu = !1;
  function Fo(e, t) {
    switch (e) {
      case "keyup":
        return tf.indexOf(t.keyCode) !== -1;
      case "keydown":
        return t.keyCode !== 229;
      case "keypress":
      case "mousedown":
      case "focusout":
        return !0;
      default:
        return !1;
    }
  }
  function ou(e) {
    return e = e.detail, typeof e == "object" && "data" in e ? e.data : null;
  }
  var pi = !1;
  function su(e, t) {
    switch (e) {
      case "compositionend":
        return ou(t);
      case "keypress":
        return t.which !== 32 ? null : (lu = !0, zl);
      case "textInput":
        return e = t.data, e === zl && lu ? null : e;
      default:
        return null;
    }
  }
  function rf(e, t) {
    if (pi)
      return e === "compositionend" || !qa && Fo(e, t) ? (e = Ki(), Vi = xl = gr = null, pi = !1, e) : null;
    switch (e) {
      case "paste":
        return null;
      case "keypress":
        if (!(t.ctrlKey || t.altKey || t.metaKey) || t.ctrlKey && t.altKey) {
          if (t.char && 1 < t.char.length)
            return t.char;
          if (t.which) return String.fromCharCode(t.which);
        }
        return null;
      case "compositionend":
        return Al && t.locale !== "ko" ? null : t.data;
      default:
        return null;
    }
  }
  var uu = {
    color: !0,
    date: !0,
    datetime: !0,
    "datetime-local": !0,
    email: !0,
    month: !0,
    number: !0,
    password: !0,
    range: !0,
    search: !0,
    tel: !0,
    text: !0,
    time: !0,
    url: !0,
    week: !0
  };
  function Ml(e) {
    var t = e && e.nodeName && e.nodeName.toLowerCase();
    return t === "input" ? !!uu[e.type] : t === "textarea";
  }
  function Vo(e, t, a, o) {
    ui ? Ut ? Ut.push(o) : Ut = [o] : ui = o, t = Xu(t, "onChange"), 0 < t.length && (a = new vl(
      "onChange",
      "change",
      null,
      a,
      o
    ), e.push({ event: a, listeners: t }));
  }
  var Xi = null, Ha = null;
  function af(e) {
    Gg(e, 0);
  }
  function Ol(e) {
    var t = tr(e);
    if (To(t)) return e;
  }
  function Pa(e, t) {
    if (e === "change") return t;
  }
  var yr = !1;
  if (pn) {
    var It;
    if (pn) {
      var Qi = "oninput" in document;
      if (!Qi) {
        var Bn = document.createElement("div");
        Bn.setAttribute("oninput", "return;"), Qi = typeof Bn.oninput == "function";
      }
      It = Qi;
    } else It = !1;
    yr = It && (!document.documentMode || 9 < document.documentMode);
  }
  function cu() {
    Xi && (Xi.detachEvent("onpropertychange", Dl), Ha = Xi = null);
  }
  function Dl(e) {
    if (e.propertyName === "value" && Ol(Ha)) {
      var t = [];
      Vo(
        t,
        Ha,
        e,
        bl(e)
      ), Fi(af, t);
    }
  }
  function fu(e, t, a) {
    e === "focusin" ? (cu(), Xi = t, Ha = a, Xi.attachEvent("onpropertychange", Dl)) : e === "focusout" && cu();
  }
  function gi(e) {
    if (e === "selectionchange" || e === "keyup" || e === "keydown")
      return Ol(Ha);
  }
  function Ko(e, t) {
    if (e === "click") return Ol(t);
  }
  function Zi(e, t) {
    if (e === "input" || e === "change")
      return Ol(t);
  }
  function Kr(e, t) {
    return e === t && (e !== 0 || 1 / e === 1 / t) || e !== e && t !== t;
  }
  var An = typeof Object.is == "function" ? Object.is : Kr;
  function u(e, t) {
    if (An(e, t)) return !0;
    if (typeof e != "object" || e === null || typeof t != "object" || t === null)
      return !1;
    var a = Object.keys(e), o = Object.keys(t);
    if (a.length !== o.length) return !1;
    for (o = 0; o < a.length; o++) {
      var d = a[o];
      if (!Ui.call(t, d) || !An(e[d], t[d]))
        return !1;
    }
    return !0;
  }
  function m(e) {
    for (; e && e.firstChild; ) e = e.firstChild;
    return e;
  }
  function v(e, t) {
    var a = m(e);
    e = 0;
    for (var o; a; ) {
      if (a.nodeType === 3) {
        if (o = e + a.textContent.length, e <= t && o >= t)
          return { node: a, offset: t - e };
        e = o;
      }
      e: {
        for (; a; ) {
          if (a.nextSibling) {
            a = a.nextSibling;
            break e;
          }
          a = a.parentNode;
        }
        a = void 0;
      }
      a = m(a);
    }
  }
  function w(e, t) {
    return e && t ? e === t ? !0 : e && e.nodeType === 3 ? !1 : t && t.nodeType === 3 ? w(e, t.parentNode) : "contains" in e ? e.contains(t) : e.compareDocumentPosition ? !!(e.compareDocumentPosition(t) & 16) : !1 : !1;
  }
  function C(e) {
    e = e != null && e.ownerDocument != null && e.ownerDocument.defaultView != null ? e.ownerDocument.defaultView : window;
    for (var t = Ct(e.document); t instanceof e.HTMLIFrameElement; ) {
      try {
        var a = typeof t.contentWindow.location.href == "string";
      } catch {
        a = !1;
      }
      if (a) e = t.contentWindow;
      else break;
      t = Ct(e.document);
    }
    return t;
  }
  function j(e) {
    var t = e && e.nodeName && e.nodeName.toLowerCase();
    return t && (t === "input" && (e.type === "text" || e.type === "search" || e.type === "tel" || e.type === "url" || e.type === "password") || t === "textarea" || e.contentEditable === "true");
  }
  var A = pn && "documentMode" in document && 11 >= document.documentMode, O = null, q = null, H = null, $ = !1;
  function L(e, t, a) {
    var o = a.window === a ? a.document : a.nodeType === 9 ? a : a.ownerDocument;
    $ || O == null || O !== Ct(o) || (o = O, "selectionStart" in o && j(o) ? o = { start: o.selectionStart, end: o.selectionEnd } : (o = (o.ownerDocument && o.ownerDocument.defaultView || window).getSelection(), o = {
      anchorNode: o.anchorNode,
      anchorOffset: o.anchorOffset,
      focusNode: o.focusNode,
      focusOffset: o.focusOffset
    }), H && u(H, o) || (H = o, o = Xu(q, "onSelect"), 0 < o.length && (t = new vl(
      "onSelect",
      "select",
      null,
      t,
      a
    ), e.push({ event: t, listeners: o }), t.target = O)));
  }
  function X(e, t) {
    var a = {};
    return a[e.toLowerCase()] = t.toLowerCase(), a["Webkit" + e] = "webkit" + t, a["Moz" + e] = "moz" + t, a;
  }
  var P = {
    animationend: X("Animation", "AnimationEnd"),
    animationiteration: X("Animation", "AnimationIteration"),
    animationstart: X("Animation", "AnimationStart"),
    transitionrun: X("Transition", "TransitionRun"),
    transitionstart: X("Transition", "TransitionStart"),
    transitioncancel: X("Transition", "TransitionCancel"),
    transitionend: X("Transition", "TransitionEnd")
  }, V = {}, K = {};
  pn && (K = document.createElement("div").style, "AnimationEvent" in window || (delete P.animationend.animation, delete P.animationiteration.animation, delete P.animationstart.animation), "TransitionEvent" in window || delete P.transitionend.transition);
  function Y(e) {
    if (V[e]) return V[e];
    if (!P[e]) return e;
    var t = P[e], a;
    for (a in t)
      if (t.hasOwnProperty(a) && a in K)
        return V[e] = t[a];
    return e;
  }
  var te = Y("animationend"), le = Y("animationiteration"), fe = Y("animationstart"), be = Y("transitionrun"), Ae = Y("transitionstart"), Le = Y("transitioncancel"), Ce = Y("transitionend"), ze = /* @__PURE__ */ new Map(), Re = "abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(
    " "
  );
  Re.push("scrollEnd");
  function Ee(e, t) {
    ze.set(e, t), Tr(t, [e]);
  }
  var qe = typeof reportError == "function" ? reportError : function(e) {
    if (typeof window == "object" && typeof window.ErrorEvent == "function") {
      var t = new window.ErrorEvent("error", {
        bubbles: !0,
        cancelable: !0,
        message: typeof e == "object" && e !== null && typeof e.message == "string" ? String(e.message) : String(e),
        error: e
      });
      if (!window.dispatchEvent(t)) return;
    } else if (typeof process == "object" && typeof process.emit == "function") {
      process.emit("uncaughtException", e);
      return;
    }
    console.error(e);
  }, Ye = [], et = 0, it = 0;
  function yn() {
    for (var e = et, t = it = et = 0; t < e; ) {
      var a = Ye[t];
      Ye[t++] = null;
      var o = Ye[t];
      Ye[t++] = null;
      var d = Ye[t];
      Ye[t++] = null;
      var p = Ye[t];
      if (Ye[t++] = null, o !== null && d !== null) {
        var k = o.pending;
        k === null ? d.next = d : (d.next = k.next, k.next = d), o.pending = d;
      }
      p !== 0 && Fa(a, d, p);
    }
  }
  function Je(e, t, a, o) {
    Ye[et++] = e, Ye[et++] = t, Ye[et++] = a, Ye[et++] = o, it |= o, e.lanes |= o, e = e.alternate, e !== null && (e.lanes |= o);
  }
  function tn(e, t, a, o) {
    return Je(e, t, a, o), nn(e);
  }
  function Pt(e, t) {
    return Je(e, null, null, t), nn(e);
  }
  function Fa(e, t, a) {
    e.lanes |= a;
    var o = e.alternate;
    o !== null && (o.lanes |= a);
    for (var d = !1, p = e.return; p !== null; )
      p.childLanes |= a, o = p.alternate, o !== null && (o.childLanes |= a), p.tag === 22 && (e = p.stateNode, e === null || e._visibility & 1 || (d = !0)), e = p, p = p.return;
    return e.tag === 3 ? (p = e.stateNode, d && t !== null && (d = 31 - Oe(a), e = p.hiddenUpdates, o = e[d], o === null ? e[d] = [t] : o.push(t), t.lane = a | 536870912), p) : null;
  }
  function nn(e) {
    if (50 < ms)
      throw ms = 0, md = null, Error(l(185));
    for (var t = e.return; t !== null; )
      e = t, t = e.return;
    return e.tag === 3 ? e.stateNode : null;
  }
  var Vn = {};
  function Go(e, t, a, o) {
    this.tag = e, this.key = a, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.refCleanup = this.ref = null, this.pendingProps = t, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = o, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null;
  }
  function rr(e, t, a, o) {
    return new Go(e, t, a, o);
  }
  function lf(e) {
    return e = e.prototype, !(!e || !e.isReactComponent);
  }
  function yi(e, t) {
    var a = e.alternate;
    return a === null ? (a = rr(
      e.tag,
      t,
      e.key,
      e.mode
    ), a.elementType = e.elementType, a.type = e.type, a.stateNode = e.stateNode, a.alternate = e, e.alternate = a) : (a.pendingProps = t, a.type = e.type, a.flags = 0, a.subtreeFlags = 0, a.deletions = null), a.flags = e.flags & 65011712, a.childLanes = e.childLanes, a.lanes = e.lanes, a.child = e.child, a.memoizedProps = e.memoizedProps, a.memoizedState = e.memoizedState, a.updateQueue = e.updateQueue, t = e.dependencies, a.dependencies = t === null ? null : { lanes: t.lanes, firstContext: t.firstContext }, a.sibling = e.sibling, a.index = e.index, a.ref = e.ref, a.refCleanup = e.refCleanup, a;
  }
  function Tm(e, t) {
    e.flags &= 65011714;
    var a = e.alternate;
    return a === null ? (e.childLanes = 0, e.lanes = t, e.child = null, e.subtreeFlags = 0, e.memoizedProps = null, e.memoizedState = null, e.updateQueue = null, e.dependencies = null, e.stateNode = null) : (e.childLanes = a.childLanes, e.lanes = a.lanes, e.child = a.child, e.subtreeFlags = 0, e.deletions = null, e.memoizedProps = a.memoizedProps, e.memoizedState = a.memoizedState, e.updateQueue = a.updateQueue, e.type = a.type, t = a.dependencies, e.dependencies = t === null ? null : {
      lanes: t.lanes,
      firstContext: t.firstContext
    }), e;
  }
  function du(e, t, a, o, d, p) {
    var k = 0;
    if (o = e, typeof e == "function") lf(e) && (k = 1);
    else if (typeof e == "string")
      k = rx(
        e,
        a,
        ue.current
      ) ? 26 : e === "html" || e === "head" || e === "body" ? 27 : 5;
    else
      e: switch (e) {
        case He:
          return e = rr(31, a, t, d), e.elementType = He, e.lanes = p, e;
        case U:
          return Va(a.children, d, p, t);
        case G:
          k = 8, d |= 24;
          break;
        case D:
          return e = rr(12, a, t, d | 2), e.elementType = D, e.lanes = p, e;
        case we:
          return e = rr(13, a, t, d), e.elementType = we, e.lanes = p, e;
        case I:
          return e = rr(19, a, t, d), e.elementType = I, e.lanes = p, e;
        default:
          if (typeof e == "object" && e !== null)
            switch (e.$$typeof) {
              case ie:
                k = 10;
                break e;
              case ne:
                k = 9;
                break e;
              case _e:
                k = 11;
                break e;
              case J:
                k = 14;
                break e;
              case De:
                k = 16, o = null;
                break e;
            }
          k = 29, a = Error(
            l(130, e === null ? "null" : typeof e, "")
          ), o = null;
      }
    return t = rr(k, a, t, d), t.elementType = e, t.type = o, t.lanes = p, t;
  }
  function Va(e, t, a, o) {
    return e = rr(7, e, o, t), e.lanes = a, e;
  }
  function of(e, t, a) {
    return e = rr(6, e, null, t), e.lanes = a, e;
  }
  function Nm(e) {
    var t = rr(18, null, null, 0);
    return t.stateNode = e, t;
  }
  function sf(e, t, a) {
    return t = rr(
      4,
      e.children !== null ? e.children : [],
      e.key,
      t
    ), t.lanes = a, t.stateNode = {
      containerInfo: e.containerInfo,
      pendingChildren: null,
      implementation: e.implementation
    }, t;
  }
  var Am = /* @__PURE__ */ new WeakMap();
  function br(e, t) {
    if (typeof e == "object" && e !== null) {
      var a = Am.get(e);
      return a !== void 0 ? a : (t = {
        value: e,
        source: t,
        stack: dl(t)
      }, Am.set(e, t), t);
    }
    return {
      value: e,
      source: t,
      stack: dl(t)
    };
  }
  var Rl = [], Ll = 0, hu = null, $o = 0, xr = [], vr = 0, Wi = null, Gr = 1, $r = "";
  function bi(e, t) {
    Rl[Ll++] = $o, Rl[Ll++] = hu, hu = e, $o = t;
  }
  function zm(e, t, a) {
    xr[vr++] = Gr, xr[vr++] = $r, xr[vr++] = Wi, Wi = e;
    var o = Gr;
    e = $r;
    var d = 32 - Oe(o) - 1;
    o &= ~(1 << d), a += 1;
    var p = 32 - Oe(t) + d;
    if (30 < p) {
      var k = d - d % 5;
      p = (o & (1 << k) - 1).toString(32), o >>= k, d -= k, Gr = 1 << 32 - Oe(t) + d | a << d | o, $r = p + e;
    } else
      Gr = 1 << p | a << d | o, $r = e;
  }
  function uf(e) {
    e.return !== null && (bi(e, 1), zm(e, 1, 0));
  }
  function cf(e) {
    for (; e === hu; )
      hu = Rl[--Ll], Rl[Ll] = null, $o = Rl[--Ll], Rl[Ll] = null;
    for (; e === Wi; )
      Wi = xr[--vr], xr[vr] = null, $r = xr[--vr], xr[vr] = null, Gr = xr[--vr], xr[vr] = null;
  }
  function Mm(e, t) {
    xr[vr++] = Gr, xr[vr++] = $r, xr[vr++] = Wi, Gr = t.id, $r = t.overflow, Wi = e;
  }
  var wn = null, qt = null, yt = !1, Ji = null, Sr = !1, ff = Error(l(519));
  function ea(e) {
    var t = Error(
      l(
        418,
        1 < arguments.length && arguments[1] !== void 0 && arguments[1] ? "text" : "HTML",
        ""
      )
    );
    throw Yo(br(t, e)), ff;
  }
  function Om(e) {
    var t = e.stateNode, a = e.type, o = e.memoizedProps;
    switch (t[Rt] = e, t[Xt] = o, a) {
      case "dialog":
        ft("cancel", t), ft("close", t);
        break;
      case "iframe":
      case "object":
      case "embed":
        ft("load", t);
        break;
      case "video":
      case "audio":
        for (a = 0; a < gs.length; a++)
          ft(gs[a], t);
        break;
      case "source":
        ft("error", t);
        break;
      case "img":
      case "image":
      case "link":
        ft("error", t), ft("load", t);
        break;
      case "details":
        ft("toggle", t);
        break;
      case "input":
        ft("invalid", t), yl(
          t,
          o.value,
          o.defaultValue,
          o.checked,
          o.defaultChecked,
          o.type,
          o.name,
          !0
        );
        break;
      case "select":
        ft("invalid", t);
        break;
      case "textarea":
        ft("invalid", t), Ra(t, o.value, o.defaultValue, o.children);
    }
    a = o.children, typeof a != "string" && typeof a != "number" && typeof a != "bigint" || t.textContent === "" + a || o.suppressHydrationWarning === !0 || Qg(t.textContent, a) ? (o.popover != null && (ft("beforetoggle", t), ft("toggle", t)), o.onScroll != null && ft("scroll", t), o.onScrollEnd != null && ft("scrollend", t), o.onClick != null && (t.onclick = Fn), t = !0) : t = !1, t || ea(e, !0);
  }
  function Dm(e) {
    for (wn = e.return; wn; )
      switch (wn.tag) {
        case 5:
        case 31:
        case 13:
          Sr = !1;
          return;
        case 27:
        case 3:
          Sr = !0;
          return;
        default:
          wn = wn.return;
      }
  }
  function Bl(e) {
    if (e !== wn) return !1;
    if (!yt) return Dm(e), yt = !0, !1;
    var t = e.tag, a;
    if ((a = t !== 3 && t !== 27) && ((a = t === 5) && (a = e.type, a = !(a !== "form" && a !== "button") || Nd(e.type, e.memoizedProps)), a = !a), a && qt && ea(e), Dm(e), t === 13) {
      if (e = e.memoizedState, e = e !== null ? e.dehydrated : null, !e) throw Error(l(317));
      qt = a0(e);
    } else if (t === 31) {
      if (e = e.memoizedState, e = e !== null ? e.dehydrated : null, !e) throw Error(l(317));
      qt = a0(e);
    } else
      t === 27 ? (t = qt, ma(e.type) ? (e = Dd, Dd = null, qt = e) : qt = t) : qt = wn ? kr(e.stateNode.nextSibling) : null;
    return !0;
  }
  function Ka() {
    qt = wn = null, yt = !1;
  }
  function df() {
    var e = Ji;
    return e !== null && (Yn === null ? Yn = e : Yn.push.apply(
      Yn,
      e
    ), Ji = null), e;
  }
  function Yo(e) {
    Ji === null ? Ji = [e] : Ji.push(e);
  }
  var hf = B(null), Ga = null, xi = null;
  function ta(e, t, a) {
    z(hf, t._currentValue), t._currentValue = a;
  }
  function vi(e) {
    e._currentValue = hf.current, he(hf);
  }
  function mf(e, t, a) {
    for (; e !== null; ) {
      var o = e.alternate;
      if ((e.childLanes & t) !== t ? (e.childLanes |= t, o !== null && (o.childLanes |= t)) : o !== null && (o.childLanes & t) !== t && (o.childLanes |= t), e === a) break;
      e = e.return;
    }
  }
  function pf(e, t, a, o) {
    var d = e.child;
    for (d !== null && (d.return = e); d !== null; ) {
      var p = d.dependencies;
      if (p !== null) {
        var k = d.child;
        p = p.firstContext;
        e: for (; p !== null; ) {
          var T = p;
          p = d;
          for (var R = 0; R < t.length; R++)
            if (T.context === t[R]) {
              p.lanes |= a, T = p.alternate, T !== null && (T.lanes |= a), mf(
                p.return,
                a,
                e
              ), o || (k = null);
              break e;
            }
          p = T.next;
        }
      } else if (d.tag === 18) {
        if (k = d.return, k === null) throw Error(l(341));
        k.lanes |= a, p = k.alternate, p !== null && (p.lanes |= a), mf(k, a, e), k = null;
      } else k = d.child;
      if (k !== null) k.return = d;
      else
        for (k = d; k !== null; ) {
          if (k === e) {
            k = null;
            break;
          }
          if (d = k.sibling, d !== null) {
            d.return = k.return, k = d;
            break;
          }
          k = k.return;
        }
      d = k;
    }
  }
  function Ul(e, t, a, o) {
    e = null;
    for (var d = t, p = !1; d !== null; ) {
      if (!p) {
        if ((d.flags & 524288) !== 0) p = !0;
        else if ((d.flags & 262144) !== 0) break;
      }
      if (d.tag === 10) {
        var k = d.alternate;
        if (k === null) throw Error(l(387));
        if (k = k.memoizedProps, k !== null) {
          var T = d.type;
          An(d.pendingProps.value, k.value) || (e !== null ? e.push(T) : e = [T]);
        }
      } else if (d === $e.current) {
        if (k = d.alternate, k === null) throw Error(l(387));
        k.memoizedState.memoizedState !== d.memoizedState.memoizedState && (e !== null ? e.push(Ss) : e = [Ss]);
      }
      d = d.return;
    }
    e !== null && pf(
      t,
      e,
      a,
      o
    ), t.flags |= 262144;
  }
  function mu(e) {
    for (e = e.firstContext; e !== null; ) {
      if (!An(
        e.context._currentValue,
        e.memoizedValue
      ))
        return !0;
      e = e.next;
    }
    return !1;
  }
  function $a(e) {
    Ga = e, xi = null, e = e.dependencies, e !== null && (e.firstContext = null);
  }
  function kn(e) {
    return Rm(Ga, e);
  }
  function pu(e, t) {
    return Ga === null && $a(e), Rm(e, t);
  }
  function Rm(e, t) {
    var a = t._currentValue;
    if (t = { context: t, memoizedValue: a, next: null }, xi === null) {
      if (e === null) throw Error(l(308));
      xi = t, e.dependencies = { lanes: 0, firstContext: t }, e.flags |= 524288;
    } else xi = xi.next = t;
    return a;
  }
  var J2 = typeof AbortController < "u" ? AbortController : function() {
    var e = [], t = this.signal = {
      aborted: !1,
      addEventListener: function(a, o) {
        e.push(o);
      }
    };
    this.abort = function() {
      t.aborted = !0, e.forEach(function(a) {
        return a();
      });
    };
  }, eb = n.unstable_scheduleCallback, tb = n.unstable_NormalPriority, rn = {
    $$typeof: ie,
    Consumer: null,
    Provider: null,
    _currentValue: null,
    _currentValue2: null,
    _threadCount: 0
  };
  function gf() {
    return {
      controller: new J2(),
      data: /* @__PURE__ */ new Map(),
      refCount: 0
    };
  }
  function Xo(e) {
    e.refCount--, e.refCount === 0 && eb(tb, function() {
      e.controller.abort();
    });
  }
  var Qo = null, yf = 0, Il = 0, ql = null;
  function nb(e, t) {
    if (Qo === null) {
      var a = Qo = [];
      yf = 0, Il = vd(), ql = {
        status: "pending",
        value: void 0,
        then: function(o) {
          a.push(o);
        }
      };
    }
    return yf++, t.then(Lm, Lm), t;
  }
  function Lm() {
    if (--yf === 0 && Qo !== null) {
      ql !== null && (ql.status = "fulfilled");
      var e = Qo;
      Qo = null, Il = 0, ql = null;
      for (var t = 0; t < e.length; t++) (0, e[t])();
    }
  }
  function rb(e, t) {
    var a = [], o = {
      status: "pending",
      value: null,
      reason: null,
      then: function(d) {
        a.push(d);
      }
    };
    return e.then(
      function() {
        o.status = "fulfilled", o.value = t;
        for (var d = 0; d < a.length; d++) (0, a[d])(t);
      },
      function(d) {
        for (o.status = "rejected", o.reason = d, d = 0; d < a.length; d++)
          (0, a[d])(void 0);
      }
    ), o;
  }
  var Bm = ee.S;
  ee.S = function(e, t) {
    vg = dn(), typeof t == "object" && t !== null && typeof t.then == "function" && nb(e, t), Bm !== null && Bm(e, t);
  };
  var Ya = B(null);
  function bf() {
    var e = Ya.current;
    return e !== null ? e : Ot.pooledCache;
  }
  function gu(e, t) {
    t === null ? z(Ya, Ya.current) : z(Ya, t.pool);
  }
  function Um() {
    var e = bf();
    return e === null ? null : { parent: rn._currentValue, pool: e };
  }
  var Hl = Error(l(460)), xf = Error(l(474)), yu = Error(l(542)), bu = { then: function() {
  } };
  function Im(e) {
    return e = e.status, e === "fulfilled" || e === "rejected";
  }
  function qm(e, t, a) {
    switch (a = e[a], a === void 0 ? e.push(t) : a !== t && (t.then(Fn, Fn), t = a), t.status) {
      case "fulfilled":
        return t.value;
      case "rejected":
        throw e = t.reason, Pm(e), e;
      default:
        if (typeof t.status == "string") t.then(Fn, Fn);
        else {
          if (e = Ot, e !== null && 100 < e.shellSuspendCounter)
            throw Error(l(482));
          e = t, e.status = "pending", e.then(
            function(o) {
              if (t.status === "pending") {
                var d = t;
                d.status = "fulfilled", d.value = o;
              }
            },
            function(o) {
              if (t.status === "pending") {
                var d = t;
                d.status = "rejected", d.reason = o;
              }
            }
          );
        }
        switch (t.status) {
          case "fulfilled":
            return t.value;
          case "rejected":
            throw e = t.reason, Pm(e), e;
        }
        throw Qa = t, Hl;
    }
  }
  function Xa(e) {
    try {
      var t = e._init;
      return t(e._payload);
    } catch (a) {
      throw a !== null && typeof a == "object" && typeof a.then == "function" ? (Qa = a, Hl) : a;
    }
  }
  var Qa = null;
  function Hm() {
    if (Qa === null) throw Error(l(459));
    var e = Qa;
    return Qa = null, e;
  }
  function Pm(e) {
    if (e === Hl || e === yu)
      throw Error(l(483));
  }
  var Pl = null, Zo = 0;
  function xu(e) {
    var t = Zo;
    return Zo += 1, Pl === null && (Pl = []), qm(Pl, e, t);
  }
  function Wo(e, t) {
    t = t.props.ref, e.ref = t !== void 0 ? t : null;
  }
  function vu(e, t) {
    throw t.$$typeof === _ ? Error(l(525)) : (e = Object.prototype.toString.call(t), Error(
      l(
        31,
        e === "[object Object]" ? "object with keys {" + Object.keys(t).join(", ") + "}" : e
      )
    ));
  }
  function Fm(e) {
    function t(Z, F) {
      if (e) {
        var re = Z.deletions;
        re === null ? (Z.deletions = [F], Z.flags |= 16) : re.push(F);
      }
    }
    function a(Z, F) {
      if (!e) return null;
      for (; F !== null; )
        t(Z, F), F = F.sibling;
      return null;
    }
    function o(Z) {
      for (var F = /* @__PURE__ */ new Map(); Z !== null; )
        Z.key !== null ? F.set(Z.key, Z) : F.set(Z.index, Z), Z = Z.sibling;
      return F;
    }
    function d(Z, F) {
      return Z = yi(Z, F), Z.index = 0, Z.sibling = null, Z;
    }
    function p(Z, F, re) {
      return Z.index = re, e ? (re = Z.alternate, re !== null ? (re = re.index, re < F ? (Z.flags |= 67108866, F) : re) : (Z.flags |= 67108866, F)) : (Z.flags |= 1048576, F);
    }
    function k(Z) {
      return e && Z.alternate === null && (Z.flags |= 67108866), Z;
    }
    function T(Z, F, re, ge) {
      return F === null || F.tag !== 6 ? (F = of(re, Z.mode, ge), F.return = Z, F) : (F = d(F, re), F.return = Z, F);
    }
    function R(Z, F, re, ge) {
      var Xe = re.type;
      return Xe === U ? pe(
        Z,
        F,
        re.props.children,
        ge,
        re.key
      ) : F !== null && (F.elementType === Xe || typeof Xe == "object" && Xe !== null && Xe.$$typeof === De && Xa(Xe) === F.type) ? (F = d(F, re.props), Wo(F, re), F.return = Z, F) : (F = du(
        re.type,
        re.key,
        re.props,
        null,
        Z.mode,
        ge
      ), Wo(F, re), F.return = Z, F);
    }
    function ae(Z, F, re, ge) {
      return F === null || F.tag !== 4 || F.stateNode.containerInfo !== re.containerInfo || F.stateNode.implementation !== re.implementation ? (F = sf(re, Z.mode, ge), F.return = Z, F) : (F = d(F, re.children || []), F.return = Z, F);
    }
    function pe(Z, F, re, ge, Xe) {
      return F === null || F.tag !== 7 ? (F = Va(
        re,
        Z.mode,
        ge,
        Xe
      ), F.return = Z, F) : (F = d(F, re), F.return = Z, F);
    }
    function xe(Z, F, re) {
      if (typeof F == "string" && F !== "" || typeof F == "number" || typeof F == "bigint")
        return F = of(
          "" + F,
          Z.mode,
          re
        ), F.return = Z, F;
      if (typeof F == "object" && F !== null) {
        switch (F.$$typeof) {
          case E:
            return re = du(
              F.type,
              F.key,
              F.props,
              null,
              Z.mode,
              re
            ), Wo(re, F), re.return = Z, re;
          case N:
            return F = sf(
              F,
              Z.mode,
              re
            ), F.return = Z, F;
          case De:
            return F = Xa(F), xe(Z, F, re);
        }
        if (ke(F) || ye(F))
          return F = Va(
            F,
            Z.mode,
            re,
            null
          ), F.return = Z, F;
        if (typeof F.then == "function")
          return xe(Z, xu(F), re);
        if (F.$$typeof === ie)
          return xe(
            Z,
            pu(Z, F),
            re
          );
        vu(Z, F);
      }
      return null;
    }
    function oe(Z, F, re, ge) {
      var Xe = F !== null ? F.key : null;
      if (typeof re == "string" && re !== "" || typeof re == "number" || typeof re == "bigint")
        return Xe !== null ? null : T(Z, F, "" + re, ge);
      if (typeof re == "object" && re !== null) {
        switch (re.$$typeof) {
          case E:
            return re.key === Xe ? R(Z, F, re, ge) : null;
          case N:
            return re.key === Xe ? ae(Z, F, re, ge) : null;
          case De:
            return re = Xa(re), oe(Z, F, re, ge);
        }
        if (ke(re) || ye(re))
          return Xe !== null ? null : pe(Z, F, re, ge, null);
        if (typeof re.then == "function")
          return oe(
            Z,
            F,
            xu(re),
            ge
          );
        if (re.$$typeof === ie)
          return oe(
            Z,
            F,
            pu(Z, re),
            ge
          );
        vu(Z, re);
      }
      return null;
    }
    function ce(Z, F, re, ge, Xe) {
      if (typeof ge == "string" && ge !== "" || typeof ge == "number" || typeof ge == "bigint")
        return Z = Z.get(re) || null, T(F, Z, "" + ge, Xe);
      if (typeof ge == "object" && ge !== null) {
        switch (ge.$$typeof) {
          case E:
            return Z = Z.get(
              ge.key === null ? re : ge.key
            ) || null, R(F, Z, ge, Xe);
          case N:
            return Z = Z.get(
              ge.key === null ? re : ge.key
            ) || null, ae(F, Z, ge, Xe);
          case De:
            return ge = Xa(ge), ce(
              Z,
              F,
              re,
              ge,
              Xe
            );
        }
        if (ke(ge) || ye(ge))
          return Z = Z.get(re) || null, pe(F, Z, ge, Xe, null);
        if (typeof ge.then == "function")
          return ce(
            Z,
            F,
            re,
            xu(ge),
            Xe
          );
        if (ge.$$typeof === ie)
          return ce(
            Z,
            F,
            re,
            pu(F, ge),
            Xe
          );
        vu(F, ge);
      }
      return null;
    }
    function Fe(Z, F, re, ge) {
      for (var Xe = null, St = null, Ke = F, lt = F = 0, pt = null; Ke !== null && lt < re.length; lt++) {
        Ke.index > lt ? (pt = Ke, Ke = null) : pt = Ke.sibling;
        var wt = oe(
          Z,
          Ke,
          re[lt],
          ge
        );
        if (wt === null) {
          Ke === null && (Ke = pt);
          break;
        }
        e && Ke && wt.alternate === null && t(Z, Ke), F = p(wt, F, lt), St === null ? Xe = wt : St.sibling = wt, St = wt, Ke = pt;
      }
      if (lt === re.length)
        return a(Z, Ke), yt && bi(Z, lt), Xe;
      if (Ke === null) {
        for (; lt < re.length; lt++)
          Ke = xe(Z, re[lt], ge), Ke !== null && (F = p(
            Ke,
            F,
            lt
          ), St === null ? Xe = Ke : St.sibling = Ke, St = Ke);
        return yt && bi(Z, lt), Xe;
      }
      for (Ke = o(Ke); lt < re.length; lt++)
        pt = ce(
          Ke,
          Z,
          lt,
          re[lt],
          ge
        ), pt !== null && (e && pt.alternate !== null && Ke.delete(
          pt.key === null ? lt : pt.key
        ), F = p(
          pt,
          F,
          lt
        ), St === null ? Xe = pt : St.sibling = pt, St = pt);
      return e && Ke.forEach(function(xa) {
        return t(Z, xa);
      }), yt && bi(Z, lt), Xe;
    }
    function We(Z, F, re, ge) {
      if (re == null) throw Error(l(151));
      for (var Xe = null, St = null, Ke = F, lt = F = 0, pt = null, wt = re.next(); Ke !== null && !wt.done; lt++, wt = re.next()) {
        Ke.index > lt ? (pt = Ke, Ke = null) : pt = Ke.sibling;
        var xa = oe(Z, Ke, wt.value, ge);
        if (xa === null) {
          Ke === null && (Ke = pt);
          break;
        }
        e && Ke && xa.alternate === null && t(Z, Ke), F = p(xa, F, lt), St === null ? Xe = xa : St.sibling = xa, St = xa, Ke = pt;
      }
      if (wt.done)
        return a(Z, Ke), yt && bi(Z, lt), Xe;
      if (Ke === null) {
        for (; !wt.done; lt++, wt = re.next())
          wt = xe(Z, wt.value, ge), wt !== null && (F = p(wt, F, lt), St === null ? Xe = wt : St.sibling = wt, St = wt);
        return yt && bi(Z, lt), Xe;
      }
      for (Ke = o(Ke); !wt.done; lt++, wt = re.next())
        wt = ce(Ke, Z, lt, wt.value, ge), wt !== null && (e && wt.alternate !== null && Ke.delete(wt.key === null ? lt : wt.key), F = p(wt, F, lt), St === null ? Xe = wt : St.sibling = wt, St = wt);
      return e && Ke.forEach(function(mx) {
        return t(Z, mx);
      }), yt && bi(Z, lt), Xe;
    }
    function zt(Z, F, re, ge) {
      if (typeof re == "object" && re !== null && re.type === U && re.key === null && (re = re.props.children), typeof re == "object" && re !== null) {
        switch (re.$$typeof) {
          case E:
            e: {
              for (var Xe = re.key; F !== null; ) {
                if (F.key === Xe) {
                  if (Xe = re.type, Xe === U) {
                    if (F.tag === 7) {
                      a(
                        Z,
                        F.sibling
                      ), ge = d(
                        F,
                        re.props.children
                      ), ge.return = Z, Z = ge;
                      break e;
                    }
                  } else if (F.elementType === Xe || typeof Xe == "object" && Xe !== null && Xe.$$typeof === De && Xa(Xe) === F.type) {
                    a(
                      Z,
                      F.sibling
                    ), ge = d(F, re.props), Wo(ge, re), ge.return = Z, Z = ge;
                    break e;
                  }
                  a(Z, F);
                  break;
                } else t(Z, F);
                F = F.sibling;
              }
              re.type === U ? (ge = Va(
                re.props.children,
                Z.mode,
                ge,
                re.key
              ), ge.return = Z, Z = ge) : (ge = du(
                re.type,
                re.key,
                re.props,
                null,
                Z.mode,
                ge
              ), Wo(ge, re), ge.return = Z, Z = ge);
            }
            return k(Z);
          case N:
            e: {
              for (Xe = re.key; F !== null; ) {
                if (F.key === Xe)
                  if (F.tag === 4 && F.stateNode.containerInfo === re.containerInfo && F.stateNode.implementation === re.implementation) {
                    a(
                      Z,
                      F.sibling
                    ), ge = d(F, re.children || []), ge.return = Z, Z = ge;
                    break e;
                  } else {
                    a(Z, F);
                    break;
                  }
                else t(Z, F);
                F = F.sibling;
              }
              ge = sf(re, Z.mode, ge), ge.return = Z, Z = ge;
            }
            return k(Z);
          case De:
            return re = Xa(re), zt(
              Z,
              F,
              re,
              ge
            );
        }
        if (ke(re))
          return Fe(
            Z,
            F,
            re,
            ge
          );
        if (ye(re)) {
          if (Xe = ye(re), typeof Xe != "function") throw Error(l(150));
          return re = Xe.call(re), We(
            Z,
            F,
            re,
            ge
          );
        }
        if (typeof re.then == "function")
          return zt(
            Z,
            F,
            xu(re),
            ge
          );
        if (re.$$typeof === ie)
          return zt(
            Z,
            F,
            pu(Z, re),
            ge
          );
        vu(Z, re);
      }
      return typeof re == "string" && re !== "" || typeof re == "number" || typeof re == "bigint" ? (re = "" + re, F !== null && F.tag === 6 ? (a(Z, F.sibling), ge = d(F, re), ge.return = Z, Z = ge) : (a(Z, F), ge = of(re, Z.mode, ge), ge.return = Z, Z = ge), k(Z)) : a(Z, F);
    }
    return function(Z, F, re, ge) {
      try {
        Zo = 0;
        var Xe = zt(
          Z,
          F,
          re,
          ge
        );
        return Pl = null, Xe;
      } catch (Ke) {
        if (Ke === Hl || Ke === yu) throw Ke;
        var St = rr(29, Ke, null, Z.mode);
        return St.lanes = ge, St.return = Z, St;
      } finally {
      }
    };
  }
  var Za = Fm(!0), Vm = Fm(!1), na = !1;
  function vf(e) {
    e.updateQueue = {
      baseState: e.memoizedState,
      firstBaseUpdate: null,
      lastBaseUpdate: null,
      shared: { pending: null, lanes: 0, hiddenCallbacks: null },
      callbacks: null
    };
  }
  function Sf(e, t) {
    e = e.updateQueue, t.updateQueue === e && (t.updateQueue = {
      baseState: e.baseState,
      firstBaseUpdate: e.firstBaseUpdate,
      lastBaseUpdate: e.lastBaseUpdate,
      shared: e.shared,
      callbacks: null
    });
  }
  function ra(e) {
    return { lane: e, tag: 0, payload: null, callback: null, next: null };
  }
  function ia(e, t, a) {
    var o = e.updateQueue;
    if (o === null) return null;
    if (o = o.shared, (Et & 2) !== 0) {
      var d = o.pending;
      return d === null ? t.next = t : (t.next = d.next, d.next = t), o.pending = t, t = nn(e), Fa(e, null, a), t;
    }
    return Je(e, o, t, a), nn(e);
  }
  function Jo(e, t, a) {
    if (t = t.updateQueue, t !== null && (t = t.shared, (a & 4194048) !== 0)) {
      var o = t.lanes;
      o &= e.pendingLanes, a |= o, t.lanes = a, Mt(e, a);
    }
  }
  function wf(e, t) {
    var a = e.updateQueue, o = e.alternate;
    if (o !== null && (o = o.updateQueue, a === o)) {
      var d = null, p = null;
      if (a = a.firstBaseUpdate, a !== null) {
        do {
          var k = {
            lane: a.lane,
            tag: a.tag,
            payload: a.payload,
            callback: null,
            next: null
          };
          p === null ? d = p = k : p = p.next = k, a = a.next;
        } while (a !== null);
        p === null ? d = p = t : p = p.next = t;
      } else d = p = t;
      a = {
        baseState: o.baseState,
        firstBaseUpdate: d,
        lastBaseUpdate: p,
        shared: o.shared,
        callbacks: o.callbacks
      }, e.updateQueue = a;
      return;
    }
    e = a.lastBaseUpdate, e === null ? a.firstBaseUpdate = t : e.next = t, a.lastBaseUpdate = t;
  }
  var kf = !1;
  function es() {
    if (kf) {
      var e = ql;
      if (e !== null) throw e;
    }
  }
  function ts(e, t, a, o) {
    kf = !1;
    var d = e.updateQueue;
    na = !1;
    var p = d.firstBaseUpdate, k = d.lastBaseUpdate, T = d.shared.pending;
    if (T !== null) {
      d.shared.pending = null;
      var R = T, ae = R.next;
      R.next = null, k === null ? p = ae : k.next = ae, k = R;
      var pe = e.alternate;
      pe !== null && (pe = pe.updateQueue, T = pe.lastBaseUpdate, T !== k && (T === null ? pe.firstBaseUpdate = ae : T.next = ae, pe.lastBaseUpdate = R));
    }
    if (p !== null) {
      var xe = d.baseState;
      k = 0, pe = ae = R = null, T = p;
      do {
        var oe = T.lane & -536870913, ce = oe !== T.lane;
        if (ce ? (mt & oe) === oe : (o & oe) === oe) {
          oe !== 0 && oe === Il && (kf = !0), pe !== null && (pe = pe.next = {
            lane: 0,
            tag: T.tag,
            payload: T.payload,
            callback: null,
            next: null
          });
          e: {
            var Fe = e, We = T;
            oe = t;
            var zt = a;
            switch (We.tag) {
              case 1:
                if (Fe = We.payload, typeof Fe == "function") {
                  xe = Fe.call(zt, xe, oe);
                  break e;
                }
                xe = Fe;
                break e;
              case 3:
                Fe.flags = Fe.flags & -65537 | 128;
              case 0:
                if (Fe = We.payload, oe = typeof Fe == "function" ? Fe.call(zt, xe, oe) : Fe, oe == null) break e;
                xe = x({}, xe, oe);
                break e;
              case 2:
                na = !0;
            }
          }
          oe = T.callback, oe !== null && (e.flags |= 64, ce && (e.flags |= 8192), ce = d.callbacks, ce === null ? d.callbacks = [oe] : ce.push(oe));
        } else
          ce = {
            lane: oe,
            tag: T.tag,
            payload: T.payload,
            callback: T.callback,
            next: null
          }, pe === null ? (ae = pe = ce, R = xe) : pe = pe.next = ce, k |= oe;
        if (T = T.next, T === null) {
          if (T = d.shared.pending, T === null)
            break;
          ce = T, T = ce.next, ce.next = null, d.lastBaseUpdate = ce, d.shared.pending = null;
        }
      } while (!0);
      pe === null && (R = xe), d.baseState = R, d.firstBaseUpdate = ae, d.lastBaseUpdate = pe, p === null && (d.shared.lanes = 0), ua |= k, e.lanes = k, e.memoizedState = xe;
    }
  }
  function Km(e, t) {
    if (typeof e != "function")
      throw Error(l(191, e));
    e.call(t);
  }
  function Gm(e, t) {
    var a = e.callbacks;
    if (a !== null)
      for (e.callbacks = null, e = 0; e < a.length; e++)
        Km(a[e], t);
  }
  var Fl = B(null), Su = B(0);
  function $m(e, t) {
    e = Ni, z(Su, e), z(Fl, t), Ni = e | t.baseLanes;
  }
  function Cf() {
    z(Su, Ni), z(Fl, Fl.current);
  }
  function Ef() {
    Ni = Su.current, he(Fl), he(Su);
  }
  var ir = B(null), wr = null;
  function aa(e) {
    var t = e.alternate;
    z(Zt, Zt.current & 1), z(ir, e), wr === null && (t === null || Fl.current !== null || t.memoizedState !== null) && (wr = e);
  }
  function _f(e) {
    z(Zt, Zt.current), z(ir, e), wr === null && (wr = e);
  }
  function Ym(e) {
    e.tag === 22 ? (z(Zt, Zt.current), z(ir, e), wr === null && (wr = e)) : la();
  }
  function la() {
    z(Zt, Zt.current), z(ir, ir.current);
  }
  function ar(e) {
    he(ir), wr === e && (wr = null), he(Zt);
  }
  var Zt = B(0);
  function wu(e) {
    for (var t = e; t !== null; ) {
      if (t.tag === 13) {
        var a = t.memoizedState;
        if (a !== null && (a = a.dehydrated, a === null || Md(a) || Od(a)))
          return t;
      } else if (t.tag === 19 && (t.memoizedProps.revealOrder === "forwards" || t.memoizedProps.revealOrder === "backwards" || t.memoizedProps.revealOrder === "unstable_legacy-backwards" || t.memoizedProps.revealOrder === "together")) {
        if ((t.flags & 128) !== 0) return t;
      } else if (t.child !== null) {
        t.child.return = t, t = t.child;
        continue;
      }
      if (t === e) break;
      for (; t.sibling === null; ) {
        if (t.return === null || t.return === e) return null;
        t = t.return;
      }
      t.sibling.return = t.return, t = t.sibling;
    }
    return null;
  }
  var Si = 0, at = null, Nt = null, an = null, ku = !1, Vl = !1, Wa = !1, Cu = 0, ns = 0, Kl = null, ib = 0;
  function Gt() {
    throw Error(l(321));
  }
  function jf(e, t) {
    if (t === null) return !1;
    for (var a = 0; a < t.length && a < e.length; a++)
      if (!An(e[a], t[a])) return !1;
    return !0;
  }
  function Tf(e, t, a, o, d, p) {
    return Si = p, at = t, t.memoizedState = null, t.updateQueue = null, t.lanes = 0, ee.H = e === null || e.memoizedState === null ? zp : Ff, Wa = !1, p = a(o, d), Wa = !1, Vl && (p = Qm(
      t,
      a,
      o,
      d
    )), Xm(e), p;
  }
  function Xm(e) {
    ee.H = as;
    var t = Nt !== null && Nt.next !== null;
    if (Si = 0, an = Nt = at = null, ku = !1, ns = 0, Kl = null, t) throw Error(l(300));
    e === null || ln || (e = e.dependencies, e !== null && mu(e) && (ln = !0));
  }
  function Qm(e, t, a, o) {
    at = e;
    var d = 0;
    do {
      if (Vl && (Kl = null), ns = 0, Vl = !1, 25 <= d) throw Error(l(301));
      if (d += 1, an = Nt = null, e.updateQueue != null) {
        var p = e.updateQueue;
        p.lastEffect = null, p.events = null, p.stores = null, p.memoCache != null && (p.memoCache.index = 0);
      }
      ee.H = Mp, p = t(a, o);
    } while (Vl);
    return p;
  }
  function ab() {
    var e = ee.H, t = e.useState()[0];
    return t = typeof t.then == "function" ? rs(t) : t, e = e.useState()[0], (Nt !== null ? Nt.memoizedState : null) !== e && (at.flags |= 1024), t;
  }
  function Nf() {
    var e = Cu !== 0;
    return Cu = 0, e;
  }
  function Af(e, t, a) {
    t.updateQueue = e.updateQueue, t.flags &= -2053, e.lanes &= ~a;
  }
  function zf(e) {
    if (ku) {
      for (e = e.memoizedState; e !== null; ) {
        var t = e.queue;
        t !== null && (t.pending = null), e = e.next;
      }
      ku = !1;
    }
    Si = 0, an = Nt = at = null, Vl = !1, ns = Cu = 0, Kl = null;
  }
  function Un() {
    var e = {
      memoizedState: null,
      baseState: null,
      baseQueue: null,
      queue: null,
      next: null
    };
    return an === null ? at.memoizedState = an = e : an = an.next = e, an;
  }
  function Wt() {
    if (Nt === null) {
      var e = at.alternate;
      e = e !== null ? e.memoizedState : null;
    } else e = Nt.next;
    var t = an === null ? at.memoizedState : an.next;
    if (t !== null)
      an = t, Nt = e;
    else {
      if (e === null)
        throw at.alternate === null ? Error(l(467)) : Error(l(310));
      Nt = e, e = {
        memoizedState: Nt.memoizedState,
        baseState: Nt.baseState,
        baseQueue: Nt.baseQueue,
        queue: Nt.queue,
        next: null
      }, an === null ? at.memoizedState = an = e : an = an.next = e;
    }
    return an;
  }
  function Eu() {
    return { lastEffect: null, events: null, stores: null, memoCache: null };
  }
  function rs(e) {
    var t = ns;
    return ns += 1, Kl === null && (Kl = []), e = qm(Kl, e, t), t = at, (an === null ? t.memoizedState : an.next) === null && (t = t.alternate, ee.H = t === null || t.memoizedState === null ? zp : Ff), e;
  }
  function _u(e) {
    if (e !== null && typeof e == "object") {
      if (typeof e.then == "function") return rs(e);
      if (e.$$typeof === ie) return kn(e);
    }
    throw Error(l(438, String(e)));
  }
  function Mf(e) {
    var t = null, a = at.updateQueue;
    if (a !== null && (t = a.memoCache), t == null) {
      var o = at.alternate;
      o !== null && (o = o.updateQueue, o !== null && (o = o.memoCache, o != null && (t = {
        data: o.data.map(function(d) {
          return d.slice();
        }),
        index: 0
      })));
    }
    if (t == null && (t = { data: [], index: 0 }), a === null && (a = Eu(), at.updateQueue = a), a.memoCache = t, a = t.data[t.index], a === void 0)
      for (a = t.data[t.index] = Array(e), o = 0; o < e; o++)
        a[o] = W;
    return t.index++, a;
  }
  function wi(e, t) {
    return typeof t == "function" ? t(e) : t;
  }
  function ju(e) {
    var t = Wt();
    return Of(t, Nt, e);
  }
  function Of(e, t, a) {
    var o = e.queue;
    if (o === null) throw Error(l(311));
    o.lastRenderedReducer = a;
    var d = e.baseQueue, p = o.pending;
    if (p !== null) {
      if (d !== null) {
        var k = d.next;
        d.next = p.next, p.next = k;
      }
      t.baseQueue = d = p, o.pending = null;
    }
    if (p = e.baseState, d === null) e.memoizedState = p;
    else {
      t = d.next;
      var T = k = null, R = null, ae = t, pe = !1;
      do {
        var xe = ae.lane & -536870913;
        if (xe !== ae.lane ? (mt & xe) === xe : (Si & xe) === xe) {
          var oe = ae.revertLane;
          if (oe === 0)
            R !== null && (R = R.next = {
              lane: 0,
              revertLane: 0,
              gesture: null,
              action: ae.action,
              hasEagerState: ae.hasEagerState,
              eagerState: ae.eagerState,
              next: null
            }), xe === Il && (pe = !0);
          else if ((Si & oe) === oe) {
            ae = ae.next, oe === Il && (pe = !0);
            continue;
          } else
            xe = {
              lane: 0,
              revertLane: ae.revertLane,
              gesture: null,
              action: ae.action,
              hasEagerState: ae.hasEagerState,
              eagerState: ae.eagerState,
              next: null
            }, R === null ? (T = R = xe, k = p) : R = R.next = xe, at.lanes |= oe, ua |= oe;
          xe = ae.action, Wa && a(p, xe), p = ae.hasEagerState ? ae.eagerState : a(p, xe);
        } else
          oe = {
            lane: xe,
            revertLane: ae.revertLane,
            gesture: ae.gesture,
            action: ae.action,
            hasEagerState: ae.hasEagerState,
            eagerState: ae.eagerState,
            next: null
          }, R === null ? (T = R = oe, k = p) : R = R.next = oe, at.lanes |= xe, ua |= xe;
        ae = ae.next;
      } while (ae !== null && ae !== t);
      if (R === null ? k = p : R.next = T, !An(p, e.memoizedState) && (ln = !0, pe && (a = ql, a !== null)))
        throw a;
      e.memoizedState = p, e.baseState = k, e.baseQueue = R, o.lastRenderedState = p;
    }
    return d === null && (o.lanes = 0), [e.memoizedState, o.dispatch];
  }
  function Df(e) {
    var t = Wt(), a = t.queue;
    if (a === null) throw Error(l(311));
    a.lastRenderedReducer = e;
    var o = a.dispatch, d = a.pending, p = t.memoizedState;
    if (d !== null) {
      a.pending = null;
      var k = d = d.next;
      do
        p = e(p, k.action), k = k.next;
      while (k !== d);
      An(p, t.memoizedState) || (ln = !0), t.memoizedState = p, t.baseQueue === null && (t.baseState = p), a.lastRenderedState = p;
    }
    return [p, o];
  }
  function Zm(e, t, a) {
    var o = at, d = Wt(), p = yt;
    if (p) {
      if (a === void 0) throw Error(l(407));
      a = a();
    } else a = t();
    var k = !An(
      (Nt || d).memoizedState,
      a
    );
    if (k && (d.memoizedState = a, ln = !0), d = d.queue, Bf(ep.bind(null, o, d, e), [
      e
    ]), d.getSnapshot !== t || k || an !== null && an.memoizedState.tag & 1) {
      if (o.flags |= 2048, Gl(
        9,
        { destroy: void 0 },
        Jm.bind(
          null,
          o,
          d,
          a,
          t
        ),
        null
      ), Ot === null) throw Error(l(349));
      p || (Si & 127) !== 0 || Wm(o, t, a);
    }
    return a;
  }
  function Wm(e, t, a) {
    e.flags |= 16384, e = { getSnapshot: t, value: a }, t = at.updateQueue, t === null ? (t = Eu(), at.updateQueue = t, t.stores = [e]) : (a = t.stores, a === null ? t.stores = [e] : a.push(e));
  }
  function Jm(e, t, a, o) {
    t.value = a, t.getSnapshot = o, tp(t) && np(e);
  }
  function ep(e, t, a) {
    return a(function() {
      tp(t) && np(e);
    });
  }
  function tp(e) {
    var t = e.getSnapshot;
    e = e.value;
    try {
      var a = t();
      return !An(e, a);
    } catch {
      return !0;
    }
  }
  function np(e) {
    var t = Pt(e, 2);
    t !== null && Xn(t, e, 2);
  }
  function Rf(e) {
    var t = Un();
    if (typeof e == "function") {
      var a = e;
      if (e = a(), Wa) {
        Kt(!0);
        try {
          a();
        } finally {
          Kt(!1);
        }
      }
    }
    return t.memoizedState = t.baseState = e, t.queue = {
      pending: null,
      lanes: 0,
      dispatch: null,
      lastRenderedReducer: wi,
      lastRenderedState: e
    }, t;
  }
  function rp(e, t, a, o) {
    return e.baseState = a, Of(
      e,
      Nt,
      typeof o == "function" ? o : wi
    );
  }
  function lb(e, t, a, o, d) {
    if (Au(e)) throw Error(l(485));
    if (e = t.action, e !== null) {
      var p = {
        payload: d,
        action: e,
        next: null,
        isTransition: !0,
        status: "pending",
        value: null,
        reason: null,
        listeners: [],
        then: function(k) {
          p.listeners.push(k);
        }
      };
      ee.T !== null ? a(!0) : p.isTransition = !1, o(p), a = t.pending, a === null ? (p.next = t.pending = p, ip(t, p)) : (p.next = a.next, t.pending = a.next = p);
    }
  }
  function ip(e, t) {
    var a = t.action, o = t.payload, d = e.state;
    if (t.isTransition) {
      var p = ee.T, k = {};
      ee.T = k;
      try {
        var T = a(d, o), R = ee.S;
        R !== null && R(k, T), ap(e, t, T);
      } catch (ae) {
        Lf(e, t, ae);
      } finally {
        p !== null && k.types !== null && (p.types = k.types), ee.T = p;
      }
    } else
      try {
        p = a(d, o), ap(e, t, p);
      } catch (ae) {
        Lf(e, t, ae);
      }
  }
  function ap(e, t, a) {
    a !== null && typeof a == "object" && typeof a.then == "function" ? a.then(
      function(o) {
        lp(e, t, o);
      },
      function(o) {
        return Lf(e, t, o);
      }
    ) : lp(e, t, a);
  }
  function lp(e, t, a) {
    t.status = "fulfilled", t.value = a, op(t), e.state = a, t = e.pending, t !== null && (a = t.next, a === t ? e.pending = null : (a = a.next, t.next = a, ip(e, a)));
  }
  function Lf(e, t, a) {
    var o = e.pending;
    if (e.pending = null, o !== null) {
      o = o.next;
      do
        t.status = "rejected", t.reason = a, op(t), t = t.next;
      while (t !== o);
    }
    e.action = null;
  }
  function op(e) {
    e = e.listeners;
    for (var t = 0; t < e.length; t++) (0, e[t])();
  }
  function sp(e, t) {
    return t;
  }
  function up(e, t) {
    if (yt) {
      var a = Ot.formState;
      if (a !== null) {
        e: {
          var o = at;
          if (yt) {
            if (qt) {
              t: {
                for (var d = qt, p = Sr; d.nodeType !== 8; ) {
                  if (!p) {
                    d = null;
                    break t;
                  }
                  if (d = kr(
                    d.nextSibling
                  ), d === null) {
                    d = null;
                    break t;
                  }
                }
                p = d.data, d = p === "F!" || p === "F" ? d : null;
              }
              if (d) {
                qt = kr(
                  d.nextSibling
                ), o = d.data === "F!";
                break e;
              }
            }
            ea(o);
          }
          o = !1;
        }
        o && (t = a[0]);
      }
    }
    return a = Un(), a.memoizedState = a.baseState = t, o = {
      pending: null,
      lanes: 0,
      dispatch: null,
      lastRenderedReducer: sp,
      lastRenderedState: t
    }, a.queue = o, a = Tp.bind(
      null,
      at,
      o
    ), o.dispatch = a, o = Rf(!1), p = Pf.bind(
      null,
      at,
      !1,
      o.queue
    ), o = Un(), d = {
      state: t,
      dispatch: null,
      action: e,
      pending: null
    }, o.queue = d, a = lb.bind(
      null,
      at,
      d,
      p,
      a
    ), d.dispatch = a, o.memoizedState = e, [t, a, !1];
  }
  function cp(e) {
    var t = Wt();
    return fp(t, Nt, e);
  }
  function fp(e, t, a) {
    if (t = Of(
      e,
      t,
      sp
    )[0], e = ju(wi)[0], typeof t == "object" && t !== null && typeof t.then == "function")
      try {
        var o = rs(t);
      } catch (k) {
        throw k === Hl ? yu : k;
      }
    else o = t;
    t = Wt();
    var d = t.queue, p = d.dispatch;
    return a !== t.memoizedState && (at.flags |= 2048, Gl(
      9,
      { destroy: void 0 },
      ob.bind(null, d, a),
      null
    )), [o, p, e];
  }
  function ob(e, t) {
    e.action = t;
  }
  function dp(e) {
    var t = Wt(), a = Nt;
    if (a !== null)
      return fp(t, a, e);
    Wt(), t = t.memoizedState, a = Wt();
    var o = a.queue.dispatch;
    return a.memoizedState = e, [t, o, !1];
  }
  function Gl(e, t, a, o) {
    return e = { tag: e, create: a, deps: o, inst: t, next: null }, t = at.updateQueue, t === null && (t = Eu(), at.updateQueue = t), a = t.lastEffect, a === null ? t.lastEffect = e.next = e : (o = a.next, a.next = e, e.next = o, t.lastEffect = e), e;
  }
  function hp() {
    return Wt().memoizedState;
  }
  function Tu(e, t, a, o) {
    var d = Un();
    at.flags |= e, d.memoizedState = Gl(
      1 | t,
      { destroy: void 0 },
      a,
      o === void 0 ? null : o
    );
  }
  function Nu(e, t, a, o) {
    var d = Wt();
    o = o === void 0 ? null : o;
    var p = d.memoizedState.inst;
    Nt !== null && o !== null && jf(o, Nt.memoizedState.deps) ? d.memoizedState = Gl(t, p, a, o) : (at.flags |= e, d.memoizedState = Gl(
      1 | t,
      p,
      a,
      o
    ));
  }
  function mp(e, t) {
    Tu(8390656, 8, e, t);
  }
  function Bf(e, t) {
    Nu(2048, 8, e, t);
  }
  function sb(e) {
    at.flags |= 4;
    var t = at.updateQueue;
    if (t === null)
      t = Eu(), at.updateQueue = t, t.events = [e];
    else {
      var a = t.events;
      a === null ? t.events = [e] : a.push(e);
    }
  }
  function pp(e) {
    var t = Wt().memoizedState;
    return sb({ ref: t, nextImpl: e }), function() {
      if ((Et & 2) !== 0) throw Error(l(440));
      return t.impl.apply(void 0, arguments);
    };
  }
  function gp(e, t) {
    return Nu(4, 2, e, t);
  }
  function yp(e, t) {
    return Nu(4, 4, e, t);
  }
  function bp(e, t) {
    if (typeof t == "function") {
      e = e();
      var a = t(e);
      return function() {
        typeof a == "function" ? a() : t(null);
      };
    }
    if (t != null)
      return e = e(), t.current = e, function() {
        t.current = null;
      };
  }
  function xp(e, t, a) {
    a = a != null ? a.concat([e]) : null, Nu(4, 4, bp.bind(null, t, e), a);
  }
  function Uf() {
  }
  function vp(e, t) {
    var a = Wt();
    t = t === void 0 ? null : t;
    var o = a.memoizedState;
    return t !== null && jf(t, o[1]) ? o[0] : (a.memoizedState = [e, t], e);
  }
  function Sp(e, t) {
    var a = Wt();
    t = t === void 0 ? null : t;
    var o = a.memoizedState;
    if (t !== null && jf(t, o[1]))
      return o[0];
    if (o = e(), Wa) {
      Kt(!0);
      try {
        e();
      } finally {
        Kt(!1);
      }
    }
    return a.memoizedState = [o, t], o;
  }
  function If(e, t, a) {
    return a === void 0 || (Si & 1073741824) !== 0 && (mt & 261930) === 0 ? e.memoizedState = t : (e.memoizedState = a, e = wg(), at.lanes |= e, ua |= e, a);
  }
  function wp(e, t, a, o) {
    return An(a, t) ? a : Fl.current !== null ? (e = If(e, a, o), An(e, t) || (ln = !0), e) : (Si & 42) === 0 || (Si & 1073741824) !== 0 && (mt & 261930) === 0 ? (ln = !0, e.memoizedState = a) : (e = wg(), at.lanes |= e, ua |= e, t);
  }
  function kp(e, t, a, o, d) {
    var p = ve.p;
    ve.p = p !== 0 && 8 > p ? p : 8;
    var k = ee.T, T = {};
    ee.T = T, Pf(e, !1, t, a);
    try {
      var R = d(), ae = ee.S;
      if (ae !== null && ae(T, R), R !== null && typeof R == "object" && typeof R.then == "function") {
        var pe = rb(
          R,
          o
        );
        is(
          e,
          t,
          pe,
          sr(e)
        );
      } else
        is(
          e,
          t,
          o,
          sr(e)
        );
    } catch (xe) {
      is(
        e,
        t,
        { then: function() {
        }, status: "rejected", reason: xe },
        sr()
      );
    } finally {
      ve.p = p, k !== null && T.types !== null && (k.types = T.types), ee.T = k;
    }
  }
  function ub() {
  }
  function qf(e, t, a, o) {
    if (e.tag !== 5) throw Error(l(476));
    var d = Cp(e).queue;
    kp(
      e,
      d,
      t,
      Ie,
      a === null ? ub : function() {
        return Ep(e), a(o);
      }
    );
  }
  function Cp(e) {
    var t = e.memoizedState;
    if (t !== null) return t;
    t = {
      memoizedState: Ie,
      baseState: Ie,
      baseQueue: null,
      queue: {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: wi,
        lastRenderedState: Ie
      },
      next: null
    };
    var a = {};
    return t.next = {
      memoizedState: a,
      baseState: a,
      baseQueue: null,
      queue: {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: wi,
        lastRenderedState: a
      },
      next: null
    }, e.memoizedState = t, e = e.alternate, e !== null && (e.memoizedState = t), t;
  }
  function Ep(e) {
    var t = Cp(e);
    t.next === null && (t = e.alternate.memoizedState), is(
      e,
      t.next.queue,
      {},
      sr()
    );
  }
  function Hf() {
    return kn(Ss);
  }
  function _p() {
    return Wt().memoizedState;
  }
  function jp() {
    return Wt().memoizedState;
  }
  function cb(e) {
    for (var t = e.return; t !== null; ) {
      switch (t.tag) {
        case 24:
        case 3:
          var a = sr();
          e = ra(a);
          var o = ia(t, e, a);
          o !== null && (Xn(o, t, a), Jo(o, t, a)), t = { cache: gf() }, e.payload = t;
          return;
      }
      t = t.return;
    }
  }
  function fb(e, t, a) {
    var o = sr();
    a = {
      lane: o,
      revertLane: 0,
      gesture: null,
      action: a,
      hasEagerState: !1,
      eagerState: null,
      next: null
    }, Au(e) ? Np(t, a) : (a = tn(e, t, a, o), a !== null && (Xn(a, e, o), Ap(a, t, o)));
  }
  function Tp(e, t, a) {
    var o = sr();
    is(e, t, a, o);
  }
  function is(e, t, a, o) {
    var d = {
      lane: o,
      revertLane: 0,
      gesture: null,
      action: a,
      hasEagerState: !1,
      eagerState: null,
      next: null
    };
    if (Au(e)) Np(t, d);
    else {
      var p = e.alternate;
      if (e.lanes === 0 && (p === null || p.lanes === 0) && (p = t.lastRenderedReducer, p !== null))
        try {
          var k = t.lastRenderedState, T = p(k, a);
          if (d.hasEagerState = !0, d.eagerState = T, An(T, k))
            return Je(e, t, d, 0), Ot === null && yn(), !1;
        } catch {
        } finally {
        }
      if (a = tn(e, t, d, o), a !== null)
        return Xn(a, e, o), Ap(a, t, o), !0;
    }
    return !1;
  }
  function Pf(e, t, a, o) {
    if (o = {
      lane: 2,
      revertLane: vd(),
      gesture: null,
      action: o,
      hasEagerState: !1,
      eagerState: null,
      next: null
    }, Au(e)) {
      if (t) throw Error(l(479));
    } else
      t = tn(
        e,
        a,
        o,
        2
      ), t !== null && Xn(t, e, 2);
  }
  function Au(e) {
    var t = e.alternate;
    return e === at || t !== null && t === at;
  }
  function Np(e, t) {
    Vl = ku = !0;
    var a = e.pending;
    a === null ? t.next = t : (t.next = a.next, a.next = t), e.pending = t;
  }
  function Ap(e, t, a) {
    if ((a & 4194048) !== 0) {
      var o = t.lanes;
      o &= e.pendingLanes, a |= o, t.lanes = a, Mt(e, a);
    }
  }
  var as = {
    readContext: kn,
    use: _u,
    useCallback: Gt,
    useContext: Gt,
    useEffect: Gt,
    useImperativeHandle: Gt,
    useLayoutEffect: Gt,
    useInsertionEffect: Gt,
    useMemo: Gt,
    useReducer: Gt,
    useRef: Gt,
    useState: Gt,
    useDebugValue: Gt,
    useDeferredValue: Gt,
    useTransition: Gt,
    useSyncExternalStore: Gt,
    useId: Gt,
    useHostTransitionStatus: Gt,
    useFormState: Gt,
    useActionState: Gt,
    useOptimistic: Gt,
    useMemoCache: Gt,
    useCacheRefresh: Gt
  };
  as.useEffectEvent = Gt;
  var zp = {
    readContext: kn,
    use: _u,
    useCallback: function(e, t) {
      return Un().memoizedState = [
        e,
        t === void 0 ? null : t
      ], e;
    },
    useContext: kn,
    useEffect: mp,
    useImperativeHandle: function(e, t, a) {
      a = a != null ? a.concat([e]) : null, Tu(
        4194308,
        4,
        bp.bind(null, t, e),
        a
      );
    },
    useLayoutEffect: function(e, t) {
      return Tu(4194308, 4, e, t);
    },
    useInsertionEffect: function(e, t) {
      Tu(4, 2, e, t);
    },
    useMemo: function(e, t) {
      var a = Un();
      t = t === void 0 ? null : t;
      var o = e();
      if (Wa) {
        Kt(!0);
        try {
          e();
        } finally {
          Kt(!1);
        }
      }
      return a.memoizedState = [o, t], o;
    },
    useReducer: function(e, t, a) {
      var o = Un();
      if (a !== void 0) {
        var d = a(t);
        if (Wa) {
          Kt(!0);
          try {
            a(t);
          } finally {
            Kt(!1);
          }
        }
      } else d = t;
      return o.memoizedState = o.baseState = d, e = {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: e,
        lastRenderedState: d
      }, o.queue = e, e = e.dispatch = fb.bind(
        null,
        at,
        e
      ), [o.memoizedState, e];
    },
    useRef: function(e) {
      var t = Un();
      return e = { current: e }, t.memoizedState = e;
    },
    useState: function(e) {
      e = Rf(e);
      var t = e.queue, a = Tp.bind(null, at, t);
      return t.dispatch = a, [e.memoizedState, a];
    },
    useDebugValue: Uf,
    useDeferredValue: function(e, t) {
      var a = Un();
      return If(a, e, t);
    },
    useTransition: function() {
      var e = Rf(!1);
      return e = kp.bind(
        null,
        at,
        e.queue,
        !0,
        !1
      ), Un().memoizedState = e, [!1, e];
    },
    useSyncExternalStore: function(e, t, a) {
      var o = at, d = Un();
      if (yt) {
        if (a === void 0)
          throw Error(l(407));
        a = a();
      } else {
        if (a = t(), Ot === null)
          throw Error(l(349));
        (mt & 127) !== 0 || Wm(o, t, a);
      }
      d.memoizedState = a;
      var p = { value: a, getSnapshot: t };
      return d.queue = p, mp(ep.bind(null, o, p, e), [
        e
      ]), o.flags |= 2048, Gl(
        9,
        { destroy: void 0 },
        Jm.bind(
          null,
          o,
          p,
          a,
          t
        ),
        null
      ), a;
    },
    useId: function() {
      var e = Un(), t = Ot.identifierPrefix;
      if (yt) {
        var a = $r, o = Gr;
        a = (o & ~(1 << 32 - Oe(o) - 1)).toString(32) + a, t = "_" + t + "R_" + a, a = Cu++, 0 < a && (t += "H" + a.toString(32)), t += "_";
      } else
        a = ib++, t = "_" + t + "r_" + a.toString(32) + "_";
      return e.memoizedState = t;
    },
    useHostTransitionStatus: Hf,
    useFormState: up,
    useActionState: up,
    useOptimistic: function(e) {
      var t = Un();
      t.memoizedState = t.baseState = e;
      var a = {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: null,
        lastRenderedState: null
      };
      return t.queue = a, t = Pf.bind(
        null,
        at,
        !0,
        a
      ), a.dispatch = t, [e, t];
    },
    useMemoCache: Mf,
    useCacheRefresh: function() {
      return Un().memoizedState = cb.bind(
        null,
        at
      );
    },
    useEffectEvent: function(e) {
      var t = Un(), a = { impl: e };
      return t.memoizedState = a, function() {
        if ((Et & 2) !== 0)
          throw Error(l(440));
        return a.impl.apply(void 0, arguments);
      };
    }
  }, Ff = {
    readContext: kn,
    use: _u,
    useCallback: vp,
    useContext: kn,
    useEffect: Bf,
    useImperativeHandle: xp,
    useInsertionEffect: gp,
    useLayoutEffect: yp,
    useMemo: Sp,
    useReducer: ju,
    useRef: hp,
    useState: function() {
      return ju(wi);
    },
    useDebugValue: Uf,
    useDeferredValue: function(e, t) {
      var a = Wt();
      return wp(
        a,
        Nt.memoizedState,
        e,
        t
      );
    },
    useTransition: function() {
      var e = ju(wi)[0], t = Wt().memoizedState;
      return [
        typeof e == "boolean" ? e : rs(e),
        t
      ];
    },
    useSyncExternalStore: Zm,
    useId: _p,
    useHostTransitionStatus: Hf,
    useFormState: cp,
    useActionState: cp,
    useOptimistic: function(e, t) {
      var a = Wt();
      return rp(a, Nt, e, t);
    },
    useMemoCache: Mf,
    useCacheRefresh: jp
  };
  Ff.useEffectEvent = pp;
  var Mp = {
    readContext: kn,
    use: _u,
    useCallback: vp,
    useContext: kn,
    useEffect: Bf,
    useImperativeHandle: xp,
    useInsertionEffect: gp,
    useLayoutEffect: yp,
    useMemo: Sp,
    useReducer: Df,
    useRef: hp,
    useState: function() {
      return Df(wi);
    },
    useDebugValue: Uf,
    useDeferredValue: function(e, t) {
      var a = Wt();
      return Nt === null ? If(a, e, t) : wp(
        a,
        Nt.memoizedState,
        e,
        t
      );
    },
    useTransition: function() {
      var e = Df(wi)[0], t = Wt().memoizedState;
      return [
        typeof e == "boolean" ? e : rs(e),
        t
      ];
    },
    useSyncExternalStore: Zm,
    useId: _p,
    useHostTransitionStatus: Hf,
    useFormState: dp,
    useActionState: dp,
    useOptimistic: function(e, t) {
      var a = Wt();
      return Nt !== null ? rp(a, Nt, e, t) : (a.baseState = e, [e, a.queue.dispatch]);
    },
    useMemoCache: Mf,
    useCacheRefresh: jp
  };
  Mp.useEffectEvent = pp;
  function Vf(e, t, a, o) {
    t = e.memoizedState, a = a(o, t), a = a == null ? t : x({}, t, a), e.memoizedState = a, e.lanes === 0 && (e.updateQueue.baseState = a);
  }
  var Kf = {
    enqueueSetState: function(e, t, a) {
      e = e._reactInternals;
      var o = sr(), d = ra(o);
      d.payload = t, a != null && (d.callback = a), t = ia(e, d, o), t !== null && (Xn(t, e, o), Jo(t, e, o));
    },
    enqueueReplaceState: function(e, t, a) {
      e = e._reactInternals;
      var o = sr(), d = ra(o);
      d.tag = 1, d.payload = t, a != null && (d.callback = a), t = ia(e, d, o), t !== null && (Xn(t, e, o), Jo(t, e, o));
    },
    enqueueForceUpdate: function(e, t) {
      e = e._reactInternals;
      var a = sr(), o = ra(a);
      o.tag = 2, t != null && (o.callback = t), t = ia(e, o, a), t !== null && (Xn(t, e, a), Jo(t, e, a));
    }
  };
  function Op(e, t, a, o, d, p, k) {
    return e = e.stateNode, typeof e.shouldComponentUpdate == "function" ? e.shouldComponentUpdate(o, p, k) : t.prototype && t.prototype.isPureReactComponent ? !u(a, o) || !u(d, p) : !0;
  }
  function Dp(e, t, a, o) {
    e = t.state, typeof t.componentWillReceiveProps == "function" && t.componentWillReceiveProps(a, o), typeof t.UNSAFE_componentWillReceiveProps == "function" && t.UNSAFE_componentWillReceiveProps(a, o), t.state !== e && Kf.enqueueReplaceState(t, t.state, null);
  }
  function Ja(e, t) {
    var a = t;
    if ("ref" in t) {
      a = {};
      for (var o in t)
        o !== "ref" && (a[o] = t[o]);
    }
    if (e = e.defaultProps) {
      a === t && (a = x({}, a));
      for (var d in e)
        a[d] === void 0 && (a[d] = e[d]);
    }
    return a;
  }
  function Rp(e) {
    qe(e);
  }
  function Lp(e) {
    console.error(e);
  }
  function Bp(e) {
    qe(e);
  }
  function zu(e, t) {
    try {
      var a = e.onUncaughtError;
      a(t.value, { componentStack: t.stack });
    } catch (o) {
      setTimeout(function() {
        throw o;
      });
    }
  }
  function Up(e, t, a) {
    try {
      var o = e.onCaughtError;
      o(a.value, {
        componentStack: a.stack,
        errorBoundary: t.tag === 1 ? t.stateNode : null
      });
    } catch (d) {
      setTimeout(function() {
        throw d;
      });
    }
  }
  function Gf(e, t, a) {
    return a = ra(a), a.tag = 3, a.payload = { element: null }, a.callback = function() {
      zu(e, t);
    }, a;
  }
  function Ip(e) {
    return e = ra(e), e.tag = 3, e;
  }
  function qp(e, t, a, o) {
    var d = a.type.getDerivedStateFromError;
    if (typeof d == "function") {
      var p = o.value;
      e.payload = function() {
        return d(p);
      }, e.callback = function() {
        Up(t, a, o);
      };
    }
    var k = a.stateNode;
    k !== null && typeof k.componentDidCatch == "function" && (e.callback = function() {
      Up(t, a, o), typeof d != "function" && (ca === null ? ca = /* @__PURE__ */ new Set([this]) : ca.add(this));
      var T = o.stack;
      this.componentDidCatch(o.value, {
        componentStack: T !== null ? T : ""
      });
    });
  }
  function db(e, t, a, o, d) {
    if (a.flags |= 32768, o !== null && typeof o == "object" && typeof o.then == "function") {
      if (t = a.alternate, t !== null && Ul(
        t,
        a,
        d,
        !0
      ), a = ir.current, a !== null) {
        switch (a.tag) {
          case 31:
          case 13:
            return wr === null ? Fu() : a.alternate === null && $t === 0 && ($t = 3), a.flags &= -257, a.flags |= 65536, a.lanes = d, o === bu ? a.flags |= 16384 : (t = a.updateQueue, t === null ? a.updateQueue = /* @__PURE__ */ new Set([o]) : t.add(o), yd(e, o, d)), !1;
          case 22:
            return a.flags |= 65536, o === bu ? a.flags |= 16384 : (t = a.updateQueue, t === null ? (t = {
              transitions: null,
              markerInstances: null,
              retryQueue: /* @__PURE__ */ new Set([o])
            }, a.updateQueue = t) : (a = t.retryQueue, a === null ? t.retryQueue = /* @__PURE__ */ new Set([o]) : a.add(o)), yd(e, o, d)), !1;
        }
        throw Error(l(435, a.tag));
      }
      return yd(e, o, d), Fu(), !1;
    }
    if (yt)
      return t = ir.current, t !== null ? ((t.flags & 65536) === 0 && (t.flags |= 256), t.flags |= 65536, t.lanes = d, o !== ff && (e = Error(l(422), { cause: o }), Yo(br(e, a)))) : (o !== ff && (t = Error(l(423), {
        cause: o
      }), Yo(
        br(t, a)
      )), e = e.current.alternate, e.flags |= 65536, d &= -d, e.lanes |= d, o = br(o, a), d = Gf(
        e.stateNode,
        o,
        d
      ), wf(e, d), $t !== 4 && ($t = 2)), !1;
    var p = Error(l(520), { cause: o });
    if (p = br(p, a), hs === null ? hs = [p] : hs.push(p), $t !== 4 && ($t = 2), t === null) return !0;
    o = br(o, a), a = t;
    do {
      switch (a.tag) {
        case 3:
          return a.flags |= 65536, e = d & -d, a.lanes |= e, e = Gf(a.stateNode, o, e), wf(a, e), !1;
        case 1:
          if (t = a.type, p = a.stateNode, (a.flags & 128) === 0 && (typeof t.getDerivedStateFromError == "function" || p !== null && typeof p.componentDidCatch == "function" && (ca === null || !ca.has(p))))
            return a.flags |= 65536, d &= -d, a.lanes |= d, d = Ip(d), qp(
              d,
              e,
              a,
              o
            ), wf(a, d), !1;
      }
      a = a.return;
    } while (a !== null);
    return !1;
  }
  var $f = Error(l(461)), ln = !1;
  function Cn(e, t, a, o) {
    t.child = e === null ? Vm(t, null, a, o) : Za(
      t,
      e.child,
      a,
      o
    );
  }
  function Hp(e, t, a, o, d) {
    a = a.render;
    var p = t.ref;
    if ("ref" in o) {
      var k = {};
      for (var T in o)
        T !== "ref" && (k[T] = o[T]);
    } else k = o;
    return $a(t), o = Tf(
      e,
      t,
      a,
      k,
      p,
      d
    ), T = Nf(), e !== null && !ln ? (Af(e, t, d), ki(e, t, d)) : (yt && T && uf(t), t.flags |= 1, Cn(e, t, o, d), t.child);
  }
  function Pp(e, t, a, o, d) {
    if (e === null) {
      var p = a.type;
      return typeof p == "function" && !lf(p) && p.defaultProps === void 0 && a.compare === null ? (t.tag = 15, t.type = p, Fp(
        e,
        t,
        p,
        o,
        d
      )) : (e = du(
        a.type,
        null,
        o,
        t,
        t.mode,
        d
      ), e.ref = t.ref, e.return = t, t.child = e);
    }
    if (p = e.child, !td(e, d)) {
      var k = p.memoizedProps;
      if (a = a.compare, a = a !== null ? a : u, a(k, o) && e.ref === t.ref)
        return ki(e, t, d);
    }
    return t.flags |= 1, e = yi(p, o), e.ref = t.ref, e.return = t, t.child = e;
  }
  function Fp(e, t, a, o, d) {
    if (e !== null) {
      var p = e.memoizedProps;
      if (u(p, o) && e.ref === t.ref)
        if (ln = !1, t.pendingProps = o = p, td(e, d))
          (e.flags & 131072) !== 0 && (ln = !0);
        else
          return t.lanes = e.lanes, ki(e, t, d);
    }
    return Yf(
      e,
      t,
      a,
      o,
      d
    );
  }
  function Vp(e, t, a, o) {
    var d = o.children, p = e !== null ? e.memoizedState : null;
    if (e === null && t.stateNode === null && (t.stateNode = {
      _visibility: 1,
      _pendingMarkers: null,
      _retryCache: null,
      _transitions: null
    }), o.mode === "hidden") {
      if ((t.flags & 128) !== 0) {
        if (p = p !== null ? p.baseLanes | a : a, e !== null) {
          for (o = t.child = e.child, d = 0; o !== null; )
            d = d | o.lanes | o.childLanes, o = o.sibling;
          o = d & ~p;
        } else o = 0, t.child = null;
        return Kp(
          e,
          t,
          p,
          a,
          o
        );
      }
      if ((a & 536870912) !== 0)
        t.memoizedState = { baseLanes: 0, cachePool: null }, e !== null && gu(
          t,
          p !== null ? p.cachePool : null
        ), p !== null ? $m(t, p) : Cf(), Ym(t);
      else
        return o = t.lanes = 536870912, Kp(
          e,
          t,
          p !== null ? p.baseLanes | a : a,
          a,
          o
        );
    } else
      p !== null ? (gu(t, p.cachePool), $m(t, p), la(), t.memoizedState = null) : (e !== null && gu(t, null), Cf(), la());
    return Cn(e, t, d, a), t.child;
  }
  function ls(e, t) {
    return e !== null && e.tag === 22 || t.stateNode !== null || (t.stateNode = {
      _visibility: 1,
      _pendingMarkers: null,
      _retryCache: null,
      _transitions: null
    }), t.sibling;
  }
  function Kp(e, t, a, o, d) {
    var p = bf();
    return p = p === null ? null : { parent: rn._currentValue, pool: p }, t.memoizedState = {
      baseLanes: a,
      cachePool: p
    }, e !== null && gu(t, null), Cf(), Ym(t), e !== null && Ul(e, t, o, !0), t.childLanes = d, null;
  }
  function Mu(e, t) {
    return t = Du(
      { mode: t.mode, children: t.children },
      e.mode
    ), t.ref = e.ref, e.child = t, t.return = e, t;
  }
  function Gp(e, t, a) {
    return Za(t, e.child, null, a), e = Mu(t, t.pendingProps), e.flags |= 2, ar(t), t.memoizedState = null, e;
  }
  function hb(e, t, a) {
    var o = t.pendingProps, d = (t.flags & 128) !== 0;
    if (t.flags &= -129, e === null) {
      if (yt) {
        if (o.mode === "hidden")
          return e = Mu(t, o), t.lanes = 536870912, ls(null, e);
        if (_f(t), (e = qt) ? (e = i0(
          e,
          Sr
        ), e = e !== null && e.data === "&" ? e : null, e !== null && (t.memoizedState = {
          dehydrated: e,
          treeContext: Wi !== null ? { id: Gr, overflow: $r } : null,
          retryLane: 536870912,
          hydrationErrors: null
        }, a = Nm(e), a.return = t, t.child = a, wn = t, qt = null)) : e = null, e === null) throw ea(t);
        return t.lanes = 536870912, null;
      }
      return Mu(t, o);
    }
    var p = e.memoizedState;
    if (p !== null) {
      var k = p.dehydrated;
      if (_f(t), d)
        if (t.flags & 256)
          t.flags &= -257, t = Gp(
            e,
            t,
            a
          );
        else if (t.memoizedState !== null)
          t.child = e.child, t.flags |= 128, t = null;
        else throw Error(l(558));
      else if (ln || Ul(e, t, a, !1), d = (a & e.childLanes) !== 0, ln || d) {
        if (o = Ot, o !== null && (k = Yt(o, a), k !== 0 && k !== p.retryLane))
          throw p.retryLane = k, Pt(e, k), Xn(o, e, k), $f;
        Fu(), t = Gp(
          e,
          t,
          a
        );
      } else
        e = p.treeContext, qt = kr(k.nextSibling), wn = t, yt = !0, Ji = null, Sr = !1, e !== null && Mm(t, e), t = Mu(t, o), t.flags |= 4096;
      return t;
    }
    return e = yi(e.child, {
      mode: o.mode,
      children: o.children
    }), e.ref = t.ref, t.child = e, e.return = t, e;
  }
  function Ou(e, t) {
    var a = t.ref;
    if (a === null)
      e !== null && e.ref !== null && (t.flags |= 4194816);
    else {
      if (typeof a != "function" && typeof a != "object")
        throw Error(l(284));
      (e === null || e.ref !== a) && (t.flags |= 4194816);
    }
  }
  function Yf(e, t, a, o, d) {
    return $a(t), a = Tf(
      e,
      t,
      a,
      o,
      void 0,
      d
    ), o = Nf(), e !== null && !ln ? (Af(e, t, d), ki(e, t, d)) : (yt && o && uf(t), t.flags |= 1, Cn(e, t, a, d), t.child);
  }
  function $p(e, t, a, o, d, p) {
    return $a(t), t.updateQueue = null, a = Qm(
      t,
      o,
      a,
      d
    ), Xm(e), o = Nf(), e !== null && !ln ? (Af(e, t, p), ki(e, t, p)) : (yt && o && uf(t), t.flags |= 1, Cn(e, t, a, p), t.child);
  }
  function Yp(e, t, a, o, d) {
    if ($a(t), t.stateNode === null) {
      var p = Vn, k = a.contextType;
      typeof k == "object" && k !== null && (p = kn(k)), p = new a(o, p), t.memoizedState = p.state !== null && p.state !== void 0 ? p.state : null, p.updater = Kf, t.stateNode = p, p._reactInternals = t, p = t.stateNode, p.props = o, p.state = t.memoizedState, p.refs = {}, vf(t), k = a.contextType, p.context = typeof k == "object" && k !== null ? kn(k) : Vn, p.state = t.memoizedState, k = a.getDerivedStateFromProps, typeof k == "function" && (Vf(
        t,
        a,
        k,
        o
      ), p.state = t.memoizedState), typeof a.getDerivedStateFromProps == "function" || typeof p.getSnapshotBeforeUpdate == "function" || typeof p.UNSAFE_componentWillMount != "function" && typeof p.componentWillMount != "function" || (k = p.state, typeof p.componentWillMount == "function" && p.componentWillMount(), typeof p.UNSAFE_componentWillMount == "function" && p.UNSAFE_componentWillMount(), k !== p.state && Kf.enqueueReplaceState(p, p.state, null), ts(t, o, p, d), es(), p.state = t.memoizedState), typeof p.componentDidMount == "function" && (t.flags |= 4194308), o = !0;
    } else if (e === null) {
      p = t.stateNode;
      var T = t.memoizedProps, R = Ja(a, T);
      p.props = R;
      var ae = p.context, pe = a.contextType;
      k = Vn, typeof pe == "object" && pe !== null && (k = kn(pe));
      var xe = a.getDerivedStateFromProps;
      pe = typeof xe == "function" || typeof p.getSnapshotBeforeUpdate == "function", T = t.pendingProps !== T, pe || typeof p.UNSAFE_componentWillReceiveProps != "function" && typeof p.componentWillReceiveProps != "function" || (T || ae !== k) && Dp(
        t,
        p,
        o,
        k
      ), na = !1;
      var oe = t.memoizedState;
      p.state = oe, ts(t, o, p, d), es(), ae = t.memoizedState, T || oe !== ae || na ? (typeof xe == "function" && (Vf(
        t,
        a,
        xe,
        o
      ), ae = t.memoizedState), (R = na || Op(
        t,
        a,
        R,
        o,
        oe,
        ae,
        k
      )) ? (pe || typeof p.UNSAFE_componentWillMount != "function" && typeof p.componentWillMount != "function" || (typeof p.componentWillMount == "function" && p.componentWillMount(), typeof p.UNSAFE_componentWillMount == "function" && p.UNSAFE_componentWillMount()), typeof p.componentDidMount == "function" && (t.flags |= 4194308)) : (typeof p.componentDidMount == "function" && (t.flags |= 4194308), t.memoizedProps = o, t.memoizedState = ae), p.props = o, p.state = ae, p.context = k, o = R) : (typeof p.componentDidMount == "function" && (t.flags |= 4194308), o = !1);
    } else {
      p = t.stateNode, Sf(e, t), k = t.memoizedProps, pe = Ja(a, k), p.props = pe, xe = t.pendingProps, oe = p.context, ae = a.contextType, R = Vn, typeof ae == "object" && ae !== null && (R = kn(ae)), T = a.getDerivedStateFromProps, (ae = typeof T == "function" || typeof p.getSnapshotBeforeUpdate == "function") || typeof p.UNSAFE_componentWillReceiveProps != "function" && typeof p.componentWillReceiveProps != "function" || (k !== xe || oe !== R) && Dp(
        t,
        p,
        o,
        R
      ), na = !1, oe = t.memoizedState, p.state = oe, ts(t, o, p, d), es();
      var ce = t.memoizedState;
      k !== xe || oe !== ce || na || e !== null && e.dependencies !== null && mu(e.dependencies) ? (typeof T == "function" && (Vf(
        t,
        a,
        T,
        o
      ), ce = t.memoizedState), (pe = na || Op(
        t,
        a,
        pe,
        o,
        oe,
        ce,
        R
      ) || e !== null && e.dependencies !== null && mu(e.dependencies)) ? (ae || typeof p.UNSAFE_componentWillUpdate != "function" && typeof p.componentWillUpdate != "function" || (typeof p.componentWillUpdate == "function" && p.componentWillUpdate(o, ce, R), typeof p.UNSAFE_componentWillUpdate == "function" && p.UNSAFE_componentWillUpdate(
        o,
        ce,
        R
      )), typeof p.componentDidUpdate == "function" && (t.flags |= 4), typeof p.getSnapshotBeforeUpdate == "function" && (t.flags |= 1024)) : (typeof p.componentDidUpdate != "function" || k === e.memoizedProps && oe === e.memoizedState || (t.flags |= 4), typeof p.getSnapshotBeforeUpdate != "function" || k === e.memoizedProps && oe === e.memoizedState || (t.flags |= 1024), t.memoizedProps = o, t.memoizedState = ce), p.props = o, p.state = ce, p.context = R, o = pe) : (typeof p.componentDidUpdate != "function" || k === e.memoizedProps && oe === e.memoizedState || (t.flags |= 4), typeof p.getSnapshotBeforeUpdate != "function" || k === e.memoizedProps && oe === e.memoizedState || (t.flags |= 1024), o = !1);
    }
    return p = o, Ou(e, t), o = (t.flags & 128) !== 0, p || o ? (p = t.stateNode, a = o && typeof a.getDerivedStateFromError != "function" ? null : p.render(), t.flags |= 1, e !== null && o ? (t.child = Za(
      t,
      e.child,
      null,
      d
    ), t.child = Za(
      t,
      null,
      a,
      d
    )) : Cn(e, t, a, d), t.memoizedState = p.state, e = t.child) : e = ki(
      e,
      t,
      d
    ), e;
  }
  function Xp(e, t, a, o) {
    return Ka(), t.flags |= 256, Cn(e, t, a, o), t.child;
  }
  var Xf = {
    dehydrated: null,
    treeContext: null,
    retryLane: 0,
    hydrationErrors: null
  };
  function Qf(e) {
    return { baseLanes: e, cachePool: Um() };
  }
  function Zf(e, t, a) {
    return e = e !== null ? e.childLanes & ~a : 0, t && (e |= or), e;
  }
  function Qp(e, t, a) {
    var o = t.pendingProps, d = !1, p = (t.flags & 128) !== 0, k;
    if ((k = p) || (k = e !== null && e.memoizedState === null ? !1 : (Zt.current & 2) !== 0), k && (d = !0, t.flags &= -129), k = (t.flags & 32) !== 0, t.flags &= -33, e === null) {
      if (yt) {
        if (d ? aa(t) : la(), (e = qt) ? (e = i0(
          e,
          Sr
        ), e = e !== null && e.data !== "&" ? e : null, e !== null && (t.memoizedState = {
          dehydrated: e,
          treeContext: Wi !== null ? { id: Gr, overflow: $r } : null,
          retryLane: 536870912,
          hydrationErrors: null
        }, a = Nm(e), a.return = t, t.child = a, wn = t, qt = null)) : e = null, e === null) throw ea(t);
        return Od(e) ? t.lanes = 32 : t.lanes = 536870912, null;
      }
      var T = o.children;
      return o = o.fallback, d ? (la(), d = t.mode, T = Du(
        { mode: "hidden", children: T },
        d
      ), o = Va(
        o,
        d,
        a,
        null
      ), T.return = t, o.return = t, T.sibling = o, t.child = T, o = t.child, o.memoizedState = Qf(a), o.childLanes = Zf(
        e,
        k,
        a
      ), t.memoizedState = Xf, ls(null, o)) : (aa(t), Wf(t, T));
    }
    var R = e.memoizedState;
    if (R !== null && (T = R.dehydrated, T !== null)) {
      if (p)
        t.flags & 256 ? (aa(t), t.flags &= -257, t = Jf(
          e,
          t,
          a
        )) : t.memoizedState !== null ? (la(), t.child = e.child, t.flags |= 128, t = null) : (la(), T = o.fallback, d = t.mode, o = Du(
          { mode: "visible", children: o.children },
          d
        ), T = Va(
          T,
          d,
          a,
          null
        ), T.flags |= 2, o.return = t, T.return = t, o.sibling = T, t.child = o, Za(
          t,
          e.child,
          null,
          a
        ), o = t.child, o.memoizedState = Qf(a), o.childLanes = Zf(
          e,
          k,
          a
        ), t.memoizedState = Xf, t = ls(null, o));
      else if (aa(t), Od(T)) {
        if (k = T.nextSibling && T.nextSibling.dataset, k) var ae = k.dgst;
        k = ae, o = Error(l(419)), o.stack = "", o.digest = k, Yo({ value: o, source: null, stack: null }), t = Jf(
          e,
          t,
          a
        );
      } else if (ln || Ul(e, t, a, !1), k = (a & e.childLanes) !== 0, ln || k) {
        if (k = Ot, k !== null && (o = Yt(k, a), o !== 0 && o !== R.retryLane))
          throw R.retryLane = o, Pt(e, o), Xn(k, e, o), $f;
        Md(T) || Fu(), t = Jf(
          e,
          t,
          a
        );
      } else
        Md(T) ? (t.flags |= 192, t.child = e.child, t = null) : (e = R.treeContext, qt = kr(
          T.nextSibling
        ), wn = t, yt = !0, Ji = null, Sr = !1, e !== null && Mm(t, e), t = Wf(
          t,
          o.children
        ), t.flags |= 4096);
      return t;
    }
    return d ? (la(), T = o.fallback, d = t.mode, R = e.child, ae = R.sibling, o = yi(R, {
      mode: "hidden",
      children: o.children
    }), o.subtreeFlags = R.subtreeFlags & 65011712, ae !== null ? T = yi(
      ae,
      T
    ) : (T = Va(
      T,
      d,
      a,
      null
    ), T.flags |= 2), T.return = t, o.return = t, o.sibling = T, t.child = o, ls(null, o), o = t.child, T = e.child.memoizedState, T === null ? T = Qf(a) : (d = T.cachePool, d !== null ? (R = rn._currentValue, d = d.parent !== R ? { parent: R, pool: R } : d) : d = Um(), T = {
      baseLanes: T.baseLanes | a,
      cachePool: d
    }), o.memoizedState = T, o.childLanes = Zf(
      e,
      k,
      a
    ), t.memoizedState = Xf, ls(e.child, o)) : (aa(t), a = e.child, e = a.sibling, a = yi(a, {
      mode: "visible",
      children: o.children
    }), a.return = t, a.sibling = null, e !== null && (k = t.deletions, k === null ? (t.deletions = [e], t.flags |= 16) : k.push(e)), t.child = a, t.memoizedState = null, a);
  }
  function Wf(e, t) {
    return t = Du(
      { mode: "visible", children: t },
      e.mode
    ), t.return = e, e.child = t;
  }
  function Du(e, t) {
    return e = rr(22, e, null, t), e.lanes = 0, e;
  }
  function Jf(e, t, a) {
    return Za(t, e.child, null, a), e = Wf(
      t,
      t.pendingProps.children
    ), e.flags |= 2, t.memoizedState = null, e;
  }
  function Zp(e, t, a) {
    e.lanes |= t;
    var o = e.alternate;
    o !== null && (o.lanes |= t), mf(e.return, t, a);
  }
  function ed(e, t, a, o, d, p) {
    var k = e.memoizedState;
    k === null ? e.memoizedState = {
      isBackwards: t,
      rendering: null,
      renderingStartTime: 0,
      last: o,
      tail: a,
      tailMode: d,
      treeForkCount: p
    } : (k.isBackwards = t, k.rendering = null, k.renderingStartTime = 0, k.last = o, k.tail = a, k.tailMode = d, k.treeForkCount = p);
  }
  function Wp(e, t, a) {
    var o = t.pendingProps, d = o.revealOrder, p = o.tail;
    o = o.children;
    var k = Zt.current, T = (k & 2) !== 0;
    if (T ? (k = k & 1 | 2, t.flags |= 128) : k &= 1, z(Zt, k), Cn(e, t, o, a), o = yt ? $o : 0, !T && e !== null && (e.flags & 128) !== 0)
      e: for (e = t.child; e !== null; ) {
        if (e.tag === 13)
          e.memoizedState !== null && Zp(e, a, t);
        else if (e.tag === 19)
          Zp(e, a, t);
        else if (e.child !== null) {
          e.child.return = e, e = e.child;
          continue;
        }
        if (e === t) break e;
        for (; e.sibling === null; ) {
          if (e.return === null || e.return === t)
            break e;
          e = e.return;
        }
        e.sibling.return = e.return, e = e.sibling;
      }
    switch (d) {
      case "forwards":
        for (a = t.child, d = null; a !== null; )
          e = a.alternate, e !== null && wu(e) === null && (d = a), a = a.sibling;
        a = d, a === null ? (d = t.child, t.child = null) : (d = a.sibling, a.sibling = null), ed(
          t,
          !1,
          d,
          a,
          p,
          o
        );
        break;
      case "backwards":
      case "unstable_legacy-backwards":
        for (a = null, d = t.child, t.child = null; d !== null; ) {
          if (e = d.alternate, e !== null && wu(e) === null) {
            t.child = d;
            break;
          }
          e = d.sibling, d.sibling = a, a = d, d = e;
        }
        ed(
          t,
          !0,
          a,
          null,
          p,
          o
        );
        break;
      case "together":
        ed(
          t,
          !1,
          null,
          null,
          void 0,
          o
        );
        break;
      default:
        t.memoizedState = null;
    }
    return t.child;
  }
  function ki(e, t, a) {
    if (e !== null && (t.dependencies = e.dependencies), ua |= t.lanes, (a & t.childLanes) === 0)
      if (e !== null) {
        if (Ul(
          e,
          t,
          a,
          !1
        ), (a & t.childLanes) === 0)
          return null;
      } else return null;
    if (e !== null && t.child !== e.child)
      throw Error(l(153));
    if (t.child !== null) {
      for (e = t.child, a = yi(e, e.pendingProps), t.child = a, a.return = t; e.sibling !== null; )
        e = e.sibling, a = a.sibling = yi(e, e.pendingProps), a.return = t;
      a.sibling = null;
    }
    return t.child;
  }
  function td(e, t) {
    return (e.lanes & t) !== 0 ? !0 : (e = e.dependencies, !!(e !== null && mu(e)));
  }
  function mb(e, t, a) {
    switch (t.tag) {
      case 3:
        ut(t, t.stateNode.containerInfo), ta(t, rn, e.memoizedState.cache), Ka();
        break;
      case 27:
      case 5:
        xn(t);
        break;
      case 4:
        ut(t, t.stateNode.containerInfo);
        break;
      case 10:
        ta(
          t,
          t.type,
          t.memoizedProps.value
        );
        break;
      case 31:
        if (t.memoizedState !== null)
          return t.flags |= 128, _f(t), null;
        break;
      case 13:
        var o = t.memoizedState;
        if (o !== null)
          return o.dehydrated !== null ? (aa(t), t.flags |= 128, null) : (a & t.child.childLanes) !== 0 ? Qp(e, t, a) : (aa(t), e = ki(
            e,
            t,
            a
          ), e !== null ? e.sibling : null);
        aa(t);
        break;
      case 19:
        var d = (e.flags & 128) !== 0;
        if (o = (a & t.childLanes) !== 0, o || (Ul(
          e,
          t,
          a,
          !1
        ), o = (a & t.childLanes) !== 0), d) {
          if (o)
            return Wp(
              e,
              t,
              a
            );
          t.flags |= 128;
        }
        if (d = t.memoizedState, d !== null && (d.rendering = null, d.tail = null, d.lastEffect = null), z(Zt, Zt.current), o) break;
        return null;
      case 22:
        return t.lanes = 0, Vp(
          e,
          t,
          a,
          t.pendingProps
        );
      case 24:
        ta(t, rn, e.memoizedState.cache);
    }
    return ki(e, t, a);
  }
  function Jp(e, t, a) {
    if (e !== null)
      if (e.memoizedProps !== t.pendingProps)
        ln = !0;
      else {
        if (!td(e, a) && (t.flags & 128) === 0)
          return ln = !1, mb(
            e,
            t,
            a
          );
        ln = (e.flags & 131072) !== 0;
      }
    else
      ln = !1, yt && (t.flags & 1048576) !== 0 && zm(t, $o, t.index);
    switch (t.lanes = 0, t.tag) {
      case 16:
        e: {
          var o = t.pendingProps;
          if (e = Xa(t.elementType), t.type = e, typeof e == "function")
            lf(e) ? (o = Ja(e, o), t.tag = 1, t = Yp(
              null,
              t,
              e,
              o,
              a
            )) : (t.tag = 0, t = Yf(
              null,
              t,
              e,
              o,
              a
            ));
          else {
            if (e != null) {
              var d = e.$$typeof;
              if (d === _e) {
                t.tag = 11, t = Hp(
                  null,
                  t,
                  e,
                  o,
                  a
                );
                break e;
              } else if (d === J) {
                t.tag = 14, t = Pp(
                  null,
                  t,
                  e,
                  o,
                  a
                );
                break e;
              }
            }
            throw t = Me(e) || e, Error(l(306, t, ""));
          }
        }
        return t;
      case 0:
        return Yf(
          e,
          t,
          t.type,
          t.pendingProps,
          a
        );
      case 1:
        return o = t.type, d = Ja(
          o,
          t.pendingProps
        ), Yp(
          e,
          t,
          o,
          d,
          a
        );
      case 3:
        e: {
          if (ut(
            t,
            t.stateNode.containerInfo
          ), e === null) throw Error(l(387));
          o = t.pendingProps;
          var p = t.memoizedState;
          d = p.element, Sf(e, t), ts(t, o, null, a);
          var k = t.memoizedState;
          if (o = k.cache, ta(t, rn, o), o !== p.cache && pf(
            t,
            [rn],
            a,
            !0
          ), es(), o = k.element, p.isDehydrated)
            if (p = {
              element: o,
              isDehydrated: !1,
              cache: k.cache
            }, t.updateQueue.baseState = p, t.memoizedState = p, t.flags & 256) {
              t = Xp(
                e,
                t,
                o,
                a
              );
              break e;
            } else if (o !== d) {
              d = br(
                Error(l(424)),
                t
              ), Yo(d), t = Xp(
                e,
                t,
                o,
                a
              );
              break e;
            } else {
              switch (e = t.stateNode.containerInfo, e.nodeType) {
                case 9:
                  e = e.body;
                  break;
                default:
                  e = e.nodeName === "HTML" ? e.ownerDocument.body : e;
              }
              for (qt = kr(e.firstChild), wn = t, yt = !0, Ji = null, Sr = !0, a = Vm(
                t,
                null,
                o,
                a
              ), t.child = a; a; )
                a.flags = a.flags & -3 | 4096, a = a.sibling;
            }
          else {
            if (Ka(), o === d) {
              t = ki(
                e,
                t,
                a
              );
              break e;
            }
            Cn(e, t, o, a);
          }
          t = t.child;
        }
        return t;
      case 26:
        return Ou(e, t), e === null ? (a = c0(
          t.type,
          null,
          t.pendingProps,
          null
        )) ? t.memoizedState = a : yt || (a = t.type, e = t.pendingProps, o = Qu(
          Se.current
        ).createElement(a), o[Rt] = t, o[Xt] = e, En(o, a, e), Qt(o), t.stateNode = o) : t.memoizedState = c0(
          t.type,
          e.memoizedProps,
          t.pendingProps,
          e.memoizedState
        ), null;
      case 27:
        return xn(t), e === null && yt && (o = t.stateNode = o0(
          t.type,
          t.pendingProps,
          Se.current
        ), wn = t, Sr = !0, d = qt, ma(t.type) ? (Dd = d, qt = kr(o.firstChild)) : qt = d), Cn(
          e,
          t,
          t.pendingProps.children,
          a
        ), Ou(e, t), e === null && (t.flags |= 4194304), t.child;
      case 5:
        return e === null && yt && ((d = o = qt) && (o = Vb(
          o,
          t.type,
          t.pendingProps,
          Sr
        ), o !== null ? (t.stateNode = o, wn = t, qt = kr(o.firstChild), Sr = !1, d = !0) : d = !1), d || ea(t)), xn(t), d = t.type, p = t.pendingProps, k = e !== null ? e.memoizedProps : null, o = p.children, Nd(d, p) ? o = null : k !== null && Nd(d, k) && (t.flags |= 32), t.memoizedState !== null && (d = Tf(
          e,
          t,
          ab,
          null,
          null,
          a
        ), Ss._currentValue = d), Ou(e, t), Cn(e, t, o, a), t.child;
      case 6:
        return e === null && yt && ((e = a = qt) && (a = Kb(
          a,
          t.pendingProps,
          Sr
        ), a !== null ? (t.stateNode = a, wn = t, qt = null, e = !0) : e = !1), e || ea(t)), null;
      case 13:
        return Qp(e, t, a);
      case 4:
        return ut(
          t,
          t.stateNode.containerInfo
        ), o = t.pendingProps, e === null ? t.child = Za(
          t,
          null,
          o,
          a
        ) : Cn(e, t, o, a), t.child;
      case 11:
        return Hp(
          e,
          t,
          t.type,
          t.pendingProps,
          a
        );
      case 7:
        return Cn(
          e,
          t,
          t.pendingProps,
          a
        ), t.child;
      case 8:
        return Cn(
          e,
          t,
          t.pendingProps.children,
          a
        ), t.child;
      case 12:
        return Cn(
          e,
          t,
          t.pendingProps.children,
          a
        ), t.child;
      case 10:
        return o = t.pendingProps, ta(t, t.type, o.value), Cn(e, t, o.children, a), t.child;
      case 9:
        return d = t.type._context, o = t.pendingProps.children, $a(t), d = kn(d), o = o(d), t.flags |= 1, Cn(e, t, o, a), t.child;
      case 14:
        return Pp(
          e,
          t,
          t.type,
          t.pendingProps,
          a
        );
      case 15:
        return Fp(
          e,
          t,
          t.type,
          t.pendingProps,
          a
        );
      case 19:
        return Wp(e, t, a);
      case 31:
        return hb(e, t, a);
      case 22:
        return Vp(
          e,
          t,
          a,
          t.pendingProps
        );
      case 24:
        return $a(t), o = kn(rn), e === null ? (d = bf(), d === null && (d = Ot, p = gf(), d.pooledCache = p, p.refCount++, p !== null && (d.pooledCacheLanes |= a), d = p), t.memoizedState = { parent: o, cache: d }, vf(t), ta(t, rn, d)) : ((e.lanes & a) !== 0 && (Sf(e, t), ts(t, null, null, a), es()), d = e.memoizedState, p = t.memoizedState, d.parent !== o ? (d = { parent: o, cache: o }, t.memoizedState = d, t.lanes === 0 && (t.memoizedState = t.updateQueue.baseState = d), ta(t, rn, o)) : (o = p.cache, ta(t, rn, o), o !== d.cache && pf(
          t,
          [rn],
          a,
          !0
        ))), Cn(
          e,
          t,
          t.pendingProps.children,
          a
        ), t.child;
      case 29:
        throw t.pendingProps;
    }
    throw Error(l(156, t.tag));
  }
  function Ci(e) {
    e.flags |= 4;
  }
  function nd(e, t, a, o, d) {
    if ((t = (e.mode & 32) !== 0) && (t = !1), t) {
      if (e.flags |= 16777216, (d & 335544128) === d)
        if (e.stateNode.complete) e.flags |= 8192;
        else if (_g()) e.flags |= 8192;
        else
          throw Qa = bu, xf;
    } else e.flags &= -16777217;
  }
  function eg(e, t) {
    if (t.type !== "stylesheet" || (t.state.loading & 4) !== 0)
      e.flags &= -16777217;
    else if (e.flags |= 16777216, !p0(t))
      if (_g()) e.flags |= 8192;
      else
        throw Qa = bu, xf;
  }
  function Ru(e, t) {
    t !== null && (e.flags |= 4), e.flags & 16384 && (t = e.tag !== 22 ? Zs() : 536870912, e.lanes |= t, Ql |= t);
  }
  function os(e, t) {
    if (!yt)
      switch (e.tailMode) {
        case "hidden":
          t = e.tail;
          for (var a = null; t !== null; )
            t.alternate !== null && (a = t), t = t.sibling;
          a === null ? e.tail = null : a.sibling = null;
          break;
        case "collapsed":
          a = e.tail;
          for (var o = null; a !== null; )
            a.alternate !== null && (o = a), a = a.sibling;
          o === null ? t || e.tail === null ? e.tail = null : e.tail.sibling = null : o.sibling = null;
      }
  }
  function Ht(e) {
    var t = e.alternate !== null && e.alternate.child === e.child, a = 0, o = 0;
    if (t)
      for (var d = e.child; d !== null; )
        a |= d.lanes | d.childLanes, o |= d.subtreeFlags & 65011712, o |= d.flags & 65011712, d.return = e, d = d.sibling;
    else
      for (d = e.child; d !== null; )
        a |= d.lanes | d.childLanes, o |= d.subtreeFlags, o |= d.flags, d.return = e, d = d.sibling;
    return e.subtreeFlags |= o, e.childLanes = a, t;
  }
  function pb(e, t, a) {
    var o = t.pendingProps;
    switch (cf(t), t.tag) {
      case 16:
      case 15:
      case 0:
      case 11:
      case 7:
      case 8:
      case 12:
      case 9:
      case 14:
        return Ht(t), null;
      case 1:
        return Ht(t), null;
      case 3:
        return a = t.stateNode, o = null, e !== null && (o = e.memoizedState.cache), t.memoizedState.cache !== o && (t.flags |= 2048), vi(rn), Ne(), a.pendingContext && (a.context = a.pendingContext, a.pendingContext = null), (e === null || e.child === null) && (Bl(t) ? Ci(t) : e === null || e.memoizedState.isDehydrated && (t.flags & 256) === 0 || (t.flags |= 1024, df())), Ht(t), null;
      case 26:
        var d = t.type, p = t.memoizedState;
        return e === null ? (Ci(t), p !== null ? (Ht(t), eg(t, p)) : (Ht(t), nd(
          t,
          d,
          null,
          o,
          a
        ))) : p ? p !== e.memoizedState ? (Ci(t), Ht(t), eg(t, p)) : (Ht(t), t.flags &= -16777217) : (e = e.memoizedProps, e !== o && Ci(t), Ht(t), nd(
          t,
          d,
          e,
          o,
          a
        )), null;
      case 27:
        if (qn(t), a = Se.current, d = t.type, e !== null && t.stateNode != null)
          e.memoizedProps !== o && Ci(t);
        else {
          if (!o) {
            if (t.stateNode === null)
              throw Error(l(166));
            return Ht(t), null;
          }
          e = ue.current, Bl(t) ? Om(t) : (e = o0(d, o, a), t.stateNode = e, Ci(t));
        }
        return Ht(t), null;
      case 5:
        if (qn(t), d = t.type, e !== null && t.stateNode != null)
          e.memoizedProps !== o && Ci(t);
        else {
          if (!o) {
            if (t.stateNode === null)
              throw Error(l(166));
            return Ht(t), null;
          }
          if (p = ue.current, Bl(t))
            Om(t);
          else {
            var k = Qu(
              Se.current
            );
            switch (p) {
              case 1:
                p = k.createElementNS(
                  "http://www.w3.org/2000/svg",
                  d
                );
                break;
              case 2:
                p = k.createElementNS(
                  "http://www.w3.org/1998/Math/MathML",
                  d
                );
                break;
              default:
                switch (d) {
                  case "svg":
                    p = k.createElementNS(
                      "http://www.w3.org/2000/svg",
                      d
                    );
                    break;
                  case "math":
                    p = k.createElementNS(
                      "http://www.w3.org/1998/Math/MathML",
                      d
                    );
                    break;
                  case "script":
                    p = k.createElement("div"), p.innerHTML = "<script><\/script>", p = p.removeChild(
                      p.firstChild
                    );
                    break;
                  case "select":
                    p = typeof o.is == "string" ? k.createElement("select", {
                      is: o.is
                    }) : k.createElement("select"), o.multiple ? p.multiple = !0 : o.size && (p.size = o.size);
                    break;
                  default:
                    p = typeof o.is == "string" ? k.createElement(d, { is: o.is }) : k.createElement(d);
                }
            }
            p[Rt] = t, p[Xt] = o;
            e: for (k = t.child; k !== null; ) {
              if (k.tag === 5 || k.tag === 6)
                p.appendChild(k.stateNode);
              else if (k.tag !== 4 && k.tag !== 27 && k.child !== null) {
                k.child.return = k, k = k.child;
                continue;
              }
              if (k === t) break e;
              for (; k.sibling === null; ) {
                if (k.return === null || k.return === t)
                  break e;
                k = k.return;
              }
              k.sibling.return = k.return, k = k.sibling;
            }
            t.stateNode = p;
            e: switch (En(p, d, o), d) {
              case "button":
              case "input":
              case "select":
              case "textarea":
                o = !!o.autoFocus;
                break e;
              case "img":
                o = !0;
                break e;
              default:
                o = !1;
            }
            o && Ci(t);
          }
        }
        return Ht(t), nd(
          t,
          t.type,
          e === null ? null : e.memoizedProps,
          t.pendingProps,
          a
        ), null;
      case 6:
        if (e && t.stateNode != null)
          e.memoizedProps !== o && Ci(t);
        else {
          if (typeof o != "string" && t.stateNode === null)
            throw Error(l(166));
          if (e = Se.current, Bl(t)) {
            if (e = t.stateNode, a = t.memoizedProps, o = null, d = wn, d !== null)
              switch (d.tag) {
                case 27:
                case 5:
                  o = d.memoizedProps;
              }
            e[Rt] = t, e = !!(e.nodeValue === a || o !== null && o.suppressHydrationWarning === !0 || Qg(e.nodeValue, a)), e || ea(t, !0);
          } else
            e = Qu(e).createTextNode(
              o
            ), e[Rt] = t, t.stateNode = e;
        }
        return Ht(t), null;
      case 31:
        if (a = t.memoizedState, e === null || e.memoizedState !== null) {
          if (o = Bl(t), a !== null) {
            if (e === null) {
              if (!o) throw Error(l(318));
              if (e = t.memoizedState, e = e !== null ? e.dehydrated : null, !e) throw Error(l(557));
              e[Rt] = t;
            } else
              Ka(), (t.flags & 128) === 0 && (t.memoizedState = null), t.flags |= 4;
            Ht(t), e = !1;
          } else
            a = df(), e !== null && e.memoizedState !== null && (e.memoizedState.hydrationErrors = a), e = !0;
          if (!e)
            return t.flags & 256 ? (ar(t), t) : (ar(t), null);
          if ((t.flags & 128) !== 0)
            throw Error(l(558));
        }
        return Ht(t), null;
      case 13:
        if (o = t.memoizedState, e === null || e.memoizedState !== null && e.memoizedState.dehydrated !== null) {
          if (d = Bl(t), o !== null && o.dehydrated !== null) {
            if (e === null) {
              if (!d) throw Error(l(318));
              if (d = t.memoizedState, d = d !== null ? d.dehydrated : null, !d) throw Error(l(317));
              d[Rt] = t;
            } else
              Ka(), (t.flags & 128) === 0 && (t.memoizedState = null), t.flags |= 4;
            Ht(t), d = !1;
          } else
            d = df(), e !== null && e.memoizedState !== null && (e.memoizedState.hydrationErrors = d), d = !0;
          if (!d)
            return t.flags & 256 ? (ar(t), t) : (ar(t), null);
        }
        return ar(t), (t.flags & 128) !== 0 ? (t.lanes = a, t) : (a = o !== null, e = e !== null && e.memoizedState !== null, a && (o = t.child, d = null, o.alternate !== null && o.alternate.memoizedState !== null && o.alternate.memoizedState.cachePool !== null && (d = o.alternate.memoizedState.cachePool.pool), p = null, o.memoizedState !== null && o.memoizedState.cachePool !== null && (p = o.memoizedState.cachePool.pool), p !== d && (o.flags |= 2048)), a !== e && a && (t.child.flags |= 8192), Ru(t, t.updateQueue), Ht(t), null);
      case 4:
        return Ne(), e === null && Cd(t.stateNode.containerInfo), Ht(t), null;
      case 10:
        return vi(t.type), Ht(t), null;
      case 19:
        if (he(Zt), o = t.memoizedState, o === null) return Ht(t), null;
        if (d = (t.flags & 128) !== 0, p = o.rendering, p === null)
          if (d) os(o, !1);
          else {
            if ($t !== 0 || e !== null && (e.flags & 128) !== 0)
              for (e = t.child; e !== null; ) {
                if (p = wu(e), p !== null) {
                  for (t.flags |= 128, os(o, !1), e = p.updateQueue, t.updateQueue = e, Ru(t, e), t.subtreeFlags = 0, e = a, a = t.child; a !== null; )
                    Tm(a, e), a = a.sibling;
                  return z(
                    Zt,
                    Zt.current & 1 | 2
                  ), yt && bi(t, o.treeForkCount), t.child;
                }
                e = e.sibling;
              }
            o.tail !== null && dn() > qu && (t.flags |= 128, d = !0, os(o, !1), t.lanes = 4194304);
          }
        else {
          if (!d)
            if (e = wu(p), e !== null) {
              if (t.flags |= 128, d = !0, e = e.updateQueue, t.updateQueue = e, Ru(t, e), os(o, !0), o.tail === null && o.tailMode === "hidden" && !p.alternate && !yt)
                return Ht(t), null;
            } else
              2 * dn() - o.renderingStartTime > qu && a !== 536870912 && (t.flags |= 128, d = !0, os(o, !1), t.lanes = 4194304);
          o.isBackwards ? (p.sibling = t.child, t.child = p) : (e = o.last, e !== null ? e.sibling = p : t.child = p, o.last = p);
        }
        return o.tail !== null ? (e = o.tail, o.rendering = e, o.tail = e.sibling, o.renderingStartTime = dn(), e.sibling = null, a = Zt.current, z(
          Zt,
          d ? a & 1 | 2 : a & 1
        ), yt && bi(t, o.treeForkCount), e) : (Ht(t), null);
      case 22:
      case 23:
        return ar(t), Ef(), o = t.memoizedState !== null, e !== null ? e.memoizedState !== null !== o && (t.flags |= 8192) : o && (t.flags |= 8192), o ? (a & 536870912) !== 0 && (t.flags & 128) === 0 && (Ht(t), t.subtreeFlags & 6 && (t.flags |= 8192)) : Ht(t), a = t.updateQueue, a !== null && Ru(t, a.retryQueue), a = null, e !== null && e.memoizedState !== null && e.memoizedState.cachePool !== null && (a = e.memoizedState.cachePool.pool), o = null, t.memoizedState !== null && t.memoizedState.cachePool !== null && (o = t.memoizedState.cachePool.pool), o !== a && (t.flags |= 2048), e !== null && he(Ya), null;
      case 24:
        return a = null, e !== null && (a = e.memoizedState.cache), t.memoizedState.cache !== a && (t.flags |= 2048), vi(rn), Ht(t), null;
      case 25:
        return null;
      case 30:
        return null;
    }
    throw Error(l(156, t.tag));
  }
  function gb(e, t) {
    switch (cf(t), t.tag) {
      case 1:
        return e = t.flags, e & 65536 ? (t.flags = e & -65537 | 128, t) : null;
      case 3:
        return vi(rn), Ne(), e = t.flags, (e & 65536) !== 0 && (e & 128) === 0 ? (t.flags = e & -65537 | 128, t) : null;
      case 26:
      case 27:
      case 5:
        return qn(t), null;
      case 31:
        if (t.memoizedState !== null) {
          if (ar(t), t.alternate === null)
            throw Error(l(340));
          Ka();
        }
        return e = t.flags, e & 65536 ? (t.flags = e & -65537 | 128, t) : null;
      case 13:
        if (ar(t), e = t.memoizedState, e !== null && e.dehydrated !== null) {
          if (t.alternate === null)
            throw Error(l(340));
          Ka();
        }
        return e = t.flags, e & 65536 ? (t.flags = e & -65537 | 128, t) : null;
      case 19:
        return he(Zt), null;
      case 4:
        return Ne(), null;
      case 10:
        return vi(t.type), null;
      case 22:
      case 23:
        return ar(t), Ef(), e !== null && he(Ya), e = t.flags, e & 65536 ? (t.flags = e & -65537 | 128, t) : null;
      case 24:
        return vi(rn), null;
      case 25:
        return null;
      default:
        return null;
    }
  }
  function tg(e, t) {
    switch (cf(t), t.tag) {
      case 3:
        vi(rn), Ne();
        break;
      case 26:
      case 27:
      case 5:
        qn(t);
        break;
      case 4:
        Ne();
        break;
      case 31:
        t.memoizedState !== null && ar(t);
        break;
      case 13:
        ar(t);
        break;
      case 19:
        he(Zt);
        break;
      case 10:
        vi(t.type);
        break;
      case 22:
      case 23:
        ar(t), Ef(), e !== null && he(Ya);
        break;
      case 24:
        vi(rn);
    }
  }
  function ss(e, t) {
    try {
      var a = t.updateQueue, o = a !== null ? a.lastEffect : null;
      if (o !== null) {
        var d = o.next;
        a = d;
        do {
          if ((a.tag & e) === e) {
            o = void 0;
            var p = a.create, k = a.inst;
            o = p(), k.destroy = o;
          }
          a = a.next;
        } while (a !== d);
      }
    } catch (T) {
      jt(t, t.return, T);
    }
  }
  function oa(e, t, a) {
    try {
      var o = t.updateQueue, d = o !== null ? o.lastEffect : null;
      if (d !== null) {
        var p = d.next;
        o = p;
        do {
          if ((o.tag & e) === e) {
            var k = o.inst, T = k.destroy;
            if (T !== void 0) {
              k.destroy = void 0, d = t;
              var R = a, ae = T;
              try {
                ae();
              } catch (pe) {
                jt(
                  d,
                  R,
                  pe
                );
              }
            }
          }
          o = o.next;
        } while (o !== p);
      }
    } catch (pe) {
      jt(t, t.return, pe);
    }
  }
  function ng(e) {
    var t = e.updateQueue;
    if (t !== null) {
      var a = e.stateNode;
      try {
        Gm(t, a);
      } catch (o) {
        jt(e, e.return, o);
      }
    }
  }
  function rg(e, t, a) {
    a.props = Ja(
      e.type,
      e.memoizedProps
    ), a.state = e.memoizedState;
    try {
      a.componentWillUnmount();
    } catch (o) {
      jt(e, t, o);
    }
  }
  function us(e, t) {
    try {
      var a = e.ref;
      if (a !== null) {
        switch (e.tag) {
          case 26:
          case 27:
          case 5:
            var o = e.stateNode;
            break;
          case 30:
            o = e.stateNode;
            break;
          default:
            o = e.stateNode;
        }
        typeof a == "function" ? e.refCleanup = a(o) : a.current = o;
      }
    } catch (d) {
      jt(e, t, d);
    }
  }
  function Yr(e, t) {
    var a = e.ref, o = e.refCleanup;
    if (a !== null)
      if (typeof o == "function")
        try {
          o();
        } catch (d) {
          jt(e, t, d);
        } finally {
          e.refCleanup = null, e = e.alternate, e != null && (e.refCleanup = null);
        }
      else if (typeof a == "function")
        try {
          a(null);
        } catch (d) {
          jt(e, t, d);
        }
      else a.current = null;
  }
  function ig(e) {
    var t = e.type, a = e.memoizedProps, o = e.stateNode;
    try {
      e: switch (t) {
        case "button":
        case "input":
        case "select":
        case "textarea":
          a.autoFocus && o.focus();
          break e;
        case "img":
          a.src ? o.src = a.src : a.srcSet && (o.srcset = a.srcSet);
      }
    } catch (d) {
      jt(e, e.return, d);
    }
  }
  function rd(e, t, a) {
    try {
      var o = e.stateNode;
      Ub(o, e.type, a, t), o[Xt] = t;
    } catch (d) {
      jt(e, e.return, d);
    }
  }
  function ag(e) {
    return e.tag === 5 || e.tag === 3 || e.tag === 26 || e.tag === 27 && ma(e.type) || e.tag === 4;
  }
  function id(e) {
    e: for (; ; ) {
      for (; e.sibling === null; ) {
        if (e.return === null || ag(e.return)) return null;
        e = e.return;
      }
      for (e.sibling.return = e.return, e = e.sibling; e.tag !== 5 && e.tag !== 6 && e.tag !== 18; ) {
        if (e.tag === 27 && ma(e.type) || e.flags & 2 || e.child === null || e.tag === 4) continue e;
        e.child.return = e, e = e.child;
      }
      if (!(e.flags & 2)) return e.stateNode;
    }
  }
  function ad(e, t, a) {
    var o = e.tag;
    if (o === 5 || o === 6)
      e = e.stateNode, t ? (a.nodeType === 9 ? a.body : a.nodeName === "HTML" ? a.ownerDocument.body : a).insertBefore(e, t) : (t = a.nodeType === 9 ? a.body : a.nodeName === "HTML" ? a.ownerDocument.body : a, t.appendChild(e), a = a._reactRootContainer, a != null || t.onclick !== null || (t.onclick = Fn));
    else if (o !== 4 && (o === 27 && ma(e.type) && (a = e.stateNode, t = null), e = e.child, e !== null))
      for (ad(e, t, a), e = e.sibling; e !== null; )
        ad(e, t, a), e = e.sibling;
  }
  function Lu(e, t, a) {
    var o = e.tag;
    if (o === 5 || o === 6)
      e = e.stateNode, t ? a.insertBefore(e, t) : a.appendChild(e);
    else if (o !== 4 && (o === 27 && ma(e.type) && (a = e.stateNode), e = e.child, e !== null))
      for (Lu(e, t, a), e = e.sibling; e !== null; )
        Lu(e, t, a), e = e.sibling;
  }
  function lg(e) {
    var t = e.stateNode, a = e.memoizedProps;
    try {
      for (var o = e.type, d = t.attributes; d.length; )
        t.removeAttributeNode(d[0]);
      En(t, o, a), t[Rt] = e, t[Xt] = a;
    } catch (p) {
      jt(e, e.return, p);
    }
  }
  var Ei = !1, on = !1, ld = !1, og = typeof WeakSet == "function" ? WeakSet : Set, bn = null;
  function yb(e, t) {
    if (e = e.containerInfo, jd = rc, e = C(e), j(e)) {
      if ("selectionStart" in e)
        var a = {
          start: e.selectionStart,
          end: e.selectionEnd
        };
      else
        e: {
          a = (a = e.ownerDocument) && a.defaultView || window;
          var o = a.getSelection && a.getSelection();
          if (o && o.rangeCount !== 0) {
            a = o.anchorNode;
            var d = o.anchorOffset, p = o.focusNode;
            o = o.focusOffset;
            try {
              a.nodeType, p.nodeType;
            } catch {
              a = null;
              break e;
            }
            var k = 0, T = -1, R = -1, ae = 0, pe = 0, xe = e, oe = null;
            t: for (; ; ) {
              for (var ce; xe !== a || d !== 0 && xe.nodeType !== 3 || (T = k + d), xe !== p || o !== 0 && xe.nodeType !== 3 || (R = k + o), xe.nodeType === 3 && (k += xe.nodeValue.length), (ce = xe.firstChild) !== null; )
                oe = xe, xe = ce;
              for (; ; ) {
                if (xe === e) break t;
                if (oe === a && ++ae === d && (T = k), oe === p && ++pe === o && (R = k), (ce = xe.nextSibling) !== null) break;
                xe = oe, oe = xe.parentNode;
              }
              xe = ce;
            }
            a = T === -1 || R === -1 ? null : { start: T, end: R };
          } else a = null;
        }
      a = a || { start: 0, end: 0 };
    } else a = null;
    for (Td = { focusedElem: e, selectionRange: a }, rc = !1, bn = t; bn !== null; )
      if (t = bn, e = t.child, (t.subtreeFlags & 1028) !== 0 && e !== null)
        e.return = t, bn = e;
      else
        for (; bn !== null; ) {
          switch (t = bn, p = t.alternate, e = t.flags, t.tag) {
            case 0:
              if ((e & 4) !== 0 && (e = t.updateQueue, e = e !== null ? e.events : null, e !== null))
                for (a = 0; a < e.length; a++)
                  d = e[a], d.ref.impl = d.nextImpl;
              break;
            case 11:
            case 15:
              break;
            case 1:
              if ((e & 1024) !== 0 && p !== null) {
                e = void 0, a = t, d = p.memoizedProps, p = p.memoizedState, o = a.stateNode;
                try {
                  var Fe = Ja(
                    a.type,
                    d
                  );
                  e = o.getSnapshotBeforeUpdate(
                    Fe,
                    p
                  ), o.__reactInternalSnapshotBeforeUpdate = e;
                } catch (We) {
                  jt(
                    a,
                    a.return,
                    We
                  );
                }
              }
              break;
            case 3:
              if ((e & 1024) !== 0) {
                if (e = t.stateNode.containerInfo, a = e.nodeType, a === 9)
                  zd(e);
                else if (a === 1)
                  switch (e.nodeName) {
                    case "HEAD":
                    case "HTML":
                    case "BODY":
                      zd(e);
                      break;
                    default:
                      e.textContent = "";
                  }
              }
              break;
            case 5:
            case 26:
            case 27:
            case 6:
            case 4:
            case 17:
              break;
            default:
              if ((e & 1024) !== 0) throw Error(l(163));
          }
          if (e = t.sibling, e !== null) {
            e.return = t.return, bn = e;
            break;
          }
          bn = t.return;
        }
  }
  function sg(e, t, a) {
    var o = a.flags;
    switch (a.tag) {
      case 0:
      case 11:
      case 15:
        ji(e, a), o & 4 && ss(5, a);
        break;
      case 1:
        if (ji(e, a), o & 4)
          if (e = a.stateNode, t === null)
            try {
              e.componentDidMount();
            } catch (k) {
              jt(a, a.return, k);
            }
          else {
            var d = Ja(
              a.type,
              t.memoizedProps
            );
            t = t.memoizedState;
            try {
              e.componentDidUpdate(
                d,
                t,
                e.__reactInternalSnapshotBeforeUpdate
              );
            } catch (k) {
              jt(
                a,
                a.return,
                k
              );
            }
          }
        o & 64 && ng(a), o & 512 && us(a, a.return);
        break;
      case 3:
        if (ji(e, a), o & 64 && (e = a.updateQueue, e !== null)) {
          if (t = null, a.child !== null)
            switch (a.child.tag) {
              case 27:
              case 5:
                t = a.child.stateNode;
                break;
              case 1:
                t = a.child.stateNode;
            }
          try {
            Gm(e, t);
          } catch (k) {
            jt(a, a.return, k);
          }
        }
        break;
      case 27:
        t === null && o & 4 && lg(a);
      case 26:
      case 5:
        ji(e, a), t === null && o & 4 && ig(a), o & 512 && us(a, a.return);
        break;
      case 12:
        ji(e, a);
        break;
      case 31:
        ji(e, a), o & 4 && fg(e, a);
        break;
      case 13:
        ji(e, a), o & 4 && dg(e, a), o & 64 && (e = a.memoizedState, e !== null && (e = e.dehydrated, e !== null && (a = _b.bind(
          null,
          a
        ), Gb(e, a))));
        break;
      case 22:
        if (o = a.memoizedState !== null || Ei, !o) {
          t = t !== null && t.memoizedState !== null || on, d = Ei;
          var p = on;
          Ei = o, (on = t) && !p ? Ti(
            e,
            a,
            (a.subtreeFlags & 8772) !== 0
          ) : ji(e, a), Ei = d, on = p;
        }
        break;
      case 30:
        break;
      default:
        ji(e, a);
    }
  }
  function ug(e) {
    var t = e.alternate;
    t !== null && (e.alternate = null, ug(t)), e.child = null, e.deletions = null, e.sibling = null, e.tag === 5 && (t = e.stateNode, t !== null && pl(t)), e.stateNode = null, e.return = null, e.dependencies = null, e.memoizedProps = null, e.memoizedState = null, e.pendingProps = null, e.stateNode = null, e.updateQueue = null;
  }
  var Ft = null, Kn = !1;
  function _i(e, t, a) {
    for (a = a.child; a !== null; )
      cg(e, t, a), a = a.sibling;
  }
  function cg(e, t, a) {
    if (Vt && typeof Vt.onCommitFiberUnmount == "function")
      try {
        Vt.onCommitFiberUnmount(Jt, a);
      } catch {
      }
    switch (a.tag) {
      case 26:
        on || Yr(a, t), _i(
          e,
          t,
          a
        ), a.memoizedState ? a.memoizedState.count-- : a.stateNode && (a = a.stateNode, a.parentNode.removeChild(a));
        break;
      case 27:
        on || Yr(a, t);
        var o = Ft, d = Kn;
        ma(a.type) && (Ft = a.stateNode, Kn = !1), _i(
          e,
          t,
          a
        ), bs(a.stateNode), Ft = o, Kn = d;
        break;
      case 5:
        on || Yr(a, t);
      case 6:
        if (o = Ft, d = Kn, Ft = null, _i(
          e,
          t,
          a
        ), Ft = o, Kn = d, Ft !== null)
          if (Kn)
            try {
              (Ft.nodeType === 9 ? Ft.body : Ft.nodeName === "HTML" ? Ft.ownerDocument.body : Ft).removeChild(a.stateNode);
            } catch (p) {
              jt(
                a,
                t,
                p
              );
            }
          else
            try {
              Ft.removeChild(a.stateNode);
            } catch (p) {
              jt(
                a,
                t,
                p
              );
            }
        break;
      case 18:
        Ft !== null && (Kn ? (e = Ft, n0(
          e.nodeType === 9 ? e.body : e.nodeName === "HTML" ? e.ownerDocument.body : e,
          a.stateNode
        ), io(e)) : n0(Ft, a.stateNode));
        break;
      case 4:
        o = Ft, d = Kn, Ft = a.stateNode.containerInfo, Kn = !0, _i(
          e,
          t,
          a
        ), Ft = o, Kn = d;
        break;
      case 0:
      case 11:
      case 14:
      case 15:
        oa(2, a, t), on || oa(4, a, t), _i(
          e,
          t,
          a
        );
        break;
      case 1:
        on || (Yr(a, t), o = a.stateNode, typeof o.componentWillUnmount == "function" && rg(
          a,
          t,
          o
        )), _i(
          e,
          t,
          a
        );
        break;
      case 21:
        _i(
          e,
          t,
          a
        );
        break;
      case 22:
        on = (o = on) || a.memoizedState !== null, _i(
          e,
          t,
          a
        ), on = o;
        break;
      default:
        _i(
          e,
          t,
          a
        );
    }
  }
  function fg(e, t) {
    if (t.memoizedState === null && (e = t.alternate, e !== null && (e = e.memoizedState, e !== null))) {
      e = e.dehydrated;
      try {
        io(e);
      } catch (a) {
        jt(t, t.return, a);
      }
    }
  }
  function dg(e, t) {
    if (t.memoizedState === null && (e = t.alternate, e !== null && (e = e.memoizedState, e !== null && (e = e.dehydrated, e !== null))))
      try {
        io(e);
      } catch (a) {
        jt(t, t.return, a);
      }
  }
  function bb(e) {
    switch (e.tag) {
      case 31:
      case 13:
      case 19:
        var t = e.stateNode;
        return t === null && (t = e.stateNode = new og()), t;
      case 22:
        return e = e.stateNode, t = e._retryCache, t === null && (t = e._retryCache = new og()), t;
      default:
        throw Error(l(435, e.tag));
    }
  }
  function Bu(e, t) {
    var a = bb(e);
    t.forEach(function(o) {
      if (!a.has(o)) {
        a.add(o);
        var d = jb.bind(null, e, o);
        o.then(d, d);
      }
    });
  }
  function Gn(e, t) {
    var a = t.deletions;
    if (a !== null)
      for (var o = 0; o < a.length; o++) {
        var d = a[o], p = e, k = t, T = k;
        e: for (; T !== null; ) {
          switch (T.tag) {
            case 27:
              if (ma(T.type)) {
                Ft = T.stateNode, Kn = !1;
                break e;
              }
              break;
            case 5:
              Ft = T.stateNode, Kn = !1;
              break e;
            case 3:
            case 4:
              Ft = T.stateNode.containerInfo, Kn = !0;
              break e;
          }
          T = T.return;
        }
        if (Ft === null) throw Error(l(160));
        cg(p, k, d), Ft = null, Kn = !1, p = d.alternate, p !== null && (p.return = null), d.return = null;
      }
    if (t.subtreeFlags & 13886)
      for (t = t.child; t !== null; )
        hg(t, e), t = t.sibling;
  }
  var zr = null;
  function hg(e, t) {
    var a = e.alternate, o = e.flags;
    switch (e.tag) {
      case 0:
      case 11:
      case 14:
      case 15:
        Gn(t, e), $n(e), o & 4 && (oa(3, e, e.return), ss(3, e), oa(5, e, e.return));
        break;
      case 1:
        Gn(t, e), $n(e), o & 512 && (on || a === null || Yr(a, a.return)), o & 64 && Ei && (e = e.updateQueue, e !== null && (o = e.callbacks, o !== null && (a = e.shared.hiddenCallbacks, e.shared.hiddenCallbacks = a === null ? o : a.concat(o))));
        break;
      case 26:
        var d = zr;
        if (Gn(t, e), $n(e), o & 512 && (on || a === null || Yr(a, a.return)), o & 4) {
          var p = a !== null ? a.memoizedState : null;
          if (o = e.memoizedState, a === null)
            if (o === null)
              if (e.stateNode === null) {
                e: {
                  o = e.type, a = e.memoizedProps, d = d.ownerDocument || d;
                  t: switch (o) {
                    case "title":
                      p = d.getElementsByTagName("title")[0], (!p || p[er] || p[Rt] || p.namespaceURI === "http://www.w3.org/2000/svg" || p.hasAttribute("itemprop")) && (p = d.createElement(o), d.head.insertBefore(
                        p,
                        d.querySelector("head > title")
                      )), En(p, o, a), p[Rt] = e, Qt(p), o = p;
                      break e;
                    case "link":
                      var k = h0(
                        "link",
                        "href",
                        d
                      ).get(o + (a.href || ""));
                      if (k) {
                        for (var T = 0; T < k.length; T++)
                          if (p = k[T], p.getAttribute("href") === (a.href == null || a.href === "" ? null : a.href) && p.getAttribute("rel") === (a.rel == null ? null : a.rel) && p.getAttribute("title") === (a.title == null ? null : a.title) && p.getAttribute("crossorigin") === (a.crossOrigin == null ? null : a.crossOrigin)) {
                            k.splice(T, 1);
                            break t;
                          }
                      }
                      p = d.createElement(o), En(p, o, a), d.head.appendChild(p);
                      break;
                    case "meta":
                      if (k = h0(
                        "meta",
                        "content",
                        d
                      ).get(o + (a.content || ""))) {
                        for (T = 0; T < k.length; T++)
                          if (p = k[T], p.getAttribute("content") === (a.content == null ? null : "" + a.content) && p.getAttribute("name") === (a.name == null ? null : a.name) && p.getAttribute("property") === (a.property == null ? null : a.property) && p.getAttribute("http-equiv") === (a.httpEquiv == null ? null : a.httpEquiv) && p.getAttribute("charset") === (a.charSet == null ? null : a.charSet)) {
                            k.splice(T, 1);
                            break t;
                          }
                      }
                      p = d.createElement(o), En(p, o, a), d.head.appendChild(p);
                      break;
                    default:
                      throw Error(l(468, o));
                  }
                  p[Rt] = e, Qt(p), o = p;
                }
                e.stateNode = o;
              } else
                m0(
                  d,
                  e.type,
                  e.stateNode
                );
            else
              e.stateNode = d0(
                d,
                o,
                e.memoizedProps
              );
          else
            p !== o ? (p === null ? a.stateNode !== null && (a = a.stateNode, a.parentNode.removeChild(a)) : p.count--, o === null ? m0(
              d,
              e.type,
              e.stateNode
            ) : d0(
              d,
              o,
              e.memoizedProps
            )) : o === null && e.stateNode !== null && rd(
              e,
              e.memoizedProps,
              a.memoizedProps
            );
        }
        break;
      case 27:
        Gn(t, e), $n(e), o & 512 && (on || a === null || Yr(a, a.return)), a !== null && o & 4 && rd(
          e,
          e.memoizedProps,
          a.memoizedProps
        );
        break;
      case 5:
        if (Gn(t, e), $n(e), o & 512 && (on || a === null || Yr(a, a.return)), e.flags & 32) {
          d = e.stateNode;
          try {
            si(d, "");
          } catch (Fe) {
            jt(e, e.return, Fe);
          }
        }
        o & 4 && e.stateNode != null && (d = e.memoizedProps, rd(
          e,
          d,
          a !== null ? a.memoizedProps : d
        )), o & 1024 && (ld = !0);
        break;
      case 6:
        if (Gn(t, e), $n(e), o & 4) {
          if (e.stateNode === null)
            throw Error(l(162));
          o = e.memoizedProps, a = e.stateNode;
          try {
            a.nodeValue = o;
          } catch (Fe) {
            jt(e, e.return, Fe);
          }
        }
        break;
      case 3:
        if (Ju = null, d = zr, zr = Zu(t.containerInfo), Gn(t, e), zr = d, $n(e), o & 4 && a !== null && a.memoizedState.isDehydrated)
          try {
            io(t.containerInfo);
          } catch (Fe) {
            jt(e, e.return, Fe);
          }
        ld && (ld = !1, mg(e));
        break;
      case 4:
        o = zr, zr = Zu(
          e.stateNode.containerInfo
        ), Gn(t, e), $n(e), zr = o;
        break;
      case 12:
        Gn(t, e), $n(e);
        break;
      case 31:
        Gn(t, e), $n(e), o & 4 && (o = e.updateQueue, o !== null && (e.updateQueue = null, Bu(e, o)));
        break;
      case 13:
        Gn(t, e), $n(e), e.child.flags & 8192 && e.memoizedState !== null != (a !== null && a.memoizedState !== null) && (Iu = dn()), o & 4 && (o = e.updateQueue, o !== null && (e.updateQueue = null, Bu(e, o)));
        break;
      case 22:
        d = e.memoizedState !== null;
        var R = a !== null && a.memoizedState !== null, ae = Ei, pe = on;
        if (Ei = ae || d, on = pe || R, Gn(t, e), on = pe, Ei = ae, $n(e), o & 8192)
          e: for (t = e.stateNode, t._visibility = d ? t._visibility & -2 : t._visibility | 1, d && (a === null || R || Ei || on || el(e)), a = null, t = e; ; ) {
            if (t.tag === 5 || t.tag === 26) {
              if (a === null) {
                R = a = t;
                try {
                  if (p = R.stateNode, d)
                    k = p.style, typeof k.setProperty == "function" ? k.setProperty("display", "none", "important") : k.display = "none";
                  else {
                    T = R.stateNode;
                    var xe = R.memoizedProps.style, oe = xe != null && xe.hasOwnProperty("display") ? xe.display : null;
                    T.style.display = oe == null || typeof oe == "boolean" ? "" : ("" + oe).trim();
                  }
                } catch (Fe) {
                  jt(R, R.return, Fe);
                }
              }
            } else if (t.tag === 6) {
              if (a === null) {
                R = t;
                try {
                  R.stateNode.nodeValue = d ? "" : R.memoizedProps;
                } catch (Fe) {
                  jt(R, R.return, Fe);
                }
              }
            } else if (t.tag === 18) {
              if (a === null) {
                R = t;
                try {
                  var ce = R.stateNode;
                  d ? r0(ce, !0) : r0(R.stateNode, !1);
                } catch (Fe) {
                  jt(R, R.return, Fe);
                }
              }
            } else if ((t.tag !== 22 && t.tag !== 23 || t.memoizedState === null || t === e) && t.child !== null) {
              t.child.return = t, t = t.child;
              continue;
            }
            if (t === e) break e;
            for (; t.sibling === null; ) {
              if (t.return === null || t.return === e) break e;
              a === t && (a = null), t = t.return;
            }
            a === t && (a = null), t.sibling.return = t.return, t = t.sibling;
          }
        o & 4 && (o = e.updateQueue, o !== null && (a = o.retryQueue, a !== null && (o.retryQueue = null, Bu(e, a))));
        break;
      case 19:
        Gn(t, e), $n(e), o & 4 && (o = e.updateQueue, o !== null && (e.updateQueue = null, Bu(e, o)));
        break;
      case 30:
        break;
      case 21:
        break;
      default:
        Gn(t, e), $n(e);
    }
  }
  function $n(e) {
    var t = e.flags;
    if (t & 2) {
      try {
        for (var a, o = e.return; o !== null; ) {
          if (ag(o)) {
            a = o;
            break;
          }
          o = o.return;
        }
        if (a == null) throw Error(l(160));
        switch (a.tag) {
          case 27:
            var d = a.stateNode, p = id(e);
            Lu(e, p, d);
            break;
          case 5:
            var k = a.stateNode;
            a.flags & 32 && (si(k, ""), a.flags &= -33);
            var T = id(e);
            Lu(e, T, k);
            break;
          case 3:
          case 4:
            var R = a.stateNode.containerInfo, ae = id(e);
            ad(
              e,
              ae,
              R
            );
            break;
          default:
            throw Error(l(161));
        }
      } catch (pe) {
        jt(e, e.return, pe);
      }
      e.flags &= -3;
    }
    t & 4096 && (e.flags &= -4097);
  }
  function mg(e) {
    if (e.subtreeFlags & 1024)
      for (e = e.child; e !== null; ) {
        var t = e;
        mg(t), t.tag === 5 && t.flags & 1024 && t.stateNode.reset(), e = e.sibling;
      }
  }
  function ji(e, t) {
    if (t.subtreeFlags & 8772)
      for (t = t.child; t !== null; )
        sg(e, t.alternate, t), t = t.sibling;
  }
  function el(e) {
    for (e = e.child; e !== null; ) {
      var t = e;
      switch (t.tag) {
        case 0:
        case 11:
        case 14:
        case 15:
          oa(4, t, t.return), el(t);
          break;
        case 1:
          Yr(t, t.return);
          var a = t.stateNode;
          typeof a.componentWillUnmount == "function" && rg(
            t,
            t.return,
            a
          ), el(t);
          break;
        case 27:
          bs(t.stateNode);
        case 26:
        case 5:
          Yr(t, t.return), el(t);
          break;
        case 22:
          t.memoizedState === null && el(t);
          break;
        case 30:
          el(t);
          break;
        default:
          el(t);
      }
      e = e.sibling;
    }
  }
  function Ti(e, t, a) {
    for (a = a && (t.subtreeFlags & 8772) !== 0, t = t.child; t !== null; ) {
      var o = t.alternate, d = e, p = t, k = p.flags;
      switch (p.tag) {
        case 0:
        case 11:
        case 15:
          Ti(
            d,
            p,
            a
          ), ss(4, p);
          break;
        case 1:
          if (Ti(
            d,
            p,
            a
          ), o = p, d = o.stateNode, typeof d.componentDidMount == "function")
            try {
              d.componentDidMount();
            } catch (ae) {
              jt(o, o.return, ae);
            }
          if (o = p, d = o.updateQueue, d !== null) {
            var T = o.stateNode;
            try {
              var R = d.shared.hiddenCallbacks;
              if (R !== null)
                for (d.shared.hiddenCallbacks = null, d = 0; d < R.length; d++)
                  Km(R[d], T);
            } catch (ae) {
              jt(o, o.return, ae);
            }
          }
          a && k & 64 && ng(p), us(p, p.return);
          break;
        case 27:
          lg(p);
        case 26:
        case 5:
          Ti(
            d,
            p,
            a
          ), a && o === null && k & 4 && ig(p), us(p, p.return);
          break;
        case 12:
          Ti(
            d,
            p,
            a
          );
          break;
        case 31:
          Ti(
            d,
            p,
            a
          ), a && k & 4 && fg(d, p);
          break;
        case 13:
          Ti(
            d,
            p,
            a
          ), a && k & 4 && dg(d, p);
          break;
        case 22:
          p.memoizedState === null && Ti(
            d,
            p,
            a
          ), us(p, p.return);
          break;
        case 30:
          break;
        default:
          Ti(
            d,
            p,
            a
          );
      }
      t = t.sibling;
    }
  }
  function od(e, t) {
    var a = null;
    e !== null && e.memoizedState !== null && e.memoizedState.cachePool !== null && (a = e.memoizedState.cachePool.pool), e = null, t.memoizedState !== null && t.memoizedState.cachePool !== null && (e = t.memoizedState.cachePool.pool), e !== a && (e != null && e.refCount++, a != null && Xo(a));
  }
  function sd(e, t) {
    e = null, t.alternate !== null && (e = t.alternate.memoizedState.cache), t = t.memoizedState.cache, t !== e && (t.refCount++, e != null && Xo(e));
  }
  function Mr(e, t, a, o) {
    if (t.subtreeFlags & 10256)
      for (t = t.child; t !== null; )
        pg(
          e,
          t,
          a,
          o
        ), t = t.sibling;
  }
  function pg(e, t, a, o) {
    var d = t.flags;
    switch (t.tag) {
      case 0:
      case 11:
      case 15:
        Mr(
          e,
          t,
          a,
          o
        ), d & 2048 && ss(9, t);
        break;
      case 1:
        Mr(
          e,
          t,
          a,
          o
        );
        break;
      case 3:
        Mr(
          e,
          t,
          a,
          o
        ), d & 2048 && (e = null, t.alternate !== null && (e = t.alternate.memoizedState.cache), t = t.memoizedState.cache, t !== e && (t.refCount++, e != null && Xo(e)));
        break;
      case 12:
        if (d & 2048) {
          Mr(
            e,
            t,
            a,
            o
          ), e = t.stateNode;
          try {
            var p = t.memoizedProps, k = p.id, T = p.onPostCommit;
            typeof T == "function" && T(
              k,
              t.alternate === null ? "mount" : "update",
              e.passiveEffectDuration,
              -0
            );
          } catch (R) {
            jt(t, t.return, R);
          }
        } else
          Mr(
            e,
            t,
            a,
            o
          );
        break;
      case 31:
        Mr(
          e,
          t,
          a,
          o
        );
        break;
      case 13:
        Mr(
          e,
          t,
          a,
          o
        );
        break;
      case 23:
        break;
      case 22:
        p = t.stateNode, k = t.alternate, t.memoizedState !== null ? p._visibility & 2 ? Mr(
          e,
          t,
          a,
          o
        ) : cs(e, t) : p._visibility & 2 ? Mr(
          e,
          t,
          a,
          o
        ) : (p._visibility |= 2, $l(
          e,
          t,
          a,
          o,
          (t.subtreeFlags & 10256) !== 0 || !1
        )), d & 2048 && od(k, t);
        break;
      case 24:
        Mr(
          e,
          t,
          a,
          o
        ), d & 2048 && sd(t.alternate, t);
        break;
      default:
        Mr(
          e,
          t,
          a,
          o
        );
    }
  }
  function $l(e, t, a, o, d) {
    for (d = d && ((t.subtreeFlags & 10256) !== 0 || !1), t = t.child; t !== null; ) {
      var p = e, k = t, T = a, R = o, ae = k.flags;
      switch (k.tag) {
        case 0:
        case 11:
        case 15:
          $l(
            p,
            k,
            T,
            R,
            d
          ), ss(8, k);
          break;
        case 23:
          break;
        case 22:
          var pe = k.stateNode;
          k.memoizedState !== null ? pe._visibility & 2 ? $l(
            p,
            k,
            T,
            R,
            d
          ) : cs(
            p,
            k
          ) : (pe._visibility |= 2, $l(
            p,
            k,
            T,
            R,
            d
          )), d && ae & 2048 && od(
            k.alternate,
            k
          );
          break;
        case 24:
          $l(
            p,
            k,
            T,
            R,
            d
          ), d && ae & 2048 && sd(k.alternate, k);
          break;
        default:
          $l(
            p,
            k,
            T,
            R,
            d
          );
      }
      t = t.sibling;
    }
  }
  function cs(e, t) {
    if (t.subtreeFlags & 10256)
      for (t = t.child; t !== null; ) {
        var a = e, o = t, d = o.flags;
        switch (o.tag) {
          case 22:
            cs(a, o), d & 2048 && od(
              o.alternate,
              o
            );
            break;
          case 24:
            cs(a, o), d & 2048 && sd(o.alternate, o);
            break;
          default:
            cs(a, o);
        }
        t = t.sibling;
      }
  }
  var fs = 8192;
  function Yl(e, t, a) {
    if (e.subtreeFlags & fs)
      for (e = e.child; e !== null; )
        gg(
          e,
          t,
          a
        ), e = e.sibling;
  }
  function gg(e, t, a) {
    switch (e.tag) {
      case 26:
        Yl(
          e,
          t,
          a
        ), e.flags & fs && e.memoizedState !== null && ix(
          a,
          zr,
          e.memoizedState,
          e.memoizedProps
        );
        break;
      case 5:
        Yl(
          e,
          t,
          a
        );
        break;
      case 3:
      case 4:
        var o = zr;
        zr = Zu(e.stateNode.containerInfo), Yl(
          e,
          t,
          a
        ), zr = o;
        break;
      case 22:
        e.memoizedState === null && (o = e.alternate, o !== null && o.memoizedState !== null ? (o = fs, fs = 16777216, Yl(
          e,
          t,
          a
        ), fs = o) : Yl(
          e,
          t,
          a
        ));
        break;
      default:
        Yl(
          e,
          t,
          a
        );
    }
  }
  function yg(e) {
    var t = e.alternate;
    if (t !== null && (e = t.child, e !== null)) {
      t.child = null;
      do
        t = e.sibling, e.sibling = null, e = t;
      while (e !== null);
    }
  }
  function ds(e) {
    var t = e.deletions;
    if ((e.flags & 16) !== 0) {
      if (t !== null)
        for (var a = 0; a < t.length; a++) {
          var o = t[a];
          bn = o, xg(
            o,
            e
          );
        }
      yg(e);
    }
    if (e.subtreeFlags & 10256)
      for (e = e.child; e !== null; )
        bg(e), e = e.sibling;
  }
  function bg(e) {
    switch (e.tag) {
      case 0:
      case 11:
      case 15:
        ds(e), e.flags & 2048 && oa(9, e, e.return);
        break;
      case 3:
        ds(e);
        break;
      case 12:
        ds(e);
        break;
      case 22:
        var t = e.stateNode;
        e.memoizedState !== null && t._visibility & 2 && (e.return === null || e.return.tag !== 13) ? (t._visibility &= -3, Uu(e)) : ds(e);
        break;
      default:
        ds(e);
    }
  }
  function Uu(e) {
    var t = e.deletions;
    if ((e.flags & 16) !== 0) {
      if (t !== null)
        for (var a = 0; a < t.length; a++) {
          var o = t[a];
          bn = o, xg(
            o,
            e
          );
        }
      yg(e);
    }
    for (e = e.child; e !== null; ) {
      switch (t = e, t.tag) {
        case 0:
        case 11:
        case 15:
          oa(8, t, t.return), Uu(t);
          break;
        case 22:
          a = t.stateNode, a._visibility & 2 && (a._visibility &= -3, Uu(t));
          break;
        default:
          Uu(t);
      }
      e = e.sibling;
    }
  }
  function xg(e, t) {
    for (; bn !== null; ) {
      var a = bn;
      switch (a.tag) {
        case 0:
        case 11:
        case 15:
          oa(8, a, t);
          break;
        case 23:
        case 22:
          if (a.memoizedState !== null && a.memoizedState.cachePool !== null) {
            var o = a.memoizedState.cachePool.pool;
            o != null && o.refCount++;
          }
          break;
        case 24:
          Xo(a.memoizedState.cache);
      }
      if (o = a.child, o !== null) o.return = a, bn = o;
      else
        e: for (a = e; bn !== null; ) {
          o = bn;
          var d = o.sibling, p = o.return;
          if (ug(o), o === a) {
            bn = null;
            break e;
          }
          if (d !== null) {
            d.return = p, bn = d;
            break e;
          }
          bn = p;
        }
    }
  }
  var xb = {
    getCacheForType: function(e) {
      var t = kn(rn), a = t.data.get(e);
      return a === void 0 && (a = e(), t.data.set(e, a)), a;
    },
    cacheSignal: function() {
      return kn(rn).controller.signal;
    }
  }, vb = typeof WeakMap == "function" ? WeakMap : Map, Et = 0, Ot = null, ct = null, mt = 0, _t = 0, lr = null, sa = !1, Xl = !1, ud = !1, Ni = 0, $t = 0, ua = 0, tl = 0, cd = 0, or = 0, Ql = 0, hs = null, Yn = null, fd = !1, Iu = 0, vg = 0, qu = 1 / 0, Hu = null, ca = null, fn = 0, fa = null, Zl = null, Ai = 0, dd = 0, hd = null, Sg = null, ms = 0, md = null;
  function sr() {
    return (Et & 2) !== 0 && mt !== 0 ? mt & -mt : ee.T !== null ? vd() : Ta();
  }
  function wg() {
    if (or === 0)
      if ((mt & 536870912) === 0 || yt) {
        var e = Ii;
        Ii <<= 1, (Ii & 3932160) === 0 && (Ii = 262144), or = e;
      } else or = 536870912;
    return e = ir.current, e !== null && (e.flags |= 32), or;
  }
  function Xn(e, t, a) {
    (e === Ot && (_t === 2 || _t === 9) || e.cancelPendingCommit !== null) && (Wl(e, 0), da(
      e,
      mt,
      or,
      !1
    )), hr(e, a), ((Et & 2) === 0 || e !== Ot) && (e === Ot && ((Et & 2) === 0 && (tl |= a), $t === 4 && da(
      e,
      mt,
      or,
      !1
    )), Xr(e));
  }
  function kg(e, t, a) {
    if ((Et & 6) !== 0) throw Error(l(327));
    var o = !a && (t & 127) === 0 && (t & e.expiredLanes) === 0 || ai(e, t), d = o ? kb(e, t) : gd(e, t, !0), p = o;
    do {
      if (d === 0) {
        Xl && !o && da(e, t, 0, !1);
        break;
      } else {
        if (a = e.current.alternate, p && !Sb(a)) {
          d = gd(e, t, !1), p = !1;
          continue;
        }
        if (d === 2) {
          if (p = t, e.errorRecoveryDisabledLanes & p)
            var k = 0;
          else
            k = e.pendingLanes & -536870913, k = k !== 0 ? k : k & 536870912 ? 536870912 : 0;
          if (k !== 0) {
            t = k;
            e: {
              var T = e;
              d = hs;
              var R = T.current.memoizedState.isDehydrated;
              if (R && (Wl(T, k).flags |= 256), k = gd(
                T,
                k,
                !1
              ), k !== 2) {
                if (ud && !R) {
                  T.errorRecoveryDisabledLanes |= p, tl |= p, d = 4;
                  break e;
                }
                p = Yn, Yn = d, p !== null && (Yn === null ? Yn = p : Yn.push.apply(
                  Yn,
                  p
                ));
              }
              d = k;
            }
            if (p = !1, d !== 2) continue;
          }
        }
        if (d === 1) {
          Wl(e, 0), da(e, t, 0, !0);
          break;
        }
        e: {
          switch (o = e, p = d, p) {
            case 0:
            case 1:
              throw Error(l(345));
            case 4:
              if ((t & 4194048) !== t) break;
            case 6:
              da(
                o,
                t,
                or,
                !sa
              );
              break e;
            case 2:
              Yn = null;
              break;
            case 3:
            case 5:
              break;
            default:
              throw Error(l(329));
          }
          if ((t & 62914560) === t && (d = Iu + 300 - dn(), 10 < d)) {
            if (da(
              o,
              t,
              or,
              !sa
            ), _a(o, 0, !0) !== 0) break e;
            Ai = t, o.timeoutHandle = e0(
              Cg.bind(
                null,
                o,
                a,
                Yn,
                Hu,
                fd,
                t,
                or,
                tl,
                Ql,
                sa,
                p,
                "Throttled",
                -0,
                0
              ),
              d
            );
            break e;
          }
          Cg(
            o,
            a,
            Yn,
            Hu,
            fd,
            t,
            or,
            tl,
            Ql,
            sa,
            p,
            null,
            -0,
            0
          );
        }
      }
      break;
    } while (!0);
    Xr(e);
  }
  function Cg(e, t, a, o, d, p, k, T, R, ae, pe, xe, oe, ce) {
    if (e.timeoutHandle = -1, xe = t.subtreeFlags, xe & 8192 || (xe & 16785408) === 16785408) {
      xe = {
        stylesheets: null,
        count: 0,
        imgCount: 0,
        imgBytes: 0,
        suspenseyImages: [],
        waitingForImages: !0,
        waitingForViewTransition: !1,
        unsuspend: Fn
      }, gg(
        t,
        p,
        xe
      );
      var Fe = (p & 62914560) === p ? Iu - dn() : (p & 4194048) === p ? vg - dn() : 0;
      if (Fe = ax(
        xe,
        Fe
      ), Fe !== null) {
        Ai = p, e.cancelPendingCommit = Fe(
          Mg.bind(
            null,
            e,
            t,
            p,
            a,
            o,
            d,
            k,
            T,
            R,
            pe,
            xe,
            null,
            oe,
            ce
          )
        ), da(e, p, k, !ae);
        return;
      }
    }
    Mg(
      e,
      t,
      p,
      a,
      o,
      d,
      k,
      T,
      R
    );
  }
  function Sb(e) {
    for (var t = e; ; ) {
      var a = t.tag;
      if ((a === 0 || a === 11 || a === 15) && t.flags & 16384 && (a = t.updateQueue, a !== null && (a = a.stores, a !== null)))
        for (var o = 0; o < a.length; o++) {
          var d = a[o], p = d.getSnapshot;
          d = d.value;
          try {
            if (!An(p(), d)) return !1;
          } catch {
            return !1;
          }
        }
      if (a = t.child, t.subtreeFlags & 16384 && a !== null)
        a.return = t, t = a;
      else {
        if (t === e) break;
        for (; t.sibling === null; ) {
          if (t.return === null || t.return === e) return !0;
          t = t.return;
        }
        t.sibling.return = t.return, t = t.sibling;
      }
    }
    return !0;
  }
  function da(e, t, a, o) {
    t &= ~cd, t &= ~tl, e.suspendedLanes |= t, e.pingedLanes &= ~t, o && (e.warmLanes |= t), o = e.expirationTimes;
    for (var d = t; 0 < d; ) {
      var p = 31 - Oe(d), k = 1 << p;
      o[p] = -1, d &= ~k;
    }
    a !== 0 && ja(e, a, t);
  }
  function Pu() {
    return (Et & 6) === 0 ? (ps(0), !1) : !0;
  }
  function pd() {
    if (ct !== null) {
      if (_t === 0)
        var e = ct.return;
      else
        e = ct, xi = Ga = null, zf(e), Pl = null, Zo = 0, e = ct;
      for (; e !== null; )
        tg(e.alternate, e), e = e.return;
      ct = null;
    }
  }
  function Wl(e, t) {
    var a = e.timeoutHandle;
    a !== -1 && (e.timeoutHandle = -1, Hb(a)), a = e.cancelPendingCommit, a !== null && (e.cancelPendingCommit = null, a()), Ai = 0, pd(), Ot = e, ct = a = yi(e.current, null), mt = t, _t = 0, lr = null, sa = !1, Xl = ai(e, t), ud = !1, Ql = or = cd = tl = ua = $t = 0, Yn = hs = null, fd = !1, (t & 8) !== 0 && (t |= t & 32);
    var o = e.entangledLanes;
    if (o !== 0)
      for (e = e.entanglements, o &= t; 0 < o; ) {
        var d = 31 - Oe(o), p = 1 << d;
        t |= e[d], o &= ~p;
      }
    return Ni = t, yn(), a;
  }
  function Eg(e, t) {
    at = null, ee.H = as, t === Hl || t === yu ? (t = Hm(), _t = 3) : t === xf ? (t = Hm(), _t = 4) : _t = t === $f ? 8 : t !== null && typeof t == "object" && typeof t.then == "function" ? 6 : 1, lr = t, ct === null && ($t = 1, zu(
      e,
      br(t, e.current)
    ));
  }
  function _g() {
    var e = ir.current;
    return e === null ? !0 : (mt & 4194048) === mt ? wr === null : (mt & 62914560) === mt || (mt & 536870912) !== 0 ? e === wr : !1;
  }
  function jg() {
    var e = ee.H;
    return ee.H = as, e === null ? as : e;
  }
  function Tg() {
    var e = ee.A;
    return ee.A = xb, e;
  }
  function Fu() {
    $t = 4, sa || (mt & 4194048) !== mt && ir.current !== null || (Xl = !0), (ua & 134217727) === 0 && (tl & 134217727) === 0 || Ot === null || da(
      Ot,
      mt,
      or,
      !1
    );
  }
  function gd(e, t, a) {
    var o = Et;
    Et |= 2;
    var d = jg(), p = Tg();
    (Ot !== e || mt !== t) && (Hu = null, Wl(e, t)), t = !1;
    var k = $t;
    e: do
      try {
        if (_t !== 0 && ct !== null) {
          var T = ct, R = lr;
          switch (_t) {
            case 8:
              pd(), k = 6;
              break e;
            case 3:
            case 2:
            case 9:
            case 6:
              ir.current === null && (t = !0);
              var ae = _t;
              if (_t = 0, lr = null, Jl(e, T, R, ae), a && Xl) {
                k = 0;
                break e;
              }
              break;
            default:
              ae = _t, _t = 0, lr = null, Jl(e, T, R, ae);
          }
        }
        wb(), k = $t;
        break;
      } catch (pe) {
        Eg(e, pe);
      }
    while (!0);
    return t && e.shellSuspendCounter++, xi = Ga = null, Et = o, ee.H = d, ee.A = p, ct === null && (Ot = null, mt = 0, yn()), k;
  }
  function wb() {
    for (; ct !== null; ) Ng(ct);
  }
  function kb(e, t) {
    var a = Et;
    Et |= 2;
    var o = jg(), d = Tg();
    Ot !== e || mt !== t ? (Hu = null, qu = dn() + 500, Wl(e, t)) : Xl = ai(
      e,
      t
    );
    e: do
      try {
        if (_t !== 0 && ct !== null) {
          t = ct;
          var p = lr;
          t: switch (_t) {
            case 1:
              _t = 0, lr = null, Jl(e, t, p, 1);
              break;
            case 2:
            case 9:
              if (Im(p)) {
                _t = 0, lr = null, Ag(t);
                break;
              }
              t = function() {
                _t !== 2 && _t !== 9 || Ot !== e || (_t = 7), Xr(e);
              }, p.then(t, t);
              break e;
            case 3:
              _t = 7;
              break e;
            case 4:
              _t = 5;
              break e;
            case 7:
              Im(p) ? (_t = 0, lr = null, Ag(t)) : (_t = 0, lr = null, Jl(e, t, p, 7));
              break;
            case 5:
              var k = null;
              switch (ct.tag) {
                case 26:
                  k = ct.memoizedState;
                case 5:
                case 27:
                  var T = ct;
                  if (k ? p0(k) : T.stateNode.complete) {
                    _t = 0, lr = null;
                    var R = T.sibling;
                    if (R !== null) ct = R;
                    else {
                      var ae = T.return;
                      ae !== null ? (ct = ae, Vu(ae)) : ct = null;
                    }
                    break t;
                  }
              }
              _t = 0, lr = null, Jl(e, t, p, 5);
              break;
            case 6:
              _t = 0, lr = null, Jl(e, t, p, 6);
              break;
            case 8:
              pd(), $t = 6;
              break e;
            default:
              throw Error(l(462));
          }
        }
        Cb();
        break;
      } catch (pe) {
        Eg(e, pe);
      }
    while (!0);
    return xi = Ga = null, ee.H = o, ee.A = d, Et = a, ct !== null ? 0 : (Ot = null, mt = 0, yn(), $t);
  }
  function Cb() {
    for (; ct !== null && !hl(); )
      Ng(ct);
  }
  function Ng(e) {
    var t = Jp(e.alternate, e, Ni);
    e.memoizedProps = e.pendingProps, t === null ? Vu(e) : ct = t;
  }
  function Ag(e) {
    var t = e, a = t.alternate;
    switch (t.tag) {
      case 15:
      case 0:
        t = $p(
          a,
          t,
          t.pendingProps,
          t.type,
          void 0,
          mt
        );
        break;
      case 11:
        t = $p(
          a,
          t,
          t.pendingProps,
          t.type.render,
          t.ref,
          mt
        );
        break;
      case 5:
        zf(t);
      default:
        tg(a, t), t = ct = Tm(t, Ni), t = Jp(a, t, Ni);
    }
    e.memoizedProps = e.pendingProps, t === null ? Vu(e) : ct = t;
  }
  function Jl(e, t, a, o) {
    xi = Ga = null, zf(t), Pl = null, Zo = 0;
    var d = t.return;
    try {
      if (db(
        e,
        d,
        t,
        a,
        mt
      )) {
        $t = 1, zu(
          e,
          br(a, e.current)
        ), ct = null;
        return;
      }
    } catch (p) {
      if (d !== null) throw ct = d, p;
      $t = 1, zu(
        e,
        br(a, e.current)
      ), ct = null;
      return;
    }
    t.flags & 32768 ? (yt || o === 1 ? e = !0 : Xl || (mt & 536870912) !== 0 ? e = !1 : (sa = e = !0, (o === 2 || o === 9 || o === 3 || o === 6) && (o = ir.current, o !== null && o.tag === 13 && (o.flags |= 16384))), zg(t, e)) : Vu(t);
  }
  function Vu(e) {
    var t = e;
    do {
      if ((t.flags & 32768) !== 0) {
        zg(
          t,
          sa
        );
        return;
      }
      e = t.return;
      var a = pb(
        t.alternate,
        t,
        Ni
      );
      if (a !== null) {
        ct = a;
        return;
      }
      if (t = t.sibling, t !== null) {
        ct = t;
        return;
      }
      ct = t = e;
    } while (t !== null);
    $t === 0 && ($t = 5);
  }
  function zg(e, t) {
    do {
      var a = gb(e.alternate, e);
      if (a !== null) {
        a.flags &= 32767, ct = a;
        return;
      }
      if (a = e.return, a !== null && (a.flags |= 32768, a.subtreeFlags = 0, a.deletions = null), !t && (e = e.sibling, e !== null)) {
        ct = e;
        return;
      }
      ct = e = a;
    } while (e !== null);
    $t = 6, ct = null;
  }
  function Mg(e, t, a, o, d, p, k, T, R) {
    e.cancelPendingCommit = null;
    do
      Ku();
    while (fn !== 0);
    if ((Et & 6) !== 0) throw Error(l(327));
    if (t !== null) {
      if (t === e.current) throw Error(l(177));
      if (p = t.lanes | t.childLanes, p |= it, Co(
        e,
        a,
        p,
        k,
        T,
        R
      ), e === Ot && (ct = Ot = null, mt = 0), Zl = t, fa = e, Ai = a, dd = p, hd = d, Sg = o, (t.subtreeFlags & 10256) !== 0 || (t.flags & 10256) !== 0 ? (e.callbackNode = null, e.callbackPriority = 0, Tb(Qe, function() {
        return Bg(), null;
      })) : (e.callbackNode = null, e.callbackPriority = 0), o = (t.flags & 13878) !== 0, (t.subtreeFlags & 13878) !== 0 || o) {
        o = ee.T, ee.T = null, d = ve.p, ve.p = 2, k = Et, Et |= 4;
        try {
          yb(e, t, a);
        } finally {
          Et = k, ve.p = d, ee.T = o;
        }
      }
      fn = 1, Og(), Dg(), Rg();
    }
  }
  function Og() {
    if (fn === 1) {
      fn = 0;
      var e = fa, t = Zl, a = (t.flags & 13878) !== 0;
      if ((t.subtreeFlags & 13878) !== 0 || a) {
        a = ee.T, ee.T = null;
        var o = ve.p;
        ve.p = 2;
        var d = Et;
        Et |= 4;
        try {
          hg(t, e);
          var p = Td, k = C(e.containerInfo), T = p.focusedElem, R = p.selectionRange;
          if (k !== T && T && T.ownerDocument && w(
            T.ownerDocument.documentElement,
            T
          )) {
            if (R !== null && j(T)) {
              var ae = R.start, pe = R.end;
              if (pe === void 0 && (pe = ae), "selectionStart" in T)
                T.selectionStart = ae, T.selectionEnd = Math.min(
                  pe,
                  T.value.length
                );
              else {
                var xe = T.ownerDocument || document, oe = xe && xe.defaultView || window;
                if (oe.getSelection) {
                  var ce = oe.getSelection(), Fe = T.textContent.length, We = Math.min(R.start, Fe), zt = R.end === void 0 ? We : Math.min(R.end, Fe);
                  !ce.extend && We > zt && (k = zt, zt = We, We = k);
                  var Z = v(
                    T,
                    We
                  ), F = v(
                    T,
                    zt
                  );
                  if (Z && F && (ce.rangeCount !== 1 || ce.anchorNode !== Z.node || ce.anchorOffset !== Z.offset || ce.focusNode !== F.node || ce.focusOffset !== F.offset)) {
                    var re = xe.createRange();
                    re.setStart(Z.node, Z.offset), ce.removeAllRanges(), We > zt ? (ce.addRange(re), ce.extend(F.node, F.offset)) : (re.setEnd(F.node, F.offset), ce.addRange(re));
                  }
                }
              }
            }
            for (xe = [], ce = T; ce = ce.parentNode; )
              ce.nodeType === 1 && xe.push({
                element: ce,
                left: ce.scrollLeft,
                top: ce.scrollTop
              });
            for (typeof T.focus == "function" && T.focus(), T = 0; T < xe.length; T++) {
              var ge = xe[T];
              ge.element.scrollLeft = ge.left, ge.element.scrollTop = ge.top;
            }
          }
          rc = !!jd, Td = jd = null;
        } finally {
          Et = d, ve.p = o, ee.T = a;
        }
      }
      e.current = t, fn = 2;
    }
  }
  function Dg() {
    if (fn === 2) {
      fn = 0;
      var e = fa, t = Zl, a = (t.flags & 8772) !== 0;
      if ((t.subtreeFlags & 8772) !== 0 || a) {
        a = ee.T, ee.T = null;
        var o = ve.p;
        ve.p = 2;
        var d = Et;
        Et |= 4;
        try {
          sg(e, t.alternate, t);
        } finally {
          Et = d, ve.p = o, ee.T = a;
        }
      }
      fn = 3;
    }
  }
  function Rg() {
    if (fn === 4 || fn === 3) {
      fn = 0, ri();
      var e = fa, t = Zl, a = Ai, o = Sg;
      (t.subtreeFlags & 10256) !== 0 || (t.flags & 10256) !== 0 ? fn = 5 : (fn = 0, Zl = fa = null, Lg(e, e.pendingLanes));
      var d = e.pendingLanes;
      if (d === 0 && (ca = null), qi(a), t = t.stateNode, Vt && typeof Vt.onCommitFiberRoot == "function")
        try {
          Vt.onCommitFiberRoot(
            Jt,
            t,
            void 0,
            (t.current.flags & 128) === 128
          );
        } catch {
        }
      if (o !== null) {
        t = ee.T, d = ve.p, ve.p = 2, ee.T = null;
        try {
          for (var p = e.onRecoverableError, k = 0; k < o.length; k++) {
            var T = o[k];
            p(T.value, {
              componentStack: T.stack
            });
          }
        } finally {
          ee.T = t, ve.p = d;
        }
      }
      (Ai & 3) !== 0 && Ku(), Xr(e), d = e.pendingLanes, (a & 261930) !== 0 && (d & 42) !== 0 ? e === md ? ms++ : (ms = 0, md = e) : ms = 0, ps(0);
    }
  }
  function Lg(e, t) {
    (e.pooledCacheLanes &= t) === 0 && (t = e.pooledCache, t != null && (e.pooledCache = null, Xo(t)));
  }
  function Ku() {
    return Og(), Dg(), Rg(), Bg();
  }
  function Bg() {
    if (fn !== 5) return !1;
    var e = fa, t = dd;
    dd = 0;
    var a = qi(Ai), o = ee.T, d = ve.p;
    try {
      ve.p = 32 > a ? 32 : a, ee.T = null, a = hd, hd = null;
      var p = fa, k = Ai;
      if (fn = 0, Zl = fa = null, Ai = 0, (Et & 6) !== 0) throw Error(l(331));
      var T = Et;
      if (Et |= 4, bg(p.current), pg(
        p,
        p.current,
        k,
        a
      ), Et = T, ps(0, !1), Vt && typeof Vt.onPostCommitFiberRoot == "function")
        try {
          Vt.onPostCommitFiberRoot(Jt, p);
        } catch {
        }
      return !0;
    } finally {
      ve.p = d, ee.T = o, Lg(e, t);
    }
  }
  function Ug(e, t, a) {
    t = br(a, t), t = Gf(e.stateNode, t, 2), e = ia(e, t, 2), e !== null && (hr(e, 2), Xr(e));
  }
  function jt(e, t, a) {
    if (e.tag === 3)
      Ug(e, e, a);
    else
      for (; t !== null; ) {
        if (t.tag === 3) {
          Ug(
            t,
            e,
            a
          );
          break;
        } else if (t.tag === 1) {
          var o = t.stateNode;
          if (typeof t.type.getDerivedStateFromError == "function" || typeof o.componentDidCatch == "function" && (ca === null || !ca.has(o))) {
            e = br(a, e), a = Ip(2), o = ia(t, a, 2), o !== null && (qp(
              a,
              o,
              t,
              e
            ), hr(o, 2), Xr(o));
            break;
          }
        }
        t = t.return;
      }
  }
  function yd(e, t, a) {
    var o = e.pingCache;
    if (o === null) {
      o = e.pingCache = new vb();
      var d = /* @__PURE__ */ new Set();
      o.set(t, d);
    } else
      d = o.get(t), d === void 0 && (d = /* @__PURE__ */ new Set(), o.set(t, d));
    d.has(a) || (ud = !0, d.add(a), e = Eb.bind(null, e, t, a), t.then(e, e));
  }
  function Eb(e, t, a) {
    var o = e.pingCache;
    o !== null && o.delete(t), e.pingedLanes |= e.suspendedLanes & a, e.warmLanes &= ~a, Ot === e && (mt & a) === a && ($t === 4 || $t === 3 && (mt & 62914560) === mt && 300 > dn() - Iu ? (Et & 2) === 0 && Wl(e, 0) : cd |= a, Ql === mt && (Ql = 0)), Xr(e);
  }
  function Ig(e, t) {
    t === 0 && (t = Zs()), e = Pt(e, t), e !== null && (hr(e, t), Xr(e));
  }
  function _b(e) {
    var t = e.memoizedState, a = 0;
    t !== null && (a = t.retryLane), Ig(e, a);
  }
  function jb(e, t) {
    var a = 0;
    switch (e.tag) {
      case 31:
      case 13:
        var o = e.stateNode, d = e.memoizedState;
        d !== null && (a = d.retryLane);
        break;
      case 19:
        o = e.stateNode;
        break;
      case 22:
        o = e.stateNode._retryCache;
        break;
      default:
        throw Error(l(314));
    }
    o !== null && o.delete(t), Ig(e, a);
  }
  function Tb(e, t) {
    return Lr(e, t);
  }
  var Gu = null, eo = null, bd = !1, $u = !1, xd = !1, ha = 0;
  function Xr(e) {
    e !== eo && e.next === null && (eo === null ? Gu = eo = e : eo = eo.next = e), $u = !0, bd || (bd = !0, Ab());
  }
  function ps(e, t) {
    if (!xd && $u) {
      xd = !0;
      do
        for (var a = !1, o = Gu; o !== null; ) {
          if (e !== 0) {
            var d = o.pendingLanes;
            if (d === 0) var p = 0;
            else {
              var k = o.suspendedLanes, T = o.pingedLanes;
              p = (1 << 31 - Oe(42 | e) + 1) - 1, p &= d & ~(k & ~T), p = p & 201326741 ? p & 201326741 | 1 : p ? p | 2 : 0;
            }
            p !== 0 && (a = !0, Fg(o, p));
          } else
            p = mt, p = _a(
              o,
              o === Ot ? p : 0,
              o.cancelPendingCommit !== null || o.timeoutHandle !== -1
            ), (p & 3) === 0 || ai(o, p) || (a = !0, Fg(o, p));
          o = o.next;
        }
      while (a);
      xd = !1;
    }
  }
  function Nb() {
    qg();
  }
  function qg() {
    $u = bd = !1;
    var e = 0;
    ha !== 0 && qb() && (e = ha);
    for (var t = dn(), a = null, o = Gu; o !== null; ) {
      var d = o.next, p = Hg(o, t);
      p === 0 ? (o.next = null, a === null ? Gu = d : a.next = d, d === null && (eo = a)) : (a = o, (e !== 0 || (p & 3) !== 0) && ($u = !0)), o = d;
    }
    fn !== 0 && fn !== 5 || ps(e), ha !== 0 && (ha = 0);
  }
  function Hg(e, t) {
    for (var a = e.suspendedLanes, o = e.pingedLanes, d = e.expirationTimes, p = e.pendingLanes & -62914561; 0 < p; ) {
      var k = 31 - Oe(p), T = 1 << k, R = d[k];
      R === -1 ? ((T & a) === 0 || (T & o) !== 0) && (d[k] = Qc(T, t)) : R <= t && (e.expiredLanes |= T), p &= ~T;
    }
    if (t = Ot, a = mt, a = _a(
      e,
      e === t ? a : 0,
      e.cancelPendingCommit !== null || e.timeoutHandle !== -1
    ), o = e.callbackNode, a === 0 || e === t && (_t === 2 || _t === 9) || e.cancelPendingCommit !== null)
      return o !== null && o !== null && jn(o), e.callbackNode = null, e.callbackPriority = 0;
    if ((a & 3) === 0 || ai(e, a)) {
      if (t = a & -a, t === e.callbackPriority) return t;
      switch (o !== null && jn(o), qi(a)) {
        case 2:
        case 8:
          a = Te;
          break;
        case 32:
          a = Qe;
          break;
        case 268435456:
          a = xt;
          break;
        default:
          a = Qe;
      }
      return o = Pg.bind(null, e), a = Lr(a, o), e.callbackPriority = t, e.callbackNode = a, t;
    }
    return o !== null && o !== null && jn(o), e.callbackPriority = 2, e.callbackNode = null, 2;
  }
  function Pg(e, t) {
    if (fn !== 0 && fn !== 5)
      return e.callbackNode = null, e.callbackPriority = 0, null;
    var a = e.callbackNode;
    if (Ku() && e.callbackNode !== a)
      return null;
    var o = mt;
    return o = _a(
      e,
      e === Ot ? o : 0,
      e.cancelPendingCommit !== null || e.timeoutHandle !== -1
    ), o === 0 ? null : (kg(e, o, t), Hg(e, dn()), e.callbackNode != null && e.callbackNode === a ? Pg.bind(null, e) : null);
  }
  function Fg(e, t) {
    if (Ku()) return null;
    kg(e, t, !0);
  }
  function Ab() {
    Pb(function() {
      (Et & 6) !== 0 ? Lr(
        de,
        Nb
      ) : qg();
    });
  }
  function vd() {
    if (ha === 0) {
      var e = Il;
      e === 0 && (e = Ue, Ue <<= 1, (Ue & 261888) === 0 && (Ue = 256)), ha = e;
    }
    return ha;
  }
  function Vg(e) {
    return e == null || typeof e == "symbol" || typeof e == "boolean" ? null : typeof e == "function" ? e : Ar("" + e);
  }
  function Kg(e, t) {
    var a = t.ownerDocument.createElement("input");
    return a.name = t.name, a.value = t.value, e.id && a.setAttribute("form", e.id), t.parentNode.insertBefore(a, t), e = new FormData(e), a.parentNode.removeChild(a), e;
  }
  function zb(e, t, a, o, d) {
    if (t === "submit" && a && a.stateNode === d) {
      var p = Vg(
        (d[Xt] || null).action
      ), k = o.submitter;
      k && (t = (t = k[Xt] || null) ? Vg(t.formAction) : k.getAttribute("formAction"), t !== null && (p = t, k = null));
      var T = new vl(
        "action",
        "action",
        null,
        o,
        d
      );
      e.push({
        event: T,
        listeners: [
          {
            instance: null,
            listener: function() {
              if (o.defaultPrevented) {
                if (ha !== 0) {
                  var R = k ? Kg(d, k) : new FormData(d);
                  qf(
                    a,
                    {
                      pending: !0,
                      data: R,
                      method: d.method,
                      action: p
                    },
                    null,
                    R
                  );
                }
              } else
                typeof p == "function" && (T.preventDefault(), R = k ? Kg(d, k) : new FormData(d), qf(
                  a,
                  {
                    pending: !0,
                    data: R,
                    method: d.method,
                    action: p
                  },
                  p,
                  R
                ));
            },
            currentTarget: d
          }
        ]
      });
    }
  }
  for (var Sd = 0; Sd < Re.length; Sd++) {
    var wd = Re[Sd], Mb = wd.toLowerCase(), Ob = wd[0].toUpperCase() + wd.slice(1);
    Ee(
      Mb,
      "on" + Ob
    );
  }
  Ee(te, "onAnimationEnd"), Ee(le, "onAnimationIteration"), Ee(fe, "onAnimationStart"), Ee("dblclick", "onDoubleClick"), Ee("focusin", "onFocus"), Ee("focusout", "onBlur"), Ee(be, "onTransitionRun"), Ee(Ae, "onTransitionStart"), Ee(Le, "onTransitionCancel"), Ee(Ce, "onTransitionEnd"), Hr("onMouseEnter", ["mouseout", "mouseover"]), Hr("onMouseLeave", ["mouseout", "mouseover"]), Hr("onPointerEnter", ["pointerout", "pointerover"]), Hr("onPointerLeave", ["pointerout", "pointerover"]), Tr(
    "onChange",
    "change click focusin focusout input keydown keyup selectionchange".split(" ")
  ), Tr(
    "onSelect",
    "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(
      " "
    )
  ), Tr("onBeforeInput", [
    "compositionend",
    "keypress",
    "textInput",
    "paste"
  ]), Tr(
    "onCompositionEnd",
    "compositionend focusout keydown keypress keyup mousedown".split(" ")
  ), Tr(
    "onCompositionStart",
    "compositionstart focusout keydown keypress keyup mousedown".split(" ")
  ), Tr(
    "onCompositionUpdate",
    "compositionupdate focusout keydown keypress keyup mousedown".split(" ")
  );
  var gs = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(
    " "
  ), Db = new Set(
    "beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gs)
  );
  function Gg(e, t) {
    t = (t & 4) !== 0;
    for (var a = 0; a < e.length; a++) {
      var o = e[a], d = o.event;
      o = o.listeners;
      e: {
        var p = void 0;
        if (t)
          for (var k = o.length - 1; 0 <= k; k--) {
            var T = o[k], R = T.instance, ae = T.currentTarget;
            if (T = T.listener, R !== p && d.isPropagationStopped())
              break e;
            p = T, d.currentTarget = ae;
            try {
              p(d);
            } catch (pe) {
              qe(pe);
            }
            d.currentTarget = null, p = R;
          }
        else
          for (k = 0; k < o.length; k++) {
            if (T = o[k], R = T.instance, ae = T.currentTarget, T = T.listener, R !== p && d.isPropagationStopped())
              break e;
            p = T, d.currentTarget = ae;
            try {
              p(d);
            } catch (pe) {
              qe(pe);
            }
            d.currentTarget = null, p = R;
          }
      }
    }
  }
  function ft(e, t) {
    var a = t[Hi];
    a === void 0 && (a = t[Hi] = /* @__PURE__ */ new Set());
    var o = e + "__bubble";
    a.has(o) || ($g(t, e, 2, !1), a.add(o));
  }
  function kd(e, t, a) {
    var o = 0;
    t && (o |= 4), $g(
      a,
      e,
      o,
      t
    );
  }
  var Yu = "_reactListening" + Math.random().toString(36).slice(2);
  function Cd(e) {
    if (!e[Yu]) {
      e[Yu] = !0, li.forEach(function(a) {
        a !== "selectionchange" && (Db.has(a) || kd(a, !1, e), kd(a, !0, e));
      });
      var t = e.nodeType === 9 ? e : e.ownerDocument;
      t === null || t[Yu] || (t[Yu] = !0, kd("selectionchange", !1, t));
    }
  }
  function $g(e, t, a, o) {
    switch (w0(t)) {
      case 2:
        var d = sx;
        break;
      case 8:
        d = ux;
        break;
      default:
        d = Id;
    }
    a = d.bind(
      null,
      t,
      a,
      e
    ), d = void 0, !Mo || t !== "touchstart" && t !== "touchmove" && t !== "wheel" || (d = !0), o ? d !== void 0 ? e.addEventListener(t, a, {
      capture: !0,
      passive: d
    }) : e.addEventListener(t, a, !0) : d !== void 0 ? e.addEventListener(t, a, {
      passive: d
    }) : e.addEventListener(t, a, !1);
  }
  function Ed(e, t, a, o, d) {
    var p = o;
    if ((t & 1) === 0 && (t & 2) === 0 && o !== null)
      e: for (; ; ) {
        if (o === null) return;
        var k = o.tag;
        if (k === 3 || k === 4) {
          var T = o.stateNode.containerInfo;
          if (T === d) break;
          if (k === 4)
            for (k = o.return; k !== null; ) {
              var R = k.tag;
              if ((R === 3 || R === 4) && k.stateNode.containerInfo === d)
                return;
              k = k.return;
            }
          for (; T !== null; ) {
            if (k = qr(T), k === null) return;
            if (R = k.tag, R === 5 || R === 6 || R === 26 || R === 27) {
              o = p = k;
              continue e;
            }
            T = T.parentNode;
          }
        }
        o = o.return;
      }
    Fi(function() {
      var ae = p, pe = bl(a), xe = [];
      e: {
        var oe = ze.get(e);
        if (oe !== void 0) {
          var ce = vl, Fe = e;
          switch (e) {
            case "keypress":
              if (Gi(a) === 0) break e;
            case "keydown":
            case "keyup":
              ce = jl;
              break;
            case "focusin":
              Fe = "focus", ce = $i;
              break;
            case "focusout":
              Fe = "blur", ce = $i;
              break;
            case "beforeblur":
            case "afterblur":
              ce = $i;
              break;
            case "click":
              if (a.button === 2) break e;
            case "auxclick":
            case "dblclick":
            case "mousedown":
            case "mousemove":
            case "mouseup":
            case "mouseout":
            case "mouseover":
            case "contextmenu":
              ce = kl;
              break;
            case "drag":
            case "dragend":
            case "dragenter":
            case "dragexit":
            case "dragleave":
            case "dragover":
            case "dragstart":
            case "drop":
              ce = tu;
              break;
            case "touchcancel":
            case "touchend":
            case "touchmove":
            case "touchstart":
              ce = Io;
              break;
            case te:
            case le:
            case fe:
              ce = nu;
              break;
            case Ce:
              ce = qo;
              break;
            case "scroll":
            case "scrollend":
              ce = Sl;
              break;
            case "wheel":
              ce = Nl;
              break;
            case "copy":
            case "cut":
            case "paste":
              ce = Yi;
              break;
            case "gotpointercapture":
            case "lostpointercapture":
            case "pointercancel":
            case "pointerdown":
            case "pointermove":
            case "pointerout":
            case "pointerover":
            case "pointerup":
              ce = Uo;
              break;
            case "toggle":
            case "beforetoggle":
              ce = au;
          }
          var We = (t & 4) !== 0, zt = !We && (e === "scroll" || e === "scrollend"), Z = We ? oe !== null ? oe + "Capture" : null : oe;
          We = [];
          for (var F = ae, re; F !== null; ) {
            var ge = F;
            if (re = ge.stateNode, ge = ge.tag, ge !== 5 && ge !== 26 && ge !== 27 || re === null || Z === null || (ge = fi(F, Z), ge != null && We.push(
              ys(F, ge, re)
            )), zt) break;
            F = F.return;
          }
          0 < We.length && (oe = new ce(
            oe,
            Fe,
            null,
            a,
            pe
          ), xe.push({ event: oe, listeners: We }));
        }
      }
      if ((t & 7) === 0) {
        e: {
          if (oe = e === "mouseover" || e === "pointerover", ce = e === "mouseout" || e === "pointerout", oe && a !== pr && (Fe = a.relatedTarget || a.fromElement) && (qr(Fe) || Fe[Rn]))
            break e;
          if ((ce || oe) && (oe = pe.window === pe ? pe : (oe = pe.ownerDocument) ? oe.defaultView || oe.parentWindow : window, ce ? (Fe = a.relatedTarget || a.toElement, ce = ae, Fe = Fe ? qr(Fe) : null, Fe !== null && (zt = c(Fe), We = Fe.tag, Fe !== zt || We !== 5 && We !== 27 && We !== 6) && (Fe = null)) : (ce = null, Fe = ae), ce !== Fe)) {
            if (We = kl, ge = "onMouseLeave", Z = "onMouseEnter", F = "mouse", (e === "pointerout" || e === "pointerover") && (We = Uo, ge = "onPointerLeave", Z = "onPointerEnter", F = "pointer"), zt = ce == null ? oe : tr(ce), re = Fe == null ? oe : tr(Fe), oe = new We(
              ge,
              F + "leave",
              ce,
              a,
              pe
            ), oe.target = zt, oe.relatedTarget = re, ge = null, qr(pe) === ae && (We = new We(
              Z,
              F + "enter",
              Fe,
              a,
              pe
            ), We.target = re, We.relatedTarget = zt, ge = We), zt = ge, ce && Fe)
              t: {
                for (We = Rb, Z = ce, F = Fe, re = 0, ge = Z; ge; ge = We(ge))
                  re++;
                ge = 0;
                for (var Xe = F; Xe; Xe = We(Xe))
                  ge++;
                for (; 0 < re - ge; )
                  Z = We(Z), re--;
                for (; 0 < ge - re; )
                  F = We(F), ge--;
                for (; re--; ) {
                  if (Z === F || F !== null && Z === F.alternate) {
                    We = Z;
                    break t;
                  }
                  Z = We(Z), F = We(F);
                }
                We = null;
              }
            else We = null;
            ce !== null && Yg(
              xe,
              oe,
              ce,
              We,
              !1
            ), Fe !== null && zt !== null && Yg(
              xe,
              zt,
              Fe,
              We,
              !0
            );
          }
        }
        e: {
          if (oe = ae ? tr(ae) : window, ce = oe.nodeName && oe.nodeName.toLowerCase(), ce === "select" || ce === "input" && oe.type === "file")
            var St = Pa;
          else if (Ml(oe))
            if (yr)
              St = Zi;
            else {
              St = gi;
              var Ke = fu;
            }
          else
            ce = oe.nodeName, !ce || ce.toLowerCase() !== "input" || oe.type !== "checkbox" && oe.type !== "radio" ? ae && zo(ae.elementType) && (St = Pa) : St = Ko;
          if (St && (St = St(e, ae))) {
            Vo(
              xe,
              St,
              a,
              pe
            );
            break e;
          }
          Ke && Ke(e, oe, ae), e === "focusout" && ae && oe.type === "number" && ae.memoizedProps.value != null && Da(oe, "number", oe.value);
        }
        switch (Ke = ae ? tr(ae) : window, e) {
          case "focusin":
            (Ml(Ke) || Ke.contentEditable === "true") && (O = Ke, q = ae, H = null);
            break;
          case "focusout":
            H = q = O = null;
            break;
          case "mousedown":
            $ = !0;
            break;
          case "contextmenu":
          case "mouseup":
          case "dragend":
            $ = !1, L(xe, a, pe);
            break;
          case "selectionchange":
            if (A) break;
          case "keydown":
          case "keyup":
            L(xe, a, pe);
        }
        var lt;
        if (qa)
          e: {
            switch (e) {
              case "compositionstart":
                var pt = "onCompositionStart";
                break e;
              case "compositionend":
                pt = "onCompositionEnd";
                break e;
              case "compositionupdate":
                pt = "onCompositionUpdate";
                break e;
            }
            pt = void 0;
          }
        else
          pi ? Fo(e, a) && (pt = "onCompositionEnd") : e === "keydown" && a.keyCode === 229 && (pt = "onCompositionStart");
        pt && (Al && a.locale !== "ko" && (pi || pt !== "onCompositionStart" ? pt === "onCompositionEnd" && pi && (lt = Ki()) : (gr = pe, xl = "value" in gr ? gr.value : gr.textContent, pi = !0)), Ke = Xu(ae, pt), 0 < Ke.length && (pt = new _l(
          pt,
          e,
          null,
          a,
          pe
        ), xe.push({ event: pt, listeners: Ke }), lt ? pt.data = lt : (lt = ou(a), lt !== null && (pt.data = lt)))), (lt = nf ? su(e, a) : rf(e, a)) && (pt = Xu(ae, "onBeforeInput"), 0 < pt.length && (Ke = new _l(
          "onBeforeInput",
          "beforeinput",
          null,
          a,
          pe
        ), xe.push({
          event: Ke,
          listeners: pt
        }), Ke.data = lt)), zb(
          xe,
          e,
          ae,
          a,
          pe
        );
      }
      Gg(xe, t);
    });
  }
  function ys(e, t, a) {
    return {
      instance: e,
      listener: t,
      currentTarget: a
    };
  }
  function Xu(e, t) {
    for (var a = t + "Capture", o = []; e !== null; ) {
      var d = e, p = d.stateNode;
      if (d = d.tag, d !== 5 && d !== 26 && d !== 27 || p === null || (d = fi(e, a), d != null && o.unshift(
        ys(e, d, p)
      ), d = fi(e, t), d != null && o.push(
        ys(e, d, p)
      )), e.tag === 3) return o;
      e = e.return;
    }
    return [];
  }
  function Rb(e) {
    if (e === null) return null;
    do
      e = e.return;
    while (e && e.tag !== 5 && e.tag !== 27);
    return e || null;
  }
  function Yg(e, t, a, o, d) {
    for (var p = t._reactName, k = []; a !== null && a !== o; ) {
      var T = a, R = T.alternate, ae = T.stateNode;
      if (T = T.tag, R !== null && R === o) break;
      T !== 5 && T !== 26 && T !== 27 || ae === null || (R = ae, d ? (ae = fi(a, p), ae != null && k.unshift(
        ys(a, ae, R)
      )) : d || (ae = fi(a, p), ae != null && k.push(
        ys(a, ae, R)
      ))), a = a.return;
    }
    k.length !== 0 && e.push({ event: t, listeners: k });
  }
  var Lb = /\r\n?/g, Bb = /\u0000|\uFFFD/g;
  function Xg(e) {
    return (typeof e == "string" ? e : "" + e).replace(Lb, `
`).replace(Bb, "");
  }
  function Qg(e, t) {
    return t = Xg(t), Xg(e) === t;
  }
  function At(e, t, a, o, d, p) {
    switch (a) {
      case "children":
        typeof o == "string" ? t === "body" || t === "textarea" && o === "" || si(e, o) : (typeof o == "number" || typeof o == "bigint") && t !== "body" && si(e, "" + o);
        break;
      case "className":
        Ma(e, "class", o);
        break;
      case "tabIndex":
        Ma(e, "tabindex", o);
        break;
      case "dir":
      case "role":
      case "viewBox":
      case "width":
      case "height":
        Ma(e, a, o);
        break;
      case "style":
        Ao(e, o, p);
        break;
      case "data":
        if (t !== "object") {
          Ma(e, "data", o);
          break;
        }
      case "src":
      case "href":
        if (o === "" && (t !== "a" || a !== "href")) {
          e.removeAttribute(a);
          break;
        }
        if (o == null || typeof o == "function" || typeof o == "symbol" || typeof o == "boolean") {
          e.removeAttribute(a);
          break;
        }
        o = Ar("" + o), e.setAttribute(a, o);
        break;
      case "action":
      case "formAction":
        if (typeof o == "function") {
          e.setAttribute(
            a,
            "javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')"
          );
          break;
        } else
          typeof p == "function" && (a === "formAction" ? (t !== "input" && At(e, t, "name", d.name, d, null), At(
            e,
            t,
            "formEncType",
            d.formEncType,
            d,
            null
          ), At(
            e,
            t,
            "formMethod",
            d.formMethod,
            d,
            null
          ), At(
            e,
            t,
            "formTarget",
            d.formTarget,
            d,
            null
          )) : (At(e, t, "encType", d.encType, d, null), At(e, t, "method", d.method, d, null), At(e, t, "target", d.target, d, null)));
        if (o == null || typeof o == "symbol" || typeof o == "boolean") {
          e.removeAttribute(a);
          break;
        }
        o = Ar("" + o), e.setAttribute(a, o);
        break;
      case "onClick":
        o != null && (e.onclick = Fn);
        break;
      case "onScroll":
        o != null && ft("scroll", e);
        break;
      case "onScrollEnd":
        o != null && ft("scrollend", e);
        break;
      case "dangerouslySetInnerHTML":
        if (o != null) {
          if (typeof o != "object" || !("__html" in o))
            throw Error(l(61));
          if (a = o.__html, a != null) {
            if (d.children != null) throw Error(l(60));
            e.innerHTML = a;
          }
        }
        break;
      case "multiple":
        e.multiple = o && typeof o != "function" && typeof o != "symbol";
        break;
      case "muted":
        e.muted = o && typeof o != "function" && typeof o != "symbol";
        break;
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "defaultValue":
      case "defaultChecked":
      case "innerHTML":
      case "ref":
        break;
      case "autoFocus":
        break;
      case "xlinkHref":
        if (o == null || typeof o == "function" || typeof o == "boolean" || typeof o == "symbol") {
          e.removeAttribute("xlink:href");
          break;
        }
        a = Ar("" + o), e.setAttributeNS(
          "http://www.w3.org/1999/xlink",
          "xlink:href",
          a
        );
        break;
      case "contentEditable":
      case "spellCheck":
      case "draggable":
      case "value":
      case "autoReverse":
      case "externalResourcesRequired":
      case "focusable":
      case "preserveAlpha":
        o != null && typeof o != "function" && typeof o != "symbol" ? e.setAttribute(a, "" + o) : e.removeAttribute(a);
        break;
      case "inert":
      case "allowFullScreen":
      case "async":
      case "autoPlay":
      case "controls":
      case "default":
      case "defer":
      case "disabled":
      case "disablePictureInPicture":
      case "disableRemotePlayback":
      case "formNoValidate":
      case "hidden":
      case "loop":
      case "noModule":
      case "noValidate":
      case "open":
      case "playsInline":
      case "readOnly":
      case "required":
      case "reversed":
      case "scoped":
      case "seamless":
      case "itemScope":
        o && typeof o != "function" && typeof o != "symbol" ? e.setAttribute(a, "") : e.removeAttribute(a);
        break;
      case "capture":
      case "download":
        o === !0 ? e.setAttribute(a, "") : o !== !1 && o != null && typeof o != "function" && typeof o != "symbol" ? e.setAttribute(a, o) : e.removeAttribute(a);
        break;
      case "cols":
      case "rows":
      case "size":
      case "span":
        o != null && typeof o != "function" && typeof o != "symbol" && !isNaN(o) && 1 <= o ? e.setAttribute(a, o) : e.removeAttribute(a);
        break;
      case "rowSpan":
      case "start":
        o == null || typeof o == "function" || typeof o == "symbol" || isNaN(o) ? e.removeAttribute(a) : e.setAttribute(a, o);
        break;
      case "popover":
        ft("beforetoggle", e), ft("toggle", e), st(e, "popover", o);
        break;
      case "xlinkActuate":
        mr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:actuate",
          o
        );
        break;
      case "xlinkArcrole":
        mr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:arcrole",
          o
        );
        break;
      case "xlinkRole":
        mr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:role",
          o
        );
        break;
      case "xlinkShow":
        mr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:show",
          o
        );
        break;
      case "xlinkTitle":
        mr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:title",
          o
        );
        break;
      case "xlinkType":
        mr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:type",
          o
        );
        break;
      case "xmlBase":
        mr(
          e,
          "http://www.w3.org/XML/1998/namespace",
          "xml:base",
          o
        );
        break;
      case "xmlLang":
        mr(
          e,
          "http://www.w3.org/XML/1998/namespace",
          "xml:lang",
          o
        );
        break;
      case "xmlSpace":
        mr(
          e,
          "http://www.w3.org/XML/1998/namespace",
          "xml:space",
          o
        );
        break;
      case "is":
        st(e, "is", o);
        break;
      case "innerText":
      case "textContent":
        break;
      default:
        (!(2 < a.length) || a[0] !== "o" && a[0] !== "O" || a[1] !== "n" && a[1] !== "N") && (a = Jc.get(a) || a, st(e, a, o));
    }
  }
  function _d(e, t, a, o, d, p) {
    switch (a) {
      case "style":
        Ao(e, o, p);
        break;
      case "dangerouslySetInnerHTML":
        if (o != null) {
          if (typeof o != "object" || !("__html" in o))
            throw Error(l(61));
          if (a = o.__html, a != null) {
            if (d.children != null) throw Error(l(60));
            e.innerHTML = a;
          }
        }
        break;
      case "children":
        typeof o == "string" ? si(e, o) : (typeof o == "number" || typeof o == "bigint") && si(e, "" + o);
        break;
      case "onScroll":
        o != null && ft("scroll", e);
        break;
      case "onScrollEnd":
        o != null && ft("scrollend", e);
        break;
      case "onClick":
        o != null && (e.onclick = Fn);
        break;
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "innerHTML":
      case "ref":
        break;
      case "innerText":
      case "textContent":
        break;
      default:
        if (!Aa.hasOwnProperty(a))
          e: {
            if (a[0] === "o" && a[1] === "n" && (d = a.endsWith("Capture"), t = a.slice(2, d ? a.length - 7 : void 0), p = e[Xt] || null, p = p != null ? p[a] : null, typeof p == "function" && e.removeEventListener(t, p, d), typeof o == "function")) {
              typeof p != "function" && p !== null && (a in e ? e[a] = null : e.hasAttribute(a) && e.removeAttribute(a)), e.addEventListener(t, o, d);
              break e;
            }
            a in e ? e[a] = o : o === !0 ? e.setAttribute(a, "") : st(e, a, o);
          }
    }
  }
  function En(e, t, a) {
    switch (t) {
      case "div":
      case "span":
      case "svg":
      case "path":
      case "a":
      case "g":
      case "p":
      case "li":
        break;
      case "img":
        ft("error", e), ft("load", e);
        var o = !1, d = !1, p;
        for (p in a)
          if (a.hasOwnProperty(p)) {
            var k = a[p];
            if (k != null)
              switch (p) {
                case "src":
                  o = !0;
                  break;
                case "srcSet":
                  d = !0;
                  break;
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(l(137, t));
                default:
                  At(e, t, p, k, a, null);
              }
          }
        d && At(e, t, "srcSet", a.srcSet, a, null), o && At(e, t, "src", a.src, a, null);
        return;
      case "input":
        ft("invalid", e);
        var T = p = k = d = null, R = null, ae = null;
        for (o in a)
          if (a.hasOwnProperty(o)) {
            var pe = a[o];
            if (pe != null)
              switch (o) {
                case "name":
                  d = pe;
                  break;
                case "type":
                  k = pe;
                  break;
                case "checked":
                  R = pe;
                  break;
                case "defaultChecked":
                  ae = pe;
                  break;
                case "value":
                  p = pe;
                  break;
                case "defaultValue":
                  T = pe;
                  break;
                case "children":
                case "dangerouslySetInnerHTML":
                  if (pe != null)
                    throw Error(l(137, t));
                  break;
                default:
                  At(e, t, o, pe, a, null);
              }
          }
        yl(
          e,
          p,
          T,
          R,
          ae,
          k,
          d,
          !1
        );
        return;
      case "select":
        ft("invalid", e), o = k = p = null;
        for (d in a)
          if (a.hasOwnProperty(d) && (T = a[d], T != null))
            switch (d) {
              case "value":
                p = T;
                break;
              case "defaultValue":
                k = T;
                break;
              case "multiple":
                o = T;
              default:
                At(e, t, d, T, a, null);
            }
        t = p, a = k, e.multiple = !!o, t != null ? Nr(e, !!o, t, !1) : a != null && Nr(e, !!o, a, !0);
        return;
      case "textarea":
        ft("invalid", e), p = d = o = null;
        for (k in a)
          if (a.hasOwnProperty(k) && (T = a[k], T != null))
            switch (k) {
              case "value":
                o = T;
                break;
              case "defaultValue":
                d = T;
                break;
              case "children":
                p = T;
                break;
              case "dangerouslySetInnerHTML":
                if (T != null) throw Error(l(91));
                break;
              default:
                At(e, t, k, T, a, null);
            }
        Ra(e, o, d, p);
        return;
      case "option":
        for (R in a)
          if (a.hasOwnProperty(R) && (o = a[R], o != null))
            switch (R) {
              case "selected":
                e.selected = o && typeof o != "function" && typeof o != "symbol";
                break;
              default:
                At(e, t, R, o, a, null);
            }
        return;
      case "dialog":
        ft("beforetoggle", e), ft("toggle", e), ft("cancel", e), ft("close", e);
        break;
      case "iframe":
      case "object":
        ft("load", e);
        break;
      case "video":
      case "audio":
        for (o = 0; o < gs.length; o++)
          ft(gs[o], e);
        break;
      case "image":
        ft("error", e), ft("load", e);
        break;
      case "details":
        ft("toggle", e);
        break;
      case "embed":
      case "source":
      case "link":
        ft("error", e), ft("load", e);
      case "area":
      case "base":
      case "br":
      case "col":
      case "hr":
      case "keygen":
      case "meta":
      case "param":
      case "track":
      case "wbr":
      case "menuitem":
        for (ae in a)
          if (a.hasOwnProperty(ae) && (o = a[ae], o != null))
            switch (ae) {
              case "children":
              case "dangerouslySetInnerHTML":
                throw Error(l(137, t));
              default:
                At(e, t, ae, o, a, null);
            }
        return;
      default:
        if (zo(t)) {
          for (pe in a)
            a.hasOwnProperty(pe) && (o = a[pe], o !== void 0 && _d(
              e,
              t,
              pe,
              o,
              a,
              void 0
            ));
          return;
        }
    }
    for (T in a)
      a.hasOwnProperty(T) && (o = a[T], o != null && At(e, t, T, o, a, null));
  }
  function Ub(e, t, a, o) {
    switch (t) {
      case "div":
      case "span":
      case "svg":
      case "path":
      case "a":
      case "g":
      case "p":
      case "li":
        break;
      case "input":
        var d = null, p = null, k = null, T = null, R = null, ae = null, pe = null;
        for (ce in a) {
          var xe = a[ce];
          if (a.hasOwnProperty(ce) && xe != null)
            switch (ce) {
              case "checked":
                break;
              case "value":
                break;
              case "defaultValue":
                R = xe;
              default:
                o.hasOwnProperty(ce) || At(e, t, ce, null, o, xe);
            }
        }
        for (var oe in o) {
          var ce = o[oe];
          if (xe = a[oe], o.hasOwnProperty(oe) && (ce != null || xe != null))
            switch (oe) {
              case "type":
                p = ce;
                break;
              case "name":
                d = ce;
                break;
              case "checked":
                ae = ce;
                break;
              case "defaultChecked":
                pe = ce;
                break;
              case "value":
                k = ce;
                break;
              case "defaultValue":
                T = ce;
                break;
              case "children":
              case "dangerouslySetInnerHTML":
                if (ce != null)
                  throw Error(l(137, t));
                break;
              default:
                ce !== xe && At(
                  e,
                  t,
                  oe,
                  ce,
                  o,
                  xe
                );
            }
        }
        Pr(
          e,
          k,
          T,
          R,
          ae,
          pe,
          p,
          d
        );
        return;
      case "select":
        ce = k = T = oe = null;
        for (p in a)
          if (R = a[p], a.hasOwnProperty(p) && R != null)
            switch (p) {
              case "value":
                break;
              case "multiple":
                ce = R;
              default:
                o.hasOwnProperty(p) || At(
                  e,
                  t,
                  p,
                  null,
                  o,
                  R
                );
            }
        for (d in o)
          if (p = o[d], R = a[d], o.hasOwnProperty(d) && (p != null || R != null))
            switch (d) {
              case "value":
                oe = p;
                break;
              case "defaultValue":
                T = p;
                break;
              case "multiple":
                k = p;
              default:
                p !== R && At(
                  e,
                  t,
                  d,
                  p,
                  o,
                  R
                );
            }
        t = T, a = k, o = ce, oe != null ? Nr(e, !!a, oe, !1) : !!o != !!a && (t != null ? Nr(e, !!a, t, !0) : Nr(e, !!a, a ? [] : "", !1));
        return;
      case "textarea":
        ce = oe = null;
        for (T in a)
          if (d = a[T], a.hasOwnProperty(T) && d != null && !o.hasOwnProperty(T))
            switch (T) {
              case "value":
                break;
              case "children":
                break;
              default:
                At(e, t, T, null, o, d);
            }
        for (k in o)
          if (d = o[k], p = a[k], o.hasOwnProperty(k) && (d != null || p != null))
            switch (k) {
              case "value":
                oe = d;
                break;
              case "defaultValue":
                ce = d;
                break;
              case "children":
                break;
              case "dangerouslySetInnerHTML":
                if (d != null) throw Error(l(91));
                break;
              default:
                d !== p && At(e, t, k, d, o, p);
            }
        No(e, oe, ce);
        return;
      case "option":
        for (var Fe in a)
          if (oe = a[Fe], a.hasOwnProperty(Fe) && oe != null && !o.hasOwnProperty(Fe))
            switch (Fe) {
              case "selected":
                e.selected = !1;
                break;
              default:
                At(
                  e,
                  t,
                  Fe,
                  null,
                  o,
                  oe
                );
            }
        for (R in o)
          if (oe = o[R], ce = a[R], o.hasOwnProperty(R) && oe !== ce && (oe != null || ce != null))
            switch (R) {
              case "selected":
                e.selected = oe && typeof oe != "function" && typeof oe != "symbol";
                break;
              default:
                At(
                  e,
                  t,
                  R,
                  oe,
                  o,
                  ce
                );
            }
        return;
      case "img":
      case "link":
      case "area":
      case "base":
      case "br":
      case "col":
      case "embed":
      case "hr":
      case "keygen":
      case "meta":
      case "param":
      case "source":
      case "track":
      case "wbr":
      case "menuitem":
        for (var We in a)
          oe = a[We], a.hasOwnProperty(We) && oe != null && !o.hasOwnProperty(We) && At(e, t, We, null, o, oe);
        for (ae in o)
          if (oe = o[ae], ce = a[ae], o.hasOwnProperty(ae) && oe !== ce && (oe != null || ce != null))
            switch (ae) {
              case "children":
              case "dangerouslySetInnerHTML":
                if (oe != null)
                  throw Error(l(137, t));
                break;
              default:
                At(
                  e,
                  t,
                  ae,
                  oe,
                  o,
                  ce
                );
            }
        return;
      default:
        if (zo(t)) {
          for (var zt in a)
            oe = a[zt], a.hasOwnProperty(zt) && oe !== void 0 && !o.hasOwnProperty(zt) && _d(
              e,
              t,
              zt,
              void 0,
              o,
              oe
            );
          for (pe in o)
            oe = o[pe], ce = a[pe], !o.hasOwnProperty(pe) || oe === ce || oe === void 0 && ce === void 0 || _d(
              e,
              t,
              pe,
              oe,
              o,
              ce
            );
          return;
        }
    }
    for (var Z in a)
      oe = a[Z], a.hasOwnProperty(Z) && oe != null && !o.hasOwnProperty(Z) && At(e, t, Z, null, o, oe);
    for (xe in o)
      oe = o[xe], ce = a[xe], !o.hasOwnProperty(xe) || oe === ce || oe == null && ce == null || At(e, t, xe, oe, o, ce);
  }
  function Zg(e) {
    switch (e) {
      case "css":
      case "script":
      case "font":
      case "img":
      case "image":
      case "input":
      case "link":
        return !0;
      default:
        return !1;
    }
  }
  function Ib() {
    if (typeof performance.getEntriesByType == "function") {
      for (var e = 0, t = 0, a = performance.getEntriesByType("resource"), o = 0; o < a.length; o++) {
        var d = a[o], p = d.transferSize, k = d.initiatorType, T = d.duration;
        if (p && T && Zg(k)) {
          for (k = 0, T = d.responseEnd, o += 1; o < a.length; o++) {
            var R = a[o], ae = R.startTime;
            if (ae > T) break;
            var pe = R.transferSize, xe = R.initiatorType;
            pe && Zg(xe) && (R = R.responseEnd, k += pe * (R < T ? 1 : (T - ae) / (R - ae)));
          }
          if (--o, t += 8 * (p + k) / (d.duration / 1e3), e++, 10 < e) break;
        }
      }
      if (0 < e) return t / e / 1e6;
    }
    return navigator.connection && (e = navigator.connection.downlink, typeof e == "number") ? e : 5;
  }
  var jd = null, Td = null;
  function Qu(e) {
    return e.nodeType === 9 ? e : e.ownerDocument;
  }
  function Wg(e) {
    switch (e) {
      case "http://www.w3.org/2000/svg":
        return 1;
      case "http://www.w3.org/1998/Math/MathML":
        return 2;
      default:
        return 0;
    }
  }
  function Jg(e, t) {
    if (e === 0)
      switch (t) {
        case "svg":
          return 1;
        case "math":
          return 2;
        default:
          return 0;
      }
    return e === 1 && t === "foreignObject" ? 0 : e;
  }
  function Nd(e, t) {
    return e === "textarea" || e === "noscript" || typeof t.children == "string" || typeof t.children == "number" || typeof t.children == "bigint" || typeof t.dangerouslySetInnerHTML == "object" && t.dangerouslySetInnerHTML !== null && t.dangerouslySetInnerHTML.__html != null;
  }
  var Ad = null;
  function qb() {
    var e = window.event;
    return e && e.type === "popstate" ? e === Ad ? !1 : (Ad = e, !0) : (Ad = null, !1);
  }
  var e0 = typeof setTimeout == "function" ? setTimeout : void 0, Hb = typeof clearTimeout == "function" ? clearTimeout : void 0, t0 = typeof Promise == "function" ? Promise : void 0, Pb = typeof queueMicrotask == "function" ? queueMicrotask : typeof t0 < "u" ? function(e) {
    return t0.resolve(null).then(e).catch(Fb);
  } : e0;
  function Fb(e) {
    setTimeout(function() {
      throw e;
    });
  }
  function ma(e) {
    return e === "head";
  }
  function n0(e, t) {
    var a = t, o = 0;
    do {
      var d = a.nextSibling;
      if (e.removeChild(a), d && d.nodeType === 8)
        if (a = d.data, a === "/$" || a === "/&") {
          if (o === 0) {
            e.removeChild(d), io(t);
            return;
          }
          o--;
        } else if (a === "$" || a === "$?" || a === "$~" || a === "$!" || a === "&")
          o++;
        else if (a === "html")
          bs(e.ownerDocument.documentElement);
        else if (a === "head") {
          a = e.ownerDocument.head, bs(a);
          for (var p = a.firstChild; p; ) {
            var k = p.nextSibling, T = p.nodeName;
            p[er] || T === "SCRIPT" || T === "STYLE" || T === "LINK" && p.rel.toLowerCase() === "stylesheet" || a.removeChild(p), p = k;
          }
        } else
          a === "body" && bs(e.ownerDocument.body);
      a = d;
    } while (a);
    io(t);
  }
  function r0(e, t) {
    var a = e;
    e = 0;
    do {
      var o = a.nextSibling;
      if (a.nodeType === 1 ? t ? (a._stashedDisplay = a.style.display, a.style.display = "none") : (a.style.display = a._stashedDisplay || "", a.getAttribute("style") === "" && a.removeAttribute("style")) : a.nodeType === 3 && (t ? (a._stashedText = a.nodeValue, a.nodeValue = "") : a.nodeValue = a._stashedText || ""), o && o.nodeType === 8)
        if (a = o.data, a === "/$") {
          if (e === 0) break;
          e--;
        } else
          a !== "$" && a !== "$?" && a !== "$~" && a !== "$!" || e++;
      a = o;
    } while (a);
  }
  function zd(e) {
    var t = e.firstChild;
    for (t && t.nodeType === 10 && (t = t.nextSibling); t; ) {
      var a = t;
      switch (t = t.nextSibling, a.nodeName) {
        case "HTML":
        case "HEAD":
        case "BODY":
          zd(a), pl(a);
          continue;
        case "SCRIPT":
        case "STYLE":
          continue;
        case "LINK":
          if (a.rel.toLowerCase() === "stylesheet") continue;
      }
      e.removeChild(a);
    }
  }
  function Vb(e, t, a, o) {
    for (; e.nodeType === 1; ) {
      var d = a;
      if (e.nodeName.toLowerCase() !== t.toLowerCase()) {
        if (!o && (e.nodeName !== "INPUT" || e.type !== "hidden"))
          break;
      } else if (o) {
        if (!e[er])
          switch (t) {
            case "meta":
              if (!e.hasAttribute("itemprop")) break;
              return e;
            case "link":
              if (p = e.getAttribute("rel"), p === "stylesheet" && e.hasAttribute("data-precedence"))
                break;
              if (p !== d.rel || e.getAttribute("href") !== (d.href == null || d.href === "" ? null : d.href) || e.getAttribute("crossorigin") !== (d.crossOrigin == null ? null : d.crossOrigin) || e.getAttribute("title") !== (d.title == null ? null : d.title))
                break;
              return e;
            case "style":
              if (e.hasAttribute("data-precedence")) break;
              return e;
            case "script":
              if (p = e.getAttribute("src"), (p !== (d.src == null ? null : d.src) || e.getAttribute("type") !== (d.type == null ? null : d.type) || e.getAttribute("crossorigin") !== (d.crossOrigin == null ? null : d.crossOrigin)) && p && e.hasAttribute("async") && !e.hasAttribute("itemprop"))
                break;
              return e;
            default:
              return e;
          }
      } else if (t === "input" && e.type === "hidden") {
        var p = d.name == null ? null : "" + d.name;
        if (d.type === "hidden" && e.getAttribute("name") === p)
          return e;
      } else return e;
      if (e = kr(e.nextSibling), e === null) break;
    }
    return null;
  }
  function Kb(e, t, a) {
    if (t === "") return null;
    for (; e.nodeType !== 3; )
      if ((e.nodeType !== 1 || e.nodeName !== "INPUT" || e.type !== "hidden") && !a || (e = kr(e.nextSibling), e === null)) return null;
    return e;
  }
  function i0(e, t) {
    for (; e.nodeType !== 8; )
      if ((e.nodeType !== 1 || e.nodeName !== "INPUT" || e.type !== "hidden") && !t || (e = kr(e.nextSibling), e === null)) return null;
    return e;
  }
  function Md(e) {
    return e.data === "$?" || e.data === "$~";
  }
  function Od(e) {
    return e.data === "$!" || e.data === "$?" && e.ownerDocument.readyState !== "loading";
  }
  function Gb(e, t) {
    var a = e.ownerDocument;
    if (e.data === "$~") e._reactRetry = t;
    else if (e.data !== "$?" || a.readyState !== "loading")
      t();
    else {
      var o = function() {
        t(), a.removeEventListener("DOMContentLoaded", o);
      };
      a.addEventListener("DOMContentLoaded", o), e._reactRetry = o;
    }
  }
  function kr(e) {
    for (; e != null; e = e.nextSibling) {
      var t = e.nodeType;
      if (t === 1 || t === 3) break;
      if (t === 8) {
        if (t = e.data, t === "$" || t === "$!" || t === "$?" || t === "$~" || t === "&" || t === "F!" || t === "F")
          break;
        if (t === "/$" || t === "/&") return null;
      }
    }
    return e;
  }
  var Dd = null;
  function a0(e) {
    e = e.nextSibling;
    for (var t = 0; e; ) {
      if (e.nodeType === 8) {
        var a = e.data;
        if (a === "/$" || a === "/&") {
          if (t === 0)
            return kr(e.nextSibling);
          t--;
        } else
          a !== "$" && a !== "$!" && a !== "$?" && a !== "$~" && a !== "&" || t++;
      }
      e = e.nextSibling;
    }
    return null;
  }
  function l0(e) {
    e = e.previousSibling;
    for (var t = 0; e; ) {
      if (e.nodeType === 8) {
        var a = e.data;
        if (a === "$" || a === "$!" || a === "$?" || a === "$~" || a === "&") {
          if (t === 0) return e;
          t--;
        } else a !== "/$" && a !== "/&" || t++;
      }
      e = e.previousSibling;
    }
    return null;
  }
  function o0(e, t, a) {
    switch (t = Qu(a), e) {
      case "html":
        if (e = t.documentElement, !e) throw Error(l(452));
        return e;
      case "head":
        if (e = t.head, !e) throw Error(l(453));
        return e;
      case "body":
        if (e = t.body, !e) throw Error(l(454));
        return e;
      default:
        throw Error(l(451));
    }
  }
  function bs(e) {
    for (var t = e.attributes; t.length; )
      e.removeAttributeNode(t[0]);
    pl(e);
  }
  var Cr = /* @__PURE__ */ new Map(), s0 = /* @__PURE__ */ new Set();
  function Zu(e) {
    return typeof e.getRootNode == "function" ? e.getRootNode() : e.nodeType === 9 ? e : e.ownerDocument;
  }
  var zi = ve.d;
  ve.d = {
    f: $b,
    r: Yb,
    D: Xb,
    C: Qb,
    L: Zb,
    m: Wb,
    X: ex,
    S: Jb,
    M: tx
  };
  function $b() {
    var e = zi.f(), t = Pu();
    return e || t;
  }
  function Yb(e) {
    var t = Tt(e);
    t !== null && t.tag === 5 && t.type === "form" ? Ep(t) : zi.r(e);
  }
  var to = typeof document > "u" ? null : document;
  function u0(e, t, a) {
    var o = to;
    if (o && typeof t == "string" && t) {
      var d = mn(t);
      d = 'link[rel="' + e + '"][href="' + d + '"]', typeof a == "string" && (d += '[crossorigin="' + a + '"]'), s0.has(d) || (s0.add(d), e = { rel: e, crossOrigin: a, href: t }, o.querySelector(d) === null && (t = o.createElement("link"), En(t, "link", e), Qt(t), o.head.appendChild(t)));
    }
  }
  function Xb(e) {
    zi.D(e), u0("dns-prefetch", e, null);
  }
  function Qb(e, t) {
    zi.C(e, t), u0("preconnect", e, t);
  }
  function Zb(e, t, a) {
    zi.L(e, t, a);
    var o = to;
    if (o && e && t) {
      var d = 'link[rel="preload"][as="' + mn(t) + '"]';
      t === "image" && a && a.imageSrcSet ? (d += '[imagesrcset="' + mn(
        a.imageSrcSet
      ) + '"]', typeof a.imageSizes == "string" && (d += '[imagesizes="' + mn(
        a.imageSizes
      ) + '"]')) : d += '[href="' + mn(e) + '"]';
      var p = d;
      switch (t) {
        case "style":
          p = no(e);
          break;
        case "script":
          p = ro(e);
      }
      Cr.has(p) || (e = x(
        {
          rel: "preload",
          href: t === "image" && a && a.imageSrcSet ? void 0 : e,
          as: t
        },
        a
      ), Cr.set(p, e), o.querySelector(d) !== null || t === "style" && o.querySelector(xs(p)) || t === "script" && o.querySelector(vs(p)) || (t = o.createElement("link"), En(t, "link", e), Qt(t), o.head.appendChild(t)));
    }
  }
  function Wb(e, t) {
    zi.m(e, t);
    var a = to;
    if (a && e) {
      var o = t && typeof t.as == "string" ? t.as : "script", d = 'link[rel="modulepreload"][as="' + mn(o) + '"][href="' + mn(e) + '"]', p = d;
      switch (o) {
        case "audioworklet":
        case "paintworklet":
        case "serviceworker":
        case "sharedworker":
        case "worker":
        case "script":
          p = ro(e);
      }
      if (!Cr.has(p) && (e = x({ rel: "modulepreload", href: e }, t), Cr.set(p, e), a.querySelector(d) === null)) {
        switch (o) {
          case "audioworklet":
          case "paintworklet":
          case "serviceworker":
          case "sharedworker":
          case "worker":
          case "script":
            if (a.querySelector(vs(p)))
              return;
        }
        o = a.createElement("link"), En(o, "link", e), Qt(o), a.head.appendChild(o);
      }
    }
  }
  function Jb(e, t, a) {
    zi.S(e, t, a);
    var o = to;
    if (o && e) {
      var d = Tn(o).hoistableStyles, p = no(e);
      t = t || "default";
      var k = d.get(p);
      if (!k) {
        var T = { loading: 0, preload: null };
        if (k = o.querySelector(
          xs(p)
        ))
          T.loading = 5;
        else {
          e = x(
            { rel: "stylesheet", href: e, "data-precedence": t },
            a
          ), (a = Cr.get(p)) && Rd(e, a);
          var R = k = o.createElement("link");
          Qt(R), En(R, "link", e), R._p = new Promise(function(ae, pe) {
            R.onload = ae, R.onerror = pe;
          }), R.addEventListener("load", function() {
            T.loading |= 1;
          }), R.addEventListener("error", function() {
            T.loading |= 2;
          }), T.loading |= 4, Wu(k, t, o);
        }
        k = {
          type: "stylesheet",
          instance: k,
          count: 1,
          state: T
        }, d.set(p, k);
      }
    }
  }
  function ex(e, t) {
    zi.X(e, t);
    var a = to;
    if (a && e) {
      var o = Tn(a).hoistableScripts, d = ro(e), p = o.get(d);
      p || (p = a.querySelector(vs(d)), p || (e = x({ src: e, async: !0 }, t), (t = Cr.get(d)) && Ld(e, t), p = a.createElement("script"), Qt(p), En(p, "link", e), a.head.appendChild(p)), p = {
        type: "script",
        instance: p,
        count: 1,
        state: null
      }, o.set(d, p));
    }
  }
  function tx(e, t) {
    zi.M(e, t);
    var a = to;
    if (a && e) {
      var o = Tn(a).hoistableScripts, d = ro(e), p = o.get(d);
      p || (p = a.querySelector(vs(d)), p || (e = x({ src: e, async: !0, type: "module" }, t), (t = Cr.get(d)) && Ld(e, t), p = a.createElement("script"), Qt(p), En(p, "link", e), a.head.appendChild(p)), p = {
        type: "script",
        instance: p,
        count: 1,
        state: null
      }, o.set(d, p));
    }
  }
  function c0(e, t, a, o) {
    var d = (d = Se.current) ? Zu(d) : null;
    if (!d) throw Error(l(446));
    switch (e) {
      case "meta":
      case "title":
        return null;
      case "style":
        return typeof a.precedence == "string" && typeof a.href == "string" ? (t = no(a.href), a = Tn(
          d
        ).hoistableStyles, o = a.get(t), o || (o = {
          type: "style",
          instance: null,
          count: 0,
          state: null
        }, a.set(t, o)), o) : { type: "void", instance: null, count: 0, state: null };
      case "link":
        if (a.rel === "stylesheet" && typeof a.href == "string" && typeof a.precedence == "string") {
          e = no(a.href);
          var p = Tn(
            d
          ).hoistableStyles, k = p.get(e);
          if (k || (d = d.ownerDocument || d, k = {
            type: "stylesheet",
            instance: null,
            count: 0,
            state: { loading: 0, preload: null }
          }, p.set(e, k), (p = d.querySelector(
            xs(e)
          )) && !p._p && (k.instance = p, k.state.loading = 5), Cr.has(e) || (a = {
            rel: "preload",
            as: "style",
            href: a.href,
            crossOrigin: a.crossOrigin,
            integrity: a.integrity,
            media: a.media,
            hrefLang: a.hrefLang,
            referrerPolicy: a.referrerPolicy
          }, Cr.set(e, a), p || nx(
            d,
            e,
            a,
            k.state
          ))), t && o === null)
            throw Error(l(528, ""));
          return k;
        }
        if (t && o !== null)
          throw Error(l(529, ""));
        return null;
      case "script":
        return t = a.async, a = a.src, typeof a == "string" && t && typeof t != "function" && typeof t != "symbol" ? (t = ro(a), a = Tn(
          d
        ).hoistableScripts, o = a.get(t), o || (o = {
          type: "script",
          instance: null,
          count: 0,
          state: null
        }, a.set(t, o)), o) : { type: "void", instance: null, count: 0, state: null };
      default:
        throw Error(l(444, e));
    }
  }
  function no(e) {
    return 'href="' + mn(e) + '"';
  }
  function xs(e) {
    return 'link[rel="stylesheet"][' + e + "]";
  }
  function f0(e) {
    return x({}, e, {
      "data-precedence": e.precedence,
      precedence: null
    });
  }
  function nx(e, t, a, o) {
    e.querySelector('link[rel="preload"][as="style"][' + t + "]") ? o.loading = 1 : (t = e.createElement("link"), o.preload = t, t.addEventListener("load", function() {
      return o.loading |= 1;
    }), t.addEventListener("error", function() {
      return o.loading |= 2;
    }), En(t, "link", a), Qt(t), e.head.appendChild(t));
  }
  function ro(e) {
    return '[src="' + mn(e) + '"]';
  }
  function vs(e) {
    return "script[async]" + e;
  }
  function d0(e, t, a) {
    if (t.count++, t.instance === null)
      switch (t.type) {
        case "style":
          var o = e.querySelector(
            'style[data-href~="' + mn(a.href) + '"]'
          );
          if (o)
            return t.instance = o, Qt(o), o;
          var d = x({}, a, {
            "data-href": a.href,
            "data-precedence": a.precedence,
            href: null,
            precedence: null
          });
          return o = (e.ownerDocument || e).createElement(
            "style"
          ), Qt(o), En(o, "style", d), Wu(o, a.precedence, e), t.instance = o;
        case "stylesheet":
          d = no(a.href);
          var p = e.querySelector(
            xs(d)
          );
          if (p)
            return t.state.loading |= 4, t.instance = p, Qt(p), p;
          o = f0(a), (d = Cr.get(d)) && Rd(o, d), p = (e.ownerDocument || e).createElement("link"), Qt(p);
          var k = p;
          return k._p = new Promise(function(T, R) {
            k.onload = T, k.onerror = R;
          }), En(p, "link", o), t.state.loading |= 4, Wu(p, a.precedence, e), t.instance = p;
        case "script":
          return p = ro(a.src), (d = e.querySelector(
            vs(p)
          )) ? (t.instance = d, Qt(d), d) : (o = a, (d = Cr.get(p)) && (o = x({}, a), Ld(o, d)), e = e.ownerDocument || e, d = e.createElement("script"), Qt(d), En(d, "link", o), e.head.appendChild(d), t.instance = d);
        case "void":
          return null;
        default:
          throw Error(l(443, t.type));
      }
    else
      t.type === "stylesheet" && (t.state.loading & 4) === 0 && (o = t.instance, t.state.loading |= 4, Wu(o, a.precedence, e));
    return t.instance;
  }
  function Wu(e, t, a) {
    for (var o = a.querySelectorAll(
      'link[rel="stylesheet"][data-precedence],style[data-precedence]'
    ), d = o.length ? o[o.length - 1] : null, p = d, k = 0; k < o.length; k++) {
      var T = o[k];
      if (T.dataset.precedence === t) p = T;
      else if (p !== d) break;
    }
    p ? p.parentNode.insertBefore(e, p.nextSibling) : (t = a.nodeType === 9 ? a.head : a, t.insertBefore(e, t.firstChild));
  }
  function Rd(e, t) {
    e.crossOrigin == null && (e.crossOrigin = t.crossOrigin), e.referrerPolicy == null && (e.referrerPolicy = t.referrerPolicy), e.title == null && (e.title = t.title);
  }
  function Ld(e, t) {
    e.crossOrigin == null && (e.crossOrigin = t.crossOrigin), e.referrerPolicy == null && (e.referrerPolicy = t.referrerPolicy), e.integrity == null && (e.integrity = t.integrity);
  }
  var Ju = null;
  function h0(e, t, a) {
    if (Ju === null) {
      var o = /* @__PURE__ */ new Map(), d = Ju = /* @__PURE__ */ new Map();
      d.set(a, o);
    } else
      d = Ju, o = d.get(a), o || (o = /* @__PURE__ */ new Map(), d.set(a, o));
    if (o.has(e)) return o;
    for (o.set(e, null), a = a.getElementsByTagName(e), d = 0; d < a.length; d++) {
      var p = a[d];
      if (!(p[er] || p[Rt] || e === "link" && p.getAttribute("rel") === "stylesheet") && p.namespaceURI !== "http://www.w3.org/2000/svg") {
        var k = p.getAttribute(t) || "";
        k = e + k;
        var T = o.get(k);
        T ? T.push(p) : o.set(k, [p]);
      }
    }
    return o;
  }
  function m0(e, t, a) {
    e = e.ownerDocument || e, e.head.insertBefore(
      a,
      t === "title" ? e.querySelector("head > title") : null
    );
  }
  function rx(e, t, a) {
    if (a === 1 || t.itemProp != null) return !1;
    switch (e) {
      case "meta":
      case "title":
        return !0;
      case "style":
        if (typeof t.precedence != "string" || typeof t.href != "string" || t.href === "")
          break;
        return !0;
      case "link":
        if (typeof t.rel != "string" || typeof t.href != "string" || t.href === "" || t.onLoad || t.onError)
          break;
        switch (t.rel) {
          case "stylesheet":
            return e = t.disabled, typeof t.precedence == "string" && e == null;
          default:
            return !0;
        }
      case "script":
        if (t.async && typeof t.async != "function" && typeof t.async != "symbol" && !t.onLoad && !t.onError && t.src && typeof t.src == "string")
          return !0;
    }
    return !1;
  }
  function p0(e) {
    return !(e.type === "stylesheet" && (e.state.loading & 3) === 0);
  }
  function ix(e, t, a, o) {
    if (a.type === "stylesheet" && (typeof o.media != "string" || matchMedia(o.media).matches !== !1) && (a.state.loading & 4) === 0) {
      if (a.instance === null) {
        var d = no(o.href), p = t.querySelector(
          xs(d)
        );
        if (p) {
          t = p._p, t !== null && typeof t == "object" && typeof t.then == "function" && (e.count++, e = ec.bind(e), t.then(e, e)), a.state.loading |= 4, a.instance = p, Qt(p);
          return;
        }
        p = t.ownerDocument || t, o = f0(o), (d = Cr.get(d)) && Rd(o, d), p = p.createElement("link"), Qt(p);
        var k = p;
        k._p = new Promise(function(T, R) {
          k.onload = T, k.onerror = R;
        }), En(p, "link", o), a.instance = p;
      }
      e.stylesheets === null && (e.stylesheets = /* @__PURE__ */ new Map()), e.stylesheets.set(a, t), (t = a.state.preload) && (a.state.loading & 3) === 0 && (e.count++, a = ec.bind(e), t.addEventListener("load", a), t.addEventListener("error", a));
    }
  }
  var Bd = 0;
  function ax(e, t) {
    return e.stylesheets && e.count === 0 && nc(e, e.stylesheets), 0 < e.count || 0 < e.imgCount ? function(a) {
      var o = setTimeout(function() {
        if (e.stylesheets && nc(e, e.stylesheets), e.unsuspend) {
          var p = e.unsuspend;
          e.unsuspend = null, p();
        }
      }, 6e4 + t);
      0 < e.imgBytes && Bd === 0 && (Bd = 62500 * Ib());
      var d = setTimeout(
        function() {
          if (e.waitingForImages = !1, e.count === 0 && (e.stylesheets && nc(e, e.stylesheets), e.unsuspend)) {
            var p = e.unsuspend;
            e.unsuspend = null, p();
          }
        },
        (e.imgBytes > Bd ? 50 : 800) + t
      );
      return e.unsuspend = a, function() {
        e.unsuspend = null, clearTimeout(o), clearTimeout(d);
      };
    } : null;
  }
  function ec() {
    if (this.count--, this.count === 0 && (this.imgCount === 0 || !this.waitingForImages)) {
      if (this.stylesheets) nc(this, this.stylesheets);
      else if (this.unsuspend) {
        var e = this.unsuspend;
        this.unsuspend = null, e();
      }
    }
  }
  var tc = null;
  function nc(e, t) {
    e.stylesheets = null, e.unsuspend !== null && (e.count++, tc = /* @__PURE__ */ new Map(), t.forEach(lx, e), tc = null, ec.call(e));
  }
  function lx(e, t) {
    if (!(t.state.loading & 4)) {
      var a = tc.get(e);
      if (a) var o = a.get(null);
      else {
        a = /* @__PURE__ */ new Map(), tc.set(e, a);
        for (var d = e.querySelectorAll(
          "link[data-precedence],style[data-precedence]"
        ), p = 0; p < d.length; p++) {
          var k = d[p];
          (k.nodeName === "LINK" || k.getAttribute("media") !== "not all") && (a.set(k.dataset.precedence, k), o = k);
        }
        o && a.set(null, o);
      }
      d = t.instance, k = d.getAttribute("data-precedence"), p = a.get(k) || o, p === o && a.set(null, d), a.set(k, d), this.count++, o = ec.bind(this), d.addEventListener("load", o), d.addEventListener("error", o), p ? p.parentNode.insertBefore(d, p.nextSibling) : (e = e.nodeType === 9 ? e.head : e, e.insertBefore(d, e.firstChild)), t.state.loading |= 4;
    }
  }
  var Ss = {
    $$typeof: ie,
    Provider: null,
    Consumer: null,
    _currentValue: Ie,
    _currentValue2: Ie,
    _threadCount: 0
  };
  function ox(e, t, a, o, d, p, k, T, R) {
    this.tag = 1, this.containerInfo = e, this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.callbackNode = this.next = this.pendingContext = this.context = this.cancelPendingCommit = null, this.callbackPriority = 0, this.expirationTimes = Br(-1), this.entangledLanes = this.shellSuspendCounter = this.errorRecoveryDisabledLanes = this.expiredLanes = this.warmLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = Br(0), this.hiddenUpdates = Br(null), this.identifierPrefix = o, this.onUncaughtError = d, this.onCaughtError = p, this.onRecoverableError = k, this.pooledCache = null, this.pooledCacheLanes = 0, this.formState = R, this.incompleteTransitions = /* @__PURE__ */ new Map();
  }
  function g0(e, t, a, o, d, p, k, T, R, ae, pe, xe) {
    return e = new ox(
      e,
      t,
      a,
      k,
      R,
      ae,
      pe,
      xe,
      T
    ), t = 1, p === !0 && (t |= 24), p = rr(3, null, null, t), e.current = p, p.stateNode = e, t = gf(), t.refCount++, e.pooledCache = t, t.refCount++, p.memoizedState = {
      element: o,
      isDehydrated: a,
      cache: t
    }, vf(p), e;
  }
  function y0(e) {
    return e ? (e = Vn, e) : Vn;
  }
  function b0(e, t, a, o, d, p) {
    d = y0(d), o.context === null ? o.context = d : o.pendingContext = d, o = ra(t), o.payload = { element: a }, p = p === void 0 ? null : p, p !== null && (o.callback = p), a = ia(e, o, t), a !== null && (Xn(a, e, t), Jo(a, e, t));
  }
  function x0(e, t) {
    if (e = e.memoizedState, e !== null && e.dehydrated !== null) {
      var a = e.retryLane;
      e.retryLane = a !== 0 && a < t ? a : t;
    }
  }
  function Ud(e, t) {
    x0(e, t), (e = e.alternate) && x0(e, t);
  }
  function v0(e) {
    if (e.tag === 13 || e.tag === 31) {
      var t = Pt(e, 67108864);
      t !== null && Xn(t, e, 67108864), Ud(e, 67108864);
    }
  }
  function S0(e) {
    if (e.tag === 13 || e.tag === 31) {
      var t = sr();
      t = Eo(t);
      var a = Pt(e, t);
      a !== null && Xn(a, e, t), Ud(e, t);
    }
  }
  var rc = !0;
  function sx(e, t, a, o) {
    var d = ee.T;
    ee.T = null;
    var p = ve.p;
    try {
      ve.p = 2, Id(e, t, a, o);
    } finally {
      ve.p = p, ee.T = d;
    }
  }
  function ux(e, t, a, o) {
    var d = ee.T;
    ee.T = null;
    var p = ve.p;
    try {
      ve.p = 8, Id(e, t, a, o);
    } finally {
      ve.p = p, ee.T = d;
    }
  }
  function Id(e, t, a, o) {
    if (rc) {
      var d = qd(o);
      if (d === null)
        Ed(
          e,
          t,
          o,
          ic,
          a
        ), k0(e, o);
      else if (fx(
        d,
        e,
        t,
        a,
        o
      ))
        o.stopPropagation();
      else if (k0(e, o), t & 4 && -1 < cx.indexOf(e)) {
        for (; d !== null; ) {
          var p = Tt(d);
          if (p !== null)
            switch (p.tag) {
              case 3:
                if (p = p.stateNode, p.current.memoizedState.isDehydrated) {
                  var k = jr(p.pendingLanes);
                  if (k !== 0) {
                    var T = p;
                    for (T.pendingLanes |= 2, T.entangledLanes |= 2; k; ) {
                      var R = 1 << 31 - Oe(k);
                      T.entanglements[1] |= R, k &= ~R;
                    }
                    Xr(p), (Et & 6) === 0 && (qu = dn() + 500, ps(0));
                  }
                }
                break;
              case 31:
              case 13:
                T = Pt(p, 2), T !== null && Xn(T, p, 2), Pu(), Ud(p, 2);
            }
          if (p = qd(o), p === null && Ed(
            e,
            t,
            o,
            ic,
            a
          ), p === d) break;
          d = p;
        }
        d !== null && o.stopPropagation();
      } else
        Ed(
          e,
          t,
          o,
          null,
          a
        );
    }
  }
  function qd(e) {
    return e = bl(e), Hd(e);
  }
  var ic = null;
  function Hd(e) {
    if (ic = null, e = qr(e), e !== null) {
      var t = c(e);
      if (t === null) e = null;
      else {
        var a = t.tag;
        if (a === 13) {
          if (e = f(t), e !== null) return e;
          e = null;
        } else if (a === 31) {
          if (e = g(t), e !== null) return e;
          e = null;
        } else if (a === 3) {
          if (t.stateNode.current.memoizedState.isDehydrated)
            return t.tag === 3 ? t.stateNode.containerInfo : null;
          e = null;
        } else t !== e && (e = null);
      }
    }
    return ic = e, null;
  }
  function w0(e) {
    switch (e) {
      case "beforetoggle":
      case "cancel":
      case "click":
      case "close":
      case "contextmenu":
      case "copy":
      case "cut":
      case "auxclick":
      case "dblclick":
      case "dragend":
      case "dragstart":
      case "drop":
      case "focusin":
      case "focusout":
      case "input":
      case "invalid":
      case "keydown":
      case "keypress":
      case "keyup":
      case "mousedown":
      case "mouseup":
      case "paste":
      case "pause":
      case "play":
      case "pointercancel":
      case "pointerdown":
      case "pointerup":
      case "ratechange":
      case "reset":
      case "resize":
      case "seeked":
      case "submit":
      case "toggle":
      case "touchcancel":
      case "touchend":
      case "touchstart":
      case "volumechange":
      case "change":
      case "selectionchange":
      case "textInput":
      case "compositionstart":
      case "compositionend":
      case "compositionupdate":
      case "beforeblur":
      case "afterblur":
      case "beforeinput":
      case "blur":
      case "fullscreenchange":
      case "focus":
      case "hashchange":
      case "popstate":
      case "select":
      case "selectstart":
        return 2;
      case "drag":
      case "dragenter":
      case "dragexit":
      case "dragleave":
      case "dragover":
      case "mousemove":
      case "mouseout":
      case "mouseover":
      case "pointermove":
      case "pointerout":
      case "pointerover":
      case "scroll":
      case "touchmove":
      case "wheel":
      case "mouseenter":
      case "mouseleave":
      case "pointerenter":
      case "pointerleave":
        return 8;
      case "message":
        switch (ii()) {
          case de:
            return 2;
          case Te:
            return 8;
          case Qe:
          case rt:
            return 32;
          case xt:
            return 268435456;
          default:
            return 32;
        }
      default:
        return 32;
    }
  }
  var Pd = !1, pa = null, ga = null, ya = null, ws = /* @__PURE__ */ new Map(), ks = /* @__PURE__ */ new Map(), ba = [], cx = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(
    " "
  );
  function k0(e, t) {
    switch (e) {
      case "focusin":
      case "focusout":
        pa = null;
        break;
      case "dragenter":
      case "dragleave":
        ga = null;
        break;
      case "mouseover":
      case "mouseout":
        ya = null;
        break;
      case "pointerover":
      case "pointerout":
        ws.delete(t.pointerId);
        break;
      case "gotpointercapture":
      case "lostpointercapture":
        ks.delete(t.pointerId);
    }
  }
  function Cs(e, t, a, o, d, p) {
    return e === null || e.nativeEvent !== p ? (e = {
      blockedOn: t,
      domEventName: a,
      eventSystemFlags: o,
      nativeEvent: p,
      targetContainers: [d]
    }, t !== null && (t = Tt(t), t !== null && v0(t)), e) : (e.eventSystemFlags |= o, t = e.targetContainers, d !== null && t.indexOf(d) === -1 && t.push(d), e);
  }
  function fx(e, t, a, o, d) {
    switch (t) {
      case "focusin":
        return pa = Cs(
          pa,
          e,
          t,
          a,
          o,
          d
        ), !0;
      case "dragenter":
        return ga = Cs(
          ga,
          e,
          t,
          a,
          o,
          d
        ), !0;
      case "mouseover":
        return ya = Cs(
          ya,
          e,
          t,
          a,
          o,
          d
        ), !0;
      case "pointerover":
        var p = d.pointerId;
        return ws.set(
          p,
          Cs(
            ws.get(p) || null,
            e,
            t,
            a,
            o,
            d
          )
        ), !0;
      case "gotpointercapture":
        return p = d.pointerId, ks.set(
          p,
          Cs(
            ks.get(p) || null,
            e,
            t,
            a,
            o,
            d
          )
        ), !0;
    }
    return !1;
  }
  function C0(e) {
    var t = qr(e.target);
    if (t !== null) {
      var a = c(t);
      if (a !== null) {
        if (t = a.tag, t === 13) {
          if (t = f(a), t !== null) {
            e.blockedOn = t, Na(e.priority, function() {
              S0(a);
            });
            return;
          }
        } else if (t === 31) {
          if (t = g(a), t !== null) {
            e.blockedOn = t, Na(e.priority, function() {
              S0(a);
            });
            return;
          }
        } else if (t === 3 && a.stateNode.current.memoizedState.isDehydrated) {
          e.blockedOn = a.tag === 3 ? a.stateNode.containerInfo : null;
          return;
        }
      }
    }
    e.blockedOn = null;
  }
  function ac(e) {
    if (e.blockedOn !== null) return !1;
    for (var t = e.targetContainers; 0 < t.length; ) {
      var a = qd(e.nativeEvent);
      if (a === null) {
        a = e.nativeEvent;
        var o = new a.constructor(
          a.type,
          a
        );
        pr = o, a.target.dispatchEvent(o), pr = null;
      } else
        return t = Tt(a), t !== null && v0(t), e.blockedOn = a, !1;
      t.shift();
    }
    return !0;
  }
  function E0(e, t, a) {
    ac(e) && a.delete(t);
  }
  function dx() {
    Pd = !1, pa !== null && ac(pa) && (pa = null), ga !== null && ac(ga) && (ga = null), ya !== null && ac(ya) && (ya = null), ws.forEach(E0), ks.forEach(E0);
  }
  function lc(e, t) {
    e.blockedOn === t && (e.blockedOn = null, Pd || (Pd = !0, n.unstable_scheduleCallback(
      n.unstable_NormalPriority,
      dx
    )));
  }
  var oc = null;
  function _0(e) {
    oc !== e && (oc = e, n.unstable_scheduleCallback(
      n.unstable_NormalPriority,
      function() {
        oc === e && (oc = null);
        for (var t = 0; t < e.length; t += 3) {
          var a = e[t], o = e[t + 1], d = e[t + 2];
          if (typeof o != "function") {
            if (Hd(o || a) === null)
              continue;
            break;
          }
          var p = Tt(a);
          p !== null && (e.splice(t, 3), t -= 3, qf(
            p,
            {
              pending: !0,
              data: d,
              method: a.method,
              action: o
            },
            o,
            d
          ));
        }
      }
    ));
  }
  function io(e) {
    function t(R) {
      return lc(R, e);
    }
    pa !== null && lc(pa, e), ga !== null && lc(ga, e), ya !== null && lc(ya, e), ws.forEach(t), ks.forEach(t);
    for (var a = 0; a < ba.length; a++) {
      var o = ba[a];
      o.blockedOn === e && (o.blockedOn = null);
    }
    for (; 0 < ba.length && (a = ba[0], a.blockedOn === null); )
      C0(a), a.blockedOn === null && ba.shift();
    if (a = (e.ownerDocument || e).$$reactFormReplay, a != null)
      for (o = 0; o < a.length; o += 3) {
        var d = a[o], p = a[o + 1], k = d[Xt] || null;
        if (typeof p == "function")
          k || _0(a);
        else if (k) {
          var T = null;
          if (p && p.hasAttribute("formAction")) {
            if (d = p, k = p[Xt] || null)
              T = k.formAction;
            else if (Hd(d) !== null) continue;
          } else T = k.action;
          typeof T == "function" ? a[o + 1] = T : (a.splice(o, 3), o -= 3), _0(a);
        }
      }
  }
  function j0() {
    function e(p) {
      p.canIntercept && p.info === "react-transition" && p.intercept({
        handler: function() {
          return new Promise(function(k) {
            return d = k;
          });
        },
        focusReset: "manual",
        scroll: "manual"
      });
    }
    function t() {
      d !== null && (d(), d = null), o || setTimeout(a, 20);
    }
    function a() {
      if (!o && !navigation.transition) {
        var p = navigation.currentEntry;
        p && p.url != null && navigation.navigate(p.url, {
          state: p.getState(),
          info: "react-transition",
          history: "replace"
        });
      }
    }
    if (typeof navigation == "object") {
      var o = !1, d = null;
      return navigation.addEventListener("navigate", e), navigation.addEventListener("navigatesuccess", t), navigation.addEventListener("navigateerror", t), setTimeout(a, 100), function() {
        o = !0, navigation.removeEventListener("navigate", e), navigation.removeEventListener("navigatesuccess", t), navigation.removeEventListener("navigateerror", t), d !== null && (d(), d = null);
      };
    }
  }
  function Fd(e) {
    this._internalRoot = e;
  }
  sc.prototype.render = Fd.prototype.render = function(e) {
    var t = this._internalRoot;
    if (t === null) throw Error(l(409));
    var a = t.current, o = sr();
    b0(a, o, e, t, null, null);
  }, sc.prototype.unmount = Fd.prototype.unmount = function() {
    var e = this._internalRoot;
    if (e !== null) {
      this._internalRoot = null;
      var t = e.containerInfo;
      b0(e.current, 2, null, e, null, null), Pu(), t[Rn] = null;
    }
  };
  function sc(e) {
    this._internalRoot = e;
  }
  sc.prototype.unstable_scheduleHydration = function(e) {
    if (e) {
      var t = Ta();
      e = { blockedOn: null, target: e, priority: t };
      for (var a = 0; a < ba.length && t !== 0 && t < ba[a].priority; a++) ;
      ba.splice(a, 0, e), a === 0 && C0(e);
    }
  };
  var T0 = r.version;
  if (T0 !== "19.2.3")
    throw Error(
      l(
        527,
        T0,
        "19.2.3"
      )
    );
  ve.findDOMNode = function(e) {
    var t = e._reactInternals;
    if (t === void 0)
      throw typeof e.render == "function" ? Error(l(188)) : (e = Object.keys(e).join(","), Error(l(268, e)));
    return e = b(t), e = e !== null ? S(e) : null, e = e === null ? null : e.stateNode, e;
  };
  var hx = {
    bundleType: 0,
    version: "19.2.3",
    rendererPackageName: "react-dom",
    currentDispatcherRef: ee,
    reconcilerVersion: "19.2.3"
  };
  if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") {
    var uc = __REACT_DEVTOOLS_GLOBAL_HOOK__;
    if (!uc.isDisabled && uc.supportsFiber)
      try {
        Jt = uc.inject(
          hx
        ), Vt = uc;
      } catch {
      }
  }
  return _s.createRoot = function(e, t) {
    if (!s(e)) throw Error(l(299));
    var a = !1, o = "", d = Rp, p = Lp, k = Bp;
    return t != null && (t.unstable_strictMode === !0 && (a = !0), t.identifierPrefix !== void 0 && (o = t.identifierPrefix), t.onUncaughtError !== void 0 && (d = t.onUncaughtError), t.onCaughtError !== void 0 && (p = t.onCaughtError), t.onRecoverableError !== void 0 && (k = t.onRecoverableError)), t = g0(
      e,
      1,
      !1,
      null,
      null,
      a,
      o,
      null,
      d,
      p,
      k,
      j0
    ), e[Rn] = t.current, Cd(e), new Fd(t);
  }, _s.hydrateRoot = function(e, t, a) {
    if (!s(e)) throw Error(l(299));
    var o = !1, d = "", p = Rp, k = Lp, T = Bp, R = null;
    return a != null && (a.unstable_strictMode === !0 && (o = !0), a.identifierPrefix !== void 0 && (d = a.identifierPrefix), a.onUncaughtError !== void 0 && (p = a.onUncaughtError), a.onCaughtError !== void 0 && (k = a.onCaughtError), a.onRecoverableError !== void 0 && (T = a.onRecoverableError), a.formState !== void 0 && (R = a.formState)), t = g0(
      e,
      1,
      !0,
      t,
      a ?? null,
      o,
      d,
      R,
      p,
      k,
      T,
      j0
    ), t.context = y0(null), a = t.current, o = sr(), o = Eo(o), d = ra(o), d.callback = null, ia(a, d, o), a = o, t.current.lanes = a, hr(t, a), Xr(t), e[Rn] = t.current, Cd(e), new sc(t);
  }, _s.version = "19.2.3", _s;
}
var U0;
function Ex() {
  if (U0) return Gd.exports;
  U0 = 1;
  function n() {
    if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function"))
      try {
        __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n);
      } catch (r) {
        console.error(r);
      }
  }
  return n(), Gd.exports = Cx(), Gd.exports;
}
var _x = Ex();
const dy = /* @__PURE__ */ ul(_x), jx = () => {
  if (document.getElementById("engram-font-preload")) return;
  [
    "https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&display=swap",
    "https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500&display=swap"
  ].forEach((r, i) => {
    const l = document.createElement("link");
    l.rel = "preload", l.as = "style", l.href = r, i === 0 && (l.id = "engram-font-preload"), document.head.appendChild(l);
    const s = document.createElement("link");
    s.rel = "stylesheet", s.href = r, document.head.appendChild(s);
  });
}, Tx = () => (se.useEffect(() => {
  jx();
}, []), /* @__PURE__ */ h.jsx("style", { children: `
    :root {
      --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
      --font-mono: 'JetBrains Mono', monospace;
    }

    body {
      font-family: var(--font-sans);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    .font-mono {
      font-family: var(--font-mono);
    }
    
    /* Custom Scrollbar for dark theme - Minimalist */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(63, 63, 70, 0.4); /* zinc-700 with opacity */
      border-radius: 3px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(82, 82, 91, 0.6); /* zinc-600 with opacity */
    }

    /* Animation Utilities */
    .animate-float {
      animation: float 6s ease-in-out infinite;
    }
    .animate-in {
      animation: fadeIn 0.3s ease-out forwards;
    }
    .fade-in {
      opacity: 0;
      animation: fadeIn 0.3s ease-out forwards;
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Utility to hide scrollbar but keep functionality */
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  ` }));
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Nx = (n) => n.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase(), Ax = (n) => n.replace(
  /^([A-Z])|[\s-_]+(\w)/g,
  (r, i, l) => l ? l.toUpperCase() : i.toLowerCase()
), I0 = (n) => {
  const r = Ax(n);
  return r.charAt(0).toUpperCase() + r.slice(1);
}, hy = (...n) => n.filter((r, i, l) => !!r && r.trim() !== "" && l.indexOf(r) === i).join(" ").trim(), zx = (n) => {
  for (const r in n)
    if (r.startsWith("aria-") || r === "role" || r === "title")
      return !0;
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Mx = {
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  strokeWidth: 2,
  strokeLinecap: "round",
  strokeLinejoin: "round"
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ox = se.forwardRef(
  ({
    color: n = "currentColor",
    size: r = 24,
    strokeWidth: i = 2,
    absoluteStrokeWidth: l,
    className: s = "",
    children: c,
    iconNode: f,
    ...g
  }, y) => se.createElement(
    "svg",
    {
      ref: y,
      ...Mx,
      width: r,
      height: r,
      stroke: n,
      strokeWidth: l ? Number(i) * 24 / Number(r) : i,
      className: hy("lucide", s),
      ...!c && !zx(g) && { "aria-hidden": "true" },
      ...g
    },
    [
      ...f.map(([b, S]) => se.createElement(b, S)),
      ...Array.isArray(c) ? c : [c]
    ]
  )
);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ge = (n, r) => {
  const i = se.forwardRef(
    ({ className: l, ...s }, c) => se.createElement(Ox, {
      ref: c,
      iconNode: r,
      className: hy(
        `lucide-${Nx(I0(n))}`,
        `lucide-${n}`,
        l
      ),
      ...s
    })
  );
  return i.displayName = I0(n), i;
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Dx = [
  ["path", { d: "M12 17V3", key: "1cwfxf" }],
  ["path", { d: "m6 11 6 6 6-6", key: "12ii2o" }],
  ["path", { d: "M19 21H5", key: "150jfl" }]
], Rx = Ge("arrow-down-to-line", Dx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Lx = [
  ["path", { d: "M10.268 21a2 2 0 0 0 3.464 0", key: "vwvbt9" }],
  [
    "path",
    {
      d: "M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",
      key: "11g9vi"
    }
  ]
], Bx = Ge("bell", Lx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ux = [
  ["path", { d: "M12 7v14", key: "1akyts" }],
  [
    "path",
    {
      d: "M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",
      key: "ruj8y"
    }
  ]
], Ix = Ge("book-open", Ux);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const qx = [
  [
    "path",
    {
      d: "M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",
      key: "k3hazp"
    }
  ]
], Hx = Ge("book", qx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Px = [
  ["path", { d: "M12 8V4H8", key: "hb8ula" }],
  ["rect", { width: "16", height: "12", x: "4", y: "8", rx: "2", key: "enze0r" }],
  ["path", { d: "M2 14h2", key: "vft8re" }],
  ["path", { d: "M20 14h2", key: "4cs60a" }],
  ["path", { d: "M15 13v2", key: "1xurst" }],
  ["path", { d: "M9 13v2", key: "rq6x2g" }]
], my = Ge("bot", Px);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Fx = [
  [
    "path",
    {
      d: "M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",
      key: "lc1i9w"
    }
  ],
  ["path", { d: "m7 16.5-4.74-2.85", key: "1o9zyk" }],
  ["path", { d: "m7 16.5 5-3", key: "va8pkn" }],
  ["path", { d: "M7 16.5v5.17", key: "jnp8gn" }],
  [
    "path",
    {
      d: "M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",
      key: "8zsnat"
    }
  ],
  ["path", { d: "m17 16.5-5-3", key: "8arw3v" }],
  ["path", { d: "m17 16.5 4.74-2.85", key: "8rfmw" }],
  ["path", { d: "M17 16.5v5.17", key: "k6z78m" }],
  [
    "path",
    {
      d: "M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",
      key: "1xygjf"
    }
  ],
  ["path", { d: "M12 8 7.26 5.15", key: "1vbdud" }],
  ["path", { d: "m12 8 4.74-2.85", key: "3rx089" }],
  ["path", { d: "M12 13.5V8", key: "1io7kd" }]
], Vx = Ge("boxes", Fx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Kx = [
  ["path", { d: "M12 18V5", key: "adv99a" }],
  ["path", { d: "M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4", key: "1e3is1" }],
  ["path", { d: "M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5", key: "1gqd8o" }],
  ["path", { d: "M17.997 5.125a4 4 0 0 1 2.526 5.77", key: "iwvgf7" }],
  ["path", { d: "M18 18a4 4 0 0 0 2-7.464", key: "efp6ie" }],
  ["path", { d: "M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517", key: "1gq6am" }],
  ["path", { d: "M6 18a4 4 0 0 1-2-7.464", key: "k1g0md" }],
  ["path", { d: "M6.003 5.125a4 4 0 0 0-2.526 5.77", key: "q97ue3" }]
], Yh = Ge("brain", Kx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Gx = [
  ["rect", { width: "16", height: "20", x: "4", y: "2", rx: "2", key: "1nb95v" }],
  ["line", { x1: "8", x2: "16", y1: "6", y2: "6", key: "x4nwl0" }],
  ["line", { x1: "16", x2: "16", y1: "14", y2: "18", key: "wjye3r" }],
  ["path", { d: "M16 10h.01", key: "1m94wz" }],
  ["path", { d: "M12 10h.01", key: "1nrarc" }],
  ["path", { d: "M8 10h.01", key: "19clt8" }],
  ["path", { d: "M12 14h.01", key: "1etili" }],
  ["path", { d: "M8 14h.01", key: "6423bh" }],
  ["path", { d: "M12 18h.01", key: "mhygvu" }],
  ["path", { d: "M8 18h.01", key: "lrp35t" }]
], $x = Ge("calculator", Gx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Yx = [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]], py = Ge("check", Yx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Xx = [["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]], bo = Ge("chevron-down", Xx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Qx = [["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]], Xh = Ge("chevron-right", Qx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Zx = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }],
  ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]
], Uc = Ge("circle-alert", Zx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Wx = [
  ["path", { d: "M21.801 10A10 10 0 1 1 17 3.335", key: "yps3ct" }],
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]
], Qh = Ge("circle-check-big", Wx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Jx = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]
], ev = Ge("circle-check", Jx);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const tv = [
  ["path", { d: "M12 6v6l4 2", key: "mmk7yg" }],
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]
], nv = Ge("clock", tv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const rv = [
  ["path", { d: "M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z", key: "p7xjir" }]
], iv = Ge("cloud", rv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const av = [
  ["rect", { width: "14", height: "14", x: "8", y: "8", rx: "2", ry: "2", key: "17jyea" }],
  ["path", { d: "M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2", key: "zix9uf" }]
], gy = Ge("copy", av);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const lv = [
  ["path", { d: "M20 4v7a4 4 0 0 1-4 4H4", key: "6o5b7l" }],
  ["path", { d: "m9 10-5 5 5 5", key: "1kshq7" }]
], q0 = Ge("corner-down-left", lv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ov = [
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M17 20v2", key: "1rnc9c" }],
  ["path", { d: "M17 2v2", key: "11trls" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M2 17h2", key: "7oei6x" }],
  ["path", { d: "M2 7h2", key: "asdhe0" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "M20 17h2", key: "1fpfkl" }],
  ["path", { d: "M20 7h2", key: "1o8tra" }],
  ["path", { d: "M7 20v2", key: "4gnj0m" }],
  ["path", { d: "M7 2v2", key: "1i4yhu" }],
  ["rect", { x: "4", y: "4", width: "16", height: "16", rx: "2", key: "1vbyd7" }],
  ["rect", { x: "8", y: "8", width: "8", height: "8", rx: "1", key: "z9xiuo" }]
], Zh = Ge("cpu", ov);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const sv = [
  ["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }],
  ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }],
  ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]
], Ic = Ge("database", sv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const uv = [
  ["path", { d: "M12 15V3", key: "m9g1x1" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["path", { d: "m7 10 5 5 5-5", key: "brsn70" }]
], _c = Ge("download", uv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const cv = [
  ["path", { d: "M15 3h6v6", key: "1q9fwt" }],
  ["path", { d: "M10 14 21 3", key: "gplh6r" }],
  ["path", { d: "M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6", key: "a6xqqp" }]
], fv = Ge("external-link", cv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const dv = [
  [
    "path",
    {
      d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",
      key: "1nclc0"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
], hv = Ge("eye", dv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mv = [
  [
    "path",
    {
      d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",
      key: "1oefj6"
    }
  ],
  ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }],
  ["path", { d: "M10 9H8", key: "b1mrlr" }],
  ["path", { d: "M16 13H8", key: "t4e002" }],
  ["path", { d: "M16 17H8", key: "z1uh3a" }]
], Wh = Ge("file-text", mv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const pv = [
  [
    "path",
    {
      d: "M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",
      key: "tonef"
    }
  ],
  ["path", { d: "M9 18c-4.51 2-5-2-7-2", key: "9comsn" }]
], gv = Ge("github", pv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const yv = [
  ["line", { x1: "4", x2: "20", y1: "9", y2: "9", key: "4lhtct" }],
  ["line", { x1: "4", x2: "20", y1: "15", y2: "15", key: "vyu0kd" }],
  ["line", { x1: "10", x2: "8", y1: "3", y2: "21", key: "1ggp8o" }],
  ["line", { x1: "16", x2: "14", y1: "3", y2: "21", key: "weycgp" }]
], bv = Ge("hash", yv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const xv = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M12 16v-4", key: "1dtifu" }],
  ["path", { d: "M12 8h.01", key: "e9boi3" }]
], vv = Ge("info", xv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Sv = [
  ["path", { d: "m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4", key: "g0fldk" }],
  ["path", { d: "m21 2-9.6 9.6", key: "1j0ho8" }],
  ["circle", { cx: "7.5", cy: "15.5", r: "5.5", key: "yqb3hr" }]
], qc = Ge("key", Sv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const wv = [
  [
    "path",
    {
      d: "M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",
      key: "zw3jo"
    }
  ],
  [
    "path",
    {
      d: "M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",
      key: "1wduqc"
    }
  ],
  [
    "path",
    {
      d: "M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",
      key: "kqbvx6"
    }
  ]
], yy = Ge("layers", wv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const kv = [
  ["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }],
  ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }],
  ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }],
  ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]
], Cv = Ge("layout-dashboard", kv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ev = [
  ["path", { d: "M3 5h.01", key: "18ugdj" }],
  ["path", { d: "M3 12h.01", key: "nlz23k" }],
  ["path", { d: "M3 19h.01", key: "noohij" }],
  ["path", { d: "M8 5h13", key: "1pao27" }],
  ["path", { d: "M8 12h13", key: "1za7za" }],
  ["path", { d: "M8 19h13", key: "m83p4d" }]
], by = Ge("list", Ev);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const _v = [["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]], Gs = Ge("loader-circle", _v);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const jv = [
  ["path", { d: "M15 3h6v6", key: "1q9fwt" }],
  ["path", { d: "m21 3-7 7", key: "1l2asr" }],
  ["path", { d: "m3 21 7-7", key: "tjx5ai" }],
  ["path", { d: "M9 21H3v-6", key: "wtvkvv" }]
], Tv = Ge("maximize-2", jv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Nv = [
  ["path", { d: "M4 5h16", key: "1tepv9" }],
  ["path", { d: "M4 12h16", key: "1lakjw" }],
  ["path", { d: "M4 19h16", key: "1djgab" }]
], Av = Ge("menu", Nv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const zv = [
  [
    "path",
    {
      d: "M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",
      key: "kfwtm"
    }
  ]
], H0 = Ge("moon", zv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Mv = [
  ["rect", { x: "16", y: "16", width: "6", height: "6", rx: "1", key: "4q2zg0" }],
  ["rect", { x: "2", y: "16", width: "6", height: "6", rx: "1", key: "8cvhb9" }],
  ["rect", { x: "9", y: "2", width: "6", height: "6", rx: "1", key: "1egb70" }],
  ["path", { d: "M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3", key: "1jsf9p" }],
  ["path", { d: "M12 12V8", key: "2874zd" }]
], xy = Ge("network", Mv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ov = [
  [
    "path",
    {
      d: "M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",
      key: "e79jfc"
    }
  ],
  ["circle", { cx: "13.5", cy: "6.5", r: ".5", fill: "currentColor", key: "1okk4w" }],
  ["circle", { cx: "17.5", cy: "10.5", r: ".5", fill: "currentColor", key: "f64h9f" }],
  ["circle", { cx: "6.5", cy: "12.5", r: ".5", fill: "currentColor", key: "qy21gx" }],
  ["circle", { cx: "8.5", cy: "7.5", r: ".5", fill: "currentColor", key: "fotxhn" }]
], P0 = Ge("palette", Ov);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Dv = [
  ["rect", { x: "14", y: "3", width: "5", height: "18", rx: "1", key: "kaeet6" }],
  ["rect", { x: "5", y: "3", width: "5", height: "18", rx: "1", key: "1wsw3u" }]
], Rv = Ge("pause", Dv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Lv = [
  [
    "path",
    {
      d: "M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",
      key: "1a8usu"
    }
  ]
], Bv = Ge("pen", Lv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Uv = [
  [
    "path",
    {
      d: "M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",
      key: "10ikf1"
    }
  ]
], Jh = Ge("play", Uv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Iv = [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "M12 5v14", key: "s699le" }]
], em = Ge("plus", Iv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const qv = [
  ["path", { d: "M12 2v10", key: "mnfbl" }],
  ["path", { d: "M18.4 6.6a9 9 0 1 1-12.77.04", key: "obofu9" }]
], tm = Ge("power", qv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Hv = [
  ["path", { d: "M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8", key: "v9h5vc" }],
  ["path", { d: "M21 3v5h-5", key: "1q7to0" }],
  ["path", { d: "M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16", key: "3uifl3" }],
  ["path", { d: "M8 16H3v5", key: "1cv678" }]
], ei = Ge("refresh-cw", Hv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Pv = [
  ["path", { d: "M17 3v10", key: "15fgeh" }],
  ["path", { d: "m12.67 5.5 8.66 5", key: "1gpheq" }],
  ["path", { d: "m12.67 10.5 8.66-5", key: "1dkfa6" }],
  [
    "path",
    { d: "M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z", key: "swwfx4" }
  ]
], vy = Ge("regex", Pv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Fv = [
  ["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }],
  ["path", { d: "M3 3v5h5", key: "1xhq8a" }]
], Vv = Ge("rotate-ccw", Fv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Kv = [
  [
    "path",
    {
      d: "M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",
      key: "1c8476"
    }
  ],
  ["path", { d: "M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7", key: "1ydtos" }],
  ["path", { d: "M7 3v4a1 1 0 0 0 1 1h7", key: "t51u73" }]
], Gv = Ge("save", Kv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const $v = [
  ["circle", { cx: "6", cy: "6", r: "3", key: "1lh9wr" }],
  ["path", { d: "M8.12 8.12 12 12", key: "1alkpv" }],
  ["path", { d: "M20 4 8.12 15.88", key: "xgtan2" }],
  ["circle", { cx: "6", cy: "18", r: "3", key: "fqmcym" }],
  ["path", { d: "M14.8 14.8 20 20", key: "ptml3r" }]
], Yv = Ge("scissors", $v);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Xv = [
  ["path", { d: "M15 12h-5", key: "r7krc0" }],
  ["path", { d: "M15 8h-5", key: "1khuty" }],
  ["path", { d: "M19 17V5a2 2 0 0 0-2-2H4", key: "zz82l3" }],
  [
    "path",
    {
      d: "M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",
      key: "1ph1d7"
    }
  ]
], Qv = Ge("scroll-text", Xv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Zv = [
  ["path", { d: "m21 21-4.34-4.34", key: "14j7rj" }],
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }]
], po = Ge("search", Zv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Wv = [
  [
    "path",
    {
      d: "M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",
      key: "1ffxy3"
    }
  ],
  ["path", { d: "m21.854 2.147-10.94 10.939", key: "12cjpa" }]
], Jv = Ge("send", Wv);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const e4 = [
  ["rect", { width: "20", height: "8", x: "2", y: "2", rx: "2", ry: "2", key: "ngkwjq" }],
  ["rect", { width: "20", height: "8", x: "2", y: "14", rx: "2", ry: "2", key: "iecqi9" }],
  ["line", { x1: "6", x2: "6.01", y1: "6", y2: "6", key: "16zg32" }],
  ["line", { x1: "6", x2: "6.01", y1: "18", y2: "18", key: "nzw8ys" }]
], Sy = Ge("server", e4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const t4 = [
  [
    "path",
    {
      d: "M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",
      key: "1i5ecw"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
], nm = Ge("settings", t4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const n4 = [
  ["path", { d: "M14 17H5", key: "gfn3mx" }],
  ["path", { d: "M19 7h-9", key: "6i9tg" }],
  ["circle", { cx: "17", cy: "17", r: "3", key: "18b49y" }],
  ["circle", { cx: "7", cy: "7", r: "3", key: "dfmy0x" }]
], wy = Ge("settings-2", n4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const r4 = [
  ["circle", { cx: "12", cy: "12", r: "4", key: "4exip2" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "m4.93 4.93 1.41 1.41", key: "149t6j" }],
  ["path", { d: "m17.66 17.66 1.41 1.41", key: "ptbguv" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "m6.34 17.66-1.41 1.41", key: "1m8zz5" }],
  ["path", { d: "m19.07 4.93-1.41 1.41", key: "1shlcs" }]
], i4 = Ge("sun", r4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const a4 = [
  ["path", { d: "M12 19h8", key: "baeox8" }],
  ["path", { d: "m4 17 6-6-6-6", key: "1yngyt" }]
], vo = Ge("terminal", a4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const l4 = [
  ["path", { d: "M10 11v6", key: "nco0om" }],
  ["path", { d: "M14 11v6", key: "outv1u" }],
  ["path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6", key: "miytrc" }],
  ["path", { d: "M3 6h18", key: "d0wm0j" }],
  ["path", { d: "M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2", key: "e791ji" }]
], So = Ge("trash-2", l4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const o4 = [
  [
    "path",
    {
      d: "m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",
      key: "wmoenq"
    }
  ],
  ["path", { d: "M12 9v4", key: "juzpu7" }],
  ["path", { d: "M12 17h.01", key: "p32p05" }]
], s4 = Ge("triangle-alert", o4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const u4 = [
  ["path", { d: "M12 3v12", key: "1x0j5s" }],
  ["path", { d: "m17 8-5-5-5 5", key: "7q97r8" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }]
], c4 = Ge("upload", u4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const f4 = [
  ["path", { d: "M18 6 6 18", key: "1bl5f8" }],
  ["path", { d: "m6 6 12 12", key: "d8bk6v" }]
], Hc = Ge("x", f4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const d4 = [
  [
    "path",
    {
      d: "M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",
      key: "1xq2db"
    }
  ]
], rm = Ge("zap", d4), kh = [
  // 
  {
    id: "nav-memory",
    icon: by,
    label: "",
    description: "",
    action: (n) => n("/memory"),
    keywords: ["memory", "stream", "timeline", ""],
    type: "navigation"
  },
  {
    id: "nav-graph",
    icon: xy,
    label: "",
    description: "",
    action: (n) => n("/graph"),
    keywords: ["graph", "world", "map", ""],
    type: "navigation"
  },
  {
    id: "nav-brain",
    icon: Yh,
    label: "",
    description: "",
    action: (n) => n("/processing"),
    keywords: ["brain", "console", "summarize", ""],
    type: "navigation"
  },
  {
    id: "nav-api",
    icon: qc,
    label: "API ",
    description: " LLM ",
    action: (n) => n("/api"),
    keywords: ["api", "config", "llm", ""],
    type: "navigation"
  },
  {
    id: "nav-dev",
    icon: vo,
    label: "",
    description: "",
    action: (n) => n("/dev"),
    keywords: ["dev", "log", "debug", ""],
    type: "navigation"
  },
  {
    id: "nav-settings",
    icon: nm,
    label: "",
    description: " Engram ",
    action: (n) => n("/settings"),
    keywords: ["settings", "config", "option", ""],
    type: "navigation"
  }
];
function h4(n) {
  const r = n.toLowerCase().trim();
  return r ? kh.filter((i) => {
    var l;
    return i.label.toLowerCase().includes(r) || ((l = i.description) == null ? void 0 : l.toLowerCase().includes(r)) || i.keywords.some((s) => s.toLowerCase().includes(r));
  }) : kh;
}
const m4 = {}, F0 = (n) => {
  let r;
  const i = /* @__PURE__ */ new Set(), l = (S, x) => {
    const _ = typeof S == "function" ? S(r) : S;
    if (!Object.is(_, r)) {
      const E = r;
      r = x ?? (typeof _ != "object" || _ === null) ? _ : Object.assign({}, r, _), i.forEach((N) => N(r, E));
    }
  }, s = () => r, y = { setState: l, getState: s, getInitialState: () => b, subscribe: (S) => (i.add(S), () => i.delete(S)), destroy: () => {
    (m4 ? "production" : void 0) !== "production" && console.warn(
      "[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."
    ), i.clear();
  } }, b = r = n(l, s, y);
  return y;
}, p4 = (n) => n ? F0(n) : F0;
var Qd = { exports: {} }, Zd = {}, Wd = { exports: {} }, Jd = {};
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var V0;
function g4() {
  if (V0) return Jd;
  V0 = 1;
  var n = Ks();
  function r(x, _) {
    return x === _ && (x !== 0 || 1 / x === 1 / _) || x !== x && _ !== _;
  }
  var i = typeof Object.is == "function" ? Object.is : r, l = n.useState, s = n.useEffect, c = n.useLayoutEffect, f = n.useDebugValue;
  function g(x, _) {
    var E = _(), N = l({ inst: { value: E, getSnapshot: _ } }), U = N[0].inst, G = N[1];
    return c(
      function() {
        U.value = E, U.getSnapshot = _, y(U) && G({ inst: U });
      },
      [x, E, _]
    ), s(
      function() {
        return y(U) && G({ inst: U }), x(function() {
          y(U) && G({ inst: U });
        });
      },
      [x]
    ), f(E), E;
  }
  function y(x) {
    var _ = x.getSnapshot;
    x = x.value;
    try {
      var E = _();
      return !i(x, E);
    } catch {
      return !0;
    }
  }
  function b(x, _) {
    return _();
  }
  var S = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? b : g;
  return Jd.useSyncExternalStore = n.useSyncExternalStore !== void 0 ? n.useSyncExternalStore : S, Jd;
}
var K0;
function y4() {
  return K0 || (K0 = 1, Wd.exports = g4()), Wd.exports;
}
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var G0;
function b4() {
  if (G0) return Zd;
  G0 = 1;
  var n = Ks(), r = y4();
  function i(b, S) {
    return b === S && (b !== 0 || 1 / b === 1 / S) || b !== b && S !== S;
  }
  var l = typeof Object.is == "function" ? Object.is : i, s = r.useSyncExternalStore, c = n.useRef, f = n.useEffect, g = n.useMemo, y = n.useDebugValue;
  return Zd.useSyncExternalStoreWithSelector = function(b, S, x, _, E) {
    var N = c(null);
    if (N.current === null) {
      var U = { hasValue: !1, value: null };
      N.current = U;
    } else U = N.current;
    N = g(
      function() {
        function D(I) {
          if (!ne) {
            if (ne = !0, ie = I, I = _(I), E !== void 0 && U.hasValue) {
              var J = U.value;
              if (E(J, I))
                return _e = J;
            }
            return _e = I;
          }
          if (J = _e, l(ie, I)) return J;
          var De = _(I);
          return E !== void 0 && E(J, De) ? (ie = I, J) : (ie = I, _e = De);
        }
        var ne = !1, ie, _e, we = x === void 0 ? null : x;
        return [
          function() {
            return D(S());
          },
          we === null ? void 0 : function() {
            return D(we());
          }
        ];
      },
      [S, x, _, E]
    );
    var G = s(b, N[0], N[1]);
    return f(
      function() {
        U.hasValue = !0, U.value = G;
      },
      [G]
    ), y(G), G;
  }, Zd;
}
var $0;
function x4() {
  return $0 || ($0 = 1, Qd.exports = b4()), Qd.exports;
}
var v4 = x4();
const S4 = /* @__PURE__ */ ul(v4), ky = {}, { useDebugValue: w4 } = cy, { useSyncExternalStoreWithSelector: k4 } = S4;
let Y0 = !1;
const C4 = (n) => n;
function E4(n, r = C4, i) {
  (ky ? "production" : void 0) !== "production" && i && !Y0 && (console.warn(
    "[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"
  ), Y0 = !0);
  const l = k4(
    n.subscribe,
    n.getState,
    n.getServerState || n.getInitialState,
    r,
    i
  );
  return w4(l), l;
}
const X0 = (n) => {
  (ky ? "production" : void 0) !== "production" && typeof n != "function" && console.warn(
    "[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`."
  );
  const r = typeof n == "function" ? p4(n) : n, i = (l, s) => E4(r, l, s);
  return Object.assign(i, r), i;
}, Cy = (n) => n ? X0(n) : X0, _4 = {
  name: "Paper (Light)",
  colors: {
    background: "oklch(1.0000 0 0)",
    foreground: "oklch(0.1884 0.0128 248.5103)",
    card: "oklch(0.9784 0.0011 197.1387)",
    cardForeground: "oklch(0.1884 0.0128 248.5103)",
    popover: "oklch(1.0000 0 0)",
    popoverForeground: "oklch(0.1884 0.0128 248.5103)",
    primary: "oklch(0.6723 0.1606 244.9955)",
    primaryForeground: "oklch(1.0000 0 0)",
    secondary: "oklch(0.1884 0.0128 248.5103)",
    secondaryForeground: "oklch(1.0000 0 0)",
    muted: "oklch(0.9222 0.0013 286.3737)",
    mutedForeground: "oklch(0.1884 0.0128 248.5103)",
    accent: "oklch(0.9392 0.0166 250.8453)",
    accentForeground: "oklch(0.6723 0.1606 244.9955)",
    destructive: "oklch(0.6188 0.2376 25.7658)",
    destructiveForeground: "oklch(1.0000 0 0)",
    border: "oklch(0.1884 0.0128 248.5103 / 0.15)",
    // Darker (Foreground based) as requested
    input: "oklch(0.9809 0.0025 228.7836)",
    ring: "oklch(0.6818 0.1584 243.3540)",
    chart1: "oklch(0.6723 0.1606 244.9955)",
    chart2: "oklch(0.6907 0.1554 160.3454)",
    chart3: "oklch(0.8214 0.1600 82.5337)",
    chart4: "oklch(0.7064 0.1822 151.7125)",
    chart5: "oklch(0.5919 0.2186 10.5826)",
    sidebar: "oklch(0.9784 0.0011 197.1387)",
    sidebarForeground: "oklch(0.1884 0.0128 248.5103)",
    sidebarPrimary: "oklch(0.6723 0.1606 244.9955)",
    sidebarPrimaryForeground: "oklch(1.0000 0 0)",
    sidebarAccent: "oklch(0.9392 0.0166 250.8453)",
    sidebarAccentForeground: "oklch(0.6723 0.1606 244.9955)",
    sidebarBorder: "oklch(0.1884 0.0128 248.5103 / 0.1)",
    // Darker (Foreground based)
    sidebarRing: "oklch(0.6818 0.1584 243.3540)"
  },
  variables: {
    radius: "1.3rem"
  }
}, j4 = {
  name: "Claude (Dark)",
  colors: {
    background: "oklch(0.2679 0.0036 106.6427)",
    foreground: "oklch(0.8074 0.0142 93.0137)",
    card: "oklch(0.2679 0.0036 106.6427)",
    cardForeground: "oklch(0.8074 0.0142 93.0137)",
    popover: "oklch(0.2357 0.0024 67.7077)",
    popoverForeground: "oklch(0.8074 0.0142 93.0137)",
    primary: "oklch(0.6724 0.1308 38.7559)",
    primaryForeground: "oklch(1.0000 0 0)",
    secondary: "oklch(0.2213 0.0038 106.7070)",
    secondaryForeground: "oklch(0.8074 0.0142 93.0137)",
    muted: "oklch(0.2357 0.0024 67.7077)",
    mutedForeground: "oklch(0.7713 0.0169 99.0657)",
    accent: "oklch(0.6724 0.1308 38.7559)",
    accentForeground: "oklch(1.0000 0 0)",
    destructive: "oklch(0.6368 0.2078 25.3313)",
    destructiveForeground: "oklch(1.0000 0 0)",
    border: "oklch(0.8074 0.0142 93.0137 / 0.15)",
    // Foreground / 0.15
    input: "oklch(0.4336 0.0113 100.2195)",
    ring: "oklch(0.6724 0.1308 38.7559)",
    chart1: "oklch(0.6724 0.1308 38.7559)",
    chart2: "oklch(0.6898 0.1581 290.4107)",
    chart3: "oklch(0.8816 0.0276 93.1280)",
    chart4: "oklch(0.3074 0.0516 289.3230)",
    chart5: "oklch(0.6368 0.2078 25.3313)",
    sidebar: "oklch(0.2357 0.0024 67.7077)",
    sidebarForeground: "oklch(0.7713 0.0169 99.0657)",
    sidebarPrimary: "oklch(0.6724 0.1308 38.7559)",
    sidebarPrimaryForeground: "oklch(1.0000 0 0)",
    sidebarAccent: "oklch(0.2213 0.0038 106.7070)",
    sidebarAccentForeground: "oklch(0.8074 0.0142 93.0137)",
    sidebarBorder: "oklch(0.7713 0.0169 99.0657 / 0.15)",
    // SidebarForeground / 0.15
    sidebarRing: "oklch(0.6724 0.1308 38.7559)"
  },
  variables: {
    radius: "0.4rem"
  }
}, T4 = {
  name: "Twitter (Dark)",
  colors: {
    background: "oklch(0 0 0)",
    foreground: "oklch(0.9328 0.0025 228.7857)",
    card: "oklch(0 0 0)",
    // Matching background for seamless look, or slightly lighter
    cardForeground: "oklch(0.9328 0.0025 228.7857)",
    popover: "oklch(0 0 0)",
    popoverForeground: "oklch(0.9328 0.0025 228.7857)",
    primary: "oklch(0.6692 0.1607 245.0110)",
    primaryForeground: "oklch(1.0000 0 0)",
    secondary: "oklch(0.2097 0.0080 274.5332)",
    // Using card color from ref as secondary
    secondaryForeground: "oklch(0.8853 0 0)",
    muted: "oklch(0.2090 0 0)",
    mutedForeground: "oklch(0.5637 0.0078 247.9662)",
    accent: "oklch(0.1928 0.0331 242.5459)",
    accentForeground: "oklch(0.6692 0.1607 245.0110)",
    destructive: "oklch(0.6188 0.2376 25.7658)",
    destructiveForeground: "oklch(1.0000 0 0)",
    border: "oklch(0.9328 0.0025 228.7857 / 0.15)",
    // Foreground / 0.15
    input: "oklch(0.3020 0.0288 244.8244)",
    ring: "oklch(0.6818 0.1584 243.3540)",
    chart1: "oklch(0.6723 0.1606 244.9955)",
    chart2: "oklch(0.6907 0.1554 160.3454)",
    chart3: "oklch(0.8214 0.1600 82.5337)",
    chart4: "oklch(0.7064 0.1822 151.7125)",
    chart5: "oklch(0.5919 0.2186 10.5826)",
    sidebar: "oklch(0 0 0)",
    sidebarForeground: "oklch(0.9328 0.0025 228.7857)",
    sidebarPrimary: "oklch(0.6692 0.1607 245.0110)",
    sidebarPrimaryForeground: "oklch(1.0000 0 0)",
    sidebarAccent: "oklch(0.1928 0.0331 242.5459)",
    sidebarAccentForeground: "oklch(0.6692 0.1607 245.0110)",
    sidebarBorder: "oklch(0.9328 0.0025 228.7857 / 0.15)",
    // SidebarForeground / 0.15
    sidebarRing: "oklch(0.6818 0.1584 243.3540)"
  },
  variables: {
    radius: "1.3rem"
  }
}, N4 = {
  name: "Discord (Dark)",
  colors: {
    background: "#313338",
    foreground: "#f2f3f5",
    card: "#2b2d31",
    cardForeground: "#f2f3f5",
    popover: "#313338",
    popoverForeground: "#f2f3f5",
    primary: "#5865f2",
    primaryForeground: "#ffffff",
    secondary: "#2b2d31",
    secondaryForeground: "#f2f3f5",
    muted: "#1e1f22",
    mutedForeground: "#949ba4",
    accent: "#3f4147",
    accentForeground: "#f2f3f5",
    destructive: "#fa777c",
    destructiveForeground: "#313338",
    border: "#f2f3f526",
    // Foreground #f2f3f5 with ~15% alpha
    input: "#1e1f22",
    ring: "#5865f2",
    chart1: "#5865f2",
    chart2: "#23a559",
    chart3: "#f0b232",
    chart4: "#00a8fc",
    chart5: "#eb459e",
    sidebar: "#1e1f22",
    sidebarForeground: "#949ba4",
    sidebarPrimary: "#5865f2",
    sidebarPrimaryForeground: "#ffffff",
    sidebarAccent: "#3f4147",
    sidebarAccentForeground: "#f2f3f5",
    sidebarBorder: "#949ba426",
    // SidebarForeground #949ba4 with ~15% alpha
    sidebarRing: "#5865f2"
  },
  variables: {
    radius: "0.25rem"
  }
}, A4 = {
  name: "Catppuccin Mocha",
  colors: {
    background: "#1e1e2e",
    // foreground: '#cdd6f4', // Old Text
    foreground: "#cba6f7",
    // Modified: Mauve as requested
    card: "#313244",
    cardForeground: "#cba6f7",
    // Also match text
    popover: "#1e1e2e",
    popoverForeground: "#cba6f7",
    primary: "#89b4fa",
    primaryForeground: "#1e1e2e",
    secondary: "#45475a",
    secondaryForeground: "#cba6f7",
    muted: "#313244",
    mutedForeground: "#a6adc8",
    accent: "#45475a",
    accentForeground: "#cba6f7",
    destructive: "#f38ba8",
    destructiveForeground: "#1e1e2e",
    border: "#cba6f726",
    // Mauve with ~15% alpha
    input: "#313244",
    ring: "#89b4fa",
    chart1: "#89b4fa",
    chart2: "#a6e3a1",
    chart3: "#f9e2af",
    chart4: "#fab387",
    chart5: "#cba6f7",
    sidebar: "#181825",
    sidebarForeground: "#cba6f7",
    // Mauve
    sidebarPrimary: "#89b4fa",
    sidebarPrimaryForeground: "#1e1e2e",
    sidebarAccent: "#313244",
    sidebarAccentForeground: "#cba6f7",
    sidebarBorder: "#cba6f726",
    // Mauve with ~15% alpha
    sidebarRing: "#89b4fa"
  },
  variables: {
    radius: "0.5rem"
  }
}, z4 = {
  name: "SillyTavern ()",
  colors: {
    background: "var(--SmartThemeBlurTintColor)",
    foreground: "var(--SmartThemeBodyColor)",
    card: "var(--SmartThemeBlurTintColor)",
    cardForeground: "var(--SmartThemeBodyColor)",
    popover: "var(--SmartThemeBlurTintColor)",
    popoverForeground: "var(--SmartThemeBodyColor)",
    primary: "var(--SmartThemeQuoteColor)",
    primaryForeground: "var(--SmartThemeBodyColor)",
    secondary: "var(--SmartThemeBorderColor)",
    secondaryForeground: "var(--SmartThemeBodyColor)",
    muted: "rgba(0,0,0,0.2)",
    mutedForeground: "rgba(255,255,255,0.5)",
    accent: "var(--SmartThemeQuoteColor)",
    accentForeground: "var(--SmartThemeBodyColor)",
    destructive: "var(--SmartThemeBorderColor)",
    destructiveForeground: "var(--SmartThemeBodyColor)",
    border: "var(--SmartThemeBorderColor)",
    input: "var(--SmartThemeBorderColor)",
    ring: "var(--SmartThemeQuoteColor)",
    chart1: "var(--SmartThemeQuoteColor)",
    chart2: "var(--SmartThemeQuoteColor)",
    chart3: "var(--SmartThemeQuoteColor)",
    chart4: "var(--SmartThemeQuoteColor)",
    chart5: "var(--SmartThemeQuoteColor)",
    sidebar: "var(--SmartThemeBlurTintColor)",
    sidebarForeground: "var(--SmartThemeBodyColor)",
    sidebarPrimary: "var(--SmartThemeQuoteColor)",
    sidebarPrimaryForeground: "var(--SmartThemeBodyColor)",
    sidebarAccent: "var(--SmartThemeBorderColor)",
    sidebarAccentForeground: "var(--SmartThemeBodyColor)",
    sidebarBorder: "var(--SmartThemeBorderColor)",
    sidebarRing: "var(--SmartThemeQuoteColor)"
  },
  variables: {
    radius: "0.4rem"
  }
}, M4 = {
  name: "Glass (Frosted)",
  colors: {
    // 
    background: "rgba(255, 255, 255, var(--glass-opacity, 0.1))",
    foreground: "#0f172a",
    //  (Slate-900) 
    //  - 
    card: "rgba(255, 255, 255, var(--glass-opacity, 0.25))",
    cardForeground: "#0f172a",
    popover: "rgba(255, 255, 255, var(--glass-opacity, 0.4))",
    popoverForeground: "#0f172a",
    primary: "rgba(15, 23, 42, 0.8)",
    // 
    primaryForeground: "#ffffff",
    secondary: "rgba(255, 255, 255, 0.3)",
    secondaryForeground: "#0f172a",
    muted: "rgba(255, 255, 255, 0.3)",
    mutedForeground: "rgba(15, 23, 42, 0.6)",
    accent: "rgba(255, 255, 255, 0.4)",
    accentForeground: "#0f172a",
    destructive: "rgba(239, 68, 68, 0.8)",
    destructiveForeground: "#ffffff",
    border: "rgba(15, 23, 42, 0.15)",
    // Lighter base (will be resistant to fade)
    input: "rgba(255, 255, 255, 0.4)",
    ring: "rgba(15, 23, 42, 0.4)",
    chart1: "#0f172a",
    chart2: "rgba(15, 23, 42, 0.8)",
    chart3: "rgba(15, 23, 42, 0.6)",
    chart4: "rgba(15, 23, 42, 0.4)",
    chart5: "rgba(15, 23, 42, 0.2)",
    sidebar: "rgba(255, 255, 255, var(--glass-opacity, 0.15))",
    sidebarForeground: "#0f172a",
    sidebarPrimary: "rgba(15, 23, 42, 0.8)",
    sidebarPrimaryForeground: "#ffffff",
    sidebarAccent: "rgba(255, 255, 255, 0.3)",
    sidebarAccentForeground: "#0f172a",
    sidebarBorder: "rgba(15, 23, 42, 0.1)",
    // Lighter base
    sidebarRing: "rgba(15, 23, 42, 0.4)"
  },
  variables: {
    radius: "1rem"
  }
}, vc = {
  sillytavern: z4,
  // SillyTavern 
  paperLight: _4,
  twitterDark: T4,
  claudeDark: j4,
  catppuccin: A4,
  discord: N4,
  glass: M4
}, _n = [];
for (let n = 0; n < 256; ++n)
  _n.push((n + 256).toString(16).slice(1));
function O4(n, r = 0) {
  return (_n[n[r + 0]] + _n[n[r + 1]] + _n[n[r + 2]] + _n[n[r + 3]] + "-" + _n[n[r + 4]] + _n[n[r + 5]] + "-" + _n[n[r + 6]] + _n[n[r + 7]] + "-" + _n[n[r + 8]] + _n[n[r + 9]] + "-" + _n[n[r + 10]] + _n[n[r + 11]] + _n[n[r + 12]] + _n[n[r + 13]] + _n[n[r + 14]] + _n[n[r + 15]]).toLowerCase();
}
let eh;
const D4 = new Uint8Array(16);
function R4() {
  if (!eh) {
    if (typeof crypto > "u" || !crypto.getRandomValues)
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    eh = crypto.getRandomValues.bind(crypto);
  }
  return eh(D4);
}
const L4 = typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto), Q0 = { randomUUID: L4 };
function B4(n, r, i) {
  var s;
  n = n || {};
  const l = n.random ?? ((s = n.rng) == null ? void 0 : s.call(n)) ?? R4();
  if (l.length < 16)
    throw new Error("Random bytes length must be >= 16");
  return l[6] = l[6] & 15 | 64, l[8] = l[8] & 63 | 128, O4(l);
}
function Ey(n, r, i) {
  return Q0.randomUUID && !n ? Q0.randomUUID() : B4(n);
}
var Ch = function(n, r) {
  return Ch = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(i, l) {
    i.__proto__ = l;
  } || function(i, l) {
    for (var s in l) Object.prototype.hasOwnProperty.call(l, s) && (i[s] = l[s]);
  }, Ch(n, r);
};
function $s(n, r) {
  if (typeof r != "function" && r !== null)
    throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
  Ch(n, r);
  function i() {
    this.constructor = n;
  }
  n.prototype = r === null ? Object.create(r) : (i.prototype = r.prototype, new i());
}
function Eh(n) {
  var r = typeof Symbol == "function" && Symbol.iterator, i = r && n[r], l = 0;
  if (i) return i.call(n);
  if (n && typeof n.length == "number") return {
    next: function() {
      return n && l >= n.length && (n = void 0), { value: n && n[l++], done: !n };
    }
  };
  throw new TypeError(r ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function _h(n, r) {
  var i = typeof Symbol == "function" && n[Symbol.iterator];
  if (!i) return n;
  var l = i.call(n), s, c = [], f;
  try {
    for (; (r === void 0 || r-- > 0) && !(s = l.next()).done; ) c.push(s.value);
  } catch (g) {
    f = { error: g };
  } finally {
    try {
      s && !s.done && (i = l.return) && i.call(l);
    } finally {
      if (f) throw f.error;
    }
  }
  return c;
}
function jh(n, r, i) {
  if (i || arguments.length === 2) for (var l = 0, s = r.length, c; l < s; l++)
    (c || !(l in r)) && (c || (c = Array.prototype.slice.call(r, 0, l)), c[l] = r[l]);
  return n.concat(c || Array.prototype.slice.call(r));
}
function ti(n) {
  return typeof n == "function";
}
function _y(n) {
  var r = function(l) {
    Error.call(l), l.stack = new Error().stack;
  }, i = n(r);
  return i.prototype = Object.create(Error.prototype), i.prototype.constructor = i, i;
}
var th = _y(function(n) {
  return function(i) {
    n(this), this.message = i ? i.length + ` errors occurred during unsubscription:
` + i.map(function(l, s) {
      return s + 1 + ") " + l.toString();
    }).join(`
  `) : "", this.name = "UnsubscriptionError", this.errors = i;
  };
});
function Th(n, r) {
  if (n) {
    var i = n.indexOf(r);
    0 <= i && n.splice(i, 1);
  }
}
var Pc = (function() {
  function n(r) {
    this.initialTeardown = r, this.closed = !1, this._parentage = null, this._finalizers = null;
  }
  return n.prototype.unsubscribe = function() {
    var r, i, l, s, c;
    if (!this.closed) {
      this.closed = !0;
      var f = this._parentage;
      if (f)
        if (this._parentage = null, Array.isArray(f))
          try {
            for (var g = Eh(f), y = g.next(); !y.done; y = g.next()) {
              var b = y.value;
              b.remove(this);
            }
          } catch (U) {
            r = { error: U };
          } finally {
            try {
              y && !y.done && (i = g.return) && i.call(g);
            } finally {
              if (r) throw r.error;
            }
          }
        else
          f.remove(this);
      var S = this.initialTeardown;
      if (ti(S))
        try {
          S();
        } catch (U) {
          c = U instanceof th ? U.errors : [U];
        }
      var x = this._finalizers;
      if (x) {
        this._finalizers = null;
        try {
          for (var _ = Eh(x), E = _.next(); !E.done; E = _.next()) {
            var N = E.value;
            try {
              Z0(N);
            } catch (U) {
              c = c ?? [], U instanceof th ? c = jh(jh([], _h(c)), _h(U.errors)) : c.push(U);
            }
          }
        } catch (U) {
          l = { error: U };
        } finally {
          try {
            E && !E.done && (s = _.return) && s.call(_);
          } finally {
            if (l) throw l.error;
          }
        }
      }
      if (c)
        throw new th(c);
    }
  }, n.prototype.add = function(r) {
    var i;
    if (r && r !== this)
      if (this.closed)
        Z0(r);
      else {
        if (r instanceof n) {
          if (r.closed || r._hasParent(this))
            return;
          r._addParent(this);
        }
        (this._finalizers = (i = this._finalizers) !== null && i !== void 0 ? i : []).push(r);
      }
  }, n.prototype._hasParent = function(r) {
    var i = this._parentage;
    return i === r || Array.isArray(i) && i.includes(r);
  }, n.prototype._addParent = function(r) {
    var i = this._parentage;
    this._parentage = Array.isArray(i) ? (i.push(r), i) : i ? [i, r] : r;
  }, n.prototype._removeParent = function(r) {
    var i = this._parentage;
    i === r ? this._parentage = null : Array.isArray(i) && Th(i, r);
  }, n.prototype.remove = function(r) {
    var i = this._finalizers;
    i && Th(i, r), r instanceof n && r._removeParent(this);
  }, n.EMPTY = (function() {
    var r = new n();
    return r.closed = !0, r;
  })(), n;
})(), jy = Pc.EMPTY;
function Ty(n) {
  return n instanceof Pc || n && "closed" in n && ti(n.remove) && ti(n.add) && ti(n.unsubscribe);
}
function Z0(n) {
  ti(n) ? n() : n.unsubscribe();
}
var U4 = {
  Promise: void 0
}, I4 = {
  setTimeout: function(n, r) {
    for (var i = [], l = 2; l < arguments.length; l++)
      i[l - 2] = arguments[l];
    return setTimeout.apply(void 0, jh([n, r], _h(i)));
  },
  clearTimeout: function(n) {
    return clearTimeout(n);
  },
  delegate: void 0
};
function q4(n) {
  I4.setTimeout(function() {
    throw n;
  });
}
function W0() {
}
function Sc(n) {
  n();
}
var im = (function(n) {
  $s(r, n);
  function r(i) {
    var l = n.call(this) || this;
    return l.isStopped = !1, i ? (l.destination = i, Ty(i) && i.add(l)) : l.destination = F4, l;
  }
  return r.create = function(i, l, s) {
    return new Nh(i, l, s);
  }, r.prototype.next = function(i) {
    this.isStopped || this._next(i);
  }, r.prototype.error = function(i) {
    this.isStopped || (this.isStopped = !0, this._error(i));
  }, r.prototype.complete = function() {
    this.isStopped || (this.isStopped = !0, this._complete());
  }, r.prototype.unsubscribe = function() {
    this.closed || (this.isStopped = !0, n.prototype.unsubscribe.call(this), this.destination = null);
  }, r.prototype._next = function(i) {
    this.destination.next(i);
  }, r.prototype._error = function(i) {
    try {
      this.destination.error(i);
    } finally {
      this.unsubscribe();
    }
  }, r.prototype._complete = function() {
    try {
      this.destination.complete();
    } finally {
      this.unsubscribe();
    }
  }, r;
})(Pc), H4 = (function() {
  function n(r) {
    this.partialObserver = r;
  }
  return n.prototype.next = function(r) {
    var i = this.partialObserver;
    if (i.next)
      try {
        i.next(r);
      } catch (l) {
        cc(l);
      }
  }, n.prototype.error = function(r) {
    var i = this.partialObserver;
    if (i.error)
      try {
        i.error(r);
      } catch (l) {
        cc(l);
      }
    else
      cc(r);
  }, n.prototype.complete = function() {
    var r = this.partialObserver;
    if (r.complete)
      try {
        r.complete();
      } catch (i) {
        cc(i);
      }
  }, n;
})(), Nh = (function(n) {
  $s(r, n);
  function r(i, l, s) {
    var c = n.call(this) || this, f;
    return ti(i) || !i ? f = {
      next: i ?? void 0,
      error: l ?? void 0,
      complete: s ?? void 0
    } : f = i, c.destination = new H4(f), c;
  }
  return r;
})(im);
function cc(n) {
  q4(n);
}
function P4(n) {
  throw n;
}
var F4 = {
  closed: !0,
  next: W0,
  error: P4,
  complete: W0
}, V4 = (function() {
  return typeof Symbol == "function" && Symbol.observable || "@@observable";
})();
function K4(n) {
  return n;
}
function G4(n) {
  return n.length === 0 ? K4 : n.length === 1 ? n[0] : function(i) {
    return n.reduce(function(l, s) {
      return s(l);
    }, i);
  };
}
var J0 = (function() {
  function n(r) {
    r && (this._subscribe = r);
  }
  return n.prototype.lift = function(r) {
    var i = new n();
    return i.source = this, i.operator = r, i;
  }, n.prototype.subscribe = function(r, i, l) {
    var s = this, c = Y4(r) ? r : new Nh(r, i, l);
    return Sc(function() {
      var f = s, g = f.operator, y = f.source;
      c.add(g ? g.call(c, y) : y ? s._subscribe(c) : s._trySubscribe(c));
    }), c;
  }, n.prototype._trySubscribe = function(r) {
    try {
      return this._subscribe(r);
    } catch (i) {
      r.error(i);
    }
  }, n.prototype.forEach = function(r, i) {
    var l = this;
    return i = e1(i), new i(function(s, c) {
      var f = new Nh({
        next: function(g) {
          try {
            r(g);
          } catch (y) {
            c(y), f.unsubscribe();
          }
        },
        error: c,
        complete: s
      });
      l.subscribe(f);
    });
  }, n.prototype._subscribe = function(r) {
    var i;
    return (i = this.source) === null || i === void 0 ? void 0 : i.subscribe(r);
  }, n.prototype[V4] = function() {
    return this;
  }, n.prototype.pipe = function() {
    for (var r = [], i = 0; i < arguments.length; i++)
      r[i] = arguments[i];
    return G4(r)(this);
  }, n.prototype.toPromise = function(r) {
    var i = this;
    return r = e1(r), new r(function(l, s) {
      var c;
      i.subscribe(function(f) {
        return c = f;
      }, function(f) {
        return s(f);
      }, function() {
        return l(c);
      });
    });
  }, n.create = function(r) {
    return new n(r);
  }, n;
})();
function e1(n) {
  var r;
  return (r = n ?? U4.Promise) !== null && r !== void 0 ? r : Promise;
}
function $4(n) {
  return n && ti(n.next) && ti(n.error) && ti(n.complete);
}
function Y4(n) {
  return n && n instanceof im || $4(n) && Ty(n);
}
function X4(n) {
  return ti(n == null ? void 0 : n.lift);
}
function Q4(n) {
  return function(r) {
    if (X4(r))
      return r.lift(function(i) {
        try {
          return n(i, this);
        } catch (l) {
          this.error(l);
        }
      });
    throw new TypeError("Unable to lift unknown Observable type");
  };
}
function Z4(n, r, i, l, s) {
  return new W4(n, r, i, l, s);
}
var W4 = (function(n) {
  $s(r, n);
  function r(i, l, s, c, f, g) {
    var y = n.call(this, i) || this;
    return y.onFinalize = f, y.shouldUnsubscribe = g, y._next = l ? function(b) {
      try {
        l(b);
      } catch (S) {
        i.error(S);
      }
    } : n.prototype._next, y._error = c ? function(b) {
      try {
        c(b);
      } catch (S) {
        i.error(S);
      } finally {
        this.unsubscribe();
      }
    } : n.prototype._error, y._complete = s ? function() {
      try {
        s();
      } catch (b) {
        i.error(b);
      } finally {
        this.unsubscribe();
      }
    } : n.prototype._complete, y;
  }
  return r.prototype.unsubscribe = function() {
    var i;
    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
      var l = this.closed;
      n.prototype.unsubscribe.call(this), !l && ((i = this.onFinalize) === null || i === void 0 || i.call(this));
    }
  }, r;
})(im), J4 = _y(function(n) {
  return function() {
    n(this), this.name = "ObjectUnsubscribedError", this.message = "object unsubscribed";
  };
}), am = (function(n) {
  $s(r, n);
  function r() {
    var i = n.call(this) || this;
    return i.closed = !1, i.currentObservers = null, i.observers = [], i.isStopped = !1, i.hasError = !1, i.thrownError = null, i;
  }
  return r.prototype.lift = function(i) {
    var l = new t1(this, this);
    return l.operator = i, l;
  }, r.prototype._throwIfClosed = function() {
    if (this.closed)
      throw new J4();
  }, r.prototype.next = function(i) {
    var l = this;
    Sc(function() {
      var s, c;
      if (l._throwIfClosed(), !l.isStopped) {
        l.currentObservers || (l.currentObservers = Array.from(l.observers));
        try {
          for (var f = Eh(l.currentObservers), g = f.next(); !g.done; g = f.next()) {
            var y = g.value;
            y.next(i);
          }
        } catch (b) {
          s = { error: b };
        } finally {
          try {
            g && !g.done && (c = f.return) && c.call(f);
          } finally {
            if (s) throw s.error;
          }
        }
      }
    });
  }, r.prototype.error = function(i) {
    var l = this;
    Sc(function() {
      if (l._throwIfClosed(), !l.isStopped) {
        l.hasError = l.isStopped = !0, l.thrownError = i;
        for (var s = l.observers; s.length; )
          s.shift().error(i);
      }
    });
  }, r.prototype.complete = function() {
    var i = this;
    Sc(function() {
      if (i._throwIfClosed(), !i.isStopped) {
        i.isStopped = !0;
        for (var l = i.observers; l.length; )
          l.shift().complete();
      }
    });
  }, r.prototype.unsubscribe = function() {
    this.isStopped = this.closed = !0, this.observers = this.currentObservers = null;
  }, Object.defineProperty(r.prototype, "observed", {
    get: function() {
      var i;
      return ((i = this.observers) === null || i === void 0 ? void 0 : i.length) > 0;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype._trySubscribe = function(i) {
    return this._throwIfClosed(), n.prototype._trySubscribe.call(this, i);
  }, r.prototype._subscribe = function(i) {
    return this._throwIfClosed(), this._checkFinalizedStatuses(i), this._innerSubscribe(i);
  }, r.prototype._innerSubscribe = function(i) {
    var l = this, s = this, c = s.hasError, f = s.isStopped, g = s.observers;
    return c || f ? jy : (this.currentObservers = null, g.push(i), new Pc(function() {
      l.currentObservers = null, Th(g, i);
    }));
  }, r.prototype._checkFinalizedStatuses = function(i) {
    var l = this, s = l.hasError, c = l.thrownError, f = l.isStopped;
    s ? i.error(c) : f && i.complete();
  }, r.prototype.asObservable = function() {
    var i = new J0();
    return i.source = this, i;
  }, r.create = function(i, l) {
    return new t1(i, l);
  }, r;
})(J0), t1 = (function(n) {
  $s(r, n);
  function r(i, l) {
    var s = n.call(this) || this;
    return s.destination = i, s.source = l, s;
  }
  return r.prototype.next = function(i) {
    var l, s;
    (s = (l = this.destination) === null || l === void 0 ? void 0 : l.next) === null || s === void 0 || s.call(l, i);
  }, r.prototype.error = function(i) {
    var l, s;
    (s = (l = this.destination) === null || l === void 0 ? void 0 : l.error) === null || s === void 0 || s.call(l, i);
  }, r.prototype.complete = function() {
    var i, l;
    (l = (i = this.destination) === null || i === void 0 ? void 0 : i.complete) === null || l === void 0 || l.call(i);
  }, r.prototype._subscribe = function(i) {
    var l, s;
    return (s = (l = this.source) === null || l === void 0 ? void 0 : l.subscribe(i)) !== null && s !== void 0 ? s : jy;
  }, r;
})(am);
function e3(n, r) {
  return Q4(function(i, l) {
    var s = 0;
    i.subscribe(Z4(l, function(c) {
      return n.call(r, c, s++) && l.next(c);
    }));
  });
}
const fc = new am(), t3 = {
  /**
   * 
   */
  emit(n) {
    fc.next({
      ...n,
      timestamp: Date.now()
    });
  },
  /**
   * 
   */
  subscribe(n) {
    const r = fc.subscribe(n);
    return {
      unsubscribe: () => r.unsubscribe()
    };
  },
  /**
   * 
   */
  on(n, r) {
    const i = fc.pipe(e3((l) => l.type === n)).subscribe((l) => r(l.payload));
    return {
      unsubscribe: () => i.unsubscribe()
    };
  },
  /**
   *  RxJS 
   */
  asObservable() {
    return fc.asObservable();
  }
};
var Bt = /* @__PURE__ */ ((n) => (n[n.DEBUG = 0] = "DEBUG", n[n.INFO = 1] = "INFO", n[n.SUCCESS = 2] = "SUCCESS", n[n.WARN = 3] = "WARN", n[n.ERROR = 4] = "ERROR", n))(Bt || {});
const jc = {
  0: { label: "DEBUG", icon: "", color: "#6c757d" },
  1: { label: "INFO", icon: "", color: "#17a2b8" },
  2: { label: "OK", icon: "", color: "#28a745" },
  3: { label: "WARN", icon: "", color: "#ffc107" },
  4: { label: "ERROR", icon: "", color: "#dc3545" }
}, Ny = {
  maxEntries: 5e3,
  minLevel: 0
  /* DEBUG */
}, Ay = new am();
let Mi = [], Ds = { ...Ny };
function n3(n) {
  return new Date(n).toTimeString().slice(0, 8);
}
function fo(n, r, i, l) {
  if (n < Ds.minLevel) return;
  const s = {
    id: Ey(),
    timestamp: Date.now(),
    level: n,
    module: r,
    message: i,
    data: l
  };
  Mi.push(s), Mi.length > Ds.maxEntries && (Mi = Mi.slice(-Ds.maxEntries)), Ay.next(s);
}
function r3() {
  t3.subscribe((n) => {
    const i = {
      INGESTION_START: Bt.INFO,
      INGESTION_COMPLETE: Bt.SUCCESS,
      ENTITY_CREATED: Bt.INFO,
      MEMORY_STORED: Bt.SUCCESS,
      RETRIEVAL_START: Bt.DEBUG,
      RETRIEVAL_COMPLETE: Bt.SUCCESS,
      CHAT_CHANGED: Bt.INFO,
      MESSAGE_RECEIVED: Bt.DEBUG
    }[n.type] ?? Bt.DEBUG;
    fo(i, "EventBus", `${n.type}`, n.payload);
  });
}
const Ve = {
  /**
   *  Logger
   */
  init(n) {
    n && (Ds = { ...Ds, ...n }), Mi = [], r3(), Ve.info("Logger", "Logger ");
  },
  /**
   * DEBUG 
   */
  debug(n, r, i) {
    fo(Bt.DEBUG, n, r, i);
  },
  /**
   * INFO 
   */
  info(n, r, i) {
    fo(Bt.INFO, n, r, i);
  },
  /**
   * SUCCESS 
   */
  success(n, r, i) {
    fo(Bt.SUCCESS, n, r, i);
  },
  /**
   * WARN 
   */
  warn(n, r, i) {
    fo(Bt.WARN, n, r, i);
  },
  /**
   * ERROR 
   */
  error(n, r, i) {
    fo(Bt.ERROR, n, r, i);
  },
  /**
   * 
   */
  getLogs() {
    return [...Mi];
  },
  /**
   * 
   */
  subscribe(n) {
    const r = Ay.subscribe(n);
    return () => r.unsubscribe();
  },
  /**
   * 
   */
  clear() {
    Mi = [], Ve.info("Logger", "");
  },
  /**
   *  Markdown 
   */
  exportToMarkdown() {
    const n = /* @__PURE__ */ new Date();
    n.toISOString().slice(0, 10), n.toTimeString().slice(0, 8).replace(/:/g, "");
    const r = {
      [Bt.DEBUG]: "DEBUG",
      [Bt.INFO]: "INFO",
      [Bt.SUCCESS]: "SUCCESS",
      [Bt.WARN]: "WARN",
      [Bt.ERROR]: "ERROR"
    };
    let i = `# Engram Debug Log

`;
    i += `- ****: ${n.toLocaleString("zh-CN")}
`, i += `- ****: 0.1.0
`, i += `- ****: ${Mi.length}

`, i += `---

`, i += `## 

`, i += "```\n";
    for (const l of Mi) {
      const s = n3(l.timestamp), c = r[l.level].padEnd(7), f = l.module.padEnd(16);
      if (i += `[${s}] [${f}] ${c} ${l.message}
`, l.data !== void 0) {
        const g = JSON.stringify(l.data, null, 2).split(`
`).map((y) => `    ${y}`).join(`
`);
        i += `${g}
`;
      }
    }
    return i += "```\n", i;
  },
  /**
   * 
   */
  getExportFilename() {
    const n = /* @__PURE__ */ new Date(), r = n.toISOString().slice(0, 10), i = n.toTimeString().slice(0, 8).replace(/:/g, "");
    return `engram_log_${r}_${i}.md`;
  }
}, lm = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DEFAULT_LOGGER_CONFIG: Ny,
  LogLevel: Bt,
  LogLevelConfig: jc,
  Logger: Ve
}, Symbol.toStringTag, { value: "Module" })), nl = Object.freeze({
  theme: "odysseia",
  presets: {},
  templates: {},
  promptTemplates: [],
  hasSeenWelcome: !1,
  lastReadVersion: "0.0.0",
  summarizerConfig: {},
  trimmerConfig: {},
  regexRules: [],
  apiSettings: null,
  linkedDeletion: {
    enabled: !0,
    deleteWorldbook: !0,
    deleteChatWorldbook: !1,
    // 
    deleteIndexedDB: !1,
    showConfirmation: !0
  },
  glassSettings: {
    enabled: !0,
    opacity: 0.3,
    blur: 10
  }
});
class nt {
  /**
   *  SillyTavern context
   */
  static getContext() {
    var r, i;
    return (i = (r = window.SillyTavern) == null ? void 0 : r.getContext) == null ? void 0 : i.call(r);
  }
  /**
   * 
   * 
   */
  static getSettings() {
    const r = this.getContext();
    return r != null && r.extensionSettings ? (r.extensionSettings[this.EXTENSION_NAME] || (r.extensionSettings[this.EXTENSION_NAME] = { ...nl }, Ve.debug("SettingsManager", "Initialized engram settings with defaults"), this.save()), r.extensionSettings[this.EXTENSION_NAME]) : (Ve.warn("SettingsManager", "SillyTavern context.extensionSettings not available"), { ...nl });
  }
  static getExtensionSettings() {
    return this.getSettings();
  }
  /**
   * 
   * 
   */
  static initSettings() {
    const r = this.getContext();
    if (!(r != null && r.extensionSettings)) {
      Ve.warn("SettingsManager", "Cannot init settings: context not available");
      return;
    }
    let i = !1;
    r.extensionSettings[this.EXTENSION_NAME] || (r.extensionSettings[this.EXTENSION_NAME] = { ...nl }, i = !0, Ve.info("SettingsManager", "Created engram settings"));
    const l = r.extensionSettings[this.EXTENSION_NAME];
    for (const s of Object.keys(nl))
      s in l || (l[s] = nl[s], i = !0, Ve.debug("SettingsManager", `Added missing field: ${s}`));
    i && this.save();
  }
  /**
   * Get a specific setting value
   */
  static get(r) {
    const l = this.getExtensionSettings()[r];
    return l !== void 0 ? l : nl[r];
  }
  /**
   * Save a specific setting value
   *  context.extensionSettings 
   */
  static set(r, i) {
    const l = this.getContext();
    if (!(l != null && l.extensionSettings)) {
      Ve.warn("SettingsManager", "Cannot set: context.extensionSettings not available");
      return;
    }
    l.extensionSettings[this.EXTENSION_NAME] || (l.extensionSettings[this.EXTENSION_NAME] = { ...nl }), l.extensionSettings[this.EXTENSION_NAME][r] = i, Ve.debug("SettingsManager", `Set ${String(r)} = ${JSON.stringify(i)}`), this.save();
  }
  /**
   * 
   */
  static save() {
    const r = this.getContext();
    r != null && r.saveSettingsDebounced ? (r.saveSettingsDebounced(), Ve.debug("SettingsManager", "Saved via context.saveSettingsDebounced")) : Ve.warn("SettingsManager", "saveSettingsDebounced not available");
  }
  /**
   * Load settings from SillyTavern global state
   * 
   */
  static loadSettings() {
    return this.getExtensionSettings();
  }
  /**
   * 
   * @param category 
   * @returns  null
   */
  static getEnabledPromptTemplate(r) {
    const i = this.get("apiSettings");
    return ((i == null ? void 0 : i.promptTemplates) || []).find((s) => s.category === r && s.enabled) || null;
  }
  /**
   * 
   * @returns summarizerConfig 
   */
  static getSummarizerSettings() {
    return this.get("summarizerConfig") || {};
  }
  /**
   * 
   * @param config 
   */
  static setSummarizerSettings(r) {
    const i = this.getSummarizerSettings();
    this.set("summarizerConfig", { ...i, ...r });
  }
  /**
   * 
   * @returns RegexRule[] 
   */
  static getRegexRules() {
    return this.get("regexRules") || [];
  }
  /**
   * 
   * @param rules 
   */
  static setRegexRules(r) {
    this.set("regexRules", r);
  }
}
dt(nt, "EXTENSION_NAME", "engram");
const zy = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  SettingsManager: nt
}, Symbol.toStringTag, { value: "Module" }));
class wa {
  /**
   * 
   */
  static init() {
    this.injectStyles();
    let i = nt.loadSettings().theme;
    i || (i = localStorage.getItem(this.STORAGE_KEY), i && nt.set("theme", i));
    const l = vc[i] ? i : "claudeDark";
    this.setTheme(l), Ve.info("ThemeManager", `: ${l}`);
  }
  /**
   * 
   */
  static setTheme(r) {
    vc[r] || (Ve.warn("ThemeManager", `: ${r},  claudeDark`), r = "claudeDark"), this.currentTheme = r, nt.set("theme", r), localStorage.setItem(this.STORAGE_KEY, r), this.applyThemeVariables(r);
  }
  /**
   * 
   */
  static getTheme() {
    return this.currentTheme;
  }
  /**
   *  (dist/style.css)
   */
  static injectStyles() {
    const r = "engram-styles";
    if (document.getElementById(r)) return;
    const i = document.createElement("link");
    i.id = r, i.rel = "stylesheet", i.type = "text/css", i.href = `scripts/extensions/Engram_project/dist/style.css?v=${Date.now()}`, document.head.appendChild(i);
  }
  /**
   *  CSS 
   */
  static applyThemeVariables(r) {
    var N, U;
    const i = vc[r];
    if (!i) return;
    const l = document.documentElement, s = (G, D) => {
      l.style.setProperty(G, D);
    }, c = nt.getSettings(), g = ((N = c.glassSettings) == null ? void 0 : N.enabled) ?? !0 ? ((U = c.glassSettings) == null ? void 0 : U.opacity) ?? 1 : 1, b = !(r === "glass") && g < 1, S = Math.round((1 - g) * 100), x = [
      "background",
      "card",
      "popover",
      "sidebar",
      "secondary",
      "muted",
      "input",
      "border",
      "sidebarBorder"
    ];
    Object.entries(i.colors).forEach(([G, D]) => {
      let ne = `--${G.replace(/([A-Z])/g, "-$1").toLowerCase()}`;
      ne = ne.replace(/(\d+)/, "-$1");
      let ie = D;
      if (b && x.includes(G)) {
        const we = G.toLowerCase().includes("border") ? Math.round(S * 0.1) : S;
        ie = `color-mix(in srgb, ${D}, transparent ${we}%)`;
      }
      s(ne, ie);
    }), Object.entries(i.variables).forEach(([G, D]) => {
      s(`--${G}`, D);
    }), r !== "paperLight" ? l.classList.add("dark") : l.classList.remove("dark");
    const E = nt.getSettings().glassSettings;
    E && E.enabled ? (s("--glass-opacity", E.opacity.toString()), s("--glass-blur", `${E.blur}px`), E.blur > 0 ? s("--glass-backdrop-filter", `blur(${E.blur}px)`) : s("--glass-backdrop-filter", "none")) : (s("--glass-opacity", "1"), s("--glass-blur", "0px"), s("--glass-backdrop-filter", "none"));
  }
}
dt(wa, "STORAGE_KEY", "engram-theme"), dt(wa, "currentTheme", "claudeDark");
const wc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ThemeManager: wa
}, Symbol.toStringTag, { value: "Module" })), i3 = Cy((n) => ({
  theme: wa.getTheme(),
  isDarkMode: wa.getTheme() !== "paperLight",
  setTheme: (r) => {
    wa.setTheme(r), n({
      theme: r,
      isDarkMode: r !== "paperLight"
    });
  }
})), a3 = ({ onNavigate: n }) => {
  const r = i3((N) => N.setTheme), [i, l] = se.useState(""), [s, c] = se.useState(!1), [f, g] = se.useState(0), [y, b] = se.useState(kh), S = se.useRef(null), x = [
    {
      id: "theme-paper-light",
      icon: i4,
      label: ": Paper Light (Twitter)",
      description: "",
      action: () => r("paperLight"),
      keywords: ["theme", "light", "white", "twitter", "paper", ""],
      type: "action"
    },
    {
      id: "theme-twitter-dark",
      icon: H0,
      label: ": Twitter Dark",
      description: "",
      action: () => r("twitterDark"),
      keywords: ["theme", "dark", "black", "twitter", "blue", ""],
      type: "action"
    },
    {
      id: "theme-claude-dark",
      icon: H0,
      label: ": Claude Dark",
      description: "",
      action: () => r("claudeDark"),
      keywords: ["theme", "dark", "claude", "paper", ""],
      type: "action"
    },
    {
      id: "theme-catppuccin",
      icon: P0,
      label: ": Catppuccin Mocha",
      description: "",
      action: () => r("catppuccin"),
      keywords: ["theme", "dark", "catppuccin", "mocha", ""],
      type: "action"
    },
    {
      id: "theme-discord",
      icon: P0,
      label: ": Discord Dark",
      description: " Discord ",
      action: () => r("discord"),
      keywords: ["theme", "dark", "discord", "game", ""],
      type: "action"
    }
  ];
  se.useEffect(() => {
    const N = h4(i), U = i.toLowerCase().trim(), G = x.filter(
      (D) => {
        var ne;
        return !U || D.label.toLowerCase().includes(U) || ((ne = D.description) == null ? void 0 : ne.toLowerCase().includes(U)) || D.keywords.some((ie) => ie.toLowerCase().includes(U));
      }
    );
    b([...N, ...G]), g(0);
  }, [i]), se.useEffect(() => {
    const N = (U) => {
      (U.metaKey || U.ctrlKey) && U.key === "k" && (U.preventDefault(), c(!0));
    };
    return window.addEventListener("keydown", N), () => window.removeEventListener("keydown", N);
  }, []), se.useEffect(() => {
    s && setTimeout(() => {
      var N;
      return (N = S.current) == null ? void 0 : N.focus();
    }, 50);
  }, [s]);
  const _ = (N) => {
    const U = y.length + (i ? 1 : 0);
    switch (N.key) {
      case "ArrowDown":
        N.preventDefault(), g((G) => (G + 1) % U);
        break;
      case "ArrowUp":
        N.preventDefault(), g((G) => (G - 1 + U) % U);
        break;
      case "Enter":
        N.preventDefault(), E();
        break;
      case "Escape":
        c(!1);
        break;
    }
  }, E = () => {
    y.length > 0 && f < y.length ? y[f].action(n) : i && (console.log("Searching memory for:", i), n("/memory")), c(!1), l("");
  };
  return /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
    /* @__PURE__ */ h.jsx(
      "button",
      {
        onClick: () => c(!0),
        className: "p-2 rounded-md hover:bg-accent hover:text-accent-foreground transition-colors text-muted-foreground",
        title: " (Cmd+K)",
        children: /* @__PURE__ */ h.jsx(po, { size: 20 })
      }
    ),
    s && /* @__PURE__ */ h.jsx(
      "div",
      {
        className: "fixed inset-0 z-[100] flex items-start justify-center pt-[20vh] px-4 animate-in fade-in duration-200",
        style: {
          height: "100dvh",
          width: "100vw",
          backgroundColor: "rgba(0,0,0,0.5)",
          backdropFilter: "var(--glass-backdrop-filter, blur(4px))"
          // Apply global glass blur variable
        },
        onClick: (N) => {
          N.target === N.currentTarget && c(!1);
        },
        children: /* @__PURE__ */ h.jsxs(
          "div",
          {
            className: "w-full max-w-xl border border-border rounded-xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 slide-in-from-top-4 duration-200",
            style: {
              backgroundColor: "var(--popover)",
              // This will pick up the transparent color from theme
              color: "var(--popover-foreground)",
              backdropFilter: "var(--glass-backdrop-filter)"
              // Ensure the modal content itself also blurs what's behind it if it's transparent
            },
            children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 px-4 py-3 border-b border-border/50", children: [
                /* @__PURE__ */ h.jsx(po, { size: 20, className: "text-muted-foreground shrink-0" }),
                /* @__PURE__ */ h.jsx(
                  "input",
                  {
                    ref: S,
                    type: "text",
                    className: "flex-1 bg-transparent border-none outline-none text-lg text-foreground placeholder:text-muted-foreground/50",
                    placeholder: "...",
                    value: i,
                    onChange: (N) => l(N.target.value),
                    onKeyDown: _
                  }
                ),
                /* @__PURE__ */ h.jsx("div", { className: "text-[10px] text-muted-foreground border border-border px-1.5 py-0.5 rounded bg-muted/50", children: "ESC" })
              ] }),
              /* @__PURE__ */ h.jsxs("div", { className: "max-h-[60vh] overflow-y-auto p-2 scroll-smooth", children: [
                y.length > 0 && /* @__PURE__ */ h.jsxs("div", { className: "space-y-1", children: [
                  /* @__PURE__ */ h.jsx("div", { className: "px-2 py-1.5 text-xs font-semibold text-muted-foreground/70 uppercase tracking-wider", children: "" }),
                  y.map((N, U) => /* @__PURE__ */ h.jsxs(
                    "div",
                    {
                      className: `flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${U === f ? "bg-primary/10 text-primary" : "text-foreground hover:bg-muted/50"}`,
                      onClick: () => {
                        N.action(n), c(!1), l("");
                      },
                      onMouseEnter: () => g(U),
                      children: [
                        /* @__PURE__ */ h.jsx(N.icon, { size: 18, className: `shrink-0 ${U === f ? "text-primary" : "text-muted-foreground"}` }),
                        /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
                          /* @__PURE__ */ h.jsx("div", { className: "text-sm font-medium", children: N.label }),
                          N.description && /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground/80 truncate", children: N.description })
                        ] }),
                        U === f && /* @__PURE__ */ h.jsx(q0, { size: 16, className: "text-muted-foreground/50" })
                      ]
                    },
                    N.id
                  ))
                ] }),
                i && /* @__PURE__ */ h.jsxs("div", { className: "mt-2 pt-2 border-t border-border/50", children: [
                  /* @__PURE__ */ h.jsx("div", { className: "px-2 py-1.5 text-xs font-semibold text-muted-foreground/70 uppercase tracking-wider", children: "" }),
                  /* @__PURE__ */ h.jsxs(
                    "div",
                    {
                      className: `flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${f === y.length ? "bg-primary/10 text-primary" : "text-foreground hover:bg-muted/50"}`,
                      onClick: () => E(),
                      onMouseEnter: () => g(y.length),
                      children: [
                        /* @__PURE__ */ h.jsx(po, { size: 18, className: `shrink-0 ${f === y.length ? "text-primary" : "text-muted-foreground"}` }),
                        /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
                          /* @__PURE__ */ h.jsxs("div", { className: "text-sm font-medium", children: [
                            ': "',
                            /* @__PURE__ */ h.jsx("span", { className: "text-primary", children: i }),
                            '"'
                          ] }),
                          /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground/80", children: "" })
                        ] }),
                        f === y.length && /* @__PURE__ */ h.jsx(q0, { size: 16, className: "text-muted-foreground/50" })
                      ]
                    }
                  )
                ] }),
                y.length === 0 && !i && /* @__PURE__ */ h.jsxs("div", { className: "px-4 py-12 text-center text-muted-foreground text-sm flex flex-col items-center gap-2", children: [
                  /* @__PURE__ */ h.jsx(po, { size: 32, className: "opacity-20 mb-2" }),
                  /* @__PURE__ */ h.jsx("p", { children: "..." })
                ] })
              ] })
            ]
          }
        )
      }
    )
  ] });
}, l3 = ({ className: n = "", size: r = 24 }) => /* @__PURE__ */ h.jsx(
  "svg",
  {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 400 592",
    width: r,
    height: r,
    className: n,
    "aria-label": "Engram Icon",
    children: /* @__PURE__ */ h.jsx(
      "path",
      {
        fill: "currentColor",
        d: `M103.875908,522.166260 
                C75.225380,521.276611 55.289425,503.229828 52.249313,475.852142 
                C49.879883,454.514191 63.027035,433.000366 83.930901,424.858398 
                C88.449257,423.098541 89.857674,420.860199 89.801926,416.150269 
                C89.555420,395.322357 89.621246,374.489380 89.762306,353.659515 
                C89.787170,349.987000 88.728760,348.057556 85.120293,346.642609 
                C64.672897,338.625031 52.338894,320.951630 52.085896,299.869415 
                C51.832878,278.785156 63.730618,260.903198 84.118019,252.449951 
                C88.288918,250.720566 89.867378,248.680847 89.807304,244.052597 
                C89.539139,223.391968 89.589142,202.724701 89.796356,182.062561 
                C89.836380,178.071609 88.518524,176.326385 84.841705,174.787247 
                C57.730556,163.438416 45.530682,135.966721 55.436111,109.194000 
                C62.627293,89.757439 81.922821,76.710289 103.282494,76.841476 
                C124.355003,76.970901 143.082275,89.740875 149.993118,109.121849 
                C151.315979,112.831749 153.184799,113.869263 156.863403,113.853104 
                C186.192612,113.724319 215.522736,113.698357 244.851929,113.811600 
                C248.773117,113.826736 250.677307,112.652130 252.052902,108.765602 
                C259.013885,89.098465 278.589447,76.365829 300.503601,76.811897 
                C322.171844,77.252960 341.040283,91.132324 347.255371,111.201912 
                C356.569763,141.279358 340.344788,170.373184 309.893127,176.623123 
                C283.359375,182.068970 260.376740,167.450562 251.980011,145.670181 
                C250.492157,141.810806 248.818085,140.240295 244.552948,140.266785 
                C215.390915,140.447968 186.227219,140.357330 157.064072,140.375076 
                C154.628784,140.376556 151.855545,139.805771 151.141357,143.359161 
                C150.400787,147.043839 146.628937,150.064713 151.136917,154.478546 
                C184.592346,187.235229 217.778336,220.267349 250.982285,253.280014 
                C253.021469,255.307434 254.527191,255.254166 257.033264,254.047714 
                C276.199188,244.820953 294.752930,247.045853 310.978485,259.993408 
                C328.011017,273.584869 333.936798,292.106659 327.764038,313.282837 
                C321.779785,333.812378 307.254517,345.637268 286.367889,349.037231 
                C276.405396,350.658997 266.352570,349.443024 257.275055,344.363342 
                C254.265045,342.678986 252.301132,343.049744 249.903275,345.441406 
                C230.205368,365.088531 210.395386,384.623230 190.631638,404.204376 
                C177.732651,416.984222 164.859726,429.790344 151.962982,442.572388 
                C148.257980,446.244415 148.113403,452.901764 151.629196,456.671387 
                C152.707138,457.827148 154.029282,457.681976 155.328629,457.681946 
                C185.658203,457.681458 215.987854,457.631042 246.317261,457.695557 
                C249.355972,457.702026 250.687012,456.399414 251.717636,453.698944 
                C259.314423,433.793579 278.324493,420.868317 299.341309,421.146240 
                C320.526215,421.426361 339.575745,434.206421 346.686249,452.909271 
                C354.337341,473.034058 348.794159,495.642761 332.699371,509.956390 
                C307.061371,532.757202 263.380280,521.715210 251.978027,489.436371 
                C250.838303,486.209961 249.371201,484.953583 245.964813,484.962799 
                C216.302094,485.043304 186.639008,484.985840 156.976028,484.969330 
                C154.436981,484.967896 152.081528,484.923981 150.916916,488.054077 
                C142.892441,509.621246 126.842339,520.325989 103.875908,522.166260 
                M141.430466,266.110352 
                C145.394760,270.906738 148.503693,276.196198 150.388428,282.139069 
                C151.211502,284.734314 152.692291,285.770782 155.494156,285.760895 
                C179.139755,285.677429 202.787949,285.547394 226.430206,285.843811 
                C232.373352,285.918304 231.388184,281.058533 233.335602,278.254700 
                C235.007233,275.847992 233.916855,274.189880 232.000244,272.304352 
                C199.956863,240.780380 167.866821,209.301468 136.133682,177.467056 
                C131.183243,172.500824 127.483856,170.729507 121.013550,174.621368 
                C117.660522,176.638214 116.183739,178.155136 116.217278,182.042480 
                C116.398239,203.022598 116.444160,224.006012 116.243645,244.985474 
                C116.204666,249.064667 117.676285,250.918961 121.328865,252.228989 
                C128.972488,254.970444 135.505173,259.524170 141.430466,266.110352 
                M116.349434,377.499908 
                C116.351860,390.663696 116.870338,403.855377 116.161102,416.980713 
                C115.742699,424.723846 121.926743,423.801880 125.649162,426.262665 
                C129.080231,428.530792 130.798965,425.706268 132.741440,423.784821 
                C165.551407,391.329803 198.234940,358.745361 231.274231,326.525696 
                C235.764252,322.147095 232.377243,319.155212 231.599960,315.493317 
                C230.884583,312.123138 228.193359,312.382568 225.670288,312.382812 
                C202.675171,312.384949 179.679749,312.445435 156.685303,312.323212 
                C153.331955,312.305389 151.624329,313.386505 150.456299,316.584381 
                C145.119888,331.194611 135.004120,341.287384 120.496223,346.769958 
                C117.238434,348.001068 116.190170,349.706024 116.267418,353.006317 
                C116.450615,360.833862 116.340004,368.668243 116.349434,377.499908z`
      }
    )
  }
), o3 = ({
  onToggleSidebar: n,
  isMobile: r,
  // Deprecated prop, handled by CSS
  onClose: i,
  onNavigate: l
}) => /* @__PURE__ */ h.jsxs("header", { className: "h-14 flex items-center justify-between px-4 border-b border-border bg-sidebar/95 backdrop-blur z-50 transition-all duration-300 w-full flex-shrink-0", children: [
  /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 w-16 md:w-64", children: [
    /* @__PURE__ */ h.jsx(
      "button",
      {
        className: "p-2 -ml-2 rounded-md hover:bg-sidebar-accent hover:text-sidebar-accent-foreground transition-colors md:hidden",
        onClick: n,
        title: "",
        children: /* @__PURE__ */ h.jsx(Av, { size: 20 })
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "hidden md:flex items-center gap-2", children: [
      /* @__PURE__ */ h.jsx(l3, { size: 20, className: "text-primary" }),
      /* @__PURE__ */ h.jsx("span", { className: "font-semibold text-sidebar-foreground tracking-tight", children: "Engram" })
    ] })
  ] }),
  /* @__PURE__ */ h.jsx("div", { className: "flex-1" }),
  /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1 md:gap-2", children: [
    /* @__PURE__ */ h.jsx(a3, { onNavigate: l }),
    /* @__PURE__ */ h.jsx("div", { className: "h-4 w-[1px] bg-border mx-1" }),
    /* @__PURE__ */ h.jsx(
      "button",
      {
        className: "p-2 rounded-md hover:bg-destructive hover:text-destructive-foreground transition-colors text-muted-foreground",
        onClick: i,
        title: "",
        children: /* @__PURE__ */ h.jsx(Hc, { size: 20 })
      }
    )
  ] })
] }), n1 = [
  { id: "dashboard", icon: Cv, label: "", path: "/dashboard" },
  { id: "memory", icon: by, label: "", path: "/memory" },
  { id: "graph", icon: xy, label: "", path: "/graph" },
  { id: "processing", icon: Yh, label: "", path: "/processing" },
  { id: "presets", icon: qc, label: "API ", path: "/presets" },
  { id: "devlog", icon: vo, label: "", path: "/devlog" },
  { id: "settings", icon: nm, label: "", path: "/settings" }
], s3 = ({ className: n = "", height: r = 24 }) => {
  const i = Math.round(r * 3.17);
  return /* @__PURE__ */ h.jsxs(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "235 175 555 175",
      width: i,
      height: r,
      className: n,
      "aria-label": "Engram",
      children: [
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M752.3,294.5c-0.2-11.8-0.3-23.1-0.4-34.4c0-2.7,0-5.3-0.2-8c-0.6-6.4-4.1-10.1-9.8-10.9 c-6.9-0.9-12.2,2-14.5,7.9c-1,2.5-1.2,5.2-1.2,7.9c0,11,-0.3,22,0,33c0.1,5.2-1.7,6.9-6.7,6.4c-3.3-0.3-6.7-0.3-10,0 c-4.9,0.5-5.9-1.9-5.8-6.2c0.2-11.8,0.2-23.7,0-35.5c-0.2-9.4-5.4-14.3-14.1-13.5c-6.4,0.6-11.1,5.7-11.3,13 c-0.3,11.7-0.2,23.3-0.3,35c0,7.1,0,7.1-7.3,7.1c-3.3,0-6.7-0.1-10,0c-3.3,0.1-4.9-1.1-4.9-4.6c0.1-21.5,0-43-0.1-64.5 c0-2.9,1.3-4.3,4.2-4.3c3.2,0,6.3-0.1,9.5,0.1c4,0,8.8-1,7.5,6.6c8.6-6.1,16.9-8.7,26.3-7c5.2,1,10.1,2.7,13.7,6.6 c2.8,2.9,4.6,2.4,7.4,0c6.8-5.8,15-7.9,23.8-6.9c16.3,1.8,25.1,11.7,25.8,29.5c0.5,13.3,0.1,26.6,0.2,40 c0,3.4-1.2,5.1-4.7,4.7C763.8,295.7,757.9,298,752.3,294.5z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M463.1,324.1c-10.8-0.7-20.9-2.4-30.2-7.5c-3.6-2-5-4-2.4-7.8c2.3-3.4,4.1-7.1,6.5-11.3 c6.1,3.6,11.8,6.8,18.5,7.7c5.3,0.7,10.6,1.1,15.8-0.5c8.3-2.6,12.2-9.1,10.9-18.6c-9.1,7.5-19.3,8.6-30.2,6.4 c-7.8-1.6-14.2-5.6-19.2-11.8c-10.5-12.8-10.6-32.5-0.5-45.5c11.2-14.3,28.6-16.4,50.9-6.1c-0.4-6.2,3.5-6.3,8.1-6.2 c13,0.2,13,0.1,13,13c0,16.3-0.5,32.7,0.1,49C505.4,309.3,491.3,322.1,467.6,324C466.2,324.1,464.9,324.1,463.1,324.1z M482.1,252.6 c-0.6-2.1-1.6-4-3-5.7c-4.6-6-13.5-8.4-21.2-5.5c-7.4,2.7-11.1,8.9-10.6,17.8c0.4,7.4,5.7,13.5,13.6,15.2 C474.1,277.2,485.2,266.4,482.1,252.6z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M258.1,201.6c20.3,0,40.1,0.1,60-0.1c4.5,0,6.3,1.3,6.1,5.9c-0.4,14.6,2.1,12.6-12.7,12.7 c-10.7,0.1-21.3,0.1-32-0.1c-3.8-0.1-5.2,1-5.3,5.1c0,13.4-0.2,13.4,13.4,13.4c8.7,0,17.3,0.1,26,0c3.4-0.1,4.7,1.2,4.7,4.7 c-0.2,16.4,1.9,13.7-13.1,13.9c-8.8,0.1-17.7,0.1-26.5,0c-3.2,0-4.6,1.1-4.4,4.4c0.2,3.8,0.2,7.7,0,11.5 c-0.2,3.5,1.1,4.7,4.6,4.7c13.7-0.1,27.3,0.2,41-0.1c5.1-0.1,6.6,1.5,6.5,6.5c-0.2,12.3,0,12.3-12.1,12.3 c-18.7-0.1-37.3-0.2-56,0c-4.9,0.1-6.7-1.2-6.7-6.4c0.2-27.5,0.2-55,0-82.5C251.6,203,253,200.9,258.1,201.6z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M599.5,239.6c-5.6,0.9-10.6,2.1-15,4.9c-2.5,1.6-4,0.9-5.1-1.6c-0.9-2-1.9-3.9-2.9-5.8 c-3.1-6.1-3-6.4,3-9.3c11.6-5.6,23.9-7.1,36.5-4.6c15.1,2.9,23.6,12.8,24.1,28.7c0.4,13.3,0.1,26.6,0.2,40 c0,3.5-1.5,4.8-4.8,4.6c-3,0-6,0-9,0.1c-4.2,0.2-8.1,0.2-6.6-6.6c-12.4,9.5-24.9,10.4-37.7,3.9c-8.5-4.3-11.9-12-11.3-21.2 c0.6-9.1,5.9-15,14.4-17.9c5.7-1.9,11.6-2.8,17.7-2.8c4.6,0,9.3,0.5,13.8-0.4c1.9-7.2-7.4-13.5-17.2-11.9 M617.7,271.9 c-0.1-2.5,1-5.8-3.3-5.8c-5,0-10-0.1-15,0.2c-4,0.3-6.9,2.4-7.1,6.9c-0.2,4.5,2.2,7.2,6.3,8.4C606.5,283.8,613.8,280.3,617.7,271.9z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M346.2,222.9c2.6,0,4.8,0.1,7,0c4.7-0.4,8.1,0.7,7,7.3c6-4,11.6-7.1,18.2-7.9c18.2-2.1,34.8,7.7,35,29.4 c0.1,13.2-0.1,26.3,0.1,39.5c0,3.9-1.2,5.5-5.2,5.2c-4,0-8,0-12,0.2c-3.5,0.2-4.7-1.3-4.7-4.7c0.1-10.3,0.1-20.7,0-31 c0-2.3-0.1-4.7-0.5-7c-1.3-8.4-5.4-12.3-12.9-12.6c-8.4-0.3-14.3,3.9-16,11.9c-2,9.6-0.7,19.3-0.9,28.9 c-0.2,14.4,0,14.4-14.4,14.4c-7.8,0-7.9,0-7.9-8c0-19.5,0-39,0-58.5C339,223.3,339.2,223.2,346.2,222.9z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M543.2,258.4c-0.1,11.1-0.3,21.8-0.2,32.4c0,4-1.2,5.9-5.4,5.6c-4.3-0.3-8.7-0.1-13-0.1 c-2.7,0-3.9-1.3-3.9-4c0-21.8,0-43.6,0-65.5c0-2.8,1.3-3.9,3.9-4c2.8,0,5.7,0,8.5-0.1c4.8-0.2,9.6-0.5,8.7,6.4 c2.1,0.8,2.8-0.7,3.9-1.3c2.3-1.2,4.5-2.8,7-3.8c11.8-4.7,14.3-3,14.3,9.3c0,0.8-0.1,1.7,0,2.5c0.6,4.6-1,6.4-6,6.5 C550,242.6,544.8,247.5,543.2,258.4z" })
      ]
    }
  );
}, u3 = "0.3.0", My = {
  version: u3
}, r1 = ({
  activeTab: n,
  onNavigate: r,
  isMobile: i,
  isOpen: l = !1,
  onClose: s,
  onShowUpdateNotice: c,
  hasUnreadUpdate: f
}) => {
  const g = (b) => {
    r(b), i && s && s();
  }, y = () => /* @__PURE__ */ h.jsxs("div", { className: "pt-4 border-t border-border/30 mt-2 space-y-2", children: [
    /* @__PURE__ */ h.jsxs(
      "button",
      {
        onClick: c,
        className: "w-full flex items-center gap-2 px-2 py-1.5 rounded-lg transition-all duration-200 text-muted-foreground hover:text-foreground hover:bg-muted/10 text-left",
        children: [
          /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ h.jsx(Bx, { size: 16, strokeWidth: 1.5 }),
            f && /* @__PURE__ */ h.jsx("span", { className: "absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse" })
          ] }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs", children: "" }),
          f && /* @__PURE__ */ h.jsx("span", { className: "ml-auto text-[10px] px-1.5 py-0.5 bg-primary/20 text-primary rounded-full", children: "NEW" })
        ]
      }
    ),
    /* @__PURE__ */ h.jsxs(
      "a",
      {
        href: "https://github.com/shiyue137mh-netizen/Engram",
        target: "_blank",
        rel: "noopener noreferrer",
        className: "group w-full flex items-center gap-2 px-2 py-1.5 rounded-lg transition-all duration-200 text-muted-foreground hover:text-foreground hover:bg-muted/10",
        title: "",
        children: [
          /* @__PURE__ */ h.jsx(gv, { size: 16, strokeWidth: 1.5, className: "group-hover:text-primary transition-colors" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs", children: "GitHub" }),
          /* @__PURE__ */ h.jsx("span", { className: "ml-auto text-[10px] text-primary opacity-0 group-hover:opacity-100 transition-opacity", children: "Star " })
        ]
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 px-2 py-1 opacity-50", children: [
      /* @__PURE__ */ h.jsx(s3, { height: 12 }),
      /* @__PURE__ */ h.jsxs("span", { className: "text-[10px] text-muted-foreground font-mono", children: [
        "v",
        My.version
      ] })
    ] })
  ] });
  return i && !l ? null : i ? /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: "fixed inset-0 z-50 flex justify-start",
      style: { height: "100dvh", width: "100vw" },
      children: [
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",
            onClick: s
          }
        ),
        /* @__PURE__ */ h.jsxs(
          "div",
          {
            id: "mobile-menu-drawer",
            className: "relative w-64 max-w-[80vw] h-full bg-sidebar border-r border-border shadow-2xl flex flex-col p-6 animate-in slide-in-from-left duration-300",
            style: { height: "100dvh" },
            children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between items-center mb-8", children: [
                /* @__PURE__ */ h.jsx("span", { className: "text-lg font-semibold text-sidebar-foreground/80", children: "" }),
                /* @__PURE__ */ h.jsx(
                  "button",
                  {
                    onClick: s,
                    className: "p-2 -mr-2 rounded-md hover:bg-sidebar-accent text-muted-foreground hover:text-sidebar-accent-foreground transition-colors",
                    children: /* @__PURE__ */ h.jsx(Hc, { size: 20 })
                  }
                )
              ] }),
              /* @__PURE__ */ h.jsx("nav", { className: "space-y-2 flex-1 overflow-y-auto", children: n1.map((b) => {
                const S = b.icon, x = n === b.id;
                return /* @__PURE__ */ h.jsxs(
                  "button",
                  {
                    onClick: () => g(b.id),
                    className: `
                                    w-full flex items-center gap-4 px-4 py-3 rounded-xl text-left transition-all duration-200
                                    ${x ? "bg-primary/10 text-primary font-medium" : "text-muted-foreground hover:bg-sidebar-accent hover:text-sidebar-foreground"}
                                `,
                    children: [
                      /* @__PURE__ */ h.jsx(S, { size: 22, className: x ? "text-primary" : "text-muted-foreground/70" }),
                      /* @__PURE__ */ h.jsx("span", { children: b.label })
                    ]
                  },
                  b.id
                );
              }) }),
              /* @__PURE__ */ h.jsx("div", { className: "mt-auto", children: /* @__PURE__ */ h.jsx(y, {}) })
            ]
          }
        )
      ]
    }
  ) : /* @__PURE__ */ h.jsxs("aside", { className: "[display:none] md:flex w-36 flex-shrink-0 bg-sidebar flex-col z-40 pt-4 px-2 border-r border-border/50 animate-in slide-in-from-left-4 fade-in duration-500 fill-mode-both", style: { animationDelay: "100ms", animationFillMode: "both" }, children: [
    /* @__PURE__ */ h.jsx("nav", { className: "flex-1 w-full flex flex-col gap-1 overflow-y-auto no-scrollbar", children: n1.map((b) => {
      const S = b.icon, x = n === b.id;
      return /* @__PURE__ */ h.jsxs(
        "button",
        {
          onClick: () => g(b.id),
          className: `
                                    w-full flex items-center gap-2 px-2 py-2 rounded-lg transition-all duration-200 text-left
                                    ${x ? "bg-primary/10 text-primary" : "text-muted-foreground hover:text-foreground hover:bg-muted/10"}
                                `,
          children: [
            /* @__PURE__ */ h.jsx(S, { size: 18, strokeWidth: x ? 2 : 1.5, className: "flex-shrink-0" }),
            /* @__PURE__ */ h.jsx("span", { className: `text-xs ${x ? "font-medium" : "font-normal"}`, children: b.label })
          ]
        },
        b.id
      );
    }) }),
    /* @__PURE__ */ h.jsx("div", { className: "pb-3", children: /* @__PURE__ */ h.jsx(y, {}) })
  ] });
}, dc = {
  timeOut: 5e3,
  extendedTimeOut: 1e3,
  closeButton: !0,
  progressBar: !0
}, al = class al {
  constructor() {
  }
  static getInstance() {
    return al.instance || (al.instance = new al()), al.instance;
  }
  /**
   *  toastr 
   */
  getToastr() {
    return window.toastr || null;
  }
  /**
   * 
   */
  success(r, i = "Engram", l = {}) {
    const s = this.getToastr();
    s ? s.success(r, i, { ...dc, ...l }) : console.log(`[Engram] SUCCESS: ${i} - ${r}`), Ve.info("Notification", `Success: ${r}`);
  }
  /**
   * 
   */
  info(r, i = "Engram", l = {}) {
    const s = this.getToastr();
    s ? s.info(r, i, { ...dc, ...l }) : console.log(`[Engram] INFO: ${i} - ${r}`), Ve.info("Notification", `Info: ${r}`);
  }
  /**
   * 
   */
  warning(r, i = "Engram", l = {}) {
    const s = this.getToastr();
    s ? s.warning(r, i, { ...dc, ...l }) : console.warn(`[Engram] WARNING: ${i} - ${r}`), Ve.warn("Notification", `Warning: ${r}`);
  }
  /**
   * 
   */
  error(r, i = "Engram", l = {}) {
    const s = this.getToastr();
    s ? s.error(r, i, { ...dc, timeOut: 8e3, ...l }) : console.error(`[Engram] ERROR: ${i} - ${r}`), Ve.error("Notification", `Error: ${r}`);
  }
  /**
   * 
   * @param message 
   * @param title 
   * @param onCancel 
   * @returns toastr 
   */
  running(r, i = "Engram", l) {
    const s = this.getToastr();
    if (s) {
      const c = l ? `${r} <small style="opacity:0.7">()</small>` : r;
      return s.info(c, i, {
        timeOut: 2e4,
        //  20 
        extendedTimeOut: 0,
        // 
        closeButton: !1,
        // 
        progressBar: !0,
        // 
        tapToDismiss: !!l,
        // 
        onclick: l ? () => {
          Ve.info("Notification", ""), l();
        } : void 0,
        escapeHtml: !1
        //  HTML
      });
    } else
      return console.log(`[Engram] RUNNING: ${i} - ${r}`), null;
  }
  /**
   *  toastr 
   */
  remove(r) {
    const i = this.getToastr();
    i && r && i.remove(r);
  }
  /**
   * 
   */
  clear() {
    const r = this.getToastr();
    r && r.clear();
  }
};
dt(al, "instance");
let Ah = al;
const un = Ah.getInstance(), ao = {
  owner: "shiyue137mh-netizen",
  repo: "Engram",
  branch: "master"
}, hc = My.version;
let js = null, Ts = null;
function nh(n, r) {
  const i = n.split(".").map(Number), l = r.split(".").map(Number);
  for (let s = 0; s < Math.max(i.length, l.length); s++) {
    const c = i[s] || 0, f = l[s] || 0;
    if (c > f) return 1;
    if (c < f) return -1;
  }
  return 0;
}
class il {
  /**
   * 
   */
  static getCurrentVersion() {
    return hc;
  }
  /**
   *  GitHub 
   */
  static async getLatestVersion() {
    if (js)
      return js;
    try {
      const r = `https://raw.githubusercontent.com/${ao.owner}/${ao.repo}/${ao.branch}/manifest.json`, i = await fetch(r);
      return i.ok ? (js = (await i.json()).version || null, js) : null;
    } catch {
      return null;
    }
  }
  /**
   * 
   */
  static async hasUpdate() {
    const r = await this.getLatestVersion();
    return r ? nh(r, hc) > 0 : !1;
  }
  /**
   * 
   */
  static async getChangelog() {
    if (Ts)
      return Ts;
    try {
      const r = `https://raw.githubusercontent.com/${ao.owner}/${ao.repo}/${ao.branch}/CHANGELOG.md`, i = await fetch(r);
      return i.ok ? (Ts = await i.text(), Ts) : (console.warn("[Engram] UpdateService: ", i.status), un.warning(`: ${i.status}`, ""), null);
    } catch (r) {
      return console.error("[Engram] UpdateService: ", r), un.error("", ""), null;
    }
  }
  /**
   * 
   */
  static getReadVersion() {
    try {
      return nt.get("lastReadVersion") || "0.0.0";
    } catch {
      return "0.0.0";
    }
  }
  /**
   * 
   */
  static async markAsRead(r) {
    const i = r || await this.getLatestVersion() || hc;
    try {
      nt.set("lastReadVersion", i), console.debug("[Engram] UpdateService: ", i);
    } catch (l) {
      console.error("[Engram] UpdateService: ", l);
    }
  }
  /**
   * 
   */
  static async hasUnreadUpdate() {
    const r = await this.getLatestVersion();
    if (!r || nh(r, hc) <= 0)
      return !1;
    const i = this.getReadVersion();
    return nh(r, i) > 0;
  }
  /**
   * 
   */
  static clearCache() {
    js = null, Ts = null;
  }
}
function c3(n, r) {
  const i = {};
  return (n[n.length - 1] === "" ? [...n, ""] : n).join(
    (i.padRight ? " " : "") + "," + (i.padLeft === !1 ? "" : " ")
  ).trim();
}
const f3 = /^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u, d3 = /^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u, h3 = {};
function i1(n, r) {
  return (h3.jsx ? d3 : f3).test(n);
}
const m3 = /[ \t\n\f\r]/g;
function p3(n) {
  return typeof n == "object" ? n.type === "text" ? a1(n.value) : !1 : a1(n);
}
function a1(n) {
  return n.replace(m3, "") === "";
}
class Ys {
  /**
   * @param {SchemaType['property']} property
   *   Property.
   * @param {SchemaType['normal']} normal
   *   Normal.
   * @param {Space | undefined} [space]
   *   Space.
   * @returns
   *   Schema.
   */
  constructor(r, i, l) {
    this.normal = i, this.property = r, l && (this.space = l);
  }
}
Ys.prototype.normal = {};
Ys.prototype.property = {};
Ys.prototype.space = void 0;
function Oy(n, r) {
  const i = {}, l = {};
  for (const s of n)
    Object.assign(i, s.property), Object.assign(l, s.normal);
  return new Ys(i, l, r);
}
function zh(n) {
  return n.toLowerCase();
}
class Jn {
  /**
   * @param {string} property
   *   Property.
   * @param {string} attribute
   *   Attribute.
   * @returns
   *   Info.
   */
  constructor(r, i) {
    this.attribute = i, this.property = r;
  }
}
Jn.prototype.attribute = "";
Jn.prototype.booleanish = !1;
Jn.prototype.boolean = !1;
Jn.prototype.commaOrSpaceSeparated = !1;
Jn.prototype.commaSeparated = !1;
Jn.prototype.defined = !1;
Jn.prototype.mustUseProperty = !1;
Jn.prototype.number = !1;
Jn.prototype.overloadedBoolean = !1;
Jn.prototype.property = "";
Jn.prototype.spaceSeparated = !1;
Jn.prototype.space = void 0;
let g3 = 0;
const ot = cl(), sn = cl(), Mh = cl(), je = cl(), Lt = cl(), go = cl(), ur = cl();
function cl() {
  return 2 ** ++g3;
}
const Oh = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  boolean: ot,
  booleanish: sn,
  commaOrSpaceSeparated: ur,
  commaSeparated: go,
  number: je,
  overloadedBoolean: Mh,
  spaceSeparated: Lt
}, Symbol.toStringTag, { value: "Module" })), rh = (
  /** @type {ReadonlyArray<keyof typeof types>} */
  Object.keys(Oh)
);
class om extends Jn {
  /**
   * @constructor
   * @param {string} property
   *   Property.
   * @param {string} attribute
   *   Attribute.
   * @param {number | null | undefined} [mask]
   *   Mask.
   * @param {Space | undefined} [space]
   *   Space.
   * @returns
   *   Info.
   */
  constructor(r, i, l, s) {
    let c = -1;
    if (super(r, i), l1(this, "space", s), typeof l == "number")
      for (; ++c < rh.length; ) {
        const f = rh[c];
        l1(this, rh[c], (l & Oh[f]) === Oh[f]);
      }
  }
}
om.prototype.defined = !0;
function l1(n, r, i) {
  i && (n[r] = i);
}
function wo(n) {
  const r = {}, i = {};
  for (const [l, s] of Object.entries(n.properties)) {
    const c = new om(
      l,
      n.transform(n.attributes || {}, l),
      s,
      n.space
    );
    n.mustUseProperty && n.mustUseProperty.includes(l) && (c.mustUseProperty = !0), r[l] = c, i[zh(l)] = l, i[zh(c.attribute)] = l;
  }
  return new Ys(r, i, n.space);
}
const Dy = wo({
  properties: {
    ariaActiveDescendant: null,
    ariaAtomic: sn,
    ariaAutoComplete: null,
    ariaBusy: sn,
    ariaChecked: sn,
    ariaColCount: je,
    ariaColIndex: je,
    ariaColSpan: je,
    ariaControls: Lt,
    ariaCurrent: null,
    ariaDescribedBy: Lt,
    ariaDetails: null,
    ariaDisabled: sn,
    ariaDropEffect: Lt,
    ariaErrorMessage: null,
    ariaExpanded: sn,
    ariaFlowTo: Lt,
    ariaGrabbed: sn,
    ariaHasPopup: null,
    ariaHidden: sn,
    ariaInvalid: null,
    ariaKeyShortcuts: null,
    ariaLabel: null,
    ariaLabelledBy: Lt,
    ariaLevel: je,
    ariaLive: null,
    ariaModal: sn,
    ariaMultiLine: sn,
    ariaMultiSelectable: sn,
    ariaOrientation: null,
    ariaOwns: Lt,
    ariaPlaceholder: null,
    ariaPosInSet: je,
    ariaPressed: sn,
    ariaReadOnly: sn,
    ariaRelevant: null,
    ariaRequired: sn,
    ariaRoleDescription: Lt,
    ariaRowCount: je,
    ariaRowIndex: je,
    ariaRowSpan: je,
    ariaSelected: sn,
    ariaSetSize: je,
    ariaSort: null,
    ariaValueMax: je,
    ariaValueMin: je,
    ariaValueNow: je,
    ariaValueText: null,
    role: null
  },
  transform(n, r) {
    return r === "role" ? r : "aria-" + r.slice(4).toLowerCase();
  }
});
function Ry(n, r) {
  return r in n ? n[r] : r;
}
function Ly(n, r) {
  return Ry(n, r.toLowerCase());
}
const y3 = wo({
  attributes: {
    acceptcharset: "accept-charset",
    classname: "class",
    htmlfor: "for",
    httpequiv: "http-equiv"
  },
  mustUseProperty: ["checked", "multiple", "muted", "selected"],
  properties: {
    // Standard Properties.
    abbr: null,
    accept: go,
    acceptCharset: Lt,
    accessKey: Lt,
    action: null,
    allow: null,
    allowFullScreen: ot,
    allowPaymentRequest: ot,
    allowUserMedia: ot,
    alt: null,
    as: null,
    async: ot,
    autoCapitalize: null,
    autoComplete: Lt,
    autoFocus: ot,
    autoPlay: ot,
    blocking: Lt,
    capture: null,
    charSet: null,
    checked: ot,
    cite: null,
    className: Lt,
    cols: je,
    colSpan: null,
    content: null,
    contentEditable: sn,
    controls: ot,
    controlsList: Lt,
    coords: je | go,
    crossOrigin: null,
    data: null,
    dateTime: null,
    decoding: null,
    default: ot,
    defer: ot,
    dir: null,
    dirName: null,
    disabled: ot,
    download: Mh,
    draggable: sn,
    encType: null,
    enterKeyHint: null,
    fetchPriority: null,
    form: null,
    formAction: null,
    formEncType: null,
    formMethod: null,
    formNoValidate: ot,
    formTarget: null,
    headers: Lt,
    height: je,
    hidden: Mh,
    high: je,
    href: null,
    hrefLang: null,
    htmlFor: Lt,
    httpEquiv: Lt,
    id: null,
    imageSizes: null,
    imageSrcSet: null,
    inert: ot,
    inputMode: null,
    integrity: null,
    is: null,
    isMap: ot,
    itemId: null,
    itemProp: Lt,
    itemRef: Lt,
    itemScope: ot,
    itemType: Lt,
    kind: null,
    label: null,
    lang: null,
    language: null,
    list: null,
    loading: null,
    loop: ot,
    low: je,
    manifest: null,
    max: null,
    maxLength: je,
    media: null,
    method: null,
    min: null,
    minLength: je,
    multiple: ot,
    muted: ot,
    name: null,
    nonce: null,
    noModule: ot,
    noValidate: ot,
    onAbort: null,
    onAfterPrint: null,
    onAuxClick: null,
    onBeforeMatch: null,
    onBeforePrint: null,
    onBeforeToggle: null,
    onBeforeUnload: null,
    onBlur: null,
    onCancel: null,
    onCanPlay: null,
    onCanPlayThrough: null,
    onChange: null,
    onClick: null,
    onClose: null,
    onContextLost: null,
    onContextMenu: null,
    onContextRestored: null,
    onCopy: null,
    onCueChange: null,
    onCut: null,
    onDblClick: null,
    onDrag: null,
    onDragEnd: null,
    onDragEnter: null,
    onDragExit: null,
    onDragLeave: null,
    onDragOver: null,
    onDragStart: null,
    onDrop: null,
    onDurationChange: null,
    onEmptied: null,
    onEnded: null,
    onError: null,
    onFocus: null,
    onFormData: null,
    onHashChange: null,
    onInput: null,
    onInvalid: null,
    onKeyDown: null,
    onKeyPress: null,
    onKeyUp: null,
    onLanguageChange: null,
    onLoad: null,
    onLoadedData: null,
    onLoadedMetadata: null,
    onLoadEnd: null,
    onLoadStart: null,
    onMessage: null,
    onMessageError: null,
    onMouseDown: null,
    onMouseEnter: null,
    onMouseLeave: null,
    onMouseMove: null,
    onMouseOut: null,
    onMouseOver: null,
    onMouseUp: null,
    onOffline: null,
    onOnline: null,
    onPageHide: null,
    onPageShow: null,
    onPaste: null,
    onPause: null,
    onPlay: null,
    onPlaying: null,
    onPopState: null,
    onProgress: null,
    onRateChange: null,
    onRejectionHandled: null,
    onReset: null,
    onResize: null,
    onScroll: null,
    onScrollEnd: null,
    onSecurityPolicyViolation: null,
    onSeeked: null,
    onSeeking: null,
    onSelect: null,
    onSlotChange: null,
    onStalled: null,
    onStorage: null,
    onSubmit: null,
    onSuspend: null,
    onTimeUpdate: null,
    onToggle: null,
    onUnhandledRejection: null,
    onUnload: null,
    onVolumeChange: null,
    onWaiting: null,
    onWheel: null,
    open: ot,
    optimum: je,
    pattern: null,
    ping: Lt,
    placeholder: null,
    playsInline: ot,
    popover: null,
    popoverTarget: null,
    popoverTargetAction: null,
    poster: null,
    preload: null,
    readOnly: ot,
    referrerPolicy: null,
    rel: Lt,
    required: ot,
    reversed: ot,
    rows: je,
    rowSpan: je,
    sandbox: Lt,
    scope: null,
    scoped: ot,
    seamless: ot,
    selected: ot,
    shadowRootClonable: ot,
    shadowRootDelegatesFocus: ot,
    shadowRootMode: null,
    shape: null,
    size: je,
    sizes: null,
    slot: null,
    span: je,
    spellCheck: sn,
    src: null,
    srcDoc: null,
    srcLang: null,
    srcSet: null,
    start: je,
    step: null,
    style: null,
    tabIndex: je,
    target: null,
    title: null,
    translate: null,
    type: null,
    typeMustMatch: ot,
    useMap: null,
    value: sn,
    width: je,
    wrap: null,
    writingSuggestions: null,
    // Legacy.
    // See: https://html.spec.whatwg.org/#other-elements,-attributes-and-apis
    align: null,
    // Several. Use CSS `text-align` instead,
    aLink: null,
    // `<body>`. Use CSS `a:active {color}` instead
    archive: Lt,
    // `<object>`. List of URIs to archives
    axis: null,
    // `<td>` and `<th>`. Use `scope` on `<th>`
    background: null,
    // `<body>`. Use CSS `background-image` instead
    bgColor: null,
    // `<body>` and table elements. Use CSS `background-color` instead
    border: je,
    // `<table>`. Use CSS `border-width` instead,
    borderColor: null,
    // `<table>`. Use CSS `border-color` instead,
    bottomMargin: je,
    // `<body>`
    cellPadding: null,
    // `<table>`
    cellSpacing: null,
    // `<table>`
    char: null,
    // Several table elements. When `align=char`, sets the character to align on
    charOff: null,
    // Several table elements. When `char`, offsets the alignment
    classId: null,
    // `<object>`
    clear: null,
    // `<br>`. Use CSS `clear` instead
    code: null,
    // `<object>`
    codeBase: null,
    // `<object>`
    codeType: null,
    // `<object>`
    color: null,
    // `<font>` and `<hr>`. Use CSS instead
    compact: ot,
    // Lists. Use CSS to reduce space between items instead
    declare: ot,
    // `<object>`
    event: null,
    // `<script>`
    face: null,
    // `<font>`. Use CSS instead
    frame: null,
    // `<table>`
    frameBorder: null,
    // `<iframe>`. Use CSS `border` instead
    hSpace: je,
    // `<img>` and `<object>`
    leftMargin: je,
    // `<body>`
    link: null,
    // `<body>`. Use CSS `a:link {color: *}` instead
    longDesc: null,
    // `<frame>`, `<iframe>`, and `<img>`. Use an `<a>`
    lowSrc: null,
    // `<img>`. Use a `<picture>`
    marginHeight: je,
    // `<body>`
    marginWidth: je,
    // `<body>`
    noResize: ot,
    // `<frame>`
    noHref: ot,
    // `<area>`. Use no href instead of an explicit `nohref`
    noShade: ot,
    // `<hr>`. Use background-color and height instead of borders
    noWrap: ot,
    // `<td>` and `<th>`
    object: null,
    // `<applet>`
    profile: null,
    // `<head>`
    prompt: null,
    // `<isindex>`
    rev: null,
    // `<link>`
    rightMargin: je,
    // `<body>`
    rules: null,
    // `<table>`
    scheme: null,
    // `<meta>`
    scrolling: sn,
    // `<frame>`. Use overflow in the child context
    standby: null,
    // `<object>`
    summary: null,
    // `<table>`
    text: null,
    // `<body>`. Use CSS `color` instead
    topMargin: je,
    // `<body>`
    valueType: null,
    // `<param>`
    version: null,
    // `<html>`. Use a doctype.
    vAlign: null,
    // Several. Use CSS `vertical-align` instead
    vLink: null,
    // `<body>`. Use CSS `a:visited {color}` instead
    vSpace: je,
    // `<img>` and `<object>`
    // Non-standard Properties.
    allowTransparency: null,
    autoCorrect: null,
    autoSave: null,
    disablePictureInPicture: ot,
    disableRemotePlayback: ot,
    prefix: null,
    property: null,
    results: je,
    security: null,
    unselectable: null
  },
  space: "html",
  transform: Ly
}), b3 = wo({
  attributes: {
    accentHeight: "accent-height",
    alignmentBaseline: "alignment-baseline",
    arabicForm: "arabic-form",
    baselineShift: "baseline-shift",
    capHeight: "cap-height",
    className: "class",
    clipPath: "clip-path",
    clipRule: "clip-rule",
    colorInterpolation: "color-interpolation",
    colorInterpolationFilters: "color-interpolation-filters",
    colorProfile: "color-profile",
    colorRendering: "color-rendering",
    crossOrigin: "crossorigin",
    dataType: "datatype",
    dominantBaseline: "dominant-baseline",
    enableBackground: "enable-background",
    fillOpacity: "fill-opacity",
    fillRule: "fill-rule",
    floodColor: "flood-color",
    floodOpacity: "flood-opacity",
    fontFamily: "font-family",
    fontSize: "font-size",
    fontSizeAdjust: "font-size-adjust",
    fontStretch: "font-stretch",
    fontStyle: "font-style",
    fontVariant: "font-variant",
    fontWeight: "font-weight",
    glyphName: "glyph-name",
    glyphOrientationHorizontal: "glyph-orientation-horizontal",
    glyphOrientationVertical: "glyph-orientation-vertical",
    hrefLang: "hreflang",
    horizAdvX: "horiz-adv-x",
    horizOriginX: "horiz-origin-x",
    horizOriginY: "horiz-origin-y",
    imageRendering: "image-rendering",
    letterSpacing: "letter-spacing",
    lightingColor: "lighting-color",
    markerEnd: "marker-end",
    markerMid: "marker-mid",
    markerStart: "marker-start",
    navDown: "nav-down",
    navDownLeft: "nav-down-left",
    navDownRight: "nav-down-right",
    navLeft: "nav-left",
    navNext: "nav-next",
    navPrev: "nav-prev",
    navRight: "nav-right",
    navUp: "nav-up",
    navUpLeft: "nav-up-left",
    navUpRight: "nav-up-right",
    onAbort: "onabort",
    onActivate: "onactivate",
    onAfterPrint: "onafterprint",
    onBeforePrint: "onbeforeprint",
    onBegin: "onbegin",
    onCancel: "oncancel",
    onCanPlay: "oncanplay",
    onCanPlayThrough: "oncanplaythrough",
    onChange: "onchange",
    onClick: "onclick",
    onClose: "onclose",
    onCopy: "oncopy",
    onCueChange: "oncuechange",
    onCut: "oncut",
    onDblClick: "ondblclick",
    onDrag: "ondrag",
    onDragEnd: "ondragend",
    onDragEnter: "ondragenter",
    onDragExit: "ondragexit",
    onDragLeave: "ondragleave",
    onDragOver: "ondragover",
    onDragStart: "ondragstart",
    onDrop: "ondrop",
    onDurationChange: "ondurationchange",
    onEmptied: "onemptied",
    onEnd: "onend",
    onEnded: "onended",
    onError: "onerror",
    onFocus: "onfocus",
    onFocusIn: "onfocusin",
    onFocusOut: "onfocusout",
    onHashChange: "onhashchange",
    onInput: "oninput",
    onInvalid: "oninvalid",
    onKeyDown: "onkeydown",
    onKeyPress: "onkeypress",
    onKeyUp: "onkeyup",
    onLoad: "onload",
    onLoadedData: "onloadeddata",
    onLoadedMetadata: "onloadedmetadata",
    onLoadStart: "onloadstart",
    onMessage: "onmessage",
    onMouseDown: "onmousedown",
    onMouseEnter: "onmouseenter",
    onMouseLeave: "onmouseleave",
    onMouseMove: "onmousemove",
    onMouseOut: "onmouseout",
    onMouseOver: "onmouseover",
    onMouseUp: "onmouseup",
    onMouseWheel: "onmousewheel",
    onOffline: "onoffline",
    onOnline: "ononline",
    onPageHide: "onpagehide",
    onPageShow: "onpageshow",
    onPaste: "onpaste",
    onPause: "onpause",
    onPlay: "onplay",
    onPlaying: "onplaying",
    onPopState: "onpopstate",
    onProgress: "onprogress",
    onRateChange: "onratechange",
    onRepeat: "onrepeat",
    onReset: "onreset",
    onResize: "onresize",
    onScroll: "onscroll",
    onSeeked: "onseeked",
    onSeeking: "onseeking",
    onSelect: "onselect",
    onShow: "onshow",
    onStalled: "onstalled",
    onStorage: "onstorage",
    onSubmit: "onsubmit",
    onSuspend: "onsuspend",
    onTimeUpdate: "ontimeupdate",
    onToggle: "ontoggle",
    onUnload: "onunload",
    onVolumeChange: "onvolumechange",
    onWaiting: "onwaiting",
    onZoom: "onzoom",
    overlinePosition: "overline-position",
    overlineThickness: "overline-thickness",
    paintOrder: "paint-order",
    panose1: "panose-1",
    pointerEvents: "pointer-events",
    referrerPolicy: "referrerpolicy",
    renderingIntent: "rendering-intent",
    shapeRendering: "shape-rendering",
    stopColor: "stop-color",
    stopOpacity: "stop-opacity",
    strikethroughPosition: "strikethrough-position",
    strikethroughThickness: "strikethrough-thickness",
    strokeDashArray: "stroke-dasharray",
    strokeDashOffset: "stroke-dashoffset",
    strokeLineCap: "stroke-linecap",
    strokeLineJoin: "stroke-linejoin",
    strokeMiterLimit: "stroke-miterlimit",
    strokeOpacity: "stroke-opacity",
    strokeWidth: "stroke-width",
    tabIndex: "tabindex",
    textAnchor: "text-anchor",
    textDecoration: "text-decoration",
    textRendering: "text-rendering",
    transformOrigin: "transform-origin",
    typeOf: "typeof",
    underlinePosition: "underline-position",
    underlineThickness: "underline-thickness",
    unicodeBidi: "unicode-bidi",
    unicodeRange: "unicode-range",
    unitsPerEm: "units-per-em",
    vAlphabetic: "v-alphabetic",
    vHanging: "v-hanging",
    vIdeographic: "v-ideographic",
    vMathematical: "v-mathematical",
    vectorEffect: "vector-effect",
    vertAdvY: "vert-adv-y",
    vertOriginX: "vert-origin-x",
    vertOriginY: "vert-origin-y",
    wordSpacing: "word-spacing",
    writingMode: "writing-mode",
    xHeight: "x-height",
    // These were camelcased in Tiny. Now lowercased in SVG 2
    playbackOrder: "playbackorder",
    timelineBegin: "timelinebegin"
  },
  properties: {
    about: ur,
    accentHeight: je,
    accumulate: null,
    additive: null,
    alignmentBaseline: null,
    alphabetic: je,
    amplitude: je,
    arabicForm: null,
    ascent: je,
    attributeName: null,
    attributeType: null,
    azimuth: je,
    bandwidth: null,
    baselineShift: null,
    baseFrequency: null,
    baseProfile: null,
    bbox: null,
    begin: null,
    bias: je,
    by: null,
    calcMode: null,
    capHeight: je,
    className: Lt,
    clip: null,
    clipPath: null,
    clipPathUnits: null,
    clipRule: null,
    color: null,
    colorInterpolation: null,
    colorInterpolationFilters: null,
    colorProfile: null,
    colorRendering: null,
    content: null,
    contentScriptType: null,
    contentStyleType: null,
    crossOrigin: null,
    cursor: null,
    cx: null,
    cy: null,
    d: null,
    dataType: null,
    defaultAction: null,
    descent: je,
    diffuseConstant: je,
    direction: null,
    display: null,
    dur: null,
    divisor: je,
    dominantBaseline: null,
    download: ot,
    dx: null,
    dy: null,
    edgeMode: null,
    editable: null,
    elevation: je,
    enableBackground: null,
    end: null,
    event: null,
    exponent: je,
    externalResourcesRequired: null,
    fill: null,
    fillOpacity: je,
    fillRule: null,
    filter: null,
    filterRes: null,
    filterUnits: null,
    floodColor: null,
    floodOpacity: null,
    focusable: null,
    focusHighlight: null,
    fontFamily: null,
    fontSize: null,
    fontSizeAdjust: null,
    fontStretch: null,
    fontStyle: null,
    fontVariant: null,
    fontWeight: null,
    format: null,
    fr: null,
    from: null,
    fx: null,
    fy: null,
    g1: go,
    g2: go,
    glyphName: go,
    glyphOrientationHorizontal: null,
    glyphOrientationVertical: null,
    glyphRef: null,
    gradientTransform: null,
    gradientUnits: null,
    handler: null,
    hanging: je,
    hatchContentUnits: null,
    hatchUnits: null,
    height: null,
    href: null,
    hrefLang: null,
    horizAdvX: je,
    horizOriginX: je,
    horizOriginY: je,
    id: null,
    ideographic: je,
    imageRendering: null,
    initialVisibility: null,
    in: null,
    in2: null,
    intercept: je,
    k: je,
    k1: je,
    k2: je,
    k3: je,
    k4: je,
    kernelMatrix: ur,
    kernelUnitLength: null,
    keyPoints: null,
    // SEMI_COLON_SEPARATED
    keySplines: null,
    // SEMI_COLON_SEPARATED
    keyTimes: null,
    // SEMI_COLON_SEPARATED
    kerning: null,
    lang: null,
    lengthAdjust: null,
    letterSpacing: null,
    lightingColor: null,
    limitingConeAngle: je,
    local: null,
    markerEnd: null,
    markerMid: null,
    markerStart: null,
    markerHeight: null,
    markerUnits: null,
    markerWidth: null,
    mask: null,
    maskContentUnits: null,
    maskUnits: null,
    mathematical: null,
    max: null,
    media: null,
    mediaCharacterEncoding: null,
    mediaContentEncodings: null,
    mediaSize: je,
    mediaTime: null,
    method: null,
    min: null,
    mode: null,
    name: null,
    navDown: null,
    navDownLeft: null,
    navDownRight: null,
    navLeft: null,
    navNext: null,
    navPrev: null,
    navRight: null,
    navUp: null,
    navUpLeft: null,
    navUpRight: null,
    numOctaves: null,
    observer: null,
    offset: null,
    onAbort: null,
    onActivate: null,
    onAfterPrint: null,
    onBeforePrint: null,
    onBegin: null,
    onCancel: null,
    onCanPlay: null,
    onCanPlayThrough: null,
    onChange: null,
    onClick: null,
    onClose: null,
    onCopy: null,
    onCueChange: null,
    onCut: null,
    onDblClick: null,
    onDrag: null,
    onDragEnd: null,
    onDragEnter: null,
    onDragExit: null,
    onDragLeave: null,
    onDragOver: null,
    onDragStart: null,
    onDrop: null,
    onDurationChange: null,
    onEmptied: null,
    onEnd: null,
    onEnded: null,
    onError: null,
    onFocus: null,
    onFocusIn: null,
    onFocusOut: null,
    onHashChange: null,
    onInput: null,
    onInvalid: null,
    onKeyDown: null,
    onKeyPress: null,
    onKeyUp: null,
    onLoad: null,
    onLoadedData: null,
    onLoadedMetadata: null,
    onLoadStart: null,
    onMessage: null,
    onMouseDown: null,
    onMouseEnter: null,
    onMouseLeave: null,
    onMouseMove: null,
    onMouseOut: null,
    onMouseOver: null,
    onMouseUp: null,
    onMouseWheel: null,
    onOffline: null,
    onOnline: null,
    onPageHide: null,
    onPageShow: null,
    onPaste: null,
    onPause: null,
    onPlay: null,
    onPlaying: null,
    onPopState: null,
    onProgress: null,
    onRateChange: null,
    onRepeat: null,
    onReset: null,
    onResize: null,
    onScroll: null,
    onSeeked: null,
    onSeeking: null,
    onSelect: null,
    onShow: null,
    onStalled: null,
    onStorage: null,
    onSubmit: null,
    onSuspend: null,
    onTimeUpdate: null,
    onToggle: null,
    onUnload: null,
    onVolumeChange: null,
    onWaiting: null,
    onZoom: null,
    opacity: null,
    operator: null,
    order: null,
    orient: null,
    orientation: null,
    origin: null,
    overflow: null,
    overlay: null,
    overlinePosition: je,
    overlineThickness: je,
    paintOrder: null,
    panose1: null,
    path: null,
    pathLength: je,
    patternContentUnits: null,
    patternTransform: null,
    patternUnits: null,
    phase: null,
    ping: Lt,
    pitch: null,
    playbackOrder: null,
    pointerEvents: null,
    points: null,
    pointsAtX: je,
    pointsAtY: je,
    pointsAtZ: je,
    preserveAlpha: null,
    preserveAspectRatio: null,
    primitiveUnits: null,
    propagate: null,
    property: ur,
    r: null,
    radius: null,
    referrerPolicy: null,
    refX: null,
    refY: null,
    rel: ur,
    rev: ur,
    renderingIntent: null,
    repeatCount: null,
    repeatDur: null,
    requiredExtensions: ur,
    requiredFeatures: ur,
    requiredFonts: ur,
    requiredFormats: ur,
    resource: null,
    restart: null,
    result: null,
    rotate: null,
    rx: null,
    ry: null,
    scale: null,
    seed: null,
    shapeRendering: null,
    side: null,
    slope: null,
    snapshotTime: null,
    specularConstant: je,
    specularExponent: je,
    spreadMethod: null,
    spacing: null,
    startOffset: null,
    stdDeviation: null,
    stemh: null,
    stemv: null,
    stitchTiles: null,
    stopColor: null,
    stopOpacity: null,
    strikethroughPosition: je,
    strikethroughThickness: je,
    string: null,
    stroke: null,
    strokeDashArray: ur,
    strokeDashOffset: null,
    strokeLineCap: null,
    strokeLineJoin: null,
    strokeMiterLimit: je,
    strokeOpacity: je,
    strokeWidth: null,
    style: null,
    surfaceScale: je,
    syncBehavior: null,
    syncBehaviorDefault: null,
    syncMaster: null,
    syncTolerance: null,
    syncToleranceDefault: null,
    systemLanguage: ur,
    tabIndex: je,
    tableValues: null,
    target: null,
    targetX: je,
    targetY: je,
    textAnchor: null,
    textDecoration: null,
    textRendering: null,
    textLength: null,
    timelineBegin: null,
    title: null,
    transformBehavior: null,
    type: null,
    typeOf: ur,
    to: null,
    transform: null,
    transformOrigin: null,
    u1: null,
    u2: null,
    underlinePosition: je,
    underlineThickness: je,
    unicode: null,
    unicodeBidi: null,
    unicodeRange: null,
    unitsPerEm: je,
    values: null,
    vAlphabetic: je,
    vMathematical: je,
    vectorEffect: null,
    vHanging: je,
    vIdeographic: je,
    version: null,
    vertAdvY: je,
    vertOriginX: je,
    vertOriginY: je,
    viewBox: null,
    viewTarget: null,
    visibility: null,
    width: null,
    widths: null,
    wordSpacing: null,
    writingMode: null,
    x: null,
    x1: null,
    x2: null,
    xChannelSelector: null,
    xHeight: je,
    y: null,
    y1: null,
    y2: null,
    yChannelSelector: null,
    z: null,
    zoomAndPan: null
  },
  space: "svg",
  transform: Ry
}), By = wo({
  properties: {
    xLinkActuate: null,
    xLinkArcRole: null,
    xLinkHref: null,
    xLinkRole: null,
    xLinkShow: null,
    xLinkTitle: null,
    xLinkType: null
  },
  space: "xlink",
  transform(n, r) {
    return "xlink:" + r.slice(5).toLowerCase();
  }
}), Uy = wo({
  attributes: { xmlnsxlink: "xmlns:xlink" },
  properties: { xmlnsXLink: null, xmlns: null },
  space: "xmlns",
  transform: Ly
}), Iy = wo({
  properties: { xmlBase: null, xmlLang: null, xmlSpace: null },
  space: "xml",
  transform(n, r) {
    return "xml:" + r.slice(3).toLowerCase();
  }
}), x3 = {
  classId: "classID",
  dataType: "datatype",
  itemId: "itemID",
  strokeDashArray: "strokeDasharray",
  strokeDashOffset: "strokeDashoffset",
  strokeLineCap: "strokeLinecap",
  strokeLineJoin: "strokeLinejoin",
  strokeMiterLimit: "strokeMiterlimit",
  typeOf: "typeof",
  xLinkActuate: "xlinkActuate",
  xLinkArcRole: "xlinkArcrole",
  xLinkHref: "xlinkHref",
  xLinkRole: "xlinkRole",
  xLinkShow: "xlinkShow",
  xLinkTitle: "xlinkTitle",
  xLinkType: "xlinkType",
  xmlnsXLink: "xmlnsXlink"
}, v3 = /[A-Z]/g, o1 = /-[a-z]/g, S3 = /^data[-\w.:]+$/i;
function w3(n, r) {
  const i = zh(r);
  let l = r, s = Jn;
  if (i in n.normal)
    return n.property[n.normal[i]];
  if (i.length > 4 && i.slice(0, 4) === "data" && S3.test(r)) {
    if (r.charAt(4) === "-") {
      const c = r.slice(5).replace(o1, C3);
      l = "data" + c.charAt(0).toUpperCase() + c.slice(1);
    } else {
      const c = r.slice(4);
      if (!o1.test(c)) {
        let f = c.replace(v3, k3);
        f.charAt(0) !== "-" && (f = "-" + f), r = "data" + f;
      }
    }
    s = om;
  }
  return new s(l, r);
}
function k3(n) {
  return "-" + n.toLowerCase();
}
function C3(n) {
  return n.charAt(1).toUpperCase();
}
const E3 = Oy([Dy, y3, By, Uy, Iy], "html"), sm = Oy([Dy, b3, By, Uy, Iy], "svg");
function _3(n) {
  return n.join(" ").trim();
}
var lo = {}, ih, s1;
function j3() {
  if (s1) return ih;
  s1 = 1;
  var n = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g, r = /\n/g, i = /^\s*/, l = /^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/, s = /^:\s*/, c = /^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/, f = /^[;\s]*/, g = /^\s+|\s+$/g, y = `
`, b = "/", S = "*", x = "", _ = "comment", E = "declaration";
  function N(G, D) {
    if (typeof G != "string")
      throw new TypeError("First argument must be a string");
    if (!G) return [];
    D = D || {};
    var ne = 1, ie = 1;
    function _e(Me) {
      var ke = Me.match(r);
      ke && (ne += ke.length);
      var ee = Me.lastIndexOf(y);
      ie = ~ee ? Me.length - ee : ie + Me.length;
    }
    function we() {
      var Me = { line: ne, column: ie };
      return function(ke) {
        return ke.position = new I(Me), He(), ke;
      };
    }
    function I(Me) {
      this.start = Me, this.end = { line: ne, column: ie }, this.source = D.source;
    }
    I.prototype.content = G;
    function J(Me) {
      var ke = new Error(
        D.source + ":" + ne + ":" + ie + ": " + Me
      );
      if (ke.reason = Me, ke.filename = D.source, ke.line = ne, ke.column = ie, ke.source = G, !D.silent) throw ke;
    }
    function De(Me) {
      var ke = Me.exec(G);
      if (ke) {
        var ee = ke[0];
        return _e(ee), G = G.slice(ee.length), ke;
      }
    }
    function He() {
      De(i);
    }
    function W(Me) {
      var ke;
      for (Me = Me || []; ke = Q(); )
        ke !== !1 && Me.push(ke);
      return Me;
    }
    function Q() {
      var Me = we();
      if (!(b != G.charAt(0) || S != G.charAt(1))) {
        for (var ke = 2; x != G.charAt(ke) && (S != G.charAt(ke) || b != G.charAt(ke + 1)); )
          ++ke;
        if (ke += 2, x === G.charAt(ke - 1))
          return J("End of comment missing");
        var ee = G.slice(2, ke - 2);
        return ie += 2, _e(ee), G = G.slice(ke), ie += 2, Me({
          type: _,
          comment: ee
        });
      }
    }
    function ye() {
      var Me = we(), ke = De(l);
      if (ke) {
        if (Q(), !De(s)) return J("property missing ':'");
        var ee = De(c), ve = Me({
          type: E,
          property: U(ke[0].replace(n, x)),
          value: ee ? U(ee[0].replace(n, x)) : x
        });
        return De(f), ve;
      }
    }
    function Be() {
      var Me = [];
      W(Me);
      for (var ke; ke = ye(); )
        ke !== !1 && (Me.push(ke), W(Me));
      return Me;
    }
    return He(), Be();
  }
  function U(G) {
    return G ? G.replace(g, x) : x;
  }
  return ih = N, ih;
}
var u1;
function T3() {
  if (u1) return lo;
  u1 = 1;
  var n = lo && lo.__importDefault || function(l) {
    return l && l.__esModule ? l : { default: l };
  };
  Object.defineProperty(lo, "__esModule", { value: !0 }), lo.default = i;
  const r = n(j3());
  function i(l, s) {
    let c = null;
    if (!l || typeof l != "string")
      return c;
    const f = (0, r.default)(l), g = typeof s == "function";
    return f.forEach((y) => {
      if (y.type !== "declaration")
        return;
      const { property: b, value: S } = y;
      g ? s(b, S, y) : S && (c = c || {}, c[b] = S);
    }), c;
  }
  return lo;
}
var Ns = {}, c1;
function N3() {
  if (c1) return Ns;
  c1 = 1, Object.defineProperty(Ns, "__esModule", { value: !0 }), Ns.camelCase = void 0;
  var n = /^--[a-zA-Z0-9_-]+$/, r = /-([a-z])/g, i = /^[^-]+$/, l = /^-(webkit|moz|ms|o|khtml)-/, s = /^-(ms)-/, c = function(b) {
    return !b || i.test(b) || n.test(b);
  }, f = function(b, S) {
    return S.toUpperCase();
  }, g = function(b, S) {
    return "".concat(S, "-");
  }, y = function(b, S) {
    return S === void 0 && (S = {}), c(b) ? b : (b = b.toLowerCase(), S.reactCompat ? b = b.replace(s, g) : b = b.replace(l, g), b.replace(r, f));
  };
  return Ns.camelCase = y, Ns;
}
var As, f1;
function A3() {
  if (f1) return As;
  f1 = 1;
  var n = As && As.__importDefault || function(s) {
    return s && s.__esModule ? s : { default: s };
  }, r = n(T3()), i = N3();
  function l(s, c) {
    var f = {};
    return !s || typeof s != "string" || (0, r.default)(s, function(g, y) {
      g && y && (f[(0, i.camelCase)(g, c)] = y);
    }), f;
  }
  return l.default = l, As = l, As;
}
var z3 = A3();
const M3 = /* @__PURE__ */ ul(z3), qy = Hy("end"), um = Hy("start");
function Hy(n) {
  return r;
  function r(i) {
    const l = i && i.position && i.position[n] || {};
    if (typeof l.line == "number" && l.line > 0 && typeof l.column == "number" && l.column > 0)
      return {
        line: l.line,
        column: l.column,
        offset: typeof l.offset == "number" && l.offset > -1 ? l.offset : void 0
      };
  }
}
function O3(n) {
  const r = um(n), i = qy(n);
  if (r && i)
    return { start: r, end: i };
}
function Rs(n) {
  return !n || typeof n != "object" ? "" : "position" in n || "type" in n ? d1(n.position) : "start" in n || "end" in n ? d1(n) : "line" in n || "column" in n ? Dh(n) : "";
}
function Dh(n) {
  return h1(n && n.line) + ":" + h1(n && n.column);
}
function d1(n) {
  return Dh(n && n.start) + "-" + Dh(n && n.end);
}
function h1(n) {
  return n && typeof n == "number" ? n : 1;
}
class Dn extends Error {
  /**
   * Create a message for `reason`.
   *
   * >  **Note**: also has obsolete signatures.
   *
   * @overload
   * @param {string} reason
   * @param {Options | null | undefined} [options]
   * @returns
   *
   * @overload
   * @param {string} reason
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {string} reason
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {string} reason
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @param {Error | VFileMessage | string} causeOrReason
   *   Reason for message, should use markdown.
   * @param {Node | NodeLike | Options | Point | Position | string | null | undefined} [optionsOrParentOrPlace]
   *   Configuration (optional).
   * @param {string | null | undefined} [origin]
   *   Place in code where the message originates (example:
   *   `'my-package:my-rule'` or `'my-rule'`).
   * @returns
   *   Instance of `VFileMessage`.
   */
  // eslint-disable-next-line complexity
  constructor(r, i, l) {
    super(), typeof i == "string" && (l = i, i = void 0);
    let s = "", c = {}, f = !1;
    if (i && ("line" in i && "column" in i ? c = { place: i } : "start" in i && "end" in i ? c = { place: i } : "type" in i ? c = {
      ancestors: [i],
      place: i.position
    } : c = { ...i }), typeof r == "string" ? s = r : !c.cause && r && (f = !0, s = r.message, c.cause = r), !c.ruleId && !c.source && typeof l == "string") {
      const y = l.indexOf(":");
      y === -1 ? c.ruleId = l : (c.source = l.slice(0, y), c.ruleId = l.slice(y + 1));
    }
    if (!c.place && c.ancestors && c.ancestors) {
      const y = c.ancestors[c.ancestors.length - 1];
      y && (c.place = y.position);
    }
    const g = c.place && "start" in c.place ? c.place.start : c.place;
    this.ancestors = c.ancestors || void 0, this.cause = c.cause || void 0, this.column = g ? g.column : void 0, this.fatal = void 0, this.file = "", this.message = s, this.line = g ? g.line : void 0, this.name = Rs(c.place) || "1:1", this.place = c.place || void 0, this.reason = this.message, this.ruleId = c.ruleId || void 0, this.source = c.source || void 0, this.stack = f && c.cause && typeof c.cause.stack == "string" ? c.cause.stack : "", this.actual = void 0, this.expected = void 0, this.note = void 0, this.url = void 0;
  }
}
Dn.prototype.file = "";
Dn.prototype.name = "";
Dn.prototype.reason = "";
Dn.prototype.message = "";
Dn.prototype.stack = "";
Dn.prototype.column = void 0;
Dn.prototype.line = void 0;
Dn.prototype.ancestors = void 0;
Dn.prototype.cause = void 0;
Dn.prototype.fatal = void 0;
Dn.prototype.place = void 0;
Dn.prototype.ruleId = void 0;
Dn.prototype.source = void 0;
const cm = {}.hasOwnProperty, D3 = /* @__PURE__ */ new Map(), R3 = /[A-Z]/g, L3 = /* @__PURE__ */ new Set(["table", "tbody", "thead", "tfoot", "tr"]), B3 = /* @__PURE__ */ new Set(["td", "th"]), Py = "https://github.com/syntax-tree/hast-util-to-jsx-runtime";
function U3(n, r) {
  if (!r || r.Fragment === void 0)
    throw new TypeError("Expected `Fragment` in options");
  const i = r.filePath || void 0;
  let l;
  if (r.development) {
    if (typeof r.jsxDEV != "function")
      throw new TypeError(
        "Expected `jsxDEV` in options when `development: true`"
      );
    l = G3(i, r.jsxDEV);
  } else {
    if (typeof r.jsx != "function")
      throw new TypeError("Expected `jsx` in production options");
    if (typeof r.jsxs != "function")
      throw new TypeError("Expected `jsxs` in production options");
    l = K3(i, r.jsx, r.jsxs);
  }
  const s = {
    Fragment: r.Fragment,
    ancestors: [],
    components: r.components || {},
    create: l,
    elementAttributeNameCase: r.elementAttributeNameCase || "react",
    evaluater: r.createEvaluater ? r.createEvaluater() : void 0,
    filePath: i,
    ignoreInvalidStyle: r.ignoreInvalidStyle || !1,
    passKeys: r.passKeys !== !1,
    passNode: r.passNode || !1,
    schema: r.space === "svg" ? sm : E3,
    stylePropertyNameCase: r.stylePropertyNameCase || "dom",
    tableCellAlignToStyle: r.tableCellAlignToStyle !== !1
  }, c = Fy(s, n, void 0);
  return c && typeof c != "string" ? c : s.create(
    n,
    s.Fragment,
    { children: c || void 0 },
    void 0
  );
}
function Fy(n, r, i) {
  if (r.type === "element")
    return I3(n, r, i);
  if (r.type === "mdxFlowExpression" || r.type === "mdxTextExpression")
    return q3(n, r);
  if (r.type === "mdxJsxFlowElement" || r.type === "mdxJsxTextElement")
    return P3(n, r, i);
  if (r.type === "mdxjsEsm")
    return H3(n, r);
  if (r.type === "root")
    return F3(n, r, i);
  if (r.type === "text")
    return V3(n, r);
}
function I3(n, r, i) {
  const l = n.schema;
  let s = l;
  r.tagName.toLowerCase() === "svg" && l.space === "html" && (s = sm, n.schema = s), n.ancestors.push(r);
  const c = Ky(n, r.tagName, !1), f = $3(n, r);
  let g = dm(n, r);
  return L3.has(r.tagName) && (g = g.filter(function(y) {
    return typeof y == "string" ? !p3(y) : !0;
  })), Vy(n, f, c, r), fm(f, g), n.ancestors.pop(), n.schema = l, n.create(r, c, f, i);
}
function q3(n, r) {
  if (r.data && r.data.estree && n.evaluater) {
    const l = r.data.estree.body[0];
    return l.type, /** @type {Child | undefined} */
    n.evaluater.evaluateExpression(l.expression);
  }
  Is(n, r.position);
}
function H3(n, r) {
  if (r.data && r.data.estree && n.evaluater)
    return (
      /** @type {Child | undefined} */
      n.evaluater.evaluateProgram(r.data.estree)
    );
  Is(n, r.position);
}
function P3(n, r, i) {
  const l = n.schema;
  let s = l;
  r.name === "svg" && l.space === "html" && (s = sm, n.schema = s), n.ancestors.push(r);
  const c = r.name === null ? n.Fragment : Ky(n, r.name, !0), f = Y3(n, r), g = dm(n, r);
  return Vy(n, f, c, r), fm(f, g), n.ancestors.pop(), n.schema = l, n.create(r, c, f, i);
}
function F3(n, r, i) {
  const l = {};
  return fm(l, dm(n, r)), n.create(r, n.Fragment, l, i);
}
function V3(n, r) {
  return r.value;
}
function Vy(n, r, i, l) {
  typeof i != "string" && i !== n.Fragment && n.passNode && (r.node = l);
}
function fm(n, r) {
  if (r.length > 0) {
    const i = r.length > 1 ? r : r[0];
    i && (n.children = i);
  }
}
function K3(n, r, i) {
  return l;
  function l(s, c, f, g) {
    const b = Array.isArray(f.children) ? i : r;
    return g ? b(c, f, g) : b(c, f);
  }
}
function G3(n, r) {
  return i;
  function i(l, s, c, f) {
    const g = Array.isArray(c.children), y = um(l);
    return r(
      s,
      c,
      f,
      g,
      {
        columnNumber: y ? y.column - 1 : void 0,
        fileName: n,
        lineNumber: y ? y.line : void 0
      },
      void 0
    );
  }
}
function $3(n, r) {
  const i = {};
  let l, s;
  for (s in r.properties)
    if (s !== "children" && cm.call(r.properties, s)) {
      const c = X3(n, s, r.properties[s]);
      if (c) {
        const [f, g] = c;
        n.tableCellAlignToStyle && f === "align" && typeof g == "string" && B3.has(r.tagName) ? l = g : i[f] = g;
      }
    }
  if (l) {
    const c = (
      /** @type {Style} */
      i.style || (i.style = {})
    );
    c[n.stylePropertyNameCase === "css" ? "text-align" : "textAlign"] = l;
  }
  return i;
}
function Y3(n, r) {
  const i = {};
  for (const l of r.attributes)
    if (l.type === "mdxJsxExpressionAttribute")
      if (l.data && l.data.estree && n.evaluater) {
        const c = l.data.estree.body[0];
        c.type;
        const f = c.expression;
        f.type;
        const g = f.properties[0];
        g.type, Object.assign(
          i,
          n.evaluater.evaluateExpression(g.argument)
        );
      } else
        Is(n, r.position);
    else {
      const s = l.name;
      let c;
      if (l.value && typeof l.value == "object")
        if (l.value.data && l.value.data.estree && n.evaluater) {
          const g = l.value.data.estree.body[0];
          g.type, c = n.evaluater.evaluateExpression(g.expression);
        } else
          Is(n, r.position);
      else
        c = l.value === null ? !0 : l.value;
      i[s] = /** @type {Props[keyof Props]} */
      c;
    }
  return i;
}
function dm(n, r) {
  const i = [];
  let l = -1;
  const s = n.passKeys ? /* @__PURE__ */ new Map() : D3;
  for (; ++l < r.children.length; ) {
    const c = r.children[l];
    let f;
    if (n.passKeys) {
      const y = c.type === "element" ? c.tagName : c.type === "mdxJsxFlowElement" || c.type === "mdxJsxTextElement" ? c.name : void 0;
      if (y) {
        const b = s.get(y) || 0;
        f = y + "-" + b, s.set(y, b + 1);
      }
    }
    const g = Fy(n, c, f);
    g !== void 0 && i.push(g);
  }
  return i;
}
function X3(n, r, i) {
  const l = w3(n.schema, r);
  if (!(i == null || typeof i == "number" && Number.isNaN(i))) {
    if (Array.isArray(i) && (i = l.commaSeparated ? c3(i) : _3(i)), l.property === "style") {
      let s = typeof i == "object" ? i : Q3(n, String(i));
      return n.stylePropertyNameCase === "css" && (s = Z3(s)), ["style", s];
    }
    return [
      n.elementAttributeNameCase === "react" && l.space ? x3[l.property] || l.property : l.attribute,
      i
    ];
  }
}
function Q3(n, r) {
  try {
    return M3(r, { reactCompat: !0 });
  } catch (i) {
    if (n.ignoreInvalidStyle)
      return {};
    const l = (
      /** @type {Error} */
      i
    ), s = new Dn("Cannot parse `style` attribute", {
      ancestors: n.ancestors,
      cause: l,
      ruleId: "style",
      source: "hast-util-to-jsx-runtime"
    });
    throw s.file = n.filePath || void 0, s.url = Py + "#cannot-parse-style-attribute", s;
  }
}
function Ky(n, r, i) {
  let l;
  if (!i)
    l = { type: "Literal", value: r };
  else if (r.includes(".")) {
    const s = r.split(".");
    let c = -1, f;
    for (; ++c < s.length; ) {
      const g = i1(s[c]) ? { type: "Identifier", name: s[c] } : { type: "Literal", value: s[c] };
      f = f ? {
        type: "MemberExpression",
        object: f,
        property: g,
        computed: !!(c && g.type === "Literal"),
        optional: !1
      } : g;
    }
    l = f;
  } else
    l = i1(r) && !/^[a-z]/.test(r) ? { type: "Identifier", name: r } : { type: "Literal", value: r };
  if (l.type === "Literal") {
    const s = (
      /** @type {string | number} */
      l.value
    );
    return cm.call(n.components, s) ? n.components[s] : s;
  }
  if (n.evaluater)
    return n.evaluater.evaluateExpression(l);
  Is(n);
}
function Is(n, r) {
  const i = new Dn(
    "Cannot handle MDX estrees without `createEvaluater`",
    {
      ancestors: n.ancestors,
      place: r,
      ruleId: "mdx-estree",
      source: "hast-util-to-jsx-runtime"
    }
  );
  throw i.file = n.filePath || void 0, i.url = Py + "#cannot-handle-mdx-estrees-without-createevaluater", i;
}
function Z3(n) {
  const r = {};
  let i;
  for (i in n)
    cm.call(n, i) && (r[W3(i)] = n[i]);
  return r;
}
function W3(n) {
  let r = n.replace(R3, J3);
  return r.slice(0, 3) === "ms-" && (r = "-" + r), r;
}
function J3(n) {
  return "-" + n.toLowerCase();
}
const ah = {
  action: ["form"],
  cite: ["blockquote", "del", "ins", "q"],
  data: ["object"],
  formAction: ["button", "input"],
  href: ["a", "area", "base", "link"],
  icon: ["menuitem"],
  itemId: null,
  manifest: ["html"],
  ping: ["a", "area"],
  poster: ["video"],
  src: [
    "audio",
    "embed",
    "iframe",
    "img",
    "input",
    "script",
    "source",
    "track",
    "video"
  ]
}, e5 = {};
function hm(n, r) {
  const i = e5, l = typeof i.includeImageAlt == "boolean" ? i.includeImageAlt : !0, s = typeof i.includeHtml == "boolean" ? i.includeHtml : !0;
  return Gy(n, l, s);
}
function Gy(n, r, i) {
  if (t5(n)) {
    if ("value" in n)
      return n.type === "html" && !i ? "" : n.value;
    if (r && "alt" in n && n.alt)
      return n.alt;
    if ("children" in n)
      return m1(n.children, r, i);
  }
  return Array.isArray(n) ? m1(n, r, i) : "";
}
function m1(n, r, i) {
  const l = [];
  let s = -1;
  for (; ++s < n.length; )
    l[s] = Gy(n[s], r, i);
  return l.join("");
}
function t5(n) {
  return !!(n && typeof n == "object");
}
const p1 = document.createElement("i");
function mm(n) {
  const r = "&" + n + ";";
  p1.innerHTML = r;
  const i = p1.textContent;
  return (
    // @ts-expect-error: TypeScript is wrong that `textContent` on elements can
    // yield `null`.
    i.charCodeAt(i.length - 1) === 59 && n !== "semi" || i === r ? !1 : i
  );
}
function dr(n, r, i, l) {
  const s = n.length;
  let c = 0, f;
  if (r < 0 ? r = -r > s ? 0 : s + r : r = r > s ? s : r, i = i > 0 ? i : 0, l.length < 1e4)
    f = Array.from(l), f.unshift(r, i), n.splice(...f);
  else
    for (i && n.splice(r, i); c < l.length; )
      f = l.slice(c, c + 1e4), f.unshift(r, 0), n.splice(...f), c += 1e4, r += 1e4;
}
function Er(n, r) {
  return n.length > 0 ? (dr(n, n.length, 0, r), n) : r;
}
const g1 = {}.hasOwnProperty;
function $y(n) {
  const r = {};
  let i = -1;
  for (; ++i < n.length; )
    n5(r, n[i]);
  return r;
}
function n5(n, r) {
  let i;
  for (i in r) {
    const s = (g1.call(n, i) ? n[i] : void 0) || (n[i] = {}), c = r[i];
    let f;
    if (c)
      for (f in c) {
        g1.call(s, f) || (s[f] = []);
        const g = c[f];
        r5(
          // @ts-expect-error Looks like a list.
          s[f],
          Array.isArray(g) ? g : g ? [g] : []
        );
      }
  }
}
function r5(n, r) {
  let i = -1;
  const l = [];
  for (; ++i < r.length; )
    (r[i].add === "after" ? n : l).push(r[i]);
  dr(n, 0, 0, l);
}
function Yy(n, r) {
  const i = Number.parseInt(n, r);
  return (
    // C0 except for HT, LF, FF, CR, space.
    i < 9 || i === 11 || i > 13 && i < 32 || // Control character (DEL) of C0, and C1 controls.
    i > 126 && i < 160 || // Lone high surrogates and low surrogates.
    i > 55295 && i < 57344 || // Noncharacters.
    i > 64975 && i < 65008 || /* eslint-disable no-bitwise */
    (i & 65535) === 65535 || (i & 65535) === 65534 || /* eslint-enable no-bitwise */
    // Out of range
    i > 1114111 ? "" : String.fromCodePoint(i)
  );
}
function Dr(n) {
  return n.replace(/[\t\n\r ]+/g, " ").replace(/^ | $/g, "").toLowerCase().toUpperCase();
}
const In = Ca(/[A-Za-z]/), On = Ca(/[\dA-Za-z]/), i5 = Ca(/[#-'*+\--9=?A-Z^-~]/);
function Tc(n) {
  return (
    // Special whitespace codes (which have negative values), C0 and Control
    // character DEL
    n !== null && (n < 32 || n === 127)
  );
}
const Rh = Ca(/\d/), a5 = Ca(/[\dA-Fa-f]/), l5 = Ca(/[!-/:-@[-`{-~]/);
function Ze(n) {
  return n !== null && n < -2;
}
function Dt(n) {
  return n !== null && (n < 0 || n === 32);
}
function ht(n) {
  return n === -2 || n === -1 || n === 32;
}
const Fc = Ca(new RegExp("\\p{P}|\\p{S}", "u")), sl = Ca(/\s/);
function Ca(n) {
  return r;
  function r(i) {
    return i !== null && i > -1 && n.test(String.fromCharCode(i));
  }
}
function ko(n) {
  const r = [];
  let i = -1, l = 0, s = 0;
  for (; ++i < n.length; ) {
    const c = n.charCodeAt(i);
    let f = "";
    if (c === 37 && On(n.charCodeAt(i + 1)) && On(n.charCodeAt(i + 2)))
      s = 2;
    else if (c < 128)
      /[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(c)) || (f = String.fromCharCode(c));
    else if (c > 55295 && c < 57344) {
      const g = n.charCodeAt(i + 1);
      c < 56320 && g > 56319 && g < 57344 ? (f = String.fromCharCode(c, g), s = 1) : f = "";
    } else
      f = String.fromCharCode(c);
    f && (r.push(n.slice(l, i), encodeURIComponent(f)), l = i + s + 1, f = ""), s && (i += s, s = 0);
  }
  return r.join("") + n.slice(l);
}
function vt(n, r, i, l) {
  const s = l ? l - 1 : Number.POSITIVE_INFINITY;
  let c = 0;
  return f;
  function f(y) {
    return ht(y) ? (n.enter(i), g(y)) : r(y);
  }
  function g(y) {
    return ht(y) && c++ < s ? (n.consume(y), g) : (n.exit(i), r(y));
  }
}
const o5 = {
  tokenize: s5
};
function s5(n) {
  const r = n.attempt(this.parser.constructs.contentInitial, l, s);
  let i;
  return r;
  function l(g) {
    if (g === null) {
      n.consume(g);
      return;
    }
    return n.enter("lineEnding"), n.consume(g), n.exit("lineEnding"), vt(n, r, "linePrefix");
  }
  function s(g) {
    return n.enter("paragraph"), c(g);
  }
  function c(g) {
    const y = n.enter("chunkText", {
      contentType: "text",
      previous: i
    });
    return i && (i.next = y), i = y, f(g);
  }
  function f(g) {
    if (g === null) {
      n.exit("chunkText"), n.exit("paragraph"), n.consume(g);
      return;
    }
    return Ze(g) ? (n.consume(g), n.exit("chunkText"), c) : (n.consume(g), f);
  }
}
const u5 = {
  tokenize: c5
}, y1 = {
  tokenize: f5
};
function c5(n) {
  const r = this, i = [];
  let l = 0, s, c, f;
  return g;
  function g(ie) {
    if (l < i.length) {
      const _e = i[l];
      return r.containerState = _e[1], n.attempt(_e[0].continuation, y, b)(ie);
    }
    return b(ie);
  }
  function y(ie) {
    if (l++, r.containerState._closeFlow) {
      r.containerState._closeFlow = void 0, s && ne();
      const _e = r.events.length;
      let we = _e, I;
      for (; we--; )
        if (r.events[we][0] === "exit" && r.events[we][1].type === "chunkFlow") {
          I = r.events[we][1].end;
          break;
        }
      D(l);
      let J = _e;
      for (; J < r.events.length; )
        r.events[J][1].end = {
          ...I
        }, J++;
      return dr(r.events, we + 1, 0, r.events.slice(_e)), r.events.length = J, b(ie);
    }
    return g(ie);
  }
  function b(ie) {
    if (l === i.length) {
      if (!s)
        return _(ie);
      if (s.currentConstruct && s.currentConstruct.concrete)
        return N(ie);
      r.interrupt = !!(s.currentConstruct && !s._gfmTableDynamicInterruptHack);
    }
    return r.containerState = {}, n.check(y1, S, x)(ie);
  }
  function S(ie) {
    return s && ne(), D(l), _(ie);
  }
  function x(ie) {
    return r.parser.lazy[r.now().line] = l !== i.length, f = r.now().offset, N(ie);
  }
  function _(ie) {
    return r.containerState = {}, n.attempt(y1, E, N)(ie);
  }
  function E(ie) {
    return l++, i.push([r.currentConstruct, r.containerState]), _(ie);
  }
  function N(ie) {
    if (ie === null) {
      s && ne(), D(0), n.consume(ie);
      return;
    }
    return s = s || r.parser.flow(r.now()), n.enter("chunkFlow", {
      _tokenizer: s,
      contentType: "flow",
      previous: c
    }), U(ie);
  }
  function U(ie) {
    if (ie === null) {
      G(n.exit("chunkFlow"), !0), D(0), n.consume(ie);
      return;
    }
    return Ze(ie) ? (n.consume(ie), G(n.exit("chunkFlow")), l = 0, r.interrupt = void 0, g) : (n.consume(ie), U);
  }
  function G(ie, _e) {
    const we = r.sliceStream(ie);
    if (_e && we.push(null), ie.previous = c, c && (c.next = ie), c = ie, s.defineSkip(ie.start), s.write(we), r.parser.lazy[ie.start.line]) {
      let I = s.events.length;
      for (; I--; )
        if (
          // The token starts before the line ending
          s.events[I][1].start.offset < f && // and either is not ended yet
          (!s.events[I][1].end || // or ends after it.
          s.events[I][1].end.offset > f)
        )
          return;
      const J = r.events.length;
      let De = J, He, W;
      for (; De--; )
        if (r.events[De][0] === "exit" && r.events[De][1].type === "chunkFlow") {
          if (He) {
            W = r.events[De][1].end;
            break;
          }
          He = !0;
        }
      for (D(l), I = J; I < r.events.length; )
        r.events[I][1].end = {
          ...W
        }, I++;
      dr(r.events, De + 1, 0, r.events.slice(J)), r.events.length = I;
    }
  }
  function D(ie) {
    let _e = i.length;
    for (; _e-- > ie; ) {
      const we = i[_e];
      r.containerState = we[1], we[0].exit.call(r, n);
    }
    i.length = ie;
  }
  function ne() {
    s.write([null]), c = void 0, s = void 0, r.containerState._closeFlow = void 0;
  }
}
function f5(n, r, i) {
  return vt(n, n.attempt(this.parser.constructs.document, r, i), "linePrefix", this.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4);
}
function xo(n) {
  if (n === null || Dt(n) || sl(n))
    return 1;
  if (Fc(n))
    return 2;
}
function Vc(n, r, i) {
  const l = [];
  let s = -1;
  for (; ++s < n.length; ) {
    const c = n[s].resolveAll;
    c && !l.includes(c) && (r = c(r, i), l.push(c));
  }
  return r;
}
const Lh = {
  name: "attention",
  resolveAll: d5,
  tokenize: h5
};
function d5(n, r) {
  let i = -1, l, s, c, f, g, y, b, S;
  for (; ++i < n.length; )
    if (n[i][0] === "enter" && n[i][1].type === "attentionSequence" && n[i][1]._close) {
      for (l = i; l--; )
        if (n[l][0] === "exit" && n[l][1].type === "attentionSequence" && n[l][1]._open && // If the markers are the same:
        r.sliceSerialize(n[l][1]).charCodeAt(0) === r.sliceSerialize(n[i][1]).charCodeAt(0)) {
          if ((n[l][1]._close || n[i][1]._open) && (n[i][1].end.offset - n[i][1].start.offset) % 3 && !((n[l][1].end.offset - n[l][1].start.offset + n[i][1].end.offset - n[i][1].start.offset) % 3))
            continue;
          y = n[l][1].end.offset - n[l][1].start.offset > 1 && n[i][1].end.offset - n[i][1].start.offset > 1 ? 2 : 1;
          const x = {
            ...n[l][1].end
          }, _ = {
            ...n[i][1].start
          };
          b1(x, -y), b1(_, y), f = {
            type: y > 1 ? "strongSequence" : "emphasisSequence",
            start: x,
            end: {
              ...n[l][1].end
            }
          }, g = {
            type: y > 1 ? "strongSequence" : "emphasisSequence",
            start: {
              ...n[i][1].start
            },
            end: _
          }, c = {
            type: y > 1 ? "strongText" : "emphasisText",
            start: {
              ...n[l][1].end
            },
            end: {
              ...n[i][1].start
            }
          }, s = {
            type: y > 1 ? "strong" : "emphasis",
            start: {
              ...f.start
            },
            end: {
              ...g.end
            }
          }, n[l][1].end = {
            ...f.start
          }, n[i][1].start = {
            ...g.end
          }, b = [], n[l][1].end.offset - n[l][1].start.offset && (b = Er(b, [["enter", n[l][1], r], ["exit", n[l][1], r]])), b = Er(b, [["enter", s, r], ["enter", f, r], ["exit", f, r], ["enter", c, r]]), b = Er(b, Vc(r.parser.constructs.insideSpan.null, n.slice(l + 1, i), r)), b = Er(b, [["exit", c, r], ["enter", g, r], ["exit", g, r], ["exit", s, r]]), n[i][1].end.offset - n[i][1].start.offset ? (S = 2, b = Er(b, [["enter", n[i][1], r], ["exit", n[i][1], r]])) : S = 0, dr(n, l - 1, i - l + 3, b), i = l + b.length - S - 2;
          break;
        }
    }
  for (i = -1; ++i < n.length; )
    n[i][1].type === "attentionSequence" && (n[i][1].type = "data");
  return n;
}
function h5(n, r) {
  const i = this.parser.constructs.attentionMarkers.null, l = this.previous, s = xo(l);
  let c;
  return f;
  function f(y) {
    return c = y, n.enter("attentionSequence"), g(y);
  }
  function g(y) {
    if (y === c)
      return n.consume(y), g;
    const b = n.exit("attentionSequence"), S = xo(y), x = !S || S === 2 && s || i.includes(y), _ = !s || s === 2 && S || i.includes(l);
    return b._open = !!(c === 42 ? x : x && (s || !_)), b._close = !!(c === 42 ? _ : _ && (S || !x)), r(y);
  }
}
function b1(n, r) {
  n.column += r, n.offset += r, n._bufferIndex += r;
}
const m5 = {
  name: "autolink",
  tokenize: p5
};
function p5(n, r, i) {
  let l = 0;
  return s;
  function s(E) {
    return n.enter("autolink"), n.enter("autolinkMarker"), n.consume(E), n.exit("autolinkMarker"), n.enter("autolinkProtocol"), c;
  }
  function c(E) {
    return In(E) ? (n.consume(E), f) : E === 64 ? i(E) : b(E);
  }
  function f(E) {
    return E === 43 || E === 45 || E === 46 || On(E) ? (l = 1, g(E)) : b(E);
  }
  function g(E) {
    return E === 58 ? (n.consume(E), l = 0, y) : (E === 43 || E === 45 || E === 46 || On(E)) && l++ < 32 ? (n.consume(E), g) : (l = 0, b(E));
  }
  function y(E) {
    return E === 62 ? (n.exit("autolinkProtocol"), n.enter("autolinkMarker"), n.consume(E), n.exit("autolinkMarker"), n.exit("autolink"), r) : E === null || E === 32 || E === 60 || Tc(E) ? i(E) : (n.consume(E), y);
  }
  function b(E) {
    return E === 64 ? (n.consume(E), S) : i5(E) ? (n.consume(E), b) : i(E);
  }
  function S(E) {
    return On(E) ? x(E) : i(E);
  }
  function x(E) {
    return E === 46 ? (n.consume(E), l = 0, S) : E === 62 ? (n.exit("autolinkProtocol").type = "autolinkEmail", n.enter("autolinkMarker"), n.consume(E), n.exit("autolinkMarker"), n.exit("autolink"), r) : _(E);
  }
  function _(E) {
    if ((E === 45 || On(E)) && l++ < 63) {
      const N = E === 45 ? _ : x;
      return n.consume(E), N;
    }
    return i(E);
  }
}
const Xs = {
  partial: !0,
  tokenize: g5
};
function g5(n, r, i) {
  return l;
  function l(c) {
    return ht(c) ? vt(n, s, "linePrefix")(c) : s(c);
  }
  function s(c) {
    return c === null || Ze(c) ? r(c) : i(c);
  }
}
const Xy = {
  continuation: {
    tokenize: b5
  },
  exit: x5,
  name: "blockQuote",
  tokenize: y5
};
function y5(n, r, i) {
  const l = this;
  return s;
  function s(f) {
    if (f === 62) {
      const g = l.containerState;
      return g.open || (n.enter("blockQuote", {
        _container: !0
      }), g.open = !0), n.enter("blockQuotePrefix"), n.enter("blockQuoteMarker"), n.consume(f), n.exit("blockQuoteMarker"), c;
    }
    return i(f);
  }
  function c(f) {
    return ht(f) ? (n.enter("blockQuotePrefixWhitespace"), n.consume(f), n.exit("blockQuotePrefixWhitespace"), n.exit("blockQuotePrefix"), r) : (n.exit("blockQuotePrefix"), r(f));
  }
}
function b5(n, r, i) {
  const l = this;
  return s;
  function s(f) {
    return ht(f) ? vt(n, c, "linePrefix", l.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(f) : c(f);
  }
  function c(f) {
    return n.attempt(Xy, r, i)(f);
  }
}
function x5(n) {
  n.exit("blockQuote");
}
const Qy = {
  name: "characterEscape",
  tokenize: v5
};
function v5(n, r, i) {
  return l;
  function l(c) {
    return n.enter("characterEscape"), n.enter("escapeMarker"), n.consume(c), n.exit("escapeMarker"), s;
  }
  function s(c) {
    return l5(c) ? (n.enter("characterEscapeValue"), n.consume(c), n.exit("characterEscapeValue"), n.exit("characterEscape"), r) : i(c);
  }
}
const Zy = {
  name: "characterReference",
  tokenize: S5
};
function S5(n, r, i) {
  const l = this;
  let s = 0, c, f;
  return g;
  function g(x) {
    return n.enter("characterReference"), n.enter("characterReferenceMarker"), n.consume(x), n.exit("characterReferenceMarker"), y;
  }
  function y(x) {
    return x === 35 ? (n.enter("characterReferenceMarkerNumeric"), n.consume(x), n.exit("characterReferenceMarkerNumeric"), b) : (n.enter("characterReferenceValue"), c = 31, f = On, S(x));
  }
  function b(x) {
    return x === 88 || x === 120 ? (n.enter("characterReferenceMarkerHexadecimal"), n.consume(x), n.exit("characterReferenceMarkerHexadecimal"), n.enter("characterReferenceValue"), c = 6, f = a5, S) : (n.enter("characterReferenceValue"), c = 7, f = Rh, S(x));
  }
  function S(x) {
    if (x === 59 && s) {
      const _ = n.exit("characterReferenceValue");
      return f === On && !mm(l.sliceSerialize(_)) ? i(x) : (n.enter("characterReferenceMarker"), n.consume(x), n.exit("characterReferenceMarker"), n.exit("characterReference"), r);
    }
    return f(x) && s++ < c ? (n.consume(x), S) : i(x);
  }
}
const x1 = {
  partial: !0,
  tokenize: k5
}, v1 = {
  concrete: !0,
  name: "codeFenced",
  tokenize: w5
};
function w5(n, r, i) {
  const l = this, s = {
    partial: !0,
    tokenize: we
  };
  let c = 0, f = 0, g;
  return y;
  function y(I) {
    return b(I);
  }
  function b(I) {
    const J = l.events[l.events.length - 1];
    return c = J && J[1].type === "linePrefix" ? J[2].sliceSerialize(J[1], !0).length : 0, g = I, n.enter("codeFenced"), n.enter("codeFencedFence"), n.enter("codeFencedFenceSequence"), S(I);
  }
  function S(I) {
    return I === g ? (f++, n.consume(I), S) : f < 3 ? i(I) : (n.exit("codeFencedFenceSequence"), ht(I) ? vt(n, x, "whitespace")(I) : x(I));
  }
  function x(I) {
    return I === null || Ze(I) ? (n.exit("codeFencedFence"), l.interrupt ? r(I) : n.check(x1, U, _e)(I)) : (n.enter("codeFencedFenceInfo"), n.enter("chunkString", {
      contentType: "string"
    }), _(I));
  }
  function _(I) {
    return I === null || Ze(I) ? (n.exit("chunkString"), n.exit("codeFencedFenceInfo"), x(I)) : ht(I) ? (n.exit("chunkString"), n.exit("codeFencedFenceInfo"), vt(n, E, "whitespace")(I)) : I === 96 && I === g ? i(I) : (n.consume(I), _);
  }
  function E(I) {
    return I === null || Ze(I) ? x(I) : (n.enter("codeFencedFenceMeta"), n.enter("chunkString", {
      contentType: "string"
    }), N(I));
  }
  function N(I) {
    return I === null || Ze(I) ? (n.exit("chunkString"), n.exit("codeFencedFenceMeta"), x(I)) : I === 96 && I === g ? i(I) : (n.consume(I), N);
  }
  function U(I) {
    return n.attempt(s, _e, G)(I);
  }
  function G(I) {
    return n.enter("lineEnding"), n.consume(I), n.exit("lineEnding"), D;
  }
  function D(I) {
    return c > 0 && ht(I) ? vt(n, ne, "linePrefix", c + 1)(I) : ne(I);
  }
  function ne(I) {
    return I === null || Ze(I) ? n.check(x1, U, _e)(I) : (n.enter("codeFlowValue"), ie(I));
  }
  function ie(I) {
    return I === null || Ze(I) ? (n.exit("codeFlowValue"), ne(I)) : (n.consume(I), ie);
  }
  function _e(I) {
    return n.exit("codeFenced"), r(I);
  }
  function we(I, J, De) {
    let He = 0;
    return W;
    function W(ke) {
      return I.enter("lineEnding"), I.consume(ke), I.exit("lineEnding"), Q;
    }
    function Q(ke) {
      return I.enter("codeFencedFence"), ht(ke) ? vt(I, ye, "linePrefix", l.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(ke) : ye(ke);
    }
    function ye(ke) {
      return ke === g ? (I.enter("codeFencedFenceSequence"), Be(ke)) : De(ke);
    }
    function Be(ke) {
      return ke === g ? (He++, I.consume(ke), Be) : He >= f ? (I.exit("codeFencedFenceSequence"), ht(ke) ? vt(I, Me, "whitespace")(ke) : Me(ke)) : De(ke);
    }
    function Me(ke) {
      return ke === null || Ze(ke) ? (I.exit("codeFencedFence"), J(ke)) : De(ke);
    }
  }
}
function k5(n, r, i) {
  const l = this;
  return s;
  function s(f) {
    return f === null ? i(f) : (n.enter("lineEnding"), n.consume(f), n.exit("lineEnding"), c);
  }
  function c(f) {
    return l.parser.lazy[l.now().line] ? i(f) : r(f);
  }
}
const lh = {
  name: "codeIndented",
  tokenize: E5
}, C5 = {
  partial: !0,
  tokenize: _5
};
function E5(n, r, i) {
  const l = this;
  return s;
  function s(b) {
    return n.enter("codeIndented"), vt(n, c, "linePrefix", 5)(b);
  }
  function c(b) {
    const S = l.events[l.events.length - 1];
    return S && S[1].type === "linePrefix" && S[2].sliceSerialize(S[1], !0).length >= 4 ? f(b) : i(b);
  }
  function f(b) {
    return b === null ? y(b) : Ze(b) ? n.attempt(C5, f, y)(b) : (n.enter("codeFlowValue"), g(b));
  }
  function g(b) {
    return b === null || Ze(b) ? (n.exit("codeFlowValue"), f(b)) : (n.consume(b), g);
  }
  function y(b) {
    return n.exit("codeIndented"), r(b);
  }
}
function _5(n, r, i) {
  const l = this;
  return s;
  function s(f) {
    return l.parser.lazy[l.now().line] ? i(f) : Ze(f) ? (n.enter("lineEnding"), n.consume(f), n.exit("lineEnding"), s) : vt(n, c, "linePrefix", 5)(f);
  }
  function c(f) {
    const g = l.events[l.events.length - 1];
    return g && g[1].type === "linePrefix" && g[2].sliceSerialize(g[1], !0).length >= 4 ? r(f) : Ze(f) ? s(f) : i(f);
  }
}
const j5 = {
  name: "codeText",
  previous: N5,
  resolve: T5,
  tokenize: A5
};
function T5(n) {
  let r = n.length - 4, i = 3, l, s;
  if ((n[i][1].type === "lineEnding" || n[i][1].type === "space") && (n[r][1].type === "lineEnding" || n[r][1].type === "space")) {
    for (l = i; ++l < r; )
      if (n[l][1].type === "codeTextData") {
        n[i][1].type = "codeTextPadding", n[r][1].type = "codeTextPadding", i += 2, r -= 2;
        break;
      }
  }
  for (l = i - 1, r++; ++l <= r; )
    s === void 0 ? l !== r && n[l][1].type !== "lineEnding" && (s = l) : (l === r || n[l][1].type === "lineEnding") && (n[s][1].type = "codeTextData", l !== s + 2 && (n[s][1].end = n[l - 1][1].end, n.splice(s + 2, l - s - 2), r -= l - s - 2, l = s + 2), s = void 0);
  return n;
}
function N5(n) {
  return n !== 96 || this.events[this.events.length - 1][1].type === "characterEscape";
}
function A5(n, r, i) {
  let l = 0, s, c;
  return f;
  function f(x) {
    return n.enter("codeText"), n.enter("codeTextSequence"), g(x);
  }
  function g(x) {
    return x === 96 ? (n.consume(x), l++, g) : (n.exit("codeTextSequence"), y(x));
  }
  function y(x) {
    return x === null ? i(x) : x === 32 ? (n.enter("space"), n.consume(x), n.exit("space"), y) : x === 96 ? (c = n.enter("codeTextSequence"), s = 0, S(x)) : Ze(x) ? (n.enter("lineEnding"), n.consume(x), n.exit("lineEnding"), y) : (n.enter("codeTextData"), b(x));
  }
  function b(x) {
    return x === null || x === 32 || x === 96 || Ze(x) ? (n.exit("codeTextData"), y(x)) : (n.consume(x), b);
  }
  function S(x) {
    return x === 96 ? (n.consume(x), s++, S) : s === l ? (n.exit("codeTextSequence"), n.exit("codeText"), r(x)) : (c.type = "codeTextData", b(x));
  }
}
class z5 {
  /**
   * @param {ReadonlyArray<T> | null | undefined} [initial]
   *   Initial items (optional).
   * @returns
   *   Splice buffer.
   */
  constructor(r) {
    this.left = r ? [...r] : [], this.right = [];
  }
  /**
   * Array access;
   * does not move the cursor.
   *
   * @param {number} index
   *   Index.
   * @return {T}
   *   Item.
   */
  get(r) {
    if (r < 0 || r >= this.left.length + this.right.length)
      throw new RangeError("Cannot access index `" + r + "` in a splice buffer of size `" + (this.left.length + this.right.length) + "`");
    return r < this.left.length ? this.left[r] : this.right[this.right.length - r + this.left.length - 1];
  }
  /**
   * The length of the splice buffer, one greater than the largest index in the
   * array.
   */
  get length() {
    return this.left.length + this.right.length;
  }
  /**
   * Remove and return `list[0]`;
   * moves the cursor to `0`.
   *
   * @returns {T | undefined}
   *   Item, optional.
   */
  shift() {
    return this.setCursor(0), this.right.pop();
  }
  /**
   * Slice the buffer to get an array;
   * does not move the cursor.
   *
   * @param {number} start
   *   Start.
   * @param {number | null | undefined} [end]
   *   End (optional).
   * @returns {Array<T>}
   *   Array of items.
   */
  slice(r, i) {
    const l = i ?? Number.POSITIVE_INFINITY;
    return l < this.left.length ? this.left.slice(r, l) : r > this.left.length ? this.right.slice(this.right.length - l + this.left.length, this.right.length - r + this.left.length).reverse() : this.left.slice(r).concat(this.right.slice(this.right.length - l + this.left.length).reverse());
  }
  /**
   * Mimics the behavior of Array.prototype.splice() except for the change of
   * interface necessary to avoid segfaults when patching in very large arrays.
   *
   * This operation moves cursor is moved to `start` and results in the cursor
   * placed after any inserted items.
   *
   * @param {number} start
   *   Start;
   *   zero-based index at which to start changing the array;
   *   negative numbers count backwards from the end of the array and values
   *   that are out-of bounds are clamped to the appropriate end of the array.
   * @param {number | null | undefined} [deleteCount=0]
   *   Delete count (default: `0`);
   *   maximum number of elements to delete, starting from start.
   * @param {Array<T> | null | undefined} [items=[]]
   *   Items to include in place of the deleted items (default: `[]`).
   * @return {Array<T>}
   *   Any removed items.
   */
  splice(r, i, l) {
    const s = i || 0;
    this.setCursor(Math.trunc(r));
    const c = this.right.splice(this.right.length - s, Number.POSITIVE_INFINITY);
    return l && zs(this.left, l), c.reverse();
  }
  /**
   * Remove and return the highest-numbered item in the array, so
   * `list[list.length - 1]`;
   * Moves the cursor to `length`.
   *
   * @returns {T | undefined}
   *   Item, optional.
   */
  pop() {
    return this.setCursor(Number.POSITIVE_INFINITY), this.left.pop();
  }
  /**
   * Inserts a single item to the high-numbered side of the array;
   * moves the cursor to `length`.
   *
   * @param {T} item
   *   Item.
   * @returns {undefined}
   *   Nothing.
   */
  push(r) {
    this.setCursor(Number.POSITIVE_INFINITY), this.left.push(r);
  }
  /**
   * Inserts many items to the high-numbered side of the array.
   * Moves the cursor to `length`.
   *
   * @param {Array<T>} items
   *   Items.
   * @returns {undefined}
   *   Nothing.
   */
  pushMany(r) {
    this.setCursor(Number.POSITIVE_INFINITY), zs(this.left, r);
  }
  /**
   * Inserts a single item to the low-numbered side of the array;
   * Moves the cursor to `0`.
   *
   * @param {T} item
   *   Item.
   * @returns {undefined}
   *   Nothing.
   */
  unshift(r) {
    this.setCursor(0), this.right.push(r);
  }
  /**
   * Inserts many items to the low-numbered side of the array;
   * moves the cursor to `0`.
   *
   * @param {Array<T>} items
   *   Items.
   * @returns {undefined}
   *   Nothing.
   */
  unshiftMany(r) {
    this.setCursor(0), zs(this.right, r.reverse());
  }
  /**
   * Move the cursor to a specific position in the array. Requires
   * time proportional to the distance moved.
   *
   * If `n < 0`, the cursor will end up at the beginning.
   * If `n > length`, the cursor will end up at the end.
   *
   * @param {number} n
   *   Position.
   * @return {undefined}
   *   Nothing.
   */
  setCursor(r) {
    if (!(r === this.left.length || r > this.left.length && this.right.length === 0 || r < 0 && this.left.length === 0))
      if (r < this.left.length) {
        const i = this.left.splice(r, Number.POSITIVE_INFINITY);
        zs(this.right, i.reverse());
      } else {
        const i = this.right.splice(this.left.length + this.right.length - r, Number.POSITIVE_INFINITY);
        zs(this.left, i.reverse());
      }
  }
}
function zs(n, r) {
  let i = 0;
  if (r.length < 1e4)
    n.push(...r);
  else
    for (; i < r.length; )
      n.push(...r.slice(i, i + 1e4)), i += 1e4;
}
function Wy(n) {
  const r = {};
  let i = -1, l, s, c, f, g, y, b;
  const S = new z5(n);
  for (; ++i < S.length; ) {
    for (; i in r; )
      i = r[i];
    if (l = S.get(i), i && l[1].type === "chunkFlow" && S.get(i - 1)[1].type === "listItemPrefix" && (y = l[1]._tokenizer.events, c = 0, c < y.length && y[c][1].type === "lineEndingBlank" && (c += 2), c < y.length && y[c][1].type === "content"))
      for (; ++c < y.length && y[c][1].type !== "content"; )
        y[c][1].type === "chunkText" && (y[c][1]._isInFirstContentOfListItem = !0, c++);
    if (l[0] === "enter")
      l[1].contentType && (Object.assign(r, M5(S, i)), i = r[i], b = !0);
    else if (l[1]._container) {
      for (c = i, s = void 0; c--; )
        if (f = S.get(c), f[1].type === "lineEnding" || f[1].type === "lineEndingBlank")
          f[0] === "enter" && (s && (S.get(s)[1].type = "lineEndingBlank"), f[1].type = "lineEnding", s = c);
        else if (!(f[1].type === "linePrefix" || f[1].type === "listItemIndent")) break;
      s && (l[1].end = {
        ...S.get(s)[1].start
      }, g = S.slice(s, i), g.unshift(l), S.splice(s, i - s + 1, g));
    }
  }
  return dr(n, 0, Number.POSITIVE_INFINITY, S.slice(0)), !b;
}
function M5(n, r) {
  const i = n.get(r)[1], l = n.get(r)[2];
  let s = r - 1;
  const c = [];
  let f = i._tokenizer;
  f || (f = l.parser[i.contentType](i.start), i._contentTypeTextTrailing && (f._contentTypeTextTrailing = !0));
  const g = f.events, y = [], b = {};
  let S, x, _ = -1, E = i, N = 0, U = 0;
  const G = [U];
  for (; E; ) {
    for (; n.get(++s)[1] !== E; )
      ;
    c.push(s), E._tokenizer || (S = l.sliceStream(E), E.next || S.push(null), x && f.defineSkip(E.start), E._isInFirstContentOfListItem && (f._gfmTasklistFirstContentOfListItem = !0), f.write(S), E._isInFirstContentOfListItem && (f._gfmTasklistFirstContentOfListItem = void 0)), x = E, E = E.next;
  }
  for (E = i; ++_ < g.length; )
    // Find a void token that includes a break.
    g[_][0] === "exit" && g[_ - 1][0] === "enter" && g[_][1].type === g[_ - 1][1].type && g[_][1].start.line !== g[_][1].end.line && (U = _ + 1, G.push(U), E._tokenizer = void 0, E.previous = void 0, E = E.next);
  for (f.events = [], E ? (E._tokenizer = void 0, E.previous = void 0) : G.pop(), _ = G.length; _--; ) {
    const D = g.slice(G[_], G[_ + 1]), ne = c.pop();
    y.push([ne, ne + D.length - 1]), n.splice(ne, 2, D);
  }
  for (y.reverse(), _ = -1; ++_ < y.length; )
    b[N + y[_][0]] = N + y[_][1], N += y[_][1] - y[_][0] - 1;
  return b;
}
const O5 = {
  resolve: R5,
  tokenize: L5
}, D5 = {
  partial: !0,
  tokenize: B5
};
function R5(n) {
  return Wy(n), n;
}
function L5(n, r) {
  let i;
  return l;
  function l(g) {
    return n.enter("content"), i = n.enter("chunkContent", {
      contentType: "content"
    }), s(g);
  }
  function s(g) {
    return g === null ? c(g) : Ze(g) ? n.check(D5, f, c)(g) : (n.consume(g), s);
  }
  function c(g) {
    return n.exit("chunkContent"), n.exit("content"), r(g);
  }
  function f(g) {
    return n.consume(g), n.exit("chunkContent"), i.next = n.enter("chunkContent", {
      contentType: "content",
      previous: i
    }), i = i.next, s;
  }
}
function B5(n, r, i) {
  const l = this;
  return s;
  function s(f) {
    return n.exit("chunkContent"), n.enter("lineEnding"), n.consume(f), n.exit("lineEnding"), vt(n, c, "linePrefix");
  }
  function c(f) {
    if (f === null || Ze(f))
      return i(f);
    const g = l.events[l.events.length - 1];
    return !l.parser.constructs.disable.null.includes("codeIndented") && g && g[1].type === "linePrefix" && g[2].sliceSerialize(g[1], !0).length >= 4 ? r(f) : n.interrupt(l.parser.constructs.flow, i, r)(f);
  }
}
function Jy(n, r, i, l, s, c, f, g, y) {
  const b = y || Number.POSITIVE_INFINITY;
  let S = 0;
  return x;
  function x(D) {
    return D === 60 ? (n.enter(l), n.enter(s), n.enter(c), n.consume(D), n.exit(c), _) : D === null || D === 32 || D === 41 || Tc(D) ? i(D) : (n.enter(l), n.enter(f), n.enter(g), n.enter("chunkString", {
      contentType: "string"
    }), U(D));
  }
  function _(D) {
    return D === 62 ? (n.enter(c), n.consume(D), n.exit(c), n.exit(s), n.exit(l), r) : (n.enter(g), n.enter("chunkString", {
      contentType: "string"
    }), E(D));
  }
  function E(D) {
    return D === 62 ? (n.exit("chunkString"), n.exit(g), _(D)) : D === null || D === 60 || Ze(D) ? i(D) : (n.consume(D), D === 92 ? N : E);
  }
  function N(D) {
    return D === 60 || D === 62 || D === 92 ? (n.consume(D), E) : E(D);
  }
  function U(D) {
    return !S && (D === null || D === 41 || Dt(D)) ? (n.exit("chunkString"), n.exit(g), n.exit(f), n.exit(l), r(D)) : S < b && D === 40 ? (n.consume(D), S++, U) : D === 41 ? (n.consume(D), S--, U) : D === null || D === 32 || D === 40 || Tc(D) ? i(D) : (n.consume(D), D === 92 ? G : U);
  }
  function G(D) {
    return D === 40 || D === 41 || D === 92 ? (n.consume(D), U) : U(D);
  }
}
function e2(n, r, i, l, s, c) {
  const f = this;
  let g = 0, y;
  return b;
  function b(E) {
    return n.enter(l), n.enter(s), n.consume(E), n.exit(s), n.enter(c), S;
  }
  function S(E) {
    return g > 999 || E === null || E === 91 || E === 93 && !y || // To do: remove in the future once weve switched from
    // `micromark-extension-footnote` to `micromark-extension-gfm-footnote`,
    // which doesnt need this.
    // Hidden footnotes hook.
    /* c8 ignore next 3 */
    E === 94 && !g && "_hiddenFootnoteSupport" in f.parser.constructs ? i(E) : E === 93 ? (n.exit(c), n.enter(s), n.consume(E), n.exit(s), n.exit(l), r) : Ze(E) ? (n.enter("lineEnding"), n.consume(E), n.exit("lineEnding"), S) : (n.enter("chunkString", {
      contentType: "string"
    }), x(E));
  }
  function x(E) {
    return E === null || E === 91 || E === 93 || Ze(E) || g++ > 999 ? (n.exit("chunkString"), S(E)) : (n.consume(E), y || (y = !ht(E)), E === 92 ? _ : x);
  }
  function _(E) {
    return E === 91 || E === 92 || E === 93 ? (n.consume(E), g++, x) : x(E);
  }
}
function t2(n, r, i, l, s, c) {
  let f;
  return g;
  function g(_) {
    return _ === 34 || _ === 39 || _ === 40 ? (n.enter(l), n.enter(s), n.consume(_), n.exit(s), f = _ === 40 ? 41 : _, y) : i(_);
  }
  function y(_) {
    return _ === f ? (n.enter(s), n.consume(_), n.exit(s), n.exit(l), r) : (n.enter(c), b(_));
  }
  function b(_) {
    return _ === f ? (n.exit(c), y(f)) : _ === null ? i(_) : Ze(_) ? (n.enter("lineEnding"), n.consume(_), n.exit("lineEnding"), vt(n, b, "linePrefix")) : (n.enter("chunkString", {
      contentType: "string"
    }), S(_));
  }
  function S(_) {
    return _ === f || _ === null || Ze(_) ? (n.exit("chunkString"), b(_)) : (n.consume(_), _ === 92 ? x : S);
  }
  function x(_) {
    return _ === f || _ === 92 ? (n.consume(_), S) : S(_);
  }
}
function Ls(n, r) {
  let i;
  return l;
  function l(s) {
    return Ze(s) ? (n.enter("lineEnding"), n.consume(s), n.exit("lineEnding"), i = !0, l) : ht(s) ? vt(n, l, i ? "linePrefix" : "lineSuffix")(s) : r(s);
  }
}
const U5 = {
  name: "definition",
  tokenize: q5
}, I5 = {
  partial: !0,
  tokenize: H5
};
function q5(n, r, i) {
  const l = this;
  let s;
  return c;
  function c(E) {
    return n.enter("definition"), f(E);
  }
  function f(E) {
    return e2.call(
      l,
      n,
      g,
      // Note: we dont need to reset the way `markdown-rs` does.
      i,
      "definitionLabel",
      "definitionLabelMarker",
      "definitionLabelString"
    )(E);
  }
  function g(E) {
    return s = Dr(l.sliceSerialize(l.events[l.events.length - 1][1]).slice(1, -1)), E === 58 ? (n.enter("definitionMarker"), n.consume(E), n.exit("definitionMarker"), y) : i(E);
  }
  function y(E) {
    return Dt(E) ? Ls(n, b)(E) : b(E);
  }
  function b(E) {
    return Jy(
      n,
      S,
      // Note: we dont need to reset the way `markdown-rs` does.
      i,
      "definitionDestination",
      "definitionDestinationLiteral",
      "definitionDestinationLiteralMarker",
      "definitionDestinationRaw",
      "definitionDestinationString"
    )(E);
  }
  function S(E) {
    return n.attempt(I5, x, x)(E);
  }
  function x(E) {
    return ht(E) ? vt(n, _, "whitespace")(E) : _(E);
  }
  function _(E) {
    return E === null || Ze(E) ? (n.exit("definition"), l.parser.defined.push(s), r(E)) : i(E);
  }
}
function H5(n, r, i) {
  return l;
  function l(g) {
    return Dt(g) ? Ls(n, s)(g) : i(g);
  }
  function s(g) {
    return t2(n, c, i, "definitionTitle", "definitionTitleMarker", "definitionTitleString")(g);
  }
  function c(g) {
    return ht(g) ? vt(n, f, "whitespace")(g) : f(g);
  }
  function f(g) {
    return g === null || Ze(g) ? r(g) : i(g);
  }
}
const P5 = {
  name: "hardBreakEscape",
  tokenize: F5
};
function F5(n, r, i) {
  return l;
  function l(c) {
    return n.enter("hardBreakEscape"), n.consume(c), s;
  }
  function s(c) {
    return Ze(c) ? (n.exit("hardBreakEscape"), r(c)) : i(c);
  }
}
const V5 = {
  name: "headingAtx",
  resolve: K5,
  tokenize: G5
};
function K5(n, r) {
  let i = n.length - 2, l = 3, s, c;
  return n[l][1].type === "whitespace" && (l += 2), i - 2 > l && n[i][1].type === "whitespace" && (i -= 2), n[i][1].type === "atxHeadingSequence" && (l === i - 1 || i - 4 > l && n[i - 2][1].type === "whitespace") && (i -= l + 1 === i ? 2 : 4), i > l && (s = {
    type: "atxHeadingText",
    start: n[l][1].start,
    end: n[i][1].end
  }, c = {
    type: "chunkText",
    start: n[l][1].start,
    end: n[i][1].end,
    contentType: "text"
  }, dr(n, l, i - l + 1, [["enter", s, r], ["enter", c, r], ["exit", c, r], ["exit", s, r]])), n;
}
function G5(n, r, i) {
  let l = 0;
  return s;
  function s(S) {
    return n.enter("atxHeading"), c(S);
  }
  function c(S) {
    return n.enter("atxHeadingSequence"), f(S);
  }
  function f(S) {
    return S === 35 && l++ < 6 ? (n.consume(S), f) : S === null || Dt(S) ? (n.exit("atxHeadingSequence"), g(S)) : i(S);
  }
  function g(S) {
    return S === 35 ? (n.enter("atxHeadingSequence"), y(S)) : S === null || Ze(S) ? (n.exit("atxHeading"), r(S)) : ht(S) ? vt(n, g, "whitespace")(S) : (n.enter("atxHeadingText"), b(S));
  }
  function y(S) {
    return S === 35 ? (n.consume(S), y) : (n.exit("atxHeadingSequence"), g(S));
  }
  function b(S) {
    return S === null || S === 35 || Dt(S) ? (n.exit("atxHeadingText"), g(S)) : (n.consume(S), b);
  }
}
const $5 = [
  "address",
  "article",
  "aside",
  "base",
  "basefont",
  "blockquote",
  "body",
  "caption",
  "center",
  "col",
  "colgroup",
  "dd",
  "details",
  "dialog",
  "dir",
  "div",
  "dl",
  "dt",
  "fieldset",
  "figcaption",
  "figure",
  "footer",
  "form",
  "frame",
  "frameset",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "head",
  "header",
  "hr",
  "html",
  "iframe",
  "legend",
  "li",
  "link",
  "main",
  "menu",
  "menuitem",
  "nav",
  "noframes",
  "ol",
  "optgroup",
  "option",
  "p",
  "param",
  "search",
  "section",
  "summary",
  "table",
  "tbody",
  "td",
  "tfoot",
  "th",
  "thead",
  "title",
  "tr",
  "track",
  "ul"
], S1 = ["pre", "script", "style", "textarea"], Y5 = {
  concrete: !0,
  name: "htmlFlow",
  resolveTo: Z5,
  tokenize: W5
}, X5 = {
  partial: !0,
  tokenize: e6
}, Q5 = {
  partial: !0,
  tokenize: J5
};
function Z5(n) {
  let r = n.length;
  for (; r-- && !(n[r][0] === "enter" && n[r][1].type === "htmlFlow"); )
    ;
  return r > 1 && n[r - 2][1].type === "linePrefix" && (n[r][1].start = n[r - 2][1].start, n[r + 1][1].start = n[r - 2][1].start, n.splice(r - 2, 2)), n;
}
function W5(n, r, i) {
  const l = this;
  let s, c, f, g, y;
  return b;
  function b(z) {
    return S(z);
  }
  function S(z) {
    return n.enter("htmlFlow"), n.enter("htmlFlowData"), n.consume(z), x;
  }
  function x(z) {
    return z === 33 ? (n.consume(z), _) : z === 47 ? (n.consume(z), c = !0, U) : z === 63 ? (n.consume(z), s = 3, l.interrupt ? r : M) : In(z) ? (n.consume(z), f = String.fromCharCode(z), G) : i(z);
  }
  function _(z) {
    return z === 45 ? (n.consume(z), s = 2, E) : z === 91 ? (n.consume(z), s = 5, g = 0, N) : In(z) ? (n.consume(z), s = 4, l.interrupt ? r : M) : i(z);
  }
  function E(z) {
    return z === 45 ? (n.consume(z), l.interrupt ? r : M) : i(z);
  }
  function N(z) {
    const ue = "CDATA[";
    return z === ue.charCodeAt(g++) ? (n.consume(z), g === ue.length ? l.interrupt ? r : ye : N) : i(z);
  }
  function U(z) {
    return In(z) ? (n.consume(z), f = String.fromCharCode(z), G) : i(z);
  }
  function G(z) {
    if (z === null || z === 47 || z === 62 || Dt(z)) {
      const ue = z === 47, me = f.toLowerCase();
      return !ue && !c && S1.includes(me) ? (s = 1, l.interrupt ? r(z) : ye(z)) : $5.includes(f.toLowerCase()) ? (s = 6, ue ? (n.consume(z), D) : l.interrupt ? r(z) : ye(z)) : (s = 7, l.interrupt && !l.parser.lazy[l.now().line] ? i(z) : c ? ne(z) : ie(z));
    }
    return z === 45 || On(z) ? (n.consume(z), f += String.fromCharCode(z), G) : i(z);
  }
  function D(z) {
    return z === 62 ? (n.consume(z), l.interrupt ? r : ye) : i(z);
  }
  function ne(z) {
    return ht(z) ? (n.consume(z), ne) : W(z);
  }
  function ie(z) {
    return z === 47 ? (n.consume(z), W) : z === 58 || z === 95 || In(z) ? (n.consume(z), _e) : ht(z) ? (n.consume(z), ie) : W(z);
  }
  function _e(z) {
    return z === 45 || z === 46 || z === 58 || z === 95 || On(z) ? (n.consume(z), _e) : we(z);
  }
  function we(z) {
    return z === 61 ? (n.consume(z), I) : ht(z) ? (n.consume(z), we) : ie(z);
  }
  function I(z) {
    return z === null || z === 60 || z === 61 || z === 62 || z === 96 ? i(z) : z === 34 || z === 39 ? (n.consume(z), y = z, J) : ht(z) ? (n.consume(z), I) : De(z);
  }
  function J(z) {
    return z === y ? (n.consume(z), y = null, He) : z === null || Ze(z) ? i(z) : (n.consume(z), J);
  }
  function De(z) {
    return z === null || z === 34 || z === 39 || z === 47 || z === 60 || z === 61 || z === 62 || z === 96 || Dt(z) ? we(z) : (n.consume(z), De);
  }
  function He(z) {
    return z === 47 || z === 62 || ht(z) ? ie(z) : i(z);
  }
  function W(z) {
    return z === 62 ? (n.consume(z), Q) : i(z);
  }
  function Q(z) {
    return z === null || Ze(z) ? ye(z) : ht(z) ? (n.consume(z), Q) : i(z);
  }
  function ye(z) {
    return z === 45 && s === 2 ? (n.consume(z), ee) : z === 60 && s === 1 ? (n.consume(z), ve) : z === 62 && s === 4 ? (n.consume(z), B) : z === 63 && s === 3 ? (n.consume(z), M) : z === 93 && s === 5 ? (n.consume(z), Pe) : Ze(z) && (s === 6 || s === 7) ? (n.exit("htmlFlowData"), n.check(X5, he, Be)(z)) : z === null || Ze(z) ? (n.exit("htmlFlowData"), Be(z)) : (n.consume(z), ye);
  }
  function Be(z) {
    return n.check(Q5, Me, he)(z);
  }
  function Me(z) {
    return n.enter("lineEnding"), n.consume(z), n.exit("lineEnding"), ke;
  }
  function ke(z) {
    return z === null || Ze(z) ? Be(z) : (n.enter("htmlFlowData"), ye(z));
  }
  function ee(z) {
    return z === 45 ? (n.consume(z), M) : ye(z);
  }
  function ve(z) {
    return z === 47 ? (n.consume(z), f = "", Ie) : ye(z);
  }
  function Ie(z) {
    if (z === 62) {
      const ue = f.toLowerCase();
      return S1.includes(ue) ? (n.consume(z), B) : ye(z);
    }
    return In(z) && f.length < 8 ? (n.consume(z), f += String.fromCharCode(z), Ie) : ye(z);
  }
  function Pe(z) {
    return z === 93 ? (n.consume(z), M) : ye(z);
  }
  function M(z) {
    return z === 62 ? (n.consume(z), B) : z === 45 && s === 2 ? (n.consume(z), M) : ye(z);
  }
  function B(z) {
    return z === null || Ze(z) ? (n.exit("htmlFlowData"), he(z)) : (n.consume(z), B);
  }
  function he(z) {
    return n.exit("htmlFlow"), r(z);
  }
}
function J5(n, r, i) {
  const l = this;
  return s;
  function s(f) {
    return Ze(f) ? (n.enter("lineEnding"), n.consume(f), n.exit("lineEnding"), c) : i(f);
  }
  function c(f) {
    return l.parser.lazy[l.now().line] ? i(f) : r(f);
  }
}
function e6(n, r, i) {
  return l;
  function l(s) {
    return n.enter("lineEnding"), n.consume(s), n.exit("lineEnding"), n.attempt(Xs, r, i);
  }
}
const t6 = {
  name: "htmlText",
  tokenize: n6
};
function n6(n, r, i) {
  const l = this;
  let s, c, f;
  return g;
  function g(M) {
    return n.enter("htmlText"), n.enter("htmlTextData"), n.consume(M), y;
  }
  function y(M) {
    return M === 33 ? (n.consume(M), b) : M === 47 ? (n.consume(M), we) : M === 63 ? (n.consume(M), ie) : In(M) ? (n.consume(M), De) : i(M);
  }
  function b(M) {
    return M === 45 ? (n.consume(M), S) : M === 91 ? (n.consume(M), c = 0, N) : In(M) ? (n.consume(M), ne) : i(M);
  }
  function S(M) {
    return M === 45 ? (n.consume(M), E) : i(M);
  }
  function x(M) {
    return M === null ? i(M) : M === 45 ? (n.consume(M), _) : Ze(M) ? (f = x, ve(M)) : (n.consume(M), x);
  }
  function _(M) {
    return M === 45 ? (n.consume(M), E) : x(M);
  }
  function E(M) {
    return M === 62 ? ee(M) : M === 45 ? _(M) : x(M);
  }
  function N(M) {
    const B = "CDATA[";
    return M === B.charCodeAt(c++) ? (n.consume(M), c === B.length ? U : N) : i(M);
  }
  function U(M) {
    return M === null ? i(M) : M === 93 ? (n.consume(M), G) : Ze(M) ? (f = U, ve(M)) : (n.consume(M), U);
  }
  function G(M) {
    return M === 93 ? (n.consume(M), D) : U(M);
  }
  function D(M) {
    return M === 62 ? ee(M) : M === 93 ? (n.consume(M), D) : U(M);
  }
  function ne(M) {
    return M === null || M === 62 ? ee(M) : Ze(M) ? (f = ne, ve(M)) : (n.consume(M), ne);
  }
  function ie(M) {
    return M === null ? i(M) : M === 63 ? (n.consume(M), _e) : Ze(M) ? (f = ie, ve(M)) : (n.consume(M), ie);
  }
  function _e(M) {
    return M === 62 ? ee(M) : ie(M);
  }
  function we(M) {
    return In(M) ? (n.consume(M), I) : i(M);
  }
  function I(M) {
    return M === 45 || On(M) ? (n.consume(M), I) : J(M);
  }
  function J(M) {
    return Ze(M) ? (f = J, ve(M)) : ht(M) ? (n.consume(M), J) : ee(M);
  }
  function De(M) {
    return M === 45 || On(M) ? (n.consume(M), De) : M === 47 || M === 62 || Dt(M) ? He(M) : i(M);
  }
  function He(M) {
    return M === 47 ? (n.consume(M), ee) : M === 58 || M === 95 || In(M) ? (n.consume(M), W) : Ze(M) ? (f = He, ve(M)) : ht(M) ? (n.consume(M), He) : ee(M);
  }
  function W(M) {
    return M === 45 || M === 46 || M === 58 || M === 95 || On(M) ? (n.consume(M), W) : Q(M);
  }
  function Q(M) {
    return M === 61 ? (n.consume(M), ye) : Ze(M) ? (f = Q, ve(M)) : ht(M) ? (n.consume(M), Q) : He(M);
  }
  function ye(M) {
    return M === null || M === 60 || M === 61 || M === 62 || M === 96 ? i(M) : M === 34 || M === 39 ? (n.consume(M), s = M, Be) : Ze(M) ? (f = ye, ve(M)) : ht(M) ? (n.consume(M), ye) : (n.consume(M), Me);
  }
  function Be(M) {
    return M === s ? (n.consume(M), s = void 0, ke) : M === null ? i(M) : Ze(M) ? (f = Be, ve(M)) : (n.consume(M), Be);
  }
  function Me(M) {
    return M === null || M === 34 || M === 39 || M === 60 || M === 61 || M === 96 ? i(M) : M === 47 || M === 62 || Dt(M) ? He(M) : (n.consume(M), Me);
  }
  function ke(M) {
    return M === 47 || M === 62 || Dt(M) ? He(M) : i(M);
  }
  function ee(M) {
    return M === 62 ? (n.consume(M), n.exit("htmlTextData"), n.exit("htmlText"), r) : i(M);
  }
  function ve(M) {
    return n.exit("htmlTextData"), n.enter("lineEnding"), n.consume(M), n.exit("lineEnding"), Ie;
  }
  function Ie(M) {
    return ht(M) ? vt(n, Pe, "linePrefix", l.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(M) : Pe(M);
  }
  function Pe(M) {
    return n.enter("htmlTextData"), f(M);
  }
}
const pm = {
  name: "labelEnd",
  resolveAll: l6,
  resolveTo: o6,
  tokenize: s6
}, r6 = {
  tokenize: u6
}, i6 = {
  tokenize: c6
}, a6 = {
  tokenize: f6
};
function l6(n) {
  let r = -1;
  const i = [];
  for (; ++r < n.length; ) {
    const l = n[r][1];
    if (i.push(n[r]), l.type === "labelImage" || l.type === "labelLink" || l.type === "labelEnd") {
      const s = l.type === "labelImage" ? 4 : 2;
      l.type = "data", r += s;
    }
  }
  return n.length !== i.length && dr(n, 0, n.length, i), n;
}
function o6(n, r) {
  let i = n.length, l = 0, s, c, f, g;
  for (; i--; )
    if (s = n[i][1], c) {
      if (s.type === "link" || s.type === "labelLink" && s._inactive)
        break;
      n[i][0] === "enter" && s.type === "labelLink" && (s._inactive = !0);
    } else if (f) {
      if (n[i][0] === "enter" && (s.type === "labelImage" || s.type === "labelLink") && !s._balanced && (c = i, s.type !== "labelLink")) {
        l = 2;
        break;
      }
    } else s.type === "labelEnd" && (f = i);
  const y = {
    type: n[c][1].type === "labelLink" ? "link" : "image",
    start: {
      ...n[c][1].start
    },
    end: {
      ...n[n.length - 1][1].end
    }
  }, b = {
    type: "label",
    start: {
      ...n[c][1].start
    },
    end: {
      ...n[f][1].end
    }
  }, S = {
    type: "labelText",
    start: {
      ...n[c + l + 2][1].end
    },
    end: {
      ...n[f - 2][1].start
    }
  };
  return g = [["enter", y, r], ["enter", b, r]], g = Er(g, n.slice(c + 1, c + l + 3)), g = Er(g, [["enter", S, r]]), g = Er(g, Vc(r.parser.constructs.insideSpan.null, n.slice(c + l + 4, f - 3), r)), g = Er(g, [["exit", S, r], n[f - 2], n[f - 1], ["exit", b, r]]), g = Er(g, n.slice(f + 1)), g = Er(g, [["exit", y, r]]), dr(n, c, n.length, g), n;
}
function s6(n, r, i) {
  const l = this;
  let s = l.events.length, c, f;
  for (; s--; )
    if ((l.events[s][1].type === "labelImage" || l.events[s][1].type === "labelLink") && !l.events[s][1]._balanced) {
      c = l.events[s][1];
      break;
    }
  return g;
  function g(_) {
    return c ? c._inactive ? x(_) : (f = l.parser.defined.includes(Dr(l.sliceSerialize({
      start: c.end,
      end: l.now()
    }))), n.enter("labelEnd"), n.enter("labelMarker"), n.consume(_), n.exit("labelMarker"), n.exit("labelEnd"), y) : i(_);
  }
  function y(_) {
    return _ === 40 ? n.attempt(r6, S, f ? S : x)(_) : _ === 91 ? n.attempt(i6, S, f ? b : x)(_) : f ? S(_) : x(_);
  }
  function b(_) {
    return n.attempt(a6, S, x)(_);
  }
  function S(_) {
    return r(_);
  }
  function x(_) {
    return c._balanced = !0, i(_);
  }
}
function u6(n, r, i) {
  return l;
  function l(x) {
    return n.enter("resource"), n.enter("resourceMarker"), n.consume(x), n.exit("resourceMarker"), s;
  }
  function s(x) {
    return Dt(x) ? Ls(n, c)(x) : c(x);
  }
  function c(x) {
    return x === 41 ? S(x) : Jy(n, f, g, "resourceDestination", "resourceDestinationLiteral", "resourceDestinationLiteralMarker", "resourceDestinationRaw", "resourceDestinationString", 32)(x);
  }
  function f(x) {
    return Dt(x) ? Ls(n, y)(x) : S(x);
  }
  function g(x) {
    return i(x);
  }
  function y(x) {
    return x === 34 || x === 39 || x === 40 ? t2(n, b, i, "resourceTitle", "resourceTitleMarker", "resourceTitleString")(x) : S(x);
  }
  function b(x) {
    return Dt(x) ? Ls(n, S)(x) : S(x);
  }
  function S(x) {
    return x === 41 ? (n.enter("resourceMarker"), n.consume(x), n.exit("resourceMarker"), n.exit("resource"), r) : i(x);
  }
}
function c6(n, r, i) {
  const l = this;
  return s;
  function s(g) {
    return e2.call(l, n, c, f, "reference", "referenceMarker", "referenceString")(g);
  }
  function c(g) {
    return l.parser.defined.includes(Dr(l.sliceSerialize(l.events[l.events.length - 1][1]).slice(1, -1))) ? r(g) : i(g);
  }
  function f(g) {
    return i(g);
  }
}
function f6(n, r, i) {
  return l;
  function l(c) {
    return n.enter("reference"), n.enter("referenceMarker"), n.consume(c), n.exit("referenceMarker"), s;
  }
  function s(c) {
    return c === 93 ? (n.enter("referenceMarker"), n.consume(c), n.exit("referenceMarker"), n.exit("reference"), r) : i(c);
  }
}
const d6 = {
  name: "labelStartImage",
  resolveAll: pm.resolveAll,
  tokenize: h6
};
function h6(n, r, i) {
  const l = this;
  return s;
  function s(g) {
    return n.enter("labelImage"), n.enter("labelImageMarker"), n.consume(g), n.exit("labelImageMarker"), c;
  }
  function c(g) {
    return g === 91 ? (n.enter("labelMarker"), n.consume(g), n.exit("labelMarker"), n.exit("labelImage"), f) : i(g);
  }
  function f(g) {
    return g === 94 && "_hiddenFootnoteSupport" in l.parser.constructs ? i(g) : r(g);
  }
}
const m6 = {
  name: "labelStartLink",
  resolveAll: pm.resolveAll,
  tokenize: p6
};
function p6(n, r, i) {
  const l = this;
  return s;
  function s(f) {
    return n.enter("labelLink"), n.enter("labelMarker"), n.consume(f), n.exit("labelMarker"), n.exit("labelLink"), c;
  }
  function c(f) {
    return f === 94 && "_hiddenFootnoteSupport" in l.parser.constructs ? i(f) : r(f);
  }
}
const oh = {
  name: "lineEnding",
  tokenize: g6
};
function g6(n, r) {
  return i;
  function i(l) {
    return n.enter("lineEnding"), n.consume(l), n.exit("lineEnding"), vt(n, r, "linePrefix");
  }
}
const kc = {
  name: "thematicBreak",
  tokenize: y6
};
function y6(n, r, i) {
  let l = 0, s;
  return c;
  function c(b) {
    return n.enter("thematicBreak"), f(b);
  }
  function f(b) {
    return s = b, g(b);
  }
  function g(b) {
    return b === s ? (n.enter("thematicBreakSequence"), y(b)) : l >= 3 && (b === null || Ze(b)) ? (n.exit("thematicBreak"), r(b)) : i(b);
  }
  function y(b) {
    return b === s ? (n.consume(b), l++, y) : (n.exit("thematicBreakSequence"), ht(b) ? vt(n, g, "whitespace")(b) : g(b));
  }
}
const Qn = {
  continuation: {
    tokenize: S6
  },
  exit: k6,
  name: "list",
  tokenize: v6
}, b6 = {
  partial: !0,
  tokenize: C6
}, x6 = {
  partial: !0,
  tokenize: w6
};
function v6(n, r, i) {
  const l = this, s = l.events[l.events.length - 1];
  let c = s && s[1].type === "linePrefix" ? s[2].sliceSerialize(s[1], !0).length : 0, f = 0;
  return g;
  function g(E) {
    const N = l.containerState.type || (E === 42 || E === 43 || E === 45 ? "listUnordered" : "listOrdered");
    if (N === "listUnordered" ? !l.containerState.marker || E === l.containerState.marker : Rh(E)) {
      if (l.containerState.type || (l.containerState.type = N, n.enter(N, {
        _container: !0
      })), N === "listUnordered")
        return n.enter("listItemPrefix"), E === 42 || E === 45 ? n.check(kc, i, b)(E) : b(E);
      if (!l.interrupt || E === 49)
        return n.enter("listItemPrefix"), n.enter("listItemValue"), y(E);
    }
    return i(E);
  }
  function y(E) {
    return Rh(E) && ++f < 10 ? (n.consume(E), y) : (!l.interrupt || f < 2) && (l.containerState.marker ? E === l.containerState.marker : E === 41 || E === 46) ? (n.exit("listItemValue"), b(E)) : i(E);
  }
  function b(E) {
    return n.enter("listItemMarker"), n.consume(E), n.exit("listItemMarker"), l.containerState.marker = l.containerState.marker || E, n.check(
      Xs,
      // Cant be empty when interrupting.
      l.interrupt ? i : S,
      n.attempt(b6, _, x)
    );
  }
  function S(E) {
    return l.containerState.initialBlankLine = !0, c++, _(E);
  }
  function x(E) {
    return ht(E) ? (n.enter("listItemPrefixWhitespace"), n.consume(E), n.exit("listItemPrefixWhitespace"), _) : i(E);
  }
  function _(E) {
    return l.containerState.size = c + l.sliceSerialize(n.exit("listItemPrefix"), !0).length, r(E);
  }
}
function S6(n, r, i) {
  const l = this;
  return l.containerState._closeFlow = void 0, n.check(Xs, s, c);
  function s(g) {
    return l.containerState.furtherBlankLines = l.containerState.furtherBlankLines || l.containerState.initialBlankLine, vt(n, r, "listItemIndent", l.containerState.size + 1)(g);
  }
  function c(g) {
    return l.containerState.furtherBlankLines || !ht(g) ? (l.containerState.furtherBlankLines = void 0, l.containerState.initialBlankLine = void 0, f(g)) : (l.containerState.furtherBlankLines = void 0, l.containerState.initialBlankLine = void 0, n.attempt(x6, r, f)(g));
  }
  function f(g) {
    return l.containerState._closeFlow = !0, l.interrupt = void 0, vt(n, n.attempt(Qn, r, i), "linePrefix", l.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(g);
  }
}
function w6(n, r, i) {
  const l = this;
  return vt(n, s, "listItemIndent", l.containerState.size + 1);
  function s(c) {
    const f = l.events[l.events.length - 1];
    return f && f[1].type === "listItemIndent" && f[2].sliceSerialize(f[1], !0).length === l.containerState.size ? r(c) : i(c);
  }
}
function k6(n) {
  n.exit(this.containerState.type);
}
function C6(n, r, i) {
  const l = this;
  return vt(n, s, "listItemPrefixWhitespace", l.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 5);
  function s(c) {
    const f = l.events[l.events.length - 1];
    return !ht(c) && f && f[1].type === "listItemPrefixWhitespace" ? r(c) : i(c);
  }
}
const w1 = {
  name: "setextUnderline",
  resolveTo: E6,
  tokenize: _6
};
function E6(n, r) {
  let i = n.length, l, s, c;
  for (; i--; )
    if (n[i][0] === "enter") {
      if (n[i][1].type === "content") {
        l = i;
        break;
      }
      n[i][1].type === "paragraph" && (s = i);
    } else
      n[i][1].type === "content" && n.splice(i, 1), !c && n[i][1].type === "definition" && (c = i);
  const f = {
    type: "setextHeading",
    start: {
      ...n[l][1].start
    },
    end: {
      ...n[n.length - 1][1].end
    }
  };
  return n[s][1].type = "setextHeadingText", c ? (n.splice(s, 0, ["enter", f, r]), n.splice(c + 1, 0, ["exit", n[l][1], r]), n[l][1].end = {
    ...n[c][1].end
  }) : n[l][1] = f, n.push(["exit", f, r]), n;
}
function _6(n, r, i) {
  const l = this;
  let s;
  return c;
  function c(b) {
    let S = l.events.length, x;
    for (; S--; )
      if (l.events[S][1].type !== "lineEnding" && l.events[S][1].type !== "linePrefix" && l.events[S][1].type !== "content") {
        x = l.events[S][1].type === "paragraph";
        break;
      }
    return !l.parser.lazy[l.now().line] && (l.interrupt || x) ? (n.enter("setextHeadingLine"), s = b, f(b)) : i(b);
  }
  function f(b) {
    return n.enter("setextHeadingLineSequence"), g(b);
  }
  function g(b) {
    return b === s ? (n.consume(b), g) : (n.exit("setextHeadingLineSequence"), ht(b) ? vt(n, y, "lineSuffix")(b) : y(b));
  }
  function y(b) {
    return b === null || Ze(b) ? (n.exit("setextHeadingLine"), r(b)) : i(b);
  }
}
const j6 = {
  tokenize: T6
};
function T6(n) {
  const r = this, i = n.attempt(
    // Try to parse a blank line.
    Xs,
    l,
    // Try to parse initial flow (essentially, only code).
    n.attempt(this.parser.constructs.flowInitial, s, vt(n, n.attempt(this.parser.constructs.flow, s, n.attempt(O5, s)), "linePrefix"))
  );
  return i;
  function l(c) {
    if (c === null) {
      n.consume(c);
      return;
    }
    return n.enter("lineEndingBlank"), n.consume(c), n.exit("lineEndingBlank"), r.currentConstruct = void 0, i;
  }
  function s(c) {
    if (c === null) {
      n.consume(c);
      return;
    }
    return n.enter("lineEnding"), n.consume(c), n.exit("lineEnding"), r.currentConstruct = void 0, i;
  }
}
const N6 = {
  resolveAll: r2()
}, A6 = n2("string"), z6 = n2("text");
function n2(n) {
  return {
    resolveAll: r2(n === "text" ? M6 : void 0),
    tokenize: r
  };
  function r(i) {
    const l = this, s = this.parser.constructs[n], c = i.attempt(s, f, g);
    return f;
    function f(S) {
      return b(S) ? c(S) : g(S);
    }
    function g(S) {
      if (S === null) {
        i.consume(S);
        return;
      }
      return i.enter("data"), i.consume(S), y;
    }
    function y(S) {
      return b(S) ? (i.exit("data"), c(S)) : (i.consume(S), y);
    }
    function b(S) {
      if (S === null)
        return !0;
      const x = s[S];
      let _ = -1;
      if (x)
        for (; ++_ < x.length; ) {
          const E = x[_];
          if (!E.previous || E.previous.call(l, l.previous))
            return !0;
        }
      return !1;
    }
  }
}
function r2(n) {
  return r;
  function r(i, l) {
    let s = -1, c;
    for (; ++s <= i.length; )
      c === void 0 ? i[s] && i[s][1].type === "data" && (c = s, s++) : (!i[s] || i[s][1].type !== "data") && (s !== c + 2 && (i[c][1].end = i[s - 1][1].end, i.splice(c + 2, s - c - 2), s = c + 2), c = void 0);
    return n ? n(i, l) : i;
  }
}
function M6(n, r) {
  let i = 0;
  for (; ++i <= n.length; )
    if ((i === n.length || n[i][1].type === "lineEnding") && n[i - 1][1].type === "data") {
      const l = n[i - 1][1], s = r.sliceStream(l);
      let c = s.length, f = -1, g = 0, y;
      for (; c--; ) {
        const b = s[c];
        if (typeof b == "string") {
          for (f = b.length; b.charCodeAt(f - 1) === 32; )
            g++, f--;
          if (f) break;
          f = -1;
        } else if (b === -2)
          y = !0, g++;
        else if (b !== -1) {
          c++;
          break;
        }
      }
      if (r._contentTypeTextTrailing && i === n.length && (g = 0), g) {
        const b = {
          type: i === n.length || y || g < 2 ? "lineSuffix" : "hardBreakTrailing",
          start: {
            _bufferIndex: c ? f : l.start._bufferIndex + f,
            _index: l.start._index + c,
            line: l.end.line,
            column: l.end.column - g,
            offset: l.end.offset - g
          },
          end: {
            ...l.end
          }
        };
        l.end = {
          ...b.start
        }, l.start.offset === l.end.offset ? Object.assign(l, b) : (n.splice(i, 0, ["enter", b, r], ["exit", b, r]), i += 2);
      }
      i++;
    }
  return n;
}
const O6 = {
  42: Qn,
  43: Qn,
  45: Qn,
  48: Qn,
  49: Qn,
  50: Qn,
  51: Qn,
  52: Qn,
  53: Qn,
  54: Qn,
  55: Qn,
  56: Qn,
  57: Qn,
  62: Xy
}, D6 = {
  91: U5
}, R6 = {
  [-2]: lh,
  [-1]: lh,
  32: lh
}, L6 = {
  35: V5,
  42: kc,
  45: [w1, kc],
  60: Y5,
  61: w1,
  95: kc,
  96: v1,
  126: v1
}, B6 = {
  38: Zy,
  92: Qy
}, U6 = {
  [-5]: oh,
  [-4]: oh,
  [-3]: oh,
  33: d6,
  38: Zy,
  42: Lh,
  60: [m5, t6],
  91: m6,
  92: [P5, Qy],
  93: pm,
  95: Lh,
  96: j5
}, I6 = {
  null: [Lh, N6]
}, q6 = {
  null: [42, 95]
}, H6 = {
  null: []
}, P6 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  attentionMarkers: q6,
  contentInitial: D6,
  disable: H6,
  document: O6,
  flow: L6,
  flowInitial: R6,
  insideSpan: I6,
  string: B6,
  text: U6
}, Symbol.toStringTag, { value: "Module" }));
function F6(n, r, i) {
  let l = {
    _bufferIndex: -1,
    _index: 0,
    line: i && i.line || 1,
    column: i && i.column || 1,
    offset: i && i.offset || 0
  };
  const s = {}, c = [];
  let f = [], g = [];
  const y = {
    attempt: J(we),
    check: J(I),
    consume: ne,
    enter: ie,
    exit: _e,
    interrupt: J(I, {
      interrupt: !0
    })
  }, b = {
    code: null,
    containerState: {},
    defineSkip: U,
    events: [],
    now: N,
    parser: n,
    previous: null,
    sliceSerialize: _,
    sliceStream: E,
    write: x
  };
  let S = r.tokenize.call(b, y);
  return r.resolveAll && c.push(r), b;
  function x(Q) {
    return f = Er(f, Q), G(), f[f.length - 1] !== null ? [] : (De(r, 0), b.events = Vc(c, b.events, b), b.events);
  }
  function _(Q, ye) {
    return K6(E(Q), ye);
  }
  function E(Q) {
    return V6(f, Q);
  }
  function N() {
    const {
      _bufferIndex: Q,
      _index: ye,
      line: Be,
      column: Me,
      offset: ke
    } = l;
    return {
      _bufferIndex: Q,
      _index: ye,
      line: Be,
      column: Me,
      offset: ke
    };
  }
  function U(Q) {
    s[Q.line] = Q.column, W();
  }
  function G() {
    let Q;
    for (; l._index < f.length; ) {
      const ye = f[l._index];
      if (typeof ye == "string")
        for (Q = l._index, l._bufferIndex < 0 && (l._bufferIndex = 0); l._index === Q && l._bufferIndex < ye.length; )
          D(ye.charCodeAt(l._bufferIndex));
      else
        D(ye);
    }
  }
  function D(Q) {
    S = S(Q);
  }
  function ne(Q) {
    Ze(Q) ? (l.line++, l.column = 1, l.offset += Q === -3 ? 2 : 1, W()) : Q !== -1 && (l.column++, l.offset++), l._bufferIndex < 0 ? l._index++ : (l._bufferIndex++, l._bufferIndex === // Points w/ non-negative `_bufferIndex` reference
    // strings.
    /** @type {string} */
    f[l._index].length && (l._bufferIndex = -1, l._index++)), b.previous = Q;
  }
  function ie(Q, ye) {
    const Be = ye || {};
    return Be.type = Q, Be.start = N(), b.events.push(["enter", Be, b]), g.push(Be), Be;
  }
  function _e(Q) {
    const ye = g.pop();
    return ye.end = N(), b.events.push(["exit", ye, b]), ye;
  }
  function we(Q, ye) {
    De(Q, ye.from);
  }
  function I(Q, ye) {
    ye.restore();
  }
  function J(Q, ye) {
    return Be;
    function Be(Me, ke, ee) {
      let ve, Ie, Pe, M;
      return Array.isArray(Me) ? (
        /* c8 ignore next 1 */
        he(Me)
      ) : "tokenize" in Me ? (
        // Looks like a construct.
        he([
          /** @type {Construct} */
          Me
        ])
      ) : B(Me);
      function B(Se) {
        return $e;
        function $e(ut) {
          const Ne = ut !== null && Se[ut], xn = ut !== null && Se.null, qn = [
            // To do: add more extension tests.
            /* c8 ignore next 2 */
            ...Array.isArray(Ne) ? Ne : Ne ? [Ne] : [],
            ...Array.isArray(xn) ? xn : xn ? [xn] : []
          ];
          return he(qn)(ut);
        }
      }
      function he(Se) {
        return ve = Se, Ie = 0, Se.length === 0 ? ee : z(Se[Ie]);
      }
      function z(Se) {
        return $e;
        function $e(ut) {
          return M = He(), Pe = Se, Se.partial || (b.currentConstruct = Se), Se.name && b.parser.constructs.disable.null.includes(Se.name) ? me() : Se.tokenize.call(
            // If we do have fields, create an object w/ `context` as its
            // prototype.
            // This allows a live binding, which is needed for `interrupt`.
            ye ? Object.assign(Object.create(b), ye) : b,
            y,
            ue,
            me
          )(ut);
        }
      }
      function ue(Se) {
        return Q(Pe, M), ke;
      }
      function me(Se) {
        return M.restore(), ++Ie < ve.length ? z(ve[Ie]) : ee;
      }
    }
  }
  function De(Q, ye) {
    Q.resolveAll && !c.includes(Q) && c.push(Q), Q.resolve && dr(b.events, ye, b.events.length - ye, Q.resolve(b.events.slice(ye), b)), Q.resolveTo && (b.events = Q.resolveTo(b.events, b));
  }
  function He() {
    const Q = N(), ye = b.previous, Be = b.currentConstruct, Me = b.events.length, ke = Array.from(g);
    return {
      from: Me,
      restore: ee
    };
    function ee() {
      l = Q, b.previous = ye, b.currentConstruct = Be, b.events.length = Me, g = ke, W();
    }
  }
  function W() {
    l.line in s && l.column < 2 && (l.column = s[l.line], l.offset += s[l.line] - 1);
  }
}
function V6(n, r) {
  const i = r.start._index, l = r.start._bufferIndex, s = r.end._index, c = r.end._bufferIndex;
  let f;
  if (i === s)
    f = [n[i].slice(l, c)];
  else {
    if (f = n.slice(i, s), l > -1) {
      const g = f[0];
      typeof g == "string" ? f[0] = g.slice(l) : f.shift();
    }
    c > 0 && f.push(n[s].slice(0, c));
  }
  return f;
}
function K6(n, r) {
  let i = -1;
  const l = [];
  let s;
  for (; ++i < n.length; ) {
    const c = n[i];
    let f;
    if (typeof c == "string")
      f = c;
    else switch (c) {
      case -5: {
        f = "\r";
        break;
      }
      case -4: {
        f = `
`;
        break;
      }
      case -3: {
        f = `\r
`;
        break;
      }
      case -2: {
        f = r ? " " : "	";
        break;
      }
      case -1: {
        if (!r && s) continue;
        f = " ";
        break;
      }
      default:
        f = String.fromCharCode(c);
    }
    s = c === -2, l.push(f);
  }
  return l.join("");
}
function G6(n) {
  const l = {
    constructs: (
      /** @type {FullNormalizedExtension} */
      $y([P6, ...(n || {}).extensions || []])
    ),
    content: s(o5),
    defined: [],
    document: s(u5),
    flow: s(j6),
    lazy: {},
    string: s(A6),
    text: s(z6)
  };
  return l;
  function s(c) {
    return f;
    function f(g) {
      return F6(l, c, g);
    }
  }
}
function $6(n) {
  for (; !Wy(n); )
    ;
  return n;
}
const k1 = /[\0\t\n\r]/g;
function Y6() {
  let n = 1, r = "", i = !0, l;
  return s;
  function s(c, f, g) {
    const y = [];
    let b, S, x, _, E;
    for (c = r + (typeof c == "string" ? c.toString() : new TextDecoder(f || void 0).decode(c)), x = 0, r = "", i && (c.charCodeAt(0) === 65279 && x++, i = void 0); x < c.length; ) {
      if (k1.lastIndex = x, b = k1.exec(c), _ = b && b.index !== void 0 ? b.index : c.length, E = c.charCodeAt(_), !b) {
        r = c.slice(x);
        break;
      }
      if (E === 10 && x === _ && l)
        y.push(-3), l = void 0;
      else
        switch (l && (y.push(-5), l = void 0), x < _ && (y.push(c.slice(x, _)), n += _ - x), E) {
          case 0: {
            y.push(65533), n++;
            break;
          }
          case 9: {
            for (S = Math.ceil(n / 4) * 4, y.push(-2); n++ < S; ) y.push(-1);
            break;
          }
          case 10: {
            y.push(-4), n = 1;
            break;
          }
          default:
            l = !0, n = 1;
        }
      x = _ + 1;
    }
    return g && (l && y.push(-5), r && y.push(r), y.push(null)), y;
  }
}
const X6 = /\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;
function Q6(n) {
  return n.replace(X6, Z6);
}
function Z6(n, r, i) {
  if (r)
    return r;
  if (i.charCodeAt(0) === 35) {
    const s = i.charCodeAt(1), c = s === 120 || s === 88;
    return Yy(i.slice(c ? 2 : 1), c ? 16 : 10);
  }
  return mm(i) || n;
}
const i2 = {}.hasOwnProperty;
function W6(n, r, i) {
  return typeof r != "string" && (i = r, r = void 0), J6(i)($6(G6(i).document().write(Y6()(n, r, !0))));
}
function J6(n) {
  const r = {
    transforms: [],
    canContainEols: ["emphasis", "fragment", "heading", "paragraph", "strong"],
    enter: {
      autolink: c(Ui),
      autolinkProtocol: He,
      autolinkEmail: He,
      atxHeading: c(Hn),
      blockQuote: c(xn),
      characterEscape: He,
      characterReference: He,
      codeFenced: c(qn),
      codeFencedFenceInfo: f,
      codeFencedFenceMeta: f,
      codeIndented: c(qn, f),
      codeText: c(bt, f),
      codeTextData: He,
      data: He,
      codeFlowValue: He,
      definition: c(Rr),
      definitionDestinationString: f,
      definitionLabelString: f,
      definitionTitleString: f,
      emphasis: c(_r),
      hardBreakEscape: c(Bi),
      hardBreakTrailing: c(Bi),
      htmlFlow: c(fl, f),
      htmlFlowData: He,
      htmlText: c(fl, f),
      htmlTextData: He,
      image: c(dl),
      label: f,
      link: c(Ui),
      listItem: c(jn),
      listItemValue: _,
      listOrdered: c(Lr, x),
      listUnordered: c(Lr),
      paragraph: c(hl),
      reference: z,
      referenceString: f,
      resourceDestinationString: f,
      resourceTitleString: f,
      setextHeading: c(Hn),
      strong: c(ri),
      thematicBreak: c(ii)
    },
    exit: {
      atxHeading: y(),
      atxHeadingSequence: we,
      autolink: y(),
      autolinkEmail: Ne,
      autolinkProtocol: ut,
      blockQuote: y(),
      characterEscapeValue: W,
      characterReferenceMarkerHexadecimal: me,
      characterReferenceMarkerNumeric: me,
      characterReferenceValue: Se,
      characterReference: $e,
      codeFenced: y(G),
      codeFencedFence: U,
      codeFencedFenceInfo: E,
      codeFencedFenceMeta: N,
      codeFlowValue: W,
      codeIndented: y(D),
      codeText: y(ke),
      codeTextData: W,
      data: W,
      definition: y(),
      definitionDestinationString: _e,
      definitionLabelString: ne,
      definitionTitleString: ie,
      emphasis: y(),
      hardBreakEscape: y(ye),
      hardBreakTrailing: y(ye),
      htmlFlow: y(Be),
      htmlFlowData: W,
      htmlText: y(Me),
      htmlTextData: W,
      image: y(ve),
      label: Pe,
      labelText: Ie,
      lineEnding: Q,
      link: y(ee),
      listItem: y(),
      listOrdered: y(),
      listUnordered: y(),
      paragraph: y(),
      referenceString: ue,
      resourceDestinationString: M,
      resourceTitleString: B,
      resource: he,
      setextHeading: y(De),
      setextHeadingLineSequence: J,
      setextHeadingText: I,
      strong: y(),
      thematicBreak: y()
    }
  };
  a2(r, (n || {}).mdastExtensions || []);
  const i = {};
  return l;
  function l(de) {
    let Te = {
      type: "root",
      children: []
    };
    const Qe = {
      stack: [Te],
      tokenStack: [],
      config: r,
      enter: g,
      exit: b,
      buffer: f,
      resume: S,
      data: i
    }, rt = [];
    let xt = -1;
    for (; ++xt < de.length; )
      if (de[xt][1].type === "listOrdered" || de[xt][1].type === "listUnordered")
        if (de[xt][0] === "enter")
          rt.push(xt);
        else {
          const hn = rt.pop();
          xt = s(de, hn, xt);
        }
    for (xt = -1; ++xt < de.length; ) {
      const hn = r[de[xt][0]];
      i2.call(hn, de[xt][1].type) && hn[de[xt][1].type].call(Object.assign({
        sliceSerialize: de[xt][2].sliceSerialize
      }, Qe), de[xt][1]);
    }
    if (Qe.tokenStack.length > 0) {
      const hn = Qe.tokenStack[Qe.tokenStack.length - 1];
      (hn[1] || C1).call(Qe, void 0, hn[0]);
    }
    for (Te.position = {
      start: va(de.length > 0 ? de[0][1].start : {
        line: 1,
        column: 1,
        offset: 0
      }),
      end: va(de.length > 0 ? de[de.length - 2][1].end : {
        line: 1,
        column: 1,
        offset: 0
      })
    }, xt = -1; ++xt < r.transforms.length; )
      Te = r.transforms[xt](Te) || Te;
    return Te;
  }
  function s(de, Te, Qe) {
    let rt = Te - 1, xt = -1, hn = !1, vn, Jt, Vt, Kt;
    for (; ++rt <= Qe; ) {
      const Oe = de[rt];
      switch (Oe[1].type) {
        case "listUnordered":
        case "listOrdered":
        case "blockQuote": {
          Oe[0] === "enter" ? xt++ : xt--, Kt = void 0;
          break;
        }
        case "lineEndingBlank": {
          Oe[0] === "enter" && (vn && !Kt && !xt && !Vt && (Vt = rt), Kt = void 0);
          break;
        }
        case "linePrefix":
        case "listItemValue":
        case "listItemMarker":
        case "listItemPrefix":
        case "listItemPrefixWhitespace":
          break;
        default:
          Kt = void 0;
      }
      if (!xt && Oe[0] === "enter" && Oe[1].type === "listItemPrefix" || xt === -1 && Oe[0] === "exit" && (Oe[1].type === "listUnordered" || Oe[1].type === "listOrdered")) {
        if (vn) {
          let Pn = rt;
          for (Jt = void 0; Pn--; ) {
            const cn = de[Pn];
            if (cn[1].type === "lineEnding" || cn[1].type === "lineEndingBlank") {
              if (cn[0] === "exit") continue;
              Jt && (de[Jt][1].type = "lineEndingBlank", hn = !0), cn[1].type = "lineEnding", Jt = Pn;
            } else if (!(cn[1].type === "linePrefix" || cn[1].type === "blockQuotePrefix" || cn[1].type === "blockQuotePrefixWhitespace" || cn[1].type === "blockQuoteMarker" || cn[1].type === "listItemIndent")) break;
          }
          Vt && (!Jt || Vt < Jt) && (vn._spread = !0), vn.end = Object.assign({}, Jt ? de[Jt][1].start : Oe[1].end), de.splice(Jt || rt, 0, ["exit", vn, Oe[2]]), rt++, Qe++;
        }
        if (Oe[1].type === "listItemPrefix") {
          const Pn = {
            type: "listItem",
            _spread: !1,
            start: Object.assign({}, Oe[1].start),
            // @ts-expect-error: well add `end` in a second.
            end: void 0
          };
          vn = Pn, de.splice(rt, 0, ["enter", Pn, Oe[2]]), rt++, Qe++, Vt = void 0, Kt = !0;
        }
      }
    }
    return de[Te][1]._spread = hn, Qe;
  }
  function c(de, Te) {
    return Qe;
    function Qe(rt) {
      g.call(this, de(rt), rt), Te && Te.call(this, rt);
    }
  }
  function f() {
    this.stack.push({
      type: "fragment",
      children: []
    });
  }
  function g(de, Te, Qe) {
    this.stack[this.stack.length - 1].children.push(de), this.stack.push(de), this.tokenStack.push([Te, Qe || void 0]), de.position = {
      start: va(Te.start),
      // @ts-expect-error: `end` will be patched later.
      end: void 0
    };
  }
  function y(de) {
    return Te;
    function Te(Qe) {
      de && de.call(this, Qe), b.call(this, Qe);
    }
  }
  function b(de, Te) {
    const Qe = this.stack.pop(), rt = this.tokenStack.pop();
    if (rt)
      rt[0].type !== de.type && (Te ? Te.call(this, de, rt[0]) : (rt[1] || C1).call(this, de, rt[0]));
    else throw new Error("Cannot close `" + de.type + "` (" + Rs({
      start: de.start,
      end: de.end
    }) + "): its not open");
    Qe.position.end = va(de.end);
  }
  function S() {
    return hm(this.stack.pop());
  }
  function x() {
    this.data.expectingFirstListItemValue = !0;
  }
  function _(de) {
    if (this.data.expectingFirstListItemValue) {
      const Te = this.stack[this.stack.length - 2];
      Te.start = Number.parseInt(this.sliceSerialize(de), 10), this.data.expectingFirstListItemValue = void 0;
    }
  }
  function E() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.lang = de;
  }
  function N() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.meta = de;
  }
  function U() {
    this.data.flowCodeInside || (this.buffer(), this.data.flowCodeInside = !0);
  }
  function G() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.value = de.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g, ""), this.data.flowCodeInside = void 0;
  }
  function D() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.value = de.replace(/(\r?\n|\r)$/g, "");
  }
  function ne(de) {
    const Te = this.resume(), Qe = this.stack[this.stack.length - 1];
    Qe.label = Te, Qe.identifier = Dr(this.sliceSerialize(de)).toLowerCase();
  }
  function ie() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.title = de;
  }
  function _e() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.url = de;
  }
  function we(de) {
    const Te = this.stack[this.stack.length - 1];
    if (!Te.depth) {
      const Qe = this.sliceSerialize(de).length;
      Te.depth = Qe;
    }
  }
  function I() {
    this.data.setextHeadingSlurpLineEnding = !0;
  }
  function J(de) {
    const Te = this.stack[this.stack.length - 1];
    Te.depth = this.sliceSerialize(de).codePointAt(0) === 61 ? 1 : 2;
  }
  function De() {
    this.data.setextHeadingSlurpLineEnding = void 0;
  }
  function He(de) {
    const Qe = this.stack[this.stack.length - 1].children;
    let rt = Qe[Qe.length - 1];
    (!rt || rt.type !== "text") && (rt = dn(), rt.position = {
      start: va(de.start),
      // @ts-expect-error: well add `end` later.
      end: void 0
    }, Qe.push(rt)), this.stack.push(rt);
  }
  function W(de) {
    const Te = this.stack.pop();
    Te.value += this.sliceSerialize(de), Te.position.end = va(de.end);
  }
  function Q(de) {
    const Te = this.stack[this.stack.length - 1];
    if (this.data.atHardBreak) {
      const Qe = Te.children[Te.children.length - 1];
      Qe.position.end = va(de.end), this.data.atHardBreak = void 0;
      return;
    }
    !this.data.setextHeadingSlurpLineEnding && r.canContainEols.includes(Te.type) && (He.call(this, de), W.call(this, de));
  }
  function ye() {
    this.data.atHardBreak = !0;
  }
  function Be() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.value = de;
  }
  function Me() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.value = de;
  }
  function ke() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.value = de;
  }
  function ee() {
    const de = this.stack[this.stack.length - 1];
    if (this.data.inReference) {
      const Te = this.data.referenceType || "shortcut";
      de.type += "Reference", de.referenceType = Te, delete de.url, delete de.title;
    } else
      delete de.identifier, delete de.label;
    this.data.referenceType = void 0;
  }
  function ve() {
    const de = this.stack[this.stack.length - 1];
    if (this.data.inReference) {
      const Te = this.data.referenceType || "shortcut";
      de.type += "Reference", de.referenceType = Te, delete de.url, delete de.title;
    } else
      delete de.identifier, delete de.label;
    this.data.referenceType = void 0;
  }
  function Ie(de) {
    const Te = this.sliceSerialize(de), Qe = this.stack[this.stack.length - 2];
    Qe.label = Q6(Te), Qe.identifier = Dr(Te).toLowerCase();
  }
  function Pe() {
    const de = this.stack[this.stack.length - 1], Te = this.resume(), Qe = this.stack[this.stack.length - 1];
    if (this.data.inReference = !0, Qe.type === "link") {
      const rt = de.children;
      Qe.children = rt;
    } else
      Qe.alt = Te;
  }
  function M() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.url = de;
  }
  function B() {
    const de = this.resume(), Te = this.stack[this.stack.length - 1];
    Te.title = de;
  }
  function he() {
    this.data.inReference = void 0;
  }
  function z() {
    this.data.referenceType = "collapsed";
  }
  function ue(de) {
    const Te = this.resume(), Qe = this.stack[this.stack.length - 1];
    Qe.label = Te, Qe.identifier = Dr(this.sliceSerialize(de)).toLowerCase(), this.data.referenceType = "full";
  }
  function me(de) {
    this.data.characterReferenceType = de.type;
  }
  function Se(de) {
    const Te = this.sliceSerialize(de), Qe = this.data.characterReferenceType;
    let rt;
    Qe ? (rt = Yy(Te, Qe === "characterReferenceMarkerNumeric" ? 10 : 16), this.data.characterReferenceType = void 0) : rt = mm(Te);
    const xt = this.stack[this.stack.length - 1];
    xt.value += rt;
  }
  function $e(de) {
    const Te = this.stack.pop();
    Te.position.end = va(de.end);
  }
  function ut(de) {
    W.call(this, de);
    const Te = this.stack[this.stack.length - 1];
    Te.url = this.sliceSerialize(de);
  }
  function Ne(de) {
    W.call(this, de);
    const Te = this.stack[this.stack.length - 1];
    Te.url = "mailto:" + this.sliceSerialize(de);
  }
  function xn() {
    return {
      type: "blockquote",
      children: []
    };
  }
  function qn() {
    return {
      type: "code",
      lang: null,
      meta: null,
      value: ""
    };
  }
  function bt() {
    return {
      type: "inlineCode",
      value: ""
    };
  }
  function Rr() {
    return {
      type: "definition",
      identifier: "",
      label: null,
      title: null,
      url: ""
    };
  }
  function _r() {
    return {
      type: "emphasis",
      children: []
    };
  }
  function Hn() {
    return {
      type: "heading",
      // @ts-expect-error `depth` will be set later.
      depth: 0,
      children: []
    };
  }
  function Bi() {
    return {
      type: "break"
    };
  }
  function fl() {
    return {
      type: "html",
      value: ""
    };
  }
  function dl() {
    return {
      type: "image",
      title: null,
      url: "",
      alt: null
    };
  }
  function Ui() {
    return {
      type: "link",
      title: null,
      url: "",
      children: []
    };
  }
  function Lr(de) {
    return {
      type: "list",
      ordered: de.type === "listOrdered",
      start: null,
      spread: de._spread,
      children: []
    };
  }
  function jn(de) {
    return {
      type: "listItem",
      spread: de._spread,
      checked: null,
      children: []
    };
  }
  function hl() {
    return {
      type: "paragraph",
      children: []
    };
  }
  function ri() {
    return {
      type: "strong",
      children: []
    };
  }
  function dn() {
    return {
      type: "text",
      value: ""
    };
  }
  function ii() {
    return {
      type: "thematicBreak"
    };
  }
}
function va(n) {
  return {
    line: n.line,
    column: n.column,
    offset: n.offset
  };
}
function a2(n, r) {
  let i = -1;
  for (; ++i < r.length; ) {
    const l = r[i];
    Array.isArray(l) ? a2(n, l) : e8(n, l);
  }
}
function e8(n, r) {
  let i;
  for (i in r)
    if (i2.call(r, i))
      switch (i) {
        case "canContainEols": {
          const l = r[i];
          l && n[i].push(...l);
          break;
        }
        case "transforms": {
          const l = r[i];
          l && n[i].push(...l);
          break;
        }
        case "enter":
        case "exit": {
          const l = r[i];
          l && Object.assign(n[i], l);
          break;
        }
      }
}
function C1(n, r) {
  throw n ? new Error("Cannot close `" + n.type + "` (" + Rs({
    start: n.start,
    end: n.end
  }) + "): a different token (`" + r.type + "`, " + Rs({
    start: r.start,
    end: r.end
  }) + ") is open") : new Error("Cannot close document, a token (`" + r.type + "`, " + Rs({
    start: r.start,
    end: r.end
  }) + ") is still open");
}
function t8(n) {
  const r = this;
  r.parser = i;
  function i(l) {
    return W6(l, {
      ...r.data("settings"),
      ...n,
      // Note: these options are not in the readme.
      // The goal is for them to be set by plugins on `data` instead of being
      // passed by users.
      extensions: r.data("micromarkExtensions") || [],
      mdastExtensions: r.data("fromMarkdownExtensions") || []
    });
  }
}
function n8(n, r) {
  const i = {
    type: "element",
    tagName: "blockquote",
    properties: {},
    children: n.wrap(n.all(r), !0)
  };
  return n.patch(r, i), n.applyData(r, i);
}
function r8(n, r) {
  const i = { type: "element", tagName: "br", properties: {}, children: [] };
  return n.patch(r, i), [n.applyData(r, i), { type: "text", value: `
` }];
}
function i8(n, r) {
  const i = r.value ? r.value + `
` : "", l = {}, s = r.lang ? r.lang.split(/\s+/) : [];
  s.length > 0 && (l.className = ["language-" + s[0]]);
  let c = {
    type: "element",
    tagName: "code",
    properties: l,
    children: [{ type: "text", value: i }]
  };
  return r.meta && (c.data = { meta: r.meta }), n.patch(r, c), c = n.applyData(r, c), c = { type: "element", tagName: "pre", properties: {}, children: [c] }, n.patch(r, c), c;
}
function a8(n, r) {
  const i = {
    type: "element",
    tagName: "del",
    properties: {},
    children: n.all(r)
  };
  return n.patch(r, i), n.applyData(r, i);
}
function l8(n, r) {
  const i = {
    type: "element",
    tagName: "em",
    properties: {},
    children: n.all(r)
  };
  return n.patch(r, i), n.applyData(r, i);
}
function o8(n, r) {
  const i = typeof n.options.clobberPrefix == "string" ? n.options.clobberPrefix : "user-content-", l = String(r.identifier).toUpperCase(), s = ko(l.toLowerCase()), c = n.footnoteOrder.indexOf(l);
  let f, g = n.footnoteCounts.get(l);
  g === void 0 ? (g = 0, n.footnoteOrder.push(l), f = n.footnoteOrder.length) : f = c + 1, g += 1, n.footnoteCounts.set(l, g);
  const y = {
    type: "element",
    tagName: "a",
    properties: {
      href: "#" + i + "fn-" + s,
      id: i + "fnref-" + s + (g > 1 ? "-" + g : ""),
      dataFootnoteRef: !0,
      ariaDescribedBy: ["footnote-label"]
    },
    children: [{ type: "text", value: String(f) }]
  };
  n.patch(r, y);
  const b = {
    type: "element",
    tagName: "sup",
    properties: {},
    children: [y]
  };
  return n.patch(r, b), n.applyData(r, b);
}
function s8(n, r) {
  const i = {
    type: "element",
    tagName: "h" + r.depth,
    properties: {},
    children: n.all(r)
  };
  return n.patch(r, i), n.applyData(r, i);
}
function u8(n, r) {
  if (n.options.allowDangerousHtml) {
    const i = { type: "raw", value: r.value };
    return n.patch(r, i), n.applyData(r, i);
  }
}
function l2(n, r) {
  const i = r.referenceType;
  let l = "]";
  if (i === "collapsed" ? l += "[]" : i === "full" && (l += "[" + (r.label || r.identifier) + "]"), r.type === "imageReference")
    return [{ type: "text", value: "![" + r.alt + l }];
  const s = n.all(r), c = s[0];
  c && c.type === "text" ? c.value = "[" + c.value : s.unshift({ type: "text", value: "[" });
  const f = s[s.length - 1];
  return f && f.type === "text" ? f.value += l : s.push({ type: "text", value: l }), s;
}
function c8(n, r) {
  const i = String(r.identifier).toUpperCase(), l = n.definitionById.get(i);
  if (!l)
    return l2(n, r);
  const s = { src: ko(l.url || ""), alt: r.alt };
  l.title !== null && l.title !== void 0 && (s.title = l.title);
  const c = { type: "element", tagName: "img", properties: s, children: [] };
  return n.patch(r, c), n.applyData(r, c);
}
function f8(n, r) {
  const i = { src: ko(r.url) };
  r.alt !== null && r.alt !== void 0 && (i.alt = r.alt), r.title !== null && r.title !== void 0 && (i.title = r.title);
  const l = { type: "element", tagName: "img", properties: i, children: [] };
  return n.patch(r, l), n.applyData(r, l);
}
function d8(n, r) {
  const i = { type: "text", value: r.value.replace(/\r?\n|\r/g, " ") };
  n.patch(r, i);
  const l = {
    type: "element",
    tagName: "code",
    properties: {},
    children: [i]
  };
  return n.patch(r, l), n.applyData(r, l);
}
function h8(n, r) {
  const i = String(r.identifier).toUpperCase(), l = n.definitionById.get(i);
  if (!l)
    return l2(n, r);
  const s = { href: ko(l.url || "") };
  l.title !== null && l.title !== void 0 && (s.title = l.title);
  const c = {
    type: "element",
    tagName: "a",
    properties: s,
    children: n.all(r)
  };
  return n.patch(r, c), n.applyData(r, c);
}
function m8(n, r) {
  const i = { href: ko(r.url) };
  r.title !== null && r.title !== void 0 && (i.title = r.title);
  const l = {
    type: "element",
    tagName: "a",
    properties: i,
    children: n.all(r)
  };
  return n.patch(r, l), n.applyData(r, l);
}
function p8(n, r, i) {
  const l = n.all(r), s = i ? g8(i) : o2(r), c = {}, f = [];
  if (typeof r.checked == "boolean") {
    const S = l[0];
    let x;
    S && S.type === "element" && S.tagName === "p" ? x = S : (x = { type: "element", tagName: "p", properties: {}, children: [] }, l.unshift(x)), x.children.length > 0 && x.children.unshift({ type: "text", value: " " }), x.children.unshift({
      type: "element",
      tagName: "input",
      properties: { type: "checkbox", checked: r.checked, disabled: !0 },
      children: []
    }), c.className = ["task-list-item"];
  }
  let g = -1;
  for (; ++g < l.length; ) {
    const S = l[g];
    (s || g !== 0 || S.type !== "element" || S.tagName !== "p") && f.push({ type: "text", value: `
` }), S.type === "element" && S.tagName === "p" && !s ? f.push(...S.children) : f.push(S);
  }
  const y = l[l.length - 1];
  y && (s || y.type !== "element" || y.tagName !== "p") && f.push({ type: "text", value: `
` });
  const b = { type: "element", tagName: "li", properties: c, children: f };
  return n.patch(r, b), n.applyData(r, b);
}
function g8(n) {
  let r = !1;
  if (n.type === "list") {
    r = n.spread || !1;
    const i = n.children;
    let l = -1;
    for (; !r && ++l < i.length; )
      r = o2(i[l]);
  }
  return r;
}
function o2(n) {
  const r = n.spread;
  return r ?? n.children.length > 1;
}
function y8(n, r) {
  const i = {}, l = n.all(r);
  let s = -1;
  for (typeof r.start == "number" && r.start !== 1 && (i.start = r.start); ++s < l.length; ) {
    const f = l[s];
    if (f.type === "element" && f.tagName === "li" && f.properties && Array.isArray(f.properties.className) && f.properties.className.includes("task-list-item")) {
      i.className = ["contains-task-list"];
      break;
    }
  }
  const c = {
    type: "element",
    tagName: r.ordered ? "ol" : "ul",
    properties: i,
    children: n.wrap(l, !0)
  };
  return n.patch(r, c), n.applyData(r, c);
}
function b8(n, r) {
  const i = {
    type: "element",
    tagName: "p",
    properties: {},
    children: n.all(r)
  };
  return n.patch(r, i), n.applyData(r, i);
}
function x8(n, r) {
  const i = { type: "root", children: n.wrap(n.all(r)) };
  return n.patch(r, i), n.applyData(r, i);
}
function v8(n, r) {
  const i = {
    type: "element",
    tagName: "strong",
    properties: {},
    children: n.all(r)
  };
  return n.patch(r, i), n.applyData(r, i);
}
function S8(n, r) {
  const i = n.all(r), l = i.shift(), s = [];
  if (l) {
    const f = {
      type: "element",
      tagName: "thead",
      properties: {},
      children: n.wrap([l], !0)
    };
    n.patch(r.children[0], f), s.push(f);
  }
  if (i.length > 0) {
    const f = {
      type: "element",
      tagName: "tbody",
      properties: {},
      children: n.wrap(i, !0)
    }, g = um(r.children[1]), y = qy(r.children[r.children.length - 1]);
    g && y && (f.position = { start: g, end: y }), s.push(f);
  }
  const c = {
    type: "element",
    tagName: "table",
    properties: {},
    children: n.wrap(s, !0)
  };
  return n.patch(r, c), n.applyData(r, c);
}
function w8(n, r, i) {
  const l = i ? i.children : void 0, c = (l ? l.indexOf(r) : 1) === 0 ? "th" : "td", f = i && i.type === "table" ? i.align : void 0, g = f ? f.length : r.children.length;
  let y = -1;
  const b = [];
  for (; ++y < g; ) {
    const x = r.children[y], _ = {}, E = f ? f[y] : void 0;
    E && (_.align = E);
    let N = { type: "element", tagName: c, properties: _, children: [] };
    x && (N.children = n.all(x), n.patch(x, N), N = n.applyData(x, N)), b.push(N);
  }
  const S = {
    type: "element",
    tagName: "tr",
    properties: {},
    children: n.wrap(b, !0)
  };
  return n.patch(r, S), n.applyData(r, S);
}
function k8(n, r) {
  const i = {
    type: "element",
    tagName: "td",
    // Assume body cell.
    properties: {},
    children: n.all(r)
  };
  return n.patch(r, i), n.applyData(r, i);
}
const E1 = 9, _1 = 32;
function C8(n) {
  const r = String(n), i = /\r?\n|\r/g;
  let l = i.exec(r), s = 0;
  const c = [];
  for (; l; )
    c.push(
      j1(r.slice(s, l.index), s > 0, !0),
      l[0]
    ), s = l.index + l[0].length, l = i.exec(r);
  return c.push(j1(r.slice(s), s > 0, !1)), c.join("");
}
function j1(n, r, i) {
  let l = 0, s = n.length;
  if (r) {
    let c = n.codePointAt(l);
    for (; c === E1 || c === _1; )
      l++, c = n.codePointAt(l);
  }
  if (i) {
    let c = n.codePointAt(s - 1);
    for (; c === E1 || c === _1; )
      s--, c = n.codePointAt(s - 1);
  }
  return s > l ? n.slice(l, s) : "";
}
function E8(n, r) {
  const i = { type: "text", value: C8(String(r.value)) };
  return n.patch(r, i), n.applyData(r, i);
}
function _8(n, r) {
  const i = {
    type: "element",
    tagName: "hr",
    properties: {},
    children: []
  };
  return n.patch(r, i), n.applyData(r, i);
}
const j8 = {
  blockquote: n8,
  break: r8,
  code: i8,
  delete: a8,
  emphasis: l8,
  footnoteReference: o8,
  heading: s8,
  html: u8,
  imageReference: c8,
  image: f8,
  inlineCode: d8,
  linkReference: h8,
  link: m8,
  listItem: p8,
  list: y8,
  paragraph: b8,
  // @ts-expect-error: root is different, but hard to type.
  root: x8,
  strong: v8,
  table: S8,
  tableCell: k8,
  tableRow: w8,
  text: E8,
  thematicBreak: _8,
  toml: mc,
  yaml: mc,
  definition: mc,
  footnoteDefinition: mc
};
function mc() {
}
const s2 = -1, Kc = 0, Bs = 1, Nc = 2, gm = 3, ym = 4, bm = 5, xm = 6, u2 = 7, c2 = 8, T1 = typeof self == "object" ? self : globalThis, T8 = (n, r) => {
  const i = (s, c) => (n.set(c, s), s), l = (s) => {
    if (n.has(s))
      return n.get(s);
    const [c, f] = r[s];
    switch (c) {
      case Kc:
      case s2:
        return i(f, s);
      case Bs: {
        const g = i([], s);
        for (const y of f)
          g.push(l(y));
        return g;
      }
      case Nc: {
        const g = i({}, s);
        for (const [y, b] of f)
          g[l(y)] = l(b);
        return g;
      }
      case gm:
        return i(new Date(f), s);
      case ym: {
        const { source: g, flags: y } = f;
        return i(new RegExp(g, y), s);
      }
      case bm: {
        const g = i(/* @__PURE__ */ new Map(), s);
        for (const [y, b] of f)
          g.set(l(y), l(b));
        return g;
      }
      case xm: {
        const g = i(/* @__PURE__ */ new Set(), s);
        for (const y of f)
          g.add(l(y));
        return g;
      }
      case u2: {
        const { name: g, message: y } = f;
        return i(new T1[g](y), s);
      }
      case c2:
        return i(BigInt(f), s);
      case "BigInt":
        return i(Object(BigInt(f)), s);
      case "ArrayBuffer":
        return i(new Uint8Array(f).buffer, f);
      case "DataView": {
        const { buffer: g } = new Uint8Array(f);
        return i(new DataView(g), f);
      }
    }
    return i(new T1[c](f), s);
  };
  return l;
}, N1 = (n) => T8(/* @__PURE__ */ new Map(), n)(0), oo = "", { toString: N8 } = {}, { keys: A8 } = Object, Ms = (n) => {
  const r = typeof n;
  if (r !== "object" || !n)
    return [Kc, r];
  const i = N8.call(n).slice(8, -1);
  switch (i) {
    case "Array":
      return [Bs, oo];
    case "Object":
      return [Nc, oo];
    case "Date":
      return [gm, oo];
    case "RegExp":
      return [ym, oo];
    case "Map":
      return [bm, oo];
    case "Set":
      return [xm, oo];
    case "DataView":
      return [Bs, i];
  }
  return i.includes("Array") ? [Bs, i] : i.includes("Error") ? [u2, i] : [Nc, i];
}, pc = ([n, r]) => n === Kc && (r === "function" || r === "symbol"), z8 = (n, r, i, l) => {
  const s = (f, g) => {
    const y = l.push(f) - 1;
    return i.set(g, y), y;
  }, c = (f) => {
    if (i.has(f))
      return i.get(f);
    let [g, y] = Ms(f);
    switch (g) {
      case Kc: {
        let S = f;
        switch (y) {
          case "bigint":
            g = c2, S = f.toString();
            break;
          case "function":
          case "symbol":
            if (n)
              throw new TypeError("unable to serialize " + y);
            S = null;
            break;
          case "undefined":
            return s([s2], f);
        }
        return s([g, S], f);
      }
      case Bs: {
        if (y) {
          let _ = f;
          return y === "DataView" ? _ = new Uint8Array(f.buffer) : y === "ArrayBuffer" && (_ = new Uint8Array(f)), s([y, [..._]], f);
        }
        const S = [], x = s([g, S], f);
        for (const _ of f)
          S.push(c(_));
        return x;
      }
      case Nc: {
        if (y)
          switch (y) {
            case "BigInt":
              return s([y, f.toString()], f);
            case "Boolean":
            case "Number":
            case "String":
              return s([y, f.valueOf()], f);
          }
        if (r && "toJSON" in f)
          return c(f.toJSON());
        const S = [], x = s([g, S], f);
        for (const _ of A8(f))
          (n || !pc(Ms(f[_]))) && S.push([c(_), c(f[_])]);
        return x;
      }
      case gm:
        return s([g, f.toISOString()], f);
      case ym: {
        const { source: S, flags: x } = f;
        return s([g, { source: S, flags: x }], f);
      }
      case bm: {
        const S = [], x = s([g, S], f);
        for (const [_, E] of f)
          (n || !(pc(Ms(_)) || pc(Ms(E)))) && S.push([c(_), c(E)]);
        return x;
      }
      case xm: {
        const S = [], x = s([g, S], f);
        for (const _ of f)
          (n || !pc(Ms(_))) && S.push(c(_));
        return x;
      }
    }
    const { message: b } = f;
    return s([g, { name: y, message: b }], f);
  };
  return c;
}, A1 = (n, { json: r, lossy: i } = {}) => {
  const l = [];
  return z8(!(r || i), !!r, /* @__PURE__ */ new Map(), l)(n), l;
}, Ac = typeof structuredClone == "function" ? (
  /* c8 ignore start */
  (n, r) => r && ("json" in r || "lossy" in r) ? N1(A1(n, r)) : structuredClone(n)
) : (n, r) => N1(A1(n, r));
function M8(n, r) {
  const i = [{ type: "text", value: "" }];
  return r > 1 && i.push({
    type: "element",
    tagName: "sup",
    properties: {},
    children: [{ type: "text", value: String(r) }]
  }), i;
}
function O8(n, r) {
  return "Back to reference " + (n + 1) + (r > 1 ? "-" + r : "");
}
function D8(n) {
  const r = typeof n.options.clobberPrefix == "string" ? n.options.clobberPrefix : "user-content-", i = n.options.footnoteBackContent || M8, l = n.options.footnoteBackLabel || O8, s = n.options.footnoteLabel || "Footnotes", c = n.options.footnoteLabelTagName || "h2", f = n.options.footnoteLabelProperties || {
    className: ["sr-only"]
  }, g = [];
  let y = -1;
  for (; ++y < n.footnoteOrder.length; ) {
    const b = n.footnoteById.get(
      n.footnoteOrder[y]
    );
    if (!b)
      continue;
    const S = n.all(b), x = String(b.identifier).toUpperCase(), _ = ko(x.toLowerCase());
    let E = 0;
    const N = [], U = n.footnoteCounts.get(x);
    for (; U !== void 0 && ++E <= U; ) {
      N.length > 0 && N.push({ type: "text", value: " " });
      let ne = typeof i == "string" ? i : i(y, E);
      typeof ne == "string" && (ne = { type: "text", value: ne }), N.push({
        type: "element",
        tagName: "a",
        properties: {
          href: "#" + r + "fnref-" + _ + (E > 1 ? "-" + E : ""),
          dataFootnoteBackref: "",
          ariaLabel: typeof l == "string" ? l : l(y, E),
          className: ["data-footnote-backref"]
        },
        children: Array.isArray(ne) ? ne : [ne]
      });
    }
    const G = S[S.length - 1];
    if (G && G.type === "element" && G.tagName === "p") {
      const ne = G.children[G.children.length - 1];
      ne && ne.type === "text" ? ne.value += " " : G.children.push({ type: "text", value: " " }), G.children.push(...N);
    } else
      S.push(...N);
    const D = {
      type: "element",
      tagName: "li",
      properties: { id: r + "fn-" + _ },
      children: n.wrap(S, !0)
    };
    n.patch(b, D), g.push(D);
  }
  if (g.length !== 0)
    return {
      type: "element",
      tagName: "section",
      properties: { dataFootnotes: !0, className: ["footnotes"] },
      children: [
        {
          type: "element",
          tagName: c,
          properties: {
            ...Ac(f),
            id: "footnote-label"
          },
          children: [{ type: "text", value: s }]
        },
        { type: "text", value: `
` },
        {
          type: "element",
          tagName: "ol",
          properties: {},
          children: n.wrap(g, !0)
        },
        { type: "text", value: `
` }
      ]
    };
}
const Gc = (
  // Note: overloads in JSDoc cant yet use different `@template`s.
  /**
   * @type {(
   *   (<Condition extends string>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &
   *   (<Condition extends Props>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &
   *   (<Condition extends TestFunction>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &
   *   ((test?: null | undefined) => (node?: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &
   *   ((test?: Test) => Check)
   * )}
   */
  /**
   * @param {Test} [test]
   * @returns {Check}
   */
  (function(n) {
    if (n == null)
      return U8;
    if (typeof n == "function")
      return $c(n);
    if (typeof n == "object")
      return Array.isArray(n) ? R8(n) : (
        // Cast because `ReadonlyArray` goes into the above but `isArray`
        // narrows to `Array`.
        L8(
          /** @type {Props} */
          n
        )
      );
    if (typeof n == "string")
      return B8(n);
    throw new Error("Expected function, string, or object as test");
  })
);
function R8(n) {
  const r = [];
  let i = -1;
  for (; ++i < n.length; )
    r[i] = Gc(n[i]);
  return $c(l);
  function l(...s) {
    let c = -1;
    for (; ++c < r.length; )
      if (r[c].apply(this, s)) return !0;
    return !1;
  }
}
function L8(n) {
  const r = (
    /** @type {Record<string, unknown>} */
    n
  );
  return $c(i);
  function i(l) {
    const s = (
      /** @type {Record<string, unknown>} */
      /** @type {unknown} */
      l
    );
    let c;
    for (c in n)
      if (s[c] !== r[c]) return !1;
    return !0;
  }
}
function B8(n) {
  return $c(r);
  function r(i) {
    return i && i.type === n;
  }
}
function $c(n) {
  return r;
  function r(i, l, s) {
    return !!(I8(i) && n.call(
      this,
      i,
      typeof l == "number" ? l : void 0,
      s || void 0
    ));
  }
}
function U8() {
  return !0;
}
function I8(n) {
  return n !== null && typeof n == "object" && "type" in n;
}
const f2 = [], q8 = !0, Bh = !1, H8 = "skip";
function d2(n, r, i, l) {
  let s;
  typeof r == "function" && typeof i != "function" ? (l = i, i = r) : s = r;
  const c = Gc(s), f = l ? -1 : 1;
  g(n, void 0, [])();
  function g(y, b, S) {
    const x = (
      /** @type {Record<string, unknown>} */
      y && typeof y == "object" ? y : {}
    );
    if (typeof x.type == "string") {
      const E = (
        // `hast`
        typeof x.tagName == "string" ? x.tagName : (
          // `xast`
          typeof x.name == "string" ? x.name : void 0
        )
      );
      Object.defineProperty(_, "name", {
        value: "node (" + (y.type + (E ? "<" + E + ">" : "")) + ")"
      });
    }
    return _;
    function _() {
      let E = f2, N, U, G;
      if ((!r || c(y, b, S[S.length - 1] || void 0)) && (E = P8(i(y, S)), E[0] === Bh))
        return E;
      if ("children" in y && y.children) {
        const D = (
          /** @type {UnistParent} */
          y
        );
        if (D.children && E[0] !== H8)
          for (U = (l ? D.children.length : -1) + f, G = S.concat(D); U > -1 && U < D.children.length; ) {
            const ne = D.children[U];
            if (N = g(ne, U, G)(), N[0] === Bh)
              return N;
            U = typeof N[1] == "number" ? N[1] : U + f;
          }
      }
      return E;
    }
  }
}
function P8(n) {
  return Array.isArray(n) ? n : typeof n == "number" ? [q8, n] : n == null ? f2 : [n];
}
function vm(n, r, i, l) {
  let s, c, f;
  typeof r == "function" && typeof i != "function" ? (c = void 0, f = r, s = i) : (c = r, f = i, s = l), d2(n, c, g, s);
  function g(y, b) {
    const S = b[b.length - 1], x = S ? S.children.indexOf(y) : void 0;
    return f(y, x, S);
  }
}
const Uh = {}.hasOwnProperty, F8 = {};
function V8(n, r) {
  const i = r || F8, l = /* @__PURE__ */ new Map(), s = /* @__PURE__ */ new Map(), c = /* @__PURE__ */ new Map(), f = { ...j8, ...i.handlers }, g = {
    all: b,
    applyData: G8,
    definitionById: l,
    footnoteById: s,
    footnoteCounts: c,
    footnoteOrder: [],
    handlers: f,
    one: y,
    options: i,
    patch: K8,
    wrap: Y8
  };
  return vm(n, function(S) {
    if (S.type === "definition" || S.type === "footnoteDefinition") {
      const x = S.type === "definition" ? l : s, _ = String(S.identifier).toUpperCase();
      x.has(_) || x.set(_, S);
    }
  }), g;
  function y(S, x) {
    const _ = S.type, E = g.handlers[_];
    if (Uh.call(g.handlers, _) && E)
      return E(g, S, x);
    if (g.options.passThrough && g.options.passThrough.includes(_)) {
      if ("children" in S) {
        const { children: U, ...G } = S, D = Ac(G);
        return D.children = g.all(S), D;
      }
      return Ac(S);
    }
    return (g.options.unknownHandler || $8)(g, S, x);
  }
  function b(S) {
    const x = [];
    if ("children" in S) {
      const _ = S.children;
      let E = -1;
      for (; ++E < _.length; ) {
        const N = g.one(_[E], S);
        if (N) {
          if (E && _[E - 1].type === "break" && (!Array.isArray(N) && N.type === "text" && (N.value = z1(N.value)), !Array.isArray(N) && N.type === "element")) {
            const U = N.children[0];
            U && U.type === "text" && (U.value = z1(U.value));
          }
          Array.isArray(N) ? x.push(...N) : x.push(N);
        }
      }
    }
    return x;
  }
}
function K8(n, r) {
  n.position && (r.position = O3(n));
}
function G8(n, r) {
  let i = r;
  if (n && n.data) {
    const l = n.data.hName, s = n.data.hChildren, c = n.data.hProperties;
    if (typeof l == "string")
      if (i.type === "element")
        i.tagName = l;
      else {
        const f = "children" in i ? i.children : [i];
        i = { type: "element", tagName: l, properties: {}, children: f };
      }
    i.type === "element" && c && Object.assign(i.properties, Ac(c)), "children" in i && i.children && s !== null && s !== void 0 && (i.children = s);
  }
  return i;
}
function $8(n, r) {
  const i = r.data || {}, l = "value" in r && !(Uh.call(i, "hProperties") || Uh.call(i, "hChildren")) ? { type: "text", value: r.value } : {
    type: "element",
    tagName: "div",
    properties: {},
    children: n.all(r)
  };
  return n.patch(r, l), n.applyData(r, l);
}
function Y8(n, r) {
  const i = [];
  let l = -1;
  for (r && i.push({ type: "text", value: `
` }); ++l < n.length; )
    l && i.push({ type: "text", value: `
` }), i.push(n[l]);
  return r && n.length > 0 && i.push({ type: "text", value: `
` }), i;
}
function z1(n) {
  let r = 0, i = n.charCodeAt(r);
  for (; i === 9 || i === 32; )
    r++, i = n.charCodeAt(r);
  return n.slice(r);
}
function M1(n, r) {
  const i = V8(n, r), l = i.one(n, void 0), s = D8(i), c = Array.isArray(l) ? { type: "root", children: l } : l || { type: "root", children: [] };
  return s && c.children.push({ type: "text", value: `
` }, s), c;
}
function X8(n, r) {
  return n && "run" in n ? async function(i, l) {
    const s = (
      /** @type {HastRoot} */
      M1(i, { file: l, ...r })
    );
    await n.run(s, l);
  } : function(i, l) {
    return (
      /** @type {HastRoot} */
      M1(i, { file: l, ...n || r })
    );
  };
}
function O1(n) {
  if (n)
    throw n;
}
var sh, D1;
function Q8() {
  if (D1) return sh;
  D1 = 1;
  var n = Object.prototype.hasOwnProperty, r = Object.prototype.toString, i = Object.defineProperty, l = Object.getOwnPropertyDescriptor, s = function(b) {
    return typeof Array.isArray == "function" ? Array.isArray(b) : r.call(b) === "[object Array]";
  }, c = function(b) {
    if (!b || r.call(b) !== "[object Object]")
      return !1;
    var S = n.call(b, "constructor"), x = b.constructor && b.constructor.prototype && n.call(b.constructor.prototype, "isPrototypeOf");
    if (b.constructor && !S && !x)
      return !1;
    var _;
    for (_ in b)
      ;
    return typeof _ > "u" || n.call(b, _);
  }, f = function(b, S) {
    i && S.name === "__proto__" ? i(b, S.name, {
      enumerable: !0,
      configurable: !0,
      value: S.newValue,
      writable: !0
    }) : b[S.name] = S.newValue;
  }, g = function(b, S) {
    if (S === "__proto__")
      if (n.call(b, S)) {
        if (l)
          return l(b, S).value;
      } else return;
    return b[S];
  };
  return sh = function y() {
    var b, S, x, _, E, N, U = arguments[0], G = 1, D = arguments.length, ne = !1;
    for (typeof U == "boolean" && (ne = U, U = arguments[1] || {}, G = 2), (U == null || typeof U != "object" && typeof U != "function") && (U = {}); G < D; ++G)
      if (b = arguments[G], b != null)
        for (S in b)
          x = g(U, S), _ = g(b, S), U !== _ && (ne && _ && (c(_) || (E = s(_))) ? (E ? (E = !1, N = x && s(x) ? x : []) : N = x && c(x) ? x : {}, f(U, { name: S, newValue: y(ne, N, _) })) : typeof _ < "u" && f(U, { name: S, newValue: _ }));
    return U;
  }, sh;
}
var Z8 = Q8();
const uh = /* @__PURE__ */ ul(Z8);
function Ih(n) {
  if (typeof n != "object" || n === null)
    return !1;
  const r = Object.getPrototypeOf(n);
  return (r === null || r === Object.prototype || Object.getPrototypeOf(r) === null) && !(Symbol.toStringTag in n) && !(Symbol.iterator in n);
}
function W8() {
  const n = [], r = { run: i, use: l };
  return r;
  function i(...s) {
    let c = -1;
    const f = s.pop();
    if (typeof f != "function")
      throw new TypeError("Expected function as last argument, not " + f);
    g(null, ...s);
    function g(y, ...b) {
      const S = n[++c];
      let x = -1;
      if (y) {
        f(y);
        return;
      }
      for (; ++x < s.length; )
        (b[x] === null || b[x] === void 0) && (b[x] = s[x]);
      s = b, S ? J8(S, g)(...b) : f(null, ...b);
    }
  }
  function l(s) {
    if (typeof s != "function")
      throw new TypeError(
        "Expected `middelware` to be a function, not " + s
      );
    return n.push(s), r;
  }
}
function J8(n, r) {
  let i;
  return l;
  function l(...f) {
    const g = n.length > f.length;
    let y;
    g && f.push(s);
    try {
      y = n.apply(this, f);
    } catch (b) {
      const S = (
        /** @type {Error} */
        b
      );
      if (g && i)
        throw S;
      return s(S);
    }
    g || (y && y.then && typeof y.then == "function" ? y.then(c, s) : y instanceof Error ? s(y) : c(y));
  }
  function s(f, ...g) {
    i || (i = !0, r(f, ...g));
  }
  function c(f) {
    s(null, f);
  }
}
const Zr = { basename: eS, dirname: tS, extname: nS, join: rS, sep: "/" };
function eS(n, r) {
  if (r !== void 0 && typeof r != "string")
    throw new TypeError('"ext" argument must be a string');
  Qs(n);
  let i = 0, l = -1, s = n.length, c;
  if (r === void 0 || r.length === 0 || r.length > n.length) {
    for (; s--; )
      if (n.codePointAt(s) === 47) {
        if (c) {
          i = s + 1;
          break;
        }
      } else l < 0 && (c = !0, l = s + 1);
    return l < 0 ? "" : n.slice(i, l);
  }
  if (r === n)
    return "";
  let f = -1, g = r.length - 1;
  for (; s--; )
    if (n.codePointAt(s) === 47) {
      if (c) {
        i = s + 1;
        break;
      }
    } else
      f < 0 && (c = !0, f = s + 1), g > -1 && (n.codePointAt(s) === r.codePointAt(g--) ? g < 0 && (l = s) : (g = -1, l = f));
  return i === l ? l = f : l < 0 && (l = n.length), n.slice(i, l);
}
function tS(n) {
  if (Qs(n), n.length === 0)
    return ".";
  let r = -1, i = n.length, l;
  for (; --i; )
    if (n.codePointAt(i) === 47) {
      if (l) {
        r = i;
        break;
      }
    } else l || (l = !0);
  return r < 0 ? n.codePointAt(0) === 47 ? "/" : "." : r === 1 && n.codePointAt(0) === 47 ? "//" : n.slice(0, r);
}
function nS(n) {
  Qs(n);
  let r = n.length, i = -1, l = 0, s = -1, c = 0, f;
  for (; r--; ) {
    const g = n.codePointAt(r);
    if (g === 47) {
      if (f) {
        l = r + 1;
        break;
      }
      continue;
    }
    i < 0 && (f = !0, i = r + 1), g === 46 ? s < 0 ? s = r : c !== 1 && (c = 1) : s > -1 && (c = -1);
  }
  return s < 0 || i < 0 || // We saw a non-dot character immediately before the dot.
  c === 0 || // The (right-most) trimmed path component is exactly `..`.
  c === 1 && s === i - 1 && s === l + 1 ? "" : n.slice(s, i);
}
function rS(...n) {
  let r = -1, i;
  for (; ++r < n.length; )
    Qs(n[r]), n[r] && (i = i === void 0 ? n[r] : i + "/" + n[r]);
  return i === void 0 ? "." : iS(i);
}
function iS(n) {
  Qs(n);
  const r = n.codePointAt(0) === 47;
  let i = aS(n, !r);
  return i.length === 0 && !r && (i = "."), i.length > 0 && n.codePointAt(n.length - 1) === 47 && (i += "/"), r ? "/" + i : i;
}
function aS(n, r) {
  let i = "", l = 0, s = -1, c = 0, f = -1, g, y;
  for (; ++f <= n.length; ) {
    if (f < n.length)
      g = n.codePointAt(f);
    else {
      if (g === 47)
        break;
      g = 47;
    }
    if (g === 47) {
      if (!(s === f - 1 || c === 1)) if (s !== f - 1 && c === 2) {
        if (i.length < 2 || l !== 2 || i.codePointAt(i.length - 1) !== 46 || i.codePointAt(i.length - 2) !== 46) {
          if (i.length > 2) {
            if (y = i.lastIndexOf("/"), y !== i.length - 1) {
              y < 0 ? (i = "", l = 0) : (i = i.slice(0, y), l = i.length - 1 - i.lastIndexOf("/")), s = f, c = 0;
              continue;
            }
          } else if (i.length > 0) {
            i = "", l = 0, s = f, c = 0;
            continue;
          }
        }
        r && (i = i.length > 0 ? i + "/.." : "..", l = 2);
      } else
        i.length > 0 ? i += "/" + n.slice(s + 1, f) : i = n.slice(s + 1, f), l = f - s - 1;
      s = f, c = 0;
    } else g === 46 && c > -1 ? c++ : c = -1;
  }
  return i;
}
function Qs(n) {
  if (typeof n != "string")
    throw new TypeError(
      "Path must be a string. Received " + JSON.stringify(n)
    );
}
const lS = { cwd: oS };
function oS() {
  return "/";
}
function qh(n) {
  return !!(n !== null && typeof n == "object" && "href" in n && n.href && "protocol" in n && n.protocol && // @ts-expect-error: indexing is fine.
  n.auth === void 0);
}
function sS(n) {
  if (typeof n == "string")
    n = new URL(n);
  else if (!qh(n)) {
    const r = new TypeError(
      'The "path" argument must be of type string or an instance of URL. Received `' + n + "`"
    );
    throw r.code = "ERR_INVALID_ARG_TYPE", r;
  }
  if (n.protocol !== "file:") {
    const r = new TypeError("The URL must be of scheme file");
    throw r.code = "ERR_INVALID_URL_SCHEME", r;
  }
  return uS(n);
}
function uS(n) {
  if (n.hostname !== "") {
    const l = new TypeError(
      'File URL host must be "localhost" or empty on darwin'
    );
    throw l.code = "ERR_INVALID_FILE_URL_HOST", l;
  }
  const r = n.pathname;
  let i = -1;
  for (; ++i < r.length; )
    if (r.codePointAt(i) === 37 && r.codePointAt(i + 1) === 50) {
      const l = r.codePointAt(i + 2);
      if (l === 70 || l === 102) {
        const s = new TypeError(
          "File URL path must not include encoded / characters"
        );
        throw s.code = "ERR_INVALID_FILE_URL_PATH", s;
      }
    }
  return decodeURIComponent(r);
}
const ch = (
  /** @type {const} */
  [
    "history",
    "path",
    "basename",
    "stem",
    "extname",
    "dirname"
  ]
);
class h2 {
  /**
   * Create a new virtual file.
   *
   * `options` is treated as:
   *
   * *   `string` or `Uint8Array`  `{value: options}`
   * *   `URL`  `{path: options}`
   * *   `VFile`  shallow copies its data over to the new file
   * *   `object`  all fields are shallow copied over to the new file
   *
   * Path related fields are set in the following order (least specific to
   * most specific): `history`, `path`, `basename`, `stem`, `extname`,
   * `dirname`.
   *
   * You cannot set `dirname` or `extname` without setting either `history`,
   * `path`, `basename`, or `stem` too.
   *
   * @param {Compatible | null | undefined} [value]
   *   File value.
   * @returns
   *   New instance.
   */
  constructor(r) {
    let i;
    r ? qh(r) ? i = { path: r } : typeof r == "string" || cS(r) ? i = { value: r } : i = r : i = {}, this.cwd = "cwd" in i ? "" : lS.cwd(), this.data = {}, this.history = [], this.messages = [], this.value, this.map, this.result, this.stored;
    let l = -1;
    for (; ++l < ch.length; ) {
      const c = ch[l];
      c in i && i[c] !== void 0 && i[c] !== null && (this[c] = c === "history" ? [...i[c]] : i[c]);
    }
    let s;
    for (s in i)
      ch.includes(s) || (this[s] = i[s]);
  }
  /**
   * Get the basename (including extname) (example: `'index.min.js'`).
   *
   * @returns {string | undefined}
   *   Basename.
   */
  get basename() {
    return typeof this.path == "string" ? Zr.basename(this.path) : void 0;
  }
  /**
   * Set basename (including extname) (`'index.min.js'`).
   *
   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\'`
   * on windows).
   * Cannot be nullified (use `file.path = file.dirname` instead).
   *
   * @param {string} basename
   *   Basename.
   * @returns {undefined}
   *   Nothing.
   */
  set basename(r) {
    dh(r, "basename"), fh(r, "basename"), this.path = Zr.join(this.dirname || "", r);
  }
  /**
   * Get the parent path (example: `'~'`).
   *
   * @returns {string | undefined}
   *   Dirname.
   */
  get dirname() {
    return typeof this.path == "string" ? Zr.dirname(this.path) : void 0;
  }
  /**
   * Set the parent path (example: `'~'`).
   *
   * Cannot be set if theres no `path` yet.
   *
   * @param {string | undefined} dirname
   *   Dirname.
   * @returns {undefined}
   *   Nothing.
   */
  set dirname(r) {
    R1(this.basename, "dirname"), this.path = Zr.join(r || "", this.basename);
  }
  /**
   * Get the extname (including dot) (example: `'.js'`).
   *
   * @returns {string | undefined}
   *   Extname.
   */
  get extname() {
    return typeof this.path == "string" ? Zr.extname(this.path) : void 0;
  }
  /**
   * Set the extname (including dot) (example: `'.js'`).
   *
   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\'`
   * on windows).
   * Cannot be set if theres no `path` yet.
   *
   * @param {string | undefined} extname
   *   Extname.
   * @returns {undefined}
   *   Nothing.
   */
  set extname(r) {
    if (fh(r, "extname"), R1(this.dirname, "extname"), r) {
      if (r.codePointAt(0) !== 46)
        throw new Error("`extname` must start with `.`");
      if (r.includes(".", 1))
        throw new Error("`extname` cannot contain multiple dots");
    }
    this.path = Zr.join(this.dirname, this.stem + (r || ""));
  }
  /**
   * Get the full path (example: `'~/index.min.js'`).
   *
   * @returns {string}
   *   Path.
   */
  get path() {
    return this.history[this.history.length - 1];
  }
  /**
   * Set the full path (example: `'~/index.min.js'`).
   *
   * Cannot be nullified.
   * You can set a file URL (a `URL` object with a `file:` protocol) which will
   * be turned into a path with `url.fileURLToPath`.
   *
   * @param {URL | string} path
   *   Path.
   * @returns {undefined}
   *   Nothing.
   */
  set path(r) {
    qh(r) && (r = sS(r)), dh(r, "path"), this.path !== r && this.history.push(r);
  }
  /**
   * Get the stem (basename w/o extname) (example: `'index.min'`).
   *
   * @returns {string | undefined}
   *   Stem.
   */
  get stem() {
    return typeof this.path == "string" ? Zr.basename(this.path, this.extname) : void 0;
  }
  /**
   * Set the stem (basename w/o extname) (example: `'index.min'`).
   *
   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\'`
   * on windows).
   * Cannot be nullified (use `file.path = file.dirname` instead).
   *
   * @param {string} stem
   *   Stem.
   * @returns {undefined}
   *   Nothing.
   */
  set stem(r) {
    dh(r, "stem"), fh(r, "stem"), this.path = Zr.join(this.dirname || "", r + (this.extname || ""));
  }
  // Normal prototypal methods.
  /**
   * Create a fatal message for `reason` associated with the file.
   *
   * The `fatal` field of the message is set to `true` (error; file not usable)
   * and the `file` field is set to the current file path.
   * The message is added to the `messages` field on `file`.
   *
   * >  **Note**: also has obsolete signatures.
   *
   * @overload
   * @param {string} reason
   * @param {MessageOptions | null | undefined} [options]
   * @returns {never}
   *
   * @overload
   * @param {string} reason
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {string} reason
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {string} reason
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @param {Error | VFileMessage | string} causeOrReason
   *   Reason for message, should use markdown.
   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]
   *   Configuration (optional).
   * @param {string | null | undefined} [origin]
   *   Place in code where the message originates (example:
   *   `'my-package:my-rule'` or `'my-rule'`).
   * @returns {never}
   *   Never.
   * @throws {VFileMessage}
   *   Message.
   */
  fail(r, i, l) {
    const s = this.message(r, i, l);
    throw s.fatal = !0, s;
  }
  /**
   * Create an info message for `reason` associated with the file.
   *
   * The `fatal` field of the message is set to `undefined` (info; change
   * likely not needed) and the `file` field is set to the current file path.
   * The message is added to the `messages` field on `file`.
   *
   * >  **Note**: also has obsolete signatures.
   *
   * @overload
   * @param {string} reason
   * @param {MessageOptions | null | undefined} [options]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @param {Error | VFileMessage | string} causeOrReason
   *   Reason for message, should use markdown.
   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]
   *   Configuration (optional).
   * @param {string | null | undefined} [origin]
   *   Place in code where the message originates (example:
   *   `'my-package:my-rule'` or `'my-rule'`).
   * @returns {VFileMessage}
   *   Message.
   */
  info(r, i, l) {
    const s = this.message(r, i, l);
    return s.fatal = void 0, s;
  }
  /**
   * Create a message for `reason` associated with the file.
   *
   * The `fatal` field of the message is set to `false` (warning; change may be
   * needed) and the `file` field is set to the current file path.
   * The message is added to the `messages` field on `file`.
   *
   * >  **Note**: also has obsolete signatures.
   *
   * @overload
   * @param {string} reason
   * @param {MessageOptions | null | undefined} [options]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @param {Error | VFileMessage | string} causeOrReason
   *   Reason for message, should use markdown.
   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]
   *   Configuration (optional).
   * @param {string | null | undefined} [origin]
   *   Place in code where the message originates (example:
   *   `'my-package:my-rule'` or `'my-rule'`).
   * @returns {VFileMessage}
   *   Message.
   */
  message(r, i, l) {
    const s = new Dn(
      // @ts-expect-error: the overloads are fine.
      r,
      i,
      l
    );
    return this.path && (s.name = this.path + ":" + s.name, s.file = this.path), s.fatal = !1, this.messages.push(s), s;
  }
  /**
   * Serialize the file.
   *
   * > **Note**: which encodings are supported depends on the engine.
   * > For info on Node.js, see:
   * > <https://nodejs.org/api/util.html#whatwg-supported-encodings>.
   *
   * @param {string | null | undefined} [encoding='utf8']
   *   Character encoding to understand `value` as when its a `Uint8Array`
   *   (default: `'utf-8'`).
   * @returns {string}
   *   Serialized file.
   */
  toString(r) {
    return this.value === void 0 ? "" : typeof this.value == "string" ? this.value : new TextDecoder(r || void 0).decode(this.value);
  }
}
function fh(n, r) {
  if (n && n.includes(Zr.sep))
    throw new Error(
      "`" + r + "` cannot be a path: did not expect `" + Zr.sep + "`"
    );
}
function dh(n, r) {
  if (!n)
    throw new Error("`" + r + "` cannot be empty");
}
function R1(n, r) {
  if (!n)
    throw new Error("Setting `" + r + "` requires `path` to be set too");
}
function cS(n) {
  return !!(n && typeof n == "object" && "byteLength" in n && "byteOffset" in n);
}
const fS = (
  /**
   * @type {new <Parameters extends Array<unknown>, Result>(property: string | symbol) => (...parameters: Parameters) => Result}
   */
  /** @type {unknown} */
  /**
   * @this {Function}
   * @param {string | symbol} property
   * @returns {(...parameters: Array<unknown>) => unknown}
   */
  (function(n) {
    const l = (
      /** @type {Record<string | symbol, Function>} */
      // Prototypes do exist.
      // type-coverage:ignore-next-line
      this.constructor.prototype
    ), s = l[n], c = function() {
      return s.apply(c, arguments);
    };
    return Object.setPrototypeOf(c, l), c;
  })
), dS = {}.hasOwnProperty;
class Sm extends fS {
  /**
   * Create a processor.
   */
  constructor() {
    super("copy"), this.Compiler = void 0, this.Parser = void 0, this.attachers = [], this.compiler = void 0, this.freezeIndex = -1, this.frozen = void 0, this.namespace = {}, this.parser = void 0, this.transformers = W8();
  }
  /**
   * Copy a processor.
   *
   * @deprecated
   *   This is a private internal method and should not be used.
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *   New *unfrozen* processor ({@linkcode Processor}) that is
   *   configured to work the same as its ancestor.
   *   When the descendant processor is configured in the future it does not
   *   affect the ancestral processor.
   */
  copy() {
    const r = (
      /** @type {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>} */
      new Sm()
    );
    let i = -1;
    for (; ++i < this.attachers.length; ) {
      const l = this.attachers[i];
      r.use(...l);
    }
    return r.data(uh(!0, {}, this.namespace)), r;
  }
  /**
   * Configure the processor with info available to all plugins.
   * Information is stored in an object.
   *
   * Typically, options can be given to a specific plugin, but sometimes it
   * makes sense to have information shared with several plugins.
   * For example, a list of HTML elements that are self-closing, which is
   * needed during all phases.
   *
   * > **Note**: setting information cannot occur on *frozen* processors.
   * > Call the processor first to create a new unfrozen processor.
   *
   * > **Note**: to register custom data in TypeScript, augment the
   * > {@linkcode Data} interface.
   *
   * @example
   *   This example show how to get and set info:
   *
   *   ```js
   *   import {unified} from 'unified'
   *
   *   const processor = unified().data('alpha', 'bravo')
   *
   *   processor.data('alpha') // => 'bravo'
   *
   *   processor.data() // => {alpha: 'bravo'}
   *
   *   processor.data({charlie: 'delta'})
   *
   *   processor.data() // => {charlie: 'delta'}
   *   ```
   *
   * @template {keyof Data} Key
   *
   * @overload
   * @returns {Data}
   *
   * @overload
   * @param {Data} dataset
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *
   * @overload
   * @param {Key} key
   * @returns {Data[Key]}
   *
   * @overload
   * @param {Key} key
   * @param {Data[Key]} value
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *
   * @param {Data | Key} [key]
   *   Key to get or set, or entire dataset to set, or nothing to get the
   *   entire dataset (optional).
   * @param {Data[Key]} [value]
   *   Value to set (optional).
   * @returns {unknown}
   *   The current processor when setting, the value at `key` when getting, or
   *   the entire dataset when getting without key.
   */
  data(r, i) {
    return typeof r == "string" ? arguments.length === 2 ? (ph("data", this.frozen), this.namespace[r] = i, this) : dS.call(this.namespace, r) && this.namespace[r] || void 0 : r ? (ph("data", this.frozen), this.namespace = r, this) : this.namespace;
  }
  /**
   * Freeze a processor.
   *
   * Frozen processors are meant to be extended and not to be configured
   * directly.
   *
   * When a processor is frozen it cannot be unfrozen.
   * New processors working the same way can be created by calling the
   * processor.
   *
   * Its possible to freeze processors explicitly by calling `.freeze()`.
   * Processors freeze automatically when `.parse()`, `.run()`, `.runSync()`,
   * `.stringify()`, `.process()`, or `.processSync()` are called.
   *
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *   The current processor.
   */
  freeze() {
    if (this.frozen)
      return this;
    const r = (
      /** @type {Processor} */
      /** @type {unknown} */
      this
    );
    for (; ++this.freezeIndex < this.attachers.length; ) {
      const [i, ...l] = this.attachers[this.freezeIndex];
      if (l[0] === !1)
        continue;
      l[0] === !0 && (l[0] = void 0);
      const s = i.call(r, ...l);
      typeof s == "function" && this.transformers.use(s);
    }
    return this.frozen = !0, this.freezeIndex = Number.POSITIVE_INFINITY, this;
  }
  /**
   * Parse text to a syntax tree.
   *
   * > **Note**: `parse` freezes the processor if not already *frozen*.
   *
   * > **Note**: `parse` performs the parse phase, not the run phase or other
   * > phases.
   *
   * @param {Compatible | undefined} [file]
   *   file to parse (optional); typically `string` or `VFile`; any value
   *   accepted as `x` in `new VFile(x)`.
   * @returns {ParseTree extends undefined ? Node : ParseTree}
   *   Syntax tree representing `file`.
   */
  parse(r) {
    this.freeze();
    const i = gc(r), l = this.parser || this.Parser;
    return hh("parse", l), l(String(i), i);
  }
  /**
   * Process the given file as configured on the processor.
   *
   * > **Note**: `process` freezes the processor if not already *frozen*.
   *
   * > **Note**: `process` performs the parse, run, and stringify phases.
   *
   * @overload
   * @param {Compatible | undefined} file
   * @param {ProcessCallback<VFileWithOutput<CompileResult>>} done
   * @returns {undefined}
   *
   * @overload
   * @param {Compatible | undefined} [file]
   * @returns {Promise<VFileWithOutput<CompileResult>>}
   *
   * @param {Compatible | undefined} [file]
   *   File (optional); typically `string` or `VFile`]; any value accepted as
   *   `x` in `new VFile(x)`.
   * @param {ProcessCallback<VFileWithOutput<CompileResult>> | undefined} [done]
   *   Callback (optional).
   * @returns {Promise<VFile> | undefined}
   *   Nothing if `done` is given.
   *   Otherwise a promise, rejected with a fatal error or resolved with the
   *   processed file.
   *
   *   The parsed, transformed, and compiled value is available at
   *   `file.value` (see note).
   *
   *   > **Note**: unified typically compiles by serializing: most
   *   > compilers return `string` (or `Uint8Array`).
   *   > Some compilers, such as the one configured with
   *   > [`rehype-react`][rehype-react], return other values (in this case, a
   *   > React tree).
   *   > If youre using a compiler that doesnt serialize, expect different
   *   > result values.
   *   >
   *   > To register custom results in TypeScript, add them to
   *   > {@linkcode CompileResultMap}.
   *
   *   [rehype-react]: https://github.com/rehypejs/rehype-react
   */
  process(r, i) {
    const l = this;
    return this.freeze(), hh("process", this.parser || this.Parser), mh("process", this.compiler || this.Compiler), i ? s(void 0, i) : new Promise(s);
    function s(c, f) {
      const g = gc(r), y = (
        /** @type {HeadTree extends undefined ? Node : HeadTree} */
        /** @type {unknown} */
        l.parse(g)
      );
      l.run(y, g, function(S, x, _) {
        if (S || !x || !_)
          return b(S);
        const E = (
          /** @type {CompileTree extends undefined ? Node : CompileTree} */
          /** @type {unknown} */
          x
        ), N = l.stringify(E, _);
        pS(N) ? _.value = N : _.result = N, b(
          S,
          /** @type {VFileWithOutput<CompileResult>} */
          _
        );
      });
      function b(S, x) {
        S || !x ? f(S) : c ? c(x) : i(void 0, x);
      }
    }
  }
  /**
   * Process the given file as configured on the processor.
   *
   * An error is thrown if asynchronous transforms are configured.
   *
   * > **Note**: `processSync` freezes the processor if not already *frozen*.
   *
   * > **Note**: `processSync` performs the parse, run, and stringify phases.
   *
   * @param {Compatible | undefined} [file]
   *   File (optional); typically `string` or `VFile`; any value accepted as
   *   `x` in `new VFile(x)`.
   * @returns {VFileWithOutput<CompileResult>}
   *   The processed file.
   *
   *   The parsed, transformed, and compiled value is available at
   *   `file.value` (see note).
   *
   *   > **Note**: unified typically compiles by serializing: most
   *   > compilers return `string` (or `Uint8Array`).
   *   > Some compilers, such as the one configured with
   *   > [`rehype-react`][rehype-react], return other values (in this case, a
   *   > React tree).
   *   > If youre using a compiler that doesnt serialize, expect different
   *   > result values.
   *   >
   *   > To register custom results in TypeScript, add them to
   *   > {@linkcode CompileResultMap}.
   *
   *   [rehype-react]: https://github.com/rehypejs/rehype-react
   */
  processSync(r) {
    let i = !1, l;
    return this.freeze(), hh("processSync", this.parser || this.Parser), mh("processSync", this.compiler || this.Compiler), this.process(r, s), B1("processSync", "process", i), l;
    function s(c, f) {
      i = !0, O1(c), l = f;
    }
  }
  /**
   * Run *transformers* on a syntax tree.
   *
   * > **Note**: `run` freezes the processor if not already *frozen*.
   *
   * > **Note**: `run` performs the run phase, not other phases.
   *
   * @overload
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done
   * @returns {undefined}
   *
   * @overload
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   * @param {Compatible | undefined} file
   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done
   * @returns {undefined}
   *
   * @overload
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   * @param {Compatible | undefined} [file]
   * @returns {Promise<TailTree extends undefined ? Node : TailTree>}
   *
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   *   Tree to transform and inspect.
   * @param {(
   *   RunCallback<TailTree extends undefined ? Node : TailTree> |
   *   Compatible
   * )} [file]
   *   File associated with `node` (optional); any value accepted as `x` in
   *   `new VFile(x)`.
   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} [done]
   *   Callback (optional).
   * @returns {Promise<TailTree extends undefined ? Node : TailTree> | undefined}
   *   Nothing if `done` is given.
   *   Otherwise, a promise rejected with a fatal error or resolved with the
   *   transformed tree.
   */
  run(r, i, l) {
    L1(r), this.freeze();
    const s = this.transformers;
    return !l && typeof i == "function" && (l = i, i = void 0), l ? c(void 0, l) : new Promise(c);
    function c(f, g) {
      const y = gc(i);
      s.run(r, y, b);
      function b(S, x, _) {
        const E = (
          /** @type {TailTree extends undefined ? Node : TailTree} */
          x || r
        );
        S ? g(S) : f ? f(E) : l(void 0, E, _);
      }
    }
  }
  /**
   * Run *transformers* on a syntax tree.
   *
   * An error is thrown if asynchronous transforms are configured.
   *
   * > **Note**: `runSync` freezes the processor if not already *frozen*.
   *
   * > **Note**: `runSync` performs the run phase, not other phases.
   *
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   *   Tree to transform and inspect.
   * @param {Compatible | undefined} [file]
   *   File associated with `node` (optional); any value accepted as `x` in
   *   `new VFile(x)`.
   * @returns {TailTree extends undefined ? Node : TailTree}
   *   Transformed tree.
   */
  runSync(r, i) {
    let l = !1, s;
    return this.run(r, i, c), B1("runSync", "run", l), s;
    function c(f, g) {
      O1(f), s = g, l = !0;
    }
  }
  /**
   * Compile a syntax tree.
   *
   * > **Note**: `stringify` freezes the processor if not already *frozen*.
   *
   * > **Note**: `stringify` performs the stringify phase, not the run phase
   * > or other phases.
   *
   * @param {CompileTree extends undefined ? Node : CompileTree} tree
   *   Tree to compile.
   * @param {Compatible | undefined} [file]
   *   File associated with `node` (optional); any value accepted as `x` in
   *   `new VFile(x)`.
   * @returns {CompileResult extends undefined ? Value : CompileResult}
   *   Textual representation of the tree (see note).
   *
   *   > **Note**: unified typically compiles by serializing: most compilers
   *   > return `string` (or `Uint8Array`).
   *   > Some compilers, such as the one configured with
   *   > [`rehype-react`][rehype-react], return other values (in this case, a
   *   > React tree).
   *   > If youre using a compiler that doesnt serialize, expect different
   *   > result values.
   *   >
   *   > To register custom results in TypeScript, add them to
   *   > {@linkcode CompileResultMap}.
   *
   *   [rehype-react]: https://github.com/rehypejs/rehype-react
   */
  stringify(r, i) {
    this.freeze();
    const l = gc(i), s = this.compiler || this.Compiler;
    return mh("stringify", s), L1(r), s(r, l);
  }
  /**
   * Configure the processor to use a plugin, a list of usable values, or a
   * preset.
   *
   * If the processor is already using a plugin, the previous plugin
   * configuration is changed based on the options that are passed in.
   * In other words, the plugin is not added a second time.
   *
   * > **Note**: `use` cannot be called on *frozen* processors.
   * > Call the processor first to create a new unfrozen processor.
   *
   * @example
   *   There are many ways to pass plugins to `.use()`.
   *   This example gives an overview:
   *
   *   ```js
   *   import {unified} from 'unified'
   *
   *   unified()
   *     // Plugin with options:
   *     .use(pluginA, {x: true, y: true})
   *     // Passing the same plugin again merges configuration (to `{x: true, y: false, z: true}`):
   *     .use(pluginA, {y: false, z: true})
   *     // Plugins:
   *     .use([pluginB, pluginC])
   *     // Two plugins, the second with options:
   *     .use([pluginD, [pluginE, {}]])
   *     // Preset with plugins and settings:
   *     .use({plugins: [pluginF, [pluginG, {}]], settings: {position: false}})
   *     // Settings only:
   *     .use({settings: {position: false}})
   *   ```
   *
   * @template {Array<unknown>} [Parameters=[]]
   * @template {Node | string | undefined} [Input=undefined]
   * @template [Output=Input]
   *
   * @overload
   * @param {Preset | null | undefined} [preset]
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *
   * @overload
   * @param {PluggableList} list
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *
   * @overload
   * @param {Plugin<Parameters, Input, Output>} plugin
   * @param {...(Parameters | [boolean])} parameters
   * @returns {UsePlugin<ParseTree, HeadTree, TailTree, CompileTree, CompileResult, Input, Output>}
   *
   * @param {PluggableList | Plugin | Preset | null | undefined} value
   *   Usable value.
   * @param {...unknown} parameters
   *   Parameters, when a plugin is given as a usable value.
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *   Current processor.
   */
  use(r, ...i) {
    const l = this.attachers, s = this.namespace;
    if (ph("use", this.frozen), r != null) if (typeof r == "function")
      y(r, i);
    else if (typeof r == "object")
      Array.isArray(r) ? g(r) : f(r);
    else
      throw new TypeError("Expected usable value, not `" + r + "`");
    return this;
    function c(b) {
      if (typeof b == "function")
        y(b, []);
      else if (typeof b == "object")
        if (Array.isArray(b)) {
          const [S, ...x] = (
            /** @type {PluginTuple<Array<unknown>>} */
            b
          );
          y(S, x);
        } else
          f(b);
      else
        throw new TypeError("Expected usable value, not `" + b + "`");
    }
    function f(b) {
      if (!("plugins" in b) && !("settings" in b))
        throw new Error(
          "Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither"
        );
      g(b.plugins), b.settings && (s.settings = uh(!0, s.settings, b.settings));
    }
    function g(b) {
      let S = -1;
      if (b != null) if (Array.isArray(b))
        for (; ++S < b.length; ) {
          const x = b[S];
          c(x);
        }
      else
        throw new TypeError("Expected a list of plugins, not `" + b + "`");
    }
    function y(b, S) {
      let x = -1, _ = -1;
      for (; ++x < l.length; )
        if (l[x][0] === b) {
          _ = x;
          break;
        }
      if (_ === -1)
        l.push([b, ...S]);
      else if (S.length > 0) {
        let [E, ...N] = S;
        const U = l[_][1];
        Ih(U) && Ih(E) && (E = uh(!0, U, E)), l[_] = [b, E, ...N];
      }
    }
  }
}
const hS = new Sm().freeze();
function hh(n, r) {
  if (typeof r != "function")
    throw new TypeError("Cannot `" + n + "` without `parser`");
}
function mh(n, r) {
  if (typeof r != "function")
    throw new TypeError("Cannot `" + n + "` without `compiler`");
}
function ph(n, r) {
  if (r)
    throw new Error(
      "Cannot call `" + n + "` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`."
    );
}
function L1(n) {
  if (!Ih(n) || typeof n.type != "string")
    throw new TypeError("Expected node, got `" + n + "`");
}
function B1(n, r, i) {
  if (!i)
    throw new Error(
      "`" + n + "` finished async. Use `" + r + "` instead"
    );
}
function gc(n) {
  return mS(n) ? n : new h2(n);
}
function mS(n) {
  return !!(n && typeof n == "object" && "message" in n && "messages" in n);
}
function pS(n) {
  return typeof n == "string" || gS(n);
}
function gS(n) {
  return !!(n && typeof n == "object" && "byteLength" in n && "byteOffset" in n);
}
const yS = "https://github.com/remarkjs/react-markdown/blob/main/changelog.md", U1 = [], I1 = { allowDangerousHtml: !0 }, bS = /^(https?|ircs?|mailto|xmpp)$/i, xS = [
  { from: "astPlugins", id: "remove-buggy-html-in-markdown-parser" },
  { from: "allowDangerousHtml", id: "remove-buggy-html-in-markdown-parser" },
  {
    from: "allowNode",
    id: "replace-allownode-allowedtypes-and-disallowedtypes",
    to: "allowElement"
  },
  {
    from: "allowedTypes",
    id: "replace-allownode-allowedtypes-and-disallowedtypes",
    to: "allowedElements"
  },
  { from: "className", id: "remove-classname" },
  {
    from: "disallowedTypes",
    id: "replace-allownode-allowedtypes-and-disallowedtypes",
    to: "disallowedElements"
  },
  { from: "escapeHtml", id: "remove-buggy-html-in-markdown-parser" },
  { from: "includeElementIndex", id: "#remove-includeelementindex" },
  {
    from: "includeNodeIndex",
    id: "change-includenodeindex-to-includeelementindex"
  },
  { from: "linkTarget", id: "remove-linktarget" },
  { from: "plugins", id: "change-plugins-to-remarkplugins", to: "remarkPlugins" },
  { from: "rawSourcePos", id: "#remove-rawsourcepos" },
  { from: "renderers", id: "change-renderers-to-components", to: "components" },
  { from: "source", id: "change-source-to-children", to: "children" },
  { from: "sourcePos", id: "#remove-sourcepos" },
  { from: "transformImageUri", id: "#add-urltransform", to: "urlTransform" },
  { from: "transformLinkUri", id: "#add-urltransform", to: "urlTransform" }
];
function vS(n) {
  const r = SS(n), i = wS(n);
  return kS(r.runSync(r.parse(i), i), n);
}
function SS(n) {
  const r = n.rehypePlugins || U1, i = n.remarkPlugins || U1, l = n.remarkRehypeOptions ? { ...n.remarkRehypeOptions, ...I1 } : I1;
  return hS().use(t8).use(i).use(X8, l).use(r);
}
function wS(n) {
  const r = n.children || "", i = new h2();
  return typeof r == "string" && (i.value = r), i;
}
function kS(n, r) {
  const i = r.allowedElements, l = r.allowElement, s = r.components, c = r.disallowedElements, f = r.skipHtml, g = r.unwrapDisallowed, y = r.urlTransform || CS;
  for (const S of xS)
    Object.hasOwn(r, S.from) && ("" + S.from + (S.to ? "use `" + S.to + "` instead" : "remove it") + yS + S.id, void 0);
  return vm(n, b), U3(n, {
    Fragment: h.Fragment,
    components: s,
    ignoreInvalidStyle: !0,
    jsx: h.jsx,
    jsxs: h.jsxs,
    passKeys: !0,
    passNode: !0
  });
  function b(S, x, _) {
    if (S.type === "raw" && _ && typeof x == "number")
      return f ? _.children.splice(x, 1) : _.children[x] = { type: "text", value: S.value }, x;
    if (S.type === "element") {
      let E;
      for (E in ah)
        if (Object.hasOwn(ah, E) && Object.hasOwn(S.properties, E)) {
          const N = S.properties[E], U = ah[E];
          (U === null || U.includes(S.tagName)) && (S.properties[E] = y(String(N || ""), E, S));
        }
    }
    if (S.type === "element") {
      let E = i ? !i.includes(S.tagName) : c ? c.includes(S.tagName) : !1;
      if (!E && l && typeof x == "number" && (E = !l(S, x, _)), E && _ && typeof x == "number")
        return g && S.children ? _.children.splice(x, 1, ...S.children) : _.children.splice(x, 1), x;
    }
  }
}
function CS(n) {
  const r = n.indexOf(":"), i = n.indexOf("?"), l = n.indexOf("#"), s = n.indexOf("/");
  return (
    // If there is no protocol, its relative.
    r === -1 || // If the first colon is after a `?`, `#`, or `/`, its not a protocol.
    s !== -1 && r > s || i !== -1 && r > i || l !== -1 && r > l || // It is a protocol, it should be allowed.
    bS.test(n.slice(0, r)) ? n : ""
  );
}
function q1(n, r) {
  const i = String(n);
  if (typeof r != "string")
    throw new TypeError("Expected character");
  let l = 0, s = i.indexOf(r);
  for (; s !== -1; )
    l++, s = i.indexOf(r, s + r.length);
  return l;
}
function ES(n) {
  if (typeof n != "string")
    throw new TypeError("Expected a string");
  return n.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&").replace(/-/g, "\\x2d");
}
function _S(n, r, i) {
  const s = Gc((i || {}).ignore || []), c = jS(r);
  let f = -1;
  for (; ++f < c.length; )
    d2(n, "text", g);
  function g(b, S) {
    let x = -1, _;
    for (; ++x < S.length; ) {
      const E = S[x], N = _ ? _.children : void 0;
      if (s(
        E,
        N ? N.indexOf(E) : void 0,
        _
      ))
        return;
      _ = E;
    }
    if (_)
      return y(b, S);
  }
  function y(b, S) {
    const x = S[S.length - 1], _ = c[f][0], E = c[f][1];
    let N = 0;
    const G = x.children.indexOf(b);
    let D = !1, ne = [];
    _.lastIndex = 0;
    let ie = _.exec(b.value);
    for (; ie; ) {
      const _e = ie.index, we = {
        index: ie.index,
        input: ie.input,
        stack: [...S, b]
      };
      let I = E(...ie, we);
      if (typeof I == "string" && (I = I.length > 0 ? { type: "text", value: I } : void 0), I === !1 ? _.lastIndex = _e + 1 : (N !== _e && ne.push({
        type: "text",
        value: b.value.slice(N, _e)
      }), Array.isArray(I) ? ne.push(...I) : I && ne.push(I), N = _e + ie[0].length, D = !0), !_.global)
        break;
      ie = _.exec(b.value);
    }
    return D ? (N < b.value.length && ne.push({ type: "text", value: b.value.slice(N) }), x.children.splice(G, 1, ...ne)) : ne = [b], G + ne.length;
  }
}
function jS(n) {
  const r = [];
  if (!Array.isArray(n))
    throw new TypeError("Expected find and replace tuple or list of tuples");
  const i = !n[0] || Array.isArray(n[0]) ? n : [n];
  let l = -1;
  for (; ++l < i.length; ) {
    const s = i[l];
    r.push([TS(s[0]), NS(s[1])]);
  }
  return r;
}
function TS(n) {
  return typeof n == "string" ? new RegExp(ES(n), "g") : n;
}
function NS(n) {
  return typeof n == "function" ? n : function() {
    return n;
  };
}
const gh = "phrasing", yh = ["autolink", "link", "image", "label"];
function AS() {
  return {
    transforms: [BS],
    enter: {
      literalAutolink: MS,
      literalAutolinkEmail: bh,
      literalAutolinkHttp: bh,
      literalAutolinkWww: bh
    },
    exit: {
      literalAutolink: LS,
      literalAutolinkEmail: RS,
      literalAutolinkHttp: OS,
      literalAutolinkWww: DS
    }
  };
}
function zS() {
  return {
    unsafe: [
      {
        character: "@",
        before: "[+\\-.\\w]",
        after: "[\\-.\\w]",
        inConstruct: gh,
        notInConstruct: yh
      },
      {
        character: ".",
        before: "[Ww]",
        after: "[\\-.\\w]",
        inConstruct: gh,
        notInConstruct: yh
      },
      {
        character: ":",
        before: "[ps]",
        after: "\\/",
        inConstruct: gh,
        notInConstruct: yh
      }
    ]
  };
}
function MS(n) {
  this.enter({ type: "link", title: null, url: "", children: [] }, n);
}
function bh(n) {
  this.config.enter.autolinkProtocol.call(this, n);
}
function OS(n) {
  this.config.exit.autolinkProtocol.call(this, n);
}
function DS(n) {
  this.config.exit.data.call(this, n);
  const r = this.stack[this.stack.length - 1];
  r.type, r.url = "http://" + this.sliceSerialize(n);
}
function RS(n) {
  this.config.exit.autolinkEmail.call(this, n);
}
function LS(n) {
  this.exit(n);
}
function BS(n) {
  _S(
    n,
    [
      [/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi, US],
      [new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)", "gu"), IS]
    ],
    { ignore: ["link", "linkReference"] }
  );
}
function US(n, r, i, l, s) {
  let c = "";
  if (!m2(s) || (/^w/i.test(r) && (i = r + i, r = "", c = "http://"), !qS(i)))
    return !1;
  const f = HS(i + l);
  if (!f[0]) return !1;
  const g = {
    type: "link",
    title: null,
    url: c + r + f[0],
    children: [{ type: "text", value: r + f[0] }]
  };
  return f[1] ? [g, { type: "text", value: f[1] }] : g;
}
function IS(n, r, i, l) {
  return (
    // Not an expected previous character.
    !m2(l, !0) || // Label ends in not allowed character.
    /[-\d_]$/.test(i) ? !1 : {
      type: "link",
      title: null,
      url: "mailto:" + r + "@" + i,
      children: [{ type: "text", value: r + "@" + i }]
    }
  );
}
function qS(n) {
  const r = n.split(".");
  return !(r.length < 2 || r[r.length - 1] && (/_/.test(r[r.length - 1]) || !/[a-zA-Z\d]/.test(r[r.length - 1])) || r[r.length - 2] && (/_/.test(r[r.length - 2]) || !/[a-zA-Z\d]/.test(r[r.length - 2])));
}
function HS(n) {
  const r = /[!"&'),.:;<>?\]}]+$/.exec(n);
  if (!r)
    return [n, void 0];
  n = n.slice(0, r.index);
  let i = r[0], l = i.indexOf(")");
  const s = q1(n, "(");
  let c = q1(n, ")");
  for (; l !== -1 && s > c; )
    n += i.slice(0, l + 1), i = i.slice(l + 1), l = i.indexOf(")"), c++;
  return [n, i];
}
function m2(n, r) {
  const i = n.input.charCodeAt(n.index - 1);
  return (n.index === 0 || sl(i) || Fc(i)) && // If its an email, the previous character should not be a slash.
  (!r || i !== 47);
}
p2.peek = QS;
function PS() {
  this.buffer();
}
function FS(n) {
  this.enter({ type: "footnoteReference", identifier: "", label: "" }, n);
}
function VS() {
  this.buffer();
}
function KS(n) {
  this.enter(
    { type: "footnoteDefinition", identifier: "", label: "", children: [] },
    n
  );
}
function GS(n) {
  const r = this.resume(), i = this.stack[this.stack.length - 1];
  i.type, i.identifier = Dr(
    this.sliceSerialize(n)
  ).toLowerCase(), i.label = r;
}
function $S(n) {
  this.exit(n);
}
function YS(n) {
  const r = this.resume(), i = this.stack[this.stack.length - 1];
  i.type, i.identifier = Dr(
    this.sliceSerialize(n)
  ).toLowerCase(), i.label = r;
}
function XS(n) {
  this.exit(n);
}
function QS() {
  return "[";
}
function p2(n, r, i, l) {
  const s = i.createTracker(l);
  let c = s.move("[^");
  const f = i.enter("footnoteReference"), g = i.enter("reference");
  return c += s.move(
    i.safe(i.associationId(n), { after: "]", before: c })
  ), g(), f(), c += s.move("]"), c;
}
function ZS() {
  return {
    enter: {
      gfmFootnoteCallString: PS,
      gfmFootnoteCall: FS,
      gfmFootnoteDefinitionLabelString: VS,
      gfmFootnoteDefinition: KS
    },
    exit: {
      gfmFootnoteCallString: GS,
      gfmFootnoteCall: $S,
      gfmFootnoteDefinitionLabelString: YS,
      gfmFootnoteDefinition: XS
    }
  };
}
function WS(n) {
  let r = !1;
  return n && n.firstLineBlank && (r = !0), {
    handlers: { footnoteDefinition: i, footnoteReference: p2 },
    // This is on by default already.
    unsafe: [{ character: "[", inConstruct: ["label", "phrasing", "reference"] }]
  };
  function i(l, s, c, f) {
    const g = c.createTracker(f);
    let y = g.move("[^");
    const b = c.enter("footnoteDefinition"), S = c.enter("label");
    return y += g.move(
      c.safe(c.associationId(l), { before: y, after: "]" })
    ), S(), y += g.move("]:"), l.children && l.children.length > 0 && (g.shift(4), y += g.move(
      (r ? `
` : " ") + c.indentLines(
        c.containerFlow(l, g.current()),
        r ? g2 : JS
      )
    )), b(), y;
  }
}
function JS(n, r, i) {
  return r === 0 ? n : g2(n, r, i);
}
function g2(n, r, i) {
  return (i ? "" : "    ") + n;
}
const e7 = [
  "autolink",
  "destinationLiteral",
  "destinationRaw",
  "reference",
  "titleQuote",
  "titleApostrophe"
];
y2.peek = a7;
function t7() {
  return {
    canContainEols: ["delete"],
    enter: { strikethrough: r7 },
    exit: { strikethrough: i7 }
  };
}
function n7() {
  return {
    unsafe: [
      {
        character: "~",
        inConstruct: "phrasing",
        notInConstruct: e7
      }
    ],
    handlers: { delete: y2 }
  };
}
function r7(n) {
  this.enter({ type: "delete", children: [] }, n);
}
function i7(n) {
  this.exit(n);
}
function y2(n, r, i, l) {
  const s = i.createTracker(l), c = i.enter("strikethrough");
  let f = s.move("~~");
  return f += i.containerPhrasing(n, {
    ...s.current(),
    before: f,
    after: "~"
  }), f += s.move("~~"), c(), f;
}
function a7() {
  return "~";
}
function l7(n) {
  return n.length;
}
function o7(n, r) {
  const i = r || {}, l = (i.align || []).concat(), s = i.stringLength || l7, c = [], f = [], g = [], y = [];
  let b = 0, S = -1;
  for (; ++S < n.length; ) {
    const U = [], G = [];
    let D = -1;
    for (n[S].length > b && (b = n[S].length); ++D < n[S].length; ) {
      const ne = s7(n[S][D]);
      if (i.alignDelimiters !== !1) {
        const ie = s(ne);
        G[D] = ie, (y[D] === void 0 || ie > y[D]) && (y[D] = ie);
      }
      U.push(ne);
    }
    f[S] = U, g[S] = G;
  }
  let x = -1;
  if (typeof l == "object" && "length" in l)
    for (; ++x < b; )
      c[x] = H1(l[x]);
  else {
    const U = H1(l);
    for (; ++x < b; )
      c[x] = U;
  }
  x = -1;
  const _ = [], E = [];
  for (; ++x < b; ) {
    const U = c[x];
    let G = "", D = "";
    U === 99 ? (G = ":", D = ":") : U === 108 ? G = ":" : U === 114 && (D = ":");
    let ne = i.alignDelimiters === !1 ? 1 : Math.max(
      1,
      y[x] - G.length - D.length
    );
    const ie = G + "-".repeat(ne) + D;
    i.alignDelimiters !== !1 && (ne = G.length + ne + D.length, ne > y[x] && (y[x] = ne), E[x] = ne), _[x] = ie;
  }
  f.splice(1, 0, _), g.splice(1, 0, E), S = -1;
  const N = [];
  for (; ++S < f.length; ) {
    const U = f[S], G = g[S];
    x = -1;
    const D = [];
    for (; ++x < b; ) {
      const ne = U[x] || "";
      let ie = "", _e = "";
      if (i.alignDelimiters !== !1) {
        const we = y[x] - (G[x] || 0), I = c[x];
        I === 114 ? ie = " ".repeat(we) : I === 99 ? we % 2 ? (ie = " ".repeat(we / 2 + 0.5), _e = " ".repeat(we / 2 - 0.5)) : (ie = " ".repeat(we / 2), _e = ie) : _e = " ".repeat(we);
      }
      i.delimiterStart !== !1 && !x && D.push("|"), i.padding !== !1 && // Dont add the opening space if were not aligning and the cell is
      // empty: there will be a closing space.
      !(i.alignDelimiters === !1 && ne === "") && (i.delimiterStart !== !1 || x) && D.push(" "), i.alignDelimiters !== !1 && D.push(ie), D.push(ne), i.alignDelimiters !== !1 && D.push(_e), i.padding !== !1 && D.push(" "), (i.delimiterEnd !== !1 || x !== b - 1) && D.push("|");
    }
    N.push(
      i.delimiterEnd === !1 ? D.join("").replace(/ +$/, "") : D.join("")
    );
  }
  return N.join(`
`);
}
function s7(n) {
  return n == null ? "" : String(n);
}
function H1(n) {
  const r = typeof n == "string" ? n.codePointAt(0) : 0;
  return r === 67 || r === 99 ? 99 : r === 76 || r === 108 ? 108 : r === 82 || r === 114 ? 114 : 0;
}
function u7(n, r, i, l) {
  const s = i.enter("blockquote"), c = i.createTracker(l);
  c.move("> "), c.shift(2);
  const f = i.indentLines(
    i.containerFlow(n, c.current()),
    c7
  );
  return s(), f;
}
function c7(n, r, i) {
  return ">" + (i ? "" : " ") + n;
}
function f7(n, r) {
  return P1(n, r.inConstruct, !0) && !P1(n, r.notInConstruct, !1);
}
function P1(n, r, i) {
  if (typeof r == "string" && (r = [r]), !r || r.length === 0)
    return i;
  let l = -1;
  for (; ++l < r.length; )
    if (n.includes(r[l]))
      return !0;
  return !1;
}
function F1(n, r, i, l) {
  let s = -1;
  for (; ++s < i.unsafe.length; )
    if (i.unsafe[s].character === `
` && f7(i.stack, i.unsafe[s]))
      return /[ \t]/.test(l.before) ? "" : " ";
  return `\\
`;
}
function d7(n, r) {
  const i = String(n);
  let l = i.indexOf(r), s = l, c = 0, f = 0;
  if (typeof r != "string")
    throw new TypeError("Expected substring");
  for (; l !== -1; )
    l === s ? ++c > f && (f = c) : c = 1, s = l + r.length, l = i.indexOf(r, s);
  return f;
}
function h7(n, r) {
  return !!(r.options.fences === !1 && n.value && // If theres no info
  !n.lang && // And theres a non-whitespace character
  /[^ \r\n]/.test(n.value) && // And the value doesnt start or end in a blank
  !/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value));
}
function m7(n) {
  const r = n.options.fence || "`";
  if (r !== "`" && r !== "~")
    throw new Error(
      "Cannot serialize code with `" + r + "` for `options.fence`, expected `` ` `` or `~`"
    );
  return r;
}
function p7(n, r, i, l) {
  const s = m7(i), c = n.value || "", f = s === "`" ? "GraveAccent" : "Tilde";
  if (h7(n, i)) {
    const x = i.enter("codeIndented"), _ = i.indentLines(c, g7);
    return x(), _;
  }
  const g = i.createTracker(l), y = s.repeat(Math.max(d7(c, s) + 1, 3)), b = i.enter("codeFenced");
  let S = g.move(y);
  if (n.lang) {
    const x = i.enter(`codeFencedLang${f}`);
    S += g.move(
      i.safe(n.lang, {
        before: S,
        after: " ",
        encode: ["`"],
        ...g.current()
      })
    ), x();
  }
  if (n.lang && n.meta) {
    const x = i.enter(`codeFencedMeta${f}`);
    S += g.move(" "), S += g.move(
      i.safe(n.meta, {
        before: S,
        after: `
`,
        encode: ["`"],
        ...g.current()
      })
    ), x();
  }
  return S += g.move(`
`), c && (S += g.move(c + `
`)), S += g.move(y), b(), S;
}
function g7(n, r, i) {
  return (i ? "" : "    ") + n;
}
function wm(n) {
  const r = n.options.quote || '"';
  if (r !== '"' && r !== "'")
    throw new Error(
      "Cannot serialize title with `" + r + "` for `options.quote`, expected `\"`, or `'`"
    );
  return r;
}
function y7(n, r, i, l) {
  const s = wm(i), c = s === '"' ? "Quote" : "Apostrophe", f = i.enter("definition");
  let g = i.enter("label");
  const y = i.createTracker(l);
  let b = y.move("[");
  return b += y.move(
    i.safe(i.associationId(n), {
      before: b,
      after: "]",
      ...y.current()
    })
  ), b += y.move("]: "), g(), // If theres no url, or
  !n.url || // If there are control characters or whitespace.
  /[\0- \u007F]/.test(n.url) ? (g = i.enter("destinationLiteral"), b += y.move("<"), b += y.move(
    i.safe(n.url, { before: b, after: ">", ...y.current() })
  ), b += y.move(">")) : (g = i.enter("destinationRaw"), b += y.move(
    i.safe(n.url, {
      before: b,
      after: n.title ? " " : `
`,
      ...y.current()
    })
  )), g(), n.title && (g = i.enter(`title${c}`), b += y.move(" " + s), b += y.move(
    i.safe(n.title, {
      before: b,
      after: s,
      ...y.current()
    })
  ), b += y.move(s), g()), f(), b;
}
function b7(n) {
  const r = n.options.emphasis || "*";
  if (r !== "*" && r !== "_")
    throw new Error(
      "Cannot serialize emphasis with `" + r + "` for `options.emphasis`, expected `*`, or `_`"
    );
  return r;
}
function qs(n) {
  return "&#x" + n.toString(16).toUpperCase() + ";";
}
function zc(n, r, i) {
  const l = xo(n), s = xo(r);
  return l === void 0 ? s === void 0 ? (
    // Letter inside:
    // we have to encode *both* letters for `_` as it is looser.
    // it already forms for `*` (and GFMs `~`).
    i === "_" ? { inside: !0, outside: !0 } : { inside: !1, outside: !1 }
  ) : s === 1 ? (
    // Whitespace inside: encode both (letter, whitespace).
    { inside: !0, outside: !0 }
  ) : (
    // Punctuation inside: encode outer (letter)
    { inside: !1, outside: !0 }
  ) : l === 1 ? s === void 0 ? (
    // Letter inside: already forms.
    { inside: !1, outside: !1 }
  ) : s === 1 ? (
    // Whitespace inside: encode both (whitespace).
    { inside: !0, outside: !0 }
  ) : (
    // Punctuation inside: already forms.
    { inside: !1, outside: !1 }
  ) : s === void 0 ? (
    // Letter inside: already forms.
    { inside: !1, outside: !1 }
  ) : s === 1 ? (
    // Whitespace inside: encode inner (whitespace).
    { inside: !0, outside: !1 }
  ) : (
    // Punctuation inside: already forms.
    { inside: !1, outside: !1 }
  );
}
b2.peek = x7;
function b2(n, r, i, l) {
  const s = b7(i), c = i.enter("emphasis"), f = i.createTracker(l), g = f.move(s);
  let y = f.move(
    i.containerPhrasing(n, {
      after: s,
      before: g,
      ...f.current()
    })
  );
  const b = y.charCodeAt(0), S = zc(
    l.before.charCodeAt(l.before.length - 1),
    b,
    s
  );
  S.inside && (y = qs(b) + y.slice(1));
  const x = y.charCodeAt(y.length - 1), _ = zc(l.after.charCodeAt(0), x, s);
  _.inside && (y = y.slice(0, -1) + qs(x));
  const E = f.move(s);
  return c(), i.attentionEncodeSurroundingInfo = {
    after: _.outside,
    before: S.outside
  }, g + y + E;
}
function x7(n, r, i) {
  return i.options.emphasis || "*";
}
function v7(n, r) {
  let i = !1;
  return vm(n, function(l) {
    if ("value" in l && /\r?\n|\r/.test(l.value) || l.type === "break")
      return i = !0, Bh;
  }), !!((!n.depth || n.depth < 3) && hm(n) && (r.options.setext || i));
}
function S7(n, r, i, l) {
  const s = Math.max(Math.min(6, n.depth || 1), 1), c = i.createTracker(l);
  if (v7(n, i)) {
    const S = i.enter("headingSetext"), x = i.enter("phrasing"), _ = i.containerPhrasing(n, {
      ...c.current(),
      before: `
`,
      after: `
`
    });
    return x(), S(), _ + `
` + (s === 1 ? "=" : "-").repeat(
      // The whole size
      _.length - // Minus the position of the character after the last EOL (or
      // 0 if there is none)
      (Math.max(_.lastIndexOf("\r"), _.lastIndexOf(`
`)) + 1)
    );
  }
  const f = "#".repeat(s), g = i.enter("headingAtx"), y = i.enter("phrasing");
  c.move(f + " ");
  let b = i.containerPhrasing(n, {
    before: "# ",
    after: `
`,
    ...c.current()
  });
  return /^[\t ]/.test(b) && (b = qs(b.charCodeAt(0)) + b.slice(1)), b = b ? f + " " + b : f, i.options.closeAtx && (b += " " + f), y(), g(), b;
}
x2.peek = w7;
function x2(n) {
  return n.value || "";
}
function w7() {
  return "<";
}
v2.peek = k7;
function v2(n, r, i, l) {
  const s = wm(i), c = s === '"' ? "Quote" : "Apostrophe", f = i.enter("image");
  let g = i.enter("label");
  const y = i.createTracker(l);
  let b = y.move("![");
  return b += y.move(
    i.safe(n.alt, { before: b, after: "]", ...y.current() })
  ), b += y.move("]("), g(), // If theres no url but there is a title
  !n.url && n.title || // If there are control characters or whitespace.
  /[\0- \u007F]/.test(n.url) ? (g = i.enter("destinationLiteral"), b += y.move("<"), b += y.move(
    i.safe(n.url, { before: b, after: ">", ...y.current() })
  ), b += y.move(">")) : (g = i.enter("destinationRaw"), b += y.move(
    i.safe(n.url, {
      before: b,
      after: n.title ? " " : ")",
      ...y.current()
    })
  )), g(), n.title && (g = i.enter(`title${c}`), b += y.move(" " + s), b += y.move(
    i.safe(n.title, {
      before: b,
      after: s,
      ...y.current()
    })
  ), b += y.move(s), g()), b += y.move(")"), f(), b;
}
function k7() {
  return "!";
}
S2.peek = C7;
function S2(n, r, i, l) {
  const s = n.referenceType, c = i.enter("imageReference");
  let f = i.enter("label");
  const g = i.createTracker(l);
  let y = g.move("![");
  const b = i.safe(n.alt, {
    before: y,
    after: "]",
    ...g.current()
  });
  y += g.move(b + "]["), f();
  const S = i.stack;
  i.stack = [], f = i.enter("reference");
  const x = i.safe(i.associationId(n), {
    before: y,
    after: "]",
    ...g.current()
  });
  return f(), i.stack = S, c(), s === "full" || !b || b !== x ? y += g.move(x + "]") : s === "shortcut" ? y = y.slice(0, -1) : y += g.move("]"), y;
}
function C7() {
  return "!";
}
w2.peek = E7;
function w2(n, r, i) {
  let l = n.value || "", s = "`", c = -1;
  for (; new RegExp("(^|[^`])" + s + "([^`]|$)").test(l); )
    s += "`";
  for (/[^ \r\n]/.test(l) && (/^[ \r\n]/.test(l) && /[ \r\n]$/.test(l) || /^`|`$/.test(l)) && (l = " " + l + " "); ++c < i.unsafe.length; ) {
    const f = i.unsafe[c], g = i.compilePattern(f);
    let y;
    if (f.atBreak)
      for (; y = g.exec(l); ) {
        let b = y.index;
        l.charCodeAt(b) === 10 && l.charCodeAt(b - 1) === 13 && b--, l = l.slice(0, b) + " " + l.slice(y.index + 1);
      }
  }
  return s + l + s;
}
function E7() {
  return "`";
}
function k2(n, r) {
  const i = hm(n);
  return !!(!r.options.resourceLink && // If theres a url
  n.url && // And theres a no title
  !n.title && // And the content of `node` is a single text node
  n.children && n.children.length === 1 && n.children[0].type === "text" && // And if the url is the same as the content
  (i === n.url || "mailto:" + i === n.url) && // And that starts w/ a protocol
  /^[a-z][a-z+.-]+:/i.test(n.url) && // And that doesnt contain ASCII control codes (character escapes and
  // references dont work), space, or angle brackets
  !/[\0- <>\u007F]/.test(n.url));
}
C2.peek = _7;
function C2(n, r, i, l) {
  const s = wm(i), c = s === '"' ? "Quote" : "Apostrophe", f = i.createTracker(l);
  let g, y;
  if (k2(n, i)) {
    const S = i.stack;
    i.stack = [], g = i.enter("autolink");
    let x = f.move("<");
    return x += f.move(
      i.containerPhrasing(n, {
        before: x,
        after: ">",
        ...f.current()
      })
    ), x += f.move(">"), g(), i.stack = S, x;
  }
  g = i.enter("link"), y = i.enter("label");
  let b = f.move("[");
  return b += f.move(
    i.containerPhrasing(n, {
      before: b,
      after: "](",
      ...f.current()
    })
  ), b += f.move("]("), y(), // If theres no url but there is a title
  !n.url && n.title || // If there are control characters or whitespace.
  /[\0- \u007F]/.test(n.url) ? (y = i.enter("destinationLiteral"), b += f.move("<"), b += f.move(
    i.safe(n.url, { before: b, after: ">", ...f.current() })
  ), b += f.move(">")) : (y = i.enter("destinationRaw"), b += f.move(
    i.safe(n.url, {
      before: b,
      after: n.title ? " " : ")",
      ...f.current()
    })
  )), y(), n.title && (y = i.enter(`title${c}`), b += f.move(" " + s), b += f.move(
    i.safe(n.title, {
      before: b,
      after: s,
      ...f.current()
    })
  ), b += f.move(s), y()), b += f.move(")"), g(), b;
}
function _7(n, r, i) {
  return k2(n, i) ? "<" : "[";
}
E2.peek = j7;
function E2(n, r, i, l) {
  const s = n.referenceType, c = i.enter("linkReference");
  let f = i.enter("label");
  const g = i.createTracker(l);
  let y = g.move("[");
  const b = i.containerPhrasing(n, {
    before: y,
    after: "]",
    ...g.current()
  });
  y += g.move(b + "]["), f();
  const S = i.stack;
  i.stack = [], f = i.enter("reference");
  const x = i.safe(i.associationId(n), {
    before: y,
    after: "]",
    ...g.current()
  });
  return f(), i.stack = S, c(), s === "full" || !b || b !== x ? y += g.move(x + "]") : s === "shortcut" ? y = y.slice(0, -1) : y += g.move("]"), y;
}
function j7() {
  return "[";
}
function km(n) {
  const r = n.options.bullet || "*";
  if (r !== "*" && r !== "+" && r !== "-")
    throw new Error(
      "Cannot serialize items with `" + r + "` for `options.bullet`, expected `*`, `+`, or `-`"
    );
  return r;
}
function T7(n) {
  const r = km(n), i = n.options.bulletOther;
  if (!i)
    return r === "*" ? "-" : "*";
  if (i !== "*" && i !== "+" && i !== "-")
    throw new Error(
      "Cannot serialize items with `" + i + "` for `options.bulletOther`, expected `*`, `+`, or `-`"
    );
  if (i === r)
    throw new Error(
      "Expected `bullet` (`" + r + "`) and `bulletOther` (`" + i + "`) to be different"
    );
  return i;
}
function N7(n) {
  const r = n.options.bulletOrdered || ".";
  if (r !== "." && r !== ")")
    throw new Error(
      "Cannot serialize items with `" + r + "` for `options.bulletOrdered`, expected `.` or `)`"
    );
  return r;
}
function _2(n) {
  const r = n.options.rule || "*";
  if (r !== "*" && r !== "-" && r !== "_")
    throw new Error(
      "Cannot serialize rules with `" + r + "` for `options.rule`, expected `*`, `-`, or `_`"
    );
  return r;
}
function A7(n, r, i, l) {
  const s = i.enter("list"), c = i.bulletCurrent;
  let f = n.ordered ? N7(i) : km(i);
  const g = n.ordered ? f === "." ? ")" : "." : T7(i);
  let y = r && i.bulletLastUsed ? f === i.bulletLastUsed : !1;
  if (!n.ordered) {
    const S = n.children ? n.children[0] : void 0;
    if (
      // Bullet could be used as a thematic break marker:
      (f === "*" || f === "-") && // Empty first list item:
      S && (!S.children || !S.children[0]) && // Directly in two other list items:
      i.stack[i.stack.length - 1] === "list" && i.stack[i.stack.length - 2] === "listItem" && i.stack[i.stack.length - 3] === "list" && i.stack[i.stack.length - 4] === "listItem" && // That are each the first child.
      i.indexStack[i.indexStack.length - 1] === 0 && i.indexStack[i.indexStack.length - 2] === 0 && i.indexStack[i.indexStack.length - 3] === 0 && (y = !0), _2(i) === f && S
    ) {
      let x = -1;
      for (; ++x < n.children.length; ) {
        const _ = n.children[x];
        if (_ && _.type === "listItem" && _.children && _.children[0] && _.children[0].type === "thematicBreak") {
          y = !0;
          break;
        }
      }
    }
  }
  y && (f = g), i.bulletCurrent = f;
  const b = i.containerFlow(n, l);
  return i.bulletLastUsed = f, i.bulletCurrent = c, s(), b;
}
function z7(n) {
  const r = n.options.listItemIndent || "one";
  if (r !== "tab" && r !== "one" && r !== "mixed")
    throw new Error(
      "Cannot serialize items with `" + r + "` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`"
    );
  return r;
}
function M7(n, r, i, l) {
  const s = z7(i);
  let c = i.bulletCurrent || km(i);
  r && r.type === "list" && r.ordered && (c = (typeof r.start == "number" && r.start > -1 ? r.start : 1) + (i.options.incrementListMarker === !1 ? 0 : r.children.indexOf(n)) + c);
  let f = c.length + 1;
  (s === "tab" || s === "mixed" && (r && r.type === "list" && r.spread || n.spread)) && (f = Math.ceil(f / 4) * 4);
  const g = i.createTracker(l);
  g.move(c + " ".repeat(f - c.length)), g.shift(f);
  const y = i.enter("listItem"), b = i.indentLines(
    i.containerFlow(n, g.current()),
    S
  );
  return y(), b;
  function S(x, _, E) {
    return _ ? (E ? "" : " ".repeat(f)) + x : (E ? c : c + " ".repeat(f - c.length)) + x;
  }
}
function O7(n, r, i, l) {
  const s = i.enter("paragraph"), c = i.enter("phrasing"), f = i.containerPhrasing(n, l);
  return c(), s(), f;
}
const D7 = (
  /** @type {(node?: unknown) => node is Exclude<PhrasingContent, Html>} */
  Gc([
    "break",
    "delete",
    "emphasis",
    // To do: next major: removed since footnotes were added to GFM.
    "footnote",
    "footnoteReference",
    "image",
    "imageReference",
    "inlineCode",
    // Enabled by `mdast-util-math`:
    "inlineMath",
    "link",
    "linkReference",
    // Enabled by `mdast-util-mdx`:
    "mdxJsxTextElement",
    // Enabled by `mdast-util-mdx`:
    "mdxTextExpression",
    "strong",
    "text",
    // Enabled by `mdast-util-directive`:
    "textDirective"
  ])
);
function R7(n, r, i, l) {
  return (n.children.some(function(f) {
    return D7(f);
  }) ? i.containerPhrasing : i.containerFlow).call(i, n, l);
}
function L7(n) {
  const r = n.options.strong || "*";
  if (r !== "*" && r !== "_")
    throw new Error(
      "Cannot serialize strong with `" + r + "` for `options.strong`, expected `*`, or `_`"
    );
  return r;
}
j2.peek = B7;
function j2(n, r, i, l) {
  const s = L7(i), c = i.enter("strong"), f = i.createTracker(l), g = f.move(s + s);
  let y = f.move(
    i.containerPhrasing(n, {
      after: s,
      before: g,
      ...f.current()
    })
  );
  const b = y.charCodeAt(0), S = zc(
    l.before.charCodeAt(l.before.length - 1),
    b,
    s
  );
  S.inside && (y = qs(b) + y.slice(1));
  const x = y.charCodeAt(y.length - 1), _ = zc(l.after.charCodeAt(0), x, s);
  _.inside && (y = y.slice(0, -1) + qs(x));
  const E = f.move(s + s);
  return c(), i.attentionEncodeSurroundingInfo = {
    after: _.outside,
    before: S.outside
  }, g + y + E;
}
function B7(n, r, i) {
  return i.options.strong || "*";
}
function U7(n, r, i, l) {
  return i.safe(n.value, l);
}
function I7(n) {
  const r = n.options.ruleRepetition || 3;
  if (r < 3)
    throw new Error(
      "Cannot serialize rules with repetition `" + r + "` for `options.ruleRepetition`, expected `3` or more"
    );
  return r;
}
function q7(n, r, i) {
  const l = (_2(i) + (i.options.ruleSpaces ? " " : "")).repeat(I7(i));
  return i.options.ruleSpaces ? l.slice(0, -1) : l;
}
const T2 = {
  blockquote: u7,
  break: F1,
  code: p7,
  definition: y7,
  emphasis: b2,
  hardBreak: F1,
  heading: S7,
  html: x2,
  image: v2,
  imageReference: S2,
  inlineCode: w2,
  link: C2,
  linkReference: E2,
  list: A7,
  listItem: M7,
  paragraph: O7,
  root: R7,
  strong: j2,
  text: U7,
  thematicBreak: q7
};
function H7() {
  return {
    enter: {
      table: P7,
      tableData: V1,
      tableHeader: V1,
      tableRow: V7
    },
    exit: {
      codeText: K7,
      table: F7,
      tableData: xh,
      tableHeader: xh,
      tableRow: xh
    }
  };
}
function P7(n) {
  const r = n._align;
  this.enter(
    {
      type: "table",
      align: r.map(function(i) {
        return i === "none" ? null : i;
      }),
      children: []
    },
    n
  ), this.data.inTable = !0;
}
function F7(n) {
  this.exit(n), this.data.inTable = void 0;
}
function V7(n) {
  this.enter({ type: "tableRow", children: [] }, n);
}
function xh(n) {
  this.exit(n);
}
function V1(n) {
  this.enter({ type: "tableCell", children: [] }, n);
}
function K7(n) {
  let r = this.resume();
  this.data.inTable && (r = r.replace(/\\([\\|])/g, G7));
  const i = this.stack[this.stack.length - 1];
  i.type, i.value = r, this.exit(n);
}
function G7(n, r) {
  return r === "|" ? r : n;
}
function $7(n) {
  const r = n || {}, i = r.tableCellPadding, l = r.tablePipeAlign, s = r.stringLength, c = i ? " " : "|";
  return {
    unsafe: [
      { character: "\r", inConstruct: "tableCell" },
      { character: `
`, inConstruct: "tableCell" },
      // A pipe, when followed by a tab or space (padding), or a dash or colon
      // (unpadded delimiter row), could result in a table.
      { atBreak: !0, character: "|", after: "[	 :-]" },
      // A pipe in a cell must be encoded.
      { character: "|", inConstruct: "tableCell" },
      // A colon must be followed by a dash, in which case it could start a
      // delimiter row.
      { atBreak: !0, character: ":", after: "-" },
      // A delimiter row can also start with a dash, when followed by more
      // dashes, a colon, or a pipe.
      // This is a stricter version than the built in check for lists, thematic
      // breaks, and setex heading underlines though:
      // <https://github.com/syntax-tree/mdast-util-to-markdown/blob/51a2038/lib/unsafe.js#L57>
      { atBreak: !0, character: "-", after: "[:|-]" }
    ],
    handlers: {
      inlineCode: _,
      table: f,
      tableCell: y,
      tableRow: g
    }
  };
  function f(E, N, U, G) {
    return b(S(E, U, G), E.align);
  }
  function g(E, N, U, G) {
    const D = x(E, U, G), ne = b([D]);
    return ne.slice(0, ne.indexOf(`
`));
  }
  function y(E, N, U, G) {
    const D = U.enter("tableCell"), ne = U.enter("phrasing"), ie = U.containerPhrasing(E, {
      ...G,
      before: c,
      after: c
    });
    return ne(), D(), ie;
  }
  function b(E, N) {
    return o7(E, {
      align: N,
      // @ts-expect-error: `markdown-table` types should support `null`.
      alignDelimiters: l,
      // @ts-expect-error: `markdown-table` types should support `null`.
      padding: i,
      // @ts-expect-error: `markdown-table` types should support `null`.
      stringLength: s
    });
  }
  function S(E, N, U) {
    const G = E.children;
    let D = -1;
    const ne = [], ie = N.enter("table");
    for (; ++D < G.length; )
      ne[D] = x(G[D], N, U);
    return ie(), ne;
  }
  function x(E, N, U) {
    const G = E.children;
    let D = -1;
    const ne = [], ie = N.enter("tableRow");
    for (; ++D < G.length; )
      ne[D] = y(G[D], E, N, U);
    return ie(), ne;
  }
  function _(E, N, U) {
    let G = T2.inlineCode(E, N, U);
    return U.stack.includes("tableCell") && (G = G.replace(/\|/g, "\\$&")), G;
  }
}
function Y7() {
  return {
    exit: {
      taskListCheckValueChecked: K1,
      taskListCheckValueUnchecked: K1,
      paragraph: Q7
    }
  };
}
function X7() {
  return {
    unsafe: [{ atBreak: !0, character: "-", after: "[:|-]" }],
    handlers: { listItem: Z7 }
  };
}
function K1(n) {
  const r = this.stack[this.stack.length - 2];
  r.type, r.checked = n.type === "taskListCheckValueChecked";
}
function Q7(n) {
  const r = this.stack[this.stack.length - 2];
  if (r && r.type === "listItem" && typeof r.checked == "boolean") {
    const i = this.stack[this.stack.length - 1];
    i.type;
    const l = i.children[0];
    if (l && l.type === "text") {
      const s = r.children;
      let c = -1, f;
      for (; ++c < s.length; ) {
        const g = s[c];
        if (g.type === "paragraph") {
          f = g;
          break;
        }
      }
      f === i && (l.value = l.value.slice(1), l.value.length === 0 ? i.children.shift() : i.position && l.position && typeof l.position.start.offset == "number" && (l.position.start.column++, l.position.start.offset++, i.position.start = Object.assign({}, l.position.start)));
    }
  }
  this.exit(n);
}
function Z7(n, r, i, l) {
  const s = n.children[0], c = typeof n.checked == "boolean" && s && s.type === "paragraph", f = "[" + (n.checked ? "x" : " ") + "] ", g = i.createTracker(l);
  c && g.move(f);
  let y = T2.listItem(n, r, i, {
    ...l,
    ...g.current()
  });
  return c && (y = y.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/, b)), y;
  function b(S) {
    return S + f;
  }
}
function W7() {
  return [
    AS(),
    ZS(),
    t7(),
    H7(),
    Y7()
  ];
}
function J7(n) {
  return {
    extensions: [
      zS(),
      WS(n),
      n7(),
      $7(n),
      X7()
    ]
  };
}
const e9 = {
  tokenize: l9,
  partial: !0
}, N2 = {
  tokenize: o9,
  partial: !0
}, A2 = {
  tokenize: s9,
  partial: !0
}, z2 = {
  tokenize: u9,
  partial: !0
}, t9 = {
  tokenize: c9,
  partial: !0
}, M2 = {
  name: "wwwAutolink",
  tokenize: i9,
  previous: D2
}, O2 = {
  name: "protocolAutolink",
  tokenize: a9,
  previous: R2
}, Li = {
  name: "emailAutolink",
  tokenize: r9,
  previous: L2
}, ni = {};
function n9() {
  return {
    text: ni
  };
}
let rl = 48;
for (; rl < 123; )
  ni[rl] = Li, rl++, rl === 58 ? rl = 65 : rl === 91 && (rl = 97);
ni[43] = Li;
ni[45] = Li;
ni[46] = Li;
ni[95] = Li;
ni[72] = [Li, O2];
ni[104] = [Li, O2];
ni[87] = [Li, M2];
ni[119] = [Li, M2];
function r9(n, r, i) {
  const l = this;
  let s, c;
  return f;
  function f(x) {
    return !Hh(x) || !L2.call(l, l.previous) || Cm(l.events) ? i(x) : (n.enter("literalAutolink"), n.enter("literalAutolinkEmail"), g(x));
  }
  function g(x) {
    return Hh(x) ? (n.consume(x), g) : x === 64 ? (n.consume(x), y) : i(x);
  }
  function y(x) {
    return x === 46 ? n.check(t9, S, b)(x) : x === 45 || x === 95 || On(x) ? (c = !0, n.consume(x), y) : S(x);
  }
  function b(x) {
    return n.consume(x), s = !0, y;
  }
  function S(x) {
    return c && s && In(l.previous) ? (n.exit("literalAutolinkEmail"), n.exit("literalAutolink"), r(x)) : i(x);
  }
}
function i9(n, r, i) {
  const l = this;
  return s;
  function s(f) {
    return f !== 87 && f !== 119 || !D2.call(l, l.previous) || Cm(l.events) ? i(f) : (n.enter("literalAutolink"), n.enter("literalAutolinkWww"), n.check(e9, n.attempt(N2, n.attempt(A2, c), i), i)(f));
  }
  function c(f) {
    return n.exit("literalAutolinkWww"), n.exit("literalAutolink"), r(f);
  }
}
function a9(n, r, i) {
  const l = this;
  let s = "", c = !1;
  return f;
  function f(x) {
    return (x === 72 || x === 104) && R2.call(l, l.previous) && !Cm(l.events) ? (n.enter("literalAutolink"), n.enter("literalAutolinkHttp"), s += String.fromCodePoint(x), n.consume(x), g) : i(x);
  }
  function g(x) {
    if (In(x) && s.length < 5)
      return s += String.fromCodePoint(x), n.consume(x), g;
    if (x === 58) {
      const _ = s.toLowerCase();
      if (_ === "http" || _ === "https")
        return n.consume(x), y;
    }
    return i(x);
  }
  function y(x) {
    return x === 47 ? (n.consume(x), c ? b : (c = !0, y)) : i(x);
  }
  function b(x) {
    return x === null || Tc(x) || Dt(x) || sl(x) || Fc(x) ? i(x) : n.attempt(N2, n.attempt(A2, S), i)(x);
  }
  function S(x) {
    return n.exit("literalAutolinkHttp"), n.exit("literalAutolink"), r(x);
  }
}
function l9(n, r, i) {
  let l = 0;
  return s;
  function s(f) {
    return (f === 87 || f === 119) && l < 3 ? (l++, n.consume(f), s) : f === 46 && l === 3 ? (n.consume(f), c) : i(f);
  }
  function c(f) {
    return f === null ? i(f) : r(f);
  }
}
function o9(n, r, i) {
  let l, s, c;
  return f;
  function f(b) {
    return b === 46 || b === 95 ? n.check(z2, y, g)(b) : b === null || Dt(b) || sl(b) || b !== 45 && Fc(b) ? y(b) : (c = !0, n.consume(b), f);
  }
  function g(b) {
    return b === 95 ? l = !0 : (s = l, l = void 0), n.consume(b), f;
  }
  function y(b) {
    return s || l || !c ? i(b) : r(b);
  }
}
function s9(n, r) {
  let i = 0, l = 0;
  return s;
  function s(f) {
    return f === 40 ? (i++, n.consume(f), s) : f === 41 && l < i ? c(f) : f === 33 || f === 34 || f === 38 || f === 39 || f === 41 || f === 42 || f === 44 || f === 46 || f === 58 || f === 59 || f === 60 || f === 63 || f === 93 || f === 95 || f === 126 ? n.check(z2, r, c)(f) : f === null || Dt(f) || sl(f) ? r(f) : (n.consume(f), s);
  }
  function c(f) {
    return f === 41 && l++, n.consume(f), s;
  }
}
function u9(n, r, i) {
  return l;
  function l(g) {
    return g === 33 || g === 34 || g === 39 || g === 41 || g === 42 || g === 44 || g === 46 || g === 58 || g === 59 || g === 63 || g === 95 || g === 126 ? (n.consume(g), l) : g === 38 ? (n.consume(g), c) : g === 93 ? (n.consume(g), s) : (
      // `<` is an end.
      g === 60 || // So is whitespace.
      g === null || Dt(g) || sl(g) ? r(g) : i(g)
    );
  }
  function s(g) {
    return g === null || g === 40 || g === 91 || Dt(g) || sl(g) ? r(g) : l(g);
  }
  function c(g) {
    return In(g) ? f(g) : i(g);
  }
  function f(g) {
    return g === 59 ? (n.consume(g), l) : In(g) ? (n.consume(g), f) : i(g);
  }
}
function c9(n, r, i) {
  return l;
  function l(c) {
    return n.consume(c), s;
  }
  function s(c) {
    return On(c) ? i(c) : r(c);
  }
}
function D2(n) {
  return n === null || n === 40 || n === 42 || n === 95 || n === 91 || n === 93 || n === 126 || Dt(n);
}
function R2(n) {
  return !In(n);
}
function L2(n) {
  return !(n === 47 || Hh(n));
}
function Hh(n) {
  return n === 43 || n === 45 || n === 46 || n === 95 || On(n);
}
function Cm(n) {
  let r = n.length, i = !1;
  for (; r--; ) {
    const l = n[r][1];
    if ((l.type === "labelLink" || l.type === "labelImage") && !l._balanced) {
      i = !0;
      break;
    }
    if (l._gfmAutolinkLiteralWalkedInto) {
      i = !1;
      break;
    }
  }
  return n.length > 0 && !i && (n[n.length - 1][1]._gfmAutolinkLiteralWalkedInto = !0), i;
}
const f9 = {
  tokenize: x9,
  partial: !0
};
function d9() {
  return {
    document: {
      91: {
        name: "gfmFootnoteDefinition",
        tokenize: g9,
        continuation: {
          tokenize: y9
        },
        exit: b9
      }
    },
    text: {
      91: {
        name: "gfmFootnoteCall",
        tokenize: p9
      },
      93: {
        name: "gfmPotentialFootnoteCall",
        add: "after",
        tokenize: h9,
        resolveTo: m9
      }
    }
  };
}
function h9(n, r, i) {
  const l = this;
  let s = l.events.length;
  const c = l.parser.gfmFootnotes || (l.parser.gfmFootnotes = []);
  let f;
  for (; s--; ) {
    const y = l.events[s][1];
    if (y.type === "labelImage") {
      f = y;
      break;
    }
    if (y.type === "gfmFootnoteCall" || y.type === "labelLink" || y.type === "label" || y.type === "image" || y.type === "link")
      break;
  }
  return g;
  function g(y) {
    if (!f || !f._balanced)
      return i(y);
    const b = Dr(l.sliceSerialize({
      start: f.end,
      end: l.now()
    }));
    return b.codePointAt(0) !== 94 || !c.includes(b.slice(1)) ? i(y) : (n.enter("gfmFootnoteCallLabelMarker"), n.consume(y), n.exit("gfmFootnoteCallLabelMarker"), r(y));
  }
}
function m9(n, r) {
  let i = n.length;
  for (; i--; )
    if (n[i][1].type === "labelImage" && n[i][0] === "enter") {
      n[i][1];
      break;
    }
  n[i + 1][1].type = "data", n[i + 3][1].type = "gfmFootnoteCallLabelMarker";
  const l = {
    type: "gfmFootnoteCall",
    start: Object.assign({}, n[i + 3][1].start),
    end: Object.assign({}, n[n.length - 1][1].end)
  }, s = {
    type: "gfmFootnoteCallMarker",
    start: Object.assign({}, n[i + 3][1].end),
    end: Object.assign({}, n[i + 3][1].end)
  };
  s.end.column++, s.end.offset++, s.end._bufferIndex++;
  const c = {
    type: "gfmFootnoteCallString",
    start: Object.assign({}, s.end),
    end: Object.assign({}, n[n.length - 1][1].start)
  }, f = {
    type: "chunkString",
    contentType: "string",
    start: Object.assign({}, c.start),
    end: Object.assign({}, c.end)
  }, g = [
    // Take the `labelImageMarker` (now `data`, the `!`)
    n[i + 1],
    n[i + 2],
    ["enter", l, r],
    // The `[`
    n[i + 3],
    n[i + 4],
    // The `^`.
    ["enter", s, r],
    ["exit", s, r],
    // Everything in between.
    ["enter", c, r],
    ["enter", f, r],
    ["exit", f, r],
    ["exit", c, r],
    // The ending (`]`, properly parsed and labelled).
    n[n.length - 2],
    n[n.length - 1],
    ["exit", l, r]
  ];
  return n.splice(i, n.length - i + 1, ...g), n;
}
function p9(n, r, i) {
  const l = this, s = l.parser.gfmFootnotes || (l.parser.gfmFootnotes = []);
  let c = 0, f;
  return g;
  function g(x) {
    return n.enter("gfmFootnoteCall"), n.enter("gfmFootnoteCallLabelMarker"), n.consume(x), n.exit("gfmFootnoteCallLabelMarker"), y;
  }
  function y(x) {
    return x !== 94 ? i(x) : (n.enter("gfmFootnoteCallMarker"), n.consume(x), n.exit("gfmFootnoteCallMarker"), n.enter("gfmFootnoteCallString"), n.enter("chunkString").contentType = "string", b);
  }
  function b(x) {
    if (
      // Too long.
      c > 999 || // Closing brace with nothing.
      x === 93 && !f || // Space or tab is not supported by GFM for some reason.
      // `\n` and `[` not being supported makes sense.
      x === null || x === 91 || Dt(x)
    )
      return i(x);
    if (x === 93) {
      n.exit("chunkString");
      const _ = n.exit("gfmFootnoteCallString");
      return s.includes(Dr(l.sliceSerialize(_))) ? (n.enter("gfmFootnoteCallLabelMarker"), n.consume(x), n.exit("gfmFootnoteCallLabelMarker"), n.exit("gfmFootnoteCall"), r) : i(x);
    }
    return Dt(x) || (f = !0), c++, n.consume(x), x === 92 ? S : b;
  }
  function S(x) {
    return x === 91 || x === 92 || x === 93 ? (n.consume(x), c++, b) : b(x);
  }
}
function g9(n, r, i) {
  const l = this, s = l.parser.gfmFootnotes || (l.parser.gfmFootnotes = []);
  let c, f = 0, g;
  return y;
  function y(N) {
    return n.enter("gfmFootnoteDefinition")._container = !0, n.enter("gfmFootnoteDefinitionLabel"), n.enter("gfmFootnoteDefinitionLabelMarker"), n.consume(N), n.exit("gfmFootnoteDefinitionLabelMarker"), b;
  }
  function b(N) {
    return N === 94 ? (n.enter("gfmFootnoteDefinitionMarker"), n.consume(N), n.exit("gfmFootnoteDefinitionMarker"), n.enter("gfmFootnoteDefinitionLabelString"), n.enter("chunkString").contentType = "string", S) : i(N);
  }
  function S(N) {
    if (
      // Too long.
      f > 999 || // Closing brace with nothing.
      N === 93 && !g || // Space or tab is not supported by GFM for some reason.
      // `\n` and `[` not being supported makes sense.
      N === null || N === 91 || Dt(N)
    )
      return i(N);
    if (N === 93) {
      n.exit("chunkString");
      const U = n.exit("gfmFootnoteDefinitionLabelString");
      return c = Dr(l.sliceSerialize(U)), n.enter("gfmFootnoteDefinitionLabelMarker"), n.consume(N), n.exit("gfmFootnoteDefinitionLabelMarker"), n.exit("gfmFootnoteDefinitionLabel"), _;
    }
    return Dt(N) || (g = !0), f++, n.consume(N), N === 92 ? x : S;
  }
  function x(N) {
    return N === 91 || N === 92 || N === 93 ? (n.consume(N), f++, S) : S(N);
  }
  function _(N) {
    return N === 58 ? (n.enter("definitionMarker"), n.consume(N), n.exit("definitionMarker"), s.includes(c) || s.push(c), vt(n, E, "gfmFootnoteDefinitionWhitespace")) : i(N);
  }
  function E(N) {
    return r(N);
  }
}
function y9(n, r, i) {
  return n.check(Xs, r, n.attempt(f9, r, i));
}
function b9(n) {
  n.exit("gfmFootnoteDefinition");
}
function x9(n, r, i) {
  const l = this;
  return vt(n, s, "gfmFootnoteDefinitionIndent", 5);
  function s(c) {
    const f = l.events[l.events.length - 1];
    return f && f[1].type === "gfmFootnoteDefinitionIndent" && f[2].sliceSerialize(f[1], !0).length === 4 ? r(c) : i(c);
  }
}
function v9(n) {
  let i = (n || {}).singleTilde;
  const l = {
    name: "strikethrough",
    tokenize: c,
    resolveAll: s
  };
  return i == null && (i = !0), {
    text: {
      126: l
    },
    insideSpan: {
      null: [l]
    },
    attentionMarkers: {
      null: [126]
    }
  };
  function s(f, g) {
    let y = -1;
    for (; ++y < f.length; )
      if (f[y][0] === "enter" && f[y][1].type === "strikethroughSequenceTemporary" && f[y][1]._close) {
        let b = y;
        for (; b--; )
          if (f[b][0] === "exit" && f[b][1].type === "strikethroughSequenceTemporary" && f[b][1]._open && // If the sizes are the same:
          f[y][1].end.offset - f[y][1].start.offset === f[b][1].end.offset - f[b][1].start.offset) {
            f[y][1].type = "strikethroughSequence", f[b][1].type = "strikethroughSequence";
            const S = {
              type: "strikethrough",
              start: Object.assign({}, f[b][1].start),
              end: Object.assign({}, f[y][1].end)
            }, x = {
              type: "strikethroughText",
              start: Object.assign({}, f[b][1].end),
              end: Object.assign({}, f[y][1].start)
            }, _ = [["enter", S, g], ["enter", f[b][1], g], ["exit", f[b][1], g], ["enter", x, g]], E = g.parser.constructs.insideSpan.null;
            E && dr(_, _.length, 0, Vc(E, f.slice(b + 1, y), g)), dr(_, _.length, 0, [["exit", x, g], ["enter", f[y][1], g], ["exit", f[y][1], g], ["exit", S, g]]), dr(f, b - 1, y - b + 3, _), y = b + _.length - 2;
            break;
          }
      }
    for (y = -1; ++y < f.length; )
      f[y][1].type === "strikethroughSequenceTemporary" && (f[y][1].type = "data");
    return f;
  }
  function c(f, g, y) {
    const b = this.previous, S = this.events;
    let x = 0;
    return _;
    function _(N) {
      return b === 126 && S[S.length - 1][1].type !== "characterEscape" ? y(N) : (f.enter("strikethroughSequenceTemporary"), E(N));
    }
    function E(N) {
      const U = xo(b);
      if (N === 126)
        return x > 1 ? y(N) : (f.consume(N), x++, E);
      if (x < 2 && !i) return y(N);
      const G = f.exit("strikethroughSequenceTemporary"), D = xo(N);
      return G._open = !D || D === 2 && !!U, G._close = !U || U === 2 && !!D, g(N);
    }
  }
}
class S9 {
  /**
   * Create a new edit map.
   */
  constructor() {
    this.map = [];
  }
  /**
   * Create an edit: a remove and/or add at a certain place.
   *
   * @param {number} index
   * @param {number} remove
   * @param {Array<Event>} add
   * @returns {undefined}
   */
  add(r, i, l) {
    w9(this, r, i, l);
  }
  // To do: add this when moving to `micromark`.
  // /**
  //  * Create an edit: but insert `add` before existing additions.
  //  *
  //  * @param {number} index
  //  * @param {number} remove
  //  * @param {Array<Event>} add
  //  * @returns {undefined}
  //  */
  // addBefore(index, remove, add) {
  //   addImplementation(this, index, remove, add, true)
  // }
  /**
   * Done, change the events.
   *
   * @param {Array<Event>} events
   * @returns {undefined}
   */
  consume(r) {
    if (this.map.sort(function(c, f) {
      return c[0] - f[0];
    }), this.map.length === 0)
      return;
    let i = this.map.length;
    const l = [];
    for (; i > 0; )
      i -= 1, l.push(r.slice(this.map[i][0] + this.map[i][1]), this.map[i][2]), r.length = this.map[i][0];
    l.push(r.slice()), r.length = 0;
    let s = l.pop();
    for (; s; ) {
      for (const c of s)
        r.push(c);
      s = l.pop();
    }
    this.map.length = 0;
  }
}
function w9(n, r, i, l) {
  let s = 0;
  if (!(i === 0 && l.length === 0)) {
    for (; s < n.map.length; ) {
      if (n.map[s][0] === r) {
        n.map[s][1] += i, n.map[s][2].push(...l);
        return;
      }
      s += 1;
    }
    n.map.push([r, i, l]);
  }
}
function k9(n, r) {
  let i = !1;
  const l = [];
  for (; r < n.length; ) {
    const s = n[r];
    if (i) {
      if (s[0] === "enter")
        s[1].type === "tableContent" && l.push(n[r + 1][1].type === "tableDelimiterMarker" ? "left" : "none");
      else if (s[1].type === "tableContent") {
        if (n[r - 1][1].type === "tableDelimiterMarker") {
          const c = l.length - 1;
          l[c] = l[c] === "left" ? "center" : "right";
        }
      } else if (s[1].type === "tableDelimiterRow")
        break;
    } else s[0] === "enter" && s[1].type === "tableDelimiterRow" && (i = !0);
    r += 1;
  }
  return l;
}
function C9() {
  return {
    flow: {
      null: {
        name: "table",
        tokenize: E9,
        resolveAll: _9
      }
    }
  };
}
function E9(n, r, i) {
  const l = this;
  let s = 0, c = 0, f;
  return g;
  function g(W) {
    let Q = l.events.length - 1;
    for (; Q > -1; ) {
      const Me = l.events[Q][1].type;
      if (Me === "lineEnding" || // Note: markdown-rs uses `whitespace` instead of `linePrefix`
      Me === "linePrefix") Q--;
      else break;
    }
    const ye = Q > -1 ? l.events[Q][1].type : null, Be = ye === "tableHead" || ye === "tableRow" ? I : y;
    return Be === I && l.parser.lazy[l.now().line] ? i(W) : Be(W);
  }
  function y(W) {
    return n.enter("tableHead"), n.enter("tableRow"), b(W);
  }
  function b(W) {
    return W === 124 || (f = !0, c += 1), S(W);
  }
  function S(W) {
    return W === null ? i(W) : Ze(W) ? c > 1 ? (c = 0, l.interrupt = !0, n.exit("tableRow"), n.enter("lineEnding"), n.consume(W), n.exit("lineEnding"), E) : i(W) : ht(W) ? vt(n, S, "whitespace")(W) : (c += 1, f && (f = !1, s += 1), W === 124 ? (n.enter("tableCellDivider"), n.consume(W), n.exit("tableCellDivider"), f = !0, S) : (n.enter("data"), x(W)));
  }
  function x(W) {
    return W === null || W === 124 || Dt(W) ? (n.exit("data"), S(W)) : (n.consume(W), W === 92 ? _ : x);
  }
  function _(W) {
    return W === 92 || W === 124 ? (n.consume(W), x) : x(W);
  }
  function E(W) {
    return l.interrupt = !1, l.parser.lazy[l.now().line] ? i(W) : (n.enter("tableDelimiterRow"), f = !1, ht(W) ? vt(n, N, "linePrefix", l.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(W) : N(W));
  }
  function N(W) {
    return W === 45 || W === 58 ? G(W) : W === 124 ? (f = !0, n.enter("tableCellDivider"), n.consume(W), n.exit("tableCellDivider"), U) : we(W);
  }
  function U(W) {
    return ht(W) ? vt(n, G, "whitespace")(W) : G(W);
  }
  function G(W) {
    return W === 58 ? (c += 1, f = !0, n.enter("tableDelimiterMarker"), n.consume(W), n.exit("tableDelimiterMarker"), D) : W === 45 ? (c += 1, D(W)) : W === null || Ze(W) ? _e(W) : we(W);
  }
  function D(W) {
    return W === 45 ? (n.enter("tableDelimiterFiller"), ne(W)) : we(W);
  }
  function ne(W) {
    return W === 45 ? (n.consume(W), ne) : W === 58 ? (f = !0, n.exit("tableDelimiterFiller"), n.enter("tableDelimiterMarker"), n.consume(W), n.exit("tableDelimiterMarker"), ie) : (n.exit("tableDelimiterFiller"), ie(W));
  }
  function ie(W) {
    return ht(W) ? vt(n, _e, "whitespace")(W) : _e(W);
  }
  function _e(W) {
    return W === 124 ? N(W) : W === null || Ze(W) ? !f || s !== c ? we(W) : (n.exit("tableDelimiterRow"), n.exit("tableHead"), r(W)) : we(W);
  }
  function we(W) {
    return i(W);
  }
  function I(W) {
    return n.enter("tableRow"), J(W);
  }
  function J(W) {
    return W === 124 ? (n.enter("tableCellDivider"), n.consume(W), n.exit("tableCellDivider"), J) : W === null || Ze(W) ? (n.exit("tableRow"), r(W)) : ht(W) ? vt(n, J, "whitespace")(W) : (n.enter("data"), De(W));
  }
  function De(W) {
    return W === null || W === 124 || Dt(W) ? (n.exit("data"), J(W)) : (n.consume(W), W === 92 ? He : De);
  }
  function He(W) {
    return W === 92 || W === 124 ? (n.consume(W), De) : De(W);
  }
}
function _9(n, r) {
  let i = -1, l = !0, s = 0, c = [0, 0, 0, 0], f = [0, 0, 0, 0], g = !1, y = 0, b, S, x;
  const _ = new S9();
  for (; ++i < n.length; ) {
    const E = n[i], N = E[1];
    E[0] === "enter" ? N.type === "tableHead" ? (g = !1, y !== 0 && (G1(_, r, y, b, S), S = void 0, y = 0), b = {
      type: "table",
      start: Object.assign({}, N.start),
      // Note: correct end is set later.
      end: Object.assign({}, N.end)
    }, _.add(i, 0, [["enter", b, r]])) : N.type === "tableRow" || N.type === "tableDelimiterRow" ? (l = !0, x = void 0, c = [0, 0, 0, 0], f = [0, i + 1, 0, 0], g && (g = !1, S = {
      type: "tableBody",
      start: Object.assign({}, N.start),
      // Note: correct end is set later.
      end: Object.assign({}, N.end)
    }, _.add(i, 0, [["enter", S, r]])), s = N.type === "tableDelimiterRow" ? 2 : S ? 3 : 1) : s && (N.type === "data" || N.type === "tableDelimiterMarker" || N.type === "tableDelimiterFiller") ? (l = !1, f[2] === 0 && (c[1] !== 0 && (f[0] = f[1], x = yc(_, r, c, s, void 0, x), c = [0, 0, 0, 0]), f[2] = i)) : N.type === "tableCellDivider" && (l ? l = !1 : (c[1] !== 0 && (f[0] = f[1], x = yc(_, r, c, s, void 0, x)), c = f, f = [c[1], i, 0, 0])) : N.type === "tableHead" ? (g = !0, y = i) : N.type === "tableRow" || N.type === "tableDelimiterRow" ? (y = i, c[1] !== 0 ? (f[0] = f[1], x = yc(_, r, c, s, i, x)) : f[1] !== 0 && (x = yc(_, r, f, s, i, x)), s = 0) : s && (N.type === "data" || N.type === "tableDelimiterMarker" || N.type === "tableDelimiterFiller") && (f[3] = i);
  }
  for (y !== 0 && G1(_, r, y, b, S), _.consume(r.events), i = -1; ++i < r.events.length; ) {
    const E = r.events[i];
    E[0] === "enter" && E[1].type === "table" && (E[1]._align = k9(r.events, i));
  }
  return n;
}
function yc(n, r, i, l, s, c) {
  const f = l === 1 ? "tableHeader" : l === 2 ? "tableDelimiter" : "tableData", g = "tableContent";
  i[0] !== 0 && (c.end = Object.assign({}, ho(r.events, i[0])), n.add(i[0], 0, [["exit", c, r]]));
  const y = ho(r.events, i[1]);
  if (c = {
    type: f,
    start: Object.assign({}, y),
    // Note: correct end is set later.
    end: Object.assign({}, y)
  }, n.add(i[1], 0, [["enter", c, r]]), i[2] !== 0) {
    const b = ho(r.events, i[2]), S = ho(r.events, i[3]), x = {
      type: g,
      start: Object.assign({}, b),
      end: Object.assign({}, S)
    };
    if (n.add(i[2], 0, [["enter", x, r]]), l !== 2) {
      const _ = r.events[i[2]], E = r.events[i[3]];
      if (_[1].end = Object.assign({}, E[1].end), _[1].type = "chunkText", _[1].contentType = "text", i[3] > i[2] + 1) {
        const N = i[2] + 1, U = i[3] - i[2] - 1;
        n.add(N, U, []);
      }
    }
    n.add(i[3] + 1, 0, [["exit", x, r]]);
  }
  return s !== void 0 && (c.end = Object.assign({}, ho(r.events, s)), n.add(s, 0, [["exit", c, r]]), c = void 0), c;
}
function G1(n, r, i, l, s) {
  const c = [], f = ho(r.events, i);
  s && (s.end = Object.assign({}, f), c.push(["exit", s, r])), l.end = Object.assign({}, f), c.push(["exit", l, r]), n.add(i + 1, 0, c);
}
function ho(n, r) {
  const i = n[r], l = i[0] === "enter" ? "start" : "end";
  return i[1][l];
}
const j9 = {
  name: "tasklistCheck",
  tokenize: N9
};
function T9() {
  return {
    text: {
      91: j9
    }
  };
}
function N9(n, r, i) {
  const l = this;
  return s;
  function s(y) {
    return (
      // Exit if theres stuff before.
      l.previous !== null || // Exit if not in the first content that is the first child of a list
      // item.
      !l._gfmTasklistFirstContentOfListItem ? i(y) : (n.enter("taskListCheck"), n.enter("taskListCheckMarker"), n.consume(y), n.exit("taskListCheckMarker"), c)
    );
  }
  function c(y) {
    return Dt(y) ? (n.enter("taskListCheckValueUnchecked"), n.consume(y), n.exit("taskListCheckValueUnchecked"), f) : y === 88 || y === 120 ? (n.enter("taskListCheckValueChecked"), n.consume(y), n.exit("taskListCheckValueChecked"), f) : i(y);
  }
  function f(y) {
    return y === 93 ? (n.enter("taskListCheckMarker"), n.consume(y), n.exit("taskListCheckMarker"), n.exit("taskListCheck"), g) : i(y);
  }
  function g(y) {
    return Ze(y) ? r(y) : ht(y) ? n.check({
      tokenize: A9
    }, r, i)(y) : i(y);
  }
}
function A9(n, r, i) {
  return vt(n, l, "whitespace");
  function l(s) {
    return s === null ? i(s) : r(s);
  }
}
function z9(n) {
  return $y([
    n9(),
    d9(),
    v9(n),
    C9(),
    T9()
  ]);
}
const M9 = {};
function O9(n) {
  const r = (
    /** @type {Processor<Root>} */
    this
  ), i = n || M9, l = r.data(), s = l.micromarkExtensions || (l.micromarkExtensions = []), c = l.fromMarkdownExtensions || (l.fromMarkdownExtensions = []), f = l.toMarkdownExtensions || (l.toMarkdownExtensions = []);
  s.push(z9(i)), c.push(W7()), f.push(J7(i));
}
const D9 = ({ isOpen: n, onClose: r }) => {
  const [i, l] = se.useState(!0), [s, c] = se.useState(null), [f, g] = se.useState(null), [y, b] = se.useState(!1), [S, x] = se.useState(!1), _ = il.getCurrentVersion();
  se.useEffect(() => {
    n && E();
  }, [n]);
  const E = async () => {
    l(!0);
    try {
      const [G, D, ne] = await Promise.all([
        il.getLatestVersion(),
        il.getChangelog(),
        il.hasUpdate()
      ]);
      c(G), g(D), b(ne);
    } catch (G) {
      console.error("[Engram] ", G);
    } finally {
      l(!1);
    }
  }, N = async () => {
    x(!0);
    try {
      const G = s || _;
      console.debug("[Engram] Marking update as read:", G), await il.markAsRead(G), r();
    } finally {
      x(!1);
    }
  }, U = () => {
    il.clearCache(), E();
  };
  return n ? /* @__PURE__ */ h.jsxs("div", { className: "fixed inset-0 z-[100] flex items-center justify-center p-4", children: [
    /* @__PURE__ */ h.jsx(
      "div",
      {
        className: "absolute inset-0 bg-black/60 backdrop-blur-sm",
        onClick: r
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "relative bg-card border border-border rounded-xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between px-5 py-4 border-b border-border/50", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ h.jsx("div", { className: "w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center", children: /* @__PURE__ */ h.jsx(_c, { size: 16, className: "text-primary" }) }),
          /* @__PURE__ */ h.jsxs("div", { children: [
            /* @__PURE__ */ h.jsx("h2", { className: "text-base font-semibold text-foreground", children: "" }),
            /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
              ": v",
              _
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ h.jsx(
            "button",
            {
              onClick: U,
              className: "p-2 rounded-lg hover:bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",
              title: "",
              children: /* @__PURE__ */ h.jsx(ei, { size: 16, className: i ? "animate-spin" : "" })
            }
          ),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              onClick: r,
              className: "p-2 rounded-lg hover:bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",
              children: /* @__PURE__ */ h.jsx(Hc, { size: 16 })
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto p-5", children: i ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center py-12 text-muted-foreground", children: [
        /* @__PURE__ */ h.jsx(ei, { size: 24, className: "animate-spin mb-3" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "..." })
      ] }) : /* @__PURE__ */ h.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ h.jsx("div", { className: `
                                p-4 rounded-lg border
                                ${y ? "bg-primary/5 border-primary/20" : "bg-green-500/5 border-green-500/20"}
                            `, children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
          y ? /* @__PURE__ */ h.jsx(_c, { size: 20, className: "text-primary" }) : /* @__PURE__ */ h.jsx(Qh, { size: 20, className: "text-green-500" }),
          /* @__PURE__ */ h.jsxs("div", { children: [
            /* @__PURE__ */ h.jsx("p", { className: "font-medium text-foreground", children: y ? `: v${s}` : "" }),
            /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mt-0.5", children: y ? "" : "" })
          ] })
        ] }) }),
        f && /* @__PURE__ */ h.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider", children: "" }),
          /* @__PURE__ */ h.jsx("div", { className: "bg-muted/20 rounded-lg p-4 max-h-64 overflow-y-auto engram-changelog-content text-sm", children: /* @__PURE__ */ h.jsx(vS, { remarkPlugins: [O9], children: f }) })
        ] }),
        !f && !i && /* @__PURE__ */ h.jsx("div", { className: "text-center py-8 text-muted-foreground", children: /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "" }) })
      ] }) }),
      /* @__PURE__ */ h.jsxs("div", { className: "px-5 py-4 border-t border-border/50 flex justify-end gap-3", children: [
        /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: r,
            className: "px-4 py-2 text-sm text-muted-foreground hover:text-foreground transition-colors",
            children: ""
          }
        ),
        y && /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: N,
            disabled: S,
            className: "px-4 py-2 text-sm bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",
            children: S ? "..." : ""
          }
        )
      ] })
    ] })
  ] }) : null;
}, R9 = ({ children: n, activeTab: r, setActiveTab: i, onClose: l }) => {
  const [s, c] = se.useState(!1), [f, g] = se.useState(!1), [y, b] = se.useState(!1);
  se.useEffect(() => {
    (async () => {
      try {
        const E = await il.hasUnreadUpdate();
        b(E);
      } catch (E) {
        console.debug("[Engram] ", E);
      }
    })();
  }, []);
  const S = () => {
    g(!0);
  }, x = () => {
    g(!1), b(!1);
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "flex absolute inset-0 w-full h-full bg-background text-foreground overflow-hidden font-sans selection:bg-primary/30 selection:text-primary animate-in fade-in duration-300", id: "engram-layout-root", children: [
    /* @__PURE__ */ h.jsx(Tx, {}),
    /* @__PURE__ */ h.jsx(
      D9,
      {
        isOpen: f,
        onClose: x
      }
    ),
    /* @__PURE__ */ h.jsx(
      r1,
      {
        activeTab: r,
        onNavigate: i,
        isMobile: !1,
        onShowUpdateNotice: S,
        hasUnreadUpdate: y
      }
    ),
    /* @__PURE__ */ h.jsx(
      r1,
      {
        activeTab: r,
        onNavigate: i,
        isMobile: !0,
        isOpen: s,
        onClose: () => c(!1),
        onShowUpdateNotice: S,
        hasUnreadUpdate: y
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-1 flex-col overflow-hidden", children: [
      /* @__PURE__ */ h.jsx(
        o3,
        {
          onToggleSidebar: () => c(!s),
          isMobile: !1,
          onClose: l,
          onNavigate: (_) => i(_.replace("/", ""))
        }
      ),
      /* @__PURE__ */ h.jsx("main", { className: "flex-1 flex flex-col relative w-full overflow-hidden bg-background", children: /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto overflow-x-hidden pt-0 px-4 pb-4 md:px-8 md:pb-8 lg:px-12 lg:pb-12 scroll-smooth animate-blur-in fill-mode-both", style: { animationDelay: "200ms", animationFillMode: "both" }, children: /* @__PURE__ */ h.jsx("div", { className: "max-w-6xl mx-auto min-h-full pb-20", children: n }) }) })
    ] }),
    "  "
  ] });
}, Qr = {
  primary: "#FFFFFF",
  grid: "#111111"
}, L9 = ({ onComplete: n }) => {
  const r = se.useRef(null), i = se.useRef(null), l = se.useRef(null), s = se.useRef(null), [c, f] = se.useState(!1);
  se.useEffect(() => {
    if (window.gsap) {
      f(!0);
      return;
    }
    const y = document.createElement("script");
    y.src = "https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js", y.async = !0, y.onload = () => f(!0), document.body.appendChild(y);
  }, []);
  const g = () => {
    var E;
    if (!c || !i.current) return;
    const y = window.gsap, b = i.current, S = b.getTotalLength();
    y.set(b, {
      strokeDasharray: S,
      strokeDashoffset: S,
      stroke: Qr.primary,
      fillOpacity: 0,
      opacity: 1,
      strokeWidth: 2
    });
    const x = (E = l.current) == null ? void 0 : E.querySelectorAll("path");
    x && y.set(x, { opacity: 0, y: 10 }), y.set(s.current, { scale: 1, opacity: 1 }), y.set(r.current, { opacity: 1 });
    const _ = y.timeline({
      onComplete: () => {
        y.to(r.current, {
          opacity: 0,
          duration: 0.8,
          ease: "power2.out",
          onComplete: n
        });
      }
    });
    _.to(b, {
      strokeDashoffset: 0,
      duration: 2.5,
      ease: "power2.inOut"
    }), x && _.to(x, {
      opacity: 1,
      y: 0,
      duration: 1.2,
      stagger: 0.08,
      ease: "power3.out"
    }, "-=0.8"), _.to({}, { duration: 1 });
  };
  return se.useEffect(() => {
    if (c) {
      const y = setTimeout(g, 800);
      return () => clearTimeout(y);
    }
  }, [c]), /* @__PURE__ */ h.jsxs(
    "div",
    {
      ref: r,
      className: "fixed inset-0 z-[200] flex flex-col items-center justify-center bg-black overflow-hidden",
      style: { touchAction: "none" },
      children: [
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute inset-0 pointer-events-none",
            style: {
              backgroundImage: `
                        linear-gradient(to right, ${Qr.grid} 1px, transparent 1px),
                        linear-gradient(to bottom, ${Qr.grid} 1px, transparent 1px)
                    `,
              backgroundSize: "40px 40px",
              opacity: 0.3
            }
          }
        ),
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute inset-0 pointer-events-none",
            style: { background: "radial-gradient(circle at center, transparent 0%, black 100%)", opacity: 0.9 }
          }
        ),
        /* @__PURE__ */ h.jsxs("div", { className: "z-10 relative flex flex-col items-center justify-center w-full h-full p-4", children: [
          /* @__PURE__ */ h.jsx("div", { className: "w-full max-w-[600px] md:max-w-[800px] aspect-[4/3]", children: /* @__PURE__ */ h.jsx(
            "svg",
            {
              version: "1.1",
              xmlns: "http://www.w3.org/2000/svg",
              viewBox: "250 0 550 600",
              className: "w-full h-full overflow-visible",
              children: /* @__PURE__ */ h.jsxs("g", { ref: s, className: "origin-center", children: [
                /* @__PURE__ */ h.jsx(
                  "path",
                  {
                    ref: i,
                    fill: "none",
                    stroke: Qr.primary,
                    strokeWidth: "2",
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    d: "M463.360840,364.455627 C437.246704,381.338409 406.466644,366.209045 404.026672,335.650848 C402.910156,321.667206 412.549713,306.544678 426.813293,300.633850 C430.474335,299.116699 431.826355,297.290924 431.760071,293.302460 C431.519287,278.808716 431.584564,264.307892 431.718292,249.811417 C431.748169,246.574463 430.886292,244.713684 427.681274,243.389038 C412.366425,237.059357 404.237366,225.144638 404.208862,208.867447 C404.179871,192.298615 412.621979,180.486938 428.224701,174.293686 C430.850494,173.251419 431.710938,171.751862 431.696136,169.060089 C431.613586,154.062912 431.568054,139.064117 431.723419,124.068092 C431.759430,120.590492 430.119568,119.052467 427.243103,117.790627 C413.349915,111.695946 405.841095,101.009903 404.195740,85.916542 C402.099884,66.690948 418.566650,47.364159 437.884277,46.682220 C456.888519,46.011345 468.064789,52.989845 476.252197,70.840332 C477.174438,72.851059 478.313995,73.541710 480.422974,73.516098 C499.569031,73.283493 518.722961,73.393646 537.862915,73.456795 C545.529785,73.482086 549.225952,71.767975 552.791809,64.663139 C559.898376,50.503635 576.618042,43.921410 592.447876,47.234680 C608.699890,50.636322 619.276489,62.116261 621.438904,78.701805 C623.839478,97.113228 612.679382,114.371338 595.357910,119.034004 C577.219604,123.916542 558.125427,115.204048 550.887390,98.365906 C549.251465,94.560234 547.316284,93.116508 543.150696,93.160004 C522.989380,93.370483 502.824707,93.284561 482.661285,93.261726 C479.716156,93.258385 477.395905,93.379341 475.956635,96.902077 C474.571899,100.291283 475.702576,102.070137 477.892181,104.225159 C501.524139,127.483910 525.127991,150.771423 548.653259,174.137985 C550.803162,176.273376 552.520325,176.380997 555.207153,175.171799 C569.642334,168.675354 583.205750,171.177368 594.759277,181.252563 C606.783813,191.738449 610.379395,205.504944 605.248840,220.725037 C600.321167,235.343246 589.568848,243.345337 574.305420,245.467117 C567.655396,246.391541 561.334045,245.373352 555.347839,242.591797 C552.373169,241.209595 550.274536,241.303284 547.832886,243.728531 C524.197693,267.205322 500.499634,290.619415 476.704651,313.934174 C474.165771,316.421844 475.106598,318.487793 476.015411,321.059723 C476.869354,323.476318 478.159149,324.356232 480.796143,324.332367 C501.456360,324.145294 522.118530,324.019531 542.778870,324.122131 C546.987793,324.143005 549.216675,322.931549 551.044983,318.871887 C558.230042,302.918091 576.073181,294.652069 593.497131,298.684143 C610.451355,302.607544 622.335205,317.668091 622.119812,334.958160 C621.900024,352.608002 609.316650,367.564362 591.822144,370.969543 C574.585754,374.324463 557.004028,364.861755 550.521484,348.456757 C549.268677,345.286346 547.631836,344.200745 544.294861,344.220337 C523.465576,344.342865 502.634888,344.322540 481.805359,344.218109 C478.697174,344.202545 476.993927,345.152252 475.888916,348.205902 C473.513214,354.771179 469.417969,360.183167 463.360840,364.455627 M472.733368,188.880936 C473.545441,190.333145 474.799072,191.702774 475.088898,193.252655 C476.058929,198.439468 479.434326,198.919983 483.888489,198.861130 C499.042145,198.660889 514.201233,198.707901 529.355957,198.872879 C532.819580,198.910583 534.700989,197.913788 536.177185,194.588806 C537.657104,191.255417 536.060120,189.735016 534.097900,187.805573 C510.706268,164.804840 487.354065,141.764008 463.949341,118.776604 C462.445251,117.299316 461.277863,114.441566 458.282349,116.423027 C455.343719,118.366882 451.028107,118.406143 451.180542,123.994591 C451.584534,138.807007 451.429443,153.638779 451.250458,168.459885 C451.208984,171.894135 452.474548,173.487930 455.559784,174.673798 C462.566864,177.367126 468.343140,181.758774 472.733368,188.880936 M457.308807,300.958954 C460.540070,302.823181 462.218414,300.310028 464.063263,298.488586 C487.164032,275.681519 510.248199,252.857559 533.326538,230.027756 C535.300171,228.075378 537.458679,226.516449 535.970032,222.843750 C534.495117,219.205124 532.067688,218.878906 528.898010,218.890778 C513.414001,218.948746 497.929138,219.002151 482.445862,218.887329 C478.998230,218.861771 477.090668,219.941055 475.670502,223.284790 C471.742218,232.533905 465.159332,239.474701 455.665497,243.103836 C452.239746,244.413376 451.216278,246.302231 451.253540,249.781387 C451.406891,264.098541 451.489380,278.421356 451.223358,292.735107 C451.142975,297.059998 452.224640,299.783386 457.308807,300.958954 z"
                  }
                ),
                /* @__PURE__ */ h.jsxs("g", { ref: l, children: [
                  /* @__PURE__ */ h.jsx("path", { fill: Qr.primary, d: "M732.215698,483.876190 C732.750061,488.775055 731.110779,490.523590 726.372742,490.479736 C713.642639,490.361908 713.645874,490.566711 713.641113,477.834442 C713.638428,470.668732 713.788818,463.497284 713.552246,456.338928 C713.318970,449.278015 710.633911,445.451111 705.788818,444.403778 C698.667542,442.864441 692.689270,447.076904 692.324463,454.647736 C691.851685,464.458313 691.862549,474.305084 692.048706,484.128967 C692.137085,488.792786 690.778625,490.578705 685.827454,490.500549 C672.843933,490.295532 672.845886,490.510315 672.820435,477.502625 C672.805786,470.003754 672.887146,462.502136 672.708618,455.006927 C672.557556,448.666412 669.519653,444.981689 664.341858,444.320343 C658.234436,443.540314 653.997803,446.541077 652.162415,452.864807 C651.503052,455.136719 651.331299,457.435608 651.335754,459.781158 C651.352234,468.446747 651.306274,477.112488 651.338745,485.777985 C651.348389,488.341766 651.062439,490.138977 647.717529,490.447815 C632.733521,491.831421 632.748596,491.913239 632.764404,477.031830 C632.778870,463.366852 632.738831,449.701782 632.731445,436.036774 C632.727478,428.732941 632.735718,428.732544 640.257812,428.707031 C641.591003,428.702484 642.924194,428.695312 644.257324,428.701721 C647.429321,428.717010 651.058289,427.916016 650.925598,433.229431 C655.308960,431.486603 658.595154,429.192383 662.595154,428.377930 C670.453491,426.777832 677.619019,428.117981 683.735718,433.181641 C686.512207,435.480164 688.239807,435.373474 690.953918,433.250153 C697.176208,428.382202 704.485840,426.832367 712.194946,428.080414 C725.100098,430.169739 731.944641,439.074829 732.175659,453.896454 C732.328857,463.726379 732.212036,473.560547 732.215698,483.876190 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Qr.primary, d: "M487.575867,485.935303 C487.614716,484.616028 487.614716,483.640503 487.614716,481.796417 C479.116760,488.238525 470.153107,489.257660 460.718079,486.787720 C454.401794,485.134186 449.163879,481.675842 445.200134,476.457642 C436.960876,465.610748 437.295532,448.722229 445.889771,438.315796 C455.451538,426.737823 470.295227,425.042450 488.444458,433.733826 C487.913239,428.612457 491.194366,428.604004 494.772766,428.684540 C508.272736,428.988373 506.179840,426.849945 506.294434,440.421967 C506.411133,454.245575 506.366882,468.071228 506.299957,481.895538 C506.205750,501.359833 494.742065,512.847900 475.259460,513.370544 C465.272614,513.638489 455.717651,512.255005 446.682343,507.725311 C443.034790,505.896667 441.336151,503.847290 444.229065,500.105438 C444.329590,499.975464 444.390869,499.814941 444.469086,499.667908 C448.861603,491.411743 448.894196,491.340729 457.207886,495.157196 C463.352356,497.977905 469.817169,498.376801 476.285126,497.456818 C482.543640,496.566620 486.238434,492.476532 487.575867,485.935303 M469.264740,471.577881 C471.084900,471.642700 472.915710,471.865356 474.723328,471.743805 C481.074341,471.316620 486.258820,466.628052 487.489288,460.346558 C488.669373,454.322296 485.713593,448.118378 480.288971,445.234039 C472.426056,441.053253 462.868591,443.867035 459.399658,451.384033 C455.705688,459.388580 459.382996,467.492737 469.264740,471.577881 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Qr.primary, d: "M350.790619,410.644409 C354.007477,410.561554 355.147522,411.945587 355.144592,414.620361 C355.128937,428.846375 356.152588,426.165161 344.558044,426.338898 C335.900940,426.468628 327.237854,426.493591 318.582581,426.315826 C314.804382,426.238220 313.157715,427.376373 313.262451,431.424896 C313.571655,443.375275 312.019470,441.570435 323.204529,441.691742 C330.530579,441.771271 337.860626,441.831665 345.183899,441.671692 C348.853607,441.591553 350.203705,443.056824 350.190338,446.675842 C350.143219,459.433014 350.725433,457.207275 340.024445,457.368561 C332.865692,457.476471 325.700195,457.536346 318.545349,457.339996 C314.731018,457.235291 313.250702,458.478516 313.234222,462.478668 C313.185364,474.308960 313.038177,474.321259 324.813477,474.130890 C334.298523,473.977539 343.772430,475.169159 353.264343,474.338776 C354.864075,474.198792 356.466827,474.576569 356.702301,476.439850 C357.203217,480.403656 357.364838,484.405273 356.646729,488.365631 C356.297211,490.293060 354.652405,490.369568 353.118927,490.370575 C334.801880,490.382568 316.484711,490.350647 298.167847,490.412506 C295.104187,490.422852 294.024323,488.921082 294.024200,486.130402 C294.023224,462.484924 294.047699,438.839325 293.967896,415.194092 C293.954620,411.261261 296.028046,410.593658 299.359711,410.610138 C316.344330,410.694275 333.329620,410.638672 350.790619,410.644409 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Qr.primary, d: "M620.003906,453.402435 C620.062195,464.023071 619.882812,474.188721 620.189575,484.339661 C620.338318,489.262421 618.431458,490.973572 613.757507,490.452362 C611.783386,490.232208 609.754700,490.291412 607.767883,490.444916 C604.889648,490.667267 602.478821,490.168823 601.296570,486.513000 C594.831909,490.991821 587.888184,491.843719 580.600464,491.328247 C565.916626,490.289642 557.201233,476.053131 563.502625,463.374390 C565.502930,459.349640 568.872803,457.136932 572.794861,455.506927 C578.118103,453.294647 583.702881,452.709900 589.425354,452.731232 C592.879822,452.744110 596.387085,453.235260 599.791443,452.317169 C599.855774,446.843750 597.260681,443.903503 591.552673,443.177338 C585.446533,442.400513 579.495911,443.228607 574.179382,446.386688 C570.948853,448.305603 569.535645,447.214966 568.011658,444.340485 C563.043945,434.970917 563.058899,434.663818 573.199219,430.800537 C582.143921,427.392792 591.347961,426.734100 600.678101,428.904358 C613.358643,431.853943 619.173157,440.405762 620.003906,453.402435 M582.869263,466.083313 C579.496887,469.605530 579.013306,473.431427 581.947998,475.906952 C585.513611,478.914764 589.714966,478.291107 593.721985,477.031647 C597.412354,475.871704 599.990784,473.365112 600.658081,469.369629 C601.070496,466.900665 600.409729,465.044220 597.411255,465.098297 C592.800171,465.181488 588.157471,464.530182 582.869263,466.083313 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Qr.primary, d: "M410.915314,457.280090 C410.311127,447.930115 406.925934,444.198608 399.452026,444.194855 C391.667114,444.190948 386.727997,448.953094 386.409271,457.536652 C386.075653,466.521088 386.068634,475.532593 386.350006,484.518738 C386.494904,489.147247 384.896912,490.532959 380.337830,490.481964 C367.440552,490.337616 367.627808,490.513641 367.533173,477.713593 C367.426025,463.226135 368.160004,448.728760 367.168365,434.251617 C366.898468,430.311462 368.239288,428.249725 372.529694,428.668640 C374.840057,428.894196 377.203857,428.868896 379.519684,428.673553 C383.194244,428.363556 385.817352,429.188293 385.487488,434.182526 C390.858826,430.844635 395.856995,428.304504 401.601257,427.794434 C418.292908,426.312286 429.386810,436.518799 429.975342,454.379517 C430.315308,464.696716 429.971527,475.035126 430.046204,485.363190 C430.071198,488.817627 428.985992,490.534210 425.145325,490.442291 C408.307220,490.039520 411.204895,492.848450 410.942963,476.734924 C410.840088,470.406036 410.927368,464.074036 410.915314,457.280090 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Qr.primary, d: "M556.799500,444.921539 C554.214233,445.227783 552.026184,445.174683 549.913574,445.548401 C542.544189,446.852142 538.560974,452.210632 538.387756,461.266998 C538.231995,469.411011 538.239258,477.561676 538.377136,485.705963 C538.433838,489.055634 537.355591,490.537964 533.812988,490.447296 C516.656677,490.008148 519.942505,492.939087 519.712585,476.823181 C519.510925,462.693848 519.801025,448.557343 519.590698,434.428253 C519.527222,430.165985 520.732788,428.169983 525.216187,428.665833 C527.350830,428.901917 529.549255,428.854156 531.692566,428.654297 C535.487610,428.300446 537.940002,429.350586 537.432373,434.447845 C542.475464,431.817810 546.689819,428.862549 551.859985,428.147003 C557.409912,427.378845 558.504028,428.019318 558.285950,433.612213 C558.141113,437.327057 559.514648,441.236115 556.799500,444.921539 z" })
                ] })
              ] })
            }
          ) }),
          /* @__PURE__ */ h.jsx("p", { className: "mt-6 md:mt-8 text-white/30 text-xs md:text-sm tracking-widest uppercase", children: "Where memories leave their trace" })
        ] })
      ]
    }
  );
}, vh = ({
  title: n,
  value: r,
  icon: i,
  subtext: l,
  highlight: s = !1
}) => /* @__PURE__ */ h.jsxs("div", { className: `flex-1 flex flex-col p-4 bg-card border border-border rounded-lg overflow-hidden relative transition-all duration-200 hover:shadow-md ${s ? "bg-primary-10 border-primary-30" : ""}`, children: [
  /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between items-start mb-3", children: [
    /* @__PURE__ */ h.jsx("div", { className: `p-2 rounded-lg ${s ? "bg-primary-20 text-primary" : "bg-secondary text-secondary-foreground"}`, children: /* @__PURE__ */ h.jsx(i, { size: 20 }) }),
    s && /* @__PURE__ */ h.jsx("div", { className: "w-2 h-2 bg-green-500 rounded-full shadow-[0_0_8px_rgba(236,72,153,0.5)]" })
  ] }),
  /* @__PURE__ */ h.jsxs("div", { children: [
    /* @__PURE__ */ h.jsx("div", { className: "text-2xl font-bold text-foreground font-mono", children: r }),
    /* @__PURE__ */ h.jsx("div", { className: "text-[11px] text-muted-foreground font-semibold mt-1 tracking-[0.5px]", children: n }),
    l && /* @__PURE__ */ h.jsx("div", { className: "text-[10px] text-muted-foreground/70 mt-0.5", children: l })
  ] })
] });
function ka() {
  var n, r;
  try {
    return ((r = (n = window.SillyTavern) == null ? void 0 : n.getContext) == null ? void 0 : r.call(n)) || null;
  } catch (i) {
    return console.warn("[Engram] Failed to get ST context:", i), null;
  }
}
function B9() {
  const n = ka();
  return (n == null ? void 0 : n.chat) || [];
}
function U9() {
  return B9();
}
function B2() {
  const n = ka();
  return (n == null ? void 0 : n.chatId) || null;
}
function Hs() {
  const n = ka();
  return n ? {
    name: n.name2,
    id: n.characterId
  } : null;
}
function Em() {
  try {
    return window.selected_model || void 0;
  } catch {
    return;
  }
}
function I9() {
  return ka() !== null;
}
async function $1() {
  const { Logger: n } = await Promise.resolve().then(() => lm);
  await n.init(), n.info("STBridge", "Engram ...");
  const { SettingsManager: r } = await Promise.resolve().then(() => zy);
  r.initSettings(), n.info("STBridge", "SettingsManager initialized");
  try {
    const { checkTavernIntegration: l } = await Promise.resolve().then(() => cw), s = await l();
    n.info("TavernAPI", "", s);
  } catch (l) {
    n.warn("TavernAPI", "", { error: String(l) });
  }
  try {
    const { summarizerService: l } = await Promise.resolve().then(() => cr);
    l.start();
    const s = l.getStatus();
    n.info("Summarizer", "", s);
  } catch (l) {
    n.warn("Summarizer", "", { error: String(l) });
  }
  q9();
  const { ThemeManager: i } = await Promise.resolve().then(() => wc);
  i.init();
  try {
    const { injector: l } = await Promise.resolve().then(() => Hw);
    l.init(), n.info("Injector", "Service initialized");
  } catch (l) {
    n.warn("Injector", "Failed to initialize Injector", { error: String(l) });
  }
  try {
    const { MacroService: l } = await Promise.resolve().then(() => Z2);
    await l.init();
  } catch (l) {
    n.warn("MacroService", "Failed to initialize MacroService", { error: String(l) });
  }
  V9();
  try {
    const { CharacterDeleteService: l } = await Promise.resolve().then(() => Pw);
    l.init(), n.info("STBridge", "CharacterDeleteService initialized");
  } catch (l) {
    n.warn("STBridge", "Failed to initialize CharacterDeleteService", { error: String(l) });
  }
  n.success("STBridge", "Engram  - Where memories leave their trace.");
}
const U2 = '<svg viewBox="0 0 400 592" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M103.875908,522.166260 C75.225380,521.276611 55.289425,503.229828 52.249313,475.852142 C49.879883,454.514191 63.027035,433.000366 83.930901,424.858398 C88.449257,423.098541 89.857674,420.860199 89.801926,416.150269 C89.555420,395.322357 89.621246,374.489380 89.762306,353.659515 C89.787170,349.987000 88.728760,348.057556 85.120293,346.642609 C64.672897,338.625031 52.338894,320.951630 52.085896,299.869415 C51.832878,278.785156 63.730618,260.903198 84.118019,252.449951 C88.288918,250.720566 89.867378,248.680847 89.807304,244.052597 C89.539139,223.391968 89.589142,202.724701 89.796356,182.062561 C89.836380,178.071609 88.518524,176.326385 84.841705,174.787247 C57.730556,163.438416 45.530682,135.966721 55.436111,109.194000 C62.627293,89.757439 81.922821,76.710289 103.282494,76.841476 C124.355003,76.970901 143.082275,89.740875 149.993118,109.121849 C151.315979,112.831749 153.184799,113.869263 156.863403,113.853104 C186.192612,113.724319 215.522736,113.698357 244.851929,113.811600 C248.773117,113.826736 250.677307,112.652130 252.052902,108.765602 C259.013885,89.098465 278.589447,76.365829 300.503601,76.811897 C322.171844,77.252960 341.040283,91.132324 347.255371,111.201912 C356.569763,141.279358 340.344788,170.373184 309.893127,176.623123 C283.359375,182.068970 260.376740,167.450562 251.980011,145.670181 C250.492157,141.810806 248.818085,140.240295 244.552948,140.266785 C215.390915,140.447968 186.227219,140.357330 157.064072,140.375076 C154.628784,140.376556 151.855545,139.805771 151.141357,143.359161 C150.400787,147.043839 146.628937,150.064713 151.136917,154.478546 C184.592346,187.235229 217.778336,220.267349 250.982285,253.280014 C253.021469,255.307434 254.527191,255.254166 257.033264,254.047714 C276.199188,244.820953 294.752930,247.045853 310.978485,259.993408 C328.011017,273.584869 333.936798,292.106659 327.764038,313.282837 C321.779785,333.812378 307.254517,345.637268 286.367889,349.037231 C276.405396,350.658997 266.352570,349.443024 257.275055,344.363342 C254.265045,342.678986 252.301132,343.049744 249.903275,345.441406 C230.205368,365.088531 210.395386,384.623230 190.631638,404.204376 C177.732651,416.984222 164.859726,429.790344 151.962982,442.572388 C148.257980,446.244415 148.113403,452.901764 151.629196,456.671387 C152.707138,457.827148 154.029282,457.681976 155.328629,457.681946 C185.658203,457.681458 215.987854,457.631042 246.317261,457.695557 C249.355972,457.702026 250.687012,456.399414 251.717636,453.698944 C259.314423,433.793579 278.324493,420.868317 299.341309,421.146240 C320.526215,421.426361 339.575745,434.206421 346.686249,452.909271 C354.337341,473.034058 348.794159,495.642761 332.699371,509.956390 C307.061371,532.757202 263.380280,521.715210 251.978027,489.436371 C250.838303,486.209961 249.371201,484.953583 245.964813,484.962799 C216.302094,485.043304 186.639008,484.985840 156.976028,484.969330 C154.436981,484.967896 152.081528,484.923981 150.916916,488.054077 C142.892441,509.621246 126.842339,520.325989 103.875908,522.166260 M141.430466,266.110352 C145.394760,270.906738 148.503693,276.196198 150.388428,282.139069 C151.211502,284.734314 152.692291,285.770782 155.494156,285.760895 C179.139755,285.677429 202.787949,285.547394 226.430206,285.843811 C232.373352,285.918304 231.388184,281.058533 233.335602,278.254700 C235.007233,275.847992 233.916855,274.189880 232.000244,272.304352 C199.956863,240.780380 167.866821,209.301468 136.133682,177.467056 C131.183243,172.500824 127.483856,170.729507 121.013550,174.621368 C117.660522,176.638214 116.183739,178.155136 116.217278,182.042480 C116.398239,203.022598 116.444160,224.006012 116.243645,244.985474 C116.204666,249.064667 117.676285,250.918961 121.328865,252.228989 C128.972488,254.970444 135.505173,259.524170 141.430466,266.110352 M116.349434,377.499908 C116.351860,390.663696 116.870338,403.855377 116.161102,416.980713 C115.742699,424.723846 121.926743,423.801880 125.649162,426.262665 C129.080231,428.530792 130.798965,425.706268 132.741440,423.784821 C165.551407,391.329803 198.234940,358.745361 231.274231,326.525696 C235.764252,322.147095 232.377243,319.155212 231.599960,315.493317 C230.884583,312.123138 228.193359,312.382568 225.670288,312.382812 C202.675171,312.384949 179.679749,312.445435 156.685303,312.323212 C153.331955,312.305389 151.624329,313.386505 150.456299,316.584381 C145.119888,331.194611 135.004120,341.287384 120.496223,346.769958 C117.238434,348.001068 116.190170,349.706024 116.267418,353.006317 C116.450615,360.833862 116.340004,368.668243 116.349434,377.499908z"/></svg>';
function q9() {
  const n = document.querySelector("#top-settings-holder"), r = document.querySelector("#WI-SP-button");
  if (!n) {
    console.warn("[Engram] #top-settings-holder not found, fallback to floating orb"), H9();
    return;
  }
  const i = document.createElement("div");
  i.id = "engram-drawer", i.className = "drawer";
  const l = document.createElement("div");
  l.className = "drawer-toggle drawer-header";
  const s = document.createElement("div");
  s.id = "engram-drawer-icon", s.className = "drawer-icon fa-fw closedIcon", s.title = "Engram - ", s.setAttribute("data-i18n", "[title]Engram - Memory OS"), s.innerHTML = U2, s.addEventListener("click", Oc), l.appendChild(s), i.appendChild(l), r ? (n.insertBefore(i, r), console.log("[Engram] Top bar button injected before WI-SP-button")) : (n.appendChild(i), console.log("[Engram] Top bar button injected at end (WI-SP-button not found)"));
}
function H9() {
  const n = document.createElement("div");
  n.className = "fixed bottom-5 right-5 w-12 h-12 rounded-full cursor-pointer z-[9999] flex items-center justify-center transition-transform duration-200 bg-gradient-to-br from-orange-500 to-pink-500 shadow-[0_0_20px_rgba(249,115,22,0.5)] hover:scale-110 hover:shadow-[0_0_30px_rgba(249,115,22,0.7)] text-white", n.title = "Engram - ", n.innerHTML = U2, n.addEventListener("click", Oc), document.body.appendChild(n);
}
let Mc = null;
function P9(n) {
  Mc = n, Mc = n;
}
let Ph = null, Y1 = null;
function F9(n) {
  Ph = n;
}
function V9() {
  if (!Ph) {
    console.warn("[Engram] Global renderer not ready");
    return;
  }
  const n = "engram-global-overlay";
  let r = document.getElementById(n);
  r || (r = document.createElement("div"), r.id = n, r.className = "pointer-events-none fixed inset-0 z-[11000]", document.body.appendChild(r)), Y1 || (Y1 = Ph(r, () => {
  }), console.log("[Engram] Global overlay mounted"));
}
let Sh = !1, Os = null, Cc = null;
function Oc() {
  Sh && Os ? (Cc && (Cc.unmount(), Cc = null), Os.remove(), Os = null, Sh = !1) : (Os = K9(), document.body.appendChild(Os), Sh = !0);
}
function K9() {
  var r;
  const n = document.createElement("div");
  return n.className = "fixed inset-0 w-full h-full z-[10000] flex flex-col bg-background text-foreground overflow-hidden", n.style.backgroundColor = "var(--background)", n.style.color = "var(--foreground)", n.style.height = "100dvh", n.style.width = "100vw", n.style.top = "0", n.style.left = "0", n.id = "engram-panel-root", Mc ? Cc = Mc(n, Oc) : (n.innerHTML = `
            <div class="flex items-center justify-between p-4 border-b border-slate-400/20">
                <h2 class="m-0 text-lg text-slate-200 flex items-center gap-2"> Engram</h2>
                <button class="bg-transparent border-none text-slate-400 text-2xl cursor-pointer p-1 hover:text-slate-200">&times;</button>
            </div>
            <div class="flex-1 overflow-auto p-5">
                <p style="color: #94a3b8;">React </p>
            </div>
        `, (r = n.querySelector("button")) == null || r.addEventListener("click", Oc)), n;
}
async function G9(n, r) {
  try {
    const l = await new Function("path", "return import(path)")("/scripts/chats.js");
    l && typeof l.hideChatMessageRange == "function" ? (await l.hideChatMessageRange(n, r, !1), console.log(`[Engram] Hidden messages range: ${n}-${r}`)) : console.warn("[Engram] hideChatMessageRange not found in chats.js");
  } catch (i) {
    console.error("[Engram] Failed to hide messages:", i);
  }
}
async function $9(n, r = "text", i = "") {
  return window.callPopup ? window.callPopup(n, r, i) : (console.warn("[Engram] callPopup not available"), Promise.resolve(r === "confirm" ? !0 : null));
}
const Y9 = (n) => {
  switch (n) {
    case 0:
      return "text-muted-foreground";
    case 1:
      return "text-primary";
    case 2:
      return "text-green-400";
    case 3:
      return "text-yellow-400";
    case 4:
      return "text-red-400";
    default:
      return "text-primary";
  }
}, X1 = ({ onNavigate: n }) => {
  const [r, i] = se.useState([]), [l, s] = se.useState(ka()), [c, f] = se.useState(0);
  se.useEffect(() => (i(Ve.getLogs().slice(0, 3)), Ve.subscribe((x) => {
    i((_) => [x, ..._].slice(0, 3));
  })), []), se.useEffect(() => {
    const S = setInterval(() => {
      f((x) => x + 1);
    }, 1e3);
    return () => clearInterval(S);
  }, []);
  const g = (S) => {
    const x = Math.floor(S / 3600), _ = Math.floor(S % 3600 / 60), E = S % 60;
    return `${x.toString().padStart(2, "0")}:${_.toString().padStart(2, "0")}:${E.toString().padStart(2, "0")}`;
  }, y = (l == null ? void 0 : l.name2) || "Unknown", b = (S) => {
    n && n(S);
  };
  return /* @__PURE__ */ h.jsx("div", { className: "h-full overflow-y-auto p-6 [&::-webkit-scrollbar]:hidden", children: /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 max-w-[1000px] mx-auto", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 col-span-full", children: [
      /* @__PURE__ */ h.jsx(
        vh,
        {
          title: "ACTIVE MODEL",
          value: l ? "Connected" : "Offline",
          subtext: l ? `Chatting with ${y}` : "Waiting for connection...",
          icon: Sy,
          highlight: !!l
        }
      ),
      /* @__PURE__ */ h.jsx(
        vh,
        {
          title: "MEMORY NODES",
          value: "0",
          subtext: "Graph Database",
          icon: Ic
        }
      ),
      /* @__PURE__ */ h.jsx(
        vh,
        {
          title: "SYSTEM UPTIME",
          value: g(c),
          subtext: "Session Duration",
          icon: Zh
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col bg-card border border-border rounded-lg overflow-hidden relative transition-all duration-200 hover:shadow-md", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 p-4 text-xs font-bold tracking-widest text-muted-foreground border-b border-border", children: [
        /* @__PURE__ */ h.jsx(rm, { size: 16 }),
        /* @__PURE__ */ h.jsx("span", { children: "QUICK ACTIONS" })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex-1 grid grid-cols-4 gap-3 p-4", children: [
        /* @__PURE__ */ h.jsxs("button", { className: "flex flex-col items-center justify-center gap-2 p-3 bg-background border border-border rounded-xl cursor-pointer transition-all duration-200 text-muted-foreground hover:bg-accent hover:-translate-y-0.5 hover:text-accent-foreground", onClick: () => b("memory"), children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-2xl", children: "" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs font-medium", children: "Memory Stream" })
        ] }),
        /* @__PURE__ */ h.jsxs("button", { className: "flex flex-col items-center justify-center gap-2 p-3 bg-background border border-border rounded-xl cursor-pointer transition-all duration-200 text-muted-foreground hover:bg-accent hover:-translate-y-0.5 hover:text-accent-foreground", onClick: () => b("graph"), children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-2xl", children: "" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs font-medium", children: "Knowledge Graph" })
        ] }),
        /* @__PURE__ */ h.jsxs("button", { className: "flex flex-col items-center justify-center gap-2 p-3 bg-background border border-border rounded-xl cursor-pointer transition-all duration-200 text-muted-foreground hover:bg-accent hover:-translate-y-0.5 hover:text-accent-foreground", onClick: () => b("processing"), children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-2xl", children: "" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs font-medium", children: "Brain Console" })
        ] }),
        /* @__PURE__ */ h.jsxs("button", { className: "flex flex-col items-center justify-center gap-2 p-3 bg-background border border-border rounded-xl cursor-pointer transition-all duration-200 text-muted-foreground hover:bg-accent hover:-translate-y-0.5 hover:text-accent-foreground", onClick: () => b("settings"), children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-2xl", children: "" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs font-medium", children: "Settings" })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col bg-card border border-border rounded-lg overflow-hidden relative transition-all duration-200 hover:shadow-md", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 p-4 text-xs font-bold tracking-widest text-muted-foreground border-b border-border", children: [
        /* @__PURE__ */ h.jsx(vo, { size: 16 }),
        /* @__PURE__ */ h.jsx("span", { children: "SYSTEM LOGS" }),
        /* @__PURE__ */ h.jsx("button", { className: "ml-auto text-[10px] text-primary bg-transparent border-none cursor-pointer opacity-80 hover:opacity-100 hover:underline", onClick: () => b("devlog"), children: "VIEW ALL" })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex-1 p-3 font-mono text-[11px] bg-muted/20 overflow-hidden", children: r.length === 0 ? /* @__PURE__ */ h.jsx("div", { className: "text-muted-foreground text-center mt-5 italic", children: "No activity recorded" }) : r.map((S) => /* @__PURE__ */ h.jsxs("div", { className: `flex gap-2 mb-1.5 opacity-80 ${Y9(S.level)}`, children: [
        /* @__PURE__ */ h.jsxs("span", { className: "text-muted-foreground", children: [
          "[",
          new Date(S.timestamp).toLocaleTimeString([], { hour12: !1 }),
          "]"
        ] }),
        /* @__PURE__ */ h.jsx("span", { className: "text-foreground flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis", children: S.message })
      ] }, S.id)) })
    ] })
  ] }) });
}, X9 = se.lazy(() => Promise.resolve().then(() => Kw).then((n) => ({ default: n.GraphView }))), Q9 = se.lazy(() => Promise.resolve().then(() => ik).then((n) => ({ default: n.DevLog }))), Z9 = se.lazy(() => Promise.resolve().then(() => Ak).then((n) => ({ default: n.APIPresets }))), W9 = se.lazy(() => Promise.resolve().then(() => Ok).then((n) => ({ default: n.Settings }))), J9 = se.lazy(() => Promise.resolve().then(() => Rk).then((n) => ({ default: n.MemoryStream }))), ew = se.lazy(() => Promise.resolve().then(() => Fk).then((n) => ({ default: n.ProcessingView }))), tw = () => /* @__PURE__ */ h.jsx("div", { className: "flex items-center justify-center h-full", children: /* @__PURE__ */ h.jsx("div", { className: "animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full" }) }), nw = ({ onClose: n }) => {
  const [r, i] = se.useState("dashboard"), [l, s] = se.useState(!1), [c, f] = se.useState(!1);
  se.useEffect(() => {
    const b = setTimeout(() => {
      const S = nt.get("hasSeenWelcome");
      console.debug("[Engram] hasSeenWelcome:", S), S || s(!0), f(!0);
    }, 1e3);
    return () => clearTimeout(b);
  }, []);
  const g = () => {
    nt.set("hasSeenWelcome", !0), console.debug("[Engram] hasSeenWelcome saved"), s(!1);
  };
  if (!c)
    return null;
  const y = () => {
    const [b, S] = r.split(":");
    switch (b) {
      case "dashboard":
        return /* @__PURE__ */ h.jsx(X1, { onNavigate: i });
      case "presets":
        return /* @__PURE__ */ h.jsx(Z9, { initialTab: S });
      case "graph":
        return /* @__PURE__ */ h.jsx(X9, {});
      case "devlog":
        return /* @__PURE__ */ h.jsx(Q9, { initialTab: S });
      case "settings":
        return /* @__PURE__ */ h.jsx(W9, {});
      case "memory":
        return /* @__PURE__ */ h.jsx(J9, {});
      case "processing":
        return /* @__PURE__ */ h.jsx(ew, { onNavigate: i });
      default:
        return /* @__PURE__ */ h.jsx(X1, {});
    }
  };
  return (
    /*  */
    /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
      l && /* @__PURE__ */ h.jsx(L9, { onComplete: g }),
      /* @__PURE__ */ h.jsx(R9, { activeTab: r, setActiveTab: i, onClose: n, children: /* @__PURE__ */ h.jsx(se.Suspense, { fallback: /* @__PURE__ */ h.jsx(tw, {}), children: y() }) })
    ] })
  );
};
var rw = fy();
const iw = /* @__PURE__ */ ul(rw), Wr = {
  MESSAGE_RECEIVED: "message_received",
  // 
  CHAT_CHANGED: "chat_id_changed",
  // 
  GENERATION_STARTED: "generation_started",
  GENERATION_ENDED: "generation_ended",
  // 
  ENGRAM_REQUEST_REVISION: "engram:request_revision"
};
function so() {
  try {
    const n = window.SillyTavern;
    if (n != null && n.getContext) {
      const r = n.getContext();
      return (r == null ? void 0 : r.eventSource) || null;
    }
    return null;
  } catch {
    return console.warn("[Engram] EventBus:  SillyTavern eventSource"), null;
  }
}
class Or {
  /**
   * 
   * @param event 
   * @param callback 
   * @returns 
   */
  static on(r, i) {
    const l = so();
    return l && l.on(r, i), this.listeners.has(r) || this.listeners.set(r, /* @__PURE__ */ new Set()), this.listeners.get(r).add(i), () => {
      this.off(r, i);
    };
  }
  /**
   * 
   * @param event 
   * @param callback 
   */
  static once(r, i) {
    const l = so();
    if (l)
      l.once(r, i);
    else {
      const s = (...c) => {
        this.off(r, s), i(...c);
      };
      this.on(r, s);
    }
  }
  /**
   * 
   * @param event 
   * @param callback 
   */
  static off(r, i) {
    var s;
    const l = so();
    l && l.removeListener(r, i), (s = this.listeners.get(r)) == null || s.delete(i);
  }
  /**
   * 
   * @param event 
   * @param args 
   */
  static emit(r, ...i) {
    const l = so();
    l && l.emit(r, ...i);
  }
  /**
   * 
   * 
   */
  static clearAll() {
    const r = so();
    for (const [i, l] of this.listeners)
      for (const s of l)
        r && r.removeListener(i, s);
    this.listeners.clear();
  }
  /**
   *  EventBus 
   */
  static isAvailable() {
    return so() !== null;
  }
}
dt(Or, "listeners", /* @__PURE__ */ new Map());
const aw = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  EventBus: Or,
  TavernEventType: Wr
}, Symbol.toStringTag, { value: "Module" }));
function lw(n, r) {
  let i = "assistant";
  return n.is_user ? i = "user" : n.is_system && (i = "system"), {
    id: r,
    role: i,
    content: n.mes || "",
    name: n.name || "",
    isHidden: n.is_hidden ?? !1,
    raw: n
  };
}
class I2 {
  /**
   * 
   * @param options 
   */
  static getAllMessages(r = {}) {
    const i = ka();
    if (!(i != null && i.chat))
      return [];
    let l = i.chat.map((s, c) => lw(s, c));
    if (r.includeHidden || (l = l.filter((s) => !s.isHidden)), r.role) {
      const s = Array.isArray(r.role) ? r.role : [r.role];
      l = l.filter((c) => s.includes(c.role));
    }
    return l;
  }
  /**
   *  N 
   * @param count 
   * @param options 
   */
  static getRecentMessages(r, i = {}) {
    return this.getAllMessages(i).slice(-r);
  }
  /**
   * 
   * @param start 
   * @param end 
   * @param options 
   */
  static getMessages(r, i, l = {}) {
    return this.getAllMessages(l).slice(r, i);
  }
  /**
   * 
   * @param options 
   */
  static getFloorCount(r = {}) {
    return this.getAllMessages(r).length;
  }
  /**
   * 
   * @param options 
   */
  static getLastMessage(r = {}) {
    const i = this.getAllMessages(r);
    return i.length > 0 ? i[i.length - 1] : null;
  }
  /**
   * 
   */
  static getCurrentCharacterName() {
    var i;
    const r = ka();
    return !(r != null && r.characters) || r.characterId < 0 ? null : ((i = r.characters[r.characterId]) == null ? void 0 : i.name) || null;
  }
  /**
   *  LLM
   * @param messages 
   * @param format 
   */
  static formatMessagesAsText(r, i = "simple") {
    return i === "simple" ? r.map((l) => `${l.name}: ${l.content}`).join(`

`) : r.map((l) => `[${l.role.toUpperCase()}] ${l.name}:
${l.content}`).join(`

---

`);
  }
  /**
   *  MessageService 
   */
  static isAvailable() {
    return I9();
  }
}
const ow = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  MessageService: I2
}, Symbol.toStringTag, { value: "Module" }));
async function Q1(n) {
  try {
    const r = window.SillyTavern;
    if (r != null && r.getContext) {
      const i = r.getContext();
      if (i != null && i.getTokenCountAsync)
        return await i.getTokenCountAsync(n);
    }
    return Math.ceil(n.length / 4);
  } catch {
    return console.warn("[Engram] WorldInfoService:  Token "), Math.ceil(n.length / 4);
  }
}
function Zn() {
  try {
    return window.TavernHelper || null;
  } catch {
    return null;
  }
}
const Us = "engram";
class kt {
  /**
   *  Token 
   * @param text 
   */
  static async countTokens(r) {
    return Q1(r);
  }
  /**
   *  Engram  Token 
   * 
   * @param worldbookName 
   */
  static async countSummaryTokens(r) {
    const l = (await this.getEntries(r)).filter(
      (f) => f.enabled && f.keys.includes(Us)
    );
    if (l.length === 0) return 0;
    const s = l.map((f) => f.content);
    return (await Promise.all(s.map((f) => this.countTokens(f)))).reduce((f, g) => f + g, 0);
  }
  /**
   *  Engram  {{engramSummaries}} 
   * 
   */
  static async getEngramSummariesContent() {
    const r = this.findExistingWorldbook();
    if (!r)
      return "";
    const l = (await this.getEntries(r)).filter((c) => c.keys.includes(Us));
    return l.length === 0 ? "" : (l.sort((c, f) => c.order - f.order), l.map((c) => {
      const f = c.content.replace(/\{\{\/\/.*?\}\}/gs, "").trim();
      return `${c.name}
${f}`;
    }).join(`

---

`));
  }
  /**
   *  Token 
   * @param texts 
   */
  static async countTokensBatch(r) {
    return Promise.all(r.map((i) => Q1(i)));
  }
  /**
   *  Engram 
   * 
   */
  static findExistingWorldbook() {
    try {
      const r = Zn();
      if (!(r != null && r.getCharWorldbookNames))
        return null;
      const i = r.getCharWorldbookNames("current");
      return i && [...i.additional || [], i.primary].filter(Boolean).find((c) => c == null ? void 0 : c.startsWith("[Engram]")) || null;
    } catch {
      return null;
    }
  }
  /**
   *  Engram 
   * 
   * ****
   * 
   *  the_world 
   * 1. TavernHelper.createWorldbook() 
   * 2. TavernHelper.getCharWorldbookNames() 
   * 3. TavernHelper.rebindCharWorldbooks() 
   */
  static async getOrCreateWorldbook() {
    var r, i;
    try {
      const l = this.findExistingWorldbook();
      if (l)
        return console.debug("[Engram] WorldInfoService: ", l), l;
      const s = Zn();
      if (!s)
        return console.warn("[Engram] WorldInfoService: TavernHelper "), null;
      const c = (i = (r = window.SillyTavern) == null ? void 0 : r.getContext) == null ? void 0 : i.call(r);
      if (!(c != null && c.name2) || c.name2 === "SillyTavern System")
        return console.warn("[Engram] WorldInfoService: "), null;
      const f = c.name2, g = `[Engram] ${f}`;
      if (console.debug("[Engram] WorldInfoService: ", g), s.createWorldbook)
        await s.createWorldbook(g);
      else
        return console.error("[Engram] WorldInfoService: TavernHelper.createWorldbook "), null;
      if (s.getCharWorldbookNames && s.rebindCharWorldbooks) {
        const y = s.getCharWorldbookNames("current");
        y && (y.additional.push(g), await s.rebindCharWorldbooks("current", y), console.info("[Engram] WorldInfoService: ", {
          character: f,
          worldbook: g
        }));
      }
      return g;
    } catch (l) {
      return console.error("[Engram] WorldInfoService: /", l), null;
    }
  }
  /**
   * @deprecated  getOrCreateWorldbook() 
   */
  static async getChatWorldbook() {
    return this.getOrCreateWorldbook();
  }
  /**
   * 
   * @param worldbookName 
   */
  static async getEntries(r) {
    const i = Zn();
    if (!(i != null && i.getWorldbook))
      return console.warn("[Engram] WorldInfoService: TavernHelper "), [];
    try {
      return (await i.getWorldbook(r)).map((s) => {
        const c = s, f = c.strategy, g = c.position, y = c.recursion, b = [];
        if (f != null && f.keys && Array.isArray(f.keys))
          for (const S of f.keys)
            typeof S == "string" ? b.push(S) : S && typeof S == "object" && "source" in S && b.push(S.source);
        return {
          uid: c.uid || 0,
          name: c.name || "",
          content: c.content || "",
          enabled: c.enabled ?? !0,
          constant: (f == null ? void 0 : f.type) === "constant",
          keys: b,
          position: (g == null ? void 0 : g.type) || "before_character_definition",
          depth: (g == null ? void 0 : g.depth) || 0,
          order: (g == null ? void 0 : g.order) || 100,
          recursion: y ? {
            prevent_incoming: y.prevent_incoming,
            prevent_outgoing: y.prevent_outgoing
          } : void 0,
          comment: c.comment || "",
          extra: c.extra || void 0
        };
      });
    } catch (l) {
      return console.error("[Engram] WorldInfoService: ", l), [];
    }
  }
  /**
   * 
   */
  static async getWorldbookNames() {
    const r = Zn();
    try {
      return r != null && r.getWorldbookNames ? r.getWorldbookNames() : [];
    } catch (i) {
      return console.error("[Engram] WorldInfoService: ", i), [];
    }
  }
  /**
   * 
   * @param worldbookName 
   */
  static async deleteWorldbook(r) {
    const i = Zn();
    if (!(i != null && i.deleteWorldbook))
      return console.warn("[Engram] WorldInfoService: TavernHelper.deleteWorldbook "), !1;
    try {
      const l = await i.deleteWorldbook(r);
      return l && console.info("[Engram] WorldInfoService: ", r), l;
    } catch (l) {
      return console.error("[Engram] WorldInfoService: ", l), !1;
    }
  }
  /**
   * 
   *  TavernHelper API the_world 
   * @param worldbookName 
   * @param params 
   */
  static async createEntry(r, i) {
    try {
      const l = Zn();
      if (!(l != null && l.createWorldbookEntries))
        return console.error("[Engram] WorldInfoService: TavernHelper.createWorldbookEntries "), !1;
      const s = {
        name: i.name,
        content: i.content,
        comment: i.name,
        // 
        disable: !(i.enabled ?? !0),
        // TavernHelper  disable 
        strategy: {
          type: i.constant ? "constant" : "selective",
          keys: i.keys || []
        },
        position: {
          type: i.position || "before_character_definition",
          order: i.order ?? 100,
          depth: i.depth ?? 4
        },
        recursion: i.recursion,
        //  Engram 
        extra: {
          engram: !0
        }
      };
      return console.debug("[Engram] WorldInfoService: ", {
        worldbook: r,
        name: i.name,
        contentLength: i.content.length
      }), await l.createWorldbookEntries(r, [s]), console.info("[Engram] WorldInfoService: ", r), !0;
    } catch (l) {
      return console.error("[Engram] WorldInfoService: ", l), !1;
    }
  }
  /**
   * 
   * @param worldbookName 
   * @param uid  UID
   * @param updates 
   */
  /**
   * 
   *  updateWorldbookWith 
   * @param worldbookName 
   * @param uid  UID
   * @param updates 
   */
  static async updateEntry(r, i, l) {
    const s = Zn();
    if (!(s != null && s.updateWorldbookWith))
      return console.warn("[Engram] WorldInfoService: TavernHelper.updateWorldbookWith "), !1;
    try {
      return await s.updateWorldbookWith(r, (c) => {
        var g;
        const f = c.findIndex((y) => y.uid === i);
        if (f !== -1) {
          const y = c[f];
          let b = y.disable;
          "enabled" in l && (b = !l.enabled);
          let S = y.strategy || { type: "selective", keys: [] };
          if ("constant" in l || "keys" in l) {
            const E = l.constant !== void 0 ? l.constant : S.type === "constant", N = l.keys !== void 0 ? l.keys : S.keys || [];
            S = {
              ...S,
              type: E ? "constant" : "selective",
              keys: N
            };
          }
          let x = y.position || { type: "before_character_definition", order: 0, depth: 0 };
          (l.position || typeof l.order == "number" || typeof l.depth == "number") && (x = {
            ...x,
            type: (typeof l.position == "string" ? l.position : (g = l.position) == null ? void 0 : g.type) || x.type,
            order: l.order ?? x.order,
            depth: l.depth ?? x.depth
          });
          let _ = y.recursion;
          l.recursion && (_ = l.recursion), c[f] = {
            ...y,
            name: l.name ?? y.name,
            content: l.content ?? y.content,
            comment: l.name ?? y.comment,
            // 
            disable: b,
            strategy: S,
            position: x,
            recursion: _
          }, console.debug("[Engram] WorldInfoService:  (In-Place)", { uid: i, name: c[f].name });
        } else
          console.warn("[Engram] WorldInfoService: updateEntry ", i);
        return c;
      }), !0;
    } catch (c) {
      return console.error("[Engram] WorldInfoService: ", c), !1;
    }
  }
  /**
   * 
   * @param worldbookName 
   * @param uid  UID
   */
  static async deleteEntry(r, i) {
    const l = Zn();
    if (!(l != null && l.deleteWorldbookEntries))
      return console.warn("[Engram] WorldInfoService: TavernHelper.deleteWorldbookEntries "), !1;
    try {
      return await l.deleteWorldbookEntries(r, (s) => s.uid === i), console.debug("[Engram] WorldInfoService: ", { worldbook: r, uid: i }), !0;
    } catch (s) {
      return console.error("[Engram] WorldInfoService: ", s), !1;
    }
  }
  /**
   * 
   * @param worldbookName 
   * @param uids  UID 
   */
  static async deleteEntries(r, i) {
    const l = Zn();
    if (!(l != null && l.deleteWorldbookEntries))
      return console.warn("[Engram] WorldInfoService: TavernHelper.deleteWorldbookEntries "), !1;
    try {
      const s = new Set(i);
      return await l.deleteWorldbookEntries(r, (c) => s.has(c.uid)), console.debug("[Engram] WorldInfoService: ", { worldbook: r, count: i.length }), !0;
    } catch (s) {
      return console.error("[Engram] WorldInfoService: ", s), !1;
    }
  }
  /**
   *  Engram  order 
   * 
   * @param worldbookName 
   */
  static async getSummaryEntries(r) {
    const l = (await this.getEntries(r)).filter((s) => s.keys.includes(Us));
    return l.sort((s, c) => s.order - c.order), l;
  }
  /**
   * 
   * @param entryName  "_1-10"
   * @returns [startFloor, endFloor]  null
   */
  static parseFloorRangeFromName(r) {
    const i = r.match(/_(\d+)-(\d+)/);
    return i ? [parseInt(i[1], 10), parseInt(i[2], 10)] : null;
  }
  /**
   * 
   * 8999:  <summary>
   * 10000:  </summary>
   */
  static async ensureSeparatorEntries(r) {
    await this.findEntryByKey(r, "") || await this.createEntry(r, {
      name: "",
      content: "<summary>",
      keys: [""],
      constant: !0,
      order: 8999,
      enabled: !0,
      position: "before_character_definition"
    }), await this.findEntryByKey(r, "") || await this.createEntry(r, {
      name: "",
      content: "</summary>",
      keys: [""],
      constant: !0,
      order: 1e4,
      enabled: !0,
      position: "before_character_definition"
    });
  }
  /**
   * 
   *  9000
   */
  static async getNextSummaryOrder(r) {
    const l = (await this.getEntries(r)).map((c) => c.order).filter((c) => c >= 9e3 && c < 1e4);
    return l.length === 0 ? 9e3 : Math.max(...l) + 1;
  }
  /**
   *  Key 
   * @param worldbookName 
   * @param key 
   */
  static async findEntryByKey(r, i) {
    const l = await this.getEntries(r);
    let s = l.find((c) => c.keys.includes(i));
    return s || (s = l.find((c) => c.name === i || i === "__ENGRAM_STATE__" && c.name === "Engram System State")), s || null;
  }
  /**
   *  Token 
   * @param worldbookName 
   */
  static async getWorldbookTokenStats(r) {
    const i = await this.getEntries(r), l = await Promise.all(
      i.map(async (c) => ({
        name: c.name,
        tokens: await this.countTokens(c.content)
      }))
    );
    return {
      totalTokens: l.reduce((c, f) => c + f.tokens, 0),
      entryCount: i.length,
      entries: l
    };
  }
  /**
   *  WorldInfoService 
   */
  static isAvailable() {
    return Zn() !== null;
  }
  /**
   *  Token  API
   */
  static async isNativeTokenCountAvailable() {
    try {
      const r = window.SillyTavern;
      if (r != null && r.getContext) {
        const i = r.getContext();
        return typeof (i == null ? void 0 : i.getTokenCountAsync) == "function";
      }
      return !1;
    } catch {
      return !1;
    }
  }
  /**
   * 
   *  getWorldInfoPrompt 
   * + 
   * 
   * @param chatMessages 
   * @returns 
   */
  static async getActivatedWorldInfo(r) {
    var l, s, c;
    const { Logger: i } = await Promise.resolve().then(() => lm);
    try {
      const g = await new Function("path", "return import(path)")("/scripts/world-info.js"), y = g == null ? void 0 : g.getWorldInfoPrompt, b = g == null ? void 0 : g.getSortedEntries;
      if (typeof b == "function") {
        const J = await b(), De = [...new Set((J == null ? void 0 : J.map((W) => W.world)) || [])], He = ((l = J == null ? void 0 : J.filter((W) => W.constant)) == null ? void 0 : l.length) || 0;
        i.info("WorldInfo", "getSortedEntries ", {
          totalEntries: (J == null ? void 0 : J.length) || 0,
          worlds: De,
          constantCount: He,
          sampleEntry: J != null && J[0] ? {
            name: J[0].name,
            world: J[0].world,
            constant: J[0].constant
          } : null
        });
      }
      if (typeof y != "function")
        return i.warn("WorldInfo", "getWorldInfoPrompt "), this.getConstantWorldInfo();
      let S = r;
      if (!S || S.length === 0) {
        const J = (c = (s = window.SillyTavern) == null ? void 0 : s.getContext) == null ? void 0 : c.call(s);
        J != null && J.chat && Array.isArray(J.chat) && (S = J.chat.map((De) => De.mes || "").reverse());
      }
      if (!S || S.length === 0)
        return i.warn("WorldInfo", ""), this.getConstantWorldInfo();
      i.debug("WorldInfo", " getWorldInfoPrompt", {
        messageCount: S.length
      });
      const x = 1e6, _ = g == null ? void 0 : g.checkWorldInfo;
      if (typeof _ != "function")
        return i.error("WorldInfo", "checkWorldInfo "), this.getConstantWorldInfo();
      const E = await _(S, x, !0, {
        trigger: "normal"
      }), N = E == null ? void 0 : E.allActivatedEntries, U = N ? Array.from(N.values()) : [];
      i.info("WorldInfo", ` ${U.length} `);
      const G = await this.loadFilteringState(), { disabledGlobalBooks: D, disabledEntries: ne, globalWorldbooks: ie, config: _e } = G, we = U.filter(
        (J) => this.shouldIncludeEntry(J, ie, D, ne, _e)
      );
      return i.info("WorldInfo", "", {
        total: U.length,
        kept: we.length,
        filteredOut: U.length - we.length,
        keptWorlds: [...new Set(we.map((J) => J.world))]
      }), we.sort((J, De) => (J.order || 0) - (De.order || 0)), we.map((J) => J.content).filter(Boolean).join(`

`);
    } catch (f) {
      return i.error("WorldInfo", "", f), this.getConstantWorldInfo();
    }
  }
  /**
   * 
   * @private
   */
  static async loadFilteringState() {
    var S, x, _;
    const r = Zn(), i = ((S = r == null ? void 0 : r.getGlobalWorldbookNames) == null ? void 0 : S.call(r)) || [], { SettingsManager: l } = await Promise.resolve().then(() => zy), c = (x = l.getSettings().apiSettings) == null ? void 0 : x.worldbookConfig, f = (c == null ? void 0 : c.disabledWorldbooks) || [], { WorldBookStateService: g } = await Promise.resolve().then(() => Ek), y = (_ = r == null ? void 0 : r.getCharWorldbookNames) == null ? void 0 : _.call(r, "current");
    let b = {};
    return y != null && y.primary && (b = (await g.loadState(y.primary)).disabledEntries || {}), {
      globalWorldbooks: i,
      disabledGlobalBooks: f,
      disabledEntries: b,
      config: c
    };
  }
  /**
   * 
   * @private
   */
  static shouldIncludeEntry(r, i, l, s, c) {
    var f, g, y, b;
    if (((f = r.extra) == null ? void 0 : f.engram) === !0 || (g = r.world) != null && g.startsWith("[Engram]")) return !0;
    if (r.world && i.includes(r.world) && ((c == null ? void 0 : c.includeGlobal) === !1 || l.includes(r.world)))
      return !1;
    if (r.world && r.uid) {
      const S = s[r.world];
      if (S && S.includes(r.uid))
        return !1;
    }
    return !((y = r.world) != null && y.startsWith("") || (b = r.world) != null && b.startsWith("---"));
  }
  /**
   *  UI 
   * 
   */
  static async getWorldbookStructure() {
    var f;
    const r = Zn();
    if (!r) return {};
    const i = ((f = r.getGlobalWorldbookNames) == null ? void 0 : f.call(r)) || [];
    let l = [];
    if (r.getCharWorldbookNames) {
      const g = r.getCharWorldbookNames("current");
      g && (l = [...g.additional || [], g.primary].filter(Boolean));
    }
    const s = Array.from(/* @__PURE__ */ new Set([...i, ...l])).sort(), c = {};
    for (const g of s)
      try {
        const y = await this.getEntries(g);
        c[g] = y.map((b) => {
          var S;
          return {
            uid: b.uid,
            name: b.name,
            // 
            keys: b.keys,
            constant: b.constant,
            // 
            comment: b.comment || "",
            content: ((S = b.content) == null ? void 0 : S.substring(0, 50)) + "..."
            // 
          };
        });
      } catch (y) {
        console.warn(`[Engram] WorldInfoService:  ${g} `, y), c[g] = [];
      }
    return c;
  }
  /**
   * 
   *  getActivatedWorldInfo 
   */
  static async getConstantWorldInfo() {
    try {
      const i = await new Function("path", "return import(path)")("/scripts/world-info.js"), l = i == null ? void 0 : i.getSortedEntries;
      if (typeof l != "function")
        return "";
      const s = await l();
      if (!s || !Array.isArray(s))
        return "";
      const c = s.filter((f) => f.constant === !0 && f.disable !== !0 && f.content);
      return c.length === 0 ? "" : (console.debug(`[Engram] WorldInfoService:  ${c.length} `), c.map((f) => f.content).join(`

`));
    } catch {
      return "";
    }
  }
}
const sw = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  SUMMARY_ENTRY_KEY: Us,
  WorldInfoService: kt,
  getTavernHelper: Zn
}, Symbol.toStringTag, { value: "Module" }));
async function uw() {
  const { EventBus: n } = await Promise.resolve().then(() => aw), { MessageService: r } = await Promise.resolve().then(() => ow), { WorldInfoService: i } = await Promise.resolve().then(() => sw);
  return {
    eventBus: n.isAvailable(),
    messageService: r.isAvailable(),
    worldInfoService: i.isAvailable(),
    nativeTokenCount: await i.isNativeTokenCountAvailable(),
    floorCount: r.isAvailable() ? r.getFloorCount() : null,
    characterName: r.isAvailable() ? r.getCurrentCharacterName() : null
  };
}
const cw = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  EventBus: Or,
  MessageService: I2,
  TavernEventType: Wr,
  WorldInfoService: kt,
  checkTavernIntegration: uw
}, Symbol.toStringTag, { value: "Module" })), fw = () => {
  const [n, r] = se.useState(!1), [i, l] = se.useState(null), [s, c] = se.useState("");
  se.useEffect(() => {
    const y = Or.on(
      Wr.ENGRAM_REQUEST_REVISION,
      (b) => {
        const S = b;
        l(S), c(S.content), r(!0);
      }
    );
    return () => {
      y();
    };
  }, []);
  const f = () => {
    i && (i.onConfirm(s), r(!1), l(null));
  }, g = () => {
    i && i.onCancel(), r(!1), l(null);
  };
  return n ? iw.createPortal(
    /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: "fixed inset-0 z-[11000] flex items-center justify-center p-4",
        style: { height: "100dvh", width: "100vw" },
        children: [
          /* @__PURE__ */ h.jsx(
            "div",
            {
              className: "absolute inset-0 bg-background/80 backdrop-blur-sm animate-in fade-in duration-200",
              onClick: g
            }
          ),
          /* @__PURE__ */ h.jsxs("div", { className: "relative w-full max-w-2xl bg-popover border border-border rounded-lg shadow-2xl flex flex-col max-h-[85vh] animate-in zoom-in-95 slide-in-from-bottom-2 duration-200", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-start justify-between p-5 border-b border-border", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
                /* @__PURE__ */ h.jsx("h3", { className: "text-lg font-medium text-foreground tracking-tight", children: (i == null ? void 0 : i.title) || "" }),
                (i == null ? void 0 : i.description) && /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: i.description })
              ] }),
              /* @__PURE__ */ h.jsx(
                "button",
                {
                  onClick: g,
                  className: "p-2 -m-2 text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors",
                  "aria-label": "",
                  children: /* @__PURE__ */ h.jsx(Hc, { size: 18 })
                }
              )
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex-1 p-5 overflow-hidden flex flex-col gap-4", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-start gap-3 p-3 bg-primary/10 border border-primary/20 rounded-md", children: [
                /* @__PURE__ */ h.jsx(s4, { size: 16, className: "text-primary shrink-0 mt-0.5" }),
                /* @__PURE__ */ h.jsx("p", { className: "text-sm text-foreground/80 leading-relaxed", children: "" })
              ] }),
              /* @__PURE__ */ h.jsx(
                "textarea",
                {
                  value: s,
                  onChange: (y) => c(y.target.value),
                  className: "flex-1 w-full min-h-[200px] p-4 bg-muted border border-border rounded-md font-mono text-sm text-foreground leading-relaxed placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring resize-none",
                  spellCheck: !1,
                  placeholder: "..."
                }
              ),
              /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground text-right font-mono", children: [
                s.length,
                " "
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-end gap-3 px-5 py-4 border-t border-border bg-muted/30", children: [
              /* @__PURE__ */ h.jsx(
                "button",
                {
                  onClick: g,
                  className: "px-4 py-2 text-sm font-medium text-muted-foreground hover:text-foreground border border-border rounded-lg hover:bg-accent transition-colors",
                  children: ""
                }
              ),
              /* @__PURE__ */ h.jsxs(
                "button",
                {
                  onClick: f,
                  className: "inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-primary/20 text-primary border border-primary/50 shadow-[0_0_10px_rgba(var(--primary),0.2)] hover:bg-primary/30 hover:shadow-[0_0_15px_rgba(var(--primary),0.4)] focus:outline-none focus:ring-2 focus:ring-primary/50",
                  children: [
                    /* @__PURE__ */ h.jsx(py, { size: 16 }),
                    ""
                  ]
                }
              )
            ] })
          ] })
        ]
      }
    ),
    document.body
  ) : null;
};
P9((n, r) => {
  const i = dy.createRoot(n);
  return i.render(cy.createElement(nw, { onClose: r })), i;
});
F9((n) => {
  const r = dy.createRoot(n);
  return r.render(
    /* @__PURE__ */ h.jsx("div", { className: "pointer-events-auto", children: /* @__PURE__ */ h.jsx(fw, {}) })
  ), r;
});
document.readyState === "loading" ? document.addEventListener("DOMContentLoaded", $1) : $1();
var Ec = { exports: {} }, dw = Ec.exports, Z1;
function hw() {
  return Z1 || (Z1 = 1, (function(n, r) {
    (function(i, l) {
      n.exports = l();
    })(dw, function() {
      var i = function(u, m) {
        return (i = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(v, w) {
          v.__proto__ = w;
        } || function(v, w) {
          for (var C in w) Object.prototype.hasOwnProperty.call(w, C) && (v[C] = w[C]);
        })(u, m);
      }, l = function() {
        return (l = Object.assign || function(u) {
          for (var m, v = 1, w = arguments.length; v < w; v++) for (var C in m = arguments[v]) Object.prototype.hasOwnProperty.call(m, C) && (u[C] = m[C]);
          return u;
        }).apply(this, arguments);
      };
      function s(u, m, v) {
        for (var w, C = 0, j = m.length; C < j; C++) !w && C in m || ((w = w || Array.prototype.slice.call(m, 0, C))[C] = m[C]);
        return u.concat(w || Array.prototype.slice.call(m));
      }
      var c = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : yx, f = Object.keys, g = Array.isArray;
      function y(u, m) {
        return typeof m != "object" || f(m).forEach(function(v) {
          u[v] = m[v];
        }), u;
      }
      typeof Promise > "u" || c.Promise || (c.Promise = Promise);
      var b = Object.getPrototypeOf, S = {}.hasOwnProperty;
      function x(u, m) {
        return S.call(u, m);
      }
      function _(u, m) {
        typeof m == "function" && (m = m(b(u))), (typeof Reflect > "u" ? f : Reflect.ownKeys)(m).forEach(function(v) {
          N(u, v, m[v]);
        });
      }
      var E = Object.defineProperty;
      function N(u, m, v, w) {
        E(u, m, y(v && x(v, "get") && typeof v.get == "function" ? { get: v.get, set: v.set, configurable: !0 } : { value: v, configurable: !0, writable: !0 }, w));
      }
      function U(u) {
        return { from: function(m) {
          return u.prototype = Object.create(m.prototype), N(u.prototype, "constructor", u), { extend: _.bind(null, u.prototype) };
        } };
      }
      var G = Object.getOwnPropertyDescriptor, D = [].slice;
      function ne(u, m, v) {
        return D.call(u, m, v);
      }
      function ie(u, m) {
        return m(u);
      }
      function _e(u) {
        if (!u) throw new Error("Assertion Failed");
      }
      function we(u) {
        c.setImmediate ? setImmediate(u) : setTimeout(u, 0);
      }
      function I(u, m) {
        if (typeof m == "string" && x(u, m)) return u[m];
        if (!m) return u;
        if (typeof m != "string") {
          for (var v = [], w = 0, C = m.length; w < C; ++w) {
            var j = I(u, m[w]);
            v.push(j);
          }
          return v;
        }
        var A = m.indexOf(".");
        if (A !== -1) {
          var O = u[m.substr(0, A)];
          return O == null ? void 0 : I(O, m.substr(A + 1));
        }
      }
      function J(u, m, v) {
        if (u && m !== void 0 && !("isFrozen" in Object && Object.isFrozen(u))) if (typeof m != "string" && "length" in m) {
          _e(typeof v != "string" && "length" in v);
          for (var w = 0, C = m.length; w < C; ++w) J(u, m[w], v[w]);
        } else {
          var j, A, O = m.indexOf(".");
          O !== -1 ? (j = m.substr(0, O), (A = m.substr(O + 1)) === "" ? v === void 0 ? g(u) && !isNaN(parseInt(j)) ? u.splice(j, 1) : delete u[j] : u[j] = v : J(O = !(O = u[j]) || !x(u, j) ? u[j] = {} : O, A, v)) : v === void 0 ? g(u) && !isNaN(parseInt(m)) ? u.splice(m, 1) : delete u[m] : u[m] = v;
        }
      }
      function De(u) {
        var m, v = {};
        for (m in u) x(u, m) && (v[m] = u[m]);
        return v;
      }
      var He = [].concat;
      function W(u) {
        return He.apply([], u);
      }
      var de = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8, 16, 32, 64].map(function(u) {
        return ["Int", "Uint", "Float"].map(function(m) {
          return m + u + "Array";
        });
      }))).filter(function(u) {
        return c[u];
      }), Q = new Set(de.map(function(u) {
        return c[u];
      })), ye = null;
      function Be(u) {
        return ye = /* @__PURE__ */ new WeakMap(), u = (function m(v) {
          if (!v || typeof v != "object") return v;
          var w = ye.get(v);
          if (w) return w;
          if (g(v)) {
            w = [], ye.set(v, w);
            for (var C = 0, j = v.length; C < j; ++C) w.push(m(v[C]));
          } else if (Q.has(v.constructor)) w = v;
          else {
            var A, O = b(v);
            for (A in w = O === Object.prototype ? {} : Object.create(O), ye.set(v, w), v) x(v, A) && (w[A] = m(v[A]));
          }
          return w;
        })(u), ye = null, u;
      }
      var Me = {}.toString;
      function ke(u) {
        return Me.call(u).slice(8, -1);
      }
      var ee = typeof Symbol < "u" ? Symbol.iterator : "@@iterator", ve = typeof ee == "symbol" ? function(u) {
        var m;
        return u != null && (m = u[ee]) && m.apply(u);
      } : function() {
        return null;
      };
      function Ie(u, m) {
        return m = u.indexOf(m), 0 <= m && u.splice(m, 1), 0 <= m;
      }
      var Pe = {};
      function M(u) {
        var m, v, w, C;
        if (arguments.length === 1) {
          if (g(u)) return u.slice();
          if (this === Pe && typeof u == "string") return [u];
          if (C = ve(u)) {
            for (v = []; !(w = C.next()).done; ) v.push(w.value);
            return v;
          }
          if (u == null) return [u];
          if (typeof (m = u.length) != "number") return [u];
          for (v = new Array(m); m--; ) v[m] = u[m];
          return v;
        }
        for (m = arguments.length, v = new Array(m); m--; ) v[m] = arguments[m];
        return v;
      }
      var B = typeof Symbol < "u" ? function(u) {
        return u[Symbol.toStringTag] === "AsyncFunction";
      } : function() {
        return !1;
      }, ii = ["Unknown", "Constraint", "Data", "TransactionInactive", "ReadOnly", "Version", "NotFound", "InvalidState", "InvalidAccess", "Abort", "Timeout", "QuotaExceeded", "Syntax", "DataClone"], Bn = ["Modify", "Bulk", "OpenFailed", "VersionChange", "Schema", "Upgrade", "InvalidTable", "MissingAPI", "NoSuchDatabase", "InvalidArgument", "SubTransaction", "Unsupported", "Internal", "DatabaseClosed", "PrematureCommit", "ForeignAwait"].concat(ii), he = { VersionChanged: "Database version changed by other database connection", DatabaseClosed: "Database has been closed", Abort: "Transaction aborted", TransactionInactive: "Transaction has already completed or failed", MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb" };
      function z(u, m) {
        this.name = u, this.message = m;
      }
      function ue(u, m) {
        return u + ". Errors: " + Object.keys(m).map(function(v) {
          return m[v].toString();
        }).filter(function(v, w, C) {
          return C.indexOf(v) === w;
        }).join(`
`);
      }
      function me(u, m, v, w) {
        this.failures = m, this.failedKeys = w, this.successCount = v, this.message = ue(u, m);
      }
      function Se(u, m) {
        this.name = "BulkError", this.failures = Object.keys(m).map(function(v) {
          return m[v];
        }), this.failuresByPos = m, this.message = ue(u, this.failures);
      }
      U(z).from(Error).extend({ toString: function() {
        return this.name + ": " + this.message;
      } }), U(me).from(z), U(Se).from(z);
      var $e = Bn.reduce(function(u, m) {
        return u[m] = m + "Error", u;
      }, {}), ut = z, Ne = Bn.reduce(function(u, m) {
        var v = m + "Error";
        function w(C, j) {
          this.name = v, C ? typeof C == "string" ? (this.message = "".concat(C).concat(j ? `
 ` + j : ""), this.inner = j || null) : typeof C == "object" && (this.message = "".concat(C.name, " ").concat(C.message), this.inner = C) : (this.message = he[m] || v, this.inner = null);
        }
        return U(w).from(ut), u[m] = w, u;
      }, {});
      Ne.Syntax = SyntaxError, Ne.Type = TypeError, Ne.Range = RangeError;
      var xn = ii.reduce(function(u, m) {
        return u[m + "Error"] = Ne[m], u;
      }, {}), qn = Bn.reduce(function(u, m) {
        return ["Syntax", "Type", "Range"].indexOf(m) === -1 && (u[m + "Error"] = Ne[m]), u;
      }, {});
      function bt() {
      }
      function Rr(u) {
        return u;
      }
      function _r(u, m) {
        return u == null || u === Rr ? m : function(v) {
          return m(u(v));
        };
      }
      function Hn(u, m) {
        return function() {
          u.apply(this, arguments), m.apply(this, arguments);
        };
      }
      function Bi(u, m) {
        return u === bt ? m : function() {
          var v = u.apply(this, arguments);
          v !== void 0 && (arguments[0] = v);
          var w = this.onsuccess, C = this.onerror;
          this.onsuccess = null, this.onerror = null;
          var j = m.apply(this, arguments);
          return w && (this.onsuccess = this.onsuccess ? Hn(w, this.onsuccess) : w), C && (this.onerror = this.onerror ? Hn(C, this.onerror) : C), j !== void 0 ? j : v;
        };
      }
      function fl(u, m) {
        return u === bt ? m : function() {
          u.apply(this, arguments);
          var v = this.onsuccess, w = this.onerror;
          this.onsuccess = this.onerror = null, m.apply(this, arguments), v && (this.onsuccess = this.onsuccess ? Hn(v, this.onsuccess) : v), w && (this.onerror = this.onerror ? Hn(w, this.onerror) : w);
        };
      }
      function dl(u, m) {
        return u === bt ? m : function(v) {
          var w = u.apply(this, arguments);
          y(v, w);
          var C = this.onsuccess, j = this.onerror;
          return this.onsuccess = null, this.onerror = null, v = m.apply(this, arguments), C && (this.onsuccess = this.onsuccess ? Hn(C, this.onsuccess) : C), j && (this.onerror = this.onerror ? Hn(j, this.onerror) : j), w === void 0 ? v === void 0 ? void 0 : v : y(w, v);
        };
      }
      function Ui(u, m) {
        return u === bt ? m : function() {
          return m.apply(this, arguments) !== !1 && u.apply(this, arguments);
        };
      }
      function Lr(u, m) {
        return u === bt ? m : function() {
          var v = u.apply(this, arguments);
          if (v && typeof v.then == "function") {
            for (var w = this, C = arguments.length, j = new Array(C); C--; ) j[C] = arguments[C];
            return v.then(function() {
              return m.apply(w, j);
            });
          }
          return m.apply(this, arguments);
        };
      }
      qn.ModifyError = me, qn.DexieError = z, qn.BulkError = Se;
      var jn = typeof location < "u" && /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
      function hl(u) {
        jn = u;
      }
      var ri = {}, dn = 100, de = typeof Promise > "u" ? [] : (function() {
        var u = Promise.resolve();
        if (typeof crypto > "u" || !crypto.subtle) return [u, b(u), u];
        var m = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
        return [m, b(m), u];
      })(), ii = de[0], Bn = de[1], de = de[2], Bn = Bn && Bn.then, Te = ii && ii.constructor, Qe = !!de, rt = function(u, m) {
        Pn.push([u, m]), hn && (queueMicrotask(Zs), hn = !1);
      }, xt = !0, hn = !0, vn = [], Jt = [], Vt = Rr, Kt = { id: "global", global: !0, ref: 0, unhandleds: [], onunhandled: bt, pgp: !1, env: {}, finalize: bt }, Oe = Kt, Pn = [], cn = 0, ml = [];
      function Ue(u) {
        if (typeof this != "object") throw new TypeError("Promises must be constructed via new");
        this._listeners = [], this._lib = !1;
        var m = this._PSD = Oe;
        if (typeof u != "function") {
          if (u !== ri) throw new TypeError("Not a function");
          return this._state = arguments[1], this._value = arguments[2], void (this._state === !1 && jr(this, this._value));
        }
        this._state = null, this._value = null, ++m.ref, (function v(w, C) {
          try {
            C(function(j) {
              if (w._state === null) {
                if (j === w) throw new TypeError("A promise cannot be resolved with itself.");
                var A = w._lib && Br();
                j && typeof j.then == "function" ? v(w, function(O, q) {
                  j instanceof Ue ? j._then(O, q) : j.then(O, q);
                }) : (w._state = !0, w._value = j, _a(w)), A && hr();
              }
            }, jr.bind(null, w));
          } catch (j) {
            jr(w, j);
          }
        })(this, u);
      }
      var Ii = { get: function() {
        var u = Oe, m = Na;
        function v(w, C) {
          var j = this, A = !u.global && (u !== Oe || m !== Na), O = A && !Rn(), q = new Ue(function(H, $) {
            ai(j, new Ea(pl(w, u, A, O), pl(C, u, A, O), H, $, u));
          });
          return this._consoleTask && (q._consoleTask = this._consoleTask), q;
        }
        return v.prototype = ri, v;
      }, set: function(u) {
        N(this, "then", u && u.prototype === ri ? Ii : { get: function() {
          return u;
        }, set: Ii.set });
      } };
      function Ea(u, m, v, w, C) {
        this.onFulfilled = typeof u == "function" ? u : null, this.onRejected = typeof m == "function" ? m : null, this.resolve = v, this.reject = w, this.psd = C;
      }
      function jr(u, m) {
        var v, w;
        Jt.push(m), u._state === null && (v = u._lib && Br(), m = Vt(m), u._state = !1, u._value = m, w = u, vn.some(function(C) {
          return C._value === w._value;
        }) || vn.push(w), _a(u), v && hr());
      }
      function _a(u) {
        var m = u._listeners;
        u._listeners = [];
        for (var v = 0, w = m.length; v < w; ++v) ai(u, m[v]);
        var C = u._PSD;
        --C.ref || C.finalize(), cn === 0 && (++cn, rt(function() {
          --cn == 0 && Co();
        }, []));
      }
      function ai(u, m) {
        if (u._state !== null) {
          var v = u._state ? m.onFulfilled : m.onRejected;
          if (v === null) return (u._state ? m.resolve : m.reject)(u._value);
          ++m.psd.ref, ++cn, rt(Qc, [v, u, m]);
        } else u._listeners.push(m);
      }
      function Qc(u, m, v) {
        try {
          var w, C = m._value;
          !m._state && Jt.length && (Jt = []), w = jn && m._consoleTask ? m._consoleTask.run(function() {
            return u(C);
          }) : u(C), m._state || Jt.indexOf(C) !== -1 || (function(j) {
            for (var A = vn.length; A; ) if (vn[--A]._value === j._value) return vn.splice(A, 1);
          })(m), v.resolve(w);
        } catch (j) {
          v.reject(j);
        } finally {
          --cn == 0 && Co(), --v.psd.ref || v.psd.finalize();
        }
      }
      function Zs() {
        er(Kt, function() {
          Br() && hr();
        });
      }
      function Br() {
        var u = xt;
        return hn = xt = !1, u;
      }
      function hr() {
        var u, m, v;
        do
          for (; 0 < Pn.length; ) for (u = Pn, Pn = [], v = u.length, m = 0; m < v; ++m) {
            var w = u[m];
            w[0].apply(null, w[1]);
          }
        while (0 < Pn.length);
        hn = xt = !0;
      }
      function Co() {
        var u = vn;
        vn = [], u.forEach(function(w) {
          w._PSD.onunhandled.call(null, w._value, w);
        });
        for (var m = ml.slice(0), v = m.length; v; ) m[--v]();
      }
      function ja(u) {
        return new Ue(ri, !1, u);
      }
      function Mt(u, m) {
        var v = Oe;
        return function() {
          var w = Br(), C = Oe;
          try {
            return Ir(v, !0), u.apply(this, arguments);
          } catch (j) {
            m && m(j);
          } finally {
            Ir(C, !1), w && hr();
          }
        };
      }
      _(Ue.prototype, { then: Ii, _then: function(u, m) {
        ai(this, new Ea(null, null, u, m, Oe));
      }, catch: function(u) {
        if (arguments.length === 1) return this.then(null, u);
        var m = u, v = arguments[1];
        return typeof m == "function" ? this.then(null, function(w) {
          return (w instanceof m ? v : ja)(w);
        }) : this.then(null, function(w) {
          return (w && w.name === m ? v : ja)(w);
        });
      }, finally: function(u) {
        return this.then(function(m) {
          return Ue.resolve(u()).then(function() {
            return m;
          });
        }, function(m) {
          return Ue.resolve(u()).then(function() {
            return ja(m);
          });
        });
      }, timeout: function(u, m) {
        var v = this;
        return u < 1 / 0 ? new Ue(function(w, C) {
          var j = setTimeout(function() {
            return C(new Ne.Timeout(m));
          }, u);
          v.then(w, C).finally(clearTimeout.bind(null, j));
        }) : this;
      } }), typeof Symbol < "u" && Symbol.toStringTag && N(Ue.prototype, Symbol.toStringTag, "Dexie.Promise"), Kt.env = _o(), _(Ue, { all: function() {
        var u = M.apply(null, arguments).map(Hi);
        return new Ue(function(m, v) {
          u.length === 0 && m([]);
          var w = u.length;
          u.forEach(function(C, j) {
            return Ue.resolve(C).then(function(A) {
              u[j] = A, --w || m(u);
            }, v);
          });
        });
      }, resolve: function(u) {
        return u instanceof Ue ? u : u && typeof u.then == "function" ? new Ue(function(m, v) {
          u.then(m, v);
        }) : new Ue(ri, !0, u);
      }, reject: ja, race: function() {
        var u = M.apply(null, arguments).map(Hi);
        return new Ue(function(m, v) {
          u.map(function(w) {
            return Ue.resolve(w).then(m, v);
          });
        });
      }, PSD: { get: function() {
        return Oe;
      }, set: function(u) {
        return Oe = u;
      } }, totalEchoes: { get: function() {
        return Na;
      } }, newPSD: Rt, usePSD: er, scheduler: { get: function() {
        return rt;
      }, set: function(u) {
        rt = u;
      } }, rejectionMapper: { get: function() {
        return Vt;
      }, set: function(u) {
        Vt = u;
      } }, follow: function(u, m) {
        return new Ue(function(v, w) {
          return Rt(function(C, j) {
            var A = Oe;
            A.unhandleds = [], A.onunhandled = j, A.finalize = Hn(function() {
              var O, q = this;
              O = function() {
                q.unhandleds.length === 0 ? C() : j(q.unhandleds[0]);
              }, ml.push(function H() {
                O(), ml.splice(ml.indexOf(H), 1);
              }), ++cn, rt(function() {
                --cn == 0 && Co();
              }, []);
            }, A.finalize), u();
          }, m, v, w);
        });
      } }), Te && (Te.allSettled && N(Ue, "allSettled", function() {
        var u = M.apply(null, arguments).map(Hi);
        return new Ue(function(m) {
          u.length === 0 && m([]);
          var v = u.length, w = new Array(v);
          u.forEach(function(C, j) {
            return Ue.resolve(C).then(function(A) {
              return w[j] = { status: "fulfilled", value: A };
            }, function(A) {
              return w[j] = { status: "rejected", reason: A };
            }).then(function() {
              return --v || m(w);
            });
          });
        });
      }), Te.any && typeof AggregateError < "u" && N(Ue, "any", function() {
        var u = M.apply(null, arguments).map(Hi);
        return new Ue(function(m, v) {
          u.length === 0 && v(new AggregateError([]));
          var w = u.length, C = new Array(w);
          u.forEach(function(j, A) {
            return Ue.resolve(j).then(function(O) {
              return m(O);
            }, function(O) {
              C[A] = O, --w || v(new AggregateError(C));
            });
          });
        });
      }), Te.withResolvers && (Ue.withResolvers = Te.withResolvers));
      var Yt = { awaits: 0, echoes: 0, id: 0 }, Eo = 0, qi = [], Ta = 0, Na = 0, Ur = 0;
      function Rt(u, m, v, w) {
        var C = Oe, j = Object.create(C);
        return j.parent = C, j.ref = 0, j.global = !1, j.id = ++Ur, Kt.env, j.env = Qe ? { Promise: Ue, PromiseProp: { value: Ue, configurable: !0, writable: !0 }, all: Ue.all, race: Ue.race, allSettled: Ue.allSettled, any: Ue.any, resolve: Ue.resolve, reject: Ue.reject } : {}, m && y(j, m), ++C.ref, j.finalize = function() {
          --this.parent.ref || this.parent.finalize();
        }, w = er(j, u, v, w), j.ref === 0 && j.finalize(), w;
      }
      function Xt() {
        return Yt.id || (Yt.id = ++Eo), ++Yt.awaits, Yt.echoes += dn, Yt.id;
      }
      function Rn() {
        return !!Yt.awaits && (--Yt.awaits == 0 && (Yt.id = 0), Yt.echoes = Yt.awaits * dn, !0);
      }
      function Hi(u) {
        return Yt.echoes && u && u.constructor === Te ? (Xt(), u.then(function(m) {
          return Rn(), m;
        }, function(m) {
          return Rn(), Tt(m);
        })) : u;
      }
      function Zc() {
        var u = qi[qi.length - 1];
        qi.pop(), Ir(u, !1);
      }
      function Ir(u, m) {
        var v, w = Oe;
        (m ? !Yt.echoes || Ta++ && u === Oe : !Ta || --Ta && u === Oe) || queueMicrotask(m ? (function(C) {
          ++Na, Yt.echoes && --Yt.echoes != 0 || (Yt.echoes = Yt.awaits = Yt.id = 0), qi.push(Oe), Ir(C, !0);
        }).bind(null, u) : Zc), u !== Oe && (Oe = u, w === Kt && (Kt.env = _o()), Qe && (v = Kt.env.Promise, m = u.env, (w.global || u.global) && (Object.defineProperty(c, "Promise", m.PromiseProp), v.all = m.all, v.race = m.race, v.resolve = m.resolve, v.reject = m.reject, m.allSettled && (v.allSettled = m.allSettled), m.any && (v.any = m.any))));
      }
      function _o() {
        var u = c.Promise;
        return Qe ? { Promise: u, PromiseProp: Object.getOwnPropertyDescriptor(c, "Promise"), all: u.all, race: u.race, allSettled: u.allSettled, any: u.any, resolve: u.resolve, reject: u.reject } : {};
      }
      function er(u, m, v, w, C) {
        var j = Oe;
        try {
          return Ir(u, !0), m(v, w, C);
        } finally {
          Ir(j, !1);
        }
      }
      function pl(u, m, v, w) {
        return typeof u != "function" ? u : function() {
          var C = Oe;
          v && Xt(), Ir(m, !0);
          try {
            return u.apply(this, arguments);
          } finally {
            Ir(C, !1), w && queueMicrotask(Rn);
          }
        };
      }
      function qr(u) {
        Promise === Te && Yt.echoes === 0 ? Ta === 0 ? u() : enqueueNativeMicroTask(u) : setTimeout(u, 0);
      }
      ("" + Bn).indexOf("[native code]") === -1 && (Xt = Rn = bt);
      var Tt = Ue.reject, tr = "", Tn = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.", Qt = "String expected.", li = [], Aa = "__dbnames", Tr = "readonly", Hr = "readwrite";
      function oi(u, m) {
        return u ? m ? function() {
          return u.apply(this, arguments) && m.apply(this, arguments);
        } : u : m;
      }
      var jo = { type: 3, lower: -1 / 0, lowerOpen: !1, upper: [[]], upperOpen: !1 };
      function za(u) {
        return typeof u != "string" || /\./.test(u) ? function(m) {
          return m;
        } : function(m) {
          return m[u] === void 0 && u in m && delete (m = Be(m))[u], m;
        };
      }
      function Ws() {
        throw Ne.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.");
      }
      function st(u, m) {
        try {
          var v = Ma(u), w = Ma(m);
          if (v !== w) return v === "Array" ? 1 : w === "Array" ? -1 : v === "binary" ? 1 : w === "binary" ? -1 : v === "string" ? 1 : w === "string" ? -1 : v === "Date" ? 1 : w !== "Date" ? NaN : -1;
          switch (v) {
            case "number":
            case "Date":
            case "string":
              return m < u ? 1 : u < m ? -1 : 0;
            case "binary":
              return (function(C, j) {
                for (var A = C.length, O = j.length, q = A < O ? A : O, H = 0; H < q; ++H) if (C[H] !== j[H]) return C[H] < j[H] ? -1 : 1;
                return A === O ? 0 : A < O ? -1 : 1;
              })(mr(u), mr(m));
            case "Array":
              return (function(C, j) {
                for (var A = C.length, O = j.length, q = A < O ? A : O, H = 0; H < q; ++H) {
                  var $ = st(C[H], j[H]);
                  if ($ !== 0) return $;
                }
                return A === O ? 0 : A < O ? -1 : 1;
              })(u, m);
          }
        } catch {
        }
        return NaN;
      }
      function Ma(u) {
        var m = typeof u;
        return m != "object" ? m : ArrayBuffer.isView(u) ? "binary" : (u = ke(u), u === "ArrayBuffer" ? "binary" : u);
      }
      function mr(u) {
        return u instanceof Uint8Array ? u : ArrayBuffer.isView(u) ? new Uint8Array(u.buffer, u.byteOffset, u.byteLength) : new Uint8Array(u);
      }
      function Sn(u, m, v) {
        var w = u.schema.yProps;
        return w ? (m && 0 < v.numFailures && (m = m.filter(function(C, j) {
          return !v.failures[j];
        })), Promise.all(w.map(function(C) {
          return C = C.updatesTable, m ? u.db.table(C).where("k").anyOf(m).delete() : u.db.table(C).clear();
        })).then(function() {
          return v;
        })) : v;
      }
      var Pi = (Js.prototype.execute = function(u) {
        var m = this["@@propmod"];
        if (m.add !== void 0) {
          var v = m.add;
          if (g(v)) return s(s([], g(u) ? u : [], !0), v).sort();
          if (typeof v == "number") return (Number(u) || 0) + v;
          if (typeof v == "bigint") try {
            return BigInt(u) + v;
          } catch {
            return BigInt(0) + v;
          }
          throw new TypeError("Invalid term ".concat(v));
        }
        if (m.remove !== void 0) {
          var w = m.remove;
          if (g(w)) return g(u) ? u.filter(function(C) {
            return !w.includes(C);
          }).sort() : [];
          if (typeof w == "number") return Number(u) - w;
          if (typeof w == "bigint") try {
            return BigInt(u) - w;
          } catch {
            return BigInt(0) - w;
          }
          throw new TypeError("Invalid subtrahend ".concat(w));
        }
        return v = (v = m.replacePrefix) === null || v === void 0 ? void 0 : v[0], v && typeof u == "string" && u.startsWith(v) ? m.replacePrefix[1] + u.substring(v.length) : u;
      }, Js);
      function Js(u) {
        this["@@propmod"] = u;
      }
      function gl(u, m) {
        for (var v = f(m), w = v.length, C = !1, j = 0; j < w; ++j) {
          var A = v[j], O = m[A], q = I(u, A);
          O instanceof Pi ? (J(u, A, O.execute(q)), C = !0) : q !== O && (J(u, A, O), C = !0);
        }
        return C;
      }
      var To = (Ct.prototype._trans = function(u, m, v) {
        var w = this._tx || Oe.trans, C = this.name, j = jn && typeof console < "u" && console.createTask && console.createTask("Dexie: ".concat(u === "readonly" ? "read" : "write", " ").concat(this.name));
        function A(H, $, L) {
          if (!L.schema[C]) throw new Ne.NotFound("Table " + C + " not part of transaction");
          return m(L.idbtrans, L);
        }
        var O = Br();
        try {
          var q = w && w.db._novip === this.db._novip ? w === Oe.trans ? w._promise(u, A, v) : Rt(function() {
            return w._promise(u, A, v);
          }, { trans: w, transless: Oe.transless || Oe }) : (function H($, L, X, P) {
            if ($.idbdb && ($._state.openComplete || Oe.letThrough || $._vip)) {
              var V = $._createTransaction(L, X, $._dbSchema);
              try {
                V.create(), $._state.PR1398_maxLoop = 3;
              } catch (K) {
                return K.name === $e.InvalidState && $.isOpen() && 0 < --$._state.PR1398_maxLoop ? (console.warn("Dexie: Need to reopen db"), $.close({ disableAutoOpen: !1 }), $.open().then(function() {
                  return H($, L, X, P);
                })) : Tt(K);
              }
              return V._promise(L, function(K, Y) {
                return Rt(function() {
                  return Oe.trans = V, P(K, Y, V);
                });
              }).then(function(K) {
                if (L === "readwrite") try {
                  V.idbtrans.commit();
                } catch {
                }
                return L === "readonly" ? K : V._completion.then(function() {
                  return K;
                });
              });
            }
            if ($._state.openComplete) return Tt(new Ne.DatabaseClosed($._state.dbOpenError));
            if (!$._state.isBeingOpened) {
              if (!$._state.autoOpen) return Tt(new Ne.DatabaseClosed());
              $.open().catch(bt);
            }
            return $._state.dbReadyPromise.then(function() {
              return H($, L, X, P);
            });
          })(this.db, u, [this.name], A);
          return j && (q._consoleTask = j, q = q.catch(function(H) {
            return console.trace(H), Tt(H);
          })), q;
        } finally {
          O && hr();
        }
      }, Ct.prototype.get = function(u, m) {
        var v = this;
        return u && u.constructor === Object ? this.where(u).first(m) : u == null ? Tt(new Ne.Type("Invalid argument to Table.get()")) : this._trans("readonly", function(w) {
          return v.core.get({ trans: w, key: u }).then(function(C) {
            return v.hook.reading.fire(C);
          });
        }).then(m);
      }, Ct.prototype.where = function(u) {
        if (typeof u == "string") return new this.db.WhereClause(this, u);
        if (g(u)) return new this.db.WhereClause(this, "[".concat(u.join("+"), "]"));
        var m = f(u);
        if (m.length === 1) return this.where(m[0]).equals(u[m[0]]);
        var v = this.schema.indexes.concat(this.schema.primKey).filter(function(O) {
          if (O.compound && m.every(function(H) {
            return 0 <= O.keyPath.indexOf(H);
          })) {
            for (var q = 0; q < m.length; ++q) if (m.indexOf(O.keyPath[q]) === -1) return !1;
            return !0;
          }
          return !1;
        }).sort(function(O, q) {
          return O.keyPath.length - q.keyPath.length;
        })[0];
        if (v && this.db._maxKey !== tr) {
          var j = v.keyPath.slice(0, m.length);
          return this.where(j).equals(j.map(function(q) {
            return u[q];
          }));
        }
        !v && jn && console.warn("The query ".concat(JSON.stringify(u), " on ").concat(this.name, " would benefit from a ") + "compound index [".concat(m.join("+"), "]"));
        var w = this.schema.idxByName;
        function C(O, q) {
          return st(O, q) === 0;
        }
        var A = m.reduce(function(L, q) {
          var H = L[0], $ = L[1], L = w[q], X = u[q];
          return [H || L, H || !L ? oi($, L && L.multi ? function(P) {
            return P = I(P, q), g(P) && P.some(function(V) {
              return C(X, V);
            });
          } : function(P) {
            return C(X, I(P, q));
          }) : $];
        }, [null, null]), j = A[0], A = A[1];
        return j ? this.where(j.name).equals(u[j.keyPath]).filter(A) : v ? this.filter(A) : this.where(m).equals("");
      }, Ct.prototype.filter = function(u) {
        return this.toCollection().and(u);
      }, Ct.prototype.count = function(u) {
        return this.toCollection().count(u);
      }, Ct.prototype.offset = function(u) {
        return this.toCollection().offset(u);
      }, Ct.prototype.limit = function(u) {
        return this.toCollection().limit(u);
      }, Ct.prototype.each = function(u) {
        return this.toCollection().each(u);
      }, Ct.prototype.toArray = function(u) {
        return this.toCollection().toArray(u);
      }, Ct.prototype.toCollection = function() {
        return new this.db.Collection(new this.db.WhereClause(this));
      }, Ct.prototype.orderBy = function(u) {
        return new this.db.Collection(new this.db.WhereClause(this, g(u) ? "[".concat(u.join("+"), "]") : u));
      }, Ct.prototype.reverse = function() {
        return this.toCollection().reverse();
      }, Ct.prototype.mapToClass = function(u) {
        var m, v = this.db, w = this.name;
        function C() {
          return m !== null && m.apply(this, arguments) || this;
        }
        (this.schema.mappedClass = u).prototype instanceof Ws && ((function(q, H) {
          if (typeof H != "function" && H !== null) throw new TypeError("Class extends value " + String(H) + " is not a constructor or null");
          function $() {
            this.constructor = q;
          }
          i(q, H), q.prototype = H === null ? Object.create(H) : ($.prototype = H.prototype, new $());
        })(C, m = u), Object.defineProperty(C.prototype, "db", { get: function() {
          return v;
        }, enumerable: !1, configurable: !0 }), C.prototype.table = function() {
          return w;
        }, u = C);
        for (var j = /* @__PURE__ */ new Set(), A = u.prototype; A; A = b(A)) Object.getOwnPropertyNames(A).forEach(function(q) {
          return j.add(q);
        });
        function O(q) {
          if (!q) return q;
          var H, $ = Object.create(u.prototype);
          for (H in q) if (!j.has(H)) try {
            $[H] = q[H];
          } catch {
          }
          return $;
        }
        return this.schema.readHook && this.hook.reading.unsubscribe(this.schema.readHook), this.schema.readHook = O, this.hook("reading", O), u;
      }, Ct.prototype.defineClass = function() {
        return this.mapToClass(function(u) {
          y(this, u);
        });
      }, Ct.prototype.add = function(u, m) {
        var v = this, w = this.schema.primKey, C = w.auto, j = w.keyPath, A = u;
        return j && C && (A = za(j)(u)), this._trans("readwrite", function(O) {
          return v.core.mutate({ trans: O, type: "add", keys: m != null ? [m] : null, values: [A] });
        }).then(function(O) {
          return O.numFailures ? Ue.reject(O.failures[0]) : O.lastResult;
        }).then(function(O) {
          if (j) try {
            J(u, j, O);
          } catch {
          }
          return O;
        });
      }, Ct.prototype.upsert = function(u, m) {
        var v = this, w = this.schema.primKey.keyPath;
        return this._trans("readwrite", function(C) {
          return v.core.get({ trans: C, key: u }).then(function(j) {
            var A = j ?? {};
            return gl(A, m), w && J(A, w, u), v.core.mutate({ trans: C, type: "put", values: [A], keys: [u], upsert: !0, updates: { keys: [u], changeSpecs: [m] } }).then(function(O) {
              return O.numFailures ? Ue.reject(O.failures[0]) : !!j;
            });
          });
        });
      }, Ct.prototype.update = function(u, m) {
        return typeof u != "object" || g(u) ? this.where(":id").equals(u).modify(m) : (u = I(u, this.schema.primKey.keyPath), u === void 0 ? Tt(new Ne.InvalidArgument("Given object does not contain its primary key")) : this.where(":id").equals(u).modify(m));
      }, Ct.prototype.put = function(u, m) {
        var v = this, w = this.schema.primKey, C = w.auto, j = w.keyPath, A = u;
        return j && C && (A = za(j)(u)), this._trans("readwrite", function(O) {
          return v.core.mutate({ trans: O, type: "put", values: [A], keys: m != null ? [m] : null });
        }).then(function(O) {
          return O.numFailures ? Ue.reject(O.failures[0]) : O.lastResult;
        }).then(function(O) {
          if (j) try {
            J(u, j, O);
          } catch {
          }
          return O;
        });
      }, Ct.prototype.delete = function(u) {
        var m = this;
        return this._trans("readwrite", function(v) {
          return m.core.mutate({ trans: v, type: "delete", keys: [u] }).then(function(w) {
            return Sn(m, [u], w);
          }).then(function(w) {
            return w.numFailures ? Ue.reject(w.failures[0]) : void 0;
          });
        });
      }, Ct.prototype.clear = function() {
        var u = this;
        return this._trans("readwrite", function(m) {
          return u.core.mutate({ trans: m, type: "deleteRange", range: jo }).then(function(v) {
            return Sn(u, null, v);
          });
        }).then(function(m) {
          return m.numFailures ? Ue.reject(m.failures[0]) : void 0;
        });
      }, Ct.prototype.bulkGet = function(u) {
        var m = this;
        return this._trans("readonly", function(v) {
          return m.core.getMany({ keys: u, trans: v }).then(function(w) {
            return w.map(function(C) {
              return m.hook.reading.fire(C);
            });
          });
        });
      }, Ct.prototype.bulkAdd = function(u, m, v) {
        var w = this, C = Array.isArray(m) ? m : void 0, j = (v = v || (C ? void 0 : m)) ? v.allKeys : void 0;
        return this._trans("readwrite", function(A) {
          var H = w.schema.primKey, O = H.auto, H = H.keyPath;
          if (H && C) throw new Ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
          if (C && C.length !== u.length) throw new Ne.InvalidArgument("Arguments objects and keys must have the same length");
          var q = u.length, H = H && O ? u.map(za(H)) : u;
          return w.core.mutate({ trans: A, type: "add", keys: C, values: H, wantResults: j }).then(function(V) {
            var L = V.numFailures, X = V.results, P = V.lastResult, V = V.failures;
            if (L === 0) return j ? X : P;
            throw new Se("".concat(w.name, ".bulkAdd(): ").concat(L, " of ").concat(q, " operations failed"), V);
          });
        });
      }, Ct.prototype.bulkPut = function(u, m, v) {
        var w = this, C = Array.isArray(m) ? m : void 0, j = (v = v || (C ? void 0 : m)) ? v.allKeys : void 0;
        return this._trans("readwrite", function(A) {
          var H = w.schema.primKey, O = H.auto, H = H.keyPath;
          if (H && C) throw new Ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
          if (C && C.length !== u.length) throw new Ne.InvalidArgument("Arguments objects and keys must have the same length");
          var q = u.length, H = H && O ? u.map(za(H)) : u;
          return w.core.mutate({ trans: A, type: "put", keys: C, values: H, wantResults: j }).then(function(V) {
            var L = V.numFailures, X = V.results, P = V.lastResult, V = V.failures;
            if (L === 0) return j ? X : P;
            throw new Se("".concat(w.name, ".bulkPut(): ").concat(L, " of ").concat(q, " operations failed"), V);
          });
        });
      }, Ct.prototype.bulkUpdate = function(u) {
        var m = this, v = this.core, w = u.map(function(A) {
          return A.key;
        }), C = u.map(function(A) {
          return A.changes;
        }), j = [];
        return this._trans("readwrite", function(A) {
          return v.getMany({ trans: A, keys: w, cache: "clone" }).then(function(O) {
            var q = [], H = [];
            u.forEach(function(L, X) {
              var P = L.key, V = L.changes, K = O[X];
              if (K) {
                for (var Y = 0, te = Object.keys(V); Y < te.length; Y++) {
                  var le = te[Y], fe = V[le];
                  if (le === m.schema.primKey.keyPath) {
                    if (st(fe, P) !== 0) throw new Ne.Constraint("Cannot update primary key in bulkUpdate()");
                  } else J(K, le, fe);
                }
                j.push(X), q.push(P), H.push(K);
              }
            });
            var $ = q.length;
            return v.mutate({ trans: A, type: "put", keys: q, values: H, updates: { keys: w, changeSpecs: C } }).then(function(L) {
              var X = L.numFailures, P = L.failures;
              if (X === 0) return $;
              for (var V = 0, K = Object.keys(P); V < K.length; V++) {
                var Y, te = K[V], le = j[Number(te)];
                le != null && (Y = P[te], delete P[te], P[le] = Y);
              }
              throw new Se("".concat(m.name, ".bulkUpdate(): ").concat(X, " of ").concat($, " operations failed"), P);
            });
          });
        });
      }, Ct.prototype.bulkDelete = function(u) {
        var m = this, v = u.length;
        return this._trans("readwrite", function(w) {
          return m.core.mutate({ trans: w, type: "delete", keys: u }).then(function(C) {
            return Sn(m, u, C);
          });
        }).then(function(A) {
          var C = A.numFailures, j = A.lastResult, A = A.failures;
          if (C === 0) return j;
          throw new Se("".concat(m.name, ".bulkDelete(): ").concat(C, " of ").concat(v, " operations failed"), A);
        });
      }, Ct);
      function Ct() {
      }
      function Oa(u) {
        function m(A, O) {
          if (O) {
            for (var q = arguments.length, H = new Array(q - 1); --q; ) H[q - 1] = arguments[q];
            return v[A].subscribe.apply(null, H), u;
          }
          if (typeof A == "string") return v[A];
        }
        var v = {};
        m.addEventType = j;
        for (var w = 1, C = arguments.length; w < C; ++w) j(arguments[w]);
        return m;
        function j(A, O, q) {
          if (typeof A != "object") {
            var H;
            O = O || Ui;
            var $ = { subscribers: [], fire: q = q || bt, subscribe: function(L) {
              $.subscribers.indexOf(L) === -1 && ($.subscribers.push(L), $.fire = O($.fire, L));
            }, unsubscribe: function(L) {
              $.subscribers = $.subscribers.filter(function(X) {
                return X !== L;
              }), $.fire = $.subscribers.reduce(O, q);
            } };
            return v[A] = m[A] = $;
          }
          f(H = A).forEach(function(L) {
            var X = H[L];
            if (g(X)) j(L, H[L][0], H[L][1]);
            else {
              if (X !== "asap") throw new Ne.InvalidArgument("Invalid event config");
              var P = j(L, Rr, function() {
                for (var V = arguments.length, K = new Array(V); V--; ) K[V] = arguments[V];
                P.subscribers.forEach(function(Y) {
                  we(function() {
                    Y.apply(null, K);
                  });
                });
              });
            }
          });
        }
      }
      function mn(u, m) {
        return U(m).from({ prototype: u }), m;
      }
      function Pr(u, m) {
        return !(u.filter || u.algorithm || u.or) && (m ? u.justLimit : !u.replayFilter);
      }
      function yl(u, m) {
        u.filter = oi(u.filter, m);
      }
      function Da(u, m, v) {
        var w = u.replayFilter;
        u.replayFilter = w ? function() {
          return oi(w(), m());
        } : m, u.justLimit = v && !w;
      }
      function Nr(u, m) {
        if (u.isPrimKey) return m.primaryKey;
        var v = m.getIndexByKeyPath(u.index);
        if (!v) throw new Ne.Schema("KeyPath " + u.index + " on object store " + m.name + " is not indexed");
        return v;
      }
      function No(u, m, v) {
        var w = Nr(u, m.schema);
        return m.openCursor({ trans: v, values: !u.keysOnly, reverse: u.dir === "prev", unique: !!u.unique, query: { index: w, range: u.range } });
      }
      function Ra(u, m, v, w) {
        var C = u.replayFilter ? oi(u.filter, u.replayFilter()) : u.filter;
        if (u.or) {
          var j = {}, A = function(O, q, H) {
            var $, L;
            C && !C(q, H, function(X) {
              return q.stop(X);
            }, function(X) {
              return q.fail(X);
            }) || ((L = "" + ($ = q.primaryKey)) == "[object ArrayBuffer]" && (L = "" + new Uint8Array($)), x(j, L) || (j[L] = !0, m(O, q, H)));
          };
          return Promise.all([u.or._iterate(A, v), si(No(u, w, v), u.algorithm, A, !u.keysOnly && u.valueMapper)]);
        }
        return si(No(u, w, v), oi(u.algorithm, C), m, !u.keysOnly && u.valueMapper);
      }
      function si(u, m, v, w) {
        var C = Mt(w ? function(j, A, O) {
          return v(w(j), A, O);
        } : v);
        return u.then(function(j) {
          if (j) return j.start(function() {
            var A = function() {
              return j.continue();
            };
            m && !m(j, function(O) {
              return A = O;
            }, function(O) {
              j.stop(O), A = bt;
            }, function(O) {
              j.fail(O), A = bt;
            }) || C(j.value, j, function(O) {
              return A = O;
            }), A();
          });
        });
      }
      var Wc = (gt.prototype._read = function(u, m) {
        var v = this._ctx;
        return v.error ? v.table._trans(null, Tt.bind(null, v.error)) : v.table._trans("readonly", u).then(m);
      }, gt.prototype._write = function(u) {
        var m = this._ctx;
        return m.error ? m.table._trans(null, Tt.bind(null, m.error)) : m.table._trans("readwrite", u, "locked");
      }, gt.prototype._addAlgorithm = function(u) {
        var m = this._ctx;
        m.algorithm = oi(m.algorithm, u);
      }, gt.prototype._iterate = function(u, m) {
        return Ra(this._ctx, u, m, this._ctx.table.core);
      }, gt.prototype.clone = function(u) {
        var m = Object.create(this.constructor.prototype), v = Object.create(this._ctx);
        return u && y(v, u), m._ctx = v, m;
      }, gt.prototype.raw = function() {
        return this._ctx.valueMapper = null, this;
      }, gt.prototype.each = function(u) {
        var m = this._ctx;
        return this._read(function(v) {
          return Ra(m, u, v, m.table.core);
        });
      }, gt.prototype.count = function(u) {
        var m = this;
        return this._read(function(v) {
          var w = m._ctx, C = w.table.core;
          if (Pr(w, !0)) return C.count({ trans: v, query: { index: Nr(w, C.schema), range: w.range } }).then(function(A) {
            return Math.min(A, w.limit);
          });
          var j = 0;
          return Ra(w, function() {
            return ++j, !1;
          }, v, C).then(function() {
            return j;
          });
        }).then(u);
      }, gt.prototype.sortBy = function(u, m) {
        var v = u.split(".").reverse(), w = v[0], C = v.length - 1;
        function j(q, H) {
          return H ? j(q[v[H]], H - 1) : q[w];
        }
        var A = this._ctx.dir === "next" ? 1 : -1;
        function O(q, H) {
          return st(j(q, C), j(H, C)) * A;
        }
        return this.toArray(function(q) {
          return q.sort(O);
        }).then(m);
      }, gt.prototype.toArray = function(u) {
        var m = this;
        return this._read(function(v) {
          var w = m._ctx;
          if (w.dir === "next" && Pr(w, !0) && 0 < w.limit) {
            var C = w.valueMapper, j = Nr(w, w.table.core.schema);
            return w.table.core.query({ trans: v, limit: w.limit, values: !0, query: { index: j, range: w.range } }).then(function(O) {
              return O = O.result, C ? O.map(C) : O;
            });
          }
          var A = [];
          return Ra(w, function(O) {
            return A.push(O);
          }, v, w.table.core).then(function() {
            return A;
          });
        }, u);
      }, gt.prototype.offset = function(u) {
        var m = this._ctx;
        return u <= 0 || (m.offset += u, Pr(m) ? Da(m, function() {
          var v = u;
          return function(w, C) {
            return v === 0 || (v === 1 ? --v : C(function() {
              w.advance(v), v = 0;
            }), !1);
          };
        }) : Da(m, function() {
          var v = u;
          return function() {
            return --v < 0;
          };
        })), this;
      }, gt.prototype.limit = function(u) {
        return this._ctx.limit = Math.min(this._ctx.limit, u), Da(this._ctx, function() {
          var m = u;
          return function(v, w, C) {
            return --m <= 0 && w(C), 0 <= m;
          };
        }, !0), this;
      }, gt.prototype.until = function(u, m) {
        return yl(this._ctx, function(v, w, C) {
          return !u(v.value) || (w(C), m);
        }), this;
      }, gt.prototype.first = function(u) {
        return this.limit(1).toArray(function(m) {
          return m[0];
        }).then(u);
      }, gt.prototype.last = function(u) {
        return this.reverse().first(u);
      }, gt.prototype.filter = function(u) {
        var m;
        return yl(this._ctx, function(v) {
          return u(v.value);
        }), (m = this._ctx).isMatch = oi(m.isMatch, u), this;
      }, gt.prototype.and = function(u) {
        return this.filter(u);
      }, gt.prototype.or = function(u) {
        return new this.db.WhereClause(this._ctx.table, u, this);
      }, gt.prototype.reverse = function() {
        return this._ctx.dir = this._ctx.dir === "prev" ? "next" : "prev", this._ondirectionchange && this._ondirectionchange(this._ctx.dir), this;
      }, gt.prototype.desc = function() {
        return this.reverse();
      }, gt.prototype.eachKey = function(u) {
        var m = this._ctx;
        return m.keysOnly = !m.isMatch, this.each(function(v, w) {
          u(w.key, w);
        });
      }, gt.prototype.eachUniqueKey = function(u) {
        return this._ctx.unique = "unique", this.eachKey(u);
      }, gt.prototype.eachPrimaryKey = function(u) {
        var m = this._ctx;
        return m.keysOnly = !m.isMatch, this.each(function(v, w) {
          u(w.primaryKey, w);
        });
      }, gt.prototype.keys = function(u) {
        var m = this._ctx;
        m.keysOnly = !m.isMatch;
        var v = [];
        return this.each(function(w, C) {
          v.push(C.key);
        }).then(function() {
          return v;
        }).then(u);
      }, gt.prototype.primaryKeys = function(u) {
        var m = this._ctx;
        if (m.dir === "next" && Pr(m, !0) && 0 < m.limit) return this._read(function(w) {
          var C = Nr(m, m.table.core.schema);
          return m.table.core.query({ trans: w, values: !1, limit: m.limit, query: { index: C, range: m.range } });
        }).then(function(w) {
          return w.result;
        }).then(u);
        m.keysOnly = !m.isMatch;
        var v = [];
        return this.each(function(w, C) {
          v.push(C.primaryKey);
        }).then(function() {
          return v;
        }).then(u);
      }, gt.prototype.uniqueKeys = function(u) {
        return this._ctx.unique = "unique", this.keys(u);
      }, gt.prototype.firstKey = function(u) {
        return this.limit(1).keys(function(m) {
          return m[0];
        }).then(u);
      }, gt.prototype.lastKey = function(u) {
        return this.reverse().firstKey(u);
      }, gt.prototype.distinct = function() {
        var u = this._ctx, u = u.index && u.table.schema.idxByName[u.index];
        if (!u || !u.multi) return this;
        var m = {};
        return yl(this._ctx, function(C) {
          var w = C.primaryKey.toString(), C = x(m, w);
          return m[w] = !0, !C;
        }), this;
      }, gt.prototype.modify = function(u) {
        var m = this, v = this._ctx;
        return this._write(function(w) {
          var C = typeof u == "function" ? u : function(K) {
            return gl(K, u);
          }, j = v.table.core, H = j.schema.primaryKey, A = H.outbound, O = H.extractKey, q = 200, H = m.db._options.modifyChunkSize;
          H && (q = typeof H == "object" ? H[j.name] || H["*"] || 200 : H);
          function $(K, le) {
            var te = le.failures, le = le.numFailures;
            X += K - le;
            for (var fe = 0, be = f(te); fe < be.length; fe++) {
              var Ae = be[fe];
              L.push(te[Ae]);
            }
          }
          var L = [], X = 0, P = [], V = u === Ao;
          return m.clone().primaryKeys().then(function(K) {
            function Y(le) {
              var fe = Math.min(q, K.length - le), be = K.slice(le, le + fe);
              return (V ? Promise.resolve([]) : j.getMany({ trans: w, keys: be, cache: "immutable" })).then(function(Ae) {
                var Le = [], Ce = [], ze = A ? [] : null, Re = V ? be : [];
                if (!V) for (var Ee = 0; Ee < fe; ++Ee) {
                  var qe = Ae[Ee], Ye = { value: Be(qe), primKey: K[le + Ee] };
                  C.call(Ye, Ye.value, Ye) !== !1 && (Ye.value == null ? Re.push(K[le + Ee]) : A || st(O(qe), O(Ye.value)) === 0 ? (Ce.push(Ye.value), A && ze.push(K[le + Ee])) : (Re.push(K[le + Ee]), Le.push(Ye.value)));
                }
                return Promise.resolve(0 < Le.length && j.mutate({ trans: w, type: "add", values: Le }).then(function(et) {
                  for (var it in et.failures) Re.splice(parseInt(it), 1);
                  $(Le.length, et);
                })).then(function() {
                  return (0 < Ce.length || te && typeof u == "object") && j.mutate({ trans: w, type: "put", keys: ze, values: Ce, criteria: te, changeSpec: typeof u != "function" && u, isAdditionalChunk: 0 < le }).then(function(et) {
                    return $(Ce.length, et);
                  });
                }).then(function() {
                  return (0 < Re.length || te && V) && j.mutate({ trans: w, type: "delete", keys: Re, criteria: te, isAdditionalChunk: 0 < le }).then(function(et) {
                    return Sn(v.table, Re, et);
                  }).then(function(et) {
                    return $(Re.length, et);
                  });
                }).then(function() {
                  return K.length > le + fe && Y(le + q);
                });
              });
            }
            var te = Pr(v) && v.limit === 1 / 0 && (typeof u != "function" || V) && { index: v.index, range: v.range };
            return Y(0).then(function() {
              if (0 < L.length) throw new me("Error modifying one or more objects", L, X, P);
              return K.length;
            });
          });
        });
      }, gt.prototype.delete = function() {
        var u = this._ctx, m = u.range;
        return !Pr(u) || u.table.schema.yProps || !u.isPrimKey && m.type !== 3 ? this.modify(Ao) : this._write(function(v) {
          var w = u.table.core.schema.primaryKey, C = m;
          return u.table.core.count({ trans: v, query: { index: w, range: C } }).then(function(j) {
            return u.table.core.mutate({ trans: v, type: "deleteRange", range: C }).then(function(q) {
              var O = q.failures, q = q.numFailures;
              if (q) throw new me("Could not delete some values", Object.keys(O).map(function(H) {
                return O[H];
              }), j - q);
              return j - q;
            });
          });
        });
      }, gt);
      function gt() {
      }
      var Ao = function(u, m) {
        return m.value = null;
      };
      function zo(u, m) {
        return u < m ? -1 : u === m ? 0 : 1;
      }
      function Jc(u, m) {
        return m < u ? -1 : u === m ? 0 : 1;
      }
      function Ln(u, m, v) {
        return u = u instanceof ui ? new u.Collection(u) : u, u._ctx.error = new (v || TypeError)(m), u;
      }
      function Ar(u) {
        return new u.Collection(u, function() {
          return bl("");
        }).limit(0);
      }
      function Fn(u, m, v, w) {
        var C, j, A, O, q, H, $, L = v.length;
        if (!v.every(function(V) {
          return typeof V == "string";
        })) return Ln(u, Qt);
        function X(V) {
          C = V === "next" ? function(Y) {
            return Y.toUpperCase();
          } : function(Y) {
            return Y.toLowerCase();
          }, j = V === "next" ? function(Y) {
            return Y.toLowerCase();
          } : function(Y) {
            return Y.toUpperCase();
          }, A = V === "next" ? zo : Jc;
          var K = v.map(function(Y) {
            return { lower: j(Y), upper: C(Y) };
          }).sort(function(Y, te) {
            return A(Y.lower, te.lower);
          });
          O = K.map(function(Y) {
            return Y.upper;
          }), q = K.map(function(Y) {
            return Y.lower;
          }), $ = (H = V) === "next" ? "" : w;
        }
        X("next"), u = new u.Collection(u, function() {
          return pr(O[0], q[L - 1] + w);
        }), u._ondirectionchange = function(V) {
          X(V);
        };
        var P = 0;
        return u._addAlgorithm(function(V, K, Y) {
          var te = V.key;
          if (typeof te != "string") return !1;
          var le = j(te);
          if (m(le, q, P)) return !0;
          for (var fe = null, be = P; be < L; ++be) {
            var Ae = (function(Le, Ce, ze, Re, Ee, qe) {
              for (var Ye = Math.min(Le.length, Re.length), et = -1, it = 0; it < Ye; ++it) {
                var yn = Ce[it];
                if (yn !== Re[it]) return Ee(Le[it], ze[it]) < 0 ? Le.substr(0, it) + ze[it] + ze.substr(it + 1) : Ee(Le[it], Re[it]) < 0 ? Le.substr(0, it) + Re[it] + ze.substr(it + 1) : 0 <= et ? Le.substr(0, et) + Ce[et] + ze.substr(et + 1) : null;
                Ee(Le[it], yn) < 0 && (et = it);
              }
              return Ye < Re.length && qe === "next" ? Le + ze.substr(Le.length) : Ye < Le.length && qe === "prev" ? Le.substr(0, ze.length) : et < 0 ? null : Le.substr(0, et) + Re[et] + ze.substr(et + 1);
            })(te, le, O[be], q[be], A, H);
            Ae === null && fe === null ? P = be + 1 : (fe === null || 0 < A(fe, Ae)) && (fe = Ae);
          }
          return K(fe !== null ? function() {
            V.continue(fe + $);
          } : Y), !1;
        }), u;
      }
      function pr(u, m, v, w) {
        return { type: 2, lower: u, upper: m, lowerOpen: v, upperOpen: w };
      }
      function bl(u) {
        return { type: 1, lower: u, upper: u };
      }
      var ui = (Object.defineProperty(Ut.prototype, "Collection", { get: function() {
        return this._ctx.table.db.Collection;
      }, enumerable: !1, configurable: !0 }), Ut.prototype.between = function(u, m, v, w) {
        v = v !== !1, w = w === !0;
        try {
          return 0 < this._cmp(u, m) || this._cmp(u, m) === 0 && (v || w) && (!v || !w) ? Ar(this) : new this.Collection(this, function() {
            return pr(u, m, !v, !w);
          });
        } catch {
          return Ln(this, Tn);
        }
      }, Ut.prototype.equals = function(u) {
        return u == null ? Ln(this, Tn) : new this.Collection(this, function() {
          return bl(u);
        });
      }, Ut.prototype.above = function(u) {
        return u == null ? Ln(this, Tn) : new this.Collection(this, function() {
          return pr(u, void 0, !0);
        });
      }, Ut.prototype.aboveOrEqual = function(u) {
        return u == null ? Ln(this, Tn) : new this.Collection(this, function() {
          return pr(u, void 0, !1);
        });
      }, Ut.prototype.below = function(u) {
        return u == null ? Ln(this, Tn) : new this.Collection(this, function() {
          return pr(void 0, u, !1, !0);
        });
      }, Ut.prototype.belowOrEqual = function(u) {
        return u == null ? Ln(this, Tn) : new this.Collection(this, function() {
          return pr(void 0, u);
        });
      }, Ut.prototype.startsWith = function(u) {
        return typeof u != "string" ? Ln(this, Qt) : this.between(u, u + tr, !0, !0);
      }, Ut.prototype.startsWithIgnoreCase = function(u) {
        return u === "" ? this.startsWith(u) : Fn(this, function(m, v) {
          return m.indexOf(v[0]) === 0;
        }, [u], tr);
      }, Ut.prototype.equalsIgnoreCase = function(u) {
        return Fn(this, function(m, v) {
          return m === v[0];
        }, [u], "");
      }, Ut.prototype.anyOfIgnoreCase = function() {
        var u = M.apply(Pe, arguments);
        return u.length === 0 ? Ar(this) : Fn(this, function(m, v) {
          return v.indexOf(m) !== -1;
        }, u, "");
      }, Ut.prototype.startsWithAnyOfIgnoreCase = function() {
        var u = M.apply(Pe, arguments);
        return u.length === 0 ? Ar(this) : Fn(this, function(m, v) {
          return v.some(function(w) {
            return m.indexOf(w) === 0;
          });
        }, u, tr);
      }, Ut.prototype.anyOf = function() {
        var u = this, m = M.apply(Pe, arguments), v = this._cmp;
        try {
          m.sort(v);
        } catch {
          return Ln(this, Tn);
        }
        if (m.length === 0) return Ar(this);
        var w = new this.Collection(this, function() {
          return pr(m[0], m[m.length - 1]);
        });
        w._ondirectionchange = function(j) {
          v = j === "next" ? u._ascending : u._descending, m.sort(v);
        };
        var C = 0;
        return w._addAlgorithm(function(j, A, O) {
          for (var q = j.key; 0 < v(q, m[C]); ) if (++C === m.length) return A(O), !1;
          return v(q, m[C]) === 0 || (A(function() {
            j.continue(m[C]);
          }), !1);
        }), w;
      }, Ut.prototype.notEqual = function(u) {
        return this.inAnyRange([[-1 / 0, u], [u, this.db._maxKey]], { includeLowers: !1, includeUppers: !1 });
      }, Ut.prototype.noneOf = function() {
        var u = M.apply(Pe, arguments);
        if (u.length === 0) return new this.Collection(this);
        try {
          u.sort(this._ascending);
        } catch {
          return Ln(this, Tn);
        }
        var m = u.reduce(function(v, w) {
          return v ? v.concat([[v[v.length - 1][1], w]]) : [[-1 / 0, w]];
        }, null);
        return m.push([u[u.length - 1], this.db._maxKey]), this.inAnyRange(m, { includeLowers: !1, includeUppers: !1 });
      }, Ut.prototype.inAnyRange = function(te, m) {
        var v = this, w = this._cmp, C = this._ascending, j = this._descending, A = this._min, O = this._max;
        if (te.length === 0) return Ar(this);
        if (!te.every(function(le) {
          return le[0] !== void 0 && le[1] !== void 0 && C(le[0], le[1]) <= 0;
        })) return Ln(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", Ne.InvalidArgument);
        var q = !m || m.includeLowers !== !1, H = m && m.includeUppers === !0, $, L = C;
        function X(le, fe) {
          return L(le[0], fe[0]);
        }
        try {
          ($ = te.reduce(function(le, fe) {
            for (var be = 0, Ae = le.length; be < Ae; ++be) {
              var Le = le[be];
              if (w(fe[0], Le[1]) < 0 && 0 < w(fe[1], Le[0])) {
                Le[0] = A(Le[0], fe[0]), Le[1] = O(Le[1], fe[1]);
                break;
              }
            }
            return be === Ae && le.push(fe), le;
          }, [])).sort(X);
        } catch {
          return Ln(this, Tn);
        }
        var P = 0, V = H ? function(le) {
          return 0 < C(le, $[P][1]);
        } : function(le) {
          return 0 <= C(le, $[P][1]);
        }, K = q ? function(le) {
          return 0 < j(le, $[P][0]);
        } : function(le) {
          return 0 <= j(le, $[P][0]);
        }, Y = V, te = new this.Collection(this, function() {
          return pr($[0][0], $[$.length - 1][1], !q, !H);
        });
        return te._ondirectionchange = function(le) {
          L = le === "next" ? (Y = V, C) : (Y = K, j), $.sort(X);
        }, te._addAlgorithm(function(le, fe, be) {
          for (var Ae, Le = le.key; Y(Le); ) if (++P === $.length) return fe(be), !1;
          return !V(Ae = Le) && !K(Ae) || (v._cmp(Le, $[P][1]) === 0 || v._cmp(Le, $[P][0]) === 0 || fe(function() {
            L === C ? le.continue($[P][0]) : le.continue($[P][1]);
          }), !1);
        }), te;
      }, Ut.prototype.startsWithAnyOf = function() {
        var u = M.apply(Pe, arguments);
        return u.every(function(m) {
          return typeof m == "string";
        }) ? u.length === 0 ? Ar(this) : this.inAnyRange(u.map(function(m) {
          return [m, m + tr];
        })) : Ln(this, "startsWithAnyOf() only works with strings");
      }, Ut);
      function Ut() {
      }
      function nr(u) {
        return Mt(function(m) {
          return ci(m), u(m.target.error), !1;
        });
      }
      function ci(u) {
        u.stopPropagation && u.stopPropagation(), u.preventDefault && u.preventDefault();
      }
      var Fi = "storagemutated", fi = "x-storagemutated-1", pn = Oa(null, Fi), Mo = (Nn.prototype._lock = function() {
        return _e(!Oe.global), ++this._reculock, this._reculock !== 1 || Oe.global || (Oe.lockOwnerFor = this), this;
      }, Nn.prototype._unlock = function() {
        if (_e(!Oe.global), --this._reculock == 0) for (Oe.global || (Oe.lockOwnerFor = null); 0 < this._blockedFuncs.length && !this._locked(); ) {
          var u = this._blockedFuncs.shift();
          try {
            er(u[1], u[0]);
          } catch {
          }
        }
        return this;
      }, Nn.prototype._locked = function() {
        return this._reculock && Oe.lockOwnerFor !== this;
      }, Nn.prototype.create = function(u) {
        var m = this;
        if (!this.mode) return this;
        var v = this.db.idbdb, w = this.db._state.dbOpenError;
        if (_e(!this.idbtrans), !u && !v) switch (w && w.name) {
          case "DatabaseClosedError":
            throw new Ne.DatabaseClosed(w);
          case "MissingAPIError":
            throw new Ne.MissingAPI(w.message, w);
          default:
            throw new Ne.OpenFailed(w);
        }
        if (!this.active) throw new Ne.TransactionInactive();
        return _e(this._completion._state === null), (u = this.idbtrans = u || (this.db.core || v).transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })).onerror = Mt(function(C) {
          ci(C), m._reject(u.error);
        }), u.onabort = Mt(function(C) {
          ci(C), m.active && m._reject(new Ne.Abort(u.error)), m.active = !1, m.on("abort").fire(C);
        }), u.oncomplete = Mt(function() {
          m.active = !1, m._resolve(), "mutatedParts" in u && pn.storagemutated.fire(u.mutatedParts);
        }), this;
      }, Nn.prototype._promise = function(u, m, v) {
        var w = this;
        if (u === "readwrite" && this.mode !== "readwrite") return Tt(new Ne.ReadOnly("Transaction is readonly"));
        if (!this.active) return Tt(new Ne.TransactionInactive());
        if (this._locked()) return new Ue(function(j, A) {
          w._blockedFuncs.push([function() {
            w._promise(u, m, v).then(j, A);
          }, Oe]);
        });
        if (v) return Rt(function() {
          var j = new Ue(function(A, O) {
            w._lock();
            var q = m(A, O, w);
            q && q.then && q.then(A, O);
          });
          return j.finally(function() {
            return w._unlock();
          }), j._lib = !0, j;
        });
        var C = new Ue(function(j, A) {
          var O = m(j, A, w);
          O && O.then && O.then(j, A);
        });
        return C._lib = !0, C;
      }, Nn.prototype._root = function() {
        return this.parent ? this.parent._root() : this;
      }, Nn.prototype.waitFor = function(u) {
        var m, v = this._root(), w = Ue.resolve(u);
        v._waitingFor ? v._waitingFor = v._waitingFor.then(function() {
          return w;
        }) : (v._waitingFor = w, v._waitingQueue = [], m = v.idbtrans.objectStore(v.storeNames[0]), (function j() {
          for (++v._spinCount; v._waitingQueue.length; ) v._waitingQueue.shift()();
          v._waitingFor && (m.get(-1 / 0).onsuccess = j);
        })());
        var C = v._waitingFor;
        return new Ue(function(j, A) {
          w.then(function(O) {
            return v._waitingQueue.push(Mt(j.bind(null, O)));
          }, function(O) {
            return v._waitingQueue.push(Mt(A.bind(null, O)));
          }).finally(function() {
            v._waitingFor === C && (v._waitingFor = null);
          });
        });
      }, Nn.prototype.abort = function() {
        this.active && (this.active = !1, this.idbtrans && this.idbtrans.abort(), this._reject(new Ne.Abort()));
      }, Nn.prototype.table = function(u) {
        var m = this._memoizedTables || (this._memoizedTables = {});
        if (x(m, u)) return m[u];
        var v = this.schema[u];
        if (!v) throw new Ne.NotFound("Table " + u + " not part of transaction");
        return v = new this.db.Table(u, v, this), v.core = this.db.core.table(u), m[u] = v;
      }, Nn);
      function Nn() {
      }
      function gr(u, m, v, w, C, j, A, O) {
        return { name: u, keyPath: m, unique: v, multi: w, auto: C, compound: j, src: (v && !A ? "&" : "") + (w ? "*" : "") + (C ? "++" : "") + xl(m), type: O };
      }
      function xl(u) {
        return typeof u == "string" ? u : u ? "[" + [].join.call(u, "+") + "]" : "";
      }
      function Vi(u, m, v) {
        return { name: u, primKey: m, indexes: v, mappedClass: null, idxByName: (w = function(C) {
          return [C.name, C];
        }, v.reduce(function(C, j, A) {
          return A = w(j, A), A && (C[A[0]] = A[1]), C;
        }, {})) };
        var w;
      }
      var Ki = function(u) {
        try {
          return u.only([[]]), Ki = function() {
            return [[]];
          }, [[]];
        } catch {
          return Ki = function() {
            return tr;
          }, tr;
        }
      };
      function Gi(u) {
        return u == null ? function() {
        } : typeof u == "string" ? (m = u).split(".").length === 1 ? function(v) {
          return v[m];
        } : function(v) {
          return I(v, m);
        } : function(v) {
          return I(v, u);
        };
        var m;
      }
      function La(u) {
        return [].slice.call(u);
      }
      var eu = 0;
      function en(u) {
        return u == null ? ":id" : typeof u == "string" ? u : "[".concat(u.join("+"), "]");
      }
      function di(u, m, q) {
        function w(Y) {
          if (Y.type === 3) return null;
          if (Y.type === 4) throw new Error("Cannot convert never type to IDBKeyRange");
          var P = Y.lower, V = Y.upper, K = Y.lowerOpen, Y = Y.upperOpen;
          return P === void 0 ? V === void 0 ? null : m.upperBound(V, !!Y) : V === void 0 ? m.lowerBound(P, !!K) : m.bound(P, V, !!K, !!Y);
        }
        function C(X) {
          var P, V = X.name;
          return { name: V, schema: X, mutate: function(K) {
            var Y = K.trans, te = K.type, le = K.keys, fe = K.values, be = K.range;
            return new Promise(function(Ae, Le) {
              Ae = Mt(Ae);
              var Ce = Y.objectStore(V), ze = Ce.keyPath == null, Re = te === "put" || te === "add";
              if (!Re && te !== "delete" && te !== "deleteRange") throw new Error("Invalid operation type: " + te);
              var Ee, qe = (le || fe || { length: 1 }).length;
              if (le && fe && le.length !== fe.length) throw new Error("Given keys array must have same length as given values array.");
              if (qe === 0) return Ae({ numFailures: 0, failures: {}, results: [], lastResult: void 0 });
              function Ye(nn) {
                ++yn, ci(nn);
              }
              var et = [], it = [], yn = 0;
              if (te === "deleteRange") {
                if (be.type === 4) return Ae({ numFailures: yn, failures: it, results: [], lastResult: void 0 });
                be.type === 3 ? et.push(Ee = Ce.clear()) : et.push(Ee = Ce.delete(w(be)));
              } else {
                var ze = Re ? ze ? [fe, le] : [fe, null] : [le, null], Je = ze[0], tn = ze[1];
                if (Re) for (var Pt = 0; Pt < qe; ++Pt) et.push(Ee = tn && tn[Pt] !== void 0 ? Ce[te](Je[Pt], tn[Pt]) : Ce[te](Je[Pt])), Ee.onerror = Ye;
                else for (Pt = 0; Pt < qe; ++Pt) et.push(Ee = Ce[te](Je[Pt])), Ee.onerror = Ye;
              }
              function Fa(nn) {
                nn = nn.target.result, et.forEach(function(Vn, Go) {
                  return Vn.error != null && (it[Go] = Vn.error);
                }), Ae({ numFailures: yn, failures: it, results: te === "delete" ? le : et.map(function(Vn) {
                  return Vn.result;
                }), lastResult: nn });
              }
              Ee.onerror = function(nn) {
                Ye(nn), Fa(nn);
              }, Ee.onsuccess = Fa;
            });
          }, getMany: function(K) {
            var Y = K.trans, te = K.keys;
            return new Promise(function(le, fe) {
              le = Mt(le);
              for (var be, Ae = Y.objectStore(V), Le = te.length, Ce = new Array(Le), ze = 0, Re = 0, Ee = function(et) {
                et = et.target, Ce[et._pos] = et.result, ++Re === ze && le(Ce);
              }, qe = nr(fe), Ye = 0; Ye < Le; ++Ye) te[Ye] != null && ((be = Ae.get(te[Ye]))._pos = Ye, be.onsuccess = Ee, be.onerror = qe, ++ze);
              ze === 0 && le(Ce);
            });
          }, get: function(K) {
            var Y = K.trans, te = K.key;
            return new Promise(function(le, fe) {
              le = Mt(le);
              var be = Y.objectStore(V).get(te);
              be.onsuccess = function(Ae) {
                return le(Ae.target.result);
              }, be.onerror = nr(fe);
            });
          }, query: (P = H, function(K) {
            return new Promise(function(Y, te) {
              Y = Mt(Y);
              var le, fe, be, ze = K.trans, Ae = K.values, Le = K.limit, Ee = K.query, Ce = Le === 1 / 0 ? void 0 : Le, Re = Ee.index, Ee = Ee.range, ze = ze.objectStore(V), Re = Re.isPrimaryKey ? ze : ze.index(Re.name), Ee = w(Ee);
              if (Le === 0) return Y({ result: [] });
              P ? ((Ce = Ae ? Re.getAll(Ee, Ce) : Re.getAllKeys(Ee, Ce)).onsuccess = function(qe) {
                return Y({ result: qe.target.result });
              }, Ce.onerror = nr(te)) : (le = 0, fe = !Ae && "openKeyCursor" in Re ? Re.openKeyCursor(Ee) : Re.openCursor(Ee), be = [], fe.onsuccess = function(qe) {
                var Ye = fe.result;
                return Ye ? (be.push(Ae ? Ye.value : Ye.primaryKey), ++le === Le ? Y({ result: be }) : void Ye.continue()) : Y({ result: be });
              }, fe.onerror = nr(te));
            });
          }), openCursor: function(K) {
            var Y = K.trans, te = K.values, le = K.query, fe = K.reverse, be = K.unique;
            return new Promise(function(Ae, Le) {
              Ae = Mt(Ae);
              var Re = le.index, Ce = le.range, ze = Y.objectStore(V), ze = Re.isPrimaryKey ? ze : ze.index(Re.name), Re = fe ? be ? "prevunique" : "prev" : be ? "nextunique" : "next", Ee = !te && "openKeyCursor" in ze ? ze.openKeyCursor(w(Ce), Re) : ze.openCursor(w(Ce), Re);
              Ee.onerror = nr(Le), Ee.onsuccess = Mt(function(qe) {
                var Ye, et, it, yn, Je = Ee.result;
                Je ? (Je.___id = ++eu, Je.done = !1, Ye = Je.continue.bind(Je), et = (et = Je.continuePrimaryKey) && et.bind(Je), it = Je.advance.bind(Je), yn = function() {
                  throw new Error("Cursor not stopped");
                }, Je.trans = Y, Je.stop = Je.continue = Je.continuePrimaryKey = Je.advance = function() {
                  throw new Error("Cursor not started");
                }, Je.fail = Mt(Le), Je.next = function() {
                  var tn = this, Pt = 1;
                  return this.start(function() {
                    return Pt-- ? tn.continue() : tn.stop();
                  }).then(function() {
                    return tn;
                  });
                }, Je.start = function(tn) {
                  function Pt() {
                    if (Ee.result) try {
                      tn();
                    } catch (nn) {
                      Je.fail(nn);
                    }
                    else Je.done = !0, Je.start = function() {
                      throw new Error("Cursor behind last entry");
                    }, Je.stop();
                  }
                  var Fa = new Promise(function(nn, Vn) {
                    nn = Mt(nn), Ee.onerror = nr(Vn), Je.fail = Vn, Je.stop = function(Go) {
                      Je.stop = Je.continue = Je.continuePrimaryKey = Je.advance = yn, nn(Go);
                    };
                  });
                  return Ee.onsuccess = Mt(function(nn) {
                    Ee.onsuccess = Pt, Pt();
                  }), Je.continue = Ye, Je.continuePrimaryKey = et, Je.advance = it, Pt(), Fa;
                }, Ae(Je)) : Ae(null);
              }, Le);
            });
          }, count: function(K) {
            var Y = K.query, te = K.trans, le = Y.index, fe = Y.range;
            return new Promise(function(be, Ae) {
              var Le = te.objectStore(V), Ce = le.isPrimaryKey ? Le : Le.index(le.name), Le = w(fe), Ce = Le ? Ce.count(Le) : Ce.count();
              Ce.onsuccess = Mt(function(ze) {
                return be(ze.target.result);
              }), Ce.onerror = nr(Ae);
            });
          } };
        }
        var j, A, O, $ = (A = q, O = La((j = u).objectStoreNames), { schema: { name: j.name, tables: O.map(function(X) {
          return A.objectStore(X);
        }).map(function(X) {
          var P = X.keyPath, Y = X.autoIncrement, V = g(P), K = {}, Y = { name: X.name, primaryKey: { name: null, isPrimaryKey: !0, outbound: P == null, compound: V, keyPath: P, autoIncrement: Y, unique: !0, extractKey: Gi(P) }, indexes: La(X.indexNames).map(function(te) {
            return X.index(te);
          }).map(function(be) {
            var le = be.name, fe = be.unique, Ae = be.multiEntry, be = be.keyPath, Ae = { name: le, compound: g(be), keyPath: be, unique: fe, multiEntry: Ae, extractKey: Gi(be) };
            return K[en(be)] = Ae;
          }), getIndexByKeyPath: function(te) {
            return K[en(te)];
          } };
          return K[":id"] = Y.primaryKey, P != null && (K[en(P)] = Y.primaryKey), Y;
        }) }, hasGetAll: 0 < O.length && "getAll" in A.objectStore(O[0]) && !(typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604) }), q = $.schema, H = $.hasGetAll, $ = q.tables.map(C), L = {};
        return $.forEach(function(X) {
          return L[X.name] = X;
        }), { stack: "dbcore", transaction: u.transaction.bind(u), table: function(X) {
          if (!L[X]) throw new Error("Table '".concat(X, "' not found"));
          return L[X];
        }, MIN_KEY: -1 / 0, MAX_KEY: Ki(m), schema: q };
      }
      function vl(u, m, v, w) {
        var C = v.IDBKeyRange;
        return v.indexedDB, { dbcore: (w = di(m, C, w), u.dbcore.reduce(function(j, A) {
          return A = A.create, l(l({}, j), A(j));
        }, w)) };
      }
      function Fr(u, w) {
        var v = w.db, w = vl(u._middlewares, v, u._deps, w);
        u.core = w.dbcore, u.tables.forEach(function(C) {
          var j = C.name;
          u.core.schema.tables.some(function(A) {
            return A.name === j;
          }) && (C.core = u.core.table(j), u[j] instanceof u.Table && (u[j].core = C.core));
        });
      }
      function Sl(u, m, v, w) {
        v.forEach(function(C) {
          var j = w[C];
          m.forEach(function(A) {
            var O = (function q(H, $) {
              return G(H, $) || (H = b(H)) && q(H, $);
            })(A, C);
            (!O || "value" in O && O.value === void 0) && (A === u.Transaction.prototype || A instanceof u.Transaction ? N(A, C, { get: function() {
              return this.table(C);
            }, set: function(q) {
              E(this, C, { value: q, writable: !0, configurable: !0, enumerable: !0 });
            } }) : A[C] = new u.Table(C, j));
          });
        });
      }
      function Ba(u, m) {
        m.forEach(function(v) {
          for (var w in v) v[w] instanceof u.Table && delete v[w];
        });
      }
      function Oo(u, m) {
        return u._cfg.version - m._cfg.version;
      }
      function Ua(u, m, v, w) {
        var C = u._dbSchema;
        v.objectStoreNames.contains("$meta") && !C.$meta && (C.$meta = Vi("$meta", nu("")[0], []), u._storeNames.push("$meta"));
        var j = u._createTransaction("readwrite", u._storeNames, C);
        j.create(v), j._completion.catch(w);
        var A = j._reject.bind(j), O = Oe.transless || Oe;
        Rt(function() {
          return Oe.trans = j, Oe.transless = O, m !== 0 ? (Fr(u, v), H = m, ((q = j).storeNames.includes("$meta") ? q.table("$meta").get("version").then(function($) {
            return $ ?? H;
          }) : Ue.resolve(H)).then(function($) {
            return X = $, P = j, V = v, K = [], $ = (L = u)._versions, Y = L._dbSchema = $i(0, L.idbdb, V), ($ = $.filter(function(te) {
              return te._cfg.version >= X;
            })).length !== 0 ? ($.forEach(function(te) {
              K.push(function() {
                var le = Y, fe = te._cfg.dbschema;
                El(L, le, V), El(L, fe, V), Y = L._dbSchema = fe;
                var be = kl(le, fe);
                be.add.forEach(function(Re) {
                  Do(V, Re[0], Re[1].primKey, Re[1].indexes);
                }), be.change.forEach(function(Re) {
                  if (Re.recreate) throw new Ne.Upgrade("Not yet support for changing primary key");
                  var Ee = V.objectStore(Re.name);
                  Re.add.forEach(function(qe) {
                    return Cl(Ee, qe);
                  }), Re.change.forEach(function(qe) {
                    Ee.deleteIndex(qe.name), Cl(Ee, qe);
                  }), Re.del.forEach(function(qe) {
                    return Ee.deleteIndex(qe);
                  });
                });
                var Ae = te._cfg.contentUpgrade;
                if (Ae && te._cfg.version > X) {
                  Fr(L, V), P._memoizedTables = {};
                  var Le = De(fe);
                  be.del.forEach(function(Re) {
                    Le[Re] = le[Re];
                  }), Ba(L, [L.Transaction.prototype]), Sl(L, [L.Transaction.prototype], f(Le), Le), P.schema = Le;
                  var Ce, ze = B(Ae);
                  return ze && Xt(), be = Ue.follow(function() {
                    var Re;
                    (Ce = Ae(P)) && ze && (Re = Rn.bind(null, null), Ce.then(Re, Re));
                  }), Ce && typeof Ce.then == "function" ? Ue.resolve(Ce) : be.then(function() {
                    return Ce;
                  });
                }
              }), K.push(function(le) {
                var fe, be, Ae = te._cfg.dbschema;
                fe = Ae, be = le, [].slice.call(be.db.objectStoreNames).forEach(function(Le) {
                  return fe[Le] == null && be.db.deleteObjectStore(Le);
                }), Ba(L, [L.Transaction.prototype]), Sl(L, [L.Transaction.prototype], L._storeNames, L._dbSchema), P.schema = L._dbSchema;
              }), K.push(function(le) {
                L.idbdb.objectStoreNames.contains("$meta") && (Math.ceil(L.idbdb.version / 10) === te._cfg.version ? (L.idbdb.deleteObjectStore("$meta"), delete L._dbSchema.$meta, L._storeNames = L._storeNames.filter(function(fe) {
                  return fe !== "$meta";
                })) : le.objectStore("$meta").put(te._cfg.version, "version"));
              });
            }), (function te() {
              return K.length ? Ue.resolve(K.shift()(P.idbtrans)).then(te) : Ue.resolve();
            })().then(function() {
              tu(Y, V);
            })) : Ue.resolve();
            var L, X, P, V, K, Y;
          }).catch(A)) : (f(C).forEach(function($) {
            Do(v, $, C[$].primKey, C[$].indexes);
          }), Fr(u, v), void Ue.follow(function() {
            return u.on.populate.fire(j);
          }).catch(A));
          var q, H;
        });
      }
      function wl(u, m) {
        tu(u._dbSchema, m), m.db.version % 10 != 0 || m.objectStoreNames.contains("$meta") || m.db.createObjectStore("$meta").add(Math.ceil(m.db.version / 10 - 1), "version");
        var v = $i(0, u.idbdb, m);
        El(u, u._dbSchema, m);
        for (var w = 0, C = kl(v, u._dbSchema).change; w < C.length; w++) {
          var j = (function(A) {
            if (A.change.length || A.recreate) return console.warn("Unable to patch indexes of table ".concat(A.name, " because it has changes on the type of index or primary key.")), { value: void 0 };
            var O = m.objectStore(A.name);
            A.add.forEach(function(q) {
              jn && console.debug("Dexie upgrade patch: Creating missing index ".concat(A.name, ".").concat(q.src)), Cl(O, q);
            });
          })(C[w]);
          if (typeof j == "object") return j.value;
        }
      }
      function kl(u, m) {
        var v, w = { del: [], add: [], change: [] };
        for (v in u) m[v] || w.del.push(v);
        for (v in m) {
          var C = u[v], j = m[v];
          if (C) {
            var A = { name: v, def: j, recreate: !1, del: [], add: [], change: [] };
            if ("" + (C.primKey.keyPath || "") != "" + (j.primKey.keyPath || "") || C.primKey.auto !== j.primKey.auto) A.recreate = !0, w.change.push(A);
            else {
              var O = C.idxByName, q = j.idxByName, H = void 0;
              for (H in O) q[H] || A.del.push(H);
              for (H in q) {
                var $ = O[H], L = q[H];
                $ ? $.src !== L.src && A.change.push(L) : A.add.push(L);
              }
              (0 < A.del.length || 0 < A.add.length || 0 < A.change.length) && w.change.push(A);
            }
          } else w.add.push([v, j]);
        }
        return w;
      }
      function Do(u, m, v, w) {
        var C = u.db.createObjectStore(m, v.keyPath ? { keyPath: v.keyPath, autoIncrement: v.auto } : { autoIncrement: v.auto });
        return w.forEach(function(j) {
          return Cl(C, j);
        }), C;
      }
      function tu(u, m) {
        f(u).forEach(function(v) {
          m.db.objectStoreNames.contains(v) || (jn && console.debug("Dexie: Creating missing table", v), Do(m, v, u[v].primKey, u[v].indexes));
        });
      }
      function Cl(u, m) {
        u.createIndex(m.name, m.keyPath, { unique: m.unique, multiEntry: m.multi });
      }
      function $i(u, m, v) {
        var w = {};
        return ne(m.objectStoreNames, 0).forEach(function(C) {
          for (var j = v.objectStore(C), A = gr(xl(H = j.keyPath), H || "", !0, !1, !!j.autoIncrement, H && typeof H != "string", !0), O = [], q = 0; q < j.indexNames.length; ++q) {
            var $ = j.index(j.indexNames[q]), H = $.keyPath, $ = gr($.name, H, !!$.unique, !!$.multiEntry, !1, H && typeof H != "string", !1);
            O.push($);
          }
          w[C] = Vi(C, A, O);
        }), w;
      }
      function El(u, m, v) {
        for (var w = v.db.objectStoreNames, C = 0; C < w.length; ++C) {
          var j = w[C], A = v.objectStore(j);
          u._hasGetAll = "getAll" in A;
          for (var O = 0; O < A.indexNames.length; ++O) {
            var q = A.indexNames[O], H = A.index(q).keyPath, $ = typeof H == "string" ? H : "[" + ne(H).join("+") + "]";
            !m[j] || (H = m[j].idxByName[$]) && (H.name = q, delete m[j].idxByName[$], m[j].idxByName[q] = H);
          }
        }
        typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && c.WorkerGlobalScope && c instanceof c.WorkerGlobalScope && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604 && (u._hasGetAll = !1);
      }
      function nu(u) {
        return u.split(",").map(function(m, v) {
          var j = m.split(":"), w = (C = j[1]) === null || C === void 0 ? void 0 : C.trim(), C = (m = j[0].trim()).replace(/([&*]|\+\+)/g, ""), j = /^\[/.test(C) ? C.match(/^\[(.*)\]$/)[1].split("+") : C;
          return gr(C, j || null, /\&/.test(m), /\*/.test(m), /\+\+/.test(m), g(j), v === 0, w);
        });
      }
      var ef = (Yi.prototype._createTableSchema = Vi, Yi.prototype._parseIndexSyntax = nu, Yi.prototype._parseStoresSpec = function(u, m) {
        var v = this;
        f(u).forEach(function(w) {
          if (u[w] !== null) {
            var C = v._parseIndexSyntax(u[w]), j = C.shift();
            if (!j) throw new Ne.Schema("Invalid schema for table " + w + ": " + u[w]);
            if (j.unique = !0, j.multi) throw new Ne.Schema("Primary key cannot be multiEntry*");
            C.forEach(function(A) {
              if (A.auto) throw new Ne.Schema("Only primary key can be marked as autoIncrement (++)");
              if (!A.keyPath) throw new Ne.Schema("Index must have a name and cannot be an empty string");
            }), C = v._createTableSchema(w, j, C), m[w] = C;
          }
        });
      }, Yi.prototype.stores = function(v) {
        var m = this.db;
        this._cfg.storesSource = this._cfg.storesSource ? y(this._cfg.storesSource, v) : v;
        var v = m._versions, w = {}, C = {};
        return v.forEach(function(j) {
          y(w, j._cfg.storesSource), C = j._cfg.dbschema = {}, j._parseStoresSpec(w, C);
        }), m._dbSchema = C, Ba(m, [m._allTables, m, m.Transaction.prototype]), Sl(m, [m._allTables, m, m.Transaction.prototype, this._cfg.tables], f(C), C), m._storeNames = f(C), this;
      }, Yi.prototype.upgrade = function(u) {
        return this._cfg.contentUpgrade = Lr(this._cfg.contentUpgrade || bt, u), this;
      }, Yi);
      function Yi() {
      }
      function Ro(u, m) {
        var v = u._dbNamesDB;
        return v || (v = u._dbNamesDB = new yr(Aa, { addons: [], indexedDB: u, IDBKeyRange: m })).version(1).stores({ dbnames: "name" }), v.table("dbnames");
      }
      function _l(u) {
        return u && typeof u.databases == "function";
      }
      function Lo(u) {
        return Rt(function() {
          return Oe.letThrough = !0, u();
        });
      }
      function Bo(u) {
        return !("from" in u);
      }
      var gn = function(u, m) {
        if (!this) {
          var v = new gn();
          return u && "d" in u && y(v, u), v;
        }
        y(this, arguments.length ? { d: 1, from: u, to: 1 < arguments.length ? m : u } : { d: 0 });
      };
      function Ia(u, m, v) {
        var w = st(m, v);
        if (!isNaN(w)) {
          if (0 < w) throw RangeError();
          if (Bo(u)) return y(u, { from: m, to: v, d: 1 });
          var C = u.l, w = u.r;
          if (st(v, u.from) < 0) return C ? Ia(C, m, v) : u.l = { from: m, to: v, d: 1, l: null, r: null }, iu(u);
          if (0 < st(m, u.to)) return w ? Ia(w, m, v) : u.r = { from: m, to: v, d: 1, l: null, r: null }, iu(u);
          st(m, u.from) < 0 && (u.from = m, u.l = null, u.d = w ? w.d + 1 : 1), 0 < st(v, u.to) && (u.to = v, u.r = null, u.d = u.l ? u.l.d + 1 : 1), v = !u.r, C && !u.l && hi(u, C), w && v && hi(u, w);
        }
      }
      function hi(u, m) {
        Bo(m) || (function v(w, q) {
          var j = q.from, A = q.to, O = q.l, q = q.r;
          Ia(w, j, A), O && v(w, O), q && v(w, q);
        })(u, m);
      }
      function ru(u, m) {
        var v = jl(m), w = v.next();
        if (w.done) return !1;
        for (var C = w.value, j = jl(u), A = j.next(C.from), O = A.value; !w.done && !A.done; ) {
          if (st(O.from, C.to) <= 0 && 0 <= st(O.to, C.from)) return !0;
          st(C.from, O.from) < 0 ? C = (w = v.next(O.from)).value : O = (A = j.next(C.from)).value;
        }
        return !1;
      }
      function jl(u) {
        var m = Bo(u) ? null : { s: 0, n: u };
        return { next: function(v) {
          for (var w = 0 < arguments.length; m; ) switch (m.s) {
            case 0:
              if (m.s = 1, w) for (; m.n.l && st(v, m.n.from) < 0; ) m = { up: m, n: m.n.l, s: 1 };
              else for (; m.n.l; ) m = { up: m, n: m.n.l, s: 1 };
            case 1:
              if (m.s = 2, !w || st(v, m.n.to) <= 0) return { value: m.n, done: !1 };
            case 2:
              if (m.n.r) {
                m.s = 3, m = { up: m, n: m.n.r, s: 0 };
                continue;
              }
            case 3:
              m = m.up;
          }
          return { done: !0 };
        } };
      }
      function iu(u) {
        var m, v, w = (((m = u.r) === null || m === void 0 ? void 0 : m.d) || 0) - (((v = u.l) === null || v === void 0 ? void 0 : v.d) || 0), C = 1 < w ? "r" : w < -1 ? "l" : "";
        C && (m = C == "r" ? "l" : "r", v = l({}, u), w = u[C], u.from = w.from, u.to = w.to, u[C] = w[C], v[C] = w[m], (u[m] = v).d = Uo(v)), u.d = Uo(u);
      }
      function Uo(v) {
        var m = v.r, v = v.l;
        return (m ? v ? Math.max(m.d, v.d) : m.d : v ? v.d : 0) + 1;
      }
      function Tl(u, m) {
        return f(m).forEach(function(v) {
          u[v] ? hi(u[v], m[v]) : u[v] = (function w(C) {
            var j, A, O = {};
            for (j in C) x(C, j) && (A = C[j], O[j] = !A || typeof A != "object" || Q.has(A.constructor) ? A : w(A));
            return O;
          })(m[v]);
        }), u;
      }
      function Io(u, m) {
        return u.all || m.all || Object.keys(u).some(function(v) {
          return m[v] && ru(m[v], u[v]);
        });
      }
      _(gn.prototype, ((Bn = { add: function(u) {
        return hi(this, u), this;
      }, addKey: function(u) {
        return Ia(this, u, u), this;
      }, addKeys: function(u) {
        var m = this;
        return u.forEach(function(v) {
          return Ia(m, v, v);
        }), this;
      }, hasKey: function(u) {
        var m = jl(this).next(u).value;
        return m && st(m.from, u) <= 0 && 0 <= st(m.to, u);
      } })[ee] = function() {
        return jl(this);
      }, Bn));
      var mi = {}, qo = {}, Ho = !1;
      function Nl(u) {
        Tl(qo, u), Ho || (Ho = !0, setTimeout(function() {
          Ho = !1, Po(qo, !(qo = {}));
        }, 0));
      }
      function Po(u, m) {
        m === void 0 && (m = !1);
        var v = /* @__PURE__ */ new Set();
        if (u.all) for (var w = 0, C = Object.values(mi); w < C.length; w++) au(A = C[w], u, v, m);
        else for (var j in u) {
          var A, O = /^idb\:\/\/(.*)\/(.*)\//.exec(j);
          O && (j = O[1], O = O[2], (A = mi["idb://".concat(j, "/").concat(O)]) && au(A, u, v, m));
        }
        v.forEach(function(q) {
          return q();
        });
      }
      function au(u, m, v, w) {
        for (var C = [], j = 0, A = Object.entries(u.queries.query); j < A.length; j++) {
          for (var O = A[j], q = O[0], H = [], $ = 0, L = O[1]; $ < L.length; $++) {
            var X = L[$];
            Io(m, X.obsSet) ? X.subscribers.forEach(function(Y) {
              return v.add(Y);
            }) : w && H.push(X);
          }
          w && C.push([q, H]);
        }
        if (w) for (var P = 0, V = C; P < V.length; P++) {
          var K = V[P], q = K[0], H = K[1];
          u.queries.query[q] = H;
        }
      }
      function tf(u) {
        var m = u._state, v = u._deps.indexedDB;
        if (m.isBeingOpened || u.idbdb) return m.dbReadyPromise.then(function() {
          return m.dbOpenError ? Tt(m.dbOpenError) : u;
        });
        m.isBeingOpened = !0, m.dbOpenError = null, m.openComplete = !1;
        var w = m.openCanceller, C = Math.round(10 * u.verno), j = !1;
        function A() {
          if (m.openCanceller !== w) throw new Ne.DatabaseClosed("db.open() was cancelled");
        }
        function O() {
          return new Ue(function(X, P) {
            if (A(), !v) throw new Ne.MissingAPI();
            var V = u.name, K = m.autoSchema || !C ? v.open(V) : v.open(V, C);
            if (!K) throw new Ne.MissingAPI();
            K.onerror = nr(P), K.onblocked = Mt(u._fireOnBlocked), K.onupgradeneeded = Mt(function(Y) {
              var te;
              $ = K.transaction, m.autoSchema && !u._options.allowEmptyDB ? (K.onerror = ci, $.abort(), K.result.close(), (te = v.deleteDatabase(V)).onsuccess = te.onerror = Mt(function() {
                P(new Ne.NoSuchDatabase("Database ".concat(V, " doesnt exist")));
              })) : ($.onerror = nr(P), Y = Y.oldVersion > Math.pow(2, 62) ? 0 : Y.oldVersion, L = Y < 1, u.idbdb = K.result, j && wl(u, $), Ua(u, Y / 10, $, P));
            }, P), K.onsuccess = Mt(function() {
              $ = null;
              var Y, te, le, fe, be, Ae = u.idbdb = K.result, Le = ne(Ae.objectStoreNames);
              if (0 < Le.length) try {
                var Ce = Ae.transaction((fe = Le).length === 1 ? fe[0] : fe, "readonly");
                if (m.autoSchema) te = Ae, le = Ce, (Y = u).verno = te.version / 10, le = Y._dbSchema = $i(0, te, le), Y._storeNames = ne(te.objectStoreNames, 0), Sl(Y, [Y._allTables], f(le), le);
                else if (El(u, u._dbSchema, Ce), ((be = kl($i(0, (be = u).idbdb, Ce), be._dbSchema)).add.length || be.change.some(function(ze) {
                  return ze.add.length || ze.change.length;
                })) && !j) return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."), Ae.close(), C = Ae.version + 1, j = !0, X(O());
                Fr(u, Ce);
              } catch {
              }
              li.push(u), Ae.onversionchange = Mt(function(ze) {
                m.vcFired = !0, u.on("versionchange").fire(ze);
              }), Ae.onclose = Mt(function() {
                u.close({ disableAutoOpen: !1 });
              }), L && (be = u._deps, Ce = V, Ae = be.indexedDB, be = be.IDBKeyRange, _l(Ae) || Ce === Aa || Ro(Ae, be).put({ name: Ce }).catch(bt)), X();
            }, P);
          }).catch(function(X) {
            switch (X == null ? void 0 : X.name) {
              case "UnknownError":
                if (0 < m.PR1398_maxLoop) return m.PR1398_maxLoop--, console.warn("Dexie: Workaround for Chrome UnknownError on open()"), O();
                break;
              case "VersionError":
                if (0 < C) return C = 0, O();
            }
            return Ue.reject(X);
          });
        }
        var q, H = m.dbReadyResolve, $ = null, L = !1;
        return Ue.race([w, (typeof navigator > "u" ? Ue.resolve() : !navigator.userAgentData && /Safari\//.test(navigator.userAgent) && !/Chrom(e|ium)\//.test(navigator.userAgent) && indexedDB.databases ? new Promise(function(X) {
          function P() {
            return indexedDB.databases().finally(X);
          }
          q = setInterval(P, 100), P();
        }).finally(function() {
          return clearInterval(q);
        }) : Promise.resolve()).then(O)]).then(function() {
          return A(), m.onReadyBeingFired = [], Ue.resolve(Lo(function() {
            return u.on.ready.fire(u.vip);
          })).then(function X() {
            if (0 < m.onReadyBeingFired.length) {
              var P = m.onReadyBeingFired.reduce(Lr, bt);
              return m.onReadyBeingFired = [], Ue.resolve(Lo(function() {
                return P(u.vip);
              })).then(X);
            }
          });
        }).finally(function() {
          m.openCanceller === w && (m.onReadyBeingFired = null, m.isBeingOpened = !1);
        }).catch(function(X) {
          m.dbOpenError = X;
          try {
            $ && $.abort();
          } catch {
          }
          return w === m.openCanceller && u._close(), Tt(X);
        }).finally(function() {
          m.openComplete = !0, H();
        }).then(function() {
          var X;
          return L && (X = {}, u.tables.forEach(function(P) {
            P.schema.indexes.forEach(function(V) {
              V.name && (X["idb://".concat(u.name, "/").concat(P.name, "/").concat(V.name)] = new gn(-1 / 0, [[[]]]));
            }), X["idb://".concat(u.name, "/").concat(P.name, "/")] = X["idb://".concat(u.name, "/").concat(P.name, "/:dels")] = new gn(-1 / 0, [[[]]]);
          }), pn(Fi).fire(X), Po(X, !0)), u;
        });
      }
      function qa(u) {
        function m(j) {
          return u.next(j);
        }
        var v = C(m), w = C(function(j) {
          return u.throw(j);
        });
        function C(j) {
          return function(q) {
            var O = j(q), q = O.value;
            return O.done ? q : q && typeof q.then == "function" ? q.then(v, w) : g(q) ? Promise.all(q).then(v, w) : v(q);
          };
        }
        return C(m)();
      }
      function Vr(u, m, v) {
        for (var w = g(u) ? u.slice() : [u], C = 0; C < v; ++C) w.push(m);
        return w;
      }
      var nf = { stack: "dbcore", name: "VirtualIndexMiddleware", level: 1, create: function(u) {
        return l(l({}, u), { table: function(m) {
          var v = u.table(m), w = v.schema, C = {}, j = [];
          function A(L, X, P) {
            var V = en(L), K = C[V] = C[V] || [], Y = L == null ? 0 : typeof L == "string" ? 1 : L.length, te = 0 < X, te = l(l({}, P), { name: te ? "".concat(V, "(virtual-from:").concat(P.name, ")") : P.name, lowLevelIndex: P, isVirtual: te, keyTail: X, keyLength: Y, extractKey: Gi(L), unique: !te && P.unique });
            return K.push(te), te.isPrimaryKey || j.push(te), 1 < Y && A(Y === 2 ? L[0] : L.slice(0, Y - 1), X + 1, P), K.sort(function(le, fe) {
              return le.keyTail - fe.keyTail;
            }), te;
          }
          m = A(w.primaryKey.keyPath, 0, w.primaryKey), C[":id"] = [m];
          for (var O = 0, q = w.indexes; O < q.length; O++) {
            var H = q[O];
            A(H.keyPath, 0, H);
          }
          function $(L) {
            var X, P = L.query.index;
            return P.isVirtual ? l(l({}, L), { query: { index: P.lowLevelIndex, range: (X = L.query.range, P = P.keyTail, { type: X.type === 1 ? 2 : X.type, lower: Vr(X.lower, X.lowerOpen ? u.MAX_KEY : u.MIN_KEY, P), lowerOpen: !0, upper: Vr(X.upper, X.upperOpen ? u.MIN_KEY : u.MAX_KEY, P), upperOpen: !0 }) } }) : L;
          }
          return l(l({}, v), { schema: l(l({}, w), { primaryKey: m, indexes: j, getIndexByKeyPath: function(L) {
            return (L = C[en(L)]) && L[0];
          } }), count: function(L) {
            return v.count($(L));
          }, query: function(L) {
            return v.query($(L));
          }, openCursor: function(L) {
            var X = L.query.index, P = X.keyTail, V = X.isVirtual, K = X.keyLength;
            return V ? v.openCursor($(L)).then(function(te) {
              return te && Y(te);
            }) : v.openCursor(L);
            function Y(te) {
              return Object.create(te, { continue: { value: function(le) {
                le != null ? te.continue(Vr(le, L.reverse ? u.MAX_KEY : u.MIN_KEY, P)) : L.unique ? te.continue(te.key.slice(0, K).concat(L.reverse ? u.MIN_KEY : u.MAX_KEY, P)) : te.continue();
              } }, continuePrimaryKey: { value: function(le, fe) {
                te.continuePrimaryKey(Vr(le, u.MAX_KEY, P), fe);
              } }, primaryKey: { get: function() {
                return te.primaryKey;
              } }, key: { get: function() {
                var le = te.key;
                return K === 1 ? le[0] : le.slice(0, K);
              } }, value: { get: function() {
                return te.value;
              } } });
            }
          } });
        } });
      } };
      function Al(u, m, v, w) {
        return v = v || {}, w = w || "", f(u).forEach(function(C) {
          var j, A, O;
          x(m, C) ? (j = u[C], A = m[C], typeof j == "object" && typeof A == "object" && j && A ? (O = ke(j)) !== ke(A) ? v[w + C] = m[C] : O === "Object" ? Al(j, A, v, w + C + ".") : j !== A && (v[w + C] = m[C]) : j !== A && (v[w + C] = m[C])) : v[w + C] = void 0;
        }), f(m).forEach(function(C) {
          x(u, C) || (v[w + C] = m[C]);
        }), v;
      }
      function zl(u, m) {
        return m.type === "delete" ? m.keys : m.keys || m.values.map(u.extractKey);
      }
      var lu = { stack: "dbcore", name: "HooksMiddleware", level: 2, create: function(u) {
        return l(l({}, u), { table: function(m) {
          var v = u.table(m), w = v.schema.primaryKey;
          return l(l({}, v), { mutate: function(C) {
            var j = Oe.trans, A = j.table(m).hook, O = A.deleting, q = A.creating, H = A.updating;
            switch (C.type) {
              case "add":
                if (q.fire === bt) break;
                return j._promise("readwrite", function() {
                  return $(C);
                }, !0);
              case "put":
                if (q.fire === bt && H.fire === bt) break;
                return j._promise("readwrite", function() {
                  return $(C);
                }, !0);
              case "delete":
                if (O.fire === bt) break;
                return j._promise("readwrite", function() {
                  return $(C);
                }, !0);
              case "deleteRange":
                if (O.fire === bt) break;
                return j._promise("readwrite", function() {
                  return (function L(X, P, V) {
                    return v.query({ trans: X, values: !1, query: { index: w, range: P }, limit: V }).then(function(K) {
                      var Y = K.result;
                      return $({ type: "delete", keys: Y, trans: X }).then(function(te) {
                        return 0 < te.numFailures ? Promise.reject(te.failures[0]) : Y.length < V ? { failures: [], numFailures: 0, lastResult: void 0 } : L(X, l(l({}, P), { lower: Y[Y.length - 1], lowerOpen: !0 }), V);
                      });
                    });
                  })(C.trans, C.range, 1e4);
                }, !0);
            }
            return v.mutate(C);
            function $(L) {
              var X, P, V, K = Oe.trans, Y = L.keys || zl(w, L);
              if (!Y) throw new Error("Keys missing");
              return (L = L.type === "add" || L.type === "put" ? l(l({}, L), { keys: Y }) : l({}, L)).type !== "delete" && (L.values = s([], L.values)), L.keys && (L.keys = s([], L.keys)), X = v, V = Y, ((P = L).type === "add" ? Promise.resolve([]) : X.getMany({ trans: P.trans, keys: V, cache: "immutable" })).then(function(te) {
                var le = Y.map(function(fe, be) {
                  var Ae, Le, Ce, ze = te[be], Re = { onerror: null, onsuccess: null };
                  return L.type === "delete" ? O.fire.call(Re, fe, ze, K) : L.type === "add" || ze === void 0 ? (Ae = q.fire.call(Re, fe, L.values[be], K), fe == null && Ae != null && (L.keys[be] = fe = Ae, w.outbound || J(L.values[be], w.keyPath, fe))) : (Ae = Al(ze, L.values[be]), (Le = H.fire.call(Re, Ae, fe, ze, K)) && (Ce = L.values[be], Object.keys(Le).forEach(function(Ee) {
                    x(Ce, Ee) ? Ce[Ee] = Le[Ee] : J(Ce, Ee, Le[Ee]);
                  }))), Re;
                });
                return v.mutate(L).then(function(fe) {
                  for (var be = fe.failures, Ae = fe.results, Le = fe.numFailures, fe = fe.lastResult, Ce = 0; Ce < Y.length; ++Ce) {
                    var ze = (Ae || Y)[Ce], Re = le[Ce];
                    ze == null ? Re.onerror && Re.onerror(be[Ce]) : Re.onsuccess && Re.onsuccess(L.type === "put" && te[Ce] ? L.values[Ce] : ze);
                  }
                  return { failures: be, results: Ae, numFailures: Le, lastResult: fe };
                }).catch(function(fe) {
                  return le.forEach(function(be) {
                    return be.onerror && be.onerror(fe);
                  }), Promise.reject(fe);
                });
              });
            }
          } });
        } });
      } };
      function Fo(u, m, v) {
        try {
          if (!m || m.keys.length < u.length) return null;
          for (var w = [], C = 0, j = 0; C < m.keys.length && j < u.length; ++C) st(m.keys[C], u[j]) === 0 && (w.push(v ? Be(m.values[C]) : m.values[C]), ++j);
          return w.length === u.length ? w : null;
        } catch {
          return null;
        }
      }
      var ou = { stack: "dbcore", level: -1, create: function(u) {
        return { table: function(m) {
          var v = u.table(m);
          return l(l({}, v), { getMany: function(w) {
            if (!w.cache) return v.getMany(w);
            var C = Fo(w.keys, w.trans._cache, w.cache === "clone");
            return C ? Ue.resolve(C) : v.getMany(w).then(function(j) {
              return w.trans._cache = { keys: w.keys, values: w.cache === "clone" ? Be(j) : j }, j;
            });
          }, mutate: function(w) {
            return w.type !== "add" && (w.trans._cache = null), v.mutate(w);
          } });
        } };
      } };
      function pi(u, m) {
        return u.trans.mode === "readonly" && !!u.subscr && !u.trans.explicit && u.trans.db._options.cache !== "disabled" && !m.schema.primaryKey.outbound;
      }
      function su(u, m) {
        switch (u) {
          case "query":
            return m.values && !m.unique;
          case "get":
          case "getMany":
          case "count":
          case "openCursor":
            return !1;
        }
      }
      var rf = { stack: "dbcore", level: 0, name: "Observability", create: function(u) {
        var m = u.schema.name, v = new gn(u.MIN_KEY, u.MAX_KEY);
        return l(l({}, u), { transaction: function(w, C, j) {
          if (Oe.subscr && C !== "readonly") throw new Ne.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Oe.querier));
          return u.transaction(w, C, j);
        }, table: function(w) {
          var C = u.table(w), j = C.schema, A = j.primaryKey, L = j.indexes, O = A.extractKey, q = A.outbound, H = A.autoIncrement && L.filter(function(P) {
            return P.compound && P.keyPath.includes(A.keyPath);
          }), $ = l(l({}, C), { mutate: function(P) {
            function V(Ee) {
              return Ee = "idb://".concat(m, "/").concat(w, "/").concat(Ee), fe[Ee] || (fe[Ee] = new gn());
            }
            var K, Y, te, le = P.trans, fe = P.mutatedParts || (P.mutatedParts = {}), be = V(""), Ae = V(":dels"), Le = P.type, Re = P.type === "deleteRange" ? [P.range] : P.type === "delete" ? [P.keys] : P.values.length < 50 ? [zl(A, P).filter(function(Ee) {
              return Ee;
            }), P.values] : [], Ce = Re[0], ze = Re[1], Re = P.trans._cache;
            return g(Ce) ? (be.addKeys(Ce), (Re = Le === "delete" || Ce.length === ze.length ? Fo(Ce, Re) : null) || Ae.addKeys(Ce), (Re || ze) && (K = V, Y = Re, te = ze, j.indexes.forEach(function(Ee) {
              var qe = K(Ee.name || "");
              function Ye(it) {
                return it != null ? Ee.extractKey(it) : null;
              }
              function et(it) {
                return Ee.multiEntry && g(it) ? it.forEach(function(yn) {
                  return qe.addKey(yn);
                }) : qe.addKey(it);
              }
              (Y || te).forEach(function(it, tn) {
                var Je = Y && Ye(Y[tn]), tn = te && Ye(te[tn]);
                st(Je, tn) !== 0 && (Je != null && et(Je), tn != null && et(tn));
              });
            }))) : Ce ? (ze = { from: (ze = Ce.lower) !== null && ze !== void 0 ? ze : u.MIN_KEY, to: (ze = Ce.upper) !== null && ze !== void 0 ? ze : u.MAX_KEY }, Ae.add(ze), be.add(ze)) : (be.add(v), Ae.add(v), j.indexes.forEach(function(Ee) {
              return V(Ee.name).add(v);
            })), C.mutate(P).then(function(Ee) {
              return !Ce || P.type !== "add" && P.type !== "put" || (be.addKeys(Ee.results), H && H.forEach(function(qe) {
                for (var Ye = P.values.map(function(Je) {
                  return qe.extractKey(Je);
                }), et = qe.keyPath.findIndex(function(Je) {
                  return Je === A.keyPath;
                }), it = 0, yn = Ee.results.length; it < yn; ++it) Ye[it][et] = Ee.results[it];
                V(qe.name).addKeys(Ye);
              })), le.mutatedParts = Tl(le.mutatedParts || {}, fe), Ee;
            });
          } }), L = function(V) {
            var K = V.query, V = K.index, K = K.range;
            return [V, new gn((V = K.lower) !== null && V !== void 0 ? V : u.MIN_KEY, (K = K.upper) !== null && K !== void 0 ? K : u.MAX_KEY)];
          }, X = { get: function(P) {
            return [A, new gn(P.key)];
          }, getMany: function(P) {
            return [A, new gn().addKeys(P.keys)];
          }, count: L, query: L, openCursor: L };
          return f(X).forEach(function(P) {
            $[P] = function(V) {
              var K = Oe.subscr, Y = !!K, te = pi(Oe, C) && su(P, V) ? V.obsSet = {} : K;
              if (Y) {
                var le = function(ze) {
                  return ze = "idb://".concat(m, "/").concat(w, "/").concat(ze), te[ze] || (te[ze] = new gn());
                }, fe = le(""), be = le(":dels"), K = X[P](V), Y = K[0], K = K[1];
                if ((P === "query" && Y.isPrimaryKey && !V.values ? be : le(Y.name || "")).add(K), !Y.isPrimaryKey) {
                  if (P !== "count") {
                    var Ae = P === "query" && q && V.values && C.query(l(l({}, V), { values: !1 }));
                    return C[P].apply(this, arguments).then(function(ze) {
                      if (P === "query") {
                        if (q && V.values) return Ae.then(function(Ye) {
                          return Ye = Ye.result, fe.addKeys(Ye), ze;
                        });
                        var Re = V.values ? ze.result.map(O) : ze.result;
                        (V.values ? fe : be).addKeys(Re);
                      } else if (P === "openCursor") {
                        var Ee = ze, qe = V.values;
                        return Ee && Object.create(Ee, { key: { get: function() {
                          return be.addKey(Ee.primaryKey), Ee.key;
                        } }, primaryKey: { get: function() {
                          var Ye = Ee.primaryKey;
                          return be.addKey(Ye), Ye;
                        } }, value: { get: function() {
                          return qe && fe.addKey(Ee.primaryKey), Ee.value;
                        } } });
                      }
                      return ze;
                    });
                  }
                  be.add(v);
                }
              }
              return C[P].apply(this, arguments);
            };
          }), $;
        } });
      } };
      function uu(u, m, v) {
        if (v.numFailures === 0) return m;
        if (m.type === "deleteRange") return null;
        var w = m.keys ? m.keys.length : "values" in m && m.values ? m.values.length : 1;
        return v.numFailures === w ? null : (m = l({}, m), g(m.keys) && (m.keys = m.keys.filter(function(C, j) {
          return !(j in v.failures);
        })), "values" in m && g(m.values) && (m.values = m.values.filter(function(C, j) {
          return !(j in v.failures);
        })), m);
      }
      function Ml(u, m) {
        return v = u, ((w = m).lower === void 0 || (w.lowerOpen ? 0 < st(v, w.lower) : 0 <= st(v, w.lower))) && (u = u, (m = m).upper === void 0 || (m.upperOpen ? st(u, m.upper) < 0 : st(u, m.upper) <= 0));
        var v, w;
      }
      function Vo(u, m, X, w, C, j) {
        if (!X || X.length === 0) return u;
        var A = m.query.index, O = A.multiEntry, q = m.query.range, H = w.schema.primaryKey.extractKey, $ = A.extractKey, L = (A.lowLevelIndex || A).extractKey, X = X.reduce(function(P, V) {
          var K = P, Y = [];
          if (V.type === "add" || V.type === "put") for (var te = new gn(), le = V.values.length - 1; 0 <= le; --le) {
            var fe, be = V.values[le], Ae = H(be);
            te.hasKey(Ae) || (fe = $(be), (O && g(fe) ? fe.some(function(Ee) {
              return Ml(Ee, q);
            }) : Ml(fe, q)) && (te.addKey(Ae), Y.push(be)));
          }
          switch (V.type) {
            case "add":
              var Le = new gn().addKeys(m.values ? P.map(function(qe) {
                return H(qe);
              }) : P), K = P.concat(m.values ? Y.filter(function(qe) {
                return qe = H(qe), !Le.hasKey(qe) && (Le.addKey(qe), !0);
              }) : Y.map(function(qe) {
                return H(qe);
              }).filter(function(qe) {
                return !Le.hasKey(qe) && (Le.addKey(qe), !0);
              }));
              break;
            case "put":
              var Ce = new gn().addKeys(V.values.map(function(qe) {
                return H(qe);
              }));
              K = P.filter(function(qe) {
                return !Ce.hasKey(m.values ? H(qe) : qe);
              }).concat(m.values ? Y : Y.map(function(qe) {
                return H(qe);
              }));
              break;
            case "delete":
              var ze = new gn().addKeys(V.keys);
              K = P.filter(function(qe) {
                return !ze.hasKey(m.values ? H(qe) : qe);
              });
              break;
            case "deleteRange":
              var Re = V.range;
              K = P.filter(function(qe) {
                return !Ml(H(qe), Re);
              });
          }
          return K;
        }, u);
        return X === u ? u : (X.sort(function(P, V) {
          return st(L(P), L(V)) || st(H(P), H(V));
        }), m.limit && m.limit < 1 / 0 && (X.length > m.limit ? X.length = m.limit : u.length === m.limit && X.length < m.limit && (C.dirty = !0)), j ? Object.freeze(X) : X);
      }
      function Xi(u, m) {
        return st(u.lower, m.lower) === 0 && st(u.upper, m.upper) === 0 && !!u.lowerOpen == !!m.lowerOpen && !!u.upperOpen == !!m.upperOpen;
      }
      function Ha(u, m) {
        return (function(v, w, C, j) {
          if (v === void 0) return w !== void 0 ? -1 : 0;
          if (w === void 0) return 1;
          if ((w = st(v, w)) === 0) {
            if (C && j) return 0;
            if (C) return 1;
            if (j) return -1;
          }
          return w;
        })(u.lower, m.lower, u.lowerOpen, m.lowerOpen) <= 0 && 0 <= (function(v, w, C, j) {
          if (v === void 0) return w !== void 0 ? 1 : 0;
          if (w === void 0) return -1;
          if ((w = st(v, w)) === 0) {
            if (C && j) return 0;
            if (C) return -1;
            if (j) return 1;
          }
          return w;
        })(u.upper, m.upper, u.upperOpen, m.upperOpen);
      }
      function af(u, m, v, w) {
        u.subscribers.add(v), w.addEventListener("abort", function() {
          var C, j;
          u.subscribers.delete(v), u.subscribers.size === 0 && (C = u, j = m, setTimeout(function() {
            C.subscribers.size === 0 && Ie(j, C);
          }, 3e3));
        });
      }
      var Ol = { stack: "dbcore", level: 0, name: "Cache", create: function(u) {
        var m = u.schema.name;
        return l(l({}, u), { transaction: function(v, w, C) {
          var j, A, O = u.transaction(v, w, C);
          return w === "readwrite" && (A = (j = new AbortController()).signal, C = function(q) {
            return function() {
              if (j.abort(), w === "readwrite") {
                for (var H = /* @__PURE__ */ new Set(), $ = 0, L = v; $ < L.length; $++) {
                  var X = L[$], P = mi["idb://".concat(m, "/").concat(X)];
                  if (P) {
                    var V = u.table(X), K = P.optimisticOps.filter(function(qe) {
                      return qe.trans === O;
                    });
                    if (O._explicit && q && O.mutatedParts) for (var Y = 0, te = Object.values(P.queries.query); Y < te.length; Y++) for (var le = 0, fe = (Le = te[Y]).slice(); le < fe.length; le++) Io((Ce = fe[le]).obsSet, O.mutatedParts) && (Ie(Le, Ce), Ce.subscribers.forEach(function(qe) {
                      return H.add(qe);
                    }));
                    else if (0 < K.length) {
                      P.optimisticOps = P.optimisticOps.filter(function(qe) {
                        return qe.trans !== O;
                      });
                      for (var be = 0, Ae = Object.values(P.queries.query); be < Ae.length; be++) for (var Le, Ce, ze, Re = 0, Ee = (Le = Ae[be]).slice(); Re < Ee.length; Re++) (Ce = Ee[Re]).res != null && O.mutatedParts && (q && !Ce.dirty ? (ze = Object.isFrozen(Ce.res), ze = Vo(Ce.res, Ce.req, K, V, Ce, ze), Ce.dirty ? (Ie(Le, Ce), Ce.subscribers.forEach(function(qe) {
                        return H.add(qe);
                      })) : ze !== Ce.res && (Ce.res = ze, Ce.promise = Ue.resolve({ result: ze }))) : (Ce.dirty && Ie(Le, Ce), Ce.subscribers.forEach(function(qe) {
                        return H.add(qe);
                      })));
                    }
                  }
                }
                H.forEach(function(qe) {
                  return qe();
                });
              }
            };
          }, O.addEventListener("abort", C(!1), { signal: A }), O.addEventListener("error", C(!1), { signal: A }), O.addEventListener("complete", C(!0), { signal: A })), O;
        }, table: function(v) {
          var w = u.table(v), C = w.schema.primaryKey;
          return l(l({}, w), { mutate: function(j) {
            var A = Oe.trans;
            if (C.outbound || A.db._options.cache === "disabled" || A.explicit || A.idbtrans.mode !== "readwrite") return w.mutate(j);
            var O = mi["idb://".concat(m, "/").concat(v)];
            return O ? (A = w.mutate(j), j.type !== "add" && j.type !== "put" || !(50 <= j.values.length || zl(C, j).some(function(q) {
              return q == null;
            })) ? (O.optimisticOps.push(j), j.mutatedParts && Nl(j.mutatedParts), A.then(function(q) {
              0 < q.numFailures && (Ie(O.optimisticOps, j), (q = uu(0, j, q)) && O.optimisticOps.push(q), j.mutatedParts && Nl(j.mutatedParts));
            }), A.catch(function() {
              Ie(O.optimisticOps, j), j.mutatedParts && Nl(j.mutatedParts);
            })) : A.then(function(q) {
              var H = uu(0, l(l({}, j), { values: j.values.map(function($, L) {
                var X;
                return q.failures[L] ? $ : ($ = (X = C.keyPath) !== null && X !== void 0 && X.includes(".") ? Be($) : l({}, $), J($, C.keyPath, q.results[L]), $);
              }) }), q);
              O.optimisticOps.push(H), queueMicrotask(function() {
                return j.mutatedParts && Nl(j.mutatedParts);
              });
            }), A) : w.mutate(j);
          }, query: function(j) {
            if (!pi(Oe, w) || !su("query", j)) return w.query(j);
            var A = ((H = Oe.trans) === null || H === void 0 ? void 0 : H.db._options.cache) === "immutable", L = Oe, O = L.requery, q = L.signal, H = (function(V, K, Y, te) {
              var le = mi["idb://".concat(V, "/").concat(K)];
              if (!le) return [];
              if (!(K = le.queries[Y])) return [null, !1, le, null];
              var fe = K[(te.query ? te.query.index.name : null) || ""];
              if (!fe) return [null, !1, le, null];
              switch (Y) {
                case "query":
                  var be = fe.find(function(Ae) {
                    return Ae.req.limit === te.limit && Ae.req.values === te.values && Xi(Ae.req.query.range, te.query.range);
                  });
                  return be ? [be, !0, le, fe] : [fe.find(function(Ae) {
                    return ("limit" in Ae.req ? Ae.req.limit : 1 / 0) >= te.limit && (!te.values || Ae.req.values) && Ha(Ae.req.query.range, te.query.range);
                  }), !1, le, fe];
                case "count":
                  return be = fe.find(function(Ae) {
                    return Xi(Ae.req.query.range, te.query.range);
                  }), [be, !!be, le, fe];
              }
            })(m, v, "query", j), $ = H[0], L = H[1], X = H[2], P = H[3];
            return $ && L ? $.obsSet = j.obsSet : (L = w.query(j).then(function(V) {
              var K = V.result;
              if ($ && ($.res = K), A) {
                for (var Y = 0, te = K.length; Y < te; ++Y) Object.freeze(K[Y]);
                Object.freeze(K);
              } else V.result = Be(K);
              return V;
            }).catch(function(V) {
              return P && $ && Ie(P, $), Promise.reject(V);
            }), $ = { obsSet: j.obsSet, promise: L, subscribers: /* @__PURE__ */ new Set(), type: "query", req: j, dirty: !1 }, P ? P.push($) : (P = [$], (X = X || (mi["idb://".concat(m, "/").concat(v)] = { queries: { query: {}, count: {} }, objs: /* @__PURE__ */ new Map(), optimisticOps: [], unsignaledParts: {} })).queries.query[j.query.index.name || ""] = P)), af($, P, O, q), $.promise.then(function(V) {
              return { result: Vo(V.result, j, X == null ? void 0 : X.optimisticOps, w, $, A) };
            });
          } });
        } });
      } };
      function Pa(u, m) {
        return new Proxy(u, { get: function(v, w, C) {
          return w === "db" ? m : Reflect.get(v, w, C);
        } });
      }
      var yr = (It.prototype.version = function(u) {
        if (isNaN(u) || u < 0.1) throw new Ne.Type("Given version is not a positive number");
        if (u = Math.round(10 * u) / 10, this.idbdb || this._state.isBeingOpened) throw new Ne.Schema("Cannot add version when database is open");
        this.verno = Math.max(this.verno, u);
        var m = this._versions, v = m.filter(function(w) {
          return w._cfg.version === u;
        })[0];
        return v || (v = new this.Version(u), m.push(v), m.sort(Oo), v.stores({}), this._state.autoSchema = !1, v);
      }, It.prototype._whenReady = function(u) {
        var m = this;
        return this.idbdb && (this._state.openComplete || Oe.letThrough || this._vip) ? u() : new Ue(function(v, w) {
          if (m._state.openComplete) return w(new Ne.DatabaseClosed(m._state.dbOpenError));
          if (!m._state.isBeingOpened) {
            if (!m._state.autoOpen) return void w(new Ne.DatabaseClosed());
            m.open().catch(bt);
          }
          m._state.dbReadyPromise.then(v, w);
        }).then(u);
      }, It.prototype.use = function(u) {
        var m = u.stack, v = u.create, w = u.level, C = u.name;
        return C && this.unuse({ stack: m, name: C }), u = this._middlewares[m] || (this._middlewares[m] = []), u.push({ stack: m, create: v, level: w ?? 10, name: C }), u.sort(function(j, A) {
          return j.level - A.level;
        }), this;
      }, It.prototype.unuse = function(u) {
        var m = u.stack, v = u.name, w = u.create;
        return m && this._middlewares[m] && (this._middlewares[m] = this._middlewares[m].filter(function(C) {
          return w ? C.create !== w : !!v && C.name !== v;
        })), this;
      }, It.prototype.open = function() {
        var u = this;
        return er(Kt, function() {
          return tf(u);
        });
      }, It.prototype._close = function() {
        this.on.close.fire(new CustomEvent("close"));
        var u = this._state, m = li.indexOf(this);
        if (0 <= m && li.splice(m, 1), this.idbdb) {
          try {
            this.idbdb.close();
          } catch {
          }
          this.idbdb = null;
        }
        u.isBeingOpened || (u.dbReadyPromise = new Ue(function(v) {
          u.dbReadyResolve = v;
        }), u.openCanceller = new Ue(function(v, w) {
          u.cancelOpen = w;
        }));
      }, It.prototype.close = function(v) {
        var m = (v === void 0 ? { disableAutoOpen: !0 } : v).disableAutoOpen, v = this._state;
        m ? (v.isBeingOpened && v.cancelOpen(new Ne.DatabaseClosed()), this._close(), v.autoOpen = !1, v.dbOpenError = new Ne.DatabaseClosed()) : (this._close(), v.autoOpen = this._options.autoOpen || v.isBeingOpened, v.openComplete = !1, v.dbOpenError = null);
      }, It.prototype.delete = function(u) {
        var m = this;
        u === void 0 && (u = { disableAutoOpen: !0 });
        var v = 0 < arguments.length && typeof arguments[0] != "object", w = this._state;
        return new Ue(function(C, j) {
          function A() {
            m.close(u);
            var O = m._deps.indexedDB.deleteDatabase(m.name);
            O.onsuccess = Mt(function() {
              var q, H, $;
              q = m._deps, H = m.name, $ = q.indexedDB, q = q.IDBKeyRange, _l($) || H === Aa || Ro($, q).delete(H).catch(bt), C();
            }), O.onerror = nr(j), O.onblocked = m._fireOnBlocked;
          }
          if (v) throw new Ne.InvalidArgument("Invalid closeOptions argument to db.delete()");
          w.isBeingOpened ? w.dbReadyPromise.then(A) : A();
        });
      }, It.prototype.backendDB = function() {
        return this.idbdb;
      }, It.prototype.isOpen = function() {
        return this.idbdb !== null;
      }, It.prototype.hasBeenClosed = function() {
        var u = this._state.dbOpenError;
        return u && u.name === "DatabaseClosed";
      }, It.prototype.hasFailed = function() {
        return this._state.dbOpenError !== null;
      }, It.prototype.dynamicallyOpened = function() {
        return this._state.autoSchema;
      }, Object.defineProperty(It.prototype, "tables", { get: function() {
        var u = this;
        return f(this._allTables).map(function(m) {
          return u._allTables[m];
        });
      }, enumerable: !1, configurable: !0 }), It.prototype.transaction = function() {
        var u = (function(m, v, w) {
          var C = arguments.length;
          if (C < 2) throw new Ne.InvalidArgument("Too few arguments");
          for (var j = new Array(C - 1); --C; ) j[C - 1] = arguments[C];
          return w = j.pop(), [m, W(j), w];
        }).apply(this, arguments);
        return this._transaction.apply(this, u);
      }, It.prototype._transaction = function(u, m, v) {
        var w = this, C = Oe.trans;
        C && C.db === this && u.indexOf("!") === -1 || (C = null);
        var j, A, O = u.indexOf("?") !== -1;
        u = u.replace("!", "").replace("?", "");
        try {
          if (A = m.map(function(H) {
            if (H = H instanceof w.Table ? H.name : H, typeof H != "string") throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
            return H;
          }), u == "r" || u === Tr) j = Tr;
          else {
            if (u != "rw" && u != Hr) throw new Ne.InvalidArgument("Invalid transaction mode: " + u);
            j = Hr;
          }
          if (C) {
            if (C.mode === Tr && j === Hr) {
              if (!O) throw new Ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
              C = null;
            }
            C && A.forEach(function(H) {
              if (C && C.storeNames.indexOf(H) === -1) {
                if (!O) throw new Ne.SubTransaction("Table " + H + " not included in parent transaction.");
                C = null;
              }
            }), O && C && !C.active && (C = null);
          }
        } catch (H) {
          return C ? C._promise(null, function($, L) {
            L(H);
          }) : Tt(H);
        }
        var q = (function H($, L, X, P, V) {
          return Ue.resolve().then(function() {
            var K = Oe.transless || Oe, Y = $._createTransaction(L, X, $._dbSchema, P);
            if (Y.explicit = !0, K = { trans: Y, transless: K }, P) Y.idbtrans = P.idbtrans;
            else try {
              Y.create(), Y.idbtrans._explicit = !0, $._state.PR1398_maxLoop = 3;
            } catch (fe) {
              return fe.name === $e.InvalidState && $.isOpen() && 0 < --$._state.PR1398_maxLoop ? (console.warn("Dexie: Need to reopen db"), $.close({ disableAutoOpen: !1 }), $.open().then(function() {
                return H($, L, X, null, V);
              })) : Tt(fe);
            }
            var te, le = B(V);
            return le && Xt(), K = Ue.follow(function() {
              var fe;
              (te = V.call(Y, Y)) && (le ? (fe = Rn.bind(null, null), te.then(fe, fe)) : typeof te.next == "function" && typeof te.throw == "function" && (te = qa(te)));
            }, K), (te && typeof te.then == "function" ? Ue.resolve(te).then(function(fe) {
              return Y.active ? fe : Tt(new Ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"));
            }) : K.then(function() {
              return te;
            })).then(function(fe) {
              return P && Y._resolve(), Y._completion.then(function() {
                return fe;
              });
            }).catch(function(fe) {
              return Y._reject(fe), Tt(fe);
            });
          });
        }).bind(null, this, j, A, C, v);
        return C ? C._promise(j, q, "lock") : Oe.trans ? er(Oe.transless, function() {
          return w._whenReady(q);
        }) : this._whenReady(q);
      }, It.prototype.table = function(u) {
        if (!x(this._allTables, u)) throw new Ne.InvalidTable("Table ".concat(u, " does not exist"));
        return this._allTables[u];
      }, It);
      function It(u, m) {
        var v = this;
        this._middlewares = {}, this.verno = 0;
        var w = It.dependencies;
        this._options = m = l({ addons: It.addons, autoOpen: !0, indexedDB: w.indexedDB, IDBKeyRange: w.IDBKeyRange, cache: "cloned" }, m), this._deps = { indexedDB: m.indexedDB, IDBKeyRange: m.IDBKeyRange }, w = m.addons, this._dbSchema = {}, this._versions = [], this._storeNames = [], this._allTables = {}, this.idbdb = null, this._novip = this;
        var C, j, A, O, q, H = { dbOpenError: null, isBeingOpened: !1, onReadyBeingFired: null, openComplete: !1, dbReadyResolve: bt, dbReadyPromise: null, cancelOpen: bt, openCanceller: null, autoSchema: !0, PR1398_maxLoop: 3, autoOpen: m.autoOpen };
        H.dbReadyPromise = new Ue(function(L) {
          H.dbReadyResolve = L;
        }), H.openCanceller = new Ue(function(L, X) {
          H.cancelOpen = X;
        }), this._state = H, this.name = u, this.on = Oa(this, "populate", "blocked", "versionchange", "close", { ready: [Lr, bt] }), this.once = function(L, X) {
          var P = function() {
            for (var V = [], K = 0; K < arguments.length; K++) V[K] = arguments[K];
            v.on(L).unsubscribe(P), X.apply(v, V);
          };
          return v.on(L, P);
        }, this.on.ready.subscribe = ie(this.on.ready.subscribe, function(L) {
          return function(X, P) {
            It.vip(function() {
              var V, K = v._state;
              K.openComplete ? (K.dbOpenError || Ue.resolve().then(X), P && L(X)) : K.onReadyBeingFired ? (K.onReadyBeingFired.push(X), P && L(X)) : (L(X), V = v, P || L(function Y() {
                V.on.ready.unsubscribe(X), V.on.ready.unsubscribe(Y);
              }));
            });
          };
        }), this.Collection = (C = this, mn(Wc.prototype, function(te, Y) {
          this.db = C;
          var P = jo, V = null;
          if (Y) try {
            P = Y();
          } catch (le) {
            V = le;
          }
          var K = te._ctx, Y = K.table, te = Y.hook.reading.fire;
          this._ctx = { table: Y, index: K.index, isPrimKey: !K.index || Y.schema.primKey.keyPath && K.index === Y.schema.primKey.name, range: P, keysOnly: !1, dir: "next", unique: "", algorithm: null, filter: null, replayFilter: null, justLimit: !0, isMatch: null, offset: 0, limit: 1 / 0, error: V, or: K.or, valueMapper: te !== Rr ? te : null };
        })), this.Table = (j = this, mn(To.prototype, function(L, X, P) {
          this.db = j, this._tx = P, this.name = L, this.schema = X, this.hook = j._allTables[L] ? j._allTables[L].hook : Oa(null, { creating: [Bi, bt], reading: [_r, Rr], updating: [dl, bt], deleting: [fl, bt] });
        })), this.Transaction = (A = this, mn(Mo.prototype, function(L, X, P, V, K) {
          var Y = this;
          L !== "readonly" && X.forEach(function(te) {
            te = (te = P[te]) === null || te === void 0 ? void 0 : te.yProps, te && (X = X.concat(te.map(function(le) {
              return le.updatesTable;
            })));
          }), this.db = A, this.mode = L, this.storeNames = X, this.schema = P, this.chromeTransactionDurability = V, this.idbtrans = null, this.on = Oa(this, "complete", "error", "abort"), this.parent = K || null, this.active = !0, this._reculock = 0, this._blockedFuncs = [], this._resolve = null, this._reject = null, this._waitingFor = null, this._waitingQueue = null, this._spinCount = 0, this._completion = new Ue(function(te, le) {
            Y._resolve = te, Y._reject = le;
          }), this._completion.then(function() {
            Y.active = !1, Y.on.complete.fire();
          }, function(te) {
            var le = Y.active;
            return Y.active = !1, Y.on.error.fire(te), Y.parent ? Y.parent._reject(te) : le && Y.idbtrans && Y.idbtrans.abort(), Tt(te);
          });
        })), this.Version = (O = this, mn(ef.prototype, function(L) {
          this.db = O, this._cfg = { version: L, storesSource: null, dbschema: {}, tables: {}, contentUpgrade: null };
        })), this.WhereClause = (q = this, mn(ui.prototype, function(L, X, P) {
          if (this.db = q, this._ctx = { table: L, index: X === ":id" ? null : X, or: P }, this._cmp = this._ascending = st, this._descending = function(V, K) {
            return st(K, V);
          }, this._max = function(V, K) {
            return 0 < st(V, K) ? V : K;
          }, this._min = function(V, K) {
            return st(V, K) < 0 ? V : K;
          }, this._IDBKeyRange = q._deps.IDBKeyRange, !this._IDBKeyRange) throw new Ne.MissingAPI();
        })), this.on("versionchange", function(L) {
          0 < L.newVersion ? console.warn("Another connection wants to upgrade database '".concat(v.name, "'. Closing db now to resume the upgrade.")) : console.warn("Another connection wants to delete database '".concat(v.name, "'. Closing db now to resume the delete request.")), v.close({ disableAutoOpen: !1 });
        }), this.on("blocked", function(L) {
          !L.newVersion || L.newVersion < L.oldVersion ? console.warn("Dexie.delete('".concat(v.name, "') was blocked")) : console.warn("Upgrade '".concat(v.name, "' blocked by other connection holding version ").concat(L.oldVersion / 10));
        }), this._maxKey = Ki(m.IDBKeyRange), this._createTransaction = function(L, X, P, V) {
          return new v.Transaction(L, X, P, v._options.chromeTransactionDurability, V);
        }, this._fireOnBlocked = function(L) {
          v.on("blocked").fire(L), li.filter(function(X) {
            return X.name === v.name && X !== v && !X._state.vcFired;
          }).map(function(X) {
            return X.on("versionchange").fire(L);
          });
        }, this.use(ou), this.use(Ol), this.use(rf), this.use(nf), this.use(lu);
        var $ = new Proxy(this, { get: function(L, X, P) {
          if (X === "_vip") return !0;
          if (X === "table") return function(K) {
            return Pa(v.table(K), $);
          };
          var V = Reflect.get(L, X, P);
          return V instanceof To ? Pa(V, $) : X === "tables" ? V.map(function(K) {
            return Pa(K, $);
          }) : X === "_createTransaction" ? function() {
            return Pa(V.apply(this, arguments), $);
          } : V;
        } });
        this.vip = $, w.forEach(function(L) {
          return L(v);
        });
      }
      var Qi, Bn = typeof Symbol < "u" && "observable" in Symbol ? Symbol.observable : "@@observable", cu = (Dl.prototype.subscribe = function(u, m, v) {
        return this._subscribe(u && typeof u != "function" ? u : { next: u, error: m, complete: v });
      }, Dl.prototype[Bn] = function() {
        return this;
      }, Dl);
      function Dl(u) {
        this._subscribe = u;
      }
      try {
        Qi = { indexedDB: c.indexedDB || c.mozIndexedDB || c.webkitIndexedDB || c.msIndexedDB, IDBKeyRange: c.IDBKeyRange || c.webkitIDBKeyRange };
      } catch {
        Qi = { indexedDB: null, IDBKeyRange: null };
      }
      function fu(u) {
        var m, v = !1, w = new cu(function(C) {
          var j = B(u), A, O = !1, q = {}, H = {}, $ = { get closed() {
            return O;
          }, unsubscribe: function() {
            O || (O = !0, A && A.abort(), L && pn.storagemutated.unsubscribe(P));
          } };
          C.start && C.start($);
          var L = !1, X = function() {
            return qr(V);
          }, P = function(K) {
            Tl(q, K), Io(H, q) && X();
          }, V = function() {
            var K, Y, te;
            !O && Qi.indexedDB && (q = {}, K = {}, A && A.abort(), A = new AbortController(), te = (function(le) {
              var fe = Br();
              try {
                j && Xt();
                var be = Rt(u, le);
                return be = j ? be.finally(Rn) : be;
              } finally {
                fe && hr();
              }
            })(Y = { subscr: K, signal: A.signal, requery: X, querier: u, trans: null }), Promise.resolve(te).then(function(le) {
              v = !0, m = le, O || Y.signal.aborted || (q = {}, (function(fe) {
                for (var be in fe) if (x(fe, be)) return;
                return 1;
              })(H = K) || L || (pn(Fi, P), L = !0), qr(function() {
                return !O && C.next && C.next(le);
              }));
            }, function(le) {
              v = !1, ["DatabaseClosedError", "AbortError"].includes(le == null ? void 0 : le.name) || O || qr(function() {
                O || C.error && C.error(le);
              });
            }));
          };
          return setTimeout(X, 0), $;
        });
        return w.hasValue = function() {
          return v;
        }, w.getValue = function() {
          return m;
        }, w;
      }
      var gi = yr;
      function Ko(u) {
        var m = Kr;
        try {
          Kr = !0, pn.storagemutated.fire(u), Po(u, !0);
        } finally {
          Kr = m;
        }
      }
      _(gi, l(l({}, qn), { delete: function(u) {
        return new gi(u, { addons: [] }).delete();
      }, exists: function(u) {
        return new gi(u, { addons: [] }).open().then(function(m) {
          return m.close(), !0;
        }).catch("NoSuchDatabaseError", function() {
          return !1;
        });
      }, getDatabaseNames: function(u) {
        try {
          return m = gi.dependencies, v = m.indexedDB, m = m.IDBKeyRange, (_l(v) ? Promise.resolve(v.databases()).then(function(w) {
            return w.map(function(C) {
              return C.name;
            }).filter(function(C) {
              return C !== Aa;
            });
          }) : Ro(v, m).toCollection().primaryKeys()).then(u);
        } catch {
          return Tt(new Ne.MissingAPI());
        }
        var m, v;
      }, defineClass: function() {
        return function(u) {
          y(this, u);
        };
      }, ignoreTransaction: function(u) {
        return Oe.trans ? er(Oe.transless, u) : u();
      }, vip: Lo, async: function(u) {
        return function() {
          try {
            var m = qa(u.apply(this, arguments));
            return m && typeof m.then == "function" ? m : Ue.resolve(m);
          } catch (v) {
            return Tt(v);
          }
        };
      }, spawn: function(u, m, v) {
        try {
          var w = qa(u.apply(v, m || []));
          return w && typeof w.then == "function" ? w : Ue.resolve(w);
        } catch (C) {
          return Tt(C);
        }
      }, currentTransaction: { get: function() {
        return Oe.trans || null;
      } }, waitFor: function(u, m) {
        return m = Ue.resolve(typeof u == "function" ? gi.ignoreTransaction(u) : u).timeout(m || 6e4), Oe.trans ? Oe.trans.waitFor(m) : m;
      }, Promise: Ue, debug: { get: function() {
        return jn;
      }, set: function(u) {
        hl(u);
      } }, derive: U, extend: y, props: _, override: ie, Events: Oa, on: pn, liveQuery: fu, extendObservabilitySet: Tl, getByKeyPath: I, setByKeyPath: J, delByKeyPath: function(u, m) {
        typeof m == "string" ? J(u, m, void 0) : "length" in m && [].map.call(m, function(v) {
          J(u, v, void 0);
        });
      }, shallowClone: De, deepClone: Be, getObjectDiff: Al, cmp: st, asap: we, minKey: -1 / 0, addons: [], connections: li, errnames: $e, dependencies: Qi, cache: mi, semVer: "4.2.1", version: "4.2.1".split(".").map(function(u) {
        return parseInt(u);
      }).reduce(function(u, m, v) {
        return u + m / Math.pow(10, 2 * v);
      }) })), gi.maxKey = Ki(gi.dependencies.IDBKeyRange), typeof dispatchEvent < "u" && typeof addEventListener < "u" && (pn(Fi, function(u) {
        Kr || (u = new CustomEvent(fi, { detail: u }), Kr = !0, dispatchEvent(u), Kr = !1);
      }), addEventListener(fi, function(u) {
        u = u.detail, Kr || Ko(u);
      }));
      var Zi, Kr = !1, An = function() {
      };
      return typeof BroadcastChannel < "u" && ((An = function() {
        (Zi = new BroadcastChannel(fi)).onmessage = function(u) {
          return u.data && Ko(u.data);
        };
      })(), typeof Zi.unref == "function" && Zi.unref(), pn(Fi, function(u) {
        Kr || Zi.postMessage(u);
      })), typeof addEventListener < "u" && (addEventListener("pagehide", function(u) {
        if (!yr.disableBfCache && u.persisted) {
          jn && console.debug("Dexie: handling persisted pagehide"), Zi != null && Zi.close();
          for (var m = 0, v = li; m < v.length; m++) v[m].close({ disableAutoOpen: !1 });
        }
      }), addEventListener("pageshow", function(u) {
        !yr.disableBfCache && u.persisted && (jn && console.debug("Dexie: handling persisted pageshow"), An(), Ko({ all: new gn(-1 / 0, [[]]) }));
      })), Ue.rejectionMapper = function(u, m) {
        return !u || u instanceof z || u instanceof TypeError || u instanceof SyntaxError || !u.name || !xn[u.name] ? u : (m = new xn[u.name](m || u.message, u), "stack" in u && N(m, "stack", { get: function() {
          return this.inner.stack;
        } }), m);
      }, hl(jn), l(yr, Object.freeze({ __proto__: null, Dexie: yr, liveQuery: fu, Entity: Ws, cmp: st, PropModification: Pi, replacePrefix: function(u, m) {
        return new Pi({ replacePrefix: [u, m] });
      }, add: function(u) {
        return new Pi({ add: u });
      }, remove: function(u) {
        return new Pi({ remove: u });
      }, default: yr, RangeSet: gn, mergeRanges: hi, rangesOverlap: ru }), { default: yr }), yr;
    });
  })(Ec)), Ec.exports;
}
var mw = hw();
const Fh = /* @__PURE__ */ ul(mw), W1 = Symbol.for("Dexie"), Dc = globalThis[W1] || (globalThis[W1] = Fh);
if (Fh.semVer !== Dc.semVer)
  throw new Error(`Two different versions of Dexie loaded in the same app: ${Fh.semVer} and ${Dc.semVer}`);
const {
  liveQuery: Kk,
  mergeRanges: Gk,
  rangesOverlap: $k,
  RangeSet: Yk,
  cmp: Xk,
  Entity: Qk,
  PropModification: Zk,
  replacePrefix: Wk,
  add: Jk,
  remove: eC,
  DexieYProvider: tC
} = Dc;
class pw extends Dc {
  constructor() {
    super("EngramDB");
    dt(this, "scopes");
    dt(this, "events");
    dt(this, "entities");
    dt(this, "logs");
    this.version(1).stores({
      entities: "id, name, type, brainId",
      events: "id, timestamp, significance, brainId, *relatedEntities"
    }), this.version(2).stores({
      entities: "id, name, type, brainId",
      events: "id, timestamp, significance, brainId, *relatedEntities",
      logs: "id, timestamp, level, module"
    }), this.version(3).stores({
      // Scopes: Unique context container
      // V0.5:  chat_id character_name 
      scopes: "++id, &uuid, &chat_id, last_active_at",
      // Events: The core memory unit
      // Indexed by scope, source range (for rollback), significance, and recursive level
      events: "id, scope_id, [source_range.start_index+source_range.end_index], significance_score, level",
      // Entities: Graph nodes
      // Compound index [scope_id+name] ensures uniqueness within a scope
      entities: "[scope_id+name], type, last_updated_at",
      // Logs: Debugging (Unchanged)
      logs: "id, timestamp, level, module"
    }).upgrade((i) => Promise.all([
      i.table("events").clear(),
      i.table("entities").clear()
      // We don't clear logs as they might be useful
    ]));
  }
}
const Mn = new pw(), gw = [
  // 
  { pattern: /\n{3,}/g, replacement: `

`, description: "" },
  // 
  { pattern: /^[ \t]+|[ \t]+$/gm, replacement: "", description: "" },
  //  Markdown 
  { pattern: /```\w*\n?/g, replacement: "", description: "Markdown" },
  // 
  { pattern: /[""]/g, replacement: '"', description: "" },
  { pattern: /['']/g, replacement: "'", description: "" },
  //  LLM 
  { pattern: /^(|||).{0,20}[:]\s*/gm, replacement: "", description: "LLM" },
  // 
  { pattern: /\n*.{0,50}.{0,30}[]?\s*$/g, replacement: "", description: "" }
];
class q2 {
  constructor(r) {
    dt(this, "rules");
    this.rules = r || gw;
  }
  /**
   *  LLM 
   * @param text 
   * @returns 
   */
  clean(r) {
    let i = r;
    for (const l of this.rules)
      i = i.replace(l.pattern, l.replacement);
    return i.trim();
  }
  /**
   * 
   * @param summary 
   * @param metadata 
   */
  formatAsWorldEntry(r, i) {
    let s = `  [${`${i.floorRange[0]}-${i.floorRange[1]}`}]
`;
    return s += r, s;
  }
  /**
   * 
   * @param text 
   */
  extractPlainText(r) {
    return r.replace(/```[\s\S]*?```/g, "").replace(/\[([^\]]+)\]\([^)]+\)/g, "$1").replace(/[*_~`#]/g, "").replace(/\n{2,}/g, `
`).trim();
  }
  /**
   * 
   * @param text 
   * @param maxLength 
   * @param suffix 
   */
  truncate(r, i, l = "...") {
    return r.length <= i ? r : r.slice(0, i - l.length) + l;
  }
  /**
   * 
   */
  addRule(r) {
    this.rules.push(r);
  }
  /**
   * 
   */
  getRules() {
    return [...this.rules];
  }
}
const H2 = new q2();
function J1() {
  try {
    return window.TavernHelper || null;
  } catch {
    return null;
  }
}
class P2 {
  /**
   *  LLM 
   * @param request 
   */
  async generate(r) {
    const i = J1();
    if (!(i != null && i.generateRaw) && !(i != null && i.generate))
      return {
        success: !1,
        content: "",
        error: "TavernHelper "
      };
    try {
      let l;
      if (i.generateRaw)
        l = await i.generateRaw({
          ordered_prompts: [
            { role: "system", content: r.systemPrompt },
            { role: "user", content: r.userPrompt }
          ]
        });
      else if (i.generate)
        l = await i.generate({
          user_input: r.userPrompt,
          system_prompt: r.systemPrompt,
          should_stream: !1,
          max_chat_history: 0
        });
      else
        throw new Error(" API");
      return {
        success: !0,
        content: l || ""
      };
    } catch (l) {
      const s = l instanceof Error ? l.message : String(l);
      return console.error("[Engram] LLMAdapter :", l), {
        success: !1,
        content: "",
        error: s
      };
    }
  }
  /**
   *  LLM API 
   */
  isAvailable() {
    const r = J1();
    return !!(r != null && r.generate || r != null && r.generateRaw);
  }
  /**
   *  Token 
   * @param text 
   */
  estimateTokens(r) {
    return Math.ceil(r.length / 3);
  }
}
const Yc = new P2(), ll = class ll {
  constructor() {
    dt(this, "unsubscribers", []);
    dt(this, "callbacks", /* @__PURE__ */ new Map());
  }
  /**
   * 
   */
  static getInstance() {
    return ll.instance || (ll.instance = new ll()), ll.instance;
  }
  /**
   * 
   * 
   */
  start() {
    if (this.unsubscribers.length > 0) {
      console.log("[EventWatcher] Already started.");
      return;
    }
    this.unsubscribers.push(
      Or.on(Wr.MESSAGE_RECEIVED, () => this.emit("messageReceived")),
      Or.on(Wr.CHAT_CHANGED, () => this.emit("chatChanged")),
      Or.on(Wr.GENERATION_STARTED, () => this.emit("generationStarted")),
      Or.on(Wr.GENERATION_ENDED, () => this.emit("generationEnded"))
    ), console.log("[EventWatcher] Started, listening to core events.");
  }
  /**
   * 
   */
  stop() {
    this.unsubscribers.forEach((r) => r()), this.unsubscribers = [], console.log("[EventWatcher] Stopped.");
  }
  /**
   * 
   * @param event 
   * @param callback 
   * @returns 
   */
  on(r, i) {
    const l = this.mapEventKey(r);
    return this.callbacks.has(l) || this.callbacks.set(l, /* @__PURE__ */ new Set()), this.callbacks.get(l).add(i), () => {
      var s;
      (s = this.callbacks.get(l)) == null || s.delete(i);
    };
  }
  /**
   * 
   */
  emit(r) {
    const i = this.callbacks.get(r);
    i && i.forEach((l) => {
      try {
        l();
      } catch (s) {
        console.error(`[EventWatcher] Callback error for ${r}:`, s);
      }
    });
  }
  /**
   * 
   */
  mapEventKey(r) {
    return {
      onMessageReceived: "messageReceived",
      onChatChanged: "chatChanged",
      onGenerationStarted: "generationStarted",
      onGenerationEnded: "generationEnded"
    }[r];
  }
};
dt(ll, "instance", null);
let Vh = ll;
const wh = Vh.getInstance(), ey = [
  { value: "input", label: "", description: " LLM " },
  { value: "output", label: "", description: " LLM /" },
  { value: "both", label: "", description: "" }
], Ps = [
  {
    id: "remove-think",
    name: "",
    pattern: "<think>[\\s\\S]*?</think>",
    replacement: "",
    enabled: !0,
    flags: "gi",
    scope: "output",
    description: " LLM  <think>...</think> "
  },
  {
    id: "remove-headless-think",
    name: "",
    pattern: "[\\s\\S]*?</think>",
    replacement: "",
    enabled: !0,
    flags: "g",
    scope: "output",
    description: " </think> "
  },
  {
    id: "remove-update-variable",
    name: " UpdateVariable",
    pattern: "<UpdateVariable>[\\s\\S]*?</UpdateVariable>",
    replacement: "",
    enabled: !0,
    flags: "gi",
    scope: "output",
    description: " MVU "
  },
  {
    id: "remove-status-placeholder",
    name: " StatusPlaceHolder",
    pattern: "<StatusPlaceHolderImpl\\s*/>",
    replacement: "",
    enabled: !0,
    flags: "gi",
    scope: "input",
    description: ""
  }
];
class _m {
  constructor(r) {
    dt(this, "rules", []);
    this.rules = r || [...Ps];
  }
  /**
   * 
   * @param text 
   * @param scope 
   */
  process(r, i) {
    let l = r;
    for (const s of this.rules)
      if (s.enabled && !(i && s.scope !== i && s.scope !== "both"))
        try {
          const c = new RegExp(s.pattern, s.flags);
          l = l.replace(c, s.replacement);
        } catch (c) {
          console.warn(`[RegexProcessor]  "${s.name}" :`, c);
        }
    return l;
  }
  /**
   * 
   */
  processWithRule(r, i) {
    try {
      const l = new RegExp(i.pattern, i.flags);
      return r.replace(l, i.replacement);
    } catch (l) {
      return console.warn("[RegexProcessor] :", l), r;
    }
  }
  /**
   * 
   */
  validatePattern(r, i) {
    try {
      return new RegExp(r, i), { valid: !0 };
    } catch (l) {
      return {
        valid: !1,
        error: l instanceof Error ? l.message : ""
      };
    }
  }
  /**
   * 
   */
  getRules() {
    return [...this.rules];
  }
  /**
   * 
   */
  setRules(r) {
    this.rules = [...r];
  }
  /**
   * 
   */
  addRule(r) {
    this.rules.push(r);
  }
  /**
   * 
   */
  updateRule(r, i) {
    const l = this.rules.findIndex((s) => s.id === r);
    l >= 0 && (this.rules[l] = { ...this.rules[l], ...i });
  }
  /**
   * 
   */
  deleteRule(r) {
    this.rules = this.rules.filter((i) => i.id !== r);
  }
  /**
   * /
   */
  toggleRule(r) {
    const i = this.rules.find((l) => l.id === r);
    i && (i.enabled = !i.enabled);
  }
  /**
   * 
   */
  resetToDefaults() {
    this.rules = [...Ps];
  }
  /**
   * 
   */
  getEnabledCount() {
    return this.rules.filter((r) => r.enabled).length;
  }
}
const Fs = new _m();
class yw {
  /**
   * Clean and parse JSON from a string.
   * @param input Raw string from LLM
   * @returns Parsed object or null if failed
   */
  static parse(r) {
    const i = Fs.process(r, "output"), l = this.extractJsonBlock(i);
    if (!l)
      return console.warn("[RobustJsonParser] No JSON block found."), null;
    try {
      return JSON.parse(l);
    } catch {
      const c = this.simpleRepair(l);
      try {
        return JSON.parse(c);
      } catch (f) {
        return console.error("[RobustJsonParser] Parse failed:", f), console.debug("[RobustJsonParser] Failed string:", l), null;
      }
    }
  }
  /**
   * Extracts the likely JSON part from a string.
   * Prioritizes ```json ... ``` blocks, then looks for outer { ... }.
   */
  static extractJsonBlock(r) {
    const i = r.match(/```(?:json)?\s*([\s\S]*?)```/i);
    if (i && i[1])
      return i[1].trim();
    const l = r.indexOf("{"), s = r.lastIndexOf("}");
    return l !== -1 && s !== -1 && s > l ? r.substring(l, s + 1) : null;
  }
  /**
   * Simple JSON repair logic
   * Fixes common LLM JSON errors:
   * - Trailing commas
   * - Unquoted keys (simple cases)
   * - Single quotes
   */
  static simpleRepair(r) {
    let i = r;
    return i = i.replace(/,\s*([}\]])/g, "$1"), i;
  }
}
const ty = 100;
class bw {
  constructor() {
    dt(this, "entries", []);
    dt(this, "listeners", /* @__PURE__ */ new Set());
  }
  /**
   * 
   */
  logSend(r) {
    const i = `log_${Date.now()}_${Math.random().toString(36).slice(2, 8)}`, l = {
      id: i,
      timestamp: Date.now(),
      type: r.type,
      direction: "sent",
      systemPrompt: r.systemPrompt,
      userPrompt: r.userPrompt,
      tokensSent: r.tokensSent,
      model: r.model,
      character: r.character,
      floorRange: r.floorRange,
      status: "pending"
    };
    return this.entries.unshift(l), this.trimEntries(), this.notifyListeners(), i;
  }
  /**
   * 
   */
  logReceive(r, i) {
    const l = this.entries.find((f) => f.id === r);
    if (!l) return;
    const s = {
      id: `${r}_recv`,
      timestamp: Date.now(),
      type: l.type,
      direction: "received",
      response: i.response,
      tokensReceived: i.tokensReceived,
      status: i.status,
      error: i.error,
      duration: i.duration,
      model: l.model,
      character: l.character,
      floorRange: l.floorRange
    };
    l.status = i.status, l.duration = i.duration;
    const c = this.entries.findIndex((f) => f.id === r);
    c >= 0 ? this.entries.splice(c, 0, s) : this.entries.unshift(s), this.trimEntries(), this.notifyListeners();
  }
  /**
   * 
   */
  async logCall(r, i) {
    const l = this.logSend(r), s = Date.now();
    try {
      const c = await i();
      return this.logReceive(l, {
        response: typeof c == "string" ? c : JSON.stringify(c),
        status: "success",
        duration: Date.now() - s
      }), c;
    } catch (c) {
      throw this.logReceive(l, {
        status: "error",
        error: c instanceof Error ? c.message : String(c),
        duration: Date.now() - s
      }), c;
    }
  }
  /**
   * 
   */
  getAll() {
    return [...this.entries];
  }
  /**
   * +
   */
  getPaired() {
    const r = [], i = this.entries.filter((l) => l.direction === "sent");
    for (const l of i) {
      const s = this.entries.find(
        (c) => c.id === `${l.id}_recv` && c.direction === "received"
      );
      r.push({ sent: l, received: s });
    }
    return r;
  }
  /**
   * 
   */
  clear() {
    this.entries = [], this.notifyListeners();
  }
  /**
   * 
   */
  subscribe(r) {
    return this.listeners.add(r), () => this.listeners.delete(r);
  }
  /**
   * 
   */
  getCount() {
    return this.entries.filter((r) => r.direction === "sent").length;
  }
  /**
   * 
   */
  trimEntries() {
    this.entries.length > ty * 2 && (this.entries = this.entries.slice(0, ty * 2));
  }
  /**
   * 
   */
  notifyListeners() {
    for (const r of this.listeners)
      r();
  }
}
const Jr = new bw();
class xw {
  /**
   * 
   * @param messages 
   * @param context  ( Prompt)
   * @returns  null
   */
  async extract(r, i) {
    var S;
    if (!r || r.length === 0)
      return console.warn("[Extractor] No messages to extract"), null;
    const { systemPrompt: l, userPrompt: s } = await this.buildPrompts(r, i), c = Jr.logSend({
      type: "extract",
      systemPrompt: l,
      userPrompt: s,
      floorRange: [0, r.length],
      model: Em(),
      character: (S = Hs()) == null ? void 0 : S.name
    }), f = Date.now(), g = await Yc.generate({
      systemPrompt: l,
      userPrompt: s
    });
    if (Jr.logReceive(c, {
      response: g.content,
      status: g.success ? "success" : "error",
      error: g.error,
      duration: Date.now() - f
    }), !g.success || !g.content)
      return console.error("[Extractor] LLM call failed:", g.error), null;
    const y = yw.parse(g.content);
    if (!y || !y.events)
      return console.error("[Extractor] JSON parsing failed or no events"), null;
    const b = y.events.filter(
      (x) => x.summary && x.meta && typeof x.significance_score == "number"
    );
    return b.length === 0 ? (console.warn("[Extractor] No valid events extracted"), null) : (console.log(`[Extractor] Extracted ${b.length} events`), b);
  }
  /**
   *  Prompt
   */
  async buildPrompts(r, i) {
    const l = await nt.getEnabledPromptTemplate("summary");
    let s = (l == null ? void 0 : l.systemPrompt) || this.getDefaultSystemPrompt(), c = (l == null ? void 0 : l.userPromptTemplate) || this.getDefaultUserPrompt();
    const f = r.map((y) => `${y.name || (y.role === "user" ? "User" : "Char")}: ${y.content}`).join(`

`), g = c.replace("{{chatHistory}}", f).replace("{{worldbookContext}}", (i == null ? void 0 : i.worldbookContext) || "").replace("{{engramSummaries}}", (i == null ? void 0 : i.engramSummaries) || "");
    return { systemPrompt: s, userPrompt: g };
  }
  /**
   * 
   */
  getDefaultSystemPrompt() {
    return `

 JSON:
{
  "events": [
    {
      "summary": "",
      "meta": {
        "time_anchor": ": 102344 ",
        "role": ["A", "B"],
        "location": "",
        "event": "",
        "logic": ["1", "2"],
        "causality": "Start"
      },
      "significance_score": 0.7
    }
  ]
}


- summary:  RAG
- meta.role: 
- meta.location: 
- meta.event: 
- meta.logic:  (: , , )
- meta.causality: "Start"=, "Chain"=, "End"=
- significance_score: 0.0-1.0

 JSON`;
  }
  /**
   * 
   */
  getDefaultUserPrompt() {
    return `

{{chatHistory}}

{{#if worldbookContext}}

{{worldbookContext}}
{{/if}}

 JSON `;
  }
}
const vw = new xw();
class Sw {
  /**
   * Resolve a Scope based on Chat ID.
   * V0.5:  chat_id character_name 
   *
   * @param chatId -  UUID ()
   * @param characterName -  ( UI )
   */
  async resolveScope(r, i = "Unknown") {
    const l = await Mn.scopes.where("chat_id").equals(r).first();
    if (l)
      return await Mn.scopes.update(l.id, {
        last_active_at: Date.now()
      }), { ...l, last_active_at: Date.now() };
    const s = {
      uuid: Ey(),
      chat_id: r,
      character_name: i,
      state: {
        // Initialize state
        last_summarized_floor: 0,
        token_usage_accumulated: 0,
        last_compressed_at: 0,
        active_summary_order: 9e3
        // Start order for WorldBook entries
      },
      created_at: Date.now(),
      last_active_at: Date.now()
    }, c = await Mn.scopes.add(s);
    return { ...s, id: c };
  }
  /**
   * Get Scope by ID
   */
  async getScope(r) {
    return Mn.scopes.get(r);
  }
  /**
   * Update Scope State
   * Used by Pipeline to save progress.
   */
  async updateState(r, i) {
    const l = await Mn.scopes.get(r);
    if (!l) {
      console.warn(`[ScopeManager] Scope ${r} not found for updateState`);
      return;
    }
    const s = {
      ...l.state,
      ...i
    };
    await Mn.scopes.update(r, {
      state: s
    });
  }
  /**
   * Reset Scope State (Debug/Dev only)
   */
  async resetState(r) {
    await Mn.scopes.get(r) && await Mn.scopes.update(r, {
      state: {
        last_summarized_floor: 0,
        token_usage_accumulated: 0,
        last_compressed_at: 0,
        active_summary_order: 9e3
      }
    });
  }
}
const Kh = new Sw(), Vs = Cy((n, r) => ({
  currentScope: null,
  lastSummarizedFloor: 0,
  isProcessing: !1,
  recentEvents: [],
  resolveScope: async (i, l) => {
    const s = await Kh.resolveScope(i, l || "Unknown");
    return n({
      currentScope: s,
      lastSummarizedFloor: s.state.last_summarized_floor
    }), s;
  },
  saveEvent: async (i) => {
    const l = r().currentScope;
    if (!(l != null && l.id))
      throw new Error("[MemoryStore] No current scope");
    const s = {
      ...i,
      id: crypto.randomUUID(),
      scope_id: l.id,
      timestamp: Date.now()
    };
    return await Mn.events.add(s), n((c) => ({
      recentEvents: [...c.recentEvents, s].slice(-10)
      //  10 
    })), s;
  },
  /**
   *  Scope 
   *  {{engramSummaries}} 
   * <summary>\n1\n2...\n</summary>
   */
  getEventSummaries: async () => {
    const i = r().currentScope;
    if (!(i != null && i.id))
      return "";
    try {
      const l = await Mn.events.where("scope_id").equals(i.id).sortBy("timestamp");
      return l.length === 0 ? "" : `<summary>
${l.map((c) => c.summary).join(`

`)}
</summary>`;
    } catch (l) {
      return console.error("[MemoryStore] Failed to get event summaries:", l), "";
    }
  },
  /**
   *  Scope  Token 
   *  WorldInfoService.countTokens()  ST tokenizer
   */
  countEventTokens: async () => {
    const i = r().currentScope;
    if (!(i != null && i.id))
      return { totalTokens: 0, eventCount: 0 };
    try {
      const l = await Mn.events.where("scope_id").equals(i.id).toArray();
      if (l.length === 0)
        return { totalTokens: 0, eventCount: 0 };
      const s = l.map((f) => f.summary).join(`

`);
      return { totalTokens: await kt.countTokens(s), eventCount: l.length };
    } catch (l) {
      return console.error("[MemoryStore] Failed to count event tokens:", l), { totalTokens: 0, eventCount: 0 };
    }
  },
  setLastSummarizedFloor: async (i) => {
    const l = r().currentScope;
    l != null && l.id && await Kh.updateState(l.id, {
      last_summarized_floor: i
    }), n({ lastSummarizedFloor: i });
  },
  setProcessing: (i) => n({ isProcessing: i }),
  reset: () => n({
    currentScope: null,
    lastSummarizedFloor: 0,
    isProcessing: !1,
    recentEvents: []
  }),
  // ==================== Trim  ====================
  /**
   *  ( N )
   * @param keepRecentCount  N 
   */
  getEventsToMerge: async (i = 3) => {
    const l = r().currentScope;
    if (!(l != null && l.id)) return [];
    try {
      const s = await Mn.events.where("scope_id").equals(l.id).sortBy("timestamp");
      return s.length <= i ? [] : s.slice(0, s.length - i);
    } catch (s) {
      return console.error("[MemoryStore] Failed to get events to merge:", s), [];
    }
  },
  /**
   * 
   * @param eventIds  ID 
   */
  deleteEvents: async (i) => {
    if (i.length !== 0)
      try {
        await Mn.events.bulkDelete(i), console.log(`[MemoryStore] Deleted ${i.length} events`);
      } catch (l) {
        throw console.error("[MemoryStore] Failed to delete events:", l), l;
      }
  },
  /**
   *  Scope 
   */
  getAllEvents: async () => {
    const i = r().currentScope;
    if (!(i != null && i.id)) return [];
    try {
      return await Mn.events.where("scope_id").equals(i.id).sortBy("timestamp");
    } catch (l) {
      return console.error("[MemoryStore] Failed to get all events:", l), [];
    }
  }
})), ww = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  useMemoryStore: Vs
}, Symbol.toStringTag, { value: "Module" }));
class kw {
  /**
   *  Pipeline
   */
  async run(r) {
    const i = Vs.getState();
    try {
      console.log("[Pipeline] Starting..."), i.setProcessing(!0);
      const l = await i.resolveScope(
        r.context.chatId,
        r.context.characterId
        //  characterName 
      );
      console.log(`[Pipeline] Scope resolved: ${l.uuid}`);
      const s = await vw.extract(r.messages);
      if (!s || s.length === 0)
        return { success: !1, error: "No events extracted from messages" };
      console.log(`[Pipeline] Extracted ${s.length} events`);
      const c = [];
      for (const g of s) {
        const y = g.meta.time_anchor ? `(${g.meta.time_anchor}) ${g.summary}` : g.summary, b = await i.saveEvent({
          scope_id: l.id,
          summary: y,
          //  summary
          structured_kv: g.meta,
          significance_score: g.significance_score,
          level: 0,
          // Raw event
          source_range: {
            start_index: r.sourceRange.start,
            end_index: r.sourceRange.end
          }
        });
        c.push(b);
      }
      console.log(`[Pipeline] Saved ${c.length} events to DB`);
      const { MacroService: f } = await Promise.resolve().then(() => Z2);
      return await f.refreshCache(), await i.setLastSummarizedFloor(r.sourceRange.end), console.log("[Pipeline] Completed successfully"), { success: !0, events: c };
    } catch (l) {
      return console.error("[Pipeline] Failed:", l), { success: !1, error: String(l) };
    } finally {
      i.setProcessing(!1);
    }
  }
}
const Cw = new kw();
class Ew {
  /**
   * 
   * @returns Promise<string> 
   * @throws Error 
   */
  async requestRevision(r, i, l) {
    return new Promise((s, c) => {
      Or.emit(Wr.ENGRAM_REQUEST_REVISION, {
        title: r,
        description: i,
        content: l,
        onConfirm: (f) => s(f),
        onCancel: () => c(new Error("User cancelled revision"))
      });
    });
  }
}
const F2 = new Ew(), V2 = {
  enabled: !0,
  triggerMode: "auto",
  floorInterval: 10,
  worldbookMode: "chat",
  previewEnabled: !0,
  promptTemplateId: null,
  // 
  llmPresetId: null,
  // 
  bufferSize: 3,
  //  3 
  autoHide: !1
  // 
}, _w = `<system_configuration>
  <role_definition>
    : 
    : """"""
    
    :
      : 
      : 
      : 
      : 
    
    :
      - 
      -  YAML 
      - 
      - 
  </role_definition>

  <formatting_protocol>
    :  JSON 
    :
      - summary: //
      - meta:  (role, location, event, logic, causality)
      - significance_score: 0.0-1.0 
  </formatting_protocol>

  <logic_protocol>
    :
      : ""
      : """"
    
    :
      : 
      : 
        : "102344"
        : "1""3"""
      : 
        :  HH:MM (14:30)
        :  
        :   

     (Token):
      : 
      : 
       ():
        1: {{user}}
        2: {{user}}
        3: {{user}}...
       ():
        1: [ | {{user}}, , ] {{user}} ( | 0.7)

     ():
      -: "/"
        : {{user}}
        : {{user}}
      : ""
        : {{user}}...
        : {{user}}
      : 
        : {{user}}{{user}}...
        : {{user}}
      : """"
        : {{user}}
        : {{user}}

     ():
      _ (Foundation):
        : 0.1 - 0.4
        : >60%
        : """" 0.3-0.4 ()
      _ (Propulsion):
        : 0.5 - 0.7
        :  <30%
        : 
      _ (Keystone):
        : 0.8 - 0.9
        :  <10%
        : 
        : 
      _ (Turning Point):
        : 1.0
        : "" 1%
        : 
  </logic_protocol>

  <output_template>
    <think>
      :
        : \${}
        : \${}
      
      :
        : \${}
        : \${}
      
      :
        : \${}
        : \${}
      
      :
        : \${}
        : \${}
    </think>

    \`\`\`json
    {
      "events": [
        {
          "summary": "//",
          "meta": {
            "time_anchor": " 102344 ",
            "role": [""],
            "location": "",
            "event": "",
            "logic": [""],
            "causality": "Start|Chain|End"
          },
          "significance_score": 0.7
        }
      ]
    }
    \`\`\`
  </output_template>
  
  <example_demonstration>
    :
      "ABBA
      () AB""A""
      () A""A"""

    AI:
      <think>
        :
          : //
          : 
        
        :
          1: A (//) -> 
          2: B (//) -> 
          3:  +  -> 
          4:  +  -> 
      </think>

      \`\`\`json
      {
        "events": [
          {
            "summary": "ABBA",
            "meta": {
              "time_anchor": "102344 ",
              "role": ["A", "B"],
              "location": "",
              "event": "",
              "logic": ["", "", ""],
              "causality": "Start"
            },
            "significance_score": 0.8
          },
          {
            "summary": "ABA",
            "meta": {
              "role": ["A", "B", ""],
              "location": "",
              "event": "",
              "logic": ["", "", ""],
              "causality": "Chain"
            },
            "significance_score": 0.8
          },
          {
            "summary": "A",
            "meta": {
              "role": ["A", ""],
              "location": "",
              "event": "",
              "logic": ["", "", ""],
              "causality": "Start"
            },
            "significance_score": 0.6
          }
        ]
      }
      \`\`\`
  </example_demonstration>
</system_configuration>
`, jw = `<system_configuration>
  <role_definition>
    : 
    : "" Token 
    
    :
      : 
      : 
      : 
      : 
    
    :
      - 
      - 
      - 
      - 
  </role_definition>

  <compression_protocol>
    _: 
      : 
      :
        - P0 (): //
        - P1 (): /
        - P2 (): 
    
    _:
      : 
      :   
    
    _:
      : 
      :
        : "A " + "A "  "A " ()
        : "A "
  </compression_protocol>

  <merge_strategy>
    _:
      : 
      :
        :
          1. [3 | ] A  ( | 0.2)
          2. [5 | ] A  ( | 0.2)
          3. [7 | ] A  ( | 0.5)
        :
          1. [3-7 | ] A  ( | 0.5)
    
    _:
      : 
      : 
    
    _:
      : 
      :
        : "A " + "A " + "A "
        : "A "
      : ""
  </merge_strategy>

  <output_format>
    :  JSON  text_summary 
    :
      - summary: 
      - meta:  (role, location, event, logic, causality)
      - significance_score: 0.0-1.0  ()
    
    :  30-50%
  </output_format>

  <example_demonstration>
     ():
      \`\`\`
      (102344 ) AB
      Role: [A, B]
      Loc: 
      Event: 
      Logic: []
      Causality: Start
      Significance: 0.8

      (102344 ) BA
      Role: [A, B]
      Loc: 
      Event: 
      Logic: []
      Causality: Chain
      Significance: 0.6

      (1023-1026 ) AB
      Role: [A, ]
      Loc: 
      Event: 
      Logic: []
      Causality: Chain
      Significance: 0.4

      (1026 ) A
      Role: [A, B]
      Loc: B
      Event: 
      Logic: []
      Causality: End
      Significance: 0.8

      (410 ) A
      Role: [A]
      Loc: 
      Event: 
      Logic: []
      Causality: Start
      Significance: 0.3

      (410 14:30) A
      Role: [A, ]
      Loc: 
      Event: 
      Logic: [, ]
      Causality: Chain
      Significance: 0.7
      \`\`\`

     (JSON ):
      \`\`\`json
      {
        "events": [
          {
            "summary": "ABBA",
            "meta": {
              "time_anchor": "102344",
              "role": ["A", "B"],
              "location": "",
              "event": "",
              "logic": ["", "", ""],
              "causality": "Start"
            },
            "significance_score": 0.8
          },
          {
            "summary": "AB",
            "meta": {
              "time_anchor": "1023-1026",
              "role": ["A", "B", ""],
              "location": "",
              "event": "",
              "logic": ["", ""],
              "causality": "Chain"
            },
            "significance_score": 0.8
          },
          {
            "summary": "A",
            "meta": {
              "time_anchor": "410",
              "role": ["A", ""],
              "location": "",
              "event": "",
              "logic": ["", "", ""],
              "causality": "Start"
            },
            "significance_score": 0.7
          }
        ]
      }
      \`\`\`
  </example_demonstration>
</system_configuration>

`, Tw = `""""
`, Rc = [
  { value: "summary", label: "", description: " JSON " },
  { value: "trim", label: "/", description: "" },
  { value: "query_enhance", label: "", description: "" }
], Nw = {
  temperature: 0.7,
  topP: 0.95,
  maxTokens: 2048,
  frequencyPenalty: 0,
  presencePenalty: 0
}, Aw = {
  maxChatHistory: 10
}, zw = {
  source: "transformers"
}, Mw = {
  enabled: !1,
  url: "",
  apiKey: "",
  model: "",
  topN: 5,
  hybridAlpha: 0.5
};
function K2(n = "") {
  const r = Date.now();
  return {
    id: `preset_${r}`,
    name: n,
    source: "tavern",
    parameters: { ...Nw },
    context: { ...Aw },
    isDefault: !0,
    createdAt: r,
    updatedAt: r
  };
}
function yo(n, r, i = {}) {
  const l = Date.now();
  return {
    id: `template_${l}_${Math.random().toString(36).slice(2, 8)}`,
    name: n,
    category: r,
    enabled: i.enabled ?? !1,
    isBuiltIn: i.isBuiltIn ?? !1,
    boundPresetId: i.boundPresetId ?? null,
    systemPrompt: i.systemPrompt ?? "",
    userPromptTemplate: i.userPromptTemplate ?? "",
    outputFormat: i.outputFormat ?? "plain",
    availableVariables: i.availableVariables ?? ["{{chatHistory}}", "{{context}}", "{{char}}", "{{user}}"],
    createdAt: l,
    updatedAt: l
  };
}
function G2() {
  return [
    yo("", "summary", {
      enabled: !0,
      isBuiltIn: !0,
      systemPrompt: _w,
      userPromptTemplate: `{{worldbookContext}}


{{chatHistory}}

---
 JSON `,
      outputFormat: "json"
    }),
    yo("", "trim", {
      enabled: !0,
      isBuiltIn: !0,
      systemPrompt: jw,
      userPromptTemplate: `{{worldbookContext}}




{{engramSummaries}}

`,
      outputFormat: "json"
    }),
    yo("", "query_enhance", {
      enabled: !0,
      isBuiltIn: !0,
      systemPrompt: Tw,
      userPromptTemplate: `{{worldbookContext}}


{{userInput}}


{{context}}

`,
      outputFormat: "plain"
    })
  ];
}
function jm(n) {
  return G2().find((r) => r.category === n) || null;
}
const Ow = {
  enabled: !0,
  includeGlobal: !0,
  disabledWorldbooks: []
}, Dw = {
  enabled: !1,
  trigger: "token",
  tokenLimit: 4096,
  countLimit: 5,
  keepRecentCount: 3,
  preserveOriginal: !1,
  previewEnabled: !0
};
function ny() {
  return {
    llmPresets: [K2()],
    selectedPresetId: null,
    vectorConfig: { ...zw },
    rerankConfig: { ...Mw },
    promptTemplates: G2(),
    worldbookConfig: { ...Ow }
  };
}
const uo = "engram";
function ry() {
  var n, r;
  try {
    return ((r = (n = window.SillyTavern) == null ? void 0 : n.getContext) == null ? void 0 : r.call(n)) || null;
  } catch {
    return null;
  }
}
function iy() {
  var n, r;
  try {
    const i = (r = (n = window.SillyTavern) == null ? void 0 : n.getContext) == null ? void 0 : r.call(n);
    return i != null && i.chat_metadata ? i.chat_metadata : window.chat_metadata || null;
  } catch {
    return null;
  }
}
function Rw() {
  var n;
  try {
    (n = window.saveChatDebounced) == null || n.call(window);
  } catch {
    console.warn("[Engram] saveChatDebounced ");
  }
}
class $2 {
  constructor(r, i, l) {
    dt(this, "config");
    dt(this, "textProcessor");
    dt(this, "llmAdapter");
    dt(this, "currentChatId", null);
    dt(this, "isRunning", !1);
    dt(this, "isSummarizing", !1);
    dt(this, "cancelRequested", !1);
    // 
    dt(this, "unsubscribeMessage", null);
    dt(this, "unsubscribeChat", null);
    dt(this, "summaryHistory", []);
    // 
    dt(this, "_lastSummarizedFloor", 0);
    const s = nt.get("summarizerConfig");
    this.config = { ...V2, ...s, ...r }, this.textProcessor = i || H2, this.llmAdapter = l || Yc;
  }
  // ====================  ====================
  // getInfoFromChatMetadata  saveToChatMetadata 
  //  WorldBookStateService
  /**
   * 
   */
  getFromChatMetadata(r) {
    const i = iy();
    if (i)
      return i.extensions || (i.extensions = {}), i.extensions[uo] || (i.extensions[uo] = {}), i.extensions[uo][r];
  }
  /**
   * 
   */
  saveToChatMetadata(r, i) {
    const l = iy();
    l && (l.extensions || (l.extensions = {}), l.extensions[uo] || (l.extensions[uo] = {}), l.extensions[uo][r] = i, this.log("debug", ` chat_metadata: ${r} = ${i}`), Rw());
  }
  /**
   * 
   * V0.5:  memoryStore 
   */
  async getLastSummarizedFloor() {
    if (this._lastSummarizedFloor > 0) return this._lastSummarizedFloor;
    const r = Vs.getState();
    return this._lastSummarizedFloor = r.lastSummarizedFloor, this._lastSummarizedFloor;
  }
  /**
   * 
   * V0.5:  memoryStore (IndexedDB)
   */
  async setLastSummarizedFloor(r) {
    this._lastSummarizedFloor = r, await Vs.getState().setLastSummarizedFloor(r);
  }
  // ====================  ====================
  /**
   * 
   */
  getCurrentFloor() {
    const r = ry();
    return r != null && r.chat ? r.chat.length : 0;
  }
  /**
   *  ID
   */
  getCurrentChatId() {
    const r = ry();
    return (r == null ? void 0 : r.chatId) || null;
  }
  // ====================  ====================
  /**
   * 
   * V0.5:  EventWatcher 
   */
  start() {
    if (this.isRunning) {
      this.log("warn", "");
      return;
    }
    this.initializeForCurrentChat(), wh.start(), this.config.triggerMode === "auto" && (this.unsubscribeMessage = wh.on(
      "onMessageReceived",
      this.handleMessageReceived.bind(this)
    ), this.log("debug", " EventWatcher ")), this.unsubscribeChat = wh.on(
      "onChatChanged",
      this.handleChatChanged.bind(this)
    ), this.log("debug", " EventWatcher "), this.isRunning = !0;
    const r = this.getStatus();
    this.log("info", "", r);
  }
  /**
   *  ( 0)
   */
  async resetProgress() {
    await this.setLastSummarizedFloor(0), this.log("info", "");
  }
  /**
   * 
   */
  stop() {
    this.unsubscribeMessage && (this.unsubscribeMessage(), this.unsubscribeMessage = null), this.unsubscribeChat && (this.unsubscribeChat(), this.unsubscribeChat = null), this.isRunning = !1, this.log("info", "");
  }
  /**
   * 
   */
  async initializeForCurrentChat() {
    const r = this.getCurrentChatId(), i = this.getCurrentFloor();
    this.currentChatId = r, this.summaryHistory = [], this._lastSummarizedFloor = 0;
    const l = await this.getLastSummarizedFloor();
    this.log("info", "", {
      chatId: r,
      currentFloor: i,
      lastSummarizedFloor: l,
      pendingFloors: i - l
    });
  }
  // ====================  ====================
  /**
   * 
   */
  async handleMessageReceived() {
    const r = this.getCurrentFloor(), i = await this.getLastSummarizedFloor(), l = r - i;
    this.log("debug", "", {
      currentFloor: r,
      lastSummarized: i,
      pendingFloors: l,
      triggerAt: this.config.floorInterval
    }), l >= this.config.floorInterval && (this.log("info", "", {
      pendingFloors: l,
      interval: this.config.floorInterval
    }), await this.triggerSummary());
  }
  /**
   * 
   */
  handleChatChanged() {
    const r = this.getCurrentChatId();
    this.log("info", "", {
      from: this.currentChatId,
      to: r
    }), this.initializeForCurrentChat();
  }
  // ====================  ====================
  /**
   * /
   */
  async triggerSummary(r = !1) {
    var c, f, g;
    if (this.isSummarizing)
      return this.log("warn", ""), null;
    if (!this.config.enabled && !r)
      return this.log("debug", ""), null;
    const i = this.getCurrentFloor(), l = await this.getLastSummarizedFloor();
    this.isSummarizing = !0, this.cancelRequested = !1, this.log("info", "", {
      floorRange: [l + 1, i],
      manual: r
    });
    const s = un.running("...", "Engram", () => {
      this.cancelRequested = !0, this.log("info", ""), un.warning("...", "Engram");
    });
    try {
      const y = this._lastSummarizedFloor + 1, b = this.config.bufferSize || 0, S = i - b;
      if (y > S)
        return r && un.info(" ()", "Engram"), null;
      const x = this.config.floorInterval || 10, _ = y + x - 1, E = Math.min(S, _);
      if (y > E)
        return null;
      const N = [y, E];
      this.log("info", "", { startFloor: y, endFloor: E, currentFloor: i, buffer: b });
      const G = U9().slice(y - 1, E);
      if (this.log("info", "", {
        range: N,
        msgCount: G.length,
        firstMsg: (((c = G[0]) == null ? void 0 : c.mes) || "").substring(0, 20)
      }), G.length === 0)
        return this.log("warn", "", { floorRange: N }), null;
      const D = {
        messages: G.map((M) => {
          const B = M.mes || M.content || M.message || "";
          return B || console.warn("[Engram] Message content is empty/undefined:", M), {
            role: M.is_user ? "user" : "assistant",
            content: B,
            name: M.name
          };
        }),
        floorRange: N,
        templateId: this.config.promptTemplateId || void 0
      }, ne = G.map((M) => M.mes || M.content || M.message || "").join(`

`), ie = Fs.process(ne, "input");
      this.log("debug", "", {
        originalLength: ne.length,
        cleanedLength: ie.length
      });
      let _e = "";
      try {
        const M = await kt.getActivatedWorldInfo();
        M && (_e = `
` + M + `

`, this.log("debug", "", { length: M.length }));
      } catch (M) {
        this.log("warn", "", { error: String(M) });
      }
      const we = nt.getEnabledPromptTemplate("summary"), I = jm("summary"), J = (we == null ? void 0 : we.systemPrompt) || (I == null ? void 0 : I.systemPrompt) || "", De = (we == null ? void 0 : we.userPromptTemplate) || (I == null ? void 0 : I.userPromptTemplate) || "";
      let He = "";
      try {
        He = await kt.getEngramSummariesContent(), He && this.log("debug", " Engram ", { length: He.length });
      } catch (M) {
        this.log("warn", " Engram ", { error: String(M) });
      }
      const W = De.replace("{{worldbookContext}}", _e).replace("{{chatHistory}}", ie).replace("{{context}}", _e).replace("{{engramSummaries}}", He);
      this.log("debug", "", {
        source: we ? "APIPresets" : "fallback",
        templateName: (we == null ? void 0 : we.name) || "default"
      });
      const Q = Jr.logSend({
        type: "summarize",
        systemPrompt: J,
        userPrompt: W,
        floorRange: D.floorRange,
        model: Em(),
        character: (f = Hs()) == null ? void 0 : f.name
      }), ye = Date.now(), Be = await this.llmAdapter.generate({
        systemPrompt: J,
        userPrompt: W
      });
      if (Jr.logReceive(Q, {
        response: Be.content,
        status: Be.success ? "success" : "error",
        error: Be.error,
        duration: Date.now() - ye
      }), !Be.success)
        return this.log("error", "LLM ", { error: Be.error }), un.error(`: ${Be.error}`, "Engram "), null;
      if (this.cancelRequested)
        return this.log("info", ""), un.info("", "Engram"), null;
      const Me = this.textProcessor.clean(Be.content), ke = Fs.process(Me, "output"), ee = await kt.countTokens(ke), ve = {
        id: Date.now().toString(),
        content: ke,
        sourceFloors: D.floorRange,
        timestamp: Date.now(),
        tokenCount: ee,
        writtenToWorldbook: !1
      };
      if (this.config.previewEnabled) {
        this.log("info", "", { result: ve });
        try {
          const M = await F2.requestRevision(
            "",
            `: ${D.floorRange[0]} - ${D.floorRange[1]}  | Token: ${ee}`,
            ve.content
          );
          ve.content = M, ve.tokenCount = await kt.countTokens(M), this.log("info", "");
        } catch {
          return this.log("warn", ""), un.info("", ""), null;
        }
      }
      const Ie = B2(), Pe = Hs();
      if (Ie && Pe)
        try {
          const M = await Cw.run({
            messages: D.messages,
            context: {
              characterId: String(Pe.name),
              chatId: Ie
            },
            sourceRange: {
              start: D.floorRange[0],
              end: D.floorRange[1]
            }
          });
          M.success ? this.log("info", "Pipeline ", {
            eventsCount: ((g = M.events) == null ? void 0 : g.length) || 0
          }) : this.log("warn", "Pipeline ", { error: M.error });
        } catch (M) {
          this.log("error", "Pipeline ", { error: String(M) });
        }
      if (ve.writtenToWorldbook = !0, await this.setLastSummarizedFloor(D.floorRange[1]), this.summaryHistory.push(ve), un.success(` ${D.floorRange[0]}-${D.floorRange[1]} `, "Engram"), this.config.autoHide) {
        const M = D.floorRange[0] - 1, B = D.floorRange[1] - 1;
        this.log("info", "", { startIndex: M, endIndex: B }), G9(M, B).catch((he) => {
          this.log("error", "", he);
        });
      }
      return ve;
    } catch (y) {
      const b = y instanceof Error ? y.message : String(y);
      return this.log("error", "", { error: b }), un.error(`: ${b}`, "Engram "), null;
    } finally {
      un.remove(s), this.isSummarizing = !1;
    }
  }
  // ====================  ====================
  /**
   * 
   */
  getStatus() {
    const r = this.getCurrentFloor(), i = this._lastSummarizedFloor;
    return {
      running: this.isRunning,
      currentFloor: r,
      lastSummarizedFloor: i,
      pendingFloors: Math.max(0, r - i),
      historyCount: this.summaryHistory.length,
      isSummarizing: this.isSummarizing
    };
  }
  /**
   * 
   */
  refreshStatus() {
    return this.initializeForCurrentChat(), this.getStatus();
  }
  /**
   * 
   */
  getConfig() {
    return { ...this.config };
  }
  /**
   * 
   */
  updateConfig(r) {
    this.config = { ...this.config, ...r }, nt.set("summarizerConfig", this.config), this.log("debug", "", this.config);
  }
  /**
   * 
   */
  getHistory() {
    return [...this.summaryHistory];
  }
  /**
   * 
   */
  async resetBaseFloor() {
    const r = this.getCurrentFloor();
    await this.setLastSummarizedFloor(r), this.log("info", "", { currentFloor: r });
  }
  // ====================  ====================
  /**
   * 
   */
  async log(r, i, l) {
    try {
      const { Logger: s } = await Promise.resolve().then(() => lm);
      s[r]("Summarizer", i, l);
    } catch {
      console.log(`[Summarizer] ${r}: ${i}`, l);
    }
  }
}
const Y2 = new $2(), Lc = {
  ...Dw,
  keepRecentCount: 3,
  preserveOriginal: !1,
  previewEnabled: !0
};
class X2 {
  constructor(r, i) {
    dt(this, "config");
    dt(this, "llmAdapter");
    dt(this, "isTrimming", !1);
    const l = nt.get("trimmerConfig") || {};
    this.config = { ...Lc, ...l, ...r }, this.llmAdapter = i || Yc;
  }
  // ====================  ====================
  /**
   * 
   */
  getConfig() {
    return { ...this.config };
  }
  /**
   * 
   */
  updateConfig(r) {
    this.config = { ...this.config, ...r };
    const i = nt.get("summarizerConfig") || {};
    nt.set("summarizerConfig", {
      ...i,
      trimmer: this.config
    }), this.log("debug", "", this.config);
  }
  // ====================  ====================
  /**
   * 
   */
  async getStatus() {
    const r = kt.findExistingWorldbook();
    if (!r)
      return {
        triggered: !1,
        triggerType: this.config.trigger,
        currentValue: 0,
        threshold: this.getThreshold(),
        pendingEntryCount: 0,
        isTrimming: this.isTrimming
      };
    const i = await kt.getSummaryEntries(r), l = Math.max(0, i.length - this.config.keepRecentCount), s = await this.getCurrentTriggerValue(r, i), c = this.getThreshold();
    return {
      triggered: this.config.enabled && s >= c,
      triggerType: this.config.trigger,
      currentValue: s,
      threshold: c,
      pendingEntryCount: l,
      isTrimming: this.isTrimming
    };
  }
  /**
   * 
   */
  getThreshold() {
    switch (this.config.trigger) {
      case "token":
        return this.config.tokenLimit;
      case "count":
        return this.config.countLimit;
      default:
        return 0;
    }
  }
  /**
   * 
   */
  async getCurrentTriggerValue(r, i) {
    switch (this.config.trigger) {
      case "token":
        return await kt.countSummaryTokens(r);
      case "count":
        return i.length;
      default:
        return 0;
    }
  }
  /**
   * 
   */
  async checkTrigger() {
    return (await this.getStatus()).triggered;
  }
  // ====================  ====================
  /**
   * 
   *  N 
   */
  async getEntriesToMerge() {
    const r = kt.findExistingWorldbook();
    if (!r) return [];
    const i = await kt.getSummaryEntries(r), l = this.config.keepRecentCount;
    return i.length <= l ? [] : i.slice(0, i.length - l);
  }
  /**
   * /
   */
  async triggerTrim(r = !1) {
    var s;
    if (this.isTrimming)
      return this.log("warn", ""), null;
    if (!this.config.enabled && !r)
      return this.log("debug", ""), null;
    const i = kt.findExistingWorldbook();
    if (!i)
      return this.log("warn", ""), un.warning(" Engram ", "Engram"), null;
    const l = await this.getEntriesToMerge();
    if (l.length < 2)
      return r && un.info(" ( 2 )", "Engram"), null;
    this.isTrimming = !0, this.log("info", "", {
      entryCount: l.length,
      manual: r
    });
    try {
      const c = l.map((J) => kt.parseFloorRangeFromName(J.name)).filter((J) => J !== null);
      if (c.length === 0)
        return this.log("error", ""), null;
      const f = Math.min(...c.map((J) => J[0])), g = Math.max(...c.map((J) => J[1])), y = [f, g], b = l.map((J) => {
        const De = kt.parseFloorRangeFromName(J.name), He = De ? `${De[0]}-${De[1]}` : `${J.name}`, W = J.content.replace(/\{\{\/\/.*?\}\}/gs, "").trim();
        return `${He}
${W}`;
      }).join(`

---

`), S = nt.getEnabledPromptTemplate("trim"), x = jm("trim"), _ = (S == null ? void 0 : S.systemPrompt) || (x == null ? void 0 : x.systemPrompt) || "", N = ((S == null ? void 0 : S.userPromptTemplate) || (x == null ? void 0 : x.userPromptTemplate) || "").replace("{{engramSummaries}}", b).replace("{{context}}", b);
      this.log("debug", "", {
        source: S ? "APIPresets" : "fallback",
        templateName: (S == null ? void 0 : S.name) || "default",
        inputLength: b.length
      });
      const U = Jr.logSend({
        type: "trim",
        systemPrompt: _,
        userPrompt: N,
        floorRange: y,
        model: Em(),
        character: (s = Hs()) == null ? void 0 : s.name
      }), G = Date.now(), D = await this.llmAdapter.generate({
        systemPrompt: _,
        userPrompt: N
      });
      if (Jr.logReceive(U, {
        response: D.content,
        status: D.success ? "success" : "error",
        error: D.error,
        duration: Date.now() - G
      }), !D.success)
        return this.log("error", "LLM ", { error: D.error }), un.error(`: ${D.error}`, "Engram "), null;
      const ne = Fs.process(D.content, "output"), ie = await kt.countTokens(ne), _e = Math.min(...l.map((J) => J.order)), we = {
        content: ne,
        tokenCount: ie,
        sourceEntryIds: l.map((J) => J.uid),
        newFloorRange: y,
        newOrder: _e
      };
      if (this.config.previewEnabled) {
        this.log("info", "", { result: we });
        try {
          const J = await F2.requestRevision(
            "",
            ` ${l.length}  | : ${y[0]}-${y[1]}  | Token: ${ie}`,
            we.content
          );
          we.content = J, we.tokenCount = await kt.countTokens(J), this.log("info", "");
        } catch {
          return this.log("warn", ""), un.info("", ""), null;
        }
      }
      return await this.writeCompactedEntry(i, we) ? (await this.removeOriginalEntries(i, we.sourceEntryIds), un.success(
        ` ${l.length}  1  (${y[0]}-${y[1]} )`,
        "Engram"
      ), we) : (this.log("error", ""), null);
    } catch (c) {
      const f = c instanceof Error ? c.message : String(c);
      return this.log("error", "", { error: f }), un.error(`: ${f}`, "Engram "), null;
    } finally {
      this.isTrimming = !1;
    }
  }
  /**
   * 
   */
  async writeCompactedEntry(r, i) {
    try {
      const l = `{{// ${JSON.stringify({
        floors: i.newFloorRange,
        tokens: i.tokenCount,
        timestamp: Date.now(),
        layer: 2,
        // 
        mergedFrom: i.sourceEntryIds.length
      })} }}`, s = `${i.content}

${l}`, c = await kt.createEntry(r, {
        name: `_${i.newFloorRange[0]}-${i.newFloorRange[1]}`,
        content: s,
        keys: [Us],
        // 
        enabled: !0,
        constant: !0,
        order: i.newOrder
      });
      return c && this.log("success", "", {
        worldbook: r,
        floorRange: i.newFloorRange,
        order: i.newOrder
      }), c;
    } catch (l) {
      return this.log("error", "", { error: String(l) }), !1;
    }
  }
  /**
   * /
   */
  async removeOriginalEntries(r, i) {
    if (this.config.preserveOriginal) {
      for (const l of i)
        await kt.updateEntry(r, l, { enabled: !1 });
      this.log("info", "", { count: i.length });
    } else
      await kt.deleteEntries(r, i) && this.log("info", "", { count: i.length });
  }
  // ====================  ====================
  /**
   * 
   */
  log(r, i, l) {
    Ve[r]("Trimmer", i, l);
  }
}
const Lw = new X2(), cr = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DEFAULT_REGEX_RULES: Ps,
  DEFAULT_SUMMARIZER_CONFIG: V2,
  DEFAULT_TRIMMER_CONFIG: Lc,
  LLMAdapter: P2,
  RegexProcessor: _m,
  SummarizerService: $2,
  TextProcessor: q2,
  TrimmerService: X2,
  llmAdapter: Yc,
  regexProcessor: Fs,
  summarizerService: Y2,
  textProcessor: H2,
  trimmerService: Lw
}, Symbol.toStringTag, { value: "Module" }));
class Bw {
  /**
   * Search for context
   * @param query User's current message or search query
   * @param scope Current Scope
   * @param limit Max number of entries
   */
  async search(r, i, l = 5) {
    return this.rollingSearch(i, l);
  }
  /**
   * Basic Mode Strategy: "Infinite Context - Rolling Window"
   * Returns:
   * 1. The most recent Level 1 Summary (Overview of the past)
   * 2. The most recent N Level 0 Events (Detail of the present)
   */
  async rollingSearch(r, i) {
    const l = await Mn.events.where("scope_id").equals(r.id).and((g) => g.level === 0).reverse().limit(i).toArray(), s = await Mn.events.where("scope_id").equals(r.id).and((g) => g.level === 1).reverse().first(), c = [...l];
    return s && c.push(s), c.sort((g, y) => g.timestamp - y.timestamp), { entries: c.map((g) => this.formatEntry(g)), nodes: c };
  }
  /**
   * Vectors Search Strategy
   */
  async vectorSearch(r, i, l) {
    return console.warn("[Retriever] Vector search not implemented yet. Falling back to rolling."), this.rollingSearch(i, l);
  }
  formatEntry(r) {
    return `[Mem: ${r.summary}]`;
  }
}
const Uw = new Bw(), Iw = "[Engram] Dynamic Context", ay = "[Engram_Dynamic_Context]";
class Q2 {
  constructor() {
    dt(this, "isInitialized", !1);
  }
  /**
   * Initialize the Injector
   */
  init() {
    this.isInitialized || (Or.on(Wr.MESSAGE_RECEIVED, this.handleMessageReceived.bind(this)), Or.on(Wr.CHAT_CHANGED, this.refreshContext.bind(this)), this.isInitialized = !0, console.log("[Injector] Initialized."));
  }
  /**
   * Handle new user message
   */
  async handleMessageReceived() {
    await this.refreshContext();
  }
  /**
   * Refresh the Dynamic Context Entry
   */
  async refreshContext() {
    try {
      const r = B2(), i = Hs(), l = (i == null ? void 0 : i.name) || "Unknown";
      if (!r)
        return;
      const s = await Kh.resolveScope(r, l), c = await Uw.search("", s), f = c.entries.length > 0 ? `<engram_memory>
${c.entries.join(`
`)}
</engram_memory>` : "", g = await kt.getOrCreateWorldbook();
      if (!g) return;
      let y = await kt.findEntryByKey(g, ay);
      y ? await kt.updateEntry(g, y.uid, {
        content: f,
        enabled: !!f
        // Disable if empty
      }) : f && await kt.createEntry(g, {
        name: Iw,
        content: f,
        keys: [ay],
        constant: !0,
        // Always active
        position: "before_character_definition",
        // High priority
        order: 9999
        // Ensure it's near the end of high priority stuff? Or top?
      }), f && console.log("[Injector] Dynamic Context Updated.", { length: f.length });
    } catch (r) {
      console.error("[Injector] Failed to refresh context:", r);
    }
  }
}
const qw = new Q2(), Hw = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Injector: Q2,
  injector: qw
}, Symbol.toStringTag, { value: "Module" })), ol = class ol {
  /**
   *  Engram 
   */
  static async init() {
    var r, i;
    if (!this.isInitialized)
      try {
        const l = (i = (r = window.SillyTavern) == null ? void 0 : r.getContext) == null ? void 0 : i.call(r);
        if (!(l != null && l.registerMacro)) {
          Ve.warn("MacroService", "SillyTavern registerMacro API ");
          return;
        }
        l.registerMacro(
          "engramSummaries",
          () => ol.cachedSummaries,
          "Engram:  ( IndexedDB)"
        ), l.registerMacro(
          "engramContext",
          () => ol.cachedContext,
          "Engram:  (RAG )"
        ), this.isInitialized = !0, Ve.success("MacroService", "", {
          macros: ["{{engramSummaries}}", "{{engramContext}}"]
        }), await this.refreshCache();
        const s = l.eventSource;
        s && s.on("chat_id_changed", () => {
          this.refreshCache().catch((c) => Ve.warn("MacroService", "", c));
        });
      } catch (l) {
        Ve.error("MacroService", "", l);
      }
  }
  /**
   *  -  IndexedDB 
   */
  static async refreshCache() {
    try {
      const r = Vs.getState();
      this.cachedSummaries = await r.getEventSummaries(), Ve.debug("MacroService", "", {
        length: this.cachedSummaries.length
      });
    } catch (r) {
      Ve.warn("MacroService", "", r);
    }
  }
  /**
   *  ( Injector )
   */
  static updateContextCache(r) {
    this.cachedContext = r;
  }
};
dt(ol, "isInitialized", !1), // ---  ---
dt(ol, "cachedSummaries", ""), dt(ol, "cachedContext", "");
let Gh = ol;
const Z2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  MacroService: Gh
}, Symbol.toStringTag, { value: "Module" }));
class W2 {
  static init() {
    if (!this.isInitialized)
      try {
        const r = ka();
        if (!(r != null && r.eventSource) || !(r != null && r.event_types)) {
          Ve.warn("CharacterDeleteService", "");
          return;
        }
        r.event_types.CHARACTER_DELETED && (r.eventSource.on(r.event_types.CHARACTER_DELETED, this.onCharacterDeleted.bind(this)), Ve.info("CharacterDeleteService", " CHARACTER_DELETED ")), r.event_types.CHAT_DELETED && (r.eventSource.on(r.event_types.CHAT_DELETED, this.onChatDeleted.bind(this)), Ve.info("CharacterDeleteService", " CHAT_DELETED ")), r.event_types.GROUP_CHAT_DELETED && (r.eventSource.on(r.event_types.GROUP_CHAT_DELETED, this.onChatDeleted.bind(this)), Ve.info("CharacterDeleteService", " GROUP_CHAT_DELETED ")), this.isInitialized = !0;
      } catch (r) {
        Ve.error("CharacterDeleteService", "", r);
      }
  }
  /**
   * 
   */
  static async onCharacterDeleted(r) {
    var c;
    const i = nt.getSettings().linkedDeletion;
    if (!(i != null && i.enabled) || !(i != null && i.deleteWorldbook)) return;
    Ve.debug("CharacterDeleteService", "", r);
    const l = r.character, s = (l == null ? void 0 : l.name) || (l == null ? void 0 : l.avatar) || (l == null ? void 0 : l.ch_name) || ((c = l == null ? void 0 : l.data) == null ? void 0 : c.name);
    if (!s) {
      Ve.warn("CharacterDeleteService", "");
      return;
    }
    await this.deleteEngramWorldbooks(s, "", i.showConfirmation);
  }
  /**
   * 
   * @param chatId  ID "CharName - 2024-1-1@12h30m" 
   */
  static async onChatDeleted(r) {
    const i = nt.getSettings().linkedDeletion;
    if (!(i != null && i.enabled) || !(i != null && i.deleteChatWorldbook)) return;
    Ve.debug("CharacterDeleteService", "", r);
    const l = this.extractCharacterNameFromChatId(r);
    if (!l) {
      Ve.debug("CharacterDeleteService", ` chatId : ${r}`);
      return;
    }
    await this.deleteEngramWorldbooks(l, "", i.showConfirmation);
  }
  /**
   *  chatId 
   */
  static extractCharacterNameFromChatId(r) {
    if (!r) return null;
    let i = r.match(/^(.+?)\s*-\s*\d{4}/);
    return i || (i = r.match(/^(.+?)_\d{4}/), i) ? i[1].trim() : null;
  }
  /**
   *  Engram 
   */
  static async deleteEngramWorldbooks(r, i, l) {
    const s = /* @__PURE__ */ new Set();
    s.add(`[Engram] ${r}`), s.add(`Engram_${r}`);
    const c = await kt.getWorldbookNames(), f = new Set(c), g = Array.from(s).filter((S) => {
      if (!f.has(S)) return !1;
      const x = S.toLowerCase().includes("engram");
      return x || Ve.info("CharacterDeleteService", ` Engram : ${S}`), x;
    });
    if (g.length === 0) {
      Ve.debug("CharacterDeleteService", ` "${r}"  Engram `);
      return;
    }
    if (Ve.info("CharacterDeleteService", `: ${g.join(", ")}`), l) {
      const S = `
                <div style="font-size: 0.9em;">
                    <h3> Engram </h3>
                    <p>${i} <b>${r}</b> </p>
                    <p> Engram </p>
                    <ul style="max-height: 100px; overflow-y: auto; background: var(--black50a); padding: 5px; border-radius: 4px; list-style: none; margin: 10px 0;">
                        ${g.map((_) => `<li style="padding: 2px 0;"> ${_}</li>`).join("")}
                    </ul>
                    <p></p>
                    <small style="opacity: 0.7;"></small>
                </div>
            `;
      if (!await $9(S, "confirm")) {
        Ve.info("CharacterDeleteService", "");
        return;
      }
    }
    let y = 0;
    const b = [];
    un.info(" Engram ...", "Engram");
    for (const S of g)
      try {
        await kt.deleteWorldbook(S) ? (y++, Ve.info("CharacterDeleteService", `: ${S}`)) : b.push(S);
      } catch (x) {
        Ve.error("CharacterDeleteService", ` ${S} `, x), b.push(S);
      }
    y > 0 && un.success(` ${y} `, "Engram"), b.length > 0 && un.warning(`: ${b.join(", ")}`, "Engram");
  }
}
dt(W2, "isInitialized", !1);
const Pw = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  CharacterDeleteService: W2
}, Symbol.toStringTag, { value: "Module" })), Xc = ({ title: n, subtitle: r, actions: i }) => /* @__PURE__ */ h.jsxs("div", { className: "mb-8 px-4 md:px-0 flex justify-between items-start animate-in fade-in slide-in-from-bottom-2 duration-500", children: [
  /* @__PURE__ */ h.jsxs("div", { children: [
    /* @__PURE__ */ h.jsx("h1", { className: "text-3xl font-light tracking-tight text-foreground", children: n }),
    r && /* @__PURE__ */ h.jsx("p", { className: "mt-2 text-muted-foreground text-sm font-light", children: r })
  ] }),
  i && /* @__PURE__ */ h.jsx("div", { className: "flex gap-2", children: i })
] }), ly = ({
  icon: n,
  label: r,
  primary: i = !1,
  size: l = "md",
  className: s = "",
  ...c
}) => /* @__PURE__ */ h.jsxs(
  "button",
  {
    className: `
            flex items-center gap-2 rounded-full font-medium transition-all active:scale-95
            ${l === "sm" ? "px-3 py-1.5 text-xs" : "px-5 py-2.5 text-sm"}
            ${i ? "bg-primary text-primary-foreground hover:opacity-90 shadow-[0_0_15px_var(--primary)] border border-transparent" : "text-muted-foreground hover:text-foreground border border-border hover:border-input bg-muted/50 hover:bg-muted"}
            ${s}
        `,
    ...c,
    children: [
      n && /* @__PURE__ */ h.jsx(n, { size: l === "sm" ? 14 : 16 }),
      r
    ]
  }
), Fw = () => {
  const [n] = se.useState([
    { id: "1", x: 250, y: 150, label: "User Input", type: "input" },
    { id: "2", x: 250, y: 300, label: "Memory Retriever", type: "process" },
    { id: "3", x: 100, y: 450, label: "Summary Agent", type: "output" },
    { id: "4", x: 400, y: 450, label: "Context Builder", type: "output" }
  ]), r = [
    { source: "1", target: "2" },
    { source: "2", target: "3" },
    { source: "2", target: "4" }
  ];
  return /* @__PURE__ */ h.jsxs("div", { className: "h-full flex flex-col relative bg-card rounded-xl overflow-hidden border border-border shadow-inner group", children: [
    /* @__PURE__ */ h.jsx(
      "div",
      {
        className: "absolute inset-0 opacity-[0.15] pointer-events-none",
        style: {
          backgroundImage: "radial-gradient(#555 1px, transparent 1px)",
          backgroundSize: "24px 24px"
        }
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "absolute top-4 right-4 z-10 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300", children: [
      /* @__PURE__ */ h.jsx("button", { className: "p-2 bg-muted text-muted-foreground hover:text-foreground rounded border border-border shadow-lg hover:border-border transition-colors", children: /* @__PURE__ */ h.jsx(em, { size: 16 }) }),
      /* @__PURE__ */ h.jsx("button", { className: "p-2 bg-muted text-muted-foreground hover:text-foreground rounded border border-border shadow-lg hover:border-border transition-colors", children: /* @__PURE__ */ h.jsx(Tv, { size: 16 }) }),
      /* @__PURE__ */ h.jsx("button", { className: "p-2 bg-muted text-muted-foreground hover:text-foreground rounded border border-border shadow-lg hover:border-border transition-colors", children: /* @__PURE__ */ h.jsx(wy, { size: 16 }) })
    ] }),
    /* @__PURE__ */ h.jsx("div", { className: "absolute bottom-4 left-4 z-10 bg-muted/80 backdrop-blur border border-border px-3 py-1.5 rounded-full text-[10px] text-muted-foreground font-mono tracking-wider uppercase", children: "Render Engine: Mock 1.0" }),
    /* @__PURE__ */ h.jsxs("svg", { className: "w-full h-full pointer-events-none", children: [
      /* @__PURE__ */ h.jsx("defs", { children: /* @__PURE__ */ h.jsx("marker", { id: "arrowhead", markerWidth: "10", markerHeight: "7", refX: "9", refY: "3.5", orient: "auto", children: /* @__PURE__ */ h.jsx("polygon", { points: "0 0, 10 3.5, 0 7", fill: "#3b82f6", opacity: "0.5" }) }) }),
      r.map((i, l) => {
        const s = n.find((x) => x.id === i.source), c = n.find((x) => x.id === i.target);
        if (!s || !c) return null;
        const f = s.x + 150 / 2, g = s.y + 60, y = c.x + 150 / 2, b = c.y, S = `M ${f} ${g} C ${f} ${g + 50}, ${y} ${b - 50}, ${y} ${b}`;
        return /* @__PURE__ */ h.jsx("g", { children: /* @__PURE__ */ h.jsx("path", { d: S, stroke: "#3b82f6", strokeWidth: "1.5", fill: "none", className: "opacity-40", markerEnd: "url(#arrowhead)" }) }, l);
      })
    ] }),
    n.map((i) => /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: "absolute w-[150px] group/node cursor-grab active:cursor-grabbing",
        style: { left: i.x, top: i.y },
        children: [
          i.type !== "input" && /* @__PURE__ */ h.jsx("div", { className: "absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-muted-foreground rounded-full border border-background z-10" }),
          i.type !== "output" && /* @__PURE__ */ h.jsx("div", { className: "absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-muted-foreground rounded-full border border-background z-10" }),
          /* @__PURE__ */ h.jsxs("div", { className: `
                        bg-background/90 border rounded-md p-3 backdrop-blur-sm transition-all duration-300
                        ${i.type === "input" ? "border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.1)]" : "border-border group-hover/node:border-border shadow-lg"}
                    `, children: [
            /* @__PURE__ */ h.jsx("div", { className: "text-[9px] text-muted-foreground uppercase tracking-widest mb-2 font-bold", children: i.type }),
            /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-foreground font-medium flex items-center gap-2", children: [
              i.type === "input" && /* @__PURE__ */ h.jsx(vo, { size: 12, className: "text-blue-400" }),
              i.type === "process" && /* @__PURE__ */ h.jsx(Zh, { size: 12, className: "text-purple-400" }),
              i.type === "output" && /* @__PURE__ */ h.jsx(Ic, { size: 12, className: "text-emerald-400" }),
              i.label
            ] })
          ] })
        ]
      },
      i.id
    ))
  ] });
}, Vw = () => /* @__PURE__ */ h.jsxs("div", { className: "h-[calc(100vh-140px)] animate-in fade-in flex flex-col", children: [
  /* @__PURE__ */ h.jsx(
    Xc,
    {
      title: "",
      subtitle: "",
      actions: /* @__PURE__ */ h.jsxs("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ h.jsx(ly, { icon: Jh, label: "Auto Layout", size: "sm" }),
        /* @__PURE__ */ h.jsx(ly, { icon: wy, label: "Config", size: "sm" })
      ] })
    }
  ),
  /* @__PURE__ */ h.jsx("div", { className: "flex-1 pb-4 min-h-0", children: /* @__PURE__ */ h.jsx(Fw, {}) })
] }), Kw = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  GraphView: Vw
}, Symbol.toStringTag, { value: "Module" }));
function Gw(n) {
  return new Date(n).toTimeString().slice(0, 8);
}
const $w = {
  [Bt.DEBUG]: { text: "text-zinc-500", bg: "bg-zinc-500/10" },
  [Bt.INFO]: { text: "text-blue-400", bg: "bg-blue-500/10" },
  [Bt.SUCCESS]: { text: "text-emerald-400", bg: "bg-emerald-500/10" },
  [Bt.WARN]: { text: "text-amber-400", bg: "bg-amber-500/10" },
  [Bt.ERROR]: { text: "text-red-400", bg: "bg-red-500/10" }
}, Yw = ({ entry: n }) => {
  const [r, i] = se.useState(!1), l = n.data !== void 0, s = jc[n.level], c = $w[n.level];
  return /* @__PURE__ */ h.jsxs("div", { className: "group", children: [
    /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: `
                    flex items-start gap-3 px-2 py-1 rounded-sm transition-colors
                    hover:bg-white/[0.02]
                    ${l ? "cursor-pointer" : ""}
                `,
        onClick: () => l && i(!r),
        children: [
          /* @__PURE__ */ h.jsx("span", { className: "flex items-center text-zinc-600 shrink-0 mt-0.5 w-3", children: l ? r ? /* @__PURE__ */ h.jsx(bo, { size: 12 }) : /* @__PURE__ */ h.jsx(Xh, { size: 12 }) : null }),
          /* @__PURE__ */ h.jsx("span", { className: "text-zinc-600 shrink-0 tabular-nums text-[11px]", children: Gw(n.timestamp) }),
          /* @__PURE__ */ h.jsx("span", { className: `
                    shrink-0 text-[10px] font-medium px-1.5 py-0.5 rounded
                    ${c.text} ${c.bg}
                `, children: s.label }),
          /* @__PURE__ */ h.jsx("span", { className: "text-zinc-500 shrink-0 text-[11px]", children: n.module }),
          /* @__PURE__ */ h.jsx("span", { className: "text-zinc-300 text-[11px] break-words flex-1 leading-relaxed", children: n.message })
        ]
      }
    ),
    r && l && /* @__PURE__ */ h.jsx("div", { className: "ml-10 mr-2 mb-1 px-3 py-2 bg-zinc-900/50 border-l-2 border-zinc-700 rounded-r text-[10px]", children: /* @__PURE__ */ h.jsx("pre", { className: "m-0 text-zinc-400 whitespace-pre-wrap break-words font-mono", children: JSON.stringify(n.data, null, 2) }) })
  ] });
}, Xw = {
  summarize: { label: "", color: "bg-blue-500/20 text-blue-400" },
  trim: { label: "", color: "bg-yellow-500/20 text-yellow-500" },
  vectorize: { label: "", color: "bg-purple-500/20 text-purple-400" },
  query: { label: "", color: "bg-green-500/20 text-green-400" },
  other: { label: "", color: "bg-gray-500/20 text-gray-400" }
}, Qw = ({ status: n }) => {
  switch (n) {
    case "pending":
      return /* @__PURE__ */ h.jsx(Gs, { size: 14, className: "animate-spin text-yellow-400" });
    case "success":
      return /* @__PURE__ */ h.jsx(Qh, { size: 14, className: "text-green-400" });
    case "error":
      return /* @__PURE__ */ h.jsx(Uc, { size: 14, className: "text-red-400" });
  }
}, Zw = (n) => new Date(n).toLocaleTimeString("zh-CN", {
  hour12: !1,
  hour: "2-digit",
  minute: "2-digit",
  second: "2-digit"
}), Ww = (n) => n === void 0 ? "-" : n < 1e3 ? `${n}ms` : `${(n / 1e3).toFixed(1)}s`, Jw = ({ sent: n, received: r }) => {
  const [i, l] = se.useState(!1), s = Xw[n.type];
  return /* @__PURE__ */ h.jsxs("div", { className: "border border-border rounded-lg overflow-hidden bg-card", children: [
    /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: "flex items-center gap-2 px-3 py-2 bg-muted-20 cursor-pointer hover:bg-muted-30",
        onClick: () => l(!i),
        children: [
          i ? /* @__PURE__ */ h.jsx(bo, { size: 14 }) : /* @__PURE__ */ h.jsx(Xh, { size: 14 }),
          /* @__PURE__ */ h.jsx("span", { className: `px-2 py-0.5 rounded text-xs font-medium ${s.color}`, children: s.label }),
          n.model && /* @__PURE__ */ h.jsx("span", { className: "px-1.5 py-0.5 rounded text-[10px] font-medium bg-indigo-500/10 text-indigo-400 border border-indigo-500/20 truncate max-w-[100px]", title: `: ${n.model}`, children: n.model }),
          n.character && /* @__PURE__ */ h.jsx("span", { className: "px-1.5 py-0.5 rounded text-[10px] font-medium bg-orange-500/10 text-orange-400 border border-orange-500/20 truncate max-w-[80px]", title: `: ${n.character}`, children: n.character }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground", children: Zw(n.timestamp) }),
          /* @__PURE__ */ h.jsx(Qw, { status: (r == null ? void 0 : r.status) || n.status }),
          n.floorRange && /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground", children: [
            " #",
            n.floorRange[0],
            "-",
            n.floorRange[1]
          ] }),
          /* @__PURE__ */ h.jsxs("span", { className: "ml-auto text-xs text-muted-foreground flex items-center gap-1", children: [
            /* @__PURE__ */ h.jsx(nv, { size: 12 }),
            Ww((r == null ? void 0 : r.duration) || n.duration)
          ] })
        ]
      }
    ),
    i && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col md:flex-row", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex-1 border-r border-border p-3", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mb-2 text-sm font-medium text-blue-400", children: [
          /* @__PURE__ */ h.jsx(Jv, { size: 14 }),
          "",
          n.tokensSent && /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground ml-auto", children: [
            "~",
            n.tokensSent,
            " tokens"
          ] })
        ] }),
        n.systemPrompt && /* @__PURE__ */ h.jsxs("div", { className: "mb-3", children: [
          /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground mb-1", children: "System" }),
          /* @__PURE__ */ h.jsx("div", { className: "text-sm p-2 bg-muted-20 rounded max-h-32 overflow-y-auto whitespace-pre-wrap", children: n.systemPrompt })
        ] }),
        n.userPrompt && /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground mb-1", children: "User" }),
          /* @__PURE__ */ h.jsx("div", { className: "text-sm p-2 bg-muted-20 rounded max-h-48 overflow-y-auto whitespace-pre-wrap", children: n.userPrompt })
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex-1 p-3", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mb-2 text-sm font-medium text-green-400", children: [
          /* @__PURE__ */ h.jsx(my, { size: 14 }),
          "",
          (r == null ? void 0 : r.tokensReceived) && /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground ml-auto", children: [
            "~",
            r.tokensReceived,
            " tokens"
          ] })
        ] }),
        (r == null ? void 0 : r.status) === "error" && r.error && /* @__PURE__ */ h.jsx("div", { className: "p-2 bg-red-500/10 border border-red-500/30 rounded text-sm text-red-400", children: r.error }),
        (r == null ? void 0 : r.response) && /* @__PURE__ */ h.jsx("div", { className: "text-sm p-2 bg-muted-20 rounded max-h-48 overflow-y-auto whitespace-pre-wrap", children: r.response }),
        !r && n.status === "pending" && /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-sm text-muted-foreground", children: [
          /* @__PURE__ */ h.jsx(Gs, { size: 14, className: "animate-spin" }),
          "..."
        ] })
      ] })
    ] })
  ] });
}, ek = () => {
  const [n, r] = se.useState(Jr.getPaired());
  return se.useEffect(() => Jr.subscribe(() => {
    r(Jr.getPaired());
  }), []), /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between px-4 py-3 border-b border-border shrink-0", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ h.jsx(rm, { size: 16, className: "text-primary" }),
        /* @__PURE__ */ h.jsx("span", { className: "font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground", children: [
          "(",
          n.length,
          ")"
        ] })
      ] }),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "p-1.5 rounded-md hover:bg-destructive hover:text-destructive-foreground transition-colors text-muted-foreground",
          onClick: () => Jr.clear(),
          title: "",
          children: /* @__PURE__ */ h.jsx(So, { size: 14 })
        }
      )
    ] }),
    /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto p-4", children: n.length === 0 ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-full text-muted-foreground gap-3", children: [
      /* @__PURE__ */ h.jsx(my, { size: 48, className: "opacity-30" }),
      /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "" }),
      /* @__PURE__ */ h.jsx("p", { className: "text-xs", children: "" })
    ] }) : /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-3", children: n.map(({ sent: i, received: l }) => /* @__PURE__ */ h.jsx(Jw, { sent: i, received: l }, i.id)) }) })
  ] });
}, Bc = ({ tabs: n, activeTab: r, onChange: i, sticky: l = !0, top: s = 0, className: c = "", actions: f }) => /* @__PURE__ */ h.jsxs(
  "div",
  {
    className: `
            flex items-center justify-between gap-4 mb-6 border-b border-border
            ${l ? "sticky z-20 pt-4 pb-0 -mt-4 -mx-4 px-4 md:-mx-8 md:px-8 lg:-mx-12 lg:px-12 backdrop-blur bg-background/80" : "px-0"}
            ${c}
        `,
    style: l ? {
      top: s
    } : void 0,
    children: [
      /* @__PURE__ */ h.jsx("div", { className: "flex overflow-x-auto gap-2 pb-1 no-scrollbar", children: n.map((g) => /* @__PURE__ */ h.jsxs(
        "button",
        {
          onClick: () => i(g.id),
          className: `flex items-center gap-2 whitespace-nowrap px-4 py-2 text-sm transition-all relative ${r === g.id ? "text-foreground" : "text-muted-foreground hover:text-foreground"}`,
          children: [
            g.icon && /* @__PURE__ */ h.jsx("span", { className: "w-4 h-4", children: g.icon }),
            g.label,
            r === g.id && /* @__PURE__ */ h.jsx("div", { className: "absolute -bottom-[1px] left-0 right-0 h-[2px] bg-primary shadow-[0_0_8px_var(--primary)] z-10 transition-all duration-300" })
          ]
        },
        g.id
      )) }),
      f && /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-2 pb-1 shrink-0", children: f })
    ]
  }
), tk = [
  { id: "runtime", label: "", icon: /* @__PURE__ */ h.jsx(vo, { size: 14 }) },
  { id: "model", label: "", icon: /* @__PURE__ */ h.jsx(rm, { size: 14 }) }
], nk = [
  "ALL",
  "Logger",
  "EventBus",
  "Summarizer",
  "CORE/Pipeline",
  "CORE/RAG",
  "CORE/Memory",
  "UI/GraphView",
  "UI/MemoryStream"
], rk = ({ initialTab: n }) => {
  const [r, i] = se.useState(n || "runtime"), [l, s] = se.useState([]), [c, f] = se.useState([]), [g, y] = se.useState(""), [b, S] = se.useState(-1), [x, _] = se.useState("ALL"), [E, N] = se.useState(!0), [U, G] = se.useState(!1), [D, ne] = se.useState(!1), ie = se.useRef(null);
  se.useEffect(() => {
    s(Ve.getLogs());
    const I = Ve.subscribe((J) => {
      s((De) => [...De, J]);
    });
    return () => I();
  }, []), se.useEffect(() => {
    let I = l;
    if (b !== -1 && (I = I.filter((J) => J.level >= b)), x !== "ALL" && (I = I.filter((J) => J.module.startsWith(x))), g.trim()) {
      const J = g.toLowerCase();
      I = I.filter(
        (De) => De.message.toLowerCase().includes(J) || De.module.toLowerCase().includes(J)
      );
    }
    f(I);
  }, [l, b, x, g]), se.useEffect(() => {
    E && ie.current && ie.current.scrollIntoView({ behavior: "smooth", block: "nearest" });
  }, [c, E]);
  const _e = se.useCallback(async () => {
    await Ve.clear(), s([]);
  }, []), we = se.useCallback(() => {
    const I = Ve.exportToMarkdown(), J = Ve.getExportFilename(), De = new Blob([I], { type: "text/markdown" }), He = URL.createObjectURL(De), W = document.createElement("a");
    W.href = He, W.download = J, W.click(), URL.revokeObjectURL(He), Ve.success("DevLog", `: ${J}`);
  }, []);
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "mb-6", children: [
      /* @__PURE__ */ h.jsx("h1", { className: "text-2xl font-light text-foreground tracking-tight mb-2", children: "" }),
      /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: "" })
    ] }),
    /* @__PURE__ */ h.jsx(
      Bc,
      {
        tabs: tk,
        activeTab: r,
        onChange: (I) => i(I),
        sticky: !0
      }
    ),
    r === "runtime" && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col flex-1 min-h-0", children: [
      /* @__PURE__ */ h.jsx("div", { className: "sticky top-[52px] z-10 bg-background/95 backdrop-blur-sm py-3 -mx-4 px-4 md:-mx-8 md:px-8 lg:-mx-12 lg:px-12 border-b border-border", children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 flex-wrap", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
          /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",
              onClick: () => G(!U),
              children: [
                b === -1 ? "" : jc[b].label,
                /* @__PURE__ */ h.jsx(bo, { size: 12 })
              ]
            }
          ),
          U && /* @__PURE__ */ h.jsxs("div", { className: "absolute top-full left-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-20 min-w-[100px] py-1 flex flex-col", children: [
            /* @__PURE__ */ h.jsx(
              "button",
              {
                className: "block w-full text-left px-3 py-1.5 text-xs hover:bg-accent transition-colors",
                onClick: () => {
                  S(-1), G(!1);
                },
                children: ""
              }
            ),
            Object.entries(jc).map(([I, J]) => /* @__PURE__ */ h.jsxs(
              "button",
              {
                className: "block w-full text-left px-3 py-1.5 text-xs hover:bg-accent transition-colors",
                onClick: () => {
                  S(Number(I)), G(!1);
                },
                children: [
                  J.icon,
                  " ",
                  J.label
                ]
              },
              I
            ))
          ] })
        ] }),
        /* @__PURE__ */ h.jsx("div", { className: "w-px h-4 bg-border" }),
        /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
          /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",
              onClick: () => ne(!D),
              children: [
                x,
                /* @__PURE__ */ h.jsx(bo, { size: 12 })
              ]
            }
          ),
          D && /* @__PURE__ */ h.jsx("div", { className: "absolute top-full left-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-20 min-w-[120px] py-1 max-h-48 overflow-y-auto flex flex-col", children: nk.map((I) => /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "block w-full text-left px-3 py-1.5 text-xs hover:bg-accent transition-colors",
              onClick: () => {
                _(I), ne(!1);
              },
              children: I
            },
            I
          )) })
        ] }),
        /* @__PURE__ */ h.jsx("div", { className: "w-px h-4 bg-border" }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1.5 text-muted-foreground", children: [
          /* @__PURE__ */ h.jsx(po, { size: 12 }),
          /* @__PURE__ */ h.jsx(
            "input",
            {
              type: "text",
              placeholder: "...",
              value: g,
              onChange: (I) => y(I.target.value),
              className: "bg-transparent border-none outline-none text-xs text-foreground placeholder:text-muted-foreground w-24 md:w-40"
            }
          )
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1 ml-auto", children: [
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: `p-1.5 rounded transition-colors ${E ? "text-primary" : "text-muted-foreground hover:text-foreground"}`,
              onClick: () => N(!E),
              title: "",
              children: /* @__PURE__ */ h.jsx(Rx, { size: 14 })
            }
          ),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "p-1.5 rounded text-muted-foreground hover:text-foreground transition-colors",
              onClick: _e,
              title: "",
              children: /* @__PURE__ */ h.jsx(So, { size: 14 })
            }
          ),
          /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-1 px-2 py-1 text-xs text-muted-foreground hover:text-foreground transition-colors",
              onClick: we,
              children: [
                /* @__PURE__ */ h.jsx(_c, { size: 12 }),
                ""
              ]
            }
          )
        ] })
      ] }) }),
      /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto font-mono text-xs leading-relaxed py-2", children: c.length === 0 ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-full gap-3 text-muted-foreground", children: [
        /* @__PURE__ */ h.jsx(vo, { size: 32, strokeWidth: 1, className: "opacity-30" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "" })
      ] }) : /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
        c.map((I) => /* @__PURE__ */ h.jsx(Yw, { entry: I }, I.id)),
        /* @__PURE__ */ h.jsx("div", { ref: ie })
      ] }) }),
      /* @__PURE__ */ h.jsxs("div", { className: "text-[10px] text-muted-foreground py-2 border-t border-border", children: [
        l.length,
        " ",
        c.length !== l.length && `  ${c.length} `
      ] })
    ] }),
    r === "model" && /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-hidden", children: /* @__PURE__ */ h.jsx(ek, {}) })
  ] });
}, ik = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DevLog: rk
}, Symbol.toStringTag, { value: "Module" })), ak = {
  default: "text-muted-foreground bg-muted/50",
  primary: "text-primary bg-primary/10",
  blue: "text-blue-500 bg-blue-500/10",
  purple: "text-purple-500 bg-purple-500/10",
  orange: "text-orange-500 bg-orange-500/10",
  emerald: "text-emerald-500 bg-emerald-500/10"
}, lk = ({
  icon: n,
  title: r,
  subtitle: i,
  meta: l,
  badges: s = [],
  selected: c = !1,
  disabled: f = !1,
  toggle: g,
  onClick: y,
  actions: b = [],
  className: S = "",
  compact: x = !1
}) => {
  const _ = b.filter((N) => !N.hidden), E = !!g;
  return /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: `
                group relative flex items-center gap-3 
                ${x ? "py-2 px-2" : "py-3 px-3"}
                rounded-lg cursor-pointer transition-all duration-150
                ${c ? "bg-accent/60" : "hover:bg-muted/40"}
                ${f ? "opacity-50 pointer-events-none" : ""}
                ${S}
            `,
      onClick: y,
      children: [
        (n || E) && /* @__PURE__ */ h.jsx("div", { className: "flex-shrink-0", children: E ? /* @__PURE__ */ h.jsx(
          "button",
          {
            className: `
                                w-7 h-7 flex items-center justify-center rounded-md transition-colors
                                ${g.checked ? "text-primary" : "text-muted-foreground hover:text-foreground"}
                            `,
            onClick: (N) => {
              N.stopPropagation(), g.onChange(!g.checked);
            },
            children: /* @__PURE__ */ h.jsx(tm, { size: 14 })
          }
        ) : /* @__PURE__ */ h.jsx("div", { className: `
                            w-7 h-7 flex items-center justify-center rounded-md transition-colors
                            ${c ? "text-primary" : "text-muted-foreground group-hover:text-foreground"}
                        `, children: n }) }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ h.jsx("span", { className: `
                        text-sm font-medium truncate transition-colors
                        ${c ? "text-foreground" : "text-muted-foreground group-hover:text-foreground"}
                        ${g && !g.checked ? "line-through opacity-60" : ""}
                    `, children: r }),
            s.map((N, U) => /* @__PURE__ */ h.jsx(
              "span",
              {
                className: `
                                text-[10px] px-1.5 py-0.5 rounded-sm font-medium flex-shrink-0
                                ${ak[N.color || "default"]}
                            `,
                children: N.text
              },
              U
            ))
          ] }),
          (i || l) && /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mt-0.5 text-[11px] text-muted-foreground/70", children: [
            i && /* @__PURE__ */ h.jsx("span", { className: "truncate", children: i }),
            l && /* @__PURE__ */ h.jsx("span", { className: "flex-shrink-0 font-mono", children: l })
          ] })
        ] }),
        c && !_.length && /* @__PURE__ */ h.jsx(py, { size: 14, className: "text-primary flex-shrink-0" }),
        _.length > 0 && /* @__PURE__ */ h.jsx("div", { className: `
                    flex items-center gap-0.5 flex-shrink-0
                    ${c ? "opacity-100" : "opacity-0 group-hover:opacity-100"}
                    transition-opacity
                `, children: _.map((N, U) => /* @__PURE__ */ h.jsx(
          "button",
          {
            className: `
                                p-1.5 rounded transition-colors
                                ${N.danger ? "text-muted-foreground hover:text-destructive hover:bg-destructive/10" : "text-muted-foreground hover:text-foreground hover:bg-muted"}
                            `,
            onClick: (G) => {
              G.stopPropagation(), N.onClick(G);
            },
            title: N.title,
            children: N.icon
          },
          U
        )) })
      ]
    }
  );
}, ok = ({
  preset: n,
  isSelected: r,
  onSelect: i,
  onEdit: l,
  onCopy: s,
  onDelete: c
}) => {
  var y;
  const f = n.source === "tavern" || n.source === "tavern_profile" ? Sy : iv, g = n.source === "custom" ? ((y = n.custom) == null ? void 0 : y.model) || "" : "";
  return /* @__PURE__ */ h.jsx(
    lk,
    {
      icon: /* @__PURE__ */ h.jsx(f, { size: 14 }),
      title: n.name,
      subtitle: g,
      meta: `T:${n.parameters.temperature}`,
      badges: n.isDefault ? [{ text: "DEFAULT", color: "primary" }] : [],
      selected: r,
      onClick: i,
      actions: [
        { icon: /* @__PURE__ */ h.jsx(Bv, { size: 12 }), onClick: () => l(), title: "" },
        { icon: /* @__PURE__ */ h.jsx(gy, { size: 12 }), onClick: () => s(), title: "" },
        { icon: /* @__PURE__ */ h.jsx(So, { size: 12 }), onClick: () => c(), title: "", danger: !0, hidden: n.isDefault }
      ]
    }
  );
}, mo = ({
  checked: n,
  onChange: r,
  disabled: i = !1,
  className: l = "",
  id: s
}) => {
  const c = (f) => {
    i || (f.stopPropagation(), r(!n));
  };
  return /* @__PURE__ */ h.jsx(
    "button",
    {
      type: "button",
      role: "switch",
      id: s,
      "aria-checked": n,
      onClick: c,
      disabled: i,
      className: `
                relative inline-flex h-3.5 w-9 shrink-0 cursor-pointer items-center rounded-full border transition-all duration-300 focus:outline-none
                ${n ? "bg-primary/20 border-primary/50 shadow-[0_0_10px_rgba(var(--primary),0.2)]" : "bg-black/20 border-border shadow-inner"}
                ${i ? "opacity-50 cursor-not-allowed" : ""}
                ${l}
            `,
      children: /* @__PURE__ */ h.jsx(
        "span",
        {
          className: `
                    pointer-events-none inline-block h-2.5 w-2.5 transform rounded-full shadow-sm ring-0 transition-all duration-300 cubic-bezier(0.34, 1.56, 0.64, 1)
                    ${n ? "bg-primary shadow-[0_0_8px_rgba(var(--primary),0.8)] border border-primary-foreground/20" : "bg-muted-foreground border border-transparent opacity-60"}
                `,
          style: { transform: n ? "translateX(24px)" : "translateX(2px)" }
        }
      )
    }
  );
}, fr = ({ title: n, description: r, children: i, className: l = "" }) => /* @__PURE__ */ h.jsxs("div", { className: `mb-8 ${l}`, children: [
  /* @__PURE__ */ h.jsxs("div", { className: "mb-4", children: [
    /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-primary", children: n }),
    r && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mt-1 break-words", children: r })
  ] }),
  /* @__PURE__ */ h.jsx("div", { className: "space-y-4", children: i })
] }), Wn = ({
  label: n,
  description: r,
  error: i,
  required: l,
  className: s = "",
  value: c,
  onChange: f,
  placeholder: g,
  type: y = "text",
  disabled: b,
  multiline: S,
  rows: x = 3
}) => {
  const _ = {
    background: "transparent",
    backgroundColor: "transparent",
    border: "none",
    borderBottom: "1px solid var(--border)",
    borderRadius: 0,
    boxShadow: "none",
    outline: "none",
    padding: "8px 0",
    fontSize: "14px",
    width: "100%",
    color: "var(--foreground, inherit)"
  };
  return /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col gap-1 ${s}`, children: [
    /* @__PURE__ */ h.jsxs("label", { className: "text-xs text-muted-foreground flex items-center gap-1", children: [
      n,
      l && /* @__PURE__ */ h.jsx("span", { className: "text-destructive", children: "*" })
    ] }),
    S ? /* @__PURE__ */ h.jsx(
      "textarea",
      {
        value: c,
        onChange: (E) => f(E.target.value),
        placeholder: g,
        disabled: b,
        rows: x,
        style: _,
        className: "font-mono resize-y min-h-[80px] placeholder:text-muted-foreground/40 disabled:opacity-50 focus:border-primary transition-colors"
      }
    ) : /* @__PURE__ */ h.jsx(
      "input",
      {
        type: y,
        value: c,
        onChange: (E) => f(E.target.value),
        placeholder: g,
        disabled: b,
        style: _,
        className: "placeholder:text-muted-foreground/40 disabled:opacity-50 focus:border-primary transition-colors"
      }
    ),
    r && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-words", children: r }),
    i && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive", children: i })
  ] });
}, Oi = ({
  label: n,
  description: r,
  error: i,
  required: l,
  className: s = "",
  value: c,
  onChange: f,
  min: g,
  max: y,
  step: b = 1,
  showSlider: S = !0,
  suffix: x
}) => {
  const _ = {
    background: "transparent",
    backgroundColor: "transparent",
    border: "none",
    borderBottom: "1px solid var(--border)",
    borderRadius: 0,
    boxShadow: "none",
    outline: "none",
    padding: "4px 0",
    fontSize: "12px",
    width: "64px",
    textAlign: "right",
    fontFamily: "monospace",
    color: "var(--foreground, inherit)"
  }, E = g !== void 0 && y !== void 0 ? Math.min(100, Math.max(0, (c - g) / (y - g) * 100)) : 0;
  return /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col gap-2 ${s}`, children: [
    /* @__PURE__ */ h.jsx("div", { className: "flex justify-between items-center", children: /* @__PURE__ */ h.jsxs("label", { className: "text-xs text-muted-foreground flex items-center gap-1", children: [
      n,
      l && /* @__PURE__ */ h.jsx("span", { className: "text-destructive", children: "*" })
    ] }) }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
      S && g !== void 0 && y !== void 0 && /* @__PURE__ */ h.jsxs("div", { className: "flex-1 relative h-4 flex items-center group cursor-pointer", children: [
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute inset-x-0 h-[1px]",
            style: { backgroundColor: "var(--border)" }
          }
        ),
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
            style: { left: `${E}%`, transform: "translate(-50%, -50%)" }
          }
        ),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "range",
            min: g,
            max: y,
            step: b,
            value: c,
            onChange: (N) => f(Number(N.target.value)),
            className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
            style: { appearance: "none", WebkitAppearance: "none" }
          }
        )
      ] }),
      /* @__PURE__ */ h.jsx(
        "input",
        {
          type: "number",
          min: g,
          max: y,
          step: b,
          value: c,
          onChange: (N) => f(Number(N.target.value)),
          style: _,
          className: "focus:border-primary transition-colors [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
        }
      )
    ] }),
    r && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-words", children: r }),
    i && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive", children: i })
  ] });
}, Di = ({
  label: n,
  description: r,
  error: i,
  required: l,
  className: s = "",
  value: c,
  onChange: f,
  options: g,
  placeholder: y = "...",
  disabled: b
}) => {
  const S = {
    background: "transparent",
    backgroundColor: "transparent",
    border: "none",
    borderBottom: "1px solid var(--border)",
    borderRadius: 0,
    boxShadow: "none",
    outline: "none",
    padding: "8px 24px 8px 0",
    fontSize: "14px",
    width: "100%",
    cursor: "pointer",
    color: "var(--foreground, inherit)",
    appearance: "none",
    WebkitAppearance: "none"
  };
  return /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col gap-1 ${s}`, children: [
    /* @__PURE__ */ h.jsxs("label", { className: "text-xs text-muted-foreground flex items-center gap-1", children: [
      n,
      l && /* @__PURE__ */ h.jsx("span", { className: "text-destructive", children: "*" })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
      /* @__PURE__ */ h.jsxs(
        "select",
        {
          value: c,
          onChange: (x) => f(x.target.value),
          disabled: b,
          style: S,
          className: "disabled:opacity-50 disabled:cursor-not-allowed focus:border-primary transition-colors",
          children: [
            /* @__PURE__ */ h.jsx("option", { value: "", disabled: !0, className: "bg-popover text-muted-foreground", children: y }),
            g.map((x) => /* @__PURE__ */ h.jsx("option", { value: x.value, className: "bg-popover text-foreground", children: x.label }, x.value))
          ]
        }
      ),
      /* @__PURE__ */ h.jsx(bo, { size: 14, className: "absolute right-0 top-1/2 -translate-y-1/2 text-muted-foreground/50 pointer-events-none" })
    ] }),
    r && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-words", children: r }),
    i && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive", children: i })
  ] });
}, Sa = ({
  label: n,
  description: r,
  error: i,
  className: l = "",
  checked: s,
  onChange: c,
  disabled: f,
  compact: g
}) => /* @__PURE__ */ h.jsxs("div", { className: `flex items-start justify-between gap-4 ${g ? "py-0" : "py-1"} ${l} ${f ? "opacity-50 pointer-events-none" : ""}`, children: [
  n && /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
    /* @__PURE__ */ h.jsx(
      "label",
      {
        className: "text-xs text-foreground cursor-pointer block truncate",
        onClick: () => !f && c(!s),
        children: n
      }
    ),
    r && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 mt-0.5 break-words", children: r }),
    i && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive mt-0.5", children: i })
  ] }),
  /* @__PURE__ */ h.jsx(
    mo,
    {
      checked: s,
      onChange: c,
      disabled: f
    }
  )
] });
class Ri {
  // 10
  /**
   *  API 
   */
  static async fetchModels(r, i) {
    switch (r) {
      case "openai":
        return this.fetchOpenAIModels(i);
      case "ollama":
        return this.fetchOllamaModels(i);
      case "vllm":
        return this.fetchVLLMModels(i);
      case "cohere":
        return this.fetchCohereModels(i);
      case "jina":
      case "voyage":
        return this.getPresetModels(r);
      default:
        return Ve.warn("ModelService", `Unknown API type: ${r}`), [];
    }
  }
  /**
   *  OpenAI  API 
   * : OpenAI, Azure,  OpenAI 
   */
  static async fetchOpenAIModels(r) {
    const { apiUrl: i, apiKey: l, timeout: s = this.DEFAULT_TIMEOUT } = r, c = i.replace(/\/+$/, ""), f = c.endsWith("/v1") ? `${c}/models` : `${c}/v1/models`;
    try {
      const g = new AbortController(), y = setTimeout(() => g.abort(), s), b = {
        "Content-Type": "application/json"
      };
      l && (b.Authorization = `Bearer ${l}`);
      const S = await fetch(f, {
        method: "GET",
        headers: b,
        signal: g.signal
      });
      if (clearTimeout(y), !S.ok)
        throw new Error(`HTTP ${S.status}: ${S.statusText}`);
      const x = await S.json(), _ = (x.data || x || []).map((E) => ({
        id: E.id || E.model,
        name: E.name || E.id || E.model,
        owned_by: E.owned_by
      }));
      return Ve.info("ModelService", `Fetched ${_.length} models from OpenAI API`), _.sort((E, N) => E.id.localeCompare(N.id));
    } catch (g) {
      throw g.name === "AbortError" ? Ve.error("ModelService", "OpenAI API request timeout") : Ve.error("ModelService", `OpenAI API error: ${g.message}`), g;
    }
  }
  /**
   *  Ollama 
   */
  static async fetchOllamaModels(r) {
    const { apiUrl: i, timeout: l = this.DEFAULT_TIMEOUT } = r, c = `${i.replace(/\/+$/, "")}/api/tags`;
    try {
      const f = new AbortController(), g = setTimeout(() => f.abort(), l), y = await fetch(c, {
        method: "GET",
        signal: f.signal
      });
      if (clearTimeout(g), !y.ok)
        throw new Error(`HTTP ${y.status}: ${y.statusText}`);
      const S = ((await y.json()).models || []).map((x) => ({
        id: x.name || x.model,
        name: x.name || x.model
      }));
      return Ve.info("ModelService", `Fetched ${S.length} models from Ollama`), S;
    } catch (f) {
      throw Ve.error("ModelService", `Ollama API error: ${f.message}`), f;
    }
  }
  /**
   *  vLLM 
   * vLLM  OpenAI  API
   */
  static async fetchVLLMModels(r) {
    return this.fetchOpenAIModels(r);
  }
  /**
   *  Cohere 
   */
  static async fetchCohereModels(r) {
    const { apiKey: i, timeout: l = this.DEFAULT_TIMEOUT } = r;
    if (!i)
      return Ve.warn("ModelService", "Cohere API key required"), this.getPresetModels("cohere");
    try {
      const s = new AbortController(), c = setTimeout(() => s.abort(), l), f = await fetch("https://api.cohere.ai/v1/models", {
        method: "GET",
        headers: {
          Authorization: `Bearer ${i}`,
          "Content-Type": "application/json"
        },
        signal: s.signal
      });
      if (clearTimeout(c), !f.ok)
        throw new Error(`HTTP ${f.status}: ${f.statusText}`);
      const y = ((await f.json()).models || []).filter((b) => {
        var S;
        return (S = b.endpoints) == null ? void 0 : S.includes("embed");
      }).map((b) => ({
        id: b.name,
        name: b.name,
        contextLength: b.context_length
      }));
      return Ve.info("ModelService", `Fetched ${y.length} embed models from Cohere`), y;
    } catch (s) {
      return Ve.error("ModelService", `Cohere API error: ${s.message}`), this.getPresetModels("cohere");
    }
  }
  /**
   * 
   */
  static getPresetModels(r) {
    return {
      cohere: [
        { id: "embed-multilingual-v3.0", name: "Embed Multilingual v3.0" },
        { id: "embed-english-v3.0", name: "Embed English v3.0" },
        { id: "embed-multilingual-light-v3.0", name: "Embed Multilingual Light v3.0" },
        { id: "embed-english-light-v3.0", name: "Embed English Light v3.0" }
      ],
      jina: [
        { id: "jina-embeddings-v3", name: "Jina Embeddings v3" },
        { id: "jina-embeddings-v2-base-en", name: "Jina Embeddings v2 Base EN" },
        { id: "jina-embeddings-v2-base-zh", name: "Jina Embeddings v2 Base ZH" },
        { id: "jina-colbert-v2", name: "Jina ColBERT v2" }
      ],
      voyage: [
        { id: "voyage-3", name: "Voyage 3" },
        { id: "voyage-3-lite", name: "Voyage 3 Lite" },
        { id: "voyage-large-2", name: "Voyage Large 2" },
        { id: "voyage-code-2", name: "Voyage Code 2" },
        { id: "voyage-multilingual-2", name: "Voyage Multilingual 2" }
      ],
      openai: [
        { id: "text-embedding-3-large", name: "Text Embedding 3 Large" },
        { id: "text-embedding-3-small", name: "Text Embedding 3 Small" },
        { id: "text-embedding-ada-002", name: "Text Embedding Ada 002" }
      ]
    }[r] || [];
  }
  /**
   *  Rerank 
   */
  static getCommonRerankModels() {
    return [
      { id: "BAAI/bge-reranker-v2-m3", name: "BGE Reranker v2 m3" },
      { id: "BAAI/bge-reranker-large", name: "BGE Reranker Large" },
      { id: "BAAI/bge-reranker-base", name: "BGE Reranker Base" },
      { id: "cross-encoder/ms-marco-MiniLM-L-12-v2", name: "MS MARCO MiniLM L12" },
      { id: "Xenova/ms-marco-MiniLM-L-6-v2", name: "MS MARCO MiniLM L6 (ONNX)" },
      { id: "jinaai/jina-reranker-v2-base-multilingual", name: "Jina Reranker v2 Multilingual" }
    ];
  }
}
dt(Ri, "DEFAULT_TIMEOUT", 1e4);
const sk = [
  { value: "openai", label: "OpenAI" },
  { value: "anthropic", label: "Anthropic" },
  { value: "ollama", label: "Ollama" },
  { value: "vllm", label: "vLLM" },
  { value: "azure", label: "Azure OpenAI" },
  { value: "custom", label: "" }
], uk = [
  { value: "tavern", label: "" },
  { value: "tavern_profile", label: "" },
  { value: "custom", label: " API " }
];
function ck() {
  var n, r, i, l;
  try {
    const s = (i = (r = (n = window.SillyTavern) == null ? void 0 : n.getContext) == null ? void 0 : r.call(n)) == null ? void 0 : i.extensionSettings;
    return ((l = s == null ? void 0 : s.connectionManager) == null ? void 0 : l.profiles) || [];
  } catch (s) {
    return console.warn("[Engram]  connection_profiles:", s), [];
  }
}
const fk = ({
  preset: n,
  onChange: r,
  isNew: i = !1
}) => {
  var we, I, J, De, He, W;
  const [l, s] = se.useState([]), [c, f] = se.useState(!1), [g, y] = se.useState([]), [b, S] = se.useState(!1), [x, _] = se.useState(null), E = () => {
    f(!0);
    try {
      const Q = ck();
      s(Q);
    } finally {
      f(!1);
    }
  }, N = async () => {
    const { apiUrl: Q, apiKey: ye, apiSource: Be } = n.custom || {};
    if (!Q) {
      _(" API URL");
      return;
    }
    S(!0), _(null);
    try {
      let Me = [];
      Be === "ollama" ? Me = await Ri.fetchOllamaModels({ apiUrl: Q }) : Me = await Ri.fetchOpenAIModels({ apiUrl: Q, apiKey: ye }), y(Me), Me.length === 0 && _("");
    } catch (Me) {
      _(Me.message || ""), y([]);
    } finally {
      S(!1);
    }
  };
  se.useEffect(() => {
    E();
  }, []);
  const U = (Q) => {
    r({ ...n, ...Q, updatedAt: Date.now() });
  }, G = (Q, ye) => {
    U({
      parameters: { ...n.parameters, [Q]: ye }
    });
  }, D = (Q, ye) => {
    var Be, Me, ke, ee;
    U({
      custom: {
        apiUrl: ((Be = n.custom) == null ? void 0 : Be.apiUrl) || "",
        apiKey: ((Me = n.custom) == null ? void 0 : Me.apiKey) || "",
        model: ((ke = n.custom) == null ? void 0 : ke.model) || "",
        apiSource: ((ee = n.custom) == null ? void 0 : ee.apiSource) || "openai",
        [Q]: ye
      }
    });
  }, ne = (Q) => {
    const ye = Q;
    U({
      source: ye,
      tavernProfileId: ye === "tavern_profile" ? n.tavernProfileId : void 0
    }), ye === "tavern_profile" && E();
  }, ie = l.map((Q) => ({
    value: Q.id,
    label: `${Q.name} (${Q.api || "Unknown"} - ${Q.model || "Unknown"})`
  })), _e = l.find((Q) => Q.id === n.tavernProfileId);
  return /* @__PURE__ */ h.jsxs("div", { className: "", children: [
    /* @__PURE__ */ h.jsxs(fr, { title: "", children: [
      /* @__PURE__ */ h.jsx(
        Wn,
        {
          label: "",
          value: n.name,
          onChange: (Q) => U({ name: Q }),
          placeholder: "",
          required: !0
        }
      ),
      /* @__PURE__ */ h.jsx(
        Di,
        {
          label: "",
          value: n.source,
          onChange: ne,
          options: uk,
          description: " API "
        }
      )
    ] }),
    n.source === "tavern_profile" && /* @__PURE__ */ h.jsxs(fr, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-end gap-2", children: [
        /* @__PURE__ */ h.jsx(
          Di,
          {
            className: "flex-1 !mb-0",
            label: "",
            value: n.tavernProfileId || "",
            onChange: (Q) => U({ tavernProfileId: Q }),
            options: ie,
            placeholder: c ? "..." : "",
            disabled: c || ie.length === 0
          }
        ),
        /* @__PURE__ */ h.jsx(
          "button",
          {
            type: "button",
            className: "h-[42px] w-[42px] min-w-[42px] flex items-center justify-center border-none rounded-md bg-muted text-muted-foreground cursor-pointer transition-all hover:bg-accent hover:text-foreground",
            onClick: E,
            disabled: c,
            title: "",
            children: /* @__PURE__ */ h.jsx(ei, { size: 16, className: c ? "animate-spin" : "" })
          }
        )
      ] }),
      ie.length === 0 && !c && /* @__PURE__ */ h.jsx("div", { className: "p-3 bg-muted/30 border border-dashed border-border rounded-lg text-muted-foreground text-sm text-center mt-3", children: "" }),
      _e && /* @__PURE__ */ h.jsxs("div", { className: "mt-4 p-3 bg-card rounded-lg border border-border", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 py-1 text-sm border-b border-border last:border-0", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground min-w-[60px]", children: "API:" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-foreground font-mono", children: _e.api || "-" })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 py-1 text-sm border-b border-border last:border-0", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground min-w-[60px]", children: ":" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-foreground font-mono", children: _e.model || "-" })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 py-1 text-sm border-b border-border last:border-0", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground min-w-[60px]", children: ":" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-foreground font-mono", children: _e.preset || "-" })
        ] })
      ] })
    ] }),
    n.source === "custom" && /* @__PURE__ */ h.jsxs(fr, { title: "API ", description: " API ", children: [
      /* @__PURE__ */ h.jsx(
        Di,
        {
          label: "API ",
          value: ((we = n.custom) == null ? void 0 : we.apiSource) || "openai",
          onChange: (Q) => D("apiSource", Q),
          options: sk
        }
      ),
      /* @__PURE__ */ h.jsx(
        Wn,
        {
          label: "API URL",
          type: "url",
          value: ((I = n.custom) == null ? void 0 : I.apiUrl) || "",
          onChange: (Q) => D("apiUrl", Q),
          placeholder: "https://api.openai.com/v1",
          required: !0
        }
      ),
      /* @__PURE__ */ h.jsx(
        Wn,
        {
          label: "API Key",
          type: "password",
          value: ((J = n.custom) == null ? void 0 : J.apiKey) || "",
          onChange: (Q) => D("apiKey", Q),
          placeholder: "sk-..."
        }
      ),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-end gap-2", children: [
          g.length > 0 ? /* @__PURE__ */ h.jsx(
            Di,
            {
              className: "flex-1 !mb-0",
              label: "",
              value: ((De = n.custom) == null ? void 0 : De.model) || "",
              onChange: (Q) => D("model", Q),
              options: g.map((Q) => ({ value: Q.id, label: Q.name || Q.id })),
              placeholder: ""
            }
          ) : /* @__PURE__ */ h.jsx(
            Wn,
            {
              className: "flex-1 !mb-0",
              label: "",
              value: ((He = n.custom) == null ? void 0 : He.model) || "",
              onChange: (Q) => D("model", Q),
              placeholder: "gpt-4o-mini",
              required: !0
            }
          ),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              type: "button",
              className: "h-[42px] w-[42px] min-w-[42px] flex items-center justify-center border-none rounded-md bg-muted text-muted-foreground cursor-pointer transition-all hover:bg-accent hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",
              onClick: N,
              disabled: b || !((W = n.custom) != null && W.apiUrl),
              title: "",
              children: b ? /* @__PURE__ */ h.jsx(Gs, { size: 16, className: "animate-spin" }) : /* @__PURE__ */ h.jsx(ei, { size: 16 })
            }
          )
        ] }),
        x && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-destructive", children: x }),
        g.length > 0 && /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
          " ",
          g.length,
          " "
        ] })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs(fr, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsx(
        Oi,
        {
          label: " (Temperature)",
          value: n.parameters.temperature,
          onChange: (Q) => G("temperature", Q),
          min: 0,
          max: 2,
          step: 0.1,
          description: ""
        }
      ),
      /* @__PURE__ */ h.jsx(
        Oi,
        {
          label: "Top-P",
          value: n.parameters.topP,
          onChange: (Q) => G("topP", Q),
          min: 0,
          max: 1,
          step: 0.05,
          description: " token "
        }
      ),
      /* @__PURE__ */ h.jsx(
        Oi,
        {
          label: " Tokens",
          value: n.parameters.maxTokens,
          onChange: (Q) => G("maxTokens", Q),
          min: 64,
          max: 16384,
          step: 64,
          showSlider: !1
        }
      ),
      /* @__PURE__ */ h.jsx(
        Oi,
        {
          label: "",
          value: n.parameters.frequencyPenalty,
          onChange: (Q) => G("frequencyPenalty", Q),
          min: -2,
          max: 2,
          step: 0.1,
          description: " token "
        }
      ),
      /* @__PURE__ */ h.jsx(
        Oi,
        {
          label: "",
          value: n.parameters.presencePenalty,
          onChange: (Q) => G("presencePenalty", Q),
          min: -2,
          max: 2,
          step: 0.1,
          description: ""
        }
      )
    ] })
  ] });
}, dk = [
  { value: "custom", label: " (OpenAI )" },
  { value: "transformers", label: "Transformers ()" },
  { value: "openai", label: "OpenAI Embeddings" },
  { value: "ollama", label: "Ollama" },
  { value: "vllm", label: "vLLM" },
  { value: "cohere", label: "Cohere" },
  { value: "jina", label: "Jina AI" },
  { value: "voyage", label: "Voyage AI" }
], oy = {
  custom: "text-embedding-3-small",
  transformers: "Xenova/all-MiniLM-L6-v2",
  openai: "text-embedding-3-small",
  ollama: "nomic-embed-text",
  vllm: "BAAI/bge-m3",
  cohere: "embed-multilingual-v3.0",
  jina: "jina-embeddings-v3",
  voyage: "voyage-large-2"
}, sy = ["custom", "ollama", "vllm"], uy = ["custom", "openai", "cohere", "jina", "voyage"], hk = ({
  config: n,
  onChange: r
}) => {
  var E;
  const i = (N) => {
    r({ ...n, ...N });
  }, l = (N) => {
    i({
      source: N,
      model: oy[N],
      apiUrl: sy.includes(N) ? n.apiUrl : void 0,
      apiKey: uy.includes(N) ? n.apiKey : void 0
    });
  }, s = sy.includes(n.source), c = uy.includes(n.source), [f, g] = se.useState([]), [y, b] = se.useState(!1), [S, x] = se.useState(null), _ = async () => {
    b(!0), x(null);
    try {
      let N = [];
      const U = { apiUrl: n.apiUrl || "", apiKey: n.apiKey };
      switch (n.source) {
        case "ollama":
          if (!n.apiUrl) {
            x(" API URL");
            return;
          }
          N = await Ri.fetchOllamaModels(U);
          break;
        case "vllm":
          if (!n.apiUrl) {
            x(" API URL");
            return;
          }
          N = await Ri.fetchVLLMModels(U);
          break;
        case "openai":
        case "cohere":
        case "jina":
        case "voyage":
          N = Ri.getPresetModels(n.source);
          break;
        default:
          N = [];
      }
      g(N), N.length === 0 && x("");
    } catch (N) {
      x(N.message || ""), g([]);
    } finally {
      b(!1);
    }
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "", children: [
    /* @__PURE__ */ h.jsxs(fr, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsx(
        Di,
        {
          label: "",
          value: n.source,
          onChange: (N) => l(N),
          options: dk,
          description: ""
        }
      ),
      s && /* @__PURE__ */ h.jsx(
        Wn,
        {
          label: "API URL",
          type: "url",
          value: n.apiUrl || "",
          onChange: (N) => i({ apiUrl: N }),
          placeholder: n.source === "ollama" ? "http://localhost:11434" : "http://localhost:8000",
          description: `${n.source}  API `
        }
      ),
      c && /* @__PURE__ */ h.jsx(
        Wn,
        {
          label: "API Key",
          type: "password",
          value: n.apiKey || "",
          onChange: (N) => i({ apiKey: N }),
          placeholder: " API "
        }
      ),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-end gap-2", children: [
          f.length > 0 ? /* @__PURE__ */ h.jsx(
            Di,
            {
              className: "flex-1 !mb-0",
              label: "",
              value: n.model || "",
              onChange: (N) => i({ model: N }),
              options: f.map((N) => ({ value: N.id, label: N.name || N.id })),
              placeholder: ""
            }
          ) : /* @__PURE__ */ h.jsx(
            Wn,
            {
              className: "flex-1 !mb-0",
              label: "",
              value: n.model || "",
              onChange: (N) => i({ model: N }),
              placeholder: oy[n.source],
              description: ""
            }
          ),
          (s || c) && /* @__PURE__ */ h.jsx(
            "button",
            {
              type: "button",
              className: "h-[42px] w-[42px] min-w-[42px] flex items-center justify-center border-none rounded-md bg-muted text-muted-foreground cursor-pointer transition-all hover:bg-accent hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",
              onClick: _,
              disabled: y,
              title: "",
              children: y ? /* @__PURE__ */ h.jsx(Gs, { size: 16, className: "animate-spin" }) : /* @__PURE__ */ h.jsx(ei, { size: 16 })
            }
          )
        ] }),
        S && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-destructive", children: S }),
        f.length > 0 && /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
          " ",
          f.length,
          " "
        ] })
      ] })
    ] }),
    /* @__PURE__ */ h.jsx(fr, { title: "", collapsible: !0, defaultCollapsed: !0, children: /* @__PURE__ */ h.jsx(
      Wn,
      {
        label: "",
        value: ((E = n.dimensions) == null ? void 0 : E.toString()) || "",
        onChange: (N) => {
          const U = parseInt(N, 10);
          i({ dimensions: isNaN(U) ? void 0 : U });
        },
        placeholder: "",
        description: ""
      }
    ) })
  ] });
}, mk = ({
  config: n,
  onChange: r
}) => {
  const i = (S) => {
    r({ ...n, ...S });
  }, [l, s] = se.useState([]), [c, f] = se.useState(!1), [g, y] = se.useState(null), b = async () => {
    if (!n.url) {
      y(" API URL");
      return;
    }
    f(!0), y(null);
    try {
      const S = await Ri.fetchOpenAIModels({
        apiUrl: n.url,
        apiKey: n.apiKey
      });
      S.length > 0 ? s(S) : s(Ri.getCommonRerankModels());
    } catch {
      s(Ri.getCommonRerankModels());
    } finally {
      f(!1);
    }
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "", children: [
    /* @__PURE__ */ h.jsx(fr, { title: "Rerank ", description: "", children: /* @__PURE__ */ h.jsx(
      Sa,
      {
        label: " Rerank",
        checked: n.enabled,
        onChange: (S) => i({ enabled: S }),
        description: " Rerank "
      }
    ) }),
    n.enabled && /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
      /* @__PURE__ */ h.jsxs(fr, { title: "API ", children: [
        /* @__PURE__ */ h.jsx(
          Wn,
          {
            label: "API URL",
            type: "url",
            value: n.url,
            onChange: (S) => i({ url: S }),
            placeholder: "http://localhost:8000/rerank",
            description: "Rerank  API ",
            required: !0
          }
        ),
        /* @__PURE__ */ h.jsx(
          Wn,
          {
            label: "API Key",
            type: "password",
            value: n.apiKey,
            onChange: (S) => i({ apiKey: S }),
            placeholder: " API "
          }
        ),
        /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-end gap-2", children: [
            l.length > 0 ? /* @__PURE__ */ h.jsx(
              Di,
              {
                className: "flex-1 !mb-0",
                label: "",
                value: n.model,
                onChange: (S) => i({ model: S }),
                options: l.map((S) => ({ value: S.id, label: S.name || S.id })),
                placeholder: ""
              }
            ) : /* @__PURE__ */ h.jsx(
              Wn,
              {
                className: "flex-1 !mb-0",
                label: "",
                value: n.model,
                onChange: (S) => i({ model: S }),
                placeholder: "BAAI/bge-reranker-v2-m3",
                description: " Rerank ",
                required: !0
              }
            ),
            /* @__PURE__ */ h.jsx(
              "button",
              {
                type: "button",
                className: "h-[42px] w-[42px] min-w-[42px] flex items-center justify-center border-none rounded-md bg-muted text-muted-foreground cursor-pointer transition-all hover:bg-accent hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",
                onClick: b,
                disabled: c,
                title: "",
                children: c ? /* @__PURE__ */ h.jsx(Gs, { size: 16, className: "animate-spin" }) : /* @__PURE__ */ h.jsx(ei, { size: 16 })
              }
            )
          ] }),
          g && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-destructive", children: g }),
          l.length > 0 && /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
            " ",
            l.length,
            " "
          ] })
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs(fr, { title: "", children: [
        /* @__PURE__ */ h.jsx(
          Oi,
          {
            label: "Top-N",
            value: n.topN,
            onChange: (S) => i({ topN: S }),
            min: 1,
            max: 50,
            step: 1,
            description: ""
          }
        ),
        /* @__PURE__ */ h.jsx(
          Oi,
          {
            label: " (Hybrid Alpha)",
            value: n.hybridAlpha,
            onChange: (S) => i({ hybridAlpha: S }),
            min: 0,
            max: 1,
            step: 0.1,
            description: "0 = 1 =  Rerank "
          }
        )
      ] })
    ] })
  ] });
};
function pk(n) {
  switch (n) {
    case "summary":
      return "text-blue-500 bg-blue-500/10 border border-blue-500/20";
    case "trim":
      return "text-orange-500 bg-orange-500/10 border border-orange-500/20";
    case "query_enhance":
      return "text-emerald-500 bg-emerald-500/10 border border-emerald-500/20";
    default:
      return "text-muted-foreground bg-muted border border-border";
  }
}
function gk(n) {
  var r;
  return ((r = Rc.find((i) => i.value === n)) == null ? void 0 : r.label) || n;
}
const yk = ({
  template: n,
  isSelected: r = !1,
  onSelect: i,
  onCopy: l,
  onDelete: s,
  onToggleEnabled: c,
  onImport: f,
  onResetToDefault: g
}) => {
  const y = se.useRef(null), b = (_) => {
    _.stopPropagation();
    const E = {
      version: "1.0",
      exportedAt: Date.now(),
      template: {
        name: n.name,
        category: n.category,
        boundPresetId: n.boundPresetId,
        systemPrompt: n.systemPrompt,
        userPromptTemplate: n.userPromptTemplate,
        outputFormat: n.outputFormat,
        availableVariables: n.availableVariables
      }
    }, N = new Blob([JSON.stringify(E, null, 2)], { type: "application/json" }), U = URL.createObjectURL(N), G = document.createElement("a");
    G.href = U, G.download = `engram_template_${n.name.replace(/\s+/g, "_")}.json`, G.click(), URL.revokeObjectURL(U);
  }, S = (_) => {
    var E;
    _.stopPropagation(), (E = y.current) == null || E.click();
  }, x = (_) => {
    var U;
    const E = (U = _.target.files) == null ? void 0 : U[0];
    if (!E || !f) return;
    const N = new FileReader();
    N.onload = (G) => {
      var D;
      try {
        const ne = JSON.parse((D = G.target) == null ? void 0 : D.result);
        if (ne.version && ne.template) {
          const ie = yo(
            ne.template.name,
            ne.template.category,
            {
              enabled: n.enabled,
              // 
              isBuiltIn: n.isBuiltIn,
              // 
              boundPresetId: ne.template.boundPresetId,
              systemPrompt: ne.template.systemPrompt,
              userPromptTemplate: ne.template.userPromptTemplate,
              outputFormat: ne.template.outputFormat,
              availableVariables: ne.template.availableVariables
            }
          );
          ie.id = n.id, f(ie);
        }
      } catch (ne) {
        console.error(":", ne);
      }
    }, N.readAsText(E), y.current && (y.current.value = "");
  };
  return /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: `
                group relative p-3 rounded-lg border cursor-pointer transition-all duration-200
                ${r ? "bg-accent/50 border-input" : "bg-transparent border-transparent hover:bg-muted/50 hover:border-border"}
                ${!n.enabled && "opacity-50"}
            `,
      onClick: i,
      children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-start gap-3", children: [
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: `
                        w-8 h-8 flex items-center justify-center rounded-lg transition-colors flex-shrink-0
                        ${n.enabled ? "bg-primary/10 text-primary" : "bg-muted text-muted-foreground hover:text-foreground"}
                    `,
              onClick: (_) => {
                _.stopPropagation(), c == null || c(!n.enabled);
              },
              children: /* @__PURE__ */ h.jsx(tm, { size: 14 })
            }
          ),
          /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-2", children: [
              /* @__PURE__ */ h.jsx("h4", { className: `text-sm font-medium truncate ${r ? "text-foreground" : "text-muted-foreground group-hover:text-foreground"} ${!n.enabled && "line-through"}`, children: n.name }),
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1.5 flex-shrink-0", children: [
                /* @__PURE__ */ h.jsx("span", { className: `text-[10px] px-1.5 py-0.5 rounded-sm font-medium ${pk(n.category)}`, children: gk(n.category) }),
                n.isBuiltIn && /* @__PURE__ */ h.jsx("span", { className: "text-[10px] px-1.5 py-0.5 rounded-sm bg-muted text-muted-foreground", children: "BUILTIN" })
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "mt-1 flex items-center justify-between text-[10px] text-muted-foreground/70 font-mono", children: [
              /* @__PURE__ */ h.jsx("span", { className: "truncate max-w-[120px]", children: n.boundPresetId ? `BOUND: ${n.boundPresetId}` : "DEFAULT PRESET" }),
              /* @__PURE__ */ h.jsx("span", { children: n.outputFormat.toUpperCase() })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: `mt-2 flex justify-end gap-1 ${r || "opacity-0 group-hover:opacity-100"} transition-opacity`, children: [
          /* @__PURE__ */ h.jsx("button", { className: "p-1.5 hover:bg-muted rounded text-muted-foreground hover:text-foreground transition-colors", onClick: S, title: "Import", children: /* @__PURE__ */ h.jsx(c4, { size: 12 }) }),
          /* @__PURE__ */ h.jsx("button", { className: "p-1.5 hover:bg-muted rounded text-muted-foreground hover:text-foreground transition-colors", onClick: b, title: "Export", children: /* @__PURE__ */ h.jsx(_c, { size: 12 }) }),
          /* @__PURE__ */ h.jsx("button", { className: "p-1.5 hover:bg-muted rounded text-muted-foreground hover:text-foreground transition-colors", onClick: (_) => {
            _.stopPropagation(), l == null || l();
          }, title: "Copy", children: /* @__PURE__ */ h.jsx(gy, { size: 12 }) }),
          n.isBuiltIn && /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "p-1.5 hover:bg-amber-500/10 rounded text-muted-foreground hover:text-amber-500 transition-colors",
              onClick: (_) => {
                _.stopPropagation();
                const E = jm(n.category);
                E && g && g({
                  ...E,
                  id: n.id,
                  enabled: n.enabled
                });
              },
              title: "",
              children: /* @__PURE__ */ h.jsx(Vv, { size: 12 })
            }
          ),
          !n.isBuiltIn && /* @__PURE__ */ h.jsx("button", { className: "p-1.5 hover:bg-destructive/10 rounded text-muted-foreground hover:text-destructive transition-colors", onClick: (_) => {
            _.stopPropagation(), s == null || s();
          }, title: "Delete", children: /* @__PURE__ */ h.jsx(So, { size: 12 }) })
        ] }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            ref: y,
            type: "file",
            accept: ".json",
            onChange: x,
            className: "hidden"
          }
        )
      ]
    }
  );
}, bk = ({
  templates: n,
  selectedId: r,
  onSelect: i,
  onAdd: l,
  onUpdate: s,
  onDelete: c
}) => {
  const f = () => {
    const x = yo(
      ` ${n.length + 1}`,
      "summary"
    );
    l(x), i(x);
  }, g = (x) => {
    const _ = yo(
      `${x.name} ()`,
      x.category,
      {
        enabled: !1,
        // 
        boundPresetId: x.boundPresetId,
        systemPrompt: x.systemPrompt,
        userPromptTemplate: x.userPromptTemplate,
        outputFormat: x.outputFormat,
        availableVariables: [...x.availableVariables]
      }
    );
    l(_);
  }, y = (x, _) => {
    _ && n.filter((E) => E.category === x.category && E.id !== x.id && E.enabled).forEach((E) => s({ ...E, enabled: !1 })), s({ ...x, enabled: _ });
  }, b = (x) => {
    s(x);
  }, S = Rc.map((x) => ({
    ...x,
    templates: n.filter((_) => _.category === x.value)
  })).filter((x) => x.templates.length > 0);
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4 h-full", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-2", children: [
      /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-bold text-muted-foreground uppercase tracking-wider", children: "" }),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "text-muted-foreground hover:text-foreground transition-colors",
          onClick: f,
          children: /* @__PURE__ */ h.jsx(em, { size: 16 })
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-6 overflow-y-auto flex-1 no-scrollbar", children: [
      S.map((x) => /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "text-[10px] items-center gap-2 text-muted-foreground font-medium px-1 uppercase tracking-wider flex", children: [
          x.label,
          /* @__PURE__ */ h.jsx("div", { className: "h-px bg-border flex-1" })
        ] }),
        /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-1", children: x.templates.map((_) => /* @__PURE__ */ h.jsx(
          yk,
          {
            template: _,
            isSelected: r === _.id,
            onSelect: () => i(_),
            onCopy: () => g(_),
            onDelete: () => c(_),
            onToggleEnabled: (E) => y(_, E),
            onImport: b,
            onResetToDefault: (E) => s(E)
          },
          _.id
        )) })
      ] }, x.value)),
      n.length === 0 && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center py-12 text-muted-foreground gap-2 border border-dashed border-border rounded-lg", children: [
        /* @__PURE__ */ h.jsx(Wh, { size: 24, className: "opacity-50" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs", children: "" })
      ] })
    ] })
  ] });
}, xk = [
  { name: "{{chatHistory}}", desc: "" },
  { name: "{{context}}", desc: "" },
  { name: "{{char}}", desc: "" },
  { name: "{{user}}", desc: "" },
  { name: "{{userInput}}", desc: "" },
  { name: "{{worldbookContext}}", desc: "" },
  { name: "{{engramSummaries}}", desc: "Engram " }
], vk = ({
  template: n,
  llmPresets: r,
  defaultPresetId: i,
  onChange: l
}) => {
  var f, g;
  const s = [
    { value: "", label: "" + (i ? ` (${((f = r.find((y) => y.id === i)) == null ? void 0 : f.name) || i})` : "") },
    ...r.map((y) => ({ value: y.id, label: y.name }))
  ], c = (y) => {
    l({ ...n, ...y, updatedAt: Date.now() });
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4", children: [
    /* @__PURE__ */ h.jsxs(fr, { title: "", children: [
      /* @__PURE__ */ h.jsx(
        Wn,
        {
          label: "",
          value: n.name,
          onChange: (y) => c({ name: y }),
          placeholder: "",
          required: !0,
          disabled: n.isBuiltIn
        }
      ),
      /* @__PURE__ */ h.jsx(
        Di,
        {
          label: "",
          value: n.category,
          onChange: (y) => c({ category: y }),
          options: Rc.map((y) => ({ value: y.value, label: y.label })),
          description: (g = Rc.find((y) => y.value === n.category)) == null ? void 0 : g.description
        }
      ),
      /* @__PURE__ */ h.jsx(
        Di,
        {
          label: "",
          value: n.boundPresetId || "",
          onChange: (y) => c({ boundPresetId: y || null }),
          options: s,
          description: " LLM "
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs(fr, { title: "", children: [
      /* @__PURE__ */ h.jsx(
        Wn,
        {
          label: "",
          value: n.systemPrompt,
          onChange: (y) => c({ systemPrompt: y }),
          placeholder: "...",
          multiline: !0,
          rows: 4
        }
      ),
      /* @__PURE__ */ h.jsx(
        Wn,
        {
          label: "",
          value: n.userPromptTemplate,
          onChange: (y) => c({ userPromptTemplate: y }),
          placeholder: "...",
          multiline: !0,
          rows: 6
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "px-3 py-2 bg-muted/30 rounded border border-border", children: [
      /* @__PURE__ */ h.jsx("div", { className: "text-[10px] text-muted-foreground mb-2 font-medium uppercase tracking-wider", children: "" }),
      /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-1", children: xk.map((y) => /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-[10px]", children: [
        /* @__PURE__ */ h.jsx("code", { className: "px-1.5 py-0.5 bg-muted rounded text-primary font-mono whitespace-nowrap", children: y.name }),
        /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground", children: y.desc })
      ] }, y.name)) })
    ] })
  ] });
}, Sk = ({
  rules: n,
  selectedId: r,
  onSelect: i,
  onToggle: l,
  onDelete: s,
  onAdd: c,
  onReset: f
}) => /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4", children: [
  /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-bold text-muted-foreground uppercase tracking-wider", children: "" }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex gap-2", children: [
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "text-[10px] text-muted-foreground hover:text-destructive transition-colors",
          onClick: f,
          children: ""
        }
      ),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "text-muted-foreground hover:text-foreground transition-colors",
          onClick: c,
          children: /* @__PURE__ */ h.jsx(vy, { size: 16 })
        }
      )
    ] })
  ] }),
  /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
    n.map((g) => /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: `
                            group p-3 rounded-lg transition-all duration-200 cursor-pointer border flex items-center gap-3
                            ${r === g.id ? "bg-accent/50 border-input" : "bg-transparent border-transparent hover:bg-muted/50 hover:border-border"}
                            ${!g.enabled && "opacity-50"}
                        `,
        onClick: () => i(g.id),
        children: [
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: `
                                w-8 h-8 flex items-center justify-center rounded-lg transition-colors
                                ${g.enabled ? r === g.id ? "bg-primary/20 text-primary" : "bg-muted text-primary" : "bg-muted text-muted-foreground"}
                            `,
              onClick: (y) => {
                y.stopPropagation(), l(g.id);
              },
              title: g.enabled ? "" : "",
              children: /* @__PURE__ */ h.jsx(tm, { size: 14 })
            }
          ),
          /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ h.jsx("div", { className: "flex items-center justify-between", children: /* @__PURE__ */ h.jsx("h4", { className: `text-sm font-medium truncate ${r === g.id ? "text-foreground" : "text-muted-foreground group-hover:text-foreground"} ${!g.enabled && "opacity-50 line-through"}`, children: g.name }) }),
            /* @__PURE__ */ h.jsx("div", { className: "mt-0.5 flex items-center gap-2", children: /* @__PURE__ */ h.jsxs("code", { className: "text-[10px] bg-muted px-1 rounded text-muted-foreground font-mono truncate max-w-[120px]", children: [
              "/",
              g.pattern,
              "/",
              g.flags
            ] }) })
          ] }),
          /* @__PURE__ */ h.jsx("div", { className: `flex items-center ${r === g.id ? "opacity-100" : "opacity-0 group-hover:opacity-100"} transition-opacity`, children: /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "p-1.5 hover:bg-destructive/10 rounded text-muted-foreground hover:text-destructive transition-colors",
              onClick: (y) => {
                y.stopPropagation(), s(g.id);
              },
              children: /* @__PURE__ */ h.jsx(So, { size: 12 })
            }
          ) })
        ]
      },
      g.id
    )),
    n.length === 0 && /* @__PURE__ */ h.jsx("div", { className: "text-center p-8 border border-dashed border-border rounded-lg", children: /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground", children: "" }) })
  ] })
] }), wk = [
  { value: "g", label: "", description: "" },
  { value: "i", label: "", description: "" },
  { value: "m", label: "", description: "^$ " },
  { value: "s", label: "", description: ". " }
], kk = ({ rule: n, onChange: r }) => {
  var S;
  const [i, l] = se.useState(""), [s, c] = se.useState(""), [f, g] = se.useState({ valid: !0 }), y = new _m();
  se.useEffect(() => {
    const x = y.validatePattern(n.pattern, n.flags);
    g(x);
  }, [n.pattern, n.flags]), se.useEffect(() => {
    if (i && f.valid) {
      const x = y.processWithRule(i, n);
      c(x);
    } else
      c("");
  }, [i, n, f.valid]);
  const b = (x) => {
    const _ = n.flags.split(""), E = _.indexOf(x);
    E >= 0 ? _.splice(E, 1) : _.push(x), r({ flags: _.join("") });
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-3", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            className: "w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",
            value: n.name,
            onChange: (x) => r({ name: x.target.value }),
            placeholder: ""
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            className: "w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",
            value: n.description || "",
            onChange: (x) => r({ description: x.target.value }),
            placeholder: ""
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "flex gap-2", children: ey.map((x) => /* @__PURE__ */ h.jsx(
          "button",
          {
            className: `flex-1 px-3 py-2 text-sm rounded-md border transition-colors ${n.scope === x.value ? "bg-primary-20 border-primary text-primary" : "bg-background border-border text-muted-foreground hover:bg-muted"}`,
            onClick: () => r({ scope: x.value }),
            title: x.description,
            children: x.label
          },
          x.value
        )) }),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground", children: (S = ey.find((x) => x.value === n.scope)) == null ? void 0 : S.description })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-3 p-4 bg-card border border-border rounded-lg", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
          f.valid ? /* @__PURE__ */ h.jsx(Qh, { size: 14, className: "text-green-500" }) : /* @__PURE__ */ h.jsx(Uc, { size: 14, className: "text-red-500" })
        ] }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            className: `w-full px-3 py-2 rounded-md border bg-background text-foreground font-mono text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 ${f.valid ? "border-input focus:ring-ring" : "border-red-500 focus:ring-red-500"}`,
            value: n.pattern,
            onChange: (x) => r({ pattern: x.target.value }),
            placeholder: "<think>[\\s\\S]*?</think>"
          }
        ),
        !f.valid && f.error && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-red-500", children: f.error })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            className: "w-full px-3 py-2 rounded-md border border-input bg-background text-foreground font-mono text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",
            value: n.replacement,
            onChange: (x) => r({ replacement: x.target.value }),
            placeholder: ""
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "flex flex-wrap gap-2", children: wk.map((x) => /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: `px-2 py-1 text-xs rounded-md border transition-colors ${n.flags.includes(x.value) ? "bg-primary-20 border-primary text-primary" : "bg-background border-border text-muted-foreground hover:bg-muted"}`,
            onClick: () => b(x.value),
            title: x.description,
            children: [
              x.label,
              " (",
              x.value,
              ")"
            ]
          },
          x.value
        )) })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-3 p-4 bg-muted-20 border border-border rounded-lg", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-sm font-medium text-foreground", children: [
        /* @__PURE__ */ h.jsx(Jh, { size: 14 }),
        ""
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "textarea",
          {
            className: "w-full min-h-[80px] px-3 py-2 rounded-md border border-input bg-background text-foreground text-sm resize-y focus:outline-none focus:ring-2 focus:ring-ring",
            value: i,
            onChange: (x) => l(x.target.value),
            placeholder: `
<think></think>
`
          }
        )
      ] }),
      i && f.valid && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "min-h-[60px] px-3 py-2 rounded-md border border-border bg-background text-sm whitespace-pre-wrap", children: s || /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground italic", children: "" }) })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-start gap-2 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg text-sm text-blue-400", children: [
      /* @__PURE__ */ h.jsx(vv, { size: 16, className: "shrink-0 mt-0.5" }),
      /* @__PURE__ */ h.jsxs("div", { children: [
        /* @__PURE__ */ h.jsx("strong", { children: "" }),
        " LLM ",
        /* @__PURE__ */ h.jsx("strong", { children: "" }),
        " LLM  ",
        /* @__PURE__ */ h.jsx("code", { className: "bg-blue-500/20 px-1 rounded", children: "<think>" }),
        ""
      ] })
    ] })
  ] });
}, Ck = ({
  config: n,
  onChange: r,
  worldbookStructure: i = {},
  disabledEntries: l = {},
  onToggleWorldbook: s,
  onToggleEntry: c,
  onRefresh: f
}) => {
  const [g, y] = se.useState(/* @__PURE__ */ new Set()), [b, S] = se.useState(""), x = (D) => {
    r({
      ...n,
      [D]: !n[D]
    });
  }, _ = (D) => {
    const ne = new Set(g);
    ne.has(D) ? ne.delete(D) : ne.add(D), y(ne);
  }, E = (D) => {
    var ne;
    return ((ne = n.disabledWorldbooks) == null ? void 0 : ne.includes(D)) || !1;
  }, N = (D, ne) => {
    var ie;
    return ((ie = l[D]) == null ? void 0 : ie.includes(ne)) || !1;
  }, G = Object.keys(i).sort().filter(
    (D) => D.toLowerCase().includes(b.toLowerCase()) || i[D].some(
      (ne) => {
        var ie, _e;
        return ((ie = ne.names) == null ? void 0 : ie.join(" ").toLowerCase().includes(b.toLowerCase())) || ((_e = ne.comment) == null ? void 0 : _e.toLowerCase().includes(b.toLowerCase()));
      }
    )
  );
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-6", children: [
    /* @__PURE__ */ h.jsxs(fr, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsx(
        Sa,
        {
          label: "",
          description: "",
          checked: n.enabled,
          onChange: () => x("enabled")
        }
      ),
      /* @__PURE__ */ h.jsx(
        Sa,
        {
          label: "",
          description: " / ",
          checked: n.includeGlobal,
          onChange: () => x("includeGlobal"),
          disabled: !n.enabled
        }
      )
    ] }),
    n.enabled && /* @__PURE__ */ h.jsxs(fr, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mb-4 gap-4", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "relative flex-1", children: [
          /* @__PURE__ */ h.jsx(po, { className: "absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground w-4 h-4" }),
          /* @__PURE__ */ h.jsx(
            "input",
            {
              type: "text",
              placeholder: "...",
              className: "w-full h-9 pl-9 pr-3 rounded-md border border-input bg-transparent text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",
              value: b,
              onChange: (D) => S(D.target.value)
            }
          )
        ] }),
        /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: f,
            className: "inline-flex items-center justify-center rounded-md w-9 h-9 hover:bg-accent hover:text-accent-foreground transition-colors",
            title: "",
            children: /* @__PURE__ */ h.jsx(ei, { size: 16 })
          }
        )
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-2", children: G.length === 0 ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center py-8 text-muted-foreground gap-2 border border-dashed rounded-lg", children: [
        /* @__PURE__ */ h.jsx(Uc, { size: 24, className: "opacity-50" }),
        /* @__PURE__ */ h.jsx("span", { className: "text-sm", children: "" })
      ] }) : G.map((D) => {
        const ne = E(D), ie = i[D] || [], _e = g.has(D), we = ie.filter((I) => !N(D, I.uid)).length;
        return /* @__PURE__ */ h.jsxs("div", { className: `transition-all border-b border-border last:border-0 ${ne ? "bg-muted/10 opacity-60 grayscale" : ""}`, children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between p-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 flex-1 overflow-hidden", children: [
              /* @__PURE__ */ h.jsx(
                "button",
                {
                  onClick: () => _(D),
                  className: "p-1 hover:bg-accent rounded-sm transition-colors",
                  children: _e ? /* @__PURE__ */ h.jsx(bo, { size: 16 }) : /* @__PURE__ */ h.jsx(Xh, { size: 16 })
                }
              ),
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 min-w-0", children: [
                /* @__PURE__ */ h.jsx(Hx, { size: 16, className: ne ? "text-muted-foreground" : "text-primary" }),
                /* @__PURE__ */ h.jsx("span", { className: `font-medium truncate ${ne ? "text-muted-foreground line-through" : ""}`, children: D }),
                /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground px-2 py-0.5 bg-muted rounded-full whitespace-nowrap", children: [
                  we,
                  " / ",
                  ie.length,
                  " "
                ] })
              ] })
            ] }),
            /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-4", children: /* @__PURE__ */ h.jsx(
              Sa,
              {
                label: "",
                checked: !ne,
                onChange: (I) => s == null ? void 0 : s(D, !I),
                compact: !0
              }
            ) })
          ] }),
          _e && !ne && /* @__PURE__ */ h.jsx("div", { className: "pl-4 pr-1 py-1 flex flex-col gap-0 animate-in slide-in-from-top-1 duration-200", children: ie.length === 0 ? /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground text-center py-4", children: "" }) : ie.map((I) => {
            const J = N(D, I.uid);
            return /* @__PURE__ */ h.jsxs("div", { className: `flex items-start justify-between py-2 -mx-2 px-2 rounded hover:bg-accent/40 transition-colors group ${J ? "bg-muted/10 opacity-60 grayscale" : ""}`, children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1 min-w-0 flex-1 pr-4", children: [
                /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 flex-wrap min-w-0", children: [
                  /* @__PURE__ */ h.jsx(
                    "div",
                    {
                      className: `w-1.5 h-1.5 rounded-full flex-shrink-0 ${I.constant ? "bg-primary" : "bg-emerald-500"}`,
                      title: I.constant ? " (Constant)" : " (Selective)"
                    }
                  ),
                  /* @__PURE__ */ h.jsx("span", { className: `text-sm font-medium truncate max-w-full ${J ? "text-muted-foreground line-through" : "text-foreground"}`, children: I.name || ` #${I.uid}` }),
                  (I.keys || []).length > 0 && /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1 ml-auto md:ml-2 overflow-hidden max-w-full", children: [
                    I.keys.slice(0, 3).map((De, He) => /* @__PURE__ */ h.jsx("span", { className: "text-[10px] px-1 py-0.5 rounded border border-border bg-muted/20 text-muted-foreground whitespace-nowrap overflow-hidden text-ellipsis max-w-[80px]", children: De }, He)),
                    I.keys.length > 3 && /* @__PURE__ */ h.jsxs("span", { className: "text-[10px] text-muted-foreground", children: [
                      "+",
                      I.keys.length - 3
                    ] })
                  ] })
                ] }),
                (I.comment || I.content) && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/80 pl-3.5 break-words line-clamp-2", children: I.comment || I.content })
              ] }),
              /* @__PURE__ */ h.jsx("div", { className: "flex-shrink-0", children: /* @__PURE__ */ h.jsx(
                Sa,
                {
                  label: "",
                  checked: !J,
                  onChange: (De) => c == null ? void 0 : c(D, I.uid, !De),
                  compact: !0
                }
              ) })
            ] }, I.uid);
          }) })
        ] }, D);
      }) })
    ] })
  ] });
}, co = "__ENGRAM_STATE__", bc = {
  lastSummarizedFloor: 0,
  totalSummaries: 0,
  totalTokens: 0,
  updatedAt: Date.now()
};
class $h {
  /**
   * 
   */
  static async loadState(r) {
    try {
      const i = await kt.findEntryByKey(r, co);
      if (!i)
        return { ...bc };
      try {
        const l = JSON.parse(i.content);
        return { ...bc, ...l };
      } catch (l) {
        return Ve.warn("WorldBookStateService", "", l), { ...bc };
      }
    } catch (i) {
      return Ve.error("WorldBookStateService", "", i), { ...bc };
    }
  }
  /**
   * 
   */
  static async saveState(r, i) {
    try {
      const s = {
        ...await this.loadState(r),
        ...i,
        updatedAt: Date.now()
      }, c = JSON.stringify(s, null, 2), g = (await kt.getEntries(r)).filter(
        (y) => y.name === "Engram System State" || y.keys.includes(co)
      );
      if (g.length > 0) {
        g.sort((x, _) => {
          const E = x.keys.includes(co) ? 1 : 0;
          return (_.keys.includes(co) ? 1 : 0) - E;
        });
        const [y, ...b] = g;
        if (b.length > 0) {
          Ve.warn("WorldBookStateService", ` ${b.length} ...`);
          for (const x of b)
            await kt.deleteEntry(r, x.uid);
        }
        Ve.debug("WorldBookStateService", "", { uid: y.uid, state: s });
        const S = {
          content: c,
          name: "Engram System State",
          enabled: !1,
          constant: !1,
          keys: [co],
          recursion: {
            prevent_incoming: !0,
            prevent_outgoing: !0
          },
          position: "before_character_definition",
          order: 0
        };
        return await kt.updateEntry(r, y.uid, S);
      } else {
        Ve.debug("WorldBookStateService", "", { state: s });
        const y = {
          name: "Engram System State",
          content: c,
          keys: [co],
          enabled: !1,
          constant: !1,
          position: "before_character_definition",
          role: "system",
          order: 0,
          recursion: {
            prevent_incoming: !0,
            prevent_outgoing: !0
          }
        };
        return await kt.createEntry(r, y);
      }
    } catch (l) {
      return Ve.error("WorldBookStateService", "", l), !1;
    }
  }
}
const Ek = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  WorldBookStateService: $h
}, Symbol.toStringTag, { value: "Module" }));
function _k(n, r) {
  const i = [];
  for (const s of n.filter((c) => c.isBuiltIn)) {
    const c = r.find(
      (f) => f.isBuiltIn && f.category === s.category
    );
    c ? i.push(c) : i.push(s);
  }
  const l = r.filter((s) => !s.isBuiltIn);
  return i.push(...l), i;
}
function jk() {
  const [n, r] = se.useState(ny), [i, l] = se.useState(null), [s, c] = se.useState(null), [f, g] = se.useState(!1), [y, b] = se.useState([...Ps]), [S, x] = se.useState(null), [_, E] = se.useState({}), [N, U] = se.useState({}), [G, D] = se.useState(null), ne = se.useCallback(async () => {
    var $e;
    const ue = await kt.getWorldbookStructure();
    E(ue);
    const me = Zn(), Se = ($e = me == null ? void 0 : me.getCharWorldbookNames) == null ? void 0 : $e.call(me, "current");
    if (Se != null && Se.primary) {
      D(Se.primary);
      const ut = await $h.loadState(Se.primary);
      ut.disabledEntries && U(ut.disabledEntries);
    }
  }, []);
  se.useEffect(() => {
    ne();
  }, [ne]), se.useEffect(() => {
    var Se;
    const ue = nt.get("apiSettings");
    if (ue) {
      const $e = ny(), ut = {
        ...$e,
        ...ue,
        // 
        llmPresets: ((Se = ue.llmPresets) == null ? void 0 : Se.length) > 0 ? ue.llmPresets : $e.llmPresets,
        // 
        promptTemplates: _k(
          $e.promptTemplates,
          ue.promptTemplates || []
        )
      };
      r(ut);
    }
    const me = nt.getRegexRules();
    me && me.length > 0 && b(me);
  }, []);
  const ie = se.useCallback((ue) => {
    r((me) => ({ ...me, selectedPresetId: ue.id })), l(ue);
  }, []), _e = se.useCallback(() => {
    const ue = K2(` ${n.llmPresets.length + 1}`);
    ue.isDefault = !1, r((me) => ({
      ...me,
      llmPresets: [...me.llmPresets, ue],
      selectedPresetId: ue.id
    })), l(ue), g(!0);
  }, [n.llmPresets.length]), we = se.useCallback((ue) => {
    r((me) => ({
      ...me,
      llmPresets: me.llmPresets.map((Se) => Se.id === ue.id ? ue : Se)
    })), l(ue), g(!0);
  }, []), I = se.useCallback((ue) => {
    const me = {
      ...ue,
      id: `preset_${Date.now()}`,
      name: `${ue.name} ()`,
      isDefault: !1,
      createdAt: Date.now(),
      updatedAt: Date.now()
    };
    r((Se) => ({ ...Se, llmPresets: [...Se.llmPresets, me] })), g(!0);
  }, []), J = se.useCallback((ue) => {
    ue.isDefault || (r((me) => ({
      ...me,
      llmPresets: me.llmPresets.filter((Se) => Se.id !== ue.id),
      selectedPresetId: me.selectedPresetId === ue.id ? null : me.selectedPresetId
    })), l((me) => (me == null ? void 0 : me.id) === ue.id ? null : me), g(!0));
  }, []), De = se.useCallback((ue) => {
    c(ue);
  }, []), He = se.useCallback((ue) => {
    r((me) => ({
      ...me,
      promptTemplates: [...me.promptTemplates, ue]
    })), g(!0);
  }, []), W = se.useCallback((ue) => {
    r((me) => ({
      ...me,
      promptTemplates: me.promptTemplates.map((Se) => Se.id === ue.id ? ue : Se)
    })), c(ue), g(!0);
  }, []), Q = se.useCallback((ue) => {
    ue.isBuiltIn || (r((me) => ({
      ...me,
      promptTemplates: me.promptTemplates.filter((Se) => Se.id !== ue.id)
    })), c((me) => (me == null ? void 0 : me.id) === ue.id ? null : me), g(!0));
  }, []), ye = se.useCallback((ue) => {
    r((me) => ({ ...me, vectorConfig: ue })), g(!0);
  }, []), Be = se.useCallback((ue) => {
    r((me) => ({ ...me, rerankConfig: ue })), g(!0);
  }, []), Me = se.useCallback((ue) => {
    r((me) => ({ ...me, worldbookConfig: ue })), g(!0);
  }, []), ke = se.useCallback((ue, me) => {
    r((Se) => {
      const $e = Se.worldbookConfig.disabledWorldbooks || [];
      let ut;
      return me ? ut = [.../* @__PURE__ */ new Set([...$e, ue])] : ut = $e.filter((Ne) => Ne !== ue), {
        ...Se,
        worldbookConfig: {
          ...Se.worldbookConfig,
          disabledWorldbooks: ut
        }
      };
    }), g(!0);
  }, []), ee = se.useCallback((ue, me, Se) => {
    U(($e) => {
      const ut = $e[ue] || [];
      let Ne;
      return Se ? Ne = [.../* @__PURE__ */ new Set([...ut, me])] : Ne = ut.filter((xn) => xn !== me), {
        ...$e,
        [ue]: Ne
      };
    }), g(!0);
  }, []), ve = se.useCallback((ue) => {
    const me = y.find((Se) => Se.id === ue);
    x(me || null);
  }, [y]), Ie = se.useCallback(() => {
    const ue = {
      id: `rule_${Date.now()}`,
      name: "",
      pattern: "",
      replacement: "",
      enabled: !0,
      flags: "gi",
      scope: "both",
      description: ""
    };
    b((me) => [...me, ue]), x(ue), g(!0);
  }, []), Pe = se.useCallback((ue) => {
    if (!S) return;
    const me = { ...S, ...ue };
    x(me), b((Se) => Se.map(($e) => $e.id === me.id ? me : $e)), g(!0);
  }, [S]), M = se.useCallback((ue) => {
    b((me) => me.map(
      (Se) => Se.id === ue ? { ...Se, enabled: !Se.enabled } : Se
    )), g(!0);
  }, []), B = se.useCallback((ue) => {
    b((me) => me.filter((Se) => Se.id !== ue)), x((me) => (me == null ? void 0 : me.id) === ue ? null : me), g(!0);
  }, []), he = se.useCallback(() => {
    b([...Ps]), x(null), g(!0);
  }, []), z = se.useCallback(async () => {
    nt.set("apiSettings", n), nt.setRegexRules(y), G && await $h.saveState(G, {
      disabledEntries: N
    }), console.log("[Engram] :", n, y, N), g(!1);
  }, [n, y, G, N]);
  return {
    settings: n,
    editingPreset: i,
    editingTemplate: s,
    hasChanges: f,
    regexRules: y,
    editingRule: S,
    selectPreset: ie,
    addPreset: _e,
    updatePreset: we,
    copyPreset: I,
    deletePreset: J,
    selectTemplate: De,
    addTemplate: He,
    updateTemplate: W,
    deleteTemplate: Q,
    updateVectorConfig: ye,
    updateRerankConfig: Be,
    updateWorldbookConfig: Me,
    toggleWorldbook: ke,
    toggleEntry: ee,
    refreshWorldbooks: ne,
    worldbookStructure: _,
    disabledEntries: N,
    currentCharWorldbook: G,
    selectRule: ve,
    addRule: Ie,
    updateRule: Pe,
    toggleRule: M,
    deleteRule: B,
    resetRules: he,
    save: z
  };
}
const Tk = [
  { id: "llm", label: "LLM ", icon: qc },
  { id: "vector", label: "", icon: Zh },
  { id: "rerank", label: "Rerank", icon: yy }
], Nk = ({ initialTab: n }) => {
  const [r, i] = se.useState(n || "model"), [l, s] = se.useState("llm"), {
    settings: c,
    editingPreset: f,
    editingTemplate: g,
    hasChanges: y,
    regexRules: b,
    editingRule: S,
    selectPreset: x,
    addPreset: _,
    updatePreset: E,
    copyPreset: N,
    deletePreset: U,
    selectTemplate: G,
    addTemplate: D,
    updateTemplate: ne,
    deleteTemplate: ie,
    updateVectorConfig: _e,
    updateRerankConfig: we,
    updateWorldbookConfig: I,
    selectRule: J,
    addRule: De,
    updateRule: He,
    toggleRule: W,
    deleteRule: Q,
    resetRules: ye,
    save: Be,
    // Worldbook filtering
    worldbookStructure: Me,
    disabledEntries: ke,
    toggleWorldbook: ee,
    toggleEntry: ve,
    refreshWorldbooks: Ie
  } = jk();
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full animate-in fade-in", children: [
    /* @__PURE__ */ h.jsx(
      Xc,
      {
        title: "API ",
        subtitle: ""
      }
    ),
    /* @__PURE__ */ h.jsx(
      Bc,
      {
        tabs: [
          { id: "model", label: "" },
          { id: "prompt", label: "" },
          { id: "regex", label: "" },
          { id: "worldbook", label: "" }
        ],
        activeTab: r,
        onChange: (Pe) => i(Pe),
        actions: y && /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-primary hover:text-primary-foreground hover:bg-primary border border-primary/50 rounded transition-colors",
            onClick: Be,
            children: [
              /* @__PURE__ */ h.jsx(Gv, { size: 12 }),
              ""
            ]
          }
        )
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "flex-1 overflow-y-auto no-scrollbar", children: [
      r === "model" && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-6", children: [
        /* @__PURE__ */ h.jsx(
          Bc,
          {
            tabs: Tk.map((Pe) => ({ ...Pe, icon: /* @__PURE__ */ h.jsx(Pe.icon, { size: 14 }) })),
            activeTab: l,
            onChange: (Pe) => s(Pe),
            sticky: !0,
            top: 0,
            className: "mb-6"
          }
        ),
        l === "llm" && /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-[300px_1fr] gap-8", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4 border-r border-border/50 pr-4", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-bold text-muted-foreground uppercase tracking-wider", children: "" }),
              /* @__PURE__ */ h.jsx("button", { className: "text-muted-foreground hover:text-foreground transition-colors", onClick: _, children: /* @__PURE__ */ h.jsx(em, { size: 16 }) })
            ] }),
            /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-1", children: c.llmPresets.map((Pe) => /* @__PURE__ */ h.jsx(
              ok,
              {
                preset: Pe,
                isSelected: c.selectedPresetId === Pe.id,
                onSelect: () => x(Pe),
                onEdit: () => x(Pe),
                onCopy: () => N(Pe),
                onDelete: () => U(Pe)
              },
              Pe.id
            )) })
          ] }),
          /* @__PURE__ */ h.jsx("div", { className: "flex flex-col", children: f ? /* @__PURE__ */ h.jsx("div", { className: "animate-in fade-in slide-in-from-right-2 duration-300", children: /* @__PURE__ */ h.jsx(fk, { preset: f, onChange: E }) }) : /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center p-12 text-muted-foreground gap-4", children: [
            /* @__PURE__ */ h.jsx(qc, { size: 32, className: "opacity-20" }),
            /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "" })
          ] }) })
        ] }),
        l === "vector" && /* @__PURE__ */ h.jsx(hk, { config: c.vectorConfig, onChange: _e }),
        l === "rerank" && /* @__PURE__ */ h.jsx(mk, { config: c.rerankConfig, onChange: we })
      ] }),
      r === "prompt" && /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-[320px_1fr] gap-8 h-full", children: [
        /* @__PURE__ */ h.jsx("div", { className: "border-r border-border/50 pr-4", children: /* @__PURE__ */ h.jsx(
          bk,
          {
            templates: c.promptTemplates,
            selectedId: (g == null ? void 0 : g.id) || null,
            onSelect: G,
            onAdd: D,
            onUpdate: ne,
            onDelete: ie
          }
        ) }),
        /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-4 overflow-y-auto no-scrollbar", children: g ? /* @__PURE__ */ h.jsx(
          vk,
          {
            template: g,
            llmPresets: c.llmPresets,
            defaultPresetId: c.selectedPresetId,
            onChange: ne
          }
        ) : /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center p-12 text-muted-foreground gap-4", children: [
          /* @__PURE__ */ h.jsx(Wh, { size: 32, className: "opacity-20" }),
          /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "" })
        ] }) })
      ] }),
      r === "regex" && /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-[320px_1fr] gap-8 h-full", children: [
        /* @__PURE__ */ h.jsx("div", { className: "border-r border-border/50 pr-4", children: /* @__PURE__ */ h.jsx(
          Sk,
          {
            rules: b,
            selectedId: (S == null ? void 0 : S.id) || null,
            onSelect: J,
            onToggle: W,
            onDelete: Q,
            onAdd: De,
            onReset: ye
          }
        ) }),
        /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-4 overflow-y-auto no-scrollbar", children: S ? /* @__PURE__ */ h.jsx(kk, { rule: S, onChange: He }) : /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center p-12 text-muted-foreground gap-4", children: [
          /* @__PURE__ */ h.jsx(vy, { size: 32, className: "opacity-20" }),
          /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "" })
        ] }) })
      ] }),
      r === "worldbook" && /* @__PURE__ */ h.jsx("div", { className: "max-w-2xl py-4", children: /* @__PURE__ */ h.jsx(
        Ck,
        {
          config: c.worldbookConfig,
          onChange: I,
          worldbookStructure: Me,
          disabledEntries: ke,
          onToggleWorldbook: ee,
          onToggleEntry: ve,
          onRefresh: Ie
        }
      ) })
    ] })
  ] });
}, Ak = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  APIPresets: Nk
}, Symbol.toStringTag, { value: "Module" })), zk = () => {
  const [n, r] = se.useState("claudeDark");
  se.useEffect(() => {
    r(wa.getTheme());
  }, []);
  const i = (s) => {
    wa.setTheme(s), nt.set("theme", s), r(s);
  }, l = Object.entries(vc).map(([s, c]) => {
    let f = c.colors.background, g = c.colors.primary;
    return {
      id: s,
      name: c.name,
      background: f,
      sidebar: c.colors.sidebar,
      // Add sidebar color
      primary: g
    };
  });
  return /* @__PURE__ */ h.jsxs("div", { className: "space-y-4", children: [
    /* @__PURE__ */ h.jsx("h3", { className: "text-lg font-medium", children: "" }),
    /* @__PURE__ */ h.jsx("div", { className: "grid grid-cols-2 sm:grid-cols-4 gap-4", children: l.map((s) => /* @__PURE__ */ h.jsxs(
      "button",
      {
        onClick: () => i(s.id),
        className: `
                            relative group flex flex-col items-center gap-2 p-3 rounded-xl border-2 transition-all
                            ${n === s.id ? "border-primary bg-accent/10" : "border-transparent hover:bg-accent/5"}
                        `,
        children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-center -space-x-3 mb-2", children: [
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "w-8 h-8 rounded-full border border-border shadow-sm z-10",
                style: { background: s.background },
                title: "Background"
              }
            ),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "w-8 h-8 rounded-full border border-border shadow-sm z-20",
                style: { background: s.sidebar },
                title: "Sidebar"
              }
            ),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "w-8 h-8 rounded-full border border-border shadow-sm z-30 ring-2 ring-background",
                style: { background: s.primary },
                title: "Primary"
              }
            )
          ] }),
          /* @__PURE__ */ h.jsx("span", { className: `text-sm font-medium ${n === s.id ? "text-primary" : "text-muted-foreground"}`, children: s.name }),
          n === s.id && /* @__PURE__ */ h.jsx("div", { className: "absolute top-2 right-2 w-2 h-2 rounded-full bg-primary" })
        ]
      },
      s.id
    )) })
  ] });
}, Mk = () => {
  var c, f, g, y, b;
  const [n, r] = se.useState(((c = nt.getSettings().summarizerConfig) == null ? void 0 : c.previewEnabled) ?? !0), [, i] = se.useState({});
  se.useEffect(() => {
    nt.loadSettings();
  }, []);
  const [l, s] = se.useState(nt.getSettings().linkedDeletion);
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full animate-in fade-in", children: [
    /* @__PURE__ */ h.jsx(Xc, { title: "", subtitle: "" }),
    /* @__PURE__ */ h.jsxs("div", { className: "p-6 space-y-8", children: [
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
        /* @__PURE__ */ h.jsx(zk, {})
      ] }),
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: " (Glass Effect)" }),
        /* @__PURE__ */ h.jsxs("div", { className: "bg-muted/30 border border-border rounded-lg p-4 space-y-6", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-3", children: /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground", children: "" }),
              /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground break-words max-w-[200px] sm:max-w-none", children: "" })
            ] }) }),
            /* @__PURE__ */ h.jsx(
              mo,
              {
                checked: ((f = nt.getSettings().glassSettings) == null ? void 0 : f.enabled) ?? !0,
                onChange: (S) => {
                  const _ = {
                    ...nt.getSettings().glassSettings,
                    enabled: S
                  };
                  nt.set("glassSettings", _), Promise.resolve().then(() => wc).then(({ ThemeManager: E }) => {
                    E.setTheme(E.getTheme());
                  }), i({});
                }
              }
            )
          ] }),
          (((g = nt.getSettings().glassSettings) == null ? void 0 : g.enabled) ?? !0) && /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            /* @__PURE__ */ h.jsx(
              Oi,
              {
                label: " (Opacity)",
                description: "",
                value: ((y = nt.getSettings().glassSettings) == null ? void 0 : y.opacity) ?? 0.8,
                onChange: (S) => {
                  const _ = {
                    ...nt.getSettings().glassSettings,
                    opacity: S
                  };
                  nt.set("glassSettings", _), Promise.resolve().then(() => wc).then(({ ThemeManager: E }) => {
                    E.setTheme(E.getTheme());
                  }), i({});
                },
                min: 0,
                max: 1,
                step: 0.05,
                showSlider: !0
              }
            ),
            /* @__PURE__ */ h.jsx(
              Oi,
              {
                label: " (Blur)",
                description: " (px)",
                value: ((b = nt.getSettings().glassSettings) == null ? void 0 : b.blur) ?? 10,
                onChange: (S) => {
                  const _ = {
                    ...nt.getSettings().glassSettings,
                    blur: S
                  };
                  nt.set("glassSettings", _), Promise.resolve().then(() => wc).then(({ ThemeManager: E }) => {
                    E.setTheme(E.getTheme());
                  }), i({});
                },
                min: 0,
                max: 50,
                step: 1,
                showSlider: !0
              }
            )
          ] })
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "bg-muted/30 border border-border rounded-lg p-4", children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ h.jsx("div", { className: "p-2 rounded-lg bg-primary/10 text-primary", children: /* @__PURE__ */ h.jsx(hv, { size: 20 }) }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground", children: "" }),
              /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: "" })
            ] })
          ] }),
          /* @__PURE__ */ h.jsx(
            mo,
            {
              checked: n,
              onChange: (S) => {
                r(S), Y2.updateConfig({ previewEnabled: S });
              }
            }
          )
        ] }) })
      ] }),
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
        /* @__PURE__ */ h.jsxs("div", { className: "bg-muted/30 border border-border rounded-lg p-4 space-y-4", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
              /* @__PURE__ */ h.jsx("div", { className: "p-2 rounded-lg bg-red-500/10 text-red-500", children: /* @__PURE__ */ h.jsx(So, { size: 20 }) }),
              /* @__PURE__ */ h.jsxs("div", { children: [
                /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground", children: "" }),
                /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: " Engram " })
              ] })
            ] }),
            /* @__PURE__ */ h.jsx(
              mo,
              {
                checked: l.enabled,
                onChange: (S) => {
                  const x = { ...l, enabled: S };
                  s(x), nt.set("linkedDeletion", x);
                }
              }
            )
          ] }),
          l.enabled && /* @__PURE__ */ h.jsxs("div", { className: "pl-14 space-y-3 border-t border-border pt-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-sm text-muted-foreground", children: "" }),
              /* @__PURE__ */ h.jsx(
                mo,
                {
                  checked: l.showConfirmation,
                  onChange: (S) => {
                    const x = { ...l, showConfirmation: S };
                    s(x), nt.set("linkedDeletion", x);
                  },
                  className: "scale-90"
                }
              )
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ h.jsxs("div", { children: [
                /* @__PURE__ */ h.jsx("span", { className: "text-sm text-muted-foreground", children: "" }),
                /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/60", children: " Engram " })
              ] }),
              /* @__PURE__ */ h.jsx(
                mo,
                {
                  checked: l.deleteChatWorldbook ?? !1,
                  onChange: (S) => {
                    const x = { ...l, deleteChatWorldbook: S };
                    s(x), nt.set("linkedDeletion", x);
                  },
                  className: "scale-90"
                }
              )
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "mt-8 pt-8 border-t border-border", children: /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center text-muted-foreground gap-2 py-8 opacity-50", children: [
        /* @__PURE__ */ h.jsx(nm, { size: 32 }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "..." })
      ] }) })
    ] })
  ] });
}, Ok = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Settings: Mk
}, Symbol.toStringTag, { value: "Module" })), Dk = () => /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full animate-in fade-in", children: [
  /* @__PURE__ */ h.jsx(Xc, { title: "", subtitle: "" }),
  /* @__PURE__ */ h.jsxs("div", { className: "flex-1 flex flex-col items-center justify-center text-muted-foreground gap-4", children: [
    /* @__PURE__ */ h.jsx(Yh, { size: 48, className: "opacity-20" }),
    /* @__PURE__ */ h.jsx("p", { children: "..." })
  ] })
] }), Rk = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  MemoryStream: Dk
}, Symbol.toStringTag, { value: "Module" })), Lk = ({ links: n, onNavigate: r, className: i = "" }) => n.length === 0 ? null : /* @__PURE__ */ h.jsx("div", { className: `flex items-center gap-4 ${i}`, children: n.map((l) => {
  const s = l.icon || fv;
  return /* @__PURE__ */ h.jsxs(
    "button",
    {
      className: "inline-flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",
      onClick: () => r(l.linkTo),
      title: l.label,
      children: [
        /* @__PURE__ */ h.jsx(s, { size: 12 }),
        /* @__PURE__ */ h.jsx("span", { children: l.label })
      ]
    },
    l.id
  );
}) }), Bk = {
  none: "",
  sm: "my-2",
  md: "my-4",
  lg: "my-6"
}, xc = ({
  orientation: n = "horizontal",
  length: r = 100,
  className: i = "",
  responsive: l = !1,
  spacing: s = "none"
}) => {
  const c = Bk[s];
  return l ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
    /* @__PURE__ */ h.jsx(
      "div",
      {
        className: `hidden lg:block absolute left-0 top-1/2 -translate-y-1/2 border-l border-border/30 ${i}`,
        style: { height: `${r}%` }
      }
    ),
    /* @__PURE__ */ h.jsx(
      "div",
      {
        className: `lg:hidden border-t border-border/30 mx-auto ${c} ${i}`,
        style: { width: `${r}%` }
      }
    )
  ] }) : n === "vertical" ? /* @__PURE__ */ h.jsx(
    "div",
    {
      className: `border-l border-border/30 mx-auto ${i}`,
      style: { height: `${r}%` }
    }
  ) : /* @__PURE__ */ h.jsx(
    "div",
    {
      className: `border-t border-border/30 ${c} ${i}`,
      style: { width: `${r}%` }
    }
  );
}, Uk = [
  { id: "token", label: "Token ", icon: $x },
  { id: "count", label: "", icon: bv }
], Ik = () => {
  const [n, r] = se.useState(null), [i, l] = se.useState(!1), [s, c] = se.useState(!1), [f, g] = se.useState({
    autoEnabled: !0,
    floorInterval: 10,
    bufferSize: 3,
    autoHide: !1
  }), [y, b] = se.useState({ ...Lc }), [S, x] = se.useState(null), [_, E] = se.useState(0), [N, U] = se.useState(0);
  se.useEffect(() => {
    G();
  }, []);
  const G = async () => {
    var Q;
    try {
      const { summarizerService: ye } = await Promise.resolve().then(() => cr);
      let Be = ye.getStatus();
      Be.lastSummarizedFloor === 0 && (await ye.initializeForCurrentChat(), Be = ye.getStatus()), r(Be);
      const Me = ye.getConfig();
      g({
        autoEnabled: Me.enabled,
        floorInterval: Me.floorInterval,
        bufferSize: Me.bufferSize || 3,
        autoHide: Me.autoHide || !1
      });
      const ke = (Q = nt.getSummarizerSettings()) == null ? void 0 : Q.trimConfig;
      ke && b({ ...Lc, ...ke });
      const { trimmerService: ee } = await Promise.resolve().then(() => cr), ve = await ee.getStatus();
      x(ve);
      const { useMemoryStore: Ie } = await Promise.resolve().then(() => ww), Pe = Ie.getState(), { totalTokens: M, eventCount: B } = await Pe.countEventTokens();
      E(M), U(B);
    } catch (ye) {
      console.error(" Summarizer :", ye);
    }
  }, D = async () => {
    try {
      const { summarizerService: Q } = await Promise.resolve().then(() => cr);
      Q.start(), await G();
    } catch (Q) {
      console.error(":", Q);
    }
  }, ne = async () => {
    try {
      const { summarizerService: Q } = await Promise.resolve().then(() => cr);
      Q.stop(), await G();
    } catch (Q) {
      console.error(":", Q);
    }
  }, ie = async () => {
    l(!0);
    try {
      const { summarizerService: Q } = await Promise.resolve().then(() => cr);
      await Q.triggerSummary(!0), await G();
    } catch (Q) {
      console.error(":", Q);
    } finally {
      l(!1);
    }
  }, _e = async () => {
    if (confirm("")) {
      l(!0);
      try {
        const { summarizerService: Q } = await Promise.resolve().then(() => cr);
        await Q.setLastSummarizedFloor(0), await G();
      } catch (Q) {
        console.error(":", Q);
      } finally {
        l(!1);
      }
    }
  }, we = (Q, ye) => {
    const Be = { ...y, [Q]: ye };
    b(Be), I(Be);
  }, I = (Q) => {
    nt.setSummarizerSettings({ trimConfig: Q });
  }, J = async () => {
    const Q = { ...y, enabled: !y.enabled };
    b(Q), I(Q);
    const { trimmerService: ye } = await Promise.resolve().then(() => cr);
    ye.updateConfig({ enabled: Q.enabled });
  }, De = async () => {
    c(!0);
    try {
      const { trimmerService: Q } = await Promise.resolve().then(() => cr);
      await Q.triggerTrim(!0), await G();
    } catch (Q) {
      console.error(":", Q);
    } finally {
      c(!1);
    }
  }, W = (() => {
    switch (y.trigger) {
      case "token":
        return { value: y.tokenLimit, min: 1024, max: 1e5, step: 1024, label: "Token " };
      case "count":
        return { value: y.countLimit, min: 2, max: 20, step: 1, label: "" };
    }
  })();
  return /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12", children: [
    /* @__PURE__ */ h.jsxs("section", { className: "space-y-8", children: [
      /* @__PURE__ */ h.jsxs("div", { children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mb-6", children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider", children: "" }),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "p-1 rounded text-muted-foreground hover:text-foreground transition-colors",
              onClick: G,
              title: "",
              children: /* @__PURE__ */ h.jsx(ei, { size: 14 })
            }
          )
        ] }),
        n ? /* @__PURE__ */ h.jsxs("div", { className: "space-y-6", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-1", children: "" }),
              /* @__PURE__ */ h.jsxs("div", { className: `flex items-center gap-2 text-lg font-medium ${n.running ? "text-green-500" : "text-muted-foreground"}`, children: [
                n.running ? /* @__PURE__ */ h.jsx(ev, { size: 18 }) : /* @__PURE__ */ h.jsx(Uc, { size: 18 }),
                n.running ? "" : ""
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-3xl font-light text-amber-500 font-mono", children: n.pendingFloors })
            ] })
          ] }),
          /* @__PURE__ */ h.jsx(xc, { length: 100, spacing: "md" }),
          /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/70 uppercase tracking-wider block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-xl font-mono text-foreground/80", children: n.currentFloor })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/70 uppercase tracking-wider block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-xl font-mono text-foreground/80", children: N })
            ] })
          ] }),
          /* @__PURE__ */ h.jsx(xc, { length: 30, spacing: "md" }),
          /* @__PURE__ */ h.jsxs("div", { children: [
            /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/60 uppercase tracking-wider block mb-1", children: " Token (Engram)" }),
            /* @__PURE__ */ h.jsx("div", { className: "text-sm font-mono text-primary/80", children: _.toLocaleString() })
          ] })
        ] }) : /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: "..." })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex gap-3", children: [
        n != null && n.running ? /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors",
            onClick: ne,
            children: [
              /* @__PURE__ */ h.jsx(Rv, { size: 14 }),
              ""
            ]
          }
        ) : /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",
            onClick: D,
            children: [
              /* @__PURE__ */ h.jsx(Jh, { size: 14 }),
              ""
            ]
          }
        ),
        /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors disabled:opacity-50",
            onClick: ie,
            disabled: i || (n == null ? void 0 : n.isSummarizing),
            children: [
              /* @__PURE__ */ h.jsx(ei, { size: 14, className: i ? "animate-spin" : "" }),
              i ? "..." : ""
            ]
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "pt-6 space-y-6", children: [
        /* @__PURE__ */ h.jsx(xc, { length: 100 }),
        /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ h.jsx("span", { className: "text-sm text-foreground", children: "" }),
            /* @__PURE__ */ h.jsx(
              Sa,
              {
                label: "",
                checked: f.autoEnabled,
                onChange: async (Q) => {
                  g((Be) => ({ ...Be, autoEnabled: Q }));
                  const { summarizerService: ye } = await Promise.resolve().then(() => cr);
                  ye.updateConfig({ enabled: Q });
                }
              }
            )
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-sm text-foreground", children: "" }),
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground", children: "" })
            ] }),
            /* @__PURE__ */ h.jsx(
              Sa,
              {
                label: "",
                checked: f.autoHide,
                onChange: (Q) => {
                  g((ye) => ({ ...ye, autoHide: Q })), Promise.resolve().then(() => cr).then(({ summarizerService: ye }) => {
                    ye.updateConfig({ autoHide: Q });
                  });
                }
              }
            )
          ] })
        ] }),
        f.autoEnabled && /* @__PURE__ */ h.jsx(h.Fragment, { children: /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground", children: [
              " ",
              /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: f.floorInterval }),
              " "
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
              /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
              /* @__PURE__ */ h.jsx(
                "div",
                {
                  className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                  style: { left: `${(f.floorInterval - 5) / 95 * 100}%`, transform: "translate(-50%, -50%)" }
                }
              ),
              /* @__PURE__ */ h.jsx(
                "input",
                {
                  type: "range",
                  min: 5,
                  max: 100,
                  step: 5,
                  value: f.floorInterval,
                  onChange: async (Q) => {
                    const ye = Number(Q.target.value);
                    g((Me) => ({ ...Me, floorInterval: ye }));
                    const { summarizerService: Be } = await Promise.resolve().then(() => cr);
                    Be.updateConfig({ floorInterval: ye });
                  },
                  className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                  style: { appearance: "none", WebkitAppearance: "none" }
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground", children: [
              " ",
              /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: f.bufferSize }),
              " "
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
              /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
              /* @__PURE__ */ h.jsx(
                "div",
                {
                  className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                  style: { left: `${f.bufferSize / 20 * 100}%`, transform: "translate(-50%, -50%)" }
                }
              ),
              /* @__PURE__ */ h.jsx(
                "input",
                {
                  type: "range",
                  min: 0,
                  max: 20,
                  step: 1,
                  value: f.bufferSize,
                  onChange: (Q) => {
                    const ye = Number(Q.target.value);
                    g((Be) => ({ ...Be, bufferSize: ye })), Promise.resolve().then(() => cr).then(({ summarizerService: Be }) => {
                      Be.updateConfig({ bufferSize: ye });
                    });
                  },
                  className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                  style: { appearance: "none", WebkitAppearance: "none" }
                }
              )
            ] })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ h.jsxs(
        "button",
        {
          className: "inline-flex items-center gap-2 px-3 py-1.5 text-xs text-red-500 hover:bg-red-50 border border-red-200 rounded transition-colors",
          onClick: _e,
          disabled: i,
          title: " ()",
          children: [
            /* @__PURE__ */ h.jsx(ei, { size: 12, className: i ? "animate-spin" : "" }),
            ""
          ]
        }
      ) })
    ] }),
    /* @__PURE__ */ h.jsxs("section", { className: "space-y-6 lg:pl-8 relative", children: [
      /* @__PURE__ */ h.jsx(xc, { responsive: !0, length: 30 }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-sm font-medium text-foreground", children: "" }),
          /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mt-0.5", children: "" })
        ] }),
        /* @__PURE__ */ h.jsx(
          Sa,
          {
            label: "",
            checked: y.enabled,
            onChange: J
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: `space-y-6 transition-opacity ${y.enabled ? "opacity-100" : "opacity-40 pointer-events-none"}`, children: [
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground", children: "" }),
          /* @__PURE__ */ h.jsx("div", { className: "flex gap-6", children: Uk.map((Q) => /* @__PURE__ */ h.jsxs(
            "label",
            {
              className: "flex items-center gap-2 cursor-pointer group",
              children: [
                /* @__PURE__ */ h.jsx(
                  "span",
                  {
                    className: `w-4 h-4 rounded-full border-2 flex items-center justify-center transition-colors
                                        ${y.trigger === Q.id ? "border-primary bg-primary" : "border-border group-hover:border-muted-foreground"}`,
                    children: y.trigger === Q.id && /* @__PURE__ */ h.jsx("span", { className: "w-1.5 h-1.5 rounded-full bg-primary-foreground" })
                  }
                ),
                /* @__PURE__ */ h.jsx("span", { className: `text-sm transition-colors ${y.trigger === Q.id ? "text-foreground" : "text-muted-foreground"}`, children: Q.label })
              ]
            },
            Q.id
          )) })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground", children: W.label === "Token " ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            " Token  ",
            /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: W.value }),
            " "
          ] }) : W.label === "" ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            " ",
            /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: W.value }),
            " "
          ] }) : /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            " ",
            /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: W.value }),
            " "
          ] }) }),
          /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
            /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                style: { left: `${(W.value - W.min) / (W.max - W.min) * 100}%`, transform: "translate(-50%, -50%)" }
              }
            ),
            /* @__PURE__ */ h.jsx(
              "input",
              {
                type: "range",
                min: W.min,
                max: W.max,
                step: W.step,
                value: W.value,
                onChange: (Q) => {
                  const ye = Number(Q.target.value), Be = y.trigger === "token" ? "tokenLimit" : "countLimit";
                  we(Be, ye);
                },
                className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                style: { appearance: "none", WebkitAppearance: "none" }
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground", children: [
            " ",
            /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: y.keepRecentCount ?? 3 }),
            " "
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
            /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                style: { left: `${(y.keepRecentCount ?? 3) / 10 * 100}%`, transform: "translate(-50%, -50%)" }
              }
            ),
            /* @__PURE__ */ h.jsx(
              "input",
              {
                type: "range",
                min: 0,
                max: 10,
                step: 1,
                value: y.keepRecentCount ?? 3,
                onChange: (Q) => we("keepRecentCount", Number(Q.target.value)),
                className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                style: { appearance: "none", WebkitAppearance: "none" }
              }
            )
          ] })
        ] }),
        S && /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground space-y-1", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ h.jsx("span", { children: ":" }),
            /* @__PURE__ */ h.jsx("span", { className: "font-mono", children: S.pendingEntryCount })
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ h.jsxs("span", { children: [
              "",
              y.trigger === "token" ? "Token" : "",
              ":"
            ] }),
            /* @__PURE__ */ h.jsxs("span", { className: `font-mono ${S.triggered ? "text-amber-500" : ""}`, children: [
              S.currentValue,
              " / ",
              W.value
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs(
          "button",
          {
            type: "button",
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",
            onClick: De,
            disabled: s || ((S == null ? void 0 : S.pendingEntryCount) ?? 0) < 2,
            children: [
              /* @__PURE__ */ h.jsx(Yv, { size: 14, className: s ? "animate-pulse" : "" }),
              s ? "..." : ""
            ]
          }
        ),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/70 leading-relaxed", children: " Token " })
      ] })
    ] })
  ] });
}, qk = [
  { id: "summary", label: "", icon: /* @__PURE__ */ h.jsx(Wh, { size: 16 }) },
  { id: "vectorization", label: "", icon: /* @__PURE__ */ h.jsx(Ic, { size: 16 }) },
  { id: "batch", label: "", icon: /* @__PURE__ */ h.jsx(yy, { size: 16 }) }
], Hk = [
  { id: "devlog", label: "", icon: Qv, linkTo: "devlog:model" },
  { id: "presets", label: "", icon: Ix, linkTo: "presets:prompt" }
], Pk = ({ onNavigate: n }) => {
  const [r, i] = se.useState("summary");
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "mb-6", children: [
      /* @__PURE__ */ h.jsx("h1", { className: "text-2xl font-light text-foreground tracking-tight mb-2", children: "" }),
      /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: "" })
    ] }),
    /* @__PURE__ */ h.jsx(
      Bc,
      {
        tabs: qk,
        activeTab: r,
        onChange: (l) => i(l),
        actions: /* @__PURE__ */ h.jsx(
          Lk,
          {
            links: Hk,
            onNavigate: (l) => n == null ? void 0 : n(l)
          }
        )
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "flex-1 overflow-y-auto no-scrollbar", children: [
      r === "summary" && /* @__PURE__ */ h.jsx(Ik, {}),
      r === "vectorization" && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-48 text-muted-foreground gap-2", children: [
        /* @__PURE__ */ h.jsx(Ic, { size: 32, strokeWidth: 1, className: "opacity-30" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "..." })
      ] }),
      r === "batch" && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-48 text-muted-foreground gap-2", children: [
        /* @__PURE__ */ h.jsx(Vx, { size: 32, strokeWidth: 1, className: "opacity-30" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "..." })
      ] })
    ] })
  ] });
}, Fk = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ProcessingView: Pk
}, Symbol.toStringTag, { value: "Module" }));
//# sourceMappingURL=index.js.map
