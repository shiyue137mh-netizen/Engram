var f$ = Object.defineProperty;
var d$ = (e, t, n) => t in e ? f$(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n;
var yt = (e, t, n) => d$(e, typeof t != "symbol" ? t + "" : t, n);
var Ou = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function uf(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var D2 = { exports: {} }, i0 = {};
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var LT;
function h$() {
  if (LT) return i0;
  LT = 1;
  var e = Symbol.for("react.transitional.element"), t = Symbol.for("react.fragment");
  function n(r, i, a) {
    var o = null;
    if (a !== void 0 && (o = "" + a), i.key !== void 0 && (o = "" + i.key), "key" in i) {
      a = {};
      for (var u in i)
        u !== "key" && (a[u] = i[u]);
    } else a = i;
    return i = a.ref, {
      $$typeof: e,
      type: r,
      key: o,
      ref: i !== void 0 ? i : null,
      props: a
    };
  }
  return i0.Fragment = t, i0.jsx = n, i0.jsxs = n, i0;
}
var BT;
function p$() {
  return BT || (BT = 1, D2.exports = /* @__PURE__ */ h$()), D2.exports;
}
var h = /* @__PURE__ */ p$(), z2 = { exports: {} }, Gt = {};
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var qT;
function m$() {
  if (qT) return Gt;
  qT = 1;
  var e = Symbol.for("react.transitional.element"), t = Symbol.for("react.portal"), n = Symbol.for("react.fragment"), r = Symbol.for("react.strict_mode"), i = Symbol.for("react.profiler"), a = Symbol.for("react.consumer"), o = Symbol.for("react.context"), u = Symbol.for("react.forward_ref"), c = Symbol.for("react.suspense"), f = Symbol.for("react.memo"), p = Symbol.for("react.lazy"), g = Symbol.for("react.activity"), x = Symbol.iterator;
  function b(re) {
    return re === null || typeof re != "object" ? null : (re = x && re[x] || re["@@iterator"], typeof re == "function" ? re : null);
  }
  var _ = {
    isMounted: function() {
      return !1;
    },
    enqueueForceUpdate: function() {
    },
    enqueueReplaceState: function() {
    },
    enqueueSetState: function() {
    }
  }, E = Object.assign, k = {};
  function T(re, de, V) {
    this.props = re, this.context = de, this.refs = k, this.updater = V || _;
  }
  T.prototype.isReactComponent = {}, T.prototype.setState = function(re, de) {
    if (typeof re != "object" && typeof re != "function" && re != null)
      throw Error(
        "takes an object of state variables to update or a function which returns an object of state variables."
      );
    this.updater.enqueueSetState(this, re, de, "setState");
  }, T.prototype.forceUpdate = function(re) {
    this.updater.enqueueForceUpdate(this, re, "forceUpdate");
  };
  function R() {
  }
  R.prototype = T.prototype;
  function N(re, de, V) {
    this.props = re, this.context = de, this.refs = k, this.updater = V || _;
  }
  var O = N.prototype = new R();
  O.constructor = N, E(O, T.prototype), O.isPureReactComponent = !0;
  var P = Array.isArray;
  function z() {
  }
  var q = { H: null, A: null, T: null, S: null }, G = Object.prototype.hasOwnProperty;
  function Y(re, de, V) {
    var ae = V.ref;
    return {
      $$typeof: e,
      type: re,
      key: de,
      ref: ae !== void 0 ? ae : null,
      props: V
    };
  }
  function W(re, de) {
    return Y(re.type, de, re.props);
  }
  function F(re) {
    return typeof re == "object" && re !== null && re.$$typeof === e;
  }
  function X(re) {
    var de = { "=": "=0", ":": "=2" };
    return "$" + re.replace(/[=:]/g, function(V) {
      return de[V];
    });
  }
  var me = /\/+/g;
  function J(re, de) {
    return typeof re == "object" && re !== null && re.key != null ? X("" + re.key) : de.toString(36);
  }
  function le(re) {
    switch (re.status) {
      case "fulfilled":
        return re.value;
      case "rejected":
        throw re.reason;
      default:
        switch (typeof re.status == "string" ? re.then(z, z) : (re.status = "pending", re.then(
          function(de) {
            re.status === "pending" && (re.status = "fulfilled", re.value = de);
          },
          function(de) {
            re.status === "pending" && (re.status = "rejected", re.reason = de);
          }
        )), re.status) {
          case "fulfilled":
            return re.value;
          case "rejected":
            throw re.reason;
        }
    }
    throw re;
  }
  function Q(re, de, V, ae, ge) {
    var we = typeof re;
    (we === "undefined" || we === "boolean") && (re = null);
    var Re = !1;
    if (re === null) Re = !0;
    else
      switch (we) {
        case "bigint":
        case "string":
        case "number":
          Re = !0;
          break;
        case "object":
          switch (re.$$typeof) {
            case e:
            case t:
              Re = !0;
              break;
            case p:
              return Re = re._init, Q(
                Re(re._payload),
                de,
                V,
                ae,
                ge
              );
          }
      }
    if (Re)
      return ge = ge(re), Re = ae === "" ? "." + J(re, 0) : ae, P(ge) ? (V = "", Re != null && (V = Re.replace(me, "$&/") + "/"), Q(ge, de, V, "", function(dt) {
        return dt;
      })) : ge != null && (F(ge) && (ge = W(
        ge,
        V + (ge.key == null || re && re.key === ge.key ? "" : ("" + ge.key).replace(
          me,
          "$&/"
        ) + "/") + Re
      )), de.push(ge)), 1;
    Re = 0;
    var Ie = ae === "" ? "." : ae + ":";
    if (P(re))
      for (var Me = 0; Me < re.length; Me++)
        ae = re[Me], we = Ie + J(ae, Me), Re += Q(
          ae,
          de,
          V,
          we,
          ge
        );
    else if (Me = b(re), typeof Me == "function")
      for (re = Me.call(re), Me = 0; !(ae = re.next()).done; )
        ae = ae.value, we = Ie + J(ae, Me++), Re += Q(
          ae,
          de,
          V,
          we,
          ge
        );
    else if (we === "object") {
      if (typeof re.then == "function")
        return Q(
          le(re),
          de,
          V,
          ae,
          ge
        );
      throw de = String(re), Error(
        "Objects are not valid as a React child (found: " + (de === "[object Object]" ? "object with keys {" + Object.keys(re).join(", ") + "}" : de) + "). If you meant to render a collection of children, use an array instead."
      );
    }
    return Re;
  }
  function oe(re, de, V) {
    if (re == null) return re;
    var ae = [], ge = 0;
    return Q(re, ae, "", "", function(we) {
      return de.call(V, we, ge++);
    }), ae;
  }
  function fe(re) {
    if (re._status === -1) {
      var de = re._result;
      de = de(), de.then(
        function(V) {
          (re._status === 0 || re._status === -1) && (re._status = 1, re._result = V);
        },
        function(V) {
          (re._status === 0 || re._status === -1) && (re._status = 2, re._result = V);
        }
      ), re._status === -1 && (re._status = 0, re._result = de);
    }
    if (re._status === 1) return re._result.default;
    throw re._result;
  }
  var ce = typeof reportError == "function" ? reportError : function(re) {
    if (typeof window == "object" && typeof window.ErrorEvent == "function") {
      var de = new window.ErrorEvent("error", {
        bubbles: !0,
        cancelable: !0,
        message: typeof re == "object" && re !== null && typeof re.message == "string" ? String(re.message) : String(re),
        error: re
      });
      if (!window.dispatchEvent(de)) return;
    } else if (typeof process == "object" && typeof process.emit == "function") {
      process.emit("uncaughtException", re);
      return;
    }
    console.error(re);
  }, K = {
    map: oe,
    forEach: function(re, de, V) {
      oe(
        re,
        function() {
          de.apply(this, arguments);
        },
        V
      );
    },
    count: function(re) {
      var de = 0;
      return oe(re, function() {
        de++;
      }), de;
    },
    toArray: function(re) {
      return oe(re, function(de) {
        return de;
      }) || [];
    },
    only: function(re) {
      if (!F(re))
        throw Error(
          "React.Children.only expected to receive a single React element child."
        );
      return re;
    }
  };
  return Gt.Activity = g, Gt.Children = K, Gt.Component = T, Gt.Fragment = n, Gt.Profiler = i, Gt.PureComponent = N, Gt.StrictMode = r, Gt.Suspense = c, Gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = q, Gt.__COMPILER_RUNTIME = {
    __proto__: null,
    c: function(re) {
      return q.H.useMemoCache(re);
    }
  }, Gt.cache = function(re) {
    return function() {
      return re.apply(null, arguments);
    };
  }, Gt.cacheSignal = function() {
    return null;
  }, Gt.cloneElement = function(re, de, V) {
    if (re == null)
      throw Error(
        "The argument must be a React element, but you passed " + re + "."
      );
    var ae = E({}, re.props), ge = re.key;
    if (de != null)
      for (we in de.key !== void 0 && (ge = "" + de.key), de)
        !G.call(de, we) || we === "key" || we === "__self" || we === "__source" || we === "ref" && de.ref === void 0 || (ae[we] = de[we]);
    var we = arguments.length - 2;
    if (we === 1) ae.children = V;
    else if (1 < we) {
      for (var Re = Array(we), Ie = 0; Ie < we; Ie++)
        Re[Ie] = arguments[Ie + 2];
      ae.children = Re;
    }
    return Y(re.type, ge, ae);
  }, Gt.createContext = function(re) {
    return re = {
      $$typeof: o,
      _currentValue: re,
      _currentValue2: re,
      _threadCount: 0,
      Provider: null,
      Consumer: null
    }, re.Provider = re, re.Consumer = {
      $$typeof: a,
      _context: re
    }, re;
  }, Gt.createElement = function(re, de, V) {
    var ae, ge = {}, we = null;
    if (de != null)
      for (ae in de.key !== void 0 && (we = "" + de.key), de)
        G.call(de, ae) && ae !== "key" && ae !== "__self" && ae !== "__source" && (ge[ae] = de[ae]);
    var Re = arguments.length - 2;
    if (Re === 1) ge.children = V;
    else if (1 < Re) {
      for (var Ie = Array(Re), Me = 0; Me < Re; Me++)
        Ie[Me] = arguments[Me + 2];
      ge.children = Ie;
    }
    if (re && re.defaultProps)
      for (ae in Re = re.defaultProps, Re)
        ge[ae] === void 0 && (ge[ae] = Re[ae]);
    return Y(re, we, ge);
  }, Gt.createRef = function() {
    return { current: null };
  }, Gt.forwardRef = function(re) {
    return { $$typeof: u, render: re };
  }, Gt.isValidElement = F, Gt.lazy = function(re) {
    return {
      $$typeof: p,
      _payload: { _status: -1, _result: re },
      _init: fe
    };
  }, Gt.memo = function(re, de) {
    return {
      $$typeof: f,
      type: re,
      compare: de === void 0 ? null : de
    };
  }, Gt.startTransition = function(re) {
    var de = q.T, V = {};
    q.T = V;
    try {
      var ae = re(), ge = q.S;
      ge !== null && ge(V, ae), typeof ae == "object" && ae !== null && typeof ae.then == "function" && ae.then(z, ce);
    } catch (we) {
      ce(we);
    } finally {
      de !== null && V.types !== null && (de.types = V.types), q.T = de;
    }
  }, Gt.unstable_useCacheRefresh = function() {
    return q.H.useCacheRefresh();
  }, Gt.use = function(re) {
    return q.H.use(re);
  }, Gt.useActionState = function(re, de, V) {
    return q.H.useActionState(re, de, V);
  }, Gt.useCallback = function(re, de) {
    return q.H.useCallback(re, de);
  }, Gt.useContext = function(re) {
    return q.H.useContext(re);
  }, Gt.useDebugValue = function() {
  }, Gt.useDeferredValue = function(re, de) {
    return q.H.useDeferredValue(re, de);
  }, Gt.useEffect = function(re, de) {
    return q.H.useEffect(re, de);
  }, Gt.useEffectEvent = function(re) {
    return q.H.useEffectEvent(re);
  }, Gt.useId = function() {
    return q.H.useId();
  }, Gt.useImperativeHandle = function(re, de, V) {
    return q.H.useImperativeHandle(re, de, V);
  }, Gt.useInsertionEffect = function(re, de) {
    return q.H.useInsertionEffect(re, de);
  }, Gt.useLayoutEffect = function(re, de) {
    return q.H.useLayoutEffect(re, de);
  }, Gt.useMemo = function(re, de) {
    return q.H.useMemo(re, de);
  }, Gt.useOptimistic = function(re, de) {
    return q.H.useOptimistic(re, de);
  }, Gt.useReducer = function(re, de, V) {
    return q.H.useReducer(re, de, V);
  }, Gt.useRef = function(re) {
    return q.H.useRef(re);
  }, Gt.useState = function(re) {
    return q.H.useState(re);
  }, Gt.useSyncExternalStore = function(re, de, V) {
    return q.H.useSyncExternalStore(
      re,
      de,
      V
    );
  }, Gt.useTransition = function() {
    return q.H.useTransition();
  }, Gt.version = "19.2.3", Gt;
}
var $T;
function fy() {
  return $T || ($T = 1, z2.exports = /* @__PURE__ */ m$()), z2.exports;
}
var B = /* @__PURE__ */ fy();
const dy = /* @__PURE__ */ uf(B);
var P2 = { exports: {} }, s0 = {}, I2 = { exports: {} }, L2 = {};
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var FT;
function g$() {
  return FT || (FT = 1, (function(e) {
    function t(Q, oe) {
      var fe = Q.length;
      Q.push(oe);
      e: for (; 0 < fe; ) {
        var ce = fe - 1 >>> 1, K = Q[ce];
        if (0 < i(K, oe))
          Q[ce] = oe, Q[fe] = K, fe = ce;
        else break e;
      }
    }
    function n(Q) {
      return Q.length === 0 ? null : Q[0];
    }
    function r(Q) {
      if (Q.length === 0) return null;
      var oe = Q[0], fe = Q.pop();
      if (fe !== oe) {
        Q[0] = fe;
        e: for (var ce = 0, K = Q.length, re = K >>> 1; ce < re; ) {
          var de = 2 * (ce + 1) - 1, V = Q[de], ae = de + 1, ge = Q[ae];
          if (0 > i(V, fe))
            ae < K && 0 > i(ge, V) ? (Q[ce] = ge, Q[ae] = fe, ce = ae) : (Q[ce] = V, Q[de] = fe, ce = de);
          else if (ae < K && 0 > i(ge, fe))
            Q[ce] = ge, Q[ae] = fe, ce = ae;
          else break e;
        }
      }
      return oe;
    }
    function i(Q, oe) {
      var fe = Q.sortIndex - oe.sortIndex;
      return fe !== 0 ? fe : Q.id - oe.id;
    }
    if (e.unstable_now = void 0, typeof performance == "object" && typeof performance.now == "function") {
      var a = performance;
      e.unstable_now = function() {
        return a.now();
      };
    } else {
      var o = Date, u = o.now();
      e.unstable_now = function() {
        return o.now() - u;
      };
    }
    var c = [], f = [], p = 1, g = null, x = 3, b = !1, _ = !1, E = !1, k = !1, T = typeof setTimeout == "function" ? setTimeout : null, R = typeof clearTimeout == "function" ? clearTimeout : null, N = typeof setImmediate < "u" ? setImmediate : null;
    function O(Q) {
      for (var oe = n(f); oe !== null; ) {
        if (oe.callback === null) r(f);
        else if (oe.startTime <= Q)
          r(f), oe.sortIndex = oe.expirationTime, t(c, oe);
        else break;
        oe = n(f);
      }
    }
    function P(Q) {
      if (E = !1, O(Q), !_)
        if (n(c) !== null)
          _ = !0, z || (z = !0, X());
        else {
          var oe = n(f);
          oe !== null && le(P, oe.startTime - Q);
        }
    }
    var z = !1, q = -1, G = 5, Y = -1;
    function W() {
      return k ? !0 : !(e.unstable_now() - Y < G);
    }
    function F() {
      if (k = !1, z) {
        var Q = e.unstable_now();
        Y = Q;
        var oe = !0;
        try {
          e: {
            _ = !1, E && (E = !1, R(q), q = -1), b = !0;
            var fe = x;
            try {
              t: {
                for (O(Q), g = n(c); g !== null && !(g.expirationTime > Q && W()); ) {
                  var ce = g.callback;
                  if (typeof ce == "function") {
                    g.callback = null, x = g.priorityLevel;
                    var K = ce(
                      g.expirationTime <= Q
                    );
                    if (Q = e.unstable_now(), typeof K == "function") {
                      g.callback = K, O(Q), oe = !0;
                      break t;
                    }
                    g === n(c) && r(c), O(Q);
                  } else r(c);
                  g = n(c);
                }
                if (g !== null) oe = !0;
                else {
                  var re = n(f);
                  re !== null && le(
                    P,
                    re.startTime - Q
                  ), oe = !1;
                }
              }
              break e;
            } finally {
              g = null, x = fe, b = !1;
            }
            oe = void 0;
          }
        } finally {
          oe ? X() : z = !1;
        }
      }
    }
    var X;
    if (typeof N == "function")
      X = function() {
        N(F);
      };
    else if (typeof MessageChannel < "u") {
      var me = new MessageChannel(), J = me.port2;
      me.port1.onmessage = F, X = function() {
        J.postMessage(null);
      };
    } else
      X = function() {
        T(F, 0);
      };
    function le(Q, oe) {
      q = T(function() {
        Q(e.unstable_now());
      }, oe);
    }
    e.unstable_IdlePriority = 5, e.unstable_ImmediatePriority = 1, e.unstable_LowPriority = 4, e.unstable_NormalPriority = 3, e.unstable_Profiling = null, e.unstable_UserBlockingPriority = 2, e.unstable_cancelCallback = function(Q) {
      Q.callback = null;
    }, e.unstable_forceFrameRate = function(Q) {
      0 > Q || 125 < Q ? console.error(
        "forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"
      ) : G = 0 < Q ? Math.floor(1e3 / Q) : 5;
    }, e.unstable_getCurrentPriorityLevel = function() {
      return x;
    }, e.unstable_next = function(Q) {
      switch (x) {
        case 1:
        case 2:
        case 3:
          var oe = 3;
          break;
        default:
          oe = x;
      }
      var fe = x;
      x = oe;
      try {
        return Q();
      } finally {
        x = fe;
      }
    }, e.unstable_requestPaint = function() {
      k = !0;
    }, e.unstable_runWithPriority = function(Q, oe) {
      switch (Q) {
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
          break;
        default:
          Q = 3;
      }
      var fe = x;
      x = Q;
      try {
        return oe();
      } finally {
        x = fe;
      }
    }, e.unstable_scheduleCallback = function(Q, oe, fe) {
      var ce = e.unstable_now();
      switch (typeof fe == "object" && fe !== null ? (fe = fe.delay, fe = typeof fe == "number" && 0 < fe ? ce + fe : ce) : fe = ce, Q) {
        case 1:
          var K = -1;
          break;
        case 2:
          K = 250;
          break;
        case 5:
          K = 1073741823;
          break;
        case 4:
          K = 1e4;
          break;
        default:
          K = 5e3;
      }
      return K = fe + K, Q = {
        id: p++,
        callback: oe,
        priorityLevel: Q,
        startTime: fe,
        expirationTime: K,
        sortIndex: -1
      }, fe > ce ? (Q.sortIndex = fe, t(f, Q), n(c) === null && Q === n(f) && (E ? (R(q), q = -1) : E = !0, le(P, fe - ce))) : (Q.sortIndex = K, t(c, Q), _ || b || (_ = !0, z || (z = !0, X()))), Q;
    }, e.unstable_shouldYield = W, e.unstable_wrapCallback = function(Q) {
      var oe = x;
      return function() {
        var fe = x;
        x = oe;
        try {
          return Q.apply(this, arguments);
        } finally {
          x = fe;
        }
      };
    };
  })(L2)), L2;
}
var UT;
function y$() {
  return UT || (UT = 1, I2.exports = /* @__PURE__ */ g$()), I2.exports;
}
var B2 = { exports: {} }, Ki = {};
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var VT;
function v$() {
  if (VT) return Ki;
  VT = 1;
  var e = /* @__PURE__ */ fy();
  function t(c) {
    var f = "https://react.dev/errors/" + c;
    if (1 < arguments.length) {
      f += "?args[]=" + encodeURIComponent(arguments[1]);
      for (var p = 2; p < arguments.length; p++)
        f += "&args[]=" + encodeURIComponent(arguments[p]);
    }
    return "Minified React error #" + c + "; visit " + f + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  function n() {
  }
  var r = {
    d: {
      f: n,
      r: function() {
        throw Error(t(522));
      },
      D: n,
      C: n,
      L: n,
      m: n,
      X: n,
      S: n,
      M: n
    },
    p: 0,
    findDOMNode: null
  }, i = Symbol.for("react.portal");
  function a(c, f, p) {
    var g = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null;
    return {
      $$typeof: i,
      key: g == null ? null : "" + g,
      children: c,
      containerInfo: f,
      implementation: p
    };
  }
  var o = e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;
  function u(c, f) {
    if (c === "font") return "";
    if (typeof f == "string")
      return f === "use-credentials" ? f : "";
  }
  return Ki.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = r, Ki.createPortal = function(c, f) {
    var p = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null;
    if (!f || f.nodeType !== 1 && f.nodeType !== 9 && f.nodeType !== 11)
      throw Error(t(299));
    return a(c, f, null, p);
  }, Ki.flushSync = function(c) {
    var f = o.T, p = r.p;
    try {
      if (o.T = null, r.p = 2, c) return c();
    } finally {
      o.T = f, r.p = p, r.d.f();
    }
  }, Ki.preconnect = function(c, f) {
    typeof c == "string" && (f ? (f = f.crossOrigin, f = typeof f == "string" ? f === "use-credentials" ? f : "" : void 0) : f = null, r.d.C(c, f));
  }, Ki.prefetchDNS = function(c) {
    typeof c == "string" && r.d.D(c);
  }, Ki.preinit = function(c, f) {
    if (typeof c == "string" && f && typeof f.as == "string") {
      var p = f.as, g = u(p, f.crossOrigin), x = typeof f.integrity == "string" ? f.integrity : void 0, b = typeof f.fetchPriority == "string" ? f.fetchPriority : void 0;
      p === "style" ? r.d.S(
        c,
        typeof f.precedence == "string" ? f.precedence : void 0,
        {
          crossOrigin: g,
          integrity: x,
          fetchPriority: b
        }
      ) : p === "script" && r.d.X(c, {
        crossOrigin: g,
        integrity: x,
        fetchPriority: b,
        nonce: typeof f.nonce == "string" ? f.nonce : void 0
      });
    }
  }, Ki.preinitModule = function(c, f) {
    if (typeof c == "string")
      if (typeof f == "object" && f !== null) {
        if (f.as == null || f.as === "script") {
          var p = u(
            f.as,
            f.crossOrigin
          );
          r.d.M(c, {
            crossOrigin: p,
            integrity: typeof f.integrity == "string" ? f.integrity : void 0,
            nonce: typeof f.nonce == "string" ? f.nonce : void 0
          });
        }
      } else f == null && r.d.M(c);
  }, Ki.preload = function(c, f) {
    if (typeof c == "string" && typeof f == "object" && f !== null && typeof f.as == "string") {
      var p = f.as, g = u(p, f.crossOrigin);
      r.d.L(c, p, {
        crossOrigin: g,
        integrity: typeof f.integrity == "string" ? f.integrity : void 0,
        nonce: typeof f.nonce == "string" ? f.nonce : void 0,
        type: typeof f.type == "string" ? f.type : void 0,
        fetchPriority: typeof f.fetchPriority == "string" ? f.fetchPriority : void 0,
        referrerPolicy: typeof f.referrerPolicy == "string" ? f.referrerPolicy : void 0,
        imageSrcSet: typeof f.imageSrcSet == "string" ? f.imageSrcSet : void 0,
        imageSizes: typeof f.imageSizes == "string" ? f.imageSizes : void 0,
        media: typeof f.media == "string" ? f.media : void 0
      });
    }
  }, Ki.preloadModule = function(c, f) {
    if (typeof c == "string")
      if (f) {
        var p = u(f.as, f.crossOrigin);
        r.d.m(c, {
          as: typeof f.as == "string" && f.as !== "script" ? f.as : void 0,
          crossOrigin: p,
          integrity: typeof f.integrity == "string" ? f.integrity : void 0
        });
      } else r.d.m(c);
  }, Ki.requestFormReset = function(c) {
    r.d.r(c);
  }, Ki.unstable_batchedUpdates = function(c, f) {
    return c(f);
  }, Ki.useFormState = function(c, f, p) {
    return o.H.useFormState(c, f, p);
  }, Ki.useFormStatus = function() {
    return o.H.useHostTransitionStatus();
  }, Ki.version = "19.2.3", Ki;
}
var HT;
function KO() {
  if (HT) return B2.exports;
  HT = 1;
  function e() {
    if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function"))
      try {
        __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e);
      } catch (t) {
        console.error(t);
      }
  }
  return e(), B2.exports = /* @__PURE__ */ v$(), B2.exports;
}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var GT;
function x$() {
  if (GT) return s0;
  GT = 1;
  var e = /* @__PURE__ */ y$(), t = /* @__PURE__ */ fy(), n = /* @__PURE__ */ KO();
  function r(s) {
    var l = "https://react.dev/errors/" + s;
    if (1 < arguments.length) {
      l += "?args[]=" + encodeURIComponent(arguments[1]);
      for (var d = 2; d < arguments.length; d++)
        l += "&args[]=" + encodeURIComponent(arguments[d]);
    }
    return "Minified React error #" + s + "; visit " + l + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  function i(s) {
    return !(!s || s.nodeType !== 1 && s.nodeType !== 9 && s.nodeType !== 11);
  }
  function a(s) {
    var l = s, d = s;
    if (s.alternate) for (; l.return; ) l = l.return;
    else {
      s = l;
      do
        l = s, (l.flags & 4098) !== 0 && (d = l.return), s = l.return;
      while (s);
    }
    return l.tag === 3 ? d : null;
  }
  function o(s) {
    if (s.tag === 13) {
      var l = s.memoizedState;
      if (l === null && (s = s.alternate, s !== null && (l = s.memoizedState)), l !== null) return l.dehydrated;
    }
    return null;
  }
  function u(s) {
    if (s.tag === 31) {
      var l = s.memoizedState;
      if (l === null && (s = s.alternate, s !== null && (l = s.memoizedState)), l !== null) return l.dehydrated;
    }
    return null;
  }
  function c(s) {
    if (a(s) !== s)
      throw Error(r(188));
  }
  function f(s) {
    var l = s.alternate;
    if (!l) {
      if (l = a(s), l === null) throw Error(r(188));
      return l !== s ? null : s;
    }
    for (var d = s, y = l; ; ) {
      var S = d.return;
      if (S === null) break;
      var j = S.alternate;
      if (j === null) {
        if (y = S.return, y !== null) {
          d = y;
          continue;
        }
        break;
      }
      if (S.child === j.child) {
        for (j = S.child; j; ) {
          if (j === d) return c(S), s;
          if (j === y) return c(S), l;
          j = j.sibling;
        }
        throw Error(r(188));
      }
      if (d.return !== y.return) d = S, y = j;
      else {
        for (var L = !1, ee = S.child; ee; ) {
          if (ee === d) {
            L = !0, d = S, y = j;
            break;
          }
          if (ee === y) {
            L = !0, y = S, d = j;
            break;
          }
          ee = ee.sibling;
        }
        if (!L) {
          for (ee = j.child; ee; ) {
            if (ee === d) {
              L = !0, d = j, y = S;
              break;
            }
            if (ee === y) {
              L = !0, y = j, d = S;
              break;
            }
            ee = ee.sibling;
          }
          if (!L) throw Error(r(189));
        }
      }
      if (d.alternate !== y) throw Error(r(190));
    }
    if (d.tag !== 3) throw Error(r(188));
    return d.stateNode.current === d ? s : l;
  }
  function p(s) {
    var l = s.tag;
    if (l === 5 || l === 26 || l === 27 || l === 6) return s;
    for (s = s.child; s !== null; ) {
      if (l = p(s), l !== null) return l;
      s = s.sibling;
    }
    return null;
  }
  var g = Object.assign, x = Symbol.for("react.element"), b = Symbol.for("react.transitional.element"), _ = Symbol.for("react.portal"), E = Symbol.for("react.fragment"), k = Symbol.for("react.strict_mode"), T = Symbol.for("react.profiler"), R = Symbol.for("react.consumer"), N = Symbol.for("react.context"), O = Symbol.for("react.forward_ref"), P = Symbol.for("react.suspense"), z = Symbol.for("react.suspense_list"), q = Symbol.for("react.memo"), G = Symbol.for("react.lazy"), Y = Symbol.for("react.activity"), W = Symbol.for("react.memo_cache_sentinel"), F = Symbol.iterator;
  function X(s) {
    return s === null || typeof s != "object" ? null : (s = F && s[F] || s["@@iterator"], typeof s == "function" ? s : null);
  }
  var me = Symbol.for("react.client.reference");
  function J(s) {
    if (s == null) return null;
    if (typeof s == "function")
      return s.$$typeof === me ? null : s.displayName || s.name || null;
    if (typeof s == "string") return s;
    switch (s) {
      case E:
        return "Fragment";
      case T:
        return "Profiler";
      case k:
        return "StrictMode";
      case P:
        return "Suspense";
      case z:
        return "SuspenseList";
      case Y:
        return "Activity";
    }
    if (typeof s == "object")
      switch (s.$$typeof) {
        case _:
          return "Portal";
        case N:
          return s.displayName || "Context";
        case R:
          return (s._context.displayName || "Context") + ".Consumer";
        case O:
          var l = s.render;
          return s = s.displayName, s || (s = l.displayName || l.name || "", s = s !== "" ? "ForwardRef(" + s + ")" : "ForwardRef"), s;
        case q:
          return l = s.displayName || null, l !== null ? l : J(s.type) || "Memo";
        case G:
          l = s._payload, s = s._init;
          try {
            return J(s(l));
          } catch {
          }
      }
    return null;
  }
  var le = Array.isArray, Q = t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, oe = n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, fe = {
    pending: !1,
    data: null,
    method: null,
    action: null
  }, ce = [], K = -1;
  function re(s) {
    return { current: s };
  }
  function de(s) {
    0 > K || (s.current = ce[K], ce[K] = null, K--);
  }
  function V(s, l) {
    K++, ce[K] = s.current, s.current = l;
  }
  var ae = re(null), ge = re(null), we = re(null), Re = re(null);
  function Ie(s, l) {
    switch (V(we, l), V(ge, s), V(ae, null), l.nodeType) {
      case 9:
      case 11:
        s = (s = l.documentElement) && (s = s.namespaceURI) ? _d(s) : 0;
        break;
      default:
        if (s = l.tagName, l = l.namespaceURI)
          l = _d(l), s = Hi(l, s);
        else
          switch (s) {
            case "svg":
              s = 1;
              break;
            case "math":
              s = 2;
              break;
            default:
              s = 0;
          }
    }
    de(ae), V(ae, s);
  }
  function Me() {
    de(ae), de(ge), de(we);
  }
  function dt(s) {
    s.memoizedState !== null && V(Re, s);
    var l = ae.current, d = Hi(l, s.type);
    l !== d && (V(ge, s), V(ae, d));
  }
  function ut(s) {
    ge.current === s && (de(ae), de(ge)), Re.current === s && (de(Re), Vc._currentValue = fe);
  }
  var Je, ct;
  function mt(s) {
    if (Je === void 0)
      try {
        throw Error();
      } catch (d) {
        var l = d.stack.trim().match(/\n( *(at )?)/);
        Je = l && l[1] || "", ct = -1 < d.stack.indexOf(`
    at`) ? " (<anonymous>)" : -1 < d.stack.indexOf("@") ? "@unknown:0:0" : "";
      }
    return `
` + Je + s + ct;
  }
  var ft = !1;
  function At(s, l) {
    if (!s || ft) return "";
    ft = !0;
    var d = Error.prepareStackTrace;
    Error.prepareStackTrace = void 0;
    try {
      var y = {
        DetermineComponentFrameRoot: function() {
          try {
            if (l) {
              var Ge = function() {
                throw Error();
              };
              if (Object.defineProperty(Ge.prototype, "props", {
                set: function() {
                  throw Error();
                }
              }), typeof Reflect == "object" && Reflect.construct) {
                try {
                  Reflect.construct(Ge, []);
                } catch (Be) {
                  var Pe = Be;
                }
                Reflect.construct(s, [], Ge);
              } else {
                try {
                  Ge.call();
                } catch (Be) {
                  Pe = Be;
                }
                s.call(Ge.prototype);
              }
            } else {
              try {
                throw Error();
              } catch (Be) {
                Pe = Be;
              }
              (Ge = s()) && typeof Ge.catch == "function" && Ge.catch(function() {
              });
            }
          } catch (Be) {
            if (Be && Pe && typeof Be.stack == "string")
              return [Be.stack, Pe.stack];
          }
          return [null, null];
        }
      };
      y.DetermineComponentFrameRoot.displayName = "DetermineComponentFrameRoot";
      var S = Object.getOwnPropertyDescriptor(
        y.DetermineComponentFrameRoot,
        "name"
      );
      S && S.configurable && Object.defineProperty(
        y.DetermineComponentFrameRoot,
        "name",
        { value: "DetermineComponentFrameRoot" }
      );
      var j = y.DetermineComponentFrameRoot(), L = j[0], ee = j[1];
      if (L && ee) {
        var xe = L.split(`
`), De = ee.split(`
`);
        for (S = y = 0; y < xe.length && !xe[y].includes("DetermineComponentFrameRoot"); )
          y++;
        for (; S < De.length && !De[S].includes(
          "DetermineComponentFrameRoot"
        ); )
          S++;
        if (y === xe.length || S === De.length)
          for (y = xe.length - 1, S = De.length - 1; 1 <= y && 0 <= S && xe[y] !== De[S]; )
            S--;
        for (; 1 <= y && 0 <= S; y--, S--)
          if (xe[y] !== De[S]) {
            if (y !== 1 || S !== 1)
              do
                if (y--, S--, 0 > S || xe[y] !== De[S]) {
                  var Fe = `
` + xe[y].replace(" at new ", " at ");
                  return s.displayName && Fe.includes("<anonymous>") && (Fe = Fe.replace("<anonymous>", s.displayName)), Fe;
                }
              while (1 <= y && 0 <= S);
            break;
          }
      }
    } finally {
      ft = !1, Error.prepareStackTrace = d;
    }
    return (d = s ? s.displayName || s.name : "") ? mt(d) : "";
  }
  function xt(s, l) {
    switch (s.tag) {
      case 26:
      case 27:
      case 5:
        return mt(s.type);
      case 16:
        return mt("Lazy");
      case 13:
        return s.child !== l && l !== null ? mt("Suspense Fallback") : mt("Suspense");
      case 19:
        return mt("SuspenseList");
      case 0:
      case 15:
        return At(s.type, !1);
      case 11:
        return At(s.type.render, !1);
      case 1:
        return At(s.type, !0);
      case 31:
        return mt("Activity");
      default:
        return "";
    }
  }
  function qn(s) {
    try {
      var l = "", d = null;
      do
        l += xt(s, d), d = s, s = s.return;
      while (s);
      return l;
    } catch (y) {
      return `
Error generating stack: ` + y.message + `
` + y.stack;
    }
  }
  var An = Object.prototype.hasOwnProperty, jn = e.unstable_scheduleCallback, Yt = e.unstable_cancelCallback, Nn = e.unstable_shouldYield, rn = e.unstable_requestPaint, bn = e.unstable_now, $n = e.unstable_getCurrentPriorityLevel, Le = e.unstable_ImmediatePriority, We = e.unstable_UserBlockingPriority, at = e.unstable_NormalPriority, Ct = e.unstable_LowPriority, Rt = e.unstable_IdlePriority, In = e.log, Rn = e.unstable_setDisableYieldValue, bt = null, $t = null;
  function Ln(s) {
    if (typeof In == "function" && Rn(s), $t && typeof $t.setStrictMode == "function")
      try {
        $t.setStrictMode(bt, s);
      } catch {
      }
  }
  var nt = Math.clz32 ? Math.clz32 : Yo, Br = Math.log, mr = Math.LN2;
  function Yo(s) {
    return s >>>= 0, s === 0 ? 32 : 31 - (Br(s) / mr | 0) | 0;
  }
  var lt = 256, ia = 262144, Na = 4194304;
  function Qi(s) {
    var l = s & 42;
    if (l !== 0) return l;
    switch (s & -s) {
      case 1:
        return 1;
      case 2:
        return 2;
      case 4:
        return 4;
      case 8:
        return 8;
      case 16:
        return 16;
      case 32:
        return 32;
      case 64:
        return 64;
      case 128:
        return 128;
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
        return s & 261888;
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
        return s & 3932160;
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        return s & 62914560;
      case 67108864:
        return 67108864;
      case 134217728:
        return 134217728;
      case 268435456:
        return 268435456;
      case 536870912:
        return 536870912;
      case 1073741824:
        return 0;
      default:
        return s;
    }
  }
  function io(s, l, d) {
    var y = s.pendingLanes;
    if (y === 0) return 0;
    var S = 0, j = s.suspendedLanes, L = s.pingedLanes;
    s = s.warmLanes;
    var ee = y & 134217727;
    return ee !== 0 ? (y = ee & ~j, y !== 0 ? S = Qi(y) : (L &= ee, L !== 0 ? S = Qi(L) : d || (d = ee & ~s, d !== 0 && (S = Qi(d))))) : (ee = y & ~j, ee !== 0 ? S = Qi(ee) : L !== 0 ? S = Qi(L) : d || (d = y & ~s, d !== 0 && (S = Qi(d)))), S === 0 ? 0 : l !== 0 && l !== S && (l & j) === 0 && (j = S & -S, d = l & -l, j >= d || j === 32 && (d & 4194048) !== 0) ? l : S;
  }
  function sa(s, l) {
    return (s.pendingLanes & ~(s.suspendedLanes & ~s.pingedLanes) & l) === 0;
  }
  function mf(s, l) {
    switch (s) {
      case 1:
      case 2:
      case 4:
      case 8:
      case 64:
        return l + 250;
      case 16:
      case 32:
      case 128:
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
        return l + 5e3;
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        return -1;
      case 67108864:
      case 134217728:
      case 268435456:
      case 536870912:
      case 1073741824:
        return -1;
      default:
        return -1;
    }
  }
  function Xl() {
    var s = Na;
    return Na <<= 1, (Na & 62914560) === 0 && (Na = 4194304), s;
  }
  function _s(s) {
    for (var l = [], d = 0; 31 > d; d++) l.push(s);
    return l;
  }
  function Mi(s, l) {
    s.pendingLanes |= l, l !== 268435456 && (s.suspendedLanes = 0, s.pingedLanes = 0, s.warmLanes = 0);
  }
  function Ql(s, l, d, y, S, j) {
    var L = s.pendingLanes;
    s.pendingLanes = d, s.suspendedLanes = 0, s.pingedLanes = 0, s.warmLanes = 0, s.expiredLanes &= d, s.entangledLanes &= d, s.errorRecoveryDisabledLanes &= d, s.shellSuspendCounter = 0;
    var ee = s.entanglements, xe = s.expirationTimes, De = s.hiddenUpdates;
    for (d = L & ~d; 0 < d; ) {
      var Fe = 31 - nt(d), Ge = 1 << Fe;
      ee[Fe] = 0, xe[Fe] = -1;
      var Pe = De[Fe];
      if (Pe !== null)
        for (De[Fe] = null, Fe = 0; Fe < Pe.length; Fe++) {
          var Be = Pe[Fe];
          Be !== null && (Be.lane &= -536870913);
        }
      d &= ~Ge;
    }
    y !== 0 && aa(s, y, 0), j !== 0 && S === 0 && s.tag !== 0 && (s.suspendedLanes |= j & ~(L & ~l));
  }
  function aa(s, l, d) {
    s.pendingLanes |= l, s.suspendedLanes &= ~l;
    var y = 31 - nt(l);
    s.entangledLanes |= l, s.entanglements[y] = s.entanglements[y] | 1073741824 | d & 261930;
  }
  function wn(s, l) {
    var d = s.entangledLanes |= l;
    for (s = s.entanglements; d; ) {
      var y = 31 - nt(d), S = 1 << y;
      S & l | s[y] & l && (s[y] |= l), d &= ~S;
    }
  }
  function Fn(s, l) {
    var d = l & -l;
    return d = (d & 42) !== 0 ? 1 : Jl(d), (d & (s.suspendedLanes | l)) !== 0 ? 0 : d;
  }
  function Jl(s) {
    switch (s) {
      case 2:
        s = 1;
        break;
      case 8:
        s = 4;
        break;
      case 32:
        s = 16;
        break;
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        s = 128;
        break;
      case 268435456:
        s = 134217728;
        break;
      default:
        s = 0;
    }
    return s;
  }
  function Ra(s) {
    return s &= -s, 2 < s ? 8 < s ? (s & 134217727) !== 0 ? 32 : 268435456 : 8 : 2;
  }
  function so() {
    var s = oe.p;
    return s !== 0 ? s : (s = window.event, s === void 0 ? 32 : h1(s.type));
  }
  function ao(s, l) {
    var d = oe.p;
    try {
      return oe.p = s, l();
    } finally {
      oe.p = d;
    }
  }
  var Ss = Math.random().toString(36).slice(2), Cn = "__reactFiber$" + Ss, er = "__reactProps$" + Ss, qr = "__reactContainer$" + Ss, Cs = "__reactEvents$" + Ss, Gu = "__reactListeners$" + Ss, Es = "__reactHandles$" + Ss, eu = "__reactResources$" + Ss, bi = "__reactMarker$" + Ss;
  function Wo(s) {
    delete s[Cn], delete s[er], delete s[Cs], delete s[Gu], delete s[Es];
  }
  function ks(s) {
    var l = s[Cn];
    if (l) return l;
    for (var d = s.parentNode; d; ) {
      if (l = d[qr] || d[Cn]) {
        if (d = l.alternate, l.child !== null || d !== null && d.child !== null)
          for (s = Zv(s); s !== null; ) {
            if (d = s[Cn]) return d;
            s = Zv(s);
          }
        return l;
      }
      s = d, d = s.parentNode;
    }
    return null;
  }
  function cn(s) {
    if (s = s[Cn] || s[qr]) {
      var l = s.tag;
      if (l === 5 || l === 6 || l === 13 || l === 31 || l === 26 || l === 27 || l === 3)
        return s;
    }
    return null;
  }
  function di(s) {
    var l = s.tag;
    if (l === 5 || l === 26 || l === 27 || l === 6) return s.stateNode;
    throw Error(r(33));
  }
  function gr(s) {
    var l = s[eu];
    return l || (l = s[eu] = { hoistableStyles: /* @__PURE__ */ new Map(), hoistableScripts: /* @__PURE__ */ new Map() }), l;
  }
  function tr(s) {
    s[bi] = !0;
  }
  var oa = /* @__PURE__ */ new Set(), oo = {};
  function Oi(s, l) {
    Ji(s, l), Ji(s + "Capture", l);
  }
  function Ji(s, l) {
    for (oo[s] = l, s = 0; s < l.length; s++)
      oa.add(l[s]);
  }
  var Ts = RegExp(
    "^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"
  ), Zo = {}, lo = {};
  function Ku(s) {
    return An.call(lo, s) ? !0 : An.call(Zo, s) ? !1 : Ts.test(s) ? lo[s] = !0 : (Zo[s] = !0, !1);
  }
  function Ft(s, l, d) {
    if (Ku(l))
      if (d === null) s.removeAttribute(l);
      else {
        switch (typeof d) {
          case "undefined":
          case "function":
          case "symbol":
            s.removeAttribute(l);
            return;
          case "boolean":
            var y = l.toLowerCase().slice(0, 5);
            if (y !== "data-" && y !== "aria-") {
              s.removeAttribute(l);
              return;
            }
        }
        s.setAttribute(l, "" + d);
      }
  }
  function Ma(s, l, d) {
    if (d === null) s.removeAttribute(l);
    else {
      switch (typeof d) {
        case "undefined":
        case "function":
        case "symbol":
        case "boolean":
          s.removeAttribute(l);
          return;
      }
      s.setAttribute(l, "" + d);
    }
  }
  function wi(s, l, d, y) {
    if (y === null) s.removeAttribute(d);
    else {
      switch (typeof y) {
        case "undefined":
        case "function":
        case "symbol":
        case "boolean":
          s.removeAttribute(d);
          return;
      }
      s.setAttributeNS(l, d, "" + y);
    }
  }
  function Cr(s) {
    switch (typeof s) {
      case "bigint":
      case "boolean":
      case "number":
      case "string":
      case "undefined":
        return s;
      case "object":
        return s;
      default:
        return "";
    }
  }
  function As(s) {
    var l = s.type;
    return (s = s.nodeName) && s.toLowerCase() === "input" && (l === "checkbox" || l === "radio");
  }
  function Yu(s, l, d) {
    var y = Object.getOwnPropertyDescriptor(
      s.constructor.prototype,
      l
    );
    if (!s.hasOwnProperty(l) && typeof y < "u" && typeof y.get == "function" && typeof y.set == "function") {
      var S = y.get, j = y.set;
      return Object.defineProperty(s, l, {
        configurable: !0,
        get: function() {
          return S.call(this);
        },
        set: function(L) {
          d = "" + L, j.call(this, L);
        }
      }), Object.defineProperty(s, l, {
        enumerable: y.enumerable
      }), {
        getValue: function() {
          return d;
        },
        setValue: function(L) {
          d = "" + L;
        },
        stopTracking: function() {
          s._valueTracker = null, delete s[l];
        }
      };
    }
  }
  function js(s) {
    if (!s._valueTracker) {
      var l = As(s) ? "checked" : "value";
      s._valueTracker = Yu(
        s,
        l,
        "" + s[l]
      );
    }
  }
  function Oa(s) {
    if (!s) return !1;
    var l = s._valueTracker;
    if (!l) return !0;
    var d = l.getValue(), y = "";
    return s && (y = As(s) ? s.checked ? "true" : "false" : s.value), s = y, s !== d ? (l.setValue(s), !0) : !1;
  }
  function sn(s) {
    if (s = s || (typeof document < "u" ? document : void 0), typeof s > "u") return null;
    try {
      return s.activeElement || s.body;
    } catch {
      return s.body;
    }
  }
  var uo = /[\n"\\]/g;
  function yr(s) {
    return s.replace(
      uo,
      function(l) {
        return "\\" + l.charCodeAt(0).toString(16) + " ";
      }
    );
  }
  function _i(s, l, d, y, S, j, L, ee) {
    s.name = "", L != null && typeof L != "function" && typeof L != "symbol" && typeof L != "boolean" ? s.type = L : s.removeAttribute("type"), l != null ? L === "number" ? (l === 0 && s.value === "" || s.value != l) && (s.value = "" + Cr(l)) : s.value !== "" + Cr(l) && (s.value = "" + Cr(l)) : L !== "submit" && L !== "reset" || s.removeAttribute("value"), l != null ? co(s, L, Cr(l)) : d != null ? co(s, L, Cr(d)) : y != null && s.removeAttribute("value"), S == null && j != null && (s.defaultChecked = !!j), S != null && (s.checked = S && typeof S != "function" && typeof S != "symbol"), ee != null && typeof ee != "function" && typeof ee != "symbol" && typeof ee != "boolean" ? s.name = "" + Cr(ee) : s.removeAttribute("name");
  }
  function Da(s, l, d, y, S, j, L, ee) {
    if (j != null && typeof j != "function" && typeof j != "symbol" && typeof j != "boolean" && (s.type = j), l != null || d != null) {
      if (!(j !== "submit" && j !== "reset" || l != null)) {
        js(s);
        return;
      }
      d = d != null ? "" + Cr(d) : "", l = l != null ? "" + Cr(l) : d, ee || l === s.value || (s.value = l), s.defaultValue = l;
    }
    y = y ?? S, y = typeof y != "function" && typeof y != "symbol" && !!y, s.checked = ee ? s.checked : !!y, s.defaultChecked = !!y, L != null && typeof L != "function" && typeof L != "symbol" && typeof L != "boolean" && (s.name = L), js(s);
  }
  function co(s, l, d) {
    l === "number" && sn(s.ownerDocument) === s || s.defaultValue === "" + d || (s.defaultValue = "" + d);
  }
  function Si(s, l, d, y) {
    if (s = s.options, l) {
      l = {};
      for (var S = 0; S < d.length; S++)
        l["$" + d[S]] = !0;
      for (d = 0; d < s.length; d++)
        S = l.hasOwnProperty("$" + s[d].value), s[d].selected !== S && (s[d].selected = S), S && y && (s[d].defaultSelected = !0);
    } else {
      for (d = "" + Cr(d), l = null, S = 0; S < s.length; S++) {
        if (s[S].value === d) {
          s[S].selected = !0, y && (s[S].defaultSelected = !0);
          return;
        }
        l !== null || s[S].disabled || (l = s[S]);
      }
      l !== null && (l.selected = !0);
    }
  }
  function tu(s, l, d) {
    if (l != null && (l = "" + Cr(l), l !== s.value && (s.value = l), d == null)) {
      s.defaultValue !== l && (s.defaultValue = l);
      return;
    }
    s.defaultValue = d != null ? "" + Cr(d) : "";
  }
  function fo(s, l, d, y) {
    if (l == null) {
      if (y != null) {
        if (d != null) throw Error(r(92));
        if (le(y)) {
          if (1 < y.length) throw Error(r(93));
          y = y[0];
        }
        d = y;
      }
      d == null && (d = ""), l = d;
    }
    d = Cr(l), s.defaultValue = d, y = s.textContent, y === d && y !== "" && y !== null && (s.value = y), js(s);
  }
  function Di(s, l) {
    if (l) {
      var d = s.firstChild;
      if (d && d === s.lastChild && d.nodeType === 3) {
        d.nodeValue = l;
        return;
      }
    }
    s.textContent = l;
  }
  var dh = new Set(
    "animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(
      " "
    )
  );
  function en(s, l, d) {
    var y = l.indexOf("--") === 0;
    d == null || typeof d == "boolean" || d === "" ? y ? s.setProperty(l, "") : l === "float" ? s.cssFloat = "" : s[l] = "" : y ? s.setProperty(l, d) : typeof d != "number" || d === 0 || dh.has(l) ? l === "float" ? s.cssFloat = d : s[l] = ("" + d).trim() : s[l] = d + "px";
  }
  function gf(s, l, d) {
    if (l != null && typeof l != "object")
      throw Error(r(62));
    if (s = s.style, d != null) {
      for (var y in d)
        !d.hasOwnProperty(y) || l != null && l.hasOwnProperty(y) || (y.indexOf("--") === 0 ? s.setProperty(y, "") : y === "float" ? s.cssFloat = "" : s[y] = "");
      for (var S in l)
        y = l[S], l.hasOwnProperty(S) && d[S] !== y && en(s, S, y);
    } else
      for (var j in l)
        l.hasOwnProperty(j) && en(s, j, l[j]);
  }
  function Wu(s) {
    if (s.indexOf("-") === -1) return !1;
    switch (s) {
      case "annotation-xml":
      case "color-profile":
      case "font-face":
      case "font-face-src":
      case "font-face-uri":
      case "font-face-format":
      case "font-face-name":
      case "missing-glyph":
        return !1;
      default:
        return !0;
    }
  }
  var hh = /* @__PURE__ */ new Map([
    ["acceptCharset", "accept-charset"],
    ["htmlFor", "for"],
    ["httpEquiv", "http-equiv"],
    ["crossOrigin", "crossorigin"],
    ["accentHeight", "accent-height"],
    ["alignmentBaseline", "alignment-baseline"],
    ["arabicForm", "arabic-form"],
    ["baselineShift", "baseline-shift"],
    ["capHeight", "cap-height"],
    ["clipPath", "clip-path"],
    ["clipRule", "clip-rule"],
    ["colorInterpolation", "color-interpolation"],
    ["colorInterpolationFilters", "color-interpolation-filters"],
    ["colorProfile", "color-profile"],
    ["colorRendering", "color-rendering"],
    ["dominantBaseline", "dominant-baseline"],
    ["enableBackground", "enable-background"],
    ["fillOpacity", "fill-opacity"],
    ["fillRule", "fill-rule"],
    ["floodColor", "flood-color"],
    ["floodOpacity", "flood-opacity"],
    ["fontFamily", "font-family"],
    ["fontSize", "font-size"],
    ["fontSizeAdjust", "font-size-adjust"],
    ["fontStretch", "font-stretch"],
    ["fontStyle", "font-style"],
    ["fontVariant", "font-variant"],
    ["fontWeight", "font-weight"],
    ["glyphName", "glyph-name"],
    ["glyphOrientationHorizontal", "glyph-orientation-horizontal"],
    ["glyphOrientationVertical", "glyph-orientation-vertical"],
    ["horizAdvX", "horiz-adv-x"],
    ["horizOriginX", "horiz-origin-x"],
    ["imageRendering", "image-rendering"],
    ["letterSpacing", "letter-spacing"],
    ["lightingColor", "lighting-color"],
    ["markerEnd", "marker-end"],
    ["markerMid", "marker-mid"],
    ["markerStart", "marker-start"],
    ["overlinePosition", "overline-position"],
    ["overlineThickness", "overline-thickness"],
    ["paintOrder", "paint-order"],
    ["panose-1", "panose-1"],
    ["pointerEvents", "pointer-events"],
    ["renderingIntent", "rendering-intent"],
    ["shapeRendering", "shape-rendering"],
    ["stopColor", "stop-color"],
    ["stopOpacity", "stop-opacity"],
    ["strikethroughPosition", "strikethrough-position"],
    ["strikethroughThickness", "strikethrough-thickness"],
    ["strokeDasharray", "stroke-dasharray"],
    ["strokeDashoffset", "stroke-dashoffset"],
    ["strokeLinecap", "stroke-linecap"],
    ["strokeLinejoin", "stroke-linejoin"],
    ["strokeMiterlimit", "stroke-miterlimit"],
    ["strokeOpacity", "stroke-opacity"],
    ["strokeWidth", "stroke-width"],
    ["textAnchor", "text-anchor"],
    ["textDecoration", "text-decoration"],
    ["textRendering", "text-rendering"],
    ["transformOrigin", "transform-origin"],
    ["underlinePosition", "underline-position"],
    ["underlineThickness", "underline-thickness"],
    ["unicodeBidi", "unicode-bidi"],
    ["unicodeRange", "unicode-range"],
    ["unitsPerEm", "units-per-em"],
    ["vAlphabetic", "v-alphabetic"],
    ["vHanging", "v-hanging"],
    ["vIdeographic", "v-ideographic"],
    ["vMathematical", "v-mathematical"],
    ["vectorEffect", "vector-effect"],
    ["vertAdvY", "vert-adv-y"],
    ["vertOriginX", "vert-origin-x"],
    ["vertOriginY", "vert-origin-y"],
    ["wordSpacing", "word-spacing"],
    ["writingMode", "writing-mode"],
    ["xmlnsXlink", "xmlns:xlink"],
    ["xHeight", "x-height"]
  ]), hi = /^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;
  function Ns(s) {
    return hi.test("" + s) ? "javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')" : s;
  }
  function zi() {
  }
  var Rs = null;
  function Zu(s) {
    return s = s.target || s.srcElement || window, s.correspondingUseElement && (s = s.correspondingUseElement), s.nodeType === 3 ? s.parentNode : s;
  }
  var za = null, Un = null;
  function es(s) {
    var l = cn(s);
    if (l && (s = l.stateNode)) {
      var d = s[er] || null;
      e: switch (s = l.stateNode, l.type) {
        case "input":
          if (_i(
            s,
            d.value,
            d.defaultValue,
            d.defaultValue,
            d.checked,
            d.defaultChecked,
            d.type,
            d.name
          ), l = d.name, d.type === "radio" && l != null) {
            for (d = s; d.parentNode; ) d = d.parentNode;
            for (d = d.querySelectorAll(
              'input[name="' + yr(
                "" + l
              ) + '"][type="radio"]'
            ), l = 0; l < d.length; l++) {
              var y = d[l];
              if (y !== s && y.form === s.form) {
                var S = y[er] || null;
                if (!S) throw Error(r(90));
                _i(
                  y,
                  S.value,
                  S.defaultValue,
                  S.defaultValue,
                  S.checked,
                  S.defaultChecked,
                  S.type,
                  S.name
                );
              }
            }
            for (l = 0; l < d.length; l++)
              y = d[l], y.form === s.form && Oa(y);
          }
          break e;
        case "textarea":
          tu(s, d.value, d.defaultValue);
          break e;
        case "select":
          l = d.value, l != null && Si(s, !!d.multiple, l, !1);
      }
    }
  }
  var ho = !1;
  function Xo(s, l, d) {
    if (ho) return s(l, d);
    ho = !0;
    try {
      var y = s(l);
      return y;
    } finally {
      if (ho = !1, (za !== null || Un !== null) && (np(), za && (l = za, s = Un, Un = za = null, es(l), s)))
        for (l = 0; l < s.length; l++) es(s[l]);
    }
  }
  function la(s, l) {
    var d = s.stateNode;
    if (d === null) return null;
    var y = d[er] || null;
    if (y === null) return null;
    d = y[l];
    e: switch (l) {
      case "onClick":
      case "onClickCapture":
      case "onDoubleClick":
      case "onDoubleClickCapture":
      case "onMouseDown":
      case "onMouseDownCapture":
      case "onMouseMove":
      case "onMouseMoveCapture":
      case "onMouseUp":
      case "onMouseUpCapture":
      case "onMouseEnter":
        (y = !y.disabled) || (s = s.type, y = !(s === "button" || s === "input" || s === "select" || s === "textarea")), s = !y;
        break e;
      default:
        s = !1;
    }
    if (s) return null;
    if (d && typeof d != "function")
      throw Error(
        r(231, l, typeof d)
      );
    return d;
  }
  var $r = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u"), yf = !1;
  if ($r)
    try {
      var pi = {};
      Object.defineProperty(pi, "passive", {
        get: function() {
          yf = !0;
        }
      }), window.addEventListener("test", pi, pi), window.removeEventListener("test", pi, pi);
    } catch {
      yf = !1;
    }
  var Ms = null, Xu = null, hn = null;
  function fn() {
    if (hn) return hn;
    var s, l = Xu, d = l.length, y, S = "value" in Ms ? Ms.value : Ms.textContent, j = S.length;
    for (s = 0; s < d && l[s] === S[s]; s++) ;
    var L = d - s;
    for (y = 1; y <= L && l[d - y] === S[j - y]; y++) ;
    return hn = S.slice(s, 1 < y ? 1 - y : void 0);
  }
  function Qo(s) {
    var l = s.keyCode;
    return "charCode" in s ? (s = s.charCode, s === 0 && l === 13 && (s = 13)) : s = l, s === 10 && (s = 13), 32 <= s || s === 13 ? s : 0;
  }
  function nu() {
    return !0;
  }
  function ph() {
    return !1;
  }
  function Er(s) {
    function l(d, y, S, j, L) {
      this._reactName = d, this._targetInst = S, this.type = y, this.nativeEvent = j, this.target = L, this.currentTarget = null;
      for (var ee in s)
        s.hasOwnProperty(ee) && (d = s[ee], this[ee] = d ? d(j) : j[ee]);
      return this.isDefaultPrevented = (j.defaultPrevented != null ? j.defaultPrevented : j.returnValue === !1) ? nu : ph, this.isPropagationStopped = ph, this;
    }
    return g(l.prototype, {
      preventDefault: function() {
        this.defaultPrevented = !0;
        var d = this.nativeEvent;
        d && (d.preventDefault ? d.preventDefault() : typeof d.returnValue != "unknown" && (d.returnValue = !1), this.isDefaultPrevented = nu);
      },
      stopPropagation: function() {
        var d = this.nativeEvent;
        d && (d.stopPropagation ? d.stopPropagation() : typeof d.cancelBubble != "unknown" && (d.cancelBubble = !0), this.isPropagationStopped = nu);
      },
      persist: function() {
      },
      isPersistent: nu
    }), l;
  }
  var po = {
    eventPhase: 0,
    bubbles: 0,
    cancelable: 0,
    timeStamp: function(s) {
      return s.timeStamp || Date.now();
    },
    defaultPrevented: 0,
    isTrusted: 0
  }, Qu = Er(po), ua = g({}, po, { view: 0, detail: 0 }), Ju = Er(ua), nr, ru, ts, iu = g({}, ua, {
    screenX: 0,
    screenY: 0,
    clientX: 0,
    clientY: 0,
    pageX: 0,
    pageY: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    getModifierState: ca,
    button: 0,
    buttons: 0,
    relatedTarget: function(s) {
      return s.relatedTarget === void 0 ? s.fromElement === s.srcElement ? s.toElement : s.fromElement : s.relatedTarget;
    },
    movementX: function(s) {
      return "movementX" in s ? s.movementX : (s !== ts && (ts && s.type === "mousemove" ? (nr = s.screenX - ts.screenX, ru = s.screenY - ts.screenY) : ru = nr = 0, ts = s), nr);
    },
    movementY: function(s) {
      return "movementY" in s ? s.movementY : ru;
    }
  }), Jo = Er(iu), mi = g({}, iu, { dataTransfer: 0 }), vf = Er(mi), su = g({}, ua, { relatedTarget: 0 }), mo = Er(su), au = g({}, po, {
    animationName: 0,
    elapsedTime: 0,
    pseudoElement: 0
  }), xf = Er(au), mh = g({}, po, {
    clipboardData: function(s) {
      return "clipboardData" in s ? s.clipboardData : window.clipboardData;
    }
  }), kr = Er(mh), bf = g({}, po, { data: 0 }), Qr = Er(bf), wf = {
    Esc: "Escape",
    Spacebar: " ",
    Left: "ArrowLeft",
    Up: "ArrowUp",
    Right: "ArrowRight",
    Down: "ArrowDown",
    Del: "Delete",
    Win: "OS",
    Menu: "ContextMenu",
    Apps: "ContextMenu",
    Scroll: "ScrollLock",
    MozPrintableKey: "Unidentified"
  }, ec = {
    8: "Backspace",
    9: "Tab",
    12: "Clear",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    19: "Pause",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    45: "Insert",
    46: "Delete",
    112: "F1",
    113: "F2",
    114: "F3",
    115: "F4",
    116: "F5",
    117: "F6",
    118: "F7",
    119: "F8",
    120: "F9",
    121: "F10",
    122: "F11",
    123: "F12",
    144: "NumLock",
    145: "ScrollLock",
    224: "Meta"
  }, Vn = {
    Alt: "altKey",
    Control: "ctrlKey",
    Meta: "metaKey",
    Shift: "shiftKey"
  };
  function Pa(s) {
    var l = this.nativeEvent;
    return l.getModifierState ? l.getModifierState(s) : (s = Vn[s]) ? !!l[s] : !1;
  }
  function ca() {
    return Pa;
  }
  var Mn = g({}, ua, {
    key: function(s) {
      if (s.key) {
        var l = wf[s.key] || s.key;
        if (l !== "Unidentified") return l;
      }
      return s.type === "keypress" ? (s = Qo(s), s === 13 ? "Enter" : String.fromCharCode(s)) : s.type === "keydown" || s.type === "keyup" ? ec[s.keyCode] || "Unidentified" : "";
    },
    code: 0,
    location: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    repeat: 0,
    locale: 0,
    getModifierState: ca,
    charCode: function(s) {
      return s.type === "keypress" ? Qo(s) : 0;
    },
    keyCode: function(s) {
      return s.type === "keydown" || s.type === "keyup" ? s.keyCode : 0;
    },
    which: function(s) {
      return s.type === "keypress" ? Qo(s) : s.type === "keydown" || s.type === "keyup" ? s.keyCode : 0;
    }
  }), ns = Er(Mn), tc = g({}, iu, {
    pointerId: 0,
    width: 0,
    height: 0,
    pressure: 0,
    tangentialPressure: 0,
    tiltX: 0,
    tiltY: 0,
    twist: 0,
    pointerType: 0,
    isPrimary: 0
  }), _f = Er(tc), el = g({}, ua, {
    touches: 0,
    targetTouches: 0,
    changedTouches: 0,
    altKey: 0,
    metaKey: 0,
    ctrlKey: 0,
    shiftKey: 0,
    getModifierState: ca
  }), Sf = Er(el), go = g({}, po, {
    propertyName: 0,
    elapsedTime: 0,
    pseudoElement: 0
  }), Cf = Er(go), nc = g({}, iu, {
    deltaX: function(s) {
      return "deltaX" in s ? s.deltaX : "wheelDeltaX" in s ? -s.wheelDeltaX : 0;
    },
    deltaY: function(s) {
      return "deltaY" in s ? s.deltaY : "wheelDeltaY" in s ? -s.wheelDeltaY : "wheelDelta" in s ? -s.wheelDelta : 0;
    },
    deltaZ: 0,
    deltaMode: 0
  }), yo = Er(nc), Ia = g({}, po, {
    newState: 0,
    oldState: 0
  }), gh = Er(Ia), yh = [9, 13, 27, 32], tl = $r && "CompositionEvent" in window, Os = null;
  $r && "documentMode" in document && (Os = document.documentMode);
  var Ef = $r && "TextEvent" in window && !Os, ou = $r && (!tl || Os && 8 < Os && 11 >= Os), rc = " ", ic = !1;
  function lu(s, l) {
    switch (s) {
      case "keyup":
        return yh.indexOf(l.keyCode) !== -1;
      case "keydown":
        return l.keyCode !== 229;
      case "keypress":
      case "mousedown":
      case "focusout":
        return !0;
      default:
        return !1;
    }
  }
  function vh(s) {
    return s = s.detail, typeof s == "object" && "data" in s ? s.data : null;
  }
  var La = !1;
  function gi(s, l) {
    switch (s) {
      case "compositionend":
        return vh(l);
      case "keypress":
        return l.which !== 32 ? null : (ic = !0, rc);
      case "textInput":
        return s = l.data, s === rc && ic ? null : s;
      default:
        return null;
    }
  }
  function kf(s, l) {
    if (La)
      return s === "compositionend" || !tl && lu(s, l) ? (s = fn(), hn = Xu = Ms = null, La = !1, s) : null;
    switch (s) {
      case "paste":
        return null;
      case "keypress":
        if (!(l.ctrlKey || l.altKey || l.metaKey) || l.ctrlKey && l.altKey) {
          if (l.char && 1 < l.char.length)
            return l.char;
          if (l.which) return String.fromCharCode(l.which);
        }
        return null;
      case "compositionend":
        return ou && l.locale !== "ko" ? null : l.data;
      default:
        return null;
    }
  }
  var nl = {
    color: !0,
    date: !0,
    datetime: !0,
    "datetime-local": !0,
    email: !0,
    month: !0,
    number: !0,
    password: !0,
    range: !0,
    search: !0,
    tel: !0,
    text: !0,
    time: !0,
    url: !0,
    week: !0
  };
  function uu(s) {
    var l = s && s.nodeName && s.nodeName.toLowerCase();
    return l === "input" ? !!nl[s.type] : l === "textarea";
  }
  function sc(s, l, d, y) {
    za ? Un ? Un.push(y) : Un = [y] : za = y, l = vd(l, "onChange"), 0 < l.length && (d = new Qu(
      "onChange",
      "change",
      null,
      d,
      y
    ), s.push({ event: d, listeners: l }));
  }
  var rl = null, cu = null;
  function jm(s) {
    $v(s, 0);
  }
  function ac(s) {
    var l = di(s);
    if (Oa(l)) return s;
  }
  function fu(s, l) {
    if (s === "change") return l;
  }
  var Jr = !1;
  if ($r) {
    var Hn;
    if ($r) {
      var il = "oninput" in document;
      if (!il) {
        var ei = document.createElement("div");
        ei.setAttribute("oninput", "return;"), il = typeof ei.oninput == "function";
      }
      Hn = il;
    } else Hn = !1;
    Jr = Hn && (!document.documentMode || 9 < document.documentMode);
  }
  function Tf() {
    rl && (rl.detachEvent("onpropertychange", rs), cu = rl = null);
  }
  function rs(s) {
    if (s.propertyName === "value" && ac(cu)) {
      var l = [];
      sc(
        l,
        cu,
        s,
        Zu(s)
      ), Xo(jm, l);
    }
  }
  function du(s, l, d) {
    s === "focusin" ? (Tf(), rl = l, cu = d, rl.attachEvent("onpropertychange", rs)) : s === "focusout" && Tf();
  }
  function vo(s) {
    if (s === "selectionchange" || s === "keyup" || s === "keydown")
      return ac(cu);
  }
  function Af(s, l) {
    if (s === "click") return ac(l);
  }
  function sl(s, l) {
    if (s === "input" || s === "change")
      return ac(l);
  }
  function Ci(s, l) {
    return s === l && (s !== 0 || 1 / s === 1 / l) || s !== s && l !== l;
  }
  var Bn = typeof Object.is == "function" ? Object.is : Ci;
  function w(s, l) {
    if (Bn(s, l)) return !0;
    if (typeof s != "object" || s === null || typeof l != "object" || l === null)
      return !1;
    var d = Object.keys(s), y = Object.keys(l);
    if (d.length !== y.length) return !1;
    for (y = 0; y < d.length; y++) {
      var S = d[y];
      if (!An.call(l, S) || !Bn(s[S], l[S]))
        return !1;
    }
    return !0;
  }
  function A(s) {
    for (; s && s.firstChild; ) s = s.firstChild;
    return s;
  }
  function M(s, l) {
    var d = A(s);
    s = 0;
    for (var y; d; ) {
      if (d.nodeType === 3) {
        if (y = s + d.textContent.length, s <= l && y >= l)
          return { node: d, offset: l - s };
        s = y;
      }
      e: {
        for (; d; ) {
          if (d.nextSibling) {
            d = d.nextSibling;
            break e;
          }
          d = d.parentNode;
        }
        d = void 0;
      }
      d = A(d);
    }
  }
  function I(s, l) {
    return s && l ? s === l ? !0 : s && s.nodeType === 3 ? !1 : l && l.nodeType === 3 ? I(s, l.parentNode) : "contains" in s ? s.contains(l) : s.compareDocumentPosition ? !!(s.compareDocumentPosition(l) & 16) : !1 : !1;
  }
  function $(s) {
    s = s != null && s.ownerDocument != null && s.ownerDocument.defaultView != null ? s.ownerDocument.defaultView : window;
    for (var l = sn(s.document); l instanceof s.HTMLIFrameElement; ) {
      try {
        var d = typeof l.contentWindow.location.href == "string";
      } catch {
        d = !1;
      }
      if (d) s = l.contentWindow;
      else break;
      l = sn(s.document);
    }
    return l;
  }
  function Z(s) {
    var l = s && s.nodeName && s.nodeName.toLowerCase();
    return l && (l === "input" && (s.type === "text" || s.type === "search" || s.type === "tel" || s.type === "url" || s.type === "password") || l === "textarea" || s.contentEditable === "true");
  }
  var ue = $r && "documentMode" in document && 11 >= document.documentMode, U = null, ie = null, ne = null, ye = !1;
  function he(s, l, d) {
    var y = d.window === d ? d.document : d.nodeType === 9 ? d : d.ownerDocument;
    ye || U == null || U !== sn(y) || (y = U, "selectionStart" in y && Z(y) ? y = { start: y.selectionStart, end: y.selectionEnd } : (y = (y.ownerDocument && y.ownerDocument.defaultView || window).getSelection(), y = {
      anchorNode: y.anchorNode,
      anchorOffset: y.anchorOffset,
      focusNode: y.focusNode,
      focusOffset: y.focusOffset
    }), ne && w(ne, y) || (ne = y, y = vd(ie, "onSelect"), 0 < y.length && (l = new Qu(
      "onSelect",
      "select",
      null,
      l,
      d
    ), s.push({ event: l, listeners: y }), l.target = U)));
  }
  function Se(s, l) {
    var d = {};
    return d[s.toLowerCase()] = l.toLowerCase(), d["Webkit" + s] = "webkit" + l, d["Moz" + s] = "moz" + l, d;
  }
  var be = {
    animationend: Se("Animation", "AnimationEnd"),
    animationiteration: Se("Animation", "AnimationIteration"),
    animationstart: Se("Animation", "AnimationStart"),
    transitionrun: Se("Transition", "TransitionRun"),
    transitionstart: Se("Transition", "TransitionStart"),
    transitioncancel: Se("Transition", "TransitionCancel"),
    transitionend: Se("Transition", "TransitionEnd")
  }, _e = {}, ke = {};
  $r && (ke = document.createElement("div").style, "AnimationEvent" in window || (delete be.animationend.animation, delete be.animationiteration.animation, delete be.animationstart.animation), "TransitionEvent" in window || delete be.transitionend.transition);
  function Te(s) {
    if (_e[s]) return _e[s];
    if (!be[s]) return s;
    var l = be[s], d;
    for (d in l)
      if (l.hasOwnProperty(d) && d in ke)
        return _e[s] = l[d];
    return s;
  }
  var je = Te("animationend"), ze = Te("animationiteration"), $e = Te("animationstart"), Ve = Te("transitionrun"), et = Te("transitionstart"), st = Te("transitioncancel"), Ue = Te("transitionend"), it = /* @__PURE__ */ new Map(), ot = "abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(
    " "
  );
  ot.push("scrollEnd");
  function Qe(s, l) {
    it.set(s, l), Oi(l, [s]);
  }
  var gt = typeof reportError == "function" ? reportError : function(s) {
    if (typeof window == "object" && typeof window.ErrorEvent == "function") {
      var l = new window.ErrorEvent("error", {
        bubbles: !0,
        cancelable: !0,
        message: typeof s == "object" && s !== null && typeof s.message == "string" ? String(s.message) : String(s),
        error: s
      });
      if (!window.dispatchEvent(l)) return;
    } else if (typeof process == "object" && typeof process.emit == "function") {
      process.emit("uncaughtException", s);
      return;
    }
    console.error(s);
  }, Et = [], Pt = 0, Lt = 0;
  function Gn() {
    for (var s = Pt, l = Lt = Pt = 0; l < s; ) {
      var d = Et[l];
      Et[l++] = null;
      var y = Et[l];
      Et[l++] = null;
      var S = Et[l];
      Et[l++] = null;
      var j = Et[l];
      if (Et[l++] = null, y !== null && S !== null) {
        var L = y.pending;
        L === null ? S.next = S : (S.next = L.next, L.next = S), y.pending = S;
      }
      j !== 0 && al(d, S, j);
    }
  }
  function jt(s, l, d, y) {
    Et[Pt++] = s, Et[Pt++] = l, Et[Pt++] = d, Et[Pt++] = y, Lt |= y, s.lanes |= y, s = s.alternate, s !== null && (s.lanes |= y);
  }
  function vr(s, l, d, y) {
    return jt(s, l, d, y), xr(s);
  }
  function On(s, l) {
    return jt(s, null, null, l), xr(s);
  }
  function al(s, l, d) {
    s.lanes |= d;
    var y = s.alternate;
    y !== null && (y.lanes |= d);
    for (var S = !1, j = s.return; j !== null; )
      j.childLanes |= d, y = j.alternate, y !== null && (y.childLanes |= d), j.tag === 22 && (s = j.stateNode, s === null || s._visibility & 1 || (S = !0)), s = j, j = j.return;
    return s.tag === 3 ? (j = s.stateNode, S && l !== null && (S = 31 - nt(d), s = j.hiddenUpdates, y = s[S], y === null ? s[S] = [l] : y.push(l), l.lane = d | 536870912), j) : null;
  }
  function xr(s) {
    if (50 < fd)
      throw fd = 0, Ag = null, Error(r(185));
    for (var l = s.return; l !== null; )
      s = l, l = s.return;
    return s.tag === 3 ? s.stateNode : null;
  }
  var ti = {};
  function oc(s, l, d, y) {
    this.tag = s, this.key = d, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.refCleanup = this.ref = null, this.pendingProps = l, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = y, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null;
  }
  function ni(s, l, d, y) {
    return new oc(s, l, d, y);
  }
  function xo(s) {
    return s = s.prototype, !(!s || !s.isReactComponent);
  }
  function Ds(s, l) {
    var d = s.alternate;
    return d === null ? (d = ni(
      s.tag,
      l,
      s.key,
      s.mode
    ), d.elementType = s.elementType, d.type = s.type, d.stateNode = s.stateNode, d.alternate = s, s.alternate = d) : (d.pendingProps = l, d.type = s.type, d.flags = 0, d.subtreeFlags = 0, d.deletions = null), d.flags = s.flags & 65011712, d.childLanes = s.childLanes, d.lanes = s.lanes, d.child = s.child, d.memoizedProps = s.memoizedProps, d.memoizedState = s.memoizedState, d.updateQueue = s.updateQueue, l = s.dependencies, d.dependencies = l === null ? null : { lanes: l.lanes, firstContext: l.firstContext }, d.sibling = s.sibling, d.index = s.index, d.ref = s.ref, d.refCleanup = s.refCleanup, d;
  }
  function Py(s, l) {
    s.flags &= 65011714;
    var d = s.alternate;
    return d === null ? (s.childLanes = 0, s.lanes = l, s.child = null, s.subtreeFlags = 0, s.memoizedProps = null, s.memoizedState = null, s.updateQueue = null, s.dependencies = null, s.stateNode = null) : (s.childLanes = d.childLanes, s.lanes = d.lanes, s.child = d.child, s.subtreeFlags = 0, s.deletions = null, s.memoizedProps = d.memoizedProps, s.memoizedState = d.memoizedState, s.updateQueue = d.updateQueue, s.type = d.type, l = d.dependencies, s.dependencies = l === null ? null : {
      lanes: l.lanes,
      firstContext: l.firstContext
    }), s;
  }
  function xh(s, l, d, y, S, j) {
    var L = 0;
    if (y = s, typeof s == "function") xo(s) && (L = 1);
    else if (typeof s == "string")
      L = E2(
        s,
        d,
        ae.current
      ) ? 26 : s === "html" || s === "head" || s === "body" ? 27 : 5;
    else
      e: switch (s) {
        case Y:
          return s = ni(31, d, l, S), s.elementType = Y, s.lanes = j, s;
        case E:
          return hu(d.children, S, j, l);
        case k:
          L = 8, S |= 24;
          break;
        case T:
          return s = ni(12, d, l, S | 2), s.elementType = T, s.lanes = j, s;
        case P:
          return s = ni(13, d, l, S), s.elementType = P, s.lanes = j, s;
        case z:
          return s = ni(19, d, l, S), s.elementType = z, s.lanes = j, s;
        default:
          if (typeof s == "object" && s !== null)
            switch (s.$$typeof) {
              case N:
                L = 10;
                break e;
              case R:
                L = 9;
                break e;
              case O:
                L = 11;
                break e;
              case q:
                L = 14;
                break e;
              case G:
                L = 16, y = null;
                break e;
            }
          L = 29, d = Error(
            r(130, s === null ? "null" : typeof s, "")
          ), y = null;
      }
    return l = ni(L, d, l, S), l.elementType = s, l.type = y, l.lanes = j, l;
  }
  function hu(s, l, d, y) {
    return s = ni(7, s, y, l), s.lanes = d, s;
  }
  function lc(s, l, d) {
    return s = ni(6, s, null, l), s.lanes = d, s;
  }
  function jf(s) {
    var l = ni(18, null, null, 0);
    return l.stateNode = s, l;
  }
  function Nf(s, l, d) {
    return l = ni(
      4,
      s.children !== null ? s.children : [],
      s.key,
      l
    ), l.lanes = d, l.stateNode = {
      containerInfo: s.containerInfo,
      pendingChildren: null,
      implementation: s.implementation
    }, l;
  }
  var Iy = /* @__PURE__ */ new WeakMap();
  function is(s, l) {
    if (typeof s == "object" && s !== null) {
      var d = Iy.get(s);
      return d !== void 0 ? d : (l = {
        value: s,
        source: l,
        stack: qn(l)
      }, Iy.set(s, l), l);
    }
    return {
      value: s,
      source: l,
      stack: qn(l)
    };
  }
  var uc = [], cc = 0, ar = null, Tr = 0, zs = [], Ps = 0, bo = null, Ba = 1, Is = "";
  function ss(s, l) {
    uc[cc++] = Tr, uc[cc++] = ar, ar = s, Tr = l;
  }
  function bh(s, l, d) {
    zs[Ps++] = Ba, zs[Ps++] = Is, zs[Ps++] = bo, bo = s;
    var y = Ba;
    s = Is;
    var S = 32 - nt(y) - 1;
    y &= ~(1 << S), d += 1;
    var j = 32 - nt(l) + S;
    if (30 < j) {
      var L = S - S % 5;
      j = (y & (1 << L) - 1).toString(32), y >>= L, S -= L, Ba = 1 << 32 - nt(l) + S | d << S | y, Is = j + s;
    } else
      Ba = 1 << j | d << S | y, Is = s;
  }
  function ol(s) {
    s.return !== null && (ss(s, 1), bh(s, 1, 0));
  }
  function pu(s) {
    for (; s === ar; )
      ar = uc[--cc], uc[cc] = null, Tr = uc[--cc], uc[cc] = null;
    for (; s === bo; )
      bo = zs[--Ps], zs[Ps] = null, Is = zs[--Ps], zs[Ps] = null, Ba = zs[--Ps], zs[Ps] = null;
  }
  function fc(s, l) {
    zs[Ps++] = Ba, zs[Ps++] = Is, zs[Ps++] = bo, Ba = l.id, Is = l.overflow, bo = s;
  }
  var Ar = null, vn = null, an = !1, ll = null, Ls = !1, Nm = Error(r(519));
  function ul(s) {
    var l = Error(
      r(
        418,
        1 < arguments.length && arguments[1] !== void 0 && arguments[1] ? "text" : "HTML",
        ""
      )
    );
    throw fl(is(l, s)), Nm;
  }
  function Rf(s) {
    var l = s.stateNode, d = s.type, y = s.memoizedProps;
    switch (l[Cn] = s, l[er] = y, d) {
      case "dialog":
        Jt("cancel", l), Jt("close", l);
        break;
      case "iframe":
      case "object":
      case "embed":
        Jt("load", l);
        break;
      case "video":
      case "audio":
        for (d = 0; d < yd.length; d++)
          Jt(yd[d], l);
        break;
      case "source":
        Jt("error", l);
        break;
      case "img":
      case "image":
      case "link":
        Jt("error", l), Jt("load", l);
        break;
      case "details":
        Jt("toggle", l);
        break;
      case "input":
        Jt("invalid", l), Da(
          l,
          y.value,
          y.defaultValue,
          y.checked,
          y.defaultChecked,
          y.type,
          y.name,
          !0
        );
        break;
      case "select":
        Jt("invalid", l);
        break;
      case "textarea":
        Jt("invalid", l), fo(l, y.value, y.defaultValue, y.children);
    }
    d = y.children, typeof d != "string" && typeof d != "number" && typeof d != "bigint" || l.textContent === "" + d || y.suppressHydrationWarning === !0 || Vv(l.textContent, d) ? (y.popover != null && (Jt("beforetoggle", l), Jt("toggle", l)), y.onScroll != null && Jt("scroll", l), y.onScrollEnd != null && Jt("scrollend", l), y.onClick != null && (l.onclick = zi), l = !0) : l = !1, l || ul(s, !0);
  }
  function dc(s) {
    for (Ar = s.return; Ar; )
      switch (Ar.tag) {
        case 5:
        case 31:
        case 13:
          Ls = !1;
          return;
        case 27:
        case 3:
          Ls = !0;
          return;
        default:
          Ar = Ar.return;
      }
  }
  function mu(s) {
    if (s !== Ar) return !1;
    if (!an) return dc(s), an = !0, !1;
    var l = s.tag, d;
    if ((d = l !== 3 && l !== 27) && ((d = l === 5) && (d = s.type, d = !(d !== "form" && d !== "button") || Tl(s.type, s.memoizedProps)), d = !d), d && vn && ul(s), dc(s), l === 13) {
      if (s = s.memoizedState, s = s !== null ? s.dehydrated : null, !s) throw Error(r(317));
      vn = Wv(s);
    } else if (l === 31) {
      if (s = s.memoizedState, s = s !== null ? s.dehydrated : null, !s) throw Error(r(317));
      vn = Wv(s);
    } else
      l === 27 ? (l = vn, Ot(s.type) ? (s = Yg, Yg = null, vn = s) : vn = l) : vn = Ar ? Hs(s.stateNode.nextSibling) : null;
    return !0;
  }
  function te() {
    vn = Ar = null, an = !1;
  }
  function cl() {
    var s = ll;
    return s !== null && (Fi === null ? Fi = s : Fi.push.apply(
      Fi,
      s
    ), ll = null), s;
  }
  function fl(s) {
    ll === null ? ll = [s] : ll.push(s);
  }
  var Pi = re(null), Ut = null, wo = null;
  function dl(s, l, d) {
    V(Pi, l._currentValue), l._currentValue = d;
  }
  function _o(s) {
    s._currentValue = Pi.current, de(Pi);
  }
  function So(s, l, d) {
    for (; s !== null; ) {
      var y = s.alternate;
      if ((s.childLanes & l) !== l ? (s.childLanes |= l, y !== null && (y.childLanes |= l)) : y !== null && (y.childLanes & l) !== l && (y.childLanes |= l), s === d) break;
      s = s.return;
    }
  }
  function Rm(s, l, d, y) {
    var S = s.child;
    for (S !== null && (S.return = s); S !== null; ) {
      var j = S.dependencies;
      if (j !== null) {
        var L = S.child;
        j = j.firstContext;
        e: for (; j !== null; ) {
          var ee = j;
          j = S;
          for (var xe = 0; xe < l.length; xe++)
            if (ee.context === l[xe]) {
              j.lanes |= d, ee = j.alternate, ee !== null && (ee.lanes |= d), So(
                j.return,
                d,
                s
              ), y || (L = null);
              break e;
            }
          j = ee.next;
        }
      } else if (S.tag === 18) {
        if (L = S.return, L === null) throw Error(r(341));
        L.lanes |= d, j = L.alternate, j !== null && (j.lanes |= d), So(L, d, s), L = null;
      } else L = S.child;
      if (L !== null) L.return = S;
      else
        for (L = S; L !== null; ) {
          if (L === s) {
            L = null;
            break;
          }
          if (S = L.sibling, S !== null) {
            S.return = L.return, L = S;
            break;
          }
          L = L.return;
        }
      S = L;
    }
  }
  function hc(s, l, d, y) {
    s = null;
    for (var S = l, j = !1; S !== null; ) {
      if (!j) {
        if ((S.flags & 524288) !== 0) j = !0;
        else if ((S.flags & 262144) !== 0) break;
      }
      if (S.tag === 10) {
        var L = S.alternate;
        if (L === null) throw Error(r(387));
        if (L = L.memoizedProps, L !== null) {
          var ee = S.type;
          Bn(S.pendingProps.value, L.value) || (s !== null ? s.push(ee) : s = [ee]);
        }
      } else if (S === Re.current) {
        if (L = S.alternate, L === null) throw Error(r(387));
        L.memoizedState.memoizedState !== S.memoizedState.memoizedState && (s !== null ? s.push(Vc) : s = [Vc]);
      }
      S = S.return;
    }
    s !== null && Rm(
      l,
      s,
      d,
      y
    ), l.flags |= 262144;
  }
  function wh(s) {
    for (s = s.firstContext; s !== null; ) {
      if (!Bn(
        s.context._currentValue,
        s.memoizedValue
      ))
        return !0;
      s = s.next;
    }
    return !1;
  }
  function gu(s) {
    Ut = s, wo = null, s = s.dependencies, s !== null && (s.firstContext = null);
  }
  function ri(s) {
    return Ly(Ut, s);
  }
  function Bs(s, l) {
    return Ut === null && gu(s), Ly(s, l);
  }
  function Ly(s, l) {
    var d = l._currentValue;
    if (l = { context: l, memoizedValue: d, next: null }, wo === null) {
      if (s === null) throw Error(r(308));
      wo = l, s.dependencies = { lanes: 0, firstContext: l }, s.flags |= 524288;
    } else wo = wo.next = l;
    return d;
  }
  var Hb = typeof AbortController < "u" ? AbortController : function() {
    var s = [], l = this.signal = {
      aborted: !1,
      addEventListener: function(d, y) {
        s.push(y);
      }
    };
    this.abort = function() {
      l.aborted = !0, s.forEach(function(d) {
        return d();
      });
    };
  }, Gb = e.unstable_scheduleCallback, Kb = e.unstable_NormalPriority, jr = {
    $$typeof: N,
    Consumer: null,
    Provider: null,
    _currentValue: null,
    _currentValue2: null,
    _threadCount: 0
  };
  function fa() {
    return {
      controller: new Hb(),
      data: /* @__PURE__ */ new Map(),
      refCount: 0
    };
  }
  function Mf(s) {
    s.refCount--, s.refCount === 0 && Gb(Kb, function() {
      s.controller.abort();
    });
  }
  var Of = null, Mm = 0, pc = 0, mc = null;
  function yu(s, l) {
    if (Of === null) {
      var d = Of = [];
      Mm = 0, pc = ps(), mc = {
        status: "pending",
        value: void 0,
        then: function(y) {
          d.push(y);
        }
      };
    }
    return Mm++, l.then(By, By), l;
  }
  function By() {
    if (--Mm === 0 && Of !== null) {
      mc !== null && (mc.status = "fulfilled");
      var s = Of;
      Of = null, pc = 0, mc = null;
      for (var l = 0; l < s.length; l++) (0, s[l])();
    }
  }
  function Yb(s, l) {
    var d = [], y = {
      status: "pending",
      value: null,
      reason: null,
      then: function(S) {
        d.push(S);
      }
    };
    return s.then(
      function() {
        y.status = "fulfilled", y.value = l;
        for (var S = 0; S < d.length; S++) (0, d[S])(l);
      },
      function(S) {
        for (y.status = "rejected", y.reason = S, S = 0; S < d.length; S++)
          (0, d[S])(void 0);
      }
    ), y;
  }
  var qs = Q.S;
  Q.S = function(s, l) {
    Sv = bn(), typeof l == "object" && l !== null && typeof l.then == "function" && yu(s, l), qs !== null && qs(s, l);
  };
  var vu = re(null);
  function Om() {
    var s = vu.current;
    return s !== null ? s : zn.pooledCache;
  }
  function _h(s, l) {
    l === null ? V(vu, vu.current) : V(vu, l.pool);
  }
  function qy() {
    var s = Om();
    return s === null ? null : { parent: jr._currentValue, pool: s };
  }
  var gc = Error(r(460)), Sh = Error(r(474)), Df = Error(r(542)), Ch = { then: function() {
  } };
  function $y(s) {
    return s = s.status, s === "fulfilled" || s === "rejected";
  }
  function Eh(s, l, d) {
    switch (d = s[d], d === void 0 ? s.push(l) : d !== l && (l.then(zi, zi), l = d), l.status) {
      case "fulfilled":
        return l.value;
      case "rejected":
        throw s = l.reason, Dm(s), s;
      default:
        if (typeof l.status == "string") l.then(zi, zi);
        else {
          if (s = zn, s !== null && 100 < s.shellSuspendCounter)
            throw Error(r(482));
          s = l, s.status = "pending", s.then(
            function(y) {
              if (l.status === "pending") {
                var S = l;
                S.status = "fulfilled", S.value = y;
              }
            },
            function(y) {
              if (l.status === "pending") {
                var S = l;
                S.status = "rejected", S.reason = y;
              }
            }
          );
        }
        switch (l.status) {
          case "fulfilled":
            return l.value;
          case "rejected":
            throw s = l.reason, Dm(s), s;
        }
        throw qa = l, gc;
    }
  }
  function da(s) {
    try {
      var l = s._init;
      return l(s._payload);
    } catch (d) {
      throw d !== null && typeof d == "object" && typeof d.then == "function" ? (qa = d, gc) : d;
    }
  }
  var qa = null;
  function Fy() {
    if (qa === null) throw Error(r(459));
    var s = qa;
    return qa = null, s;
  }
  function Dm(s) {
    if (s === gc || s === Df)
      throw Error(r(483));
  }
  var yc = null, as = 0;
  function vc(s) {
    var l = as;
    return as += 1, yc === null && (yc = []), Eh(yc, s, l);
  }
  function ha(s, l) {
    l = l.props.ref, s.ref = l !== void 0 ? l : null;
  }
  function Ei(s, l) {
    throw l.$$typeof === x ? Error(r(525)) : (s = Object.prototype.toString.call(l), Error(
      r(
        31,
        s === "[object Object]" ? "object with keys {" + Object.keys(l).join(", ") + "}" : s
      )
    ));
  }
  function Uy(s) {
    function l(Ae, Ee) {
      if (s) {
        var Oe = Ae.deletions;
        Oe === null ? (Ae.deletions = [Ee], Ae.flags |= 16) : Oe.push(Ee);
      }
    }
    function d(Ae, Ee) {
      if (!s) return null;
      for (; Ee !== null; )
        l(Ae, Ee), Ee = Ee.sibling;
      return null;
    }
    function y(Ae) {
      for (var Ee = /* @__PURE__ */ new Map(); Ae !== null; )
        Ae.key !== null ? Ee.set(Ae.key, Ae) : Ee.set(Ae.index, Ae), Ae = Ae.sibling;
      return Ee;
    }
    function S(Ae, Ee) {
      return Ae = Ds(Ae, Ee), Ae.index = 0, Ae.sibling = null, Ae;
    }
    function j(Ae, Ee, Oe) {
      return Ae.index = Oe, s ? (Oe = Ae.alternate, Oe !== null ? (Oe = Oe.index, Oe < Ee ? (Ae.flags |= 67108866, Ee) : Oe) : (Ae.flags |= 67108866, Ee)) : (Ae.flags |= 1048576, Ee);
    }
    function L(Ae) {
      return s && Ae.alternate === null && (Ae.flags |= 67108866), Ae;
    }
    function ee(Ae, Ee, Oe, He) {
      return Ee === null || Ee.tag !== 6 ? (Ee = lc(Oe, Ae.mode, He), Ee.return = Ae, Ee) : (Ee = S(Ee, Oe), Ee.return = Ae, Ee);
    }
    function xe(Ae, Ee, Oe, He) {
      var kt = Oe.type;
      return kt === E ? Fe(
        Ae,
        Ee,
        Oe.props.children,
        He,
        Oe.key
      ) : Ee !== null && (Ee.elementType === kt || typeof kt == "object" && kt !== null && kt.$$typeof === G && da(kt) === Ee.type) ? (Ee = S(Ee, Oe.props), ha(Ee, Oe), Ee.return = Ae, Ee) : (Ee = xh(
        Oe.type,
        Oe.key,
        Oe.props,
        null,
        Ae.mode,
        He
      ), ha(Ee, Oe), Ee.return = Ae, Ee);
    }
    function De(Ae, Ee, Oe, He) {
      return Ee === null || Ee.tag !== 4 || Ee.stateNode.containerInfo !== Oe.containerInfo || Ee.stateNode.implementation !== Oe.implementation ? (Ee = Nf(Oe, Ae.mode, He), Ee.return = Ae, Ee) : (Ee = S(Ee, Oe.children || []), Ee.return = Ae, Ee);
    }
    function Fe(Ae, Ee, Oe, He, kt) {
      return Ee === null || Ee.tag !== 7 ? (Ee = hu(
        Oe,
        Ae.mode,
        He,
        kt
      ), Ee.return = Ae, Ee) : (Ee = S(Ee, Oe), Ee.return = Ae, Ee);
    }
    function Ge(Ae, Ee, Oe) {
      if (typeof Ee == "string" && Ee !== "" || typeof Ee == "number" || typeof Ee == "bigint")
        return Ee = lc(
          "" + Ee,
          Ae.mode,
          Oe
        ), Ee.return = Ae, Ee;
      if (typeof Ee == "object" && Ee !== null) {
        switch (Ee.$$typeof) {
          case b:
            return Oe = xh(
              Ee.type,
              Ee.key,
              Ee.props,
              null,
              Ae.mode,
              Oe
            ), ha(Oe, Ee), Oe.return = Ae, Oe;
          case _:
            return Ee = Nf(
              Ee,
              Ae.mode,
              Oe
            ), Ee.return = Ae, Ee;
          case G:
            return Ee = da(Ee), Ge(Ae, Ee, Oe);
        }
        if (le(Ee) || X(Ee))
          return Ee = hu(
            Ee,
            Ae.mode,
            Oe,
            null
          ), Ee.return = Ae, Ee;
        if (typeof Ee.then == "function")
          return Ge(Ae, vc(Ee), Oe);
        if (Ee.$$typeof === N)
          return Ge(
            Ae,
            Bs(Ae, Ee),
            Oe
          );
        Ei(Ae, Ee);
      }
      return null;
    }
    function Pe(Ae, Ee, Oe, He) {
      var kt = Ee !== null ? Ee.key : null;
      if (typeof Oe == "string" && Oe !== "" || typeof Oe == "number" || typeof Oe == "bigint")
        return kt !== null ? null : ee(Ae, Ee, "" + Oe, He);
      if (typeof Oe == "object" && Oe !== null) {
        switch (Oe.$$typeof) {
          case b:
            return Oe.key === kt ? xe(Ae, Ee, Oe, He) : null;
          case _:
            return Oe.key === kt ? De(Ae, Ee, Oe, He) : null;
          case G:
            return Oe = da(Oe), Pe(Ae, Ee, Oe, He);
        }
        if (le(Oe) || X(Oe))
          return kt !== null ? null : Fe(Ae, Ee, Oe, He, null);
        if (typeof Oe.then == "function")
          return Pe(
            Ae,
            Ee,
            vc(Oe),
            He
          );
        if (Oe.$$typeof === N)
          return Pe(
            Ae,
            Ee,
            Bs(Ae, Oe),
            He
          );
        Ei(Ae, Oe);
      }
      return null;
    }
    function Be(Ae, Ee, Oe, He, kt) {
      if (typeof He == "string" && He !== "" || typeof He == "number" || typeof He == "bigint")
        return Ae = Ae.get(Oe) || null, ee(Ee, Ae, "" + He, kt);
      if (typeof He == "object" && He !== null) {
        switch (He.$$typeof) {
          case b:
            return Ae = Ae.get(
              He.key === null ? Oe : He.key
            ) || null, xe(Ee, Ae, He, kt);
          case _:
            return Ae = Ae.get(
              He.key === null ? Oe : He.key
            ) || null, De(Ee, Ae, He, kt);
          case G:
            return He = da(He), Be(
              Ae,
              Ee,
              Oe,
              He,
              kt
            );
        }
        if (le(He) || X(He))
          return Ae = Ae.get(Oe) || null, Fe(Ee, Ae, He, kt, null);
        if (typeof He.then == "function")
          return Be(
            Ae,
            Ee,
            Oe,
            vc(He),
            kt
          );
        if (He.$$typeof === N)
          return Be(
            Ae,
            Ee,
            Oe,
            Bs(Ee, He),
            kt
          );
        Ei(Ee, He);
      }
      return null;
    }
    function wt(Ae, Ee, Oe, He) {
      for (var kt = null, pn = null, _t = Ee, Kt = Ee = 0, nn = null; _t !== null && Kt < Oe.length; Kt++) {
        _t.index > Kt ? (nn = _t, _t = null) : nn = _t.sibling;
        var mn = Pe(
          Ae,
          _t,
          Oe[Kt],
          He
        );
        if (mn === null) {
          _t === null && (_t = nn);
          break;
        }
        s && _t && mn.alternate === null && l(Ae, _t), Ee = j(mn, Ee, Kt), pn === null ? kt = mn : pn.sibling = mn, pn = mn, _t = nn;
      }
      if (Kt === Oe.length)
        return d(Ae, _t), an && ss(Ae, Kt), kt;
      if (_t === null) {
        for (; Kt < Oe.length; Kt++)
          _t = Ge(Ae, Oe[Kt], He), _t !== null && (Ee = j(
            _t,
            Ee,
            Kt
          ), pn === null ? kt = _t : pn.sibling = _t, pn = _t);
        return an && ss(Ae, Kt), kt;
      }
      for (_t = y(_t); Kt < Oe.length; Kt++)
        nn = Be(
          _t,
          Ae,
          Kt,
          Oe[Kt],
          He
        ), nn !== null && (s && nn.alternate !== null && _t.delete(
          nn.key === null ? Kt : nn.key
        ), Ee = j(
          nn,
          Ee,
          Kt
        ), pn === null ? kt = nn : pn.sibling = nn, pn = nn);
      return s && _t.forEach(function(Ol) {
        return l(Ae, Ol);
      }), an && ss(Ae, Kt), kt;
    }
    function Nt(Ae, Ee, Oe, He) {
      if (Oe == null) throw Error(r(151));
      for (var kt = null, pn = null, _t = Ee, Kt = Ee = 0, nn = null, mn = Oe.next(); _t !== null && !mn.done; Kt++, mn = Oe.next()) {
        _t.index > Kt ? (nn = _t, _t = null) : nn = _t.sibling;
        var Ol = Pe(Ae, _t, mn.value, He);
        if (Ol === null) {
          _t === null && (_t = nn);
          break;
        }
        s && _t && Ol.alternate === null && l(Ae, _t), Ee = j(Ol, Ee, Kt), pn === null ? kt = Ol : pn.sibling = Ol, pn = Ol, _t = nn;
      }
      if (mn.done)
        return d(Ae, _t), an && ss(Ae, Kt), kt;
      if (_t === null) {
        for (; !mn.done; Kt++, mn = Oe.next())
          mn = Ge(Ae, mn.value, He), mn !== null && (Ee = j(mn, Ee, Kt), pn === null ? kt = mn : pn.sibling = mn, pn = mn);
        return an && ss(Ae, Kt), kt;
      }
      for (_t = y(_t); !mn.done; Kt++, mn = Oe.next())
        mn = Be(_t, Ae, Kt, mn.value, He), mn !== null && (s && mn.alternate !== null && _t.delete(mn.key === null ? Kt : mn.key), Ee = j(mn, Ee, Kt), pn === null ? kt = mn : pn.sibling = mn, pn = mn);
      return s && _t.forEach(function(O2) {
        return l(Ae, O2);
      }), an && ss(Ae, Kt), kt;
    }
    function Tn(Ae, Ee, Oe, He) {
      if (typeof Oe == "object" && Oe !== null && Oe.type === E && Oe.key === null && (Oe = Oe.props.children), typeof Oe == "object" && Oe !== null) {
        switch (Oe.$$typeof) {
          case b:
            e: {
              for (var kt = Oe.key; Ee !== null; ) {
                if (Ee.key === kt) {
                  if (kt = Oe.type, kt === E) {
                    if (Ee.tag === 7) {
                      d(
                        Ae,
                        Ee.sibling
                      ), He = S(
                        Ee,
                        Oe.props.children
                      ), He.return = Ae, Ae = He;
                      break e;
                    }
                  } else if (Ee.elementType === kt || typeof kt == "object" && kt !== null && kt.$$typeof === G && da(kt) === Ee.type) {
                    d(
                      Ae,
                      Ee.sibling
                    ), He = S(Ee, Oe.props), ha(He, Oe), He.return = Ae, Ae = He;
                    break e;
                  }
                  d(Ae, Ee);
                  break;
                } else l(Ae, Ee);
                Ee = Ee.sibling;
              }
              Oe.type === E ? (He = hu(
                Oe.props.children,
                Ae.mode,
                He,
                Oe.key
              ), He.return = Ae, Ae = He) : (He = xh(
                Oe.type,
                Oe.key,
                Oe.props,
                null,
                Ae.mode,
                He
              ), ha(He, Oe), He.return = Ae, Ae = He);
            }
            return L(Ae);
          case _:
            e: {
              for (kt = Oe.key; Ee !== null; ) {
                if (Ee.key === kt)
                  if (Ee.tag === 4 && Ee.stateNode.containerInfo === Oe.containerInfo && Ee.stateNode.implementation === Oe.implementation) {
                    d(
                      Ae,
                      Ee.sibling
                    ), He = S(Ee, Oe.children || []), He.return = Ae, Ae = He;
                    break e;
                  } else {
                    d(Ae, Ee);
                    break;
                  }
                else l(Ae, Ee);
                Ee = Ee.sibling;
              }
              He = Nf(Oe, Ae.mode, He), He.return = Ae, Ae = He;
            }
            return L(Ae);
          case G:
            return Oe = da(Oe), Tn(
              Ae,
              Ee,
              Oe,
              He
            );
        }
        if (le(Oe))
          return wt(
            Ae,
            Ee,
            Oe,
            He
          );
        if (X(Oe)) {
          if (kt = X(Oe), typeof kt != "function") throw Error(r(150));
          return Oe = kt.call(Oe), Nt(
            Ae,
            Ee,
            Oe,
            He
          );
        }
        if (typeof Oe.then == "function")
          return Tn(
            Ae,
            Ee,
            vc(Oe),
            He
          );
        if (Oe.$$typeof === N)
          return Tn(
            Ae,
            Ee,
            Bs(Ae, Oe),
            He
          );
        Ei(Ae, Oe);
      }
      return typeof Oe == "string" && Oe !== "" || typeof Oe == "number" || typeof Oe == "bigint" ? (Oe = "" + Oe, Ee !== null && Ee.tag === 6 ? (d(Ae, Ee.sibling), He = S(Ee, Oe), He.return = Ae, Ae = He) : (d(Ae, Ee), He = lc(Oe, Ae.mode, He), He.return = Ae, Ae = He), L(Ae)) : d(Ae, Ee);
    }
    return function(Ae, Ee, Oe, He) {
      try {
        as = 0;
        var kt = Tn(
          Ae,
          Ee,
          Oe,
          He
        );
        return yc = null, kt;
      } catch (_t) {
        if (_t === gc || _t === Df) throw _t;
        var pn = ni(29, _t, null, Ae.mode);
        return pn.lanes = He, pn.return = Ae, pn;
      } finally {
      }
    };
  }
  var hl = Uy(!0), zm = Uy(!1), $s = !1;
  function $a(s) {
    s.updateQueue = {
      baseState: s.memoizedState,
      firstBaseUpdate: null,
      lastBaseUpdate: null,
      shared: { pending: null, lanes: 0, hiddenCallbacks: null },
      callbacks: null
    };
  }
  function kh(s, l) {
    s = s.updateQueue, l.updateQueue === s && (l.updateQueue = {
      baseState: s.baseState,
      firstBaseUpdate: s.firstBaseUpdate,
      lastBaseUpdate: s.lastBaseUpdate,
      shared: s.shared,
      callbacks: null
    });
  }
  function pl(s) {
    return { lane: s, tag: 0, payload: null, callback: null, next: null };
  }
  function pa(s, l, d) {
    var y = s.updateQueue;
    if (y === null) return null;
    if (y = y.shared, (yn & 2) !== 0) {
      var S = y.pending;
      return S === null ? l.next = l : (l.next = S.next, S.next = l), y.pending = l, l = xr(s), al(s, null, d), l;
    }
    return jt(s, y, l, d), xr(s);
  }
  function zf(s, l, d) {
    if (l = l.updateQueue, l !== null && (l = l.shared, (d & 4194048) !== 0)) {
      var y = l.lanes;
      y &= s.pendingLanes, d |= y, l.lanes = d, wn(s, d);
    }
  }
  function Th(s, l) {
    var d = s.updateQueue, y = s.alternate;
    if (y !== null && (y = y.updateQueue, d === y)) {
      var S = null, j = null;
      if (d = d.firstBaseUpdate, d !== null) {
        do {
          var L = {
            lane: d.lane,
            tag: d.tag,
            payload: d.payload,
            callback: null,
            next: null
          };
          j === null ? S = j = L : j = j.next = L, d = d.next;
        } while (d !== null);
        j === null ? S = j = l : j = j.next = l;
      } else S = j = l;
      d = {
        baseState: y.baseState,
        firstBaseUpdate: S,
        lastBaseUpdate: j,
        shared: y.shared,
        callbacks: y.callbacks
      }, s.updateQueue = d;
      return;
    }
    s = d.lastBaseUpdate, s === null ? d.firstBaseUpdate = l : s.next = l, d.lastBaseUpdate = l;
  }
  var Dr = !1;
  function xu() {
    if (Dr) {
      var s = mc;
      if (s !== null) throw s;
    }
  }
  function xc(s, l, d, y) {
    Dr = !1;
    var S = s.updateQueue;
    $s = !1;
    var j = S.firstBaseUpdate, L = S.lastBaseUpdate, ee = S.shared.pending;
    if (ee !== null) {
      S.shared.pending = null;
      var xe = ee, De = xe.next;
      xe.next = null, L === null ? j = De : L.next = De, L = xe;
      var Fe = s.alternate;
      Fe !== null && (Fe = Fe.updateQueue, ee = Fe.lastBaseUpdate, ee !== L && (ee === null ? Fe.firstBaseUpdate = De : ee.next = De, Fe.lastBaseUpdate = xe));
    }
    if (j !== null) {
      var Ge = S.baseState;
      L = 0, Fe = De = xe = null, ee = j;
      do {
        var Pe = ee.lane & -536870913, Be = Pe !== ee.lane;
        if (Be ? (tn & Pe) === Pe : (y & Pe) === Pe) {
          Pe !== 0 && Pe === pc && (Dr = !0), Fe !== null && (Fe = Fe.next = {
            lane: 0,
            tag: ee.tag,
            payload: ee.payload,
            callback: null,
            next: null
          });
          e: {
            var wt = s, Nt = ee;
            Pe = l;
            var Tn = d;
            switch (Nt.tag) {
              case 1:
                if (wt = Nt.payload, typeof wt == "function") {
                  Ge = wt.call(Tn, Ge, Pe);
                  break e;
                }
                Ge = wt;
                break e;
              case 3:
                wt.flags = wt.flags & -65537 | 128;
              case 0:
                if (wt = Nt.payload, Pe = typeof wt == "function" ? wt.call(Tn, Ge, Pe) : wt, Pe == null) break e;
                Ge = g({}, Ge, Pe);
                break e;
              case 2:
                $s = !0;
            }
          }
          Pe = ee.callback, Pe !== null && (s.flags |= 64, Be && (s.flags |= 8192), Be = S.callbacks, Be === null ? S.callbacks = [Pe] : Be.push(Pe));
        } else
          Be = {
            lane: Pe,
            tag: ee.tag,
            payload: ee.payload,
            callback: ee.callback,
            next: null
          }, Fe === null ? (De = Fe = Be, xe = Ge) : Fe = Fe.next = Be, L |= Pe;
        if (ee = ee.next, ee === null) {
          if (ee = S.shared.pending, ee === null)
            break;
          Be = ee, ee = Be.next, Be.next = null, S.lastBaseUpdate = Be, S.shared.pending = null;
        }
      } while (!0);
      Fe === null && (xe = Ge), S.baseState = xe, S.firstBaseUpdate = De, S.lastBaseUpdate = Fe, j === null && (S.shared.lanes = 0), _l |= L, s.lanes = L, s.memoizedState = Ge;
    }
  }
  function ma(s, l) {
    if (typeof s != "function")
      throw Error(r(191, s));
    s.call(l);
  }
  function Ah(s, l) {
    var d = s.callbacks;
    if (d !== null)
      for (s.callbacks = null, s = 0; s < d.length; s++)
        ma(d[s], l);
  }
  var Co = re(null), Fa = re(0);
  function Pm(s, l) {
    s = wa, V(Fa, s), V(Co, l), wa = s | l.baseLanes;
  }
  function ii() {
    V(Fa, wa), V(Co, Co.current);
  }
  function Pf() {
    wa = Fa.current, de(Co), de(Fa);
  }
  var os = re(null), Fs = null;
  function ml(s) {
    var l = s.alternate;
    V(br, br.current & 1), V(os, s), Fs === null && (l === null || Co.current !== null || l.memoizedState !== null) && (Fs = s);
  }
  function If(s) {
    V(br, br.current), V(os, s), Fs === null && (Fs = s);
  }
  function Vy(s) {
    s.tag === 22 ? (V(br, br.current), V(os, s), Fs === null && (Fs = s)) : Us();
  }
  function Us() {
    V(br, br.current), V(os, os.current);
  }
  function Ii(s) {
    de(os), Fs === s && (Fs = null), de(br);
  }
  var br = re(0);
  function jh(s) {
    for (var l = s; l !== null; ) {
      if (l.tag === 13) {
        var d = l.memoizedState;
        if (d !== null && (d = d.dehydrated, d === null || dp(d) || Lc(d)))
          return l;
      } else if (l.tag === 19 && (l.memoizedProps.revealOrder === "forwards" || l.memoizedProps.revealOrder === "backwards" || l.memoizedProps.revealOrder === "unstable_legacy-backwards" || l.memoizedProps.revealOrder === "together")) {
        if ((l.flags & 128) !== 0) return l;
      } else if (l.child !== null) {
        l.child.return = l, l = l.child;
        continue;
      }
      if (l === s) break;
      for (; l.sibling === null; ) {
        if (l.return === null || l.return === s) return null;
        l = l.return;
      }
      l.sibling.return = l.return, l = l.sibling;
    }
    return null;
  }
  var ls = 0, Vt = null, En = null, or = null, Lf = !1, bc = !1, bu = !1, Nh = 0, wc = 0, gl = null, Wb = 0;
  function Zn() {
    throw Error(r(321));
  }
  function Rh(s, l) {
    if (l === null) return !1;
    for (var d = 0; d < l.length && d < s.length; d++)
      if (!Bn(s[d], l[d])) return !1;
    return !0;
  }
  function Mh(s, l, d, y, S, j) {
    return ls = j, Vt = l, l.memoizedState = null, l.updateQueue = null, l.lanes = 0, Q.H = s === null || s.memoizedState === null ? tv : $h, bu = !1, j = d(y, S), bu = !1, bc && (j = Bf(
      l,
      d,
      y,
      S
    )), Im(s), j;
  }
  function Im(s) {
    Q.H = vl;
    var l = En !== null && En.next !== null;
    if (ls = 0, or = En = Vt = null, Lf = !1, wc = 0, gl = null, l) throw Error(r(300));
    s === null || rr || (s = s.dependencies, s !== null && wh(s) && (rr = !0));
  }
  function Bf(s, l, d, y) {
    Vt = s;
    var S = 0;
    do {
      if (bc && (gl = null), wc = 0, bc = !1, 25 <= S) throw Error(r(301));
      if (S += 1, or = En = null, s.updateQueue != null) {
        var j = s.updateQueue;
        j.lastEffect = null, j.events = null, j.stores = null, j.memoCache != null && (j.memoCache.index = 0);
      }
      Q.H = Kf, j = l(d, y);
    } while (bc);
    return j;
  }
  function Zb() {
    var s = Q.H, l = s.useState()[0];
    return l = typeof l.then == "function" ? Sc(l) : l, s = s.useState()[0], (En !== null ? En.memoizedState : null) !== s && (Vt.flags |= 1024), l;
  }
  function Oh() {
    var s = Nh !== 0;
    return Nh = 0, s;
  }
  function Dh(s, l, d) {
    l.updateQueue = s.updateQueue, l.flags &= -2053, s.lanes &= ~d;
  }
  function Lm(s) {
    if (Lf) {
      for (s = s.memoizedState; s !== null; ) {
        var l = s.queue;
        l !== null && (l.pending = null), s = s.next;
      }
      Lf = !1;
    }
    ls = 0, or = En = Vt = null, bc = !1, wc = Nh = 0, gl = null;
  }
  function yi() {
    var s = {
      memoizedState: null,
      baseState: null,
      baseQueue: null,
      queue: null,
      next: null
    };
    return or === null ? Vt.memoizedState = or = s : or = or.next = s, or;
  }
  function wr() {
    if (En === null) {
      var s = Vt.alternate;
      s = s !== null ? s.memoizedState : null;
    } else s = En.next;
    var l = or === null ? Vt.memoizedState : or.next;
    if (l !== null)
      or = l, En = s;
    else {
      if (s === null)
        throw Vt.alternate === null ? Error(r(467)) : Error(r(310));
      En = s, s = {
        memoizedState: En.memoizedState,
        baseState: En.baseState,
        baseQueue: En.baseQueue,
        queue: En.queue,
        next: null
      }, or === null ? Vt.memoizedState = or = s : or = or.next = s;
    }
    return or;
  }
  function _c() {
    return { lastEffect: null, events: null, stores: null, memoCache: null };
  }
  function Sc(s) {
    var l = wc;
    return wc += 1, gl === null && (gl = []), s = Eh(gl, s, l), l = Vt, (or === null ? l.memoizedState : or.next) === null && (l = l.alternate, Q.H = l === null || l.memoizedState === null ? tv : $h), s;
  }
  function Cc(s) {
    if (s !== null && typeof s == "object") {
      if (typeof s.then == "function") return Sc(s);
      if (s.$$typeof === N) return ri(s);
    }
    throw Error(r(438, String(s)));
  }
  function Bm(s) {
    var l = null, d = Vt.updateQueue;
    if (d !== null && (l = d.memoCache), l == null) {
      var y = Vt.alternate;
      y !== null && (y = y.updateQueue, y !== null && (y = y.memoCache, y != null && (l = {
        data: y.data.map(function(S) {
          return S.slice();
        }),
        index: 0
      })));
    }
    if (l == null && (l = { data: [], index: 0 }), d === null && (d = _c(), Vt.updateQueue = d), d.memoCache = l, d = l.data[l.index], d === void 0)
      for (d = l.data[l.index] = Array(s), y = 0; y < s; y++)
        d[y] = W;
    return l.index++, d;
  }
  function ga(s, l) {
    return typeof l == "function" ? l(s) : l;
  }
  function Ht(s) {
    var l = wr();
    return qm(l, En, s);
  }
  function qm(s, l, d) {
    var y = s.queue;
    if (y === null) throw Error(r(311));
    y.lastRenderedReducer = d;
    var S = s.baseQueue, j = y.pending;
    if (j !== null) {
      if (S !== null) {
        var L = S.next;
        S.next = j.next, j.next = L;
      }
      l.baseQueue = S = j, y.pending = null;
    }
    if (j = s.baseState, S === null) s.memoizedState = j;
    else {
      l = S.next;
      var ee = L = null, xe = null, De = l, Fe = !1;
      do {
        var Ge = De.lane & -536870913;
        if (Ge !== De.lane ? (tn & Ge) === Ge : (ls & Ge) === Ge) {
          var Pe = De.revertLane;
          if (Pe === 0)
            xe !== null && (xe = xe.next = {
              lane: 0,
              revertLane: 0,
              gesture: null,
              action: De.action,
              hasEagerState: De.hasEagerState,
              eagerState: De.eagerState,
              next: null
            }), Ge === pc && (Fe = !0);
          else if ((ls & Pe) === Pe) {
            De = De.next, Pe === pc && (Fe = !0);
            continue;
          } else
            Ge = {
              lane: 0,
              revertLane: De.revertLane,
              gesture: null,
              action: De.action,
              hasEagerState: De.hasEagerState,
              eagerState: De.eagerState,
              next: null
            }, xe === null ? (ee = xe = Ge, L = j) : xe = xe.next = Ge, Vt.lanes |= Pe, _l |= Pe;
          Ge = De.action, bu && d(j, Ge), j = De.hasEagerState ? De.eagerState : d(j, Ge);
        } else
          Pe = {
            lane: Ge,
            revertLane: De.revertLane,
            gesture: De.gesture,
            action: De.action,
            hasEagerState: De.hasEagerState,
            eagerState: De.eagerState,
            next: null
          }, xe === null ? (ee = xe = Pe, L = j) : xe = xe.next = Pe, Vt.lanes |= Ge, _l |= Ge;
        De = De.next;
      } while (De !== null && De !== l);
      if (xe === null ? L = j : xe.next = ee, !Bn(j, s.memoizedState) && (rr = !0, Fe && (d = mc, d !== null)))
        throw d;
      s.memoizedState = j, s.baseState = L, s.baseQueue = xe, y.lastRenderedState = j;
    }
    return S === null && (y.lanes = 0), [s.memoizedState, y.dispatch];
  }
  function $m(s) {
    var l = wr(), d = l.queue;
    if (d === null) throw Error(r(311));
    d.lastRenderedReducer = s;
    var y = d.dispatch, S = d.pending, j = l.memoizedState;
    if (S !== null) {
      d.pending = null;
      var L = S = S.next;
      do
        j = s(j, L.action), L = L.next;
      while (L !== S);
      Bn(j, l.memoizedState) || (rr = !0), l.memoizedState = j, l.baseQueue === null && (l.baseState = j), d.lastRenderedState = j;
    }
    return [j, y];
  }
  function Ec(s, l, d) {
    var y = Vt, S = wr(), j = an;
    if (j) {
      if (d === void 0) throw Error(r(407));
      d = d();
    } else d = l();
    var L = !Bn(
      (En || S).memoizedState,
      d
    );
    if (L && (S.memoizedState = d, rr = !0), S = S.queue, Uf(Gy.bind(null, y, S, s), [
      s
    ]), S.getSnapshot !== l || L || or !== null && or.memoizedState.tag & 1) {
      if (y.flags |= 2048, cs(
        9,
        { destroy: void 0 },
        Hy.bind(
          null,
          y,
          S,
          d,
          l
        ),
        null
      ), zn === null) throw Error(r(349));
      j || (ls & 127) !== 0 || Fm(y, l, d);
    }
    return d;
  }
  function Fm(s, l, d) {
    s.flags |= 16384, s = { getSnapshot: l, value: d }, l = Vt.updateQueue, l === null ? (l = _c(), Vt.updateQueue = l, l.stores = [s]) : (d = l.stores, d === null ? l.stores = [s] : d.push(s));
  }
  function Hy(s, l, d, y) {
    l.value = d, l.getSnapshot = y, us(l) && Ky(s);
  }
  function Gy(s, l, d) {
    return d(function() {
      us(l) && Ky(s);
    });
  }
  function us(s) {
    var l = s.getSnapshot;
    s = s.value;
    try {
      var d = l();
      return !Bn(s, d);
    } catch {
      return !0;
    }
  }
  function Ky(s) {
    var l = On(s, 2);
    l !== null && Ui(l, s, 2);
  }
  function kc(s) {
    var l = yi();
    if (typeof s == "function") {
      var d = s;
      if (s = d(), bu) {
        Ln(!0);
        try {
          d();
        } finally {
          Ln(!1);
        }
      }
    }
    return l.memoizedState = l.baseState = s, l.queue = {
      pending: null,
      lanes: 0,
      dispatch: null,
      lastRenderedReducer: ga,
      lastRenderedState: s
    }, l;
  }
  function zh(s, l, d, y) {
    return s.baseState = d, qm(
      s,
      En,
      typeof y == "function" ? y : ga
    );
  }
  function Yy(s, l, d, y, S) {
    if (Hf(s)) throw Error(r(485));
    if (s = l.action, s !== null) {
      var j = {
        payload: S,
        action: s,
        next: null,
        isTransition: !0,
        status: "pending",
        value: null,
        reason: null,
        listeners: [],
        then: function(L) {
          j.listeners.push(L);
        }
      };
      Q.T !== null ? d(!0) : j.isTransition = !1, y(j), d = l.pending, d === null ? (j.next = l.pending = j, Um(l, j)) : (j.next = d.next, l.pending = d.next = j);
    }
  }
  function Um(s, l) {
    var d = l.action, y = l.payload, S = s.state;
    if (l.isTransition) {
      var j = Q.T, L = {};
      Q.T = L;
      try {
        var ee = d(S, y), xe = Q.S;
        xe !== null && xe(L, ee), Li(s, l, ee);
      } catch (De) {
        qf(s, l, De);
      } finally {
        j !== null && L.types !== null && (j.types = L.types), Q.T = j;
      }
    } else
      try {
        j = d(S, y), Li(s, l, j);
      } catch (De) {
        qf(s, l, De);
      }
  }
  function Li(s, l, d) {
    d !== null && typeof d == "object" && typeof d.then == "function" ? d.then(
      function(y) {
        Eo(s, l, y);
      },
      function(y) {
        return qf(s, l, y);
      }
    ) : Eo(s, l, d);
  }
  function Eo(s, l, d) {
    l.status = "fulfilled", l.value = d, Vm(l), s.state = d, l = s.pending, l !== null && (d = l.next, d === l ? s.pending = null : (d = d.next, l.next = d, Um(s, d)));
  }
  function qf(s, l, d) {
    var y = s.pending;
    if (s.pending = null, y !== null) {
      y = y.next;
      do
        l.status = "rejected", l.reason = d, Vm(l), l = l.next;
      while (l !== y);
    }
    s.action = null;
  }
  function Vm(s) {
    s = s.listeners;
    for (var l = 0; l < s.length; l++) (0, s[l])();
  }
  function $f(s, l) {
    return l;
  }
  function Hm(s, l) {
    if (an) {
      var d = zn.formState;
      if (d !== null) {
        e: {
          var y = Vt;
          if (an) {
            if (vn) {
              t: {
                for (var S = vn, j = Ls; S.nodeType !== 8; ) {
                  if (!j) {
                    S = null;
                    break t;
                  }
                  if (S = Hs(
                    S.nextSibling
                  ), S === null) {
                    S = null;
                    break t;
                  }
                }
                j = S.data, S = j === "F!" || j === "F" ? S : null;
              }
              if (S) {
                vn = Hs(
                  S.nextSibling
                ), y = S.data === "F!";
                break e;
              }
            }
            ul(y);
          }
          y = !1;
        }
        y && (l = d[0]);
      }
    }
    return d = yi(), d.memoizedState = d.baseState = l, y = {
      pending: null,
      lanes: 0,
      dispatch: null,
      lastRenderedReducer: $f,
      lastRenderedState: l
    }, d.queue = y, d = ng.bind(
      null,
      Vt,
      y
    ), y.dispatch = d, y = kc(!1), j = Ac.bind(
      null,
      Vt,
      !1,
      y.queue
    ), y = yi(), S = {
      state: l,
      dispatch: null,
      action: s,
      pending: null
    }, y.queue = S, d = Yy.bind(
      null,
      Vt,
      S,
      j,
      d
    ), S.dispatch = d, y.memoizedState = s, [l, d, !1];
  }
  function Ph(s) {
    var l = wr();
    return Gm(l, En, s);
  }
  function Gm(s, l, d) {
    if (l = qm(
      s,
      l,
      $f
    )[0], s = Ht(ga)[0], typeof l == "object" && l !== null && typeof l.then == "function")
      try {
        var y = Sc(l);
      } catch (L) {
        throw L === gc ? Df : L;
      }
    else y = l;
    l = wr();
    var S = l.queue, j = S.dispatch;
    return d !== l.memoizedState && (Vt.flags |= 2048, cs(
      9,
      { destroy: void 0 },
      Km.bind(null, S, d),
      null
    )), [y, j, s];
  }
  function Km(s, l) {
    s.action = l;
  }
  function Ih(s) {
    var l = wr(), d = En;
    if (d !== null)
      return Gm(l, d, s);
    wr(), l = l.memoizedState, d = wr();
    var y = d.queue.dispatch;
    return d.memoizedState = s, [l, y, !1];
  }
  function cs(s, l, d, y) {
    return s = { tag: s, create: d, deps: y, inst: l, next: null }, l = Vt.updateQueue, l === null && (l = _c(), Vt.updateQueue = l), d = l.lastEffect, d === null ? l.lastEffect = s.next = s : (y = d.next, d.next = s, s.next = y, l.lastEffect = s), s;
  }
  function Wy() {
    return wr().memoizedState;
  }
  function ya(s, l, d, y) {
    var S = yi();
    Vt.flags |= s, S.memoizedState = cs(
      1 | l,
      { destroy: void 0 },
      d,
      y === void 0 ? null : y
    );
  }
  function Ff(s, l, d, y) {
    var S = wr();
    y = y === void 0 ? null : y;
    var j = S.memoizedState.inst;
    En !== null && y !== null && Rh(y, En.memoizedState.deps) ? S.memoizedState = cs(l, j, d, y) : (Vt.flags |= s, S.memoizedState = cs(
      1 | l,
      j,
      d,
      y
    ));
  }
  function Ym(s, l) {
    ya(8390656, 8, s, l);
  }
  function Uf(s, l) {
    Ff(2048, 8, s, l);
  }
  function Xb(s) {
    Vt.flags |= 4;
    var l = Vt.updateQueue;
    if (l === null)
      l = _c(), Vt.updateQueue = l, l.events = [s];
    else {
      var d = l.events;
      d === null ? l.events = [s] : d.push(s);
    }
  }
  function Zy(s) {
    var l = wr().memoizedState;
    return Xb({ ref: l, nextImpl: s }), function() {
      if ((yn & 2) !== 0) throw Error(r(440));
      return l.impl.apply(void 0, arguments);
    };
  }
  function Xy(s, l) {
    return Ff(4, 2, s, l);
  }
  function Wm(s, l) {
    return Ff(4, 4, s, l);
  }
  function Zm(s, l) {
    if (typeof l == "function") {
      s = s();
      var d = l(s);
      return function() {
        typeof d == "function" ? d() : l(null);
      };
    }
    if (l != null)
      return s = s(), l.current = s, function() {
        l.current = null;
      };
  }
  function Qy(s, l, d) {
    d = d != null ? d.concat([s]) : null, Ff(4, 4, Zm.bind(null, l, s), d);
  }
  function Lh() {
  }
  function Xm(s, l) {
    var d = wr();
    l = l === void 0 ? null : l;
    var y = d.memoizedState;
    return l !== null && Rh(l, y[1]) ? y[0] : (d.memoizedState = [s, l], s);
  }
  function ki(s, l) {
    var d = wr();
    l = l === void 0 ? null : l;
    var y = d.memoizedState;
    if (l !== null && Rh(l, y[1]))
      return y[0];
    if (y = s(), bu) {
      Ln(!0);
      try {
        s();
      } finally {
        Ln(!1);
      }
    }
    return d.memoizedState = [y, l], y;
  }
  function Vs(s, l, d) {
    return d === void 0 || (ls & 1073741824) !== 0 && (tn & 261930) === 0 ? s.memoizedState = l : (s.memoizedState = d, s = Ev(), Vt.lanes |= s, _l |= s, d);
  }
  function Jy(s, l, d, y) {
    return Bn(d, l) ? d : Co.current !== null ? (s = Vs(s, d, y), Bn(s, l) || (rr = !0), s) : (ls & 42) === 0 || (ls & 1073741824) !== 0 && (tn & 261930) === 0 ? (rr = !0, s.memoizedState = d) : (s = Ev(), Vt.lanes |= s, _l |= s, l);
  }
  function ev(s, l, d, y, S) {
    var j = oe.p;
    oe.p = j !== 0 && 8 > j ? j : 8;
    var L = Q.T, ee = {};
    Q.T = ee, Ac(s, !1, l, d);
    try {
      var xe = S(), De = Q.S;
      if (De !== null && De(ee, xe), xe !== null && typeof xe == "object" && typeof xe.then == "function") {
        var Fe = Yb(
          xe,
          y
        );
        Tc(
          s,
          l,
          Fe,
          hs(s)
        );
      } else
        Tc(
          s,
          l,
          y,
          hs(s)
        );
    } catch (Ge) {
      Tc(
        s,
        l,
        { then: function() {
        }, status: "rejected", reason: Ge },
        hs()
      );
    } finally {
      oe.p = j, L !== null && ee.types !== null && (L.types = ee.types), Q.T = L;
    }
  }
  function Bh() {
  }
  function yl(s, l, d, y) {
    if (s.tag !== 5) throw Error(r(476));
    var S = Qm(s).queue;
    ev(
      s,
      S,
      l,
      fe,
      d === null ? Bh : function() {
        return Jm(s), d(y);
      }
    );
  }
  function Qm(s) {
    var l = s.memoizedState;
    if (l !== null) return l;
    l = {
      memoizedState: fe,
      baseState: fe,
      baseQueue: null,
      queue: {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: ga,
        lastRenderedState: fe
      },
      next: null
    };
    var d = {};
    return l.next = {
      memoizedState: d,
      baseState: d,
      baseQueue: null,
      queue: {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: ga,
        lastRenderedState: d
      },
      next: null
    }, s.memoizedState = l, s = s.alternate, s !== null && (s.memoizedState = l), l;
  }
  function Jm(s) {
    var l = Qm(s);
    l.next === null && (l = s.alternate.memoizedState), Tc(
      s,
      l.next.queue,
      {},
      hs()
    );
  }
  function eg() {
    return ri(Vc);
  }
  function tg() {
    return wr().memoizedState;
  }
  function wu() {
    return wr().memoizedState;
  }
  function Vf(s) {
    for (var l = s.return; l !== null; ) {
      switch (l.tag) {
        case 24:
        case 3:
          var d = hs();
          s = pl(d);
          var y = pa(l, s, d);
          y !== null && (Ui(y, l, d), zf(y, l, d)), l = { cache: fa() }, s.payload = l;
          return;
      }
      l = l.return;
    }
  }
  function Qb(s, l, d) {
    var y = hs();
    d = {
      lane: y,
      revertLane: 0,
      gesture: null,
      action: d,
      hasEagerState: !1,
      eagerState: null,
      next: null
    }, Hf(s) ? Gf(l, d) : (d = vr(s, l, d, y), d !== null && (Ui(d, s, y), qh(d, l, y)));
  }
  function ng(s, l, d) {
    var y = hs();
    Tc(s, l, d, y);
  }
  function Tc(s, l, d, y) {
    var S = {
      lane: y,
      revertLane: 0,
      gesture: null,
      action: d,
      hasEagerState: !1,
      eagerState: null,
      next: null
    };
    if (Hf(s)) Gf(l, S);
    else {
      var j = s.alternate;
      if (s.lanes === 0 && (j === null || j.lanes === 0) && (j = l.lastRenderedReducer, j !== null))
        try {
          var L = l.lastRenderedState, ee = j(L, d);
          if (S.hasEagerState = !0, S.eagerState = ee, Bn(ee, L))
            return jt(s, l, S, 0), zn === null && Gn(), !1;
        } catch {
        } finally {
        }
      if (d = vr(s, l, S, y), d !== null)
        return Ui(d, s, y), qh(d, l, y), !0;
    }
    return !1;
  }
  function Ac(s, l, d, y) {
    if (y = {
      lane: 2,
      revertLane: ps(),
      gesture: null,
      action: y,
      hasEagerState: !1,
      eagerState: null,
      next: null
    }, Hf(s)) {
      if (l) throw Error(r(479));
    } else
      l = vr(
        s,
        d,
        y,
        2
      ), l !== null && Ui(l, s, 2);
  }
  function Hf(s) {
    var l = s.alternate;
    return s === Vt || l !== null && l === Vt;
  }
  function Gf(s, l) {
    bc = Lf = !0;
    var d = s.pending;
    d === null ? l.next = l : (l.next = d.next, d.next = l), s.pending = l;
  }
  function qh(s, l, d) {
    if ((d & 4194048) !== 0) {
      var y = l.lanes;
      y &= s.pendingLanes, d |= y, l.lanes = d, wn(s, d);
    }
  }
  var vl = {
    readContext: ri,
    use: Cc,
    useCallback: Zn,
    useContext: Zn,
    useEffect: Zn,
    useImperativeHandle: Zn,
    useLayoutEffect: Zn,
    useInsertionEffect: Zn,
    useMemo: Zn,
    useReducer: Zn,
    useRef: Zn,
    useState: Zn,
    useDebugValue: Zn,
    useDeferredValue: Zn,
    useTransition: Zn,
    useSyncExternalStore: Zn,
    useId: Zn,
    useHostTransitionStatus: Zn,
    useFormState: Zn,
    useActionState: Zn,
    useOptimistic: Zn,
    useMemoCache: Zn,
    useCacheRefresh: Zn
  };
  vl.useEffectEvent = Zn;
  var tv = {
    readContext: ri,
    use: Cc,
    useCallback: function(s, l) {
      return yi().memoizedState = [
        s,
        l === void 0 ? null : l
      ], s;
    },
    useContext: ri,
    useEffect: Ym,
    useImperativeHandle: function(s, l, d) {
      d = d != null ? d.concat([s]) : null, ya(
        4194308,
        4,
        Zm.bind(null, l, s),
        d
      );
    },
    useLayoutEffect: function(s, l) {
      return ya(4194308, 4, s, l);
    },
    useInsertionEffect: function(s, l) {
      ya(4, 2, s, l);
    },
    useMemo: function(s, l) {
      var d = yi();
      l = l === void 0 ? null : l;
      var y = s();
      if (bu) {
        Ln(!0);
        try {
          s();
        } finally {
          Ln(!1);
        }
      }
      return d.memoizedState = [y, l], y;
    },
    useReducer: function(s, l, d) {
      var y = yi();
      if (d !== void 0) {
        var S = d(l);
        if (bu) {
          Ln(!0);
          try {
            d(l);
          } finally {
            Ln(!1);
          }
        }
      } else S = l;
      return y.memoizedState = y.baseState = S, s = {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: s,
        lastRenderedState: S
      }, y.queue = s, s = s.dispatch = Qb.bind(
        null,
        Vt,
        s
      ), [y.memoizedState, s];
    },
    useRef: function(s) {
      var l = yi();
      return s = { current: s }, l.memoizedState = s;
    },
    useState: function(s) {
      s = kc(s);
      var l = s.queue, d = ng.bind(null, Vt, l);
      return l.dispatch = d, [s.memoizedState, d];
    },
    useDebugValue: Lh,
    useDeferredValue: function(s, l) {
      var d = yi();
      return Vs(d, s, l);
    },
    useTransition: function() {
      var s = kc(!1);
      return s = ev.bind(
        null,
        Vt,
        s.queue,
        !0,
        !1
      ), yi().memoizedState = s, [!1, s];
    },
    useSyncExternalStore: function(s, l, d) {
      var y = Vt, S = yi();
      if (an) {
        if (d === void 0)
          throw Error(r(407));
        d = d();
      } else {
        if (d = l(), zn === null)
          throw Error(r(349));
        (tn & 127) !== 0 || Fm(y, l, d);
      }
      S.memoizedState = d;
      var j = { value: d, getSnapshot: l };
      return S.queue = j, Ym(Gy.bind(null, y, j, s), [
        s
      ]), y.flags |= 2048, cs(
        9,
        { destroy: void 0 },
        Hy.bind(
          null,
          y,
          j,
          d,
          l
        ),
        null
      ), d;
    },
    useId: function() {
      var s = yi(), l = zn.identifierPrefix;
      if (an) {
        var d = Is, y = Ba;
        d = (y & ~(1 << 32 - nt(y) - 1)).toString(32) + d, l = "_" + l + "R_" + d, d = Nh++, 0 < d && (l += "H" + d.toString(32)), l += "_";
      } else
        d = Wb++, l = "_" + l + "r_" + d.toString(32) + "_";
      return s.memoizedState = l;
    },
    useHostTransitionStatus: eg,
    useFormState: Hm,
    useActionState: Hm,
    useOptimistic: function(s) {
      var l = yi();
      l.memoizedState = l.baseState = s;
      var d = {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: null,
        lastRenderedState: null
      };
      return l.queue = d, l = Ac.bind(
        null,
        Vt,
        !0,
        d
      ), d.dispatch = l, [s, l];
    },
    useMemoCache: Bm,
    useCacheRefresh: function() {
      return yi().memoizedState = Vf.bind(
        null,
        Vt
      );
    },
    useEffectEvent: function(s) {
      var l = yi(), d = { impl: s };
      return l.memoizedState = d, function() {
        if ((yn & 2) !== 0)
          throw Error(r(440));
        return d.impl.apply(void 0, arguments);
      };
    }
  }, $h = {
    readContext: ri,
    use: Cc,
    useCallback: Xm,
    useContext: ri,
    useEffect: Uf,
    useImperativeHandle: Qy,
    useInsertionEffect: Xy,
    useLayoutEffect: Wm,
    useMemo: ki,
    useReducer: Ht,
    useRef: Wy,
    useState: function() {
      return Ht(ga);
    },
    useDebugValue: Lh,
    useDeferredValue: function(s, l) {
      var d = wr();
      return Jy(
        d,
        En.memoizedState,
        s,
        l
      );
    },
    useTransition: function() {
      var s = Ht(ga)[0], l = wr().memoizedState;
      return [
        typeof s == "boolean" ? s : Sc(s),
        l
      ];
    },
    useSyncExternalStore: Ec,
    useId: tg,
    useHostTransitionStatus: eg,
    useFormState: Ph,
    useActionState: Ph,
    useOptimistic: function(s, l) {
      var d = wr();
      return zh(d, En, s, l);
    },
    useMemoCache: Bm,
    useCacheRefresh: wu
  };
  $h.useEffectEvent = Zy;
  var Kf = {
    readContext: ri,
    use: Cc,
    useCallback: Xm,
    useContext: ri,
    useEffect: Uf,
    useImperativeHandle: Qy,
    useInsertionEffect: Xy,
    useLayoutEffect: Wm,
    useMemo: ki,
    useReducer: $m,
    useRef: Wy,
    useState: function() {
      return $m(ga);
    },
    useDebugValue: Lh,
    useDeferredValue: function(s, l) {
      var d = wr();
      return En === null ? Vs(d, s, l) : Jy(
        d,
        En.memoizedState,
        s,
        l
      );
    },
    useTransition: function() {
      var s = $m(ga)[0], l = wr().memoizedState;
      return [
        typeof s == "boolean" ? s : Sc(s),
        l
      ];
    },
    useSyncExternalStore: Ec,
    useId: tg,
    useHostTransitionStatus: eg,
    useFormState: Ih,
    useActionState: Ih,
    useOptimistic: function(s, l) {
      var d = wr();
      return En !== null ? zh(d, En, s, l) : (d.baseState = s, [s, d.queue.dispatch]);
    },
    useMemoCache: Bm,
    useCacheRefresh: wu
  };
  Kf.useEffectEvent = Zy;
  function Fh(s, l, d, y) {
    l = s.memoizedState, d = d(y, l), d = d == null ? l : g({}, l, d), s.memoizedState = d, s.lanes === 0 && (s.updateQueue.baseState = d);
  }
  var Yf = {
    enqueueSetState: function(s, l, d) {
      s = s._reactInternals;
      var y = hs(), S = pl(y);
      S.payload = l, d != null && (S.callback = d), l = pa(s, S, y), l !== null && (Ui(l, s, y), zf(l, s, y));
    },
    enqueueReplaceState: function(s, l, d) {
      s = s._reactInternals;
      var y = hs(), S = pl(y);
      S.tag = 1, S.payload = l, d != null && (S.callback = d), l = pa(s, S, y), l !== null && (Ui(l, s, y), zf(l, s, y));
    },
    enqueueForceUpdate: function(s, l) {
      s = s._reactInternals;
      var d = hs(), y = pl(d);
      y.tag = 2, l != null && (y.callback = l), l = pa(s, y, d), l !== null && (Ui(l, s, d), zf(l, s, d));
    }
  };
  function nv(s, l, d, y, S, j, L) {
    return s = s.stateNode, typeof s.shouldComponentUpdate == "function" ? s.shouldComponentUpdate(y, j, L) : l.prototype && l.prototype.isPureReactComponent ? !w(d, y) || !w(S, j) : !0;
  }
  function rg(s, l, d, y) {
    s = l.state, typeof l.componentWillReceiveProps == "function" && l.componentWillReceiveProps(d, y), typeof l.UNSAFE_componentWillReceiveProps == "function" && l.UNSAFE_componentWillReceiveProps(d, y), l.state !== s && Yf.enqueueReplaceState(l, l.state, null);
  }
  function Ti(s, l) {
    var d = l;
    if ("ref" in l) {
      d = {};
      for (var y in l)
        y !== "ref" && (d[y] = l[y]);
    }
    if (s = s.defaultProps) {
      d === l && (d = g({}, d));
      for (var S in s)
        d[S] === void 0 && (d[S] = s[S]);
    }
    return d;
  }
  function ig(s) {
    gt(s);
  }
  function sg(s) {
    console.error(s);
  }
  function rv(s) {
    gt(s);
  }
  function Wf(s, l) {
    try {
      var d = s.onUncaughtError;
      d(l.value, { componentStack: l.stack });
    } catch (y) {
      setTimeout(function() {
        throw y;
      });
    }
  }
  function iv(s, l, d) {
    try {
      var y = s.onCaughtError;
      y(d.value, {
        componentStack: d.stack,
        errorBoundary: l.tag === 1 ? l.stateNode : null
      });
    } catch (S) {
      setTimeout(function() {
        throw S;
      });
    }
  }
  function ag(s, l, d) {
    return d = pl(d), d.tag = 3, d.payload = { element: null }, d.callback = function() {
      Wf(s, l);
    }, d;
  }
  function Ua(s) {
    return s = pl(s), s.tag = 3, s;
  }
  function Uh(s, l, d, y) {
    var S = d.type.getDerivedStateFromError;
    if (typeof S == "function") {
      var j = y.value;
      s.payload = function() {
        return S(j);
      }, s.callback = function() {
        iv(l, d, y);
      };
    }
    var L = d.stateNode;
    L !== null && typeof L.componentDidCatch == "function" && (s.callback = function() {
      iv(l, d, y), typeof S != "function" && (Sl === null ? Sl = /* @__PURE__ */ new Set([this]) : Sl.add(this));
      var ee = y.stack;
      this.componentDidCatch(y.value, {
        componentStack: ee !== null ? ee : ""
      });
    });
  }
  function og(s, l, d, y, S) {
    if (d.flags |= 32768, y !== null && typeof y == "object" && typeof y.then == "function") {
      if (l = d.alternate, l !== null && hc(
        l,
        d,
        S,
        !0
      ), d = os.current, d !== null) {
        switch (d.tag) {
          case 31:
          case 13:
            return Fs === null ? rp() : d.alternate === null && ir === 0 && (ir = 3), d.flags &= -257, d.flags |= 65536, d.lanes = S, y === Ch ? d.flags |= 16384 : (l = d.updateQueue, l === null ? d.updateQueue = /* @__PURE__ */ new Set([y]) : l.add(y), Pg(s, y, S)), !1;
          case 22:
            return d.flags |= 65536, y === Ch ? d.flags |= 16384 : (l = d.updateQueue, l === null ? (l = {
              transitions: null,
              markerInstances: null,
              retryQueue: /* @__PURE__ */ new Set([y])
            }, d.updateQueue = l) : (d = l.retryQueue, d === null ? l.retryQueue = /* @__PURE__ */ new Set([y]) : d.add(y)), Pg(s, y, S)), !1;
        }
        throw Error(r(435, d.tag));
      }
      return Pg(s, y, S), rp(), !1;
    }
    if (an)
      return l = os.current, l !== null ? ((l.flags & 65536) === 0 && (l.flags |= 256), l.flags |= 65536, l.lanes = S, y !== Nm && (s = Error(r(422), { cause: y }), fl(is(s, d)))) : (y !== Nm && (l = Error(r(423), {
        cause: y
      }), fl(
        is(l, d)
      )), s = s.current.alternate, s.flags |= 65536, S &= -S, s.lanes |= S, y = is(y, d), S = ag(
        s.stateNode,
        y,
        S
      ), Th(s, S), ir !== 4 && (ir = 2)), !1;
    var j = Error(r(520), { cause: y });
    if (j = is(j, d), ud === null ? ud = [j] : ud.push(j), ir !== 4 && (ir = 2), l === null) return !0;
    y = is(y, d), d = l;
    do {
      switch (d.tag) {
        case 3:
          return d.flags |= 65536, s = S & -S, d.lanes |= s, s = ag(d.stateNode, y, s), Th(d, s), !1;
        case 1:
          if (l = d.type, j = d.stateNode, (d.flags & 128) === 0 && (typeof l.getDerivedStateFromError == "function" || j !== null && typeof j.componentDidCatch == "function" && (Sl === null || !Sl.has(j))))
            return d.flags |= 65536, S &= -S, d.lanes |= S, S = Ua(S), Uh(
              S,
              s,
              d,
              y
            ), Th(d, S), !1;
      }
      d = d.return;
    } while (d !== null);
    return !1;
  }
  var Zf = Error(r(461)), rr = !1;
  function lr(s, l, d, y) {
    l.child = s === null ? zm(l, null, d, y) : hl(
      l,
      s.child,
      d,
      y
    );
  }
  function Tt(s, l, d, y, S) {
    d = d.render;
    var j = l.ref;
    if ("ref" in y) {
      var L = {};
      for (var ee in y)
        ee !== "ref" && (L[ee] = y[ee]);
    } else L = y;
    return gu(l), y = Mh(
      s,
      l,
      d,
      L,
      j,
      S
    ), ee = Oh(), s !== null && !rr ? (Dh(s, l, S), Va(s, l, S)) : (an && ee && ol(l), l.flags |= 1, lr(s, l, y, S), l.child);
  }
  function Xf(s, l, d, y, S) {
    if (s === null) {
      var j = d.type;
      return typeof j == "function" && !xo(j) && j.defaultProps === void 0 && d.compare === null ? (l.tag = 15, l.type = j, Vh(
        s,
        l,
        j,
        y,
        S
      )) : (s = xh(
        d.type,
        null,
        y,
        l,
        l.mode,
        S
      ), s.ref = l.ref, s.return = l, l.child = s);
    }
    if (j = s.child, !Wh(s, S)) {
      var L = j.memoizedProps;
      if (d = d.compare, d = d !== null ? d : w, d(L, y) && s.ref === l.ref)
        return Va(s, l, S);
    }
    return l.flags |= 1, s = Ds(j, y), s.ref = l.ref, s.return = l, l.child = s;
  }
  function Vh(s, l, d, y, S) {
    if (s !== null) {
      var j = s.memoizedProps;
      if (w(j, y) && s.ref === l.ref)
        if (rr = !1, l.pendingProps = y = j, Wh(s, S))
          (s.flags & 131072) !== 0 && (rr = !0);
        else
          return l.lanes = s.lanes, Va(s, l, S);
    }
    return Kh(
      s,
      l,
      d,
      y,
      S
    );
  }
  function xl(s, l, d, y) {
    var S = y.children, j = s !== null ? s.memoizedState : null;
    if (s === null && l.stateNode === null && (l.stateNode = {
      _visibility: 1,
      _pendingMarkers: null,
      _retryCache: null,
      _transitions: null
    }), y.mode === "hidden") {
      if ((l.flags & 128) !== 0) {
        if (j = j !== null ? j.baseLanes | d : d, s !== null) {
          for (y = l.child = s.child, S = 0; y !== null; )
            S = S | y.lanes | y.childLanes, y = y.sibling;
          y = S & ~j;
        } else y = 0, l.child = null;
        return Hh(
          s,
          l,
          j,
          d,
          y
        );
      }
      if ((d & 536870912) !== 0)
        l.memoizedState = { baseLanes: 0, cachePool: null }, s !== null && _h(
          l,
          j !== null ? j.cachePool : null
        ), j !== null ? Pm(l, j) : ii(), Vy(l);
      else
        return y = l.lanes = 536870912, Hh(
          s,
          l,
          j !== null ? j.baseLanes | d : d,
          d,
          y
        );
    } else
      j !== null ? (_h(l, j.cachePool), Pm(l, j), Us(), l.memoizedState = null) : (s !== null && _h(l, null), ii(), Us());
    return lr(s, l, S, d), l.child;
  }
  function Qf(s, l) {
    return s !== null && s.tag === 22 || l.stateNode !== null || (l.stateNode = {
      _visibility: 1,
      _pendingMarkers: null,
      _retryCache: null,
      _transitions: null
    }), l.sibling;
  }
  function Hh(s, l, d, y, S) {
    var j = Om();
    return j = j === null ? null : { parent: jr._currentValue, pool: j }, l.memoizedState = {
      baseLanes: d,
      cachePool: j
    }, s !== null && _h(l, null), ii(), Vy(l), s !== null && hc(s, l, y, !0), l.childLanes = S, null;
  }
  function Jf(s, l) {
    return l = Yh(
      { mode: l.mode, children: l.children },
      s.mode
    ), l.ref = s.ref, s.child = l, l.return = s, l;
  }
  function si(s, l, d) {
    return hl(l, s.child, null, d), s = Jf(l, l.pendingProps), s.flags |= 2, Ii(l), l.memoizedState = null, s;
  }
  function Jb(s, l, d) {
    var y = l.pendingProps, S = (l.flags & 128) !== 0;
    if (l.flags &= -129, s === null) {
      if (an) {
        if (y.mode === "hidden")
          return s = Jf(l, y), l.lanes = 536870912, Qf(null, s);
        if (If(l), (s = vn) ? (s = Yv(
          s,
          Ls
        ), s = s !== null && s.data === "&" ? s : null, s !== null && (l.memoizedState = {
          dehydrated: s,
          treeContext: bo !== null ? { id: Ba, overflow: Is } : null,
          retryLane: 536870912,
          hydrationErrors: null
        }, d = jf(s), d.return = l, l.child = d, Ar = l, vn = null)) : s = null, s === null) throw ul(l);
        return l.lanes = 536870912, null;
      }
      return Jf(l, y);
    }
    var j = s.memoizedState;
    if (j !== null) {
      var L = j.dehydrated;
      if (If(l), S)
        if (l.flags & 256)
          l.flags &= -257, l = si(
            s,
            l,
            d
          );
        else if (l.memoizedState !== null)
          l.child = s.child, l.flags |= 128, l = null;
        else throw Error(r(558));
      else if (rr || hc(s, l, d, !1), S = (d & s.childLanes) !== 0, rr || S) {
        if (y = zn, y !== null && (L = Fn(y, d), L !== 0 && L !== j.retryLane))
          throw j.retryLane = L, On(s, L), Ui(y, s, L), Zf;
        rp(), l = si(
          s,
          l,
          d
        );
      } else
        s = j.treeContext, vn = Hs(L.nextSibling), Ar = l, an = !0, ll = null, Ls = !1, s !== null && fc(l, s), l = Jf(l, y), l.flags |= 4096;
      return l;
    }
    return s = Ds(s.child, {
      mode: y.mode,
      children: y.children
    }), s.ref = l.ref, l.child = s, s.return = l, s;
  }
  function Gh(s, l) {
    var d = l.ref;
    if (d === null)
      s !== null && s.ref !== null && (l.flags |= 4194816);
    else {
      if (typeof d != "function" && typeof d != "object")
        throw Error(r(284));
      (s === null || s.ref !== d) && (l.flags |= 4194816);
    }
  }
  function Kh(s, l, d, y, S) {
    return gu(l), d = Mh(
      s,
      l,
      d,
      y,
      void 0,
      S
    ), y = Oh(), s !== null && !rr ? (Dh(s, l, S), Va(s, l, S)) : (an && y && ol(l), l.flags |= 1, lr(s, l, d, S), l.child);
  }
  function sv(s, l, d, y, S, j) {
    return gu(l), l.updateQueue = null, d = Bf(
      l,
      y,
      d,
      S
    ), Im(s), y = Oh(), s !== null && !rr ? (Dh(s, l, j), Va(s, l, j)) : (an && y && ol(l), l.flags |= 1, lr(s, l, d, j), l.child);
  }
  function lg(s, l, d, y, S) {
    if (gu(l), l.stateNode === null) {
      var j = ti, L = d.contextType;
      typeof L == "object" && L !== null && (j = ri(L)), j = new d(y, j), l.memoizedState = j.state !== null && j.state !== void 0 ? j.state : null, j.updater = Yf, l.stateNode = j, j._reactInternals = l, j = l.stateNode, j.props = y, j.state = l.memoizedState, j.refs = {}, $a(l), L = d.contextType, j.context = typeof L == "object" && L !== null ? ri(L) : ti, j.state = l.memoizedState, L = d.getDerivedStateFromProps, typeof L == "function" && (Fh(
        l,
        d,
        L,
        y
      ), j.state = l.memoizedState), typeof d.getDerivedStateFromProps == "function" || typeof j.getSnapshotBeforeUpdate == "function" || typeof j.UNSAFE_componentWillMount != "function" && typeof j.componentWillMount != "function" || (L = j.state, typeof j.componentWillMount == "function" && j.componentWillMount(), typeof j.UNSAFE_componentWillMount == "function" && j.UNSAFE_componentWillMount(), L !== j.state && Yf.enqueueReplaceState(j, j.state, null), xc(l, y, j, S), xu(), j.state = l.memoizedState), typeof j.componentDidMount == "function" && (l.flags |= 4194308), y = !0;
    } else if (s === null) {
      j = l.stateNode;
      var ee = l.memoizedProps, xe = Ti(d, ee);
      j.props = xe;
      var De = j.context, Fe = d.contextType;
      L = ti, typeof Fe == "object" && Fe !== null && (L = ri(Fe));
      var Ge = d.getDerivedStateFromProps;
      Fe = typeof Ge == "function" || typeof j.getSnapshotBeforeUpdate == "function", ee = l.pendingProps !== ee, Fe || typeof j.UNSAFE_componentWillReceiveProps != "function" && typeof j.componentWillReceiveProps != "function" || (ee || De !== L) && rg(
        l,
        j,
        y,
        L
      ), $s = !1;
      var Pe = l.memoizedState;
      j.state = Pe, xc(l, y, j, S), xu(), De = l.memoizedState, ee || Pe !== De || $s ? (typeof Ge == "function" && (Fh(
        l,
        d,
        Ge,
        y
      ), De = l.memoizedState), (xe = $s || nv(
        l,
        d,
        xe,
        y,
        Pe,
        De,
        L
      )) ? (Fe || typeof j.UNSAFE_componentWillMount != "function" && typeof j.componentWillMount != "function" || (typeof j.componentWillMount == "function" && j.componentWillMount(), typeof j.UNSAFE_componentWillMount == "function" && j.UNSAFE_componentWillMount()), typeof j.componentDidMount == "function" && (l.flags |= 4194308)) : (typeof j.componentDidMount == "function" && (l.flags |= 4194308), l.memoizedProps = y, l.memoizedState = De), j.props = y, j.state = De, j.context = L, y = xe) : (typeof j.componentDidMount == "function" && (l.flags |= 4194308), y = !1);
    } else {
      j = l.stateNode, kh(s, l), L = l.memoizedProps, Fe = Ti(d, L), j.props = Fe, Ge = l.pendingProps, Pe = j.context, De = d.contextType, xe = ti, typeof De == "object" && De !== null && (xe = ri(De)), ee = d.getDerivedStateFromProps, (De = typeof ee == "function" || typeof j.getSnapshotBeforeUpdate == "function") || typeof j.UNSAFE_componentWillReceiveProps != "function" && typeof j.componentWillReceiveProps != "function" || (L !== Ge || Pe !== xe) && rg(
        l,
        j,
        y,
        xe
      ), $s = !1, Pe = l.memoizedState, j.state = Pe, xc(l, y, j, S), xu();
      var Be = l.memoizedState;
      L !== Ge || Pe !== Be || $s || s !== null && s.dependencies !== null && wh(s.dependencies) ? (typeof ee == "function" && (Fh(
        l,
        d,
        ee,
        y
      ), Be = l.memoizedState), (Fe = $s || nv(
        l,
        d,
        Fe,
        y,
        Pe,
        Be,
        xe
      ) || s !== null && s.dependencies !== null && wh(s.dependencies)) ? (De || typeof j.UNSAFE_componentWillUpdate != "function" && typeof j.componentWillUpdate != "function" || (typeof j.componentWillUpdate == "function" && j.componentWillUpdate(y, Be, xe), typeof j.UNSAFE_componentWillUpdate == "function" && j.UNSAFE_componentWillUpdate(
        y,
        Be,
        xe
      )), typeof j.componentDidUpdate == "function" && (l.flags |= 4), typeof j.getSnapshotBeforeUpdate == "function" && (l.flags |= 1024)) : (typeof j.componentDidUpdate != "function" || L === s.memoizedProps && Pe === s.memoizedState || (l.flags |= 4), typeof j.getSnapshotBeforeUpdate != "function" || L === s.memoizedProps && Pe === s.memoizedState || (l.flags |= 1024), l.memoizedProps = y, l.memoizedState = Be), j.props = y, j.state = Be, j.context = xe, y = Fe) : (typeof j.componentDidUpdate != "function" || L === s.memoizedProps && Pe === s.memoizedState || (l.flags |= 4), typeof j.getSnapshotBeforeUpdate != "function" || L === s.memoizedProps && Pe === s.memoizedState || (l.flags |= 1024), y = !1);
    }
    return j = y, Gh(s, l), y = (l.flags & 128) !== 0, j || y ? (j = l.stateNode, d = y && typeof d.getDerivedStateFromError != "function" ? null : j.render(), l.flags |= 1, s !== null && y ? (l.child = hl(
      l,
      s.child,
      null,
      S
    ), l.child = hl(
      l,
      null,
      d,
      S
    )) : lr(s, l, d, S), l.memoizedState = j.state, s = l.child) : s = Va(
      s,
      l,
      S
    ), s;
  }
  function av(s, l, d, y) {
    return te(), l.flags |= 256, lr(s, l, d, y), l.child;
  }
  var ug = {
    dehydrated: null,
    treeContext: null,
    retryLane: 0,
    hydrationErrors: null
  };
  function cg(s) {
    return { baseLanes: s, cachePool: qy() };
  }
  function va(s, l, d) {
    return s = s !== null ? s.childLanes & ~d : 0, l && (s |= ds), s;
  }
  function vi(s, l, d) {
    var y = l.pendingProps, S = !1, j = (l.flags & 128) !== 0, L;
    if ((L = j) || (L = s !== null && s.memoizedState === null ? !1 : (br.current & 2) !== 0), L && (S = !0, l.flags &= -129), L = (l.flags & 32) !== 0, l.flags &= -33, s === null) {
      if (an) {
        if (S ? ml(l) : Us(), (s = vn) ? (s = Yv(
          s,
          Ls
        ), s = s !== null && s.data !== "&" ? s : null, s !== null && (l.memoizedState = {
          dehydrated: s,
          treeContext: bo !== null ? { id: Ba, overflow: Is } : null,
          retryLane: 536870912,
          hydrationErrors: null
        }, d = jf(s), d.return = l, l.child = d, Ar = l, vn = null)) : s = null, s === null) throw ul(l);
        return Lc(s) ? l.lanes = 32 : l.lanes = 536870912, null;
      }
      var ee = y.children;
      return y = y.fallback, S ? (Us(), S = l.mode, ee = Yh(
        { mode: "hidden", children: ee },
        S
      ), y = hu(
        y,
        S,
        d,
        null
      ), ee.return = l, y.return = l, ee.sibling = y, l.child = ee, y = l.child, y.memoizedState = cg(d), y.childLanes = va(
        s,
        L,
        d
      ), l.memoizedState = ug, Qf(null, y)) : (ml(l), ed(l, ee));
    }
    var xe = s.memoizedState;
    if (xe !== null && (ee = xe.dehydrated, ee !== null)) {
      if (j)
        l.flags & 256 ? (ml(l), l.flags &= -257, l = td(
          s,
          l,
          d
        )) : l.memoizedState !== null ? (Us(), l.child = s.child, l.flags |= 128, l = null) : (Us(), ee = y.fallback, S = l.mode, y = Yh(
          { mode: "visible", children: y.children },
          S
        ), ee = hu(
          ee,
          S,
          d,
          null
        ), ee.flags |= 2, y.return = l, ee.return = l, y.sibling = ee, l.child = y, hl(
          l,
          s.child,
          null,
          d
        ), y = l.child, y.memoizedState = cg(d), y.childLanes = va(
          s,
          L,
          d
        ), l.memoizedState = ug, l = Qf(null, y));
      else if (ml(l), Lc(ee)) {
        if (L = ee.nextSibling && ee.nextSibling.dataset, L) var De = L.dgst;
        L = De, y = Error(r(419)), y.stack = "", y.digest = L, fl({ value: y, source: null, stack: null }), l = td(
          s,
          l,
          d
        );
      } else if (rr || hc(s, l, d, !1), L = (d & s.childLanes) !== 0, rr || L) {
        if (L = zn, L !== null && (y = Fn(L, d), y !== 0 && y !== xe.retryLane))
          throw xe.retryLane = y, On(s, y), Ui(L, s, y), Zf;
        dp(ee) || rp(), l = td(
          s,
          l,
          d
        );
      } else
        dp(ee) ? (l.flags |= 192, l.child = s.child, l = null) : (s = xe.treeContext, vn = Hs(
          ee.nextSibling
        ), Ar = l, an = !0, ll = null, Ls = !1, s !== null && fc(l, s), l = ed(
          l,
          y.children
        ), l.flags |= 4096);
      return l;
    }
    return S ? (Us(), ee = y.fallback, S = l.mode, xe = s.child, De = xe.sibling, y = Ds(xe, {
      mode: "hidden",
      children: y.children
    }), y.subtreeFlags = xe.subtreeFlags & 65011712, De !== null ? ee = Ds(
      De,
      ee
    ) : (ee = hu(
      ee,
      S,
      d,
      null
    ), ee.flags |= 2), ee.return = l, y.return = l, y.sibling = ee, l.child = y, Qf(null, y), y = l.child, ee = s.child.memoizedState, ee === null ? ee = cg(d) : (S = ee.cachePool, S !== null ? (xe = jr._currentValue, S = S.parent !== xe ? { parent: xe, pool: xe } : S) : S = qy(), ee = {
      baseLanes: ee.baseLanes | d,
      cachePool: S
    }), y.memoizedState = ee, y.childLanes = va(
      s,
      L,
      d
    ), l.memoizedState = ug, Qf(s.child, y)) : (ml(l), d = s.child, s = d.sibling, d = Ds(d, {
      mode: "visible",
      children: y.children
    }), d.return = l, d.sibling = null, s !== null && (L = l.deletions, L === null ? (l.deletions = [s], l.flags |= 16) : L.push(s)), l.child = d, l.memoizedState = null, d);
  }
  function ed(s, l) {
    return l = Yh(
      { mode: "visible", children: l },
      s.mode
    ), l.return = s, s.child = l;
  }
  function Yh(s, l) {
    return s = ni(22, s, null, l), s.lanes = 0, s;
  }
  function td(s, l, d) {
    return hl(l, s.child, null, d), s = ed(
      l,
      l.pendingProps.children
    ), s.flags |= 2, l.memoizedState = null, s;
  }
  function ov(s, l, d) {
    s.lanes |= l;
    var y = s.alternate;
    y !== null && (y.lanes |= l), So(s.return, l, d);
  }
  function fg(s, l, d, y, S, j) {
    var L = s.memoizedState;
    L === null ? s.memoizedState = {
      isBackwards: l,
      rendering: null,
      renderingStartTime: 0,
      last: y,
      tail: d,
      tailMode: S,
      treeForkCount: j
    } : (L.isBackwards = l, L.rendering = null, L.renderingStartTime = 0, L.last = y, L.tail = d, L.tailMode = S, L.treeForkCount = j);
  }
  function jc(s, l, d) {
    var y = l.pendingProps, S = y.revealOrder, j = y.tail;
    y = y.children;
    var L = br.current, ee = (L & 2) !== 0;
    if (ee ? (L = L & 1 | 2, l.flags |= 128) : L &= 1, V(br, L), lr(s, l, y, d), y = an ? Tr : 0, !ee && s !== null && (s.flags & 128) !== 0)
      e: for (s = l.child; s !== null; ) {
        if (s.tag === 13)
          s.memoizedState !== null && ov(s, d, l);
        else if (s.tag === 19)
          ov(s, d, l);
        else if (s.child !== null) {
          s.child.return = s, s = s.child;
          continue;
        }
        if (s === l) break e;
        for (; s.sibling === null; ) {
          if (s.return === null || s.return === l)
            break e;
          s = s.return;
        }
        s.sibling.return = s.return, s = s.sibling;
      }
    switch (S) {
      case "forwards":
        for (d = l.child, S = null; d !== null; )
          s = d.alternate, s !== null && jh(s) === null && (S = d), d = d.sibling;
        d = S, d === null ? (S = l.child, l.child = null) : (S = d.sibling, d.sibling = null), fg(
          l,
          !1,
          S,
          d,
          j,
          y
        );
        break;
      case "backwards":
      case "unstable_legacy-backwards":
        for (d = null, S = l.child, l.child = null; S !== null; ) {
          if (s = S.alternate, s !== null && jh(s) === null) {
            l.child = S;
            break;
          }
          s = S.sibling, S.sibling = d, d = S, S = s;
        }
        fg(
          l,
          !0,
          d,
          null,
          j,
          y
        );
        break;
      case "together":
        fg(
          l,
          !1,
          null,
          null,
          void 0,
          y
        );
        break;
      default:
        l.memoizedState = null;
    }
    return l.child;
  }
  function Va(s, l, d) {
    if (s !== null && (l.dependencies = s.dependencies), _l |= l.lanes, (d & l.childLanes) === 0)
      if (s !== null) {
        if (hc(
          s,
          l,
          d,
          !1
        ), (d & l.childLanes) === 0)
          return null;
      } else return null;
    if (s !== null && l.child !== s.child)
      throw Error(r(153));
    if (l.child !== null) {
      for (s = l.child, d = Ds(s, s.pendingProps), l.child = d, d.return = l; s.sibling !== null; )
        s = s.sibling, d = d.sibling = Ds(s, s.pendingProps), d.return = l;
      d.sibling = null;
    }
    return l.child;
  }
  function Wh(s, l) {
    return (s.lanes & l) !== 0 ? !0 : (s = s.dependencies, !!(s !== null && wh(s)));
  }
  function e2(s, l, d) {
    switch (l.tag) {
      case 3:
        Ie(l, l.stateNode.containerInfo), dl(l, jr, s.memoizedState.cache), te();
        break;
      case 27:
      case 5:
        dt(l);
        break;
      case 4:
        Ie(l, l.stateNode.containerInfo);
        break;
      case 10:
        dl(
          l,
          l.type,
          l.memoizedProps.value
        );
        break;
      case 31:
        if (l.memoizedState !== null)
          return l.flags |= 128, If(l), null;
        break;
      case 13:
        var y = l.memoizedState;
        if (y !== null)
          return y.dehydrated !== null ? (ml(l), l.flags |= 128, null) : (d & l.child.childLanes) !== 0 ? vi(s, l, d) : (ml(l), s = Va(
            s,
            l,
            d
          ), s !== null ? s.sibling : null);
        ml(l);
        break;
      case 19:
        var S = (s.flags & 128) !== 0;
        if (y = (d & l.childLanes) !== 0, y || (hc(
          s,
          l,
          d,
          !1
        ), y = (d & l.childLanes) !== 0), S) {
          if (y)
            return jc(
              s,
              l,
              d
            );
          l.flags |= 128;
        }
        if (S = l.memoizedState, S !== null && (S.rendering = null, S.tail = null, S.lastEffect = null), V(br, br.current), y) break;
        return null;
      case 22:
        return l.lanes = 0, xl(
          s,
          l,
          d,
          l.pendingProps
        );
      case 24:
        dl(l, jr, s.memoizedState.cache);
    }
    return Va(s, l, d);
  }
  function lv(s, l, d) {
    if (s !== null)
      if (s.memoizedProps !== l.pendingProps)
        rr = !0;
      else {
        if (!Wh(s, d) && (l.flags & 128) === 0)
          return rr = !1, e2(
            s,
            l,
            d
          );
        rr = (s.flags & 131072) !== 0;
      }
    else
      rr = !1, an && (l.flags & 1048576) !== 0 && bh(l, Tr, l.index);
    switch (l.lanes = 0, l.tag) {
      case 16:
        e: {
          var y = l.pendingProps;
          if (s = da(l.elementType), l.type = s, typeof s == "function")
            xo(s) ? (y = Ti(s, y), l.tag = 1, l = lg(
              null,
              l,
              s,
              y,
              d
            )) : (l.tag = 0, l = Kh(
              null,
              l,
              s,
              y,
              d
            ));
          else {
            if (s != null) {
              var S = s.$$typeof;
              if (S === O) {
                l.tag = 11, l = Tt(
                  null,
                  l,
                  s,
                  y,
                  d
                );
                break e;
              } else if (S === q) {
                l.tag = 14, l = Xf(
                  null,
                  l,
                  s,
                  y,
                  d
                );
                break e;
              }
            }
            throw l = J(s) || s, Error(r(306, l, ""));
          }
        }
        return l;
      case 0:
        return Kh(
          s,
          l,
          l.type,
          l.pendingProps,
          d
        );
      case 1:
        return y = l.type, S = Ti(
          y,
          l.pendingProps
        ), lg(
          s,
          l,
          y,
          S,
          d
        );
      case 3:
        e: {
          if (Ie(
            l,
            l.stateNode.containerInfo
          ), s === null) throw Error(r(387));
          y = l.pendingProps;
          var j = l.memoizedState;
          S = j.element, kh(s, l), xc(l, y, null, d);
          var L = l.memoizedState;
          if (y = L.cache, dl(l, jr, y), y !== j.cache && Rm(
            l,
            [jr],
            d,
            !0
          ), xu(), y = L.element, j.isDehydrated)
            if (j = {
              element: y,
              isDehydrated: !1,
              cache: L.cache
            }, l.updateQueue.baseState = j, l.memoizedState = j, l.flags & 256) {
              l = av(
                s,
                l,
                y,
                d
              );
              break e;
            } else if (y !== S) {
              S = is(
                Error(r(424)),
                l
              ), fl(S), l = av(
                s,
                l,
                y,
                d
              );
              break e;
            } else {
              switch (s = l.stateNode.containerInfo, s.nodeType) {
                case 9:
                  s = s.body;
                  break;
                default:
                  s = s.nodeName === "HTML" ? s.ownerDocument.body : s;
              }
              for (vn = Hs(s.firstChild), Ar = l, an = !0, ll = null, Ls = !0, d = zm(
                l,
                null,
                y,
                d
              ), l.child = d; d; )
                d.flags = d.flags & -3 | 4096, d = d.sibling;
            }
          else {
            if (te(), y === S) {
              l = Va(
                s,
                l,
                d
              );
              break e;
            }
            lr(s, l, y, d);
          }
          l = l.child;
        }
        return l;
      case 26:
        return Gh(s, l), s === null ? (d = e1(
          l.type,
          null,
          l.pendingProps,
          null
        )) ? l.memoizedState = d : an || (d = l.type, s = l.pendingProps, y = wd(
          we.current
        ).createElement(d), y[Cn] = l, y[er] = s, ai(y, d, s), tr(y), l.stateNode = y) : l.memoizedState = e1(
          l.type,
          s.memoizedProps,
          l.pendingProps,
          s.memoizedState
        ), null;
      case 27:
        return dt(l), s === null && an && (y = l.stateNode = Xv(
          l.type,
          l.pendingProps,
          we.current
        ), Ar = l, Ls = !0, S = vn, Ot(l.type) ? (Yg = S, vn = Hs(y.firstChild)) : vn = S), lr(
          s,
          l,
          l.pendingProps.children,
          d
        ), Gh(s, l), s === null && (l.flags |= 4194304), l.child;
      case 5:
        return s === null && an && ((S = y = vn) && (y = g2(
          y,
          l.type,
          l.pendingProps,
          Ls
        ), y !== null ? (l.stateNode = y, Ar = l, vn = Hs(y.firstChild), Ls = !1, S = !0) : S = !1), S || ul(l)), dt(l), S = l.type, j = l.pendingProps, L = s !== null ? s.memoizedProps : null, y = j.children, Tl(S, j) ? y = null : L !== null && Tl(S, L) && (l.flags |= 32), l.memoizedState !== null && (S = Mh(
          s,
          l,
          Zb,
          null,
          null,
          d
        ), Vc._currentValue = S), Gh(s, l), lr(s, l, y, d), l.child;
      case 6:
        return s === null && an && ((s = d = vn) && (d = xn(
          d,
          l.pendingProps,
          Ls
        ), d !== null ? (l.stateNode = d, Ar = l, vn = null, s = !0) : s = !1), s || ul(l)), null;
      case 13:
        return vi(s, l, d);
      case 4:
        return Ie(
          l,
          l.stateNode.containerInfo
        ), y = l.pendingProps, s === null ? l.child = hl(
          l,
          null,
          y,
          d
        ) : lr(s, l, y, d), l.child;
      case 11:
        return Tt(
          s,
          l,
          l.type,
          l.pendingProps,
          d
        );
      case 7:
        return lr(
          s,
          l,
          l.pendingProps,
          d
        ), l.child;
      case 8:
        return lr(
          s,
          l,
          l.pendingProps.children,
          d
        ), l.child;
      case 12:
        return lr(
          s,
          l,
          l.pendingProps.children,
          d
        ), l.child;
      case 10:
        return y = l.pendingProps, dl(l, l.type, y.value), lr(s, l, y.children, d), l.child;
      case 9:
        return S = l.type._context, y = l.pendingProps.children, gu(l), S = ri(S), y = y(S), l.flags |= 1, lr(s, l, y, d), l.child;
      case 14:
        return Xf(
          s,
          l,
          l.type,
          l.pendingProps,
          d
        );
      case 15:
        return Vh(
          s,
          l,
          l.type,
          l.pendingProps,
          d
        );
      case 19:
        return jc(s, l, d);
      case 31:
        return Jb(s, l, d);
      case 22:
        return xl(
          s,
          l,
          d,
          l.pendingProps
        );
      case 24:
        return gu(l), y = ri(jr), s === null ? (S = Om(), S === null && (S = zn, j = fa(), S.pooledCache = j, j.refCount++, j !== null && (S.pooledCacheLanes |= d), S = j), l.memoizedState = { parent: y, cache: S }, $a(l), dl(l, jr, S)) : ((s.lanes & d) !== 0 && (kh(s, l), xc(l, null, null, d), xu()), S = s.memoizedState, j = l.memoizedState, S.parent !== y ? (S = { parent: y, cache: y }, l.memoizedState = S, l.lanes === 0 && (l.memoizedState = l.updateQueue.baseState = S), dl(l, jr, y)) : (y = j.cache, dl(l, jr, y), y !== S.cache && Rm(
          l,
          [jr],
          d,
          !0
        ))), lr(
          s,
          l,
          l.pendingProps.children,
          d
        ), l.child;
      case 29:
        throw l.pendingProps;
    }
    throw Error(r(156, l.tag));
  }
  function ko(s) {
    s.flags |= 4;
  }
  function dg(s, l, d, y, S) {
    if ((l = (s.mode & 32) !== 0) && (l = !1), l) {
      if (s.flags |= 16777216, (S & 335544128) === S)
        if (s.stateNode.complete) s.flags |= 8192;
        else if (dd()) s.flags |= 8192;
        else
          throw qa = Ch, Sh;
    } else s.flags &= -16777217;
  }
  function hg(s, l) {
    if (l.type !== "stylesheet" || (l.state.loading & 4) !== 0)
      s.flags &= -16777217;
    else if (s.flags |= 16777216, !s1(l))
      if (dd()) s.flags |= 8192;
      else
        throw qa = Ch, Sh;
  }
  function nd(s, l) {
    l !== null && (s.flags |= 4), s.flags & 16384 && (l = s.tag !== 22 ? Xl() : 536870912, s.lanes |= l, Oc |= l);
  }
  function rd(s, l) {
    if (!an)
      switch (s.tailMode) {
        case "hidden":
          l = s.tail;
          for (var d = null; l !== null; )
            l.alternate !== null && (d = l), l = l.sibling;
          d === null ? s.tail = null : d.sibling = null;
          break;
        case "collapsed":
          d = s.tail;
          for (var y = null; d !== null; )
            d.alternate !== null && (y = d), d = d.sibling;
          y === null ? l || s.tail === null ? s.tail = null : s.tail.sibling = null : y.sibling = null;
      }
  }
  function Dn(s) {
    var l = s.alternate !== null && s.alternate.child === s.child, d = 0, y = 0;
    if (l)
      for (var S = s.child; S !== null; )
        d |= S.lanes | S.childLanes, y |= S.subtreeFlags & 65011712, y |= S.flags & 65011712, S.return = s, S = S.sibling;
    else
      for (S = s.child; S !== null; )
        d |= S.lanes | S.childLanes, y |= S.subtreeFlags, y |= S.flags, S.return = s, S = S.sibling;
    return s.subtreeFlags |= y, s.childLanes = d, l;
  }
  function uv(s, l, d) {
    var y = l.pendingProps;
    switch (pu(l), l.tag) {
      case 16:
      case 15:
      case 0:
      case 11:
      case 7:
      case 8:
      case 12:
      case 9:
      case 14:
        return Dn(l), null;
      case 1:
        return Dn(l), null;
      case 3:
        return d = l.stateNode, y = null, s !== null && (y = s.memoizedState.cache), l.memoizedState.cache !== y && (l.flags |= 2048), _o(jr), Me(), d.pendingContext && (d.context = d.pendingContext, d.pendingContext = null), (s === null || s.child === null) && (mu(l) ? ko(l) : s === null || s.memoizedState.isDehydrated && (l.flags & 256) === 0 || (l.flags |= 1024, cl())), Dn(l), null;
      case 26:
        var S = l.type, j = l.memoizedState;
        return s === null ? (ko(l), j !== null ? (Dn(l), hg(l, j)) : (Dn(l), dg(
          l,
          S,
          null,
          y,
          d
        ))) : j ? j !== s.memoizedState ? (ko(l), Dn(l), hg(l, j)) : (Dn(l), l.flags &= -16777217) : (s = s.memoizedProps, s !== y && ko(l), Dn(l), dg(
          l,
          S,
          s,
          y,
          d
        )), null;
      case 27:
        if (ut(l), d = we.current, S = l.type, s !== null && l.stateNode != null)
          s.memoizedProps !== y && ko(l);
        else {
          if (!y) {
            if (l.stateNode === null)
              throw Error(r(166));
            return Dn(l), null;
          }
          s = ae.current, mu(l) ? Rf(l) : (s = Xv(S, y, d), l.stateNode = s, ko(l));
        }
        return Dn(l), null;
      case 5:
        if (ut(l), S = l.type, s !== null && l.stateNode != null)
          s.memoizedProps !== y && ko(l);
        else {
          if (!y) {
            if (l.stateNode === null)
              throw Error(r(166));
            return Dn(l), null;
          }
          if (j = ae.current, mu(l))
            Rf(l);
          else {
            var L = wd(
              we.current
            );
            switch (j) {
              case 1:
                j = L.createElementNS(
                  "http://www.w3.org/2000/svg",
                  S
                );
                break;
              case 2:
                j = L.createElementNS(
                  "http://www.w3.org/1998/Math/MathML",
                  S
                );
                break;
              default:
                switch (S) {
                  case "svg":
                    j = L.createElementNS(
                      "http://www.w3.org/2000/svg",
                      S
                    );
                    break;
                  case "math":
                    j = L.createElementNS(
                      "http://www.w3.org/1998/Math/MathML",
                      S
                    );
                    break;
                  case "script":
                    j = L.createElement("div"), j.innerHTML = "<script><\/script>", j = j.removeChild(
                      j.firstChild
                    );
                    break;
                  case "select":
                    j = typeof y.is == "string" ? L.createElement("select", {
                      is: y.is
                    }) : L.createElement("select"), y.multiple ? j.multiple = !0 : y.size && (j.size = y.size);
                    break;
                  default:
                    j = typeof y.is == "string" ? L.createElement(S, { is: y.is }) : L.createElement(S);
                }
            }
            j[Cn] = l, j[er] = y;
            e: for (L = l.child; L !== null; ) {
              if (L.tag === 5 || L.tag === 6)
                j.appendChild(L.stateNode);
              else if (L.tag !== 4 && L.tag !== 27 && L.child !== null) {
                L.child.return = L, L = L.child;
                continue;
              }
              if (L === l) break e;
              for (; L.sibling === null; ) {
                if (L.return === null || L.return === l)
                  break e;
                L = L.return;
              }
              L.sibling.return = L.return, L = L.sibling;
            }
            l.stateNode = j;
            e: switch (ai(j, S, y), S) {
              case "button":
              case "input":
              case "select":
              case "textarea":
                y = !!y.autoFocus;
                break e;
              case "img":
                y = !0;
                break e;
              default:
                y = !1;
            }
            y && ko(l);
          }
        }
        return Dn(l), dg(
          l,
          l.type,
          s === null ? null : s.memoizedProps,
          l.pendingProps,
          d
        ), null;
      case 6:
        if (s && l.stateNode != null)
          s.memoizedProps !== y && ko(l);
        else {
          if (typeof y != "string" && l.stateNode === null)
            throw Error(r(166));
          if (s = we.current, mu(l)) {
            if (s = l.stateNode, d = l.memoizedProps, y = null, S = Ar, S !== null)
              switch (S.tag) {
                case 27:
                case 5:
                  y = S.memoizedProps;
              }
            s[Cn] = l, s = !!(s.nodeValue === d || y !== null && y.suppressHydrationWarning === !0 || Vv(s.nodeValue, d)), s || ul(l, !0);
          } else
            s = wd(s).createTextNode(
              y
            ), s[Cn] = l, l.stateNode = s;
        }
        return Dn(l), null;
      case 31:
        if (d = l.memoizedState, s === null || s.memoizedState !== null) {
          if (y = mu(l), d !== null) {
            if (s === null) {
              if (!y) throw Error(r(318));
              if (s = l.memoizedState, s = s !== null ? s.dehydrated : null, !s) throw Error(r(557));
              s[Cn] = l;
            } else
              te(), (l.flags & 128) === 0 && (l.memoizedState = null), l.flags |= 4;
            Dn(l), s = !1;
          } else
            d = cl(), s !== null && s.memoizedState !== null && (s.memoizedState.hydrationErrors = d), s = !0;
          if (!s)
            return l.flags & 256 ? (Ii(l), l) : (Ii(l), null);
          if ((l.flags & 128) !== 0)
            throw Error(r(558));
        }
        return Dn(l), null;
      case 13:
        if (y = l.memoizedState, s === null || s.memoizedState !== null && s.memoizedState.dehydrated !== null) {
          if (S = mu(l), y !== null && y.dehydrated !== null) {
            if (s === null) {
              if (!S) throw Error(r(318));
              if (S = l.memoizedState, S = S !== null ? S.dehydrated : null, !S) throw Error(r(317));
              S[Cn] = l;
            } else
              te(), (l.flags & 128) === 0 && (l.memoizedState = null), l.flags |= 4;
            Dn(l), S = !1;
          } else
            S = cl(), s !== null && s.memoizedState !== null && (s.memoizedState.hydrationErrors = S), S = !0;
          if (!S)
            return l.flags & 256 ? (Ii(l), l) : (Ii(l), null);
        }
        return Ii(l), (l.flags & 128) !== 0 ? (l.lanes = d, l) : (d = y !== null, s = s !== null && s.memoizedState !== null, d && (y = l.child, S = null, y.alternate !== null && y.alternate.memoizedState !== null && y.alternate.memoizedState.cachePool !== null && (S = y.alternate.memoizedState.cachePool.pool), j = null, y.memoizedState !== null && y.memoizedState.cachePool !== null && (j = y.memoizedState.cachePool.pool), j !== S && (y.flags |= 2048)), d !== s && d && (l.child.flags |= 8192), nd(l, l.updateQueue), Dn(l), null);
      case 4:
        return Me(), s === null && $g(l.stateNode.containerInfo), Dn(l), null;
      case 10:
        return _o(l.type), Dn(l), null;
      case 19:
        if (de(br), y = l.memoizedState, y === null) return Dn(l), null;
        if (S = (l.flags & 128) !== 0, j = y.rendering, j === null)
          if (S) rd(y, !1);
          else {
            if (ir !== 0 || s !== null && (s.flags & 128) !== 0)
              for (s = l.child; s !== null; ) {
                if (j = jh(s), j !== null) {
                  for (l.flags |= 128, rd(y, !1), s = j.updateQueue, l.updateQueue = s, nd(l, s), l.subtreeFlags = 0, s = d, d = l.child; d !== null; )
                    Py(d, s), d = d.sibling;
                  return V(
                    br,
                    br.current & 1 | 2
                  ), an && ss(l, y.treeForkCount), l.child;
                }
                s = s.sibling;
              }
            y.tail !== null && bn() > Cu && (l.flags |= 128, S = !0, rd(y, !1), l.lanes = 4194304);
          }
        else {
          if (!S)
            if (s = jh(j), s !== null) {
              if (l.flags |= 128, S = !0, s = s.updateQueue, l.updateQueue = s, nd(l, s), rd(y, !0), y.tail === null && y.tailMode === "hidden" && !j.alternate && !an)
                return Dn(l), null;
            } else
              2 * bn() - y.renderingStartTime > Cu && d !== 536870912 && (l.flags |= 128, S = !0, rd(y, !1), l.lanes = 4194304);
          y.isBackwards ? (j.sibling = l.child, l.child = j) : (s = y.last, s !== null ? s.sibling = j : l.child = j, y.last = j);
        }
        return y.tail !== null ? (s = y.tail, y.rendering = s, y.tail = s.sibling, y.renderingStartTime = bn(), s.sibling = null, d = br.current, V(
          br,
          S ? d & 1 | 2 : d & 1
        ), an && ss(l, y.treeForkCount), s) : (Dn(l), null);
      case 22:
      case 23:
        return Ii(l), Pf(), y = l.memoizedState !== null, s !== null ? s.memoizedState !== null !== y && (l.flags |= 8192) : y && (l.flags |= 8192), y ? (d & 536870912) !== 0 && (l.flags & 128) === 0 && (Dn(l), l.subtreeFlags & 6 && (l.flags |= 8192)) : Dn(l), d = l.updateQueue, d !== null && nd(l, d.retryQueue), d = null, s !== null && s.memoizedState !== null && s.memoizedState.cachePool !== null && (d = s.memoizedState.cachePool.pool), y = null, l.memoizedState !== null && l.memoizedState.cachePool !== null && (y = l.memoizedState.cachePool.pool), y !== d && (l.flags |= 2048), s !== null && de(vu), null;
      case 24:
        return d = null, s !== null && (d = s.memoizedState.cache), l.memoizedState.cache !== d && (l.flags |= 2048), _o(jr), Dn(l), null;
      case 25:
        return null;
      case 30:
        return null;
    }
    throw Error(r(156, l.tag));
  }
  function id(s, l) {
    switch (pu(l), l.tag) {
      case 1:
        return s = l.flags, s & 65536 ? (l.flags = s & -65537 | 128, l) : null;
      case 3:
        return _o(jr), Me(), s = l.flags, (s & 65536) !== 0 && (s & 128) === 0 ? (l.flags = s & -65537 | 128, l) : null;
      case 26:
      case 27:
      case 5:
        return ut(l), null;
      case 31:
        if (l.memoizedState !== null) {
          if (Ii(l), l.alternate === null)
            throw Error(r(340));
          te();
        }
        return s = l.flags, s & 65536 ? (l.flags = s & -65537 | 128, l) : null;
      case 13:
        if (Ii(l), s = l.memoizedState, s !== null && s.dehydrated !== null) {
          if (l.alternate === null)
            throw Error(r(340));
          te();
        }
        return s = l.flags, s & 65536 ? (l.flags = s & -65537 | 128, l) : null;
      case 19:
        return de(br), null;
      case 4:
        return Me(), null;
      case 10:
        return _o(l.type), null;
      case 22:
      case 23:
        return Ii(l), Pf(), s !== null && de(vu), s = l.flags, s & 65536 ? (l.flags = s & -65537 | 128, l) : null;
      case 24:
        return _o(jr), null;
      case 25:
        return null;
      default:
        return null;
    }
  }
  function Zh(s, l) {
    switch (pu(l), l.tag) {
      case 3:
        _o(jr), Me();
        break;
      case 26:
      case 27:
      case 5:
        ut(l);
        break;
      case 4:
        Me();
        break;
      case 31:
        l.memoizedState !== null && Ii(l);
        break;
      case 13:
        Ii(l);
        break;
      case 19:
        de(br);
        break;
      case 10:
        _o(l.type);
        break;
      case 22:
      case 23:
        Ii(l), Pf(), s !== null && de(vu);
        break;
      case 24:
        _o(jr);
    }
  }
  function Nc(s, l) {
    try {
      var d = l.updateQueue, y = d !== null ? d.lastEffect : null;
      if (y !== null) {
        var S = y.next;
        d = S;
        do {
          if ((d.tag & s) === s) {
            y = void 0;
            var j = d.create, L = d.inst;
            y = j(), L.destroy = y;
          }
          d = d.next;
        } while (d !== S);
      }
    } catch (ee) {
      Sn(l, l.return, ee);
    }
  }
  function To(s, l, d) {
    try {
      var y = l.updateQueue, S = y !== null ? y.lastEffect : null;
      if (S !== null) {
        var j = S.next;
        y = j;
        do {
          if ((y.tag & s) === s) {
            var L = y.inst, ee = L.destroy;
            if (ee !== void 0) {
              L.destroy = void 0, S = l;
              var xe = d, De = ee;
              try {
                De();
              } catch (Fe) {
                Sn(
                  S,
                  xe,
                  Fe
                );
              }
            }
          }
          y = y.next;
        } while (y !== j);
      }
    } catch (Fe) {
      Sn(l, l.return, Fe);
    }
  }
  function sd(s) {
    var l = s.updateQueue;
    if (l !== null) {
      var d = s.stateNode;
      try {
        Ah(l, d);
      } catch (y) {
        Sn(s, s.return, y);
      }
    }
  }
  function pg(s, l, d) {
    d.props = Ti(
      s.type,
      s.memoizedProps
    ), d.state = s.memoizedState;
    try {
      d.componentWillUnmount();
    } catch (y) {
      Sn(s, l, y);
    }
  }
  function Bi(s, l) {
    try {
      var d = s.ref;
      if (d !== null) {
        switch (s.tag) {
          case 26:
          case 27:
          case 5:
            var y = s.stateNode;
            break;
          case 30:
            y = s.stateNode;
            break;
          default:
            y = s.stateNode;
        }
        typeof d == "function" ? s.refCleanup = d(y) : d.current = y;
      }
    } catch (S) {
      Sn(s, l, S);
    }
  }
  function xi(s, l) {
    var d = s.ref, y = s.refCleanup;
    if (d !== null)
      if (typeof y == "function")
        try {
          y();
        } catch (S) {
          Sn(s, l, S);
        } finally {
          s.refCleanup = null, s = s.alternate, s != null && (s.refCleanup = null);
        }
      else if (typeof d == "function")
        try {
          d(null);
        } catch (S) {
          Sn(s, l, S);
        }
      else d.current = null;
  }
  function cv(s) {
    var l = s.type, d = s.memoizedProps, y = s.stateNode;
    try {
      e: switch (l) {
        case "button":
        case "input":
        case "select":
        case "textarea":
          d.autoFocus && y.focus();
          break e;
        case "img":
          d.src ? y.src = d.src : d.srcSet && (y.srcset = d.srcSet);
      }
    } catch (S) {
      Sn(s, s.return, S);
    }
  }
  function Xh(s, l, d) {
    try {
      var y = s.stateNode;
      h2(y, s.type, d, l), y[er] = l;
    } catch (S) {
      Sn(s, s.return, S);
    }
  }
  function fv(s) {
    return s.tag === 5 || s.tag === 3 || s.tag === 26 || s.tag === 27 && Ot(s.type) || s.tag === 4;
  }
  function mg(s) {
    e: for (; ; ) {
      for (; s.sibling === null; ) {
        if (s.return === null || fv(s.return)) return null;
        s = s.return;
      }
      for (s.sibling.return = s.return, s = s.sibling; s.tag !== 5 && s.tag !== 6 && s.tag !== 18; ) {
        if (s.tag === 27 && Ot(s.type) || s.flags & 2 || s.child === null || s.tag === 4) continue e;
        s.child.return = s, s = s.child;
      }
      if (!(s.flags & 2)) return s.stateNode;
    }
  }
  function gg(s, l, d) {
    var y = s.tag;
    if (y === 5 || y === 6)
      s = s.stateNode, l ? (d.nodeType === 9 ? d.body : d.nodeName === "HTML" ? d.ownerDocument.body : d).insertBefore(s, l) : (l = d.nodeType === 9 ? d.body : d.nodeName === "HTML" ? d.ownerDocument.body : d, l.appendChild(s), d = d._reactRootContainer, d != null || l.onclick !== null || (l.onclick = zi));
    else if (y !== 4 && (y === 27 && Ot(s.type) && (d = s.stateNode, l = null), s = s.child, s !== null))
      for (gg(s, l, d), s = s.sibling; s !== null; )
        gg(s, l, d), s = s.sibling;
  }
  function Qh(s, l, d) {
    var y = s.tag;
    if (y === 5 || y === 6)
      s = s.stateNode, l ? d.insertBefore(s, l) : d.appendChild(s);
    else if (y !== 4 && (y === 27 && Ot(s.type) && (d = s.stateNode), s = s.child, s !== null))
      for (Qh(s, l, d), s = s.sibling; s !== null; )
        Qh(s, l, d), s = s.sibling;
  }
  function dv(s) {
    var l = s.stateNode, d = s.memoizedProps;
    try {
      for (var y = s.type, S = l.attributes; S.length; )
        l.removeAttributeNode(S[0]);
      ai(l, y, d), l[Cn] = s, l[er] = d;
    } catch (j) {
      Sn(s, s.return, j);
    }
  }
  var Ao = !1, Nr = !1, yg = !1, hv = typeof WeakSet == "function" ? WeakSet : Set, Fr = null;
  function t2(s, l) {
    if (s = s.containerInfo, bd = xp, s = $(s), Z(s)) {
      if ("selectionStart" in s)
        var d = {
          start: s.selectionStart,
          end: s.selectionEnd
        };
      else
        e: {
          d = (d = s.ownerDocument) && d.defaultView || window;
          var y = d.getSelection && d.getSelection();
          if (y && y.rangeCount !== 0) {
            d = y.anchorNode;
            var S = y.anchorOffset, j = y.focusNode;
            y = y.focusOffset;
            try {
              d.nodeType, j.nodeType;
            } catch {
              d = null;
              break e;
            }
            var L = 0, ee = -1, xe = -1, De = 0, Fe = 0, Ge = s, Pe = null;
            t: for (; ; ) {
              for (var Be; Ge !== d || S !== 0 && Ge.nodeType !== 3 || (ee = L + S), Ge !== j || y !== 0 && Ge.nodeType !== 3 || (xe = L + y), Ge.nodeType === 3 && (L += Ge.nodeValue.length), (Be = Ge.firstChild) !== null; )
                Pe = Ge, Ge = Be;
              for (; ; ) {
                if (Ge === s) break t;
                if (Pe === d && ++De === S && (ee = L), Pe === j && ++Fe === y && (xe = L), (Be = Ge.nextSibling) !== null) break;
                Ge = Pe, Pe = Ge.parentNode;
              }
              Ge = Be;
            }
            d = ee === -1 || xe === -1 ? null : { start: ee, end: xe };
          } else d = null;
        }
      d = d || { start: 0, end: 0 };
    } else d = null;
    for (Hg = { focusedElem: s, selectionRange: d }, xp = !1, Fr = l; Fr !== null; )
      if (l = Fr, s = l.child, (l.subtreeFlags & 1028) !== 0 && s !== null)
        s.return = l, Fr = s;
      else
        for (; Fr !== null; ) {
          switch (l = Fr, j = l.alternate, s = l.flags, l.tag) {
            case 0:
              if ((s & 4) !== 0 && (s = l.updateQueue, s = s !== null ? s.events : null, s !== null))
                for (d = 0; d < s.length; d++)
                  S = s[d], S.ref.impl = S.nextImpl;
              break;
            case 11:
            case 15:
              break;
            case 1:
              if ((s & 1024) !== 0 && j !== null) {
                s = void 0, d = l, S = j.memoizedProps, j = j.memoizedState, y = d.stateNode;
                try {
                  var wt = Ti(
                    d.type,
                    S
                  );
                  s = y.getSnapshotBeforeUpdate(
                    wt,
                    j
                  ), y.__reactInternalSnapshotBeforeUpdate = s;
                } catch (Nt) {
                  Sn(
                    d,
                    d.return,
                    Nt
                  );
                }
              }
              break;
            case 3:
              if ((s & 1024) !== 0) {
                if (s = l.stateNode.containerInfo, d = s.nodeType, d === 9)
                  fp(s);
                else if (d === 1)
                  switch (s.nodeName) {
                    case "HEAD":
                    case "HTML":
                    case "BODY":
                      fp(s);
                      break;
                    default:
                      s.textContent = "";
                  }
              }
              break;
            case 5:
            case 26:
            case 27:
            case 6:
            case 4:
            case 17:
              break;
            default:
              if ((s & 1024) !== 0) throw Error(r(163));
          }
          if (s = l.sibling, s !== null) {
            s.return = l.return, Fr = s;
            break;
          }
          Fr = l.return;
        }
  }
  function vg(s, l, d) {
    var y = d.flags;
    switch (d.tag) {
      case 0:
      case 11:
      case 15:
        No(s, d), y & 4 && Nc(5, d);
        break;
      case 1:
        if (No(s, d), y & 4)
          if (s = d.stateNode, l === null)
            try {
              s.componentDidMount();
            } catch (L) {
              Sn(d, d.return, L);
            }
          else {
            var S = Ti(
              d.type,
              l.memoizedProps
            );
            l = l.memoizedState;
            try {
              s.componentDidUpdate(
                S,
                l,
                s.__reactInternalSnapshotBeforeUpdate
              );
            } catch (L) {
              Sn(
                d,
                d.return,
                L
              );
            }
          }
        y & 64 && sd(d), y & 512 && Bi(d, d.return);
        break;
      case 3:
        if (No(s, d), y & 64 && (s = d.updateQueue, s !== null)) {
          if (l = null, d.child !== null)
            switch (d.child.tag) {
              case 27:
              case 5:
                l = d.child.stateNode;
                break;
              case 1:
                l = d.child.stateNode;
            }
          try {
            Ah(s, l);
          } catch (L) {
            Sn(d, d.return, L);
          }
        }
        break;
      case 27:
        l === null && y & 4 && dv(d);
      case 26:
      case 5:
        No(s, d), l === null && y & 4 && cv(d), y & 512 && Bi(d, d.return);
        break;
      case 12:
        No(s, d);
        break;
      case 31:
        No(s, d), y & 4 && bg(s, d);
        break;
      case 13:
        No(s, d), y & 4 && mv(s, d), y & 64 && (s = d.memoizedState, s !== null && (s = s.dehydrated, s !== null && (d = ap.bind(
          null,
          d
        ), y2(s, d))));
        break;
      case 22:
        if (y = d.memoizedState !== null || Ao, !y) {
          l = l !== null && l.memoizedState !== null || Nr, S = Ao;
          var j = Nr;
          Ao = y, (Nr = l) && !j ? Ha(
            s,
            d,
            (d.subtreeFlags & 8772) !== 0
          ) : No(s, d), Ao = S, Nr = j;
        }
        break;
      case 30:
        break;
      default:
        No(s, d);
    }
  }
  function xg(s) {
    var l = s.alternate;
    l !== null && (s.alternate = null, xg(l)), s.child = null, s.deletions = null, s.sibling = null, s.tag === 5 && (l = s.stateNode, l !== null && Wo(l)), s.stateNode = null, s.return = null, s.dependencies = null, s.memoizedProps = null, s.memoizedState = null, s.pendingProps = null, s.stateNode = null, s.updateQueue = null;
  }
  var Kn = null, qi = !1;
  function jo(s, l, d) {
    for (d = d.child; d !== null; )
      pv(s, l, d), d = d.sibling;
  }
  function pv(s, l, d) {
    if ($t && typeof $t.onCommitFiberUnmount == "function")
      try {
        $t.onCommitFiberUnmount(bt, d);
      } catch {
      }
    switch (d.tag) {
      case 26:
        Nr || xi(d, l), jo(
          s,
          l,
          d
        ), d.memoizedState ? d.memoizedState.count-- : d.stateNode && (d = d.stateNode, d.parentNode.removeChild(d));
        break;
      case 27:
        Nr || xi(d, l);
        var y = Kn, S = qi;
        Ot(d.type) && (Kn = d.stateNode, qi = !1), jo(
          s,
          l,
          d
        ), Sd(d.stateNode), Kn = y, qi = S;
        break;
      case 5:
        Nr || xi(d, l);
      case 6:
        if (y = Kn, S = qi, Kn = null, jo(
          s,
          l,
          d
        ), Kn = y, qi = S, Kn !== null)
          if (qi)
            try {
              (Kn.nodeType === 9 ? Kn.body : Kn.nodeName === "HTML" ? Kn.ownerDocument.body : Kn).removeChild(d.stateNode);
            } catch (j) {
              Sn(
                d,
                l,
                j
              );
            }
          else
            try {
              Kn.removeChild(d.stateNode);
            } catch (j) {
              Sn(
                d,
                l,
                j
              );
            }
        break;
      case 18:
        Kn !== null && (qi ? (s = Kn, Kg(
          s.nodeType === 9 ? s.body : s.nodeName === "HTML" ? s.ownerDocument.body : s,
          d.stateNode
        ), Gc(s)) : Kg(Kn, d.stateNode));
        break;
      case 4:
        y = Kn, S = qi, Kn = d.stateNode.containerInfo, qi = !0, jo(
          s,
          l,
          d
        ), Kn = y, qi = S;
        break;
      case 0:
      case 11:
      case 14:
      case 15:
        To(2, d, l), Nr || To(4, d, l), jo(
          s,
          l,
          d
        );
        break;
      case 1:
        Nr || (xi(d, l), y = d.stateNode, typeof y.componentWillUnmount == "function" && pg(
          d,
          l,
          y
        )), jo(
          s,
          l,
          d
        );
        break;
      case 21:
        jo(
          s,
          l,
          d
        );
        break;
      case 22:
        Nr = (y = Nr) || d.memoizedState !== null, jo(
          s,
          l,
          d
        ), Nr = y;
        break;
      default:
        jo(
          s,
          l,
          d
        );
    }
  }
  function bg(s, l) {
    if (l.memoizedState === null && (s = l.alternate, s !== null && (s = s.memoizedState, s !== null))) {
      s = s.dehydrated;
      try {
        Gc(s);
      } catch (d) {
        Sn(l, l.return, d);
      }
    }
  }
  function mv(s, l) {
    if (l.memoizedState === null && (s = l.alternate, s !== null && (s = s.memoizedState, s !== null && (s = s.dehydrated, s !== null))))
      try {
        Gc(s);
      } catch (d) {
        Sn(l, l.return, d);
      }
  }
  function n2(s) {
    switch (s.tag) {
      case 31:
      case 13:
      case 19:
        var l = s.stateNode;
        return l === null && (l = s.stateNode = new hv()), l;
      case 22:
        return s = s.stateNode, l = s._retryCache, l === null && (l = s._retryCache = new hv()), l;
      default:
        throw Error(r(435, s.tag));
    }
  }
  function Jh(s, l) {
    var d = n2(s);
    l.forEach(function(y) {
      if (!d.has(y)) {
        d.add(y);
        var S = u2.bind(null, s, y);
        y.then(S, S);
      }
    });
  }
  function $i(s, l) {
    var d = l.deletions;
    if (d !== null)
      for (var y = 0; y < d.length; y++) {
        var S = d[y], j = s, L = l, ee = L;
        e: for (; ee !== null; ) {
          switch (ee.tag) {
            case 27:
              if (Ot(ee.type)) {
                Kn = ee.stateNode, qi = !1;
                break e;
              }
              break;
            case 5:
              Kn = ee.stateNode, qi = !1;
              break e;
            case 3:
            case 4:
              Kn = ee.stateNode.containerInfo, qi = !0;
              break e;
          }
          ee = ee.return;
        }
        if (Kn === null) throw Error(r(160));
        pv(j, L, S), Kn = null, qi = !1, j = S.alternate, j !== null && (j.return = null), S.return = null;
      }
    if (l.subtreeFlags & 13886)
      for (l = l.child; l !== null; )
        gv(l, s), l = l.sibling;
  }
  var xa = null;
  function gv(s, l) {
    var d = s.alternate, y = s.flags;
    switch (s.tag) {
      case 0:
      case 11:
      case 14:
      case 15:
        $i(l, s), Yn(s), y & 4 && (To(3, s, s.return), Nc(3, s), To(5, s, s.return));
        break;
      case 1:
        $i(l, s), Yn(s), y & 512 && (Nr || d === null || xi(d, d.return)), y & 64 && Ao && (s = s.updateQueue, s !== null && (y = s.callbacks, y !== null && (d = s.shared.hiddenCallbacks, s.shared.hiddenCallbacks = d === null ? y : d.concat(y))));
        break;
      case 26:
        var S = xa;
        if ($i(l, s), Yn(s), y & 512 && (Nr || d === null || xi(d, d.return)), y & 4) {
          var j = d !== null ? d.memoizedState : null;
          if (y = s.memoizedState, d === null)
            if (y === null)
              if (s.stateNode === null) {
                e: {
                  y = s.type, d = s.memoizedProps, S = S.ownerDocument || S;
                  t: switch (y) {
                    case "title":
                      j = S.getElementsByTagName("title")[0], (!j || j[bi] || j[Cn] || j.namespaceURI === "http://www.w3.org/2000/svg" || j.hasAttribute("itemprop")) && (j = S.createElement(y), S.head.insertBefore(
                        j,
                        S.querySelector("head > title")
                      )), ai(j, y, d), j[Cn] = s, tr(j), y = j;
                      break e;
                    case "link":
                      var L = r1(
                        "link",
                        "href",
                        S
                      ).get(y + (d.href || ""));
                      if (L) {
                        for (var ee = 0; ee < L.length; ee++)
                          if (j = L[ee], j.getAttribute("href") === (d.href == null || d.href === "" ? null : d.href) && j.getAttribute("rel") === (d.rel == null ? null : d.rel) && j.getAttribute("title") === (d.title == null ? null : d.title) && j.getAttribute("crossorigin") === (d.crossOrigin == null ? null : d.crossOrigin)) {
                            L.splice(ee, 1);
                            break t;
                          }
                      }
                      j = S.createElement(y), ai(j, y, d), S.head.appendChild(j);
                      break;
                    case "meta":
                      if (L = r1(
                        "meta",
                        "content",
                        S
                      ).get(y + (d.content || ""))) {
                        for (ee = 0; ee < L.length; ee++)
                          if (j = L[ee], j.getAttribute("content") === (d.content == null ? null : "" + d.content) && j.getAttribute("name") === (d.name == null ? null : d.name) && j.getAttribute("property") === (d.property == null ? null : d.property) && j.getAttribute("http-equiv") === (d.httpEquiv == null ? null : d.httpEquiv) && j.getAttribute("charset") === (d.charSet == null ? null : d.charSet)) {
                            L.splice(ee, 1);
                            break t;
                          }
                      }
                      j = S.createElement(y), ai(j, y, d), S.head.appendChild(j);
                      break;
                    default:
                      throw Error(r(468, y));
                  }
                  j[Cn] = s, tr(j), y = j;
                }
                s.stateNode = y;
              } else
                i1(
                  S,
                  s.type,
                  s.stateNode
                );
            else
              s.stateNode = n1(
                S,
                y,
                s.memoizedProps
              );
          else
            j !== y ? (j === null ? d.stateNode !== null && (d = d.stateNode, d.parentNode.removeChild(d)) : j.count--, y === null ? i1(
              S,
              s.type,
              s.stateNode
            ) : n1(
              S,
              y,
              s.memoizedProps
            )) : y === null && s.stateNode !== null && Xh(
              s,
              s.memoizedProps,
              d.memoizedProps
            );
        }
        break;
      case 27:
        $i(l, s), Yn(s), y & 512 && (Nr || d === null || xi(d, d.return)), d !== null && y & 4 && Xh(
          s,
          s.memoizedProps,
          d.memoizedProps
        );
        break;
      case 5:
        if ($i(l, s), Yn(s), y & 512 && (Nr || d === null || xi(d, d.return)), s.flags & 32) {
          S = s.stateNode;
          try {
            Di(S, "");
          } catch (wt) {
            Sn(s, s.return, wt);
          }
        }
        y & 4 && s.stateNode != null && (S = s.memoizedProps, Xh(
          s,
          S,
          d !== null ? d.memoizedProps : S
        )), y & 1024 && (yg = !0);
        break;
      case 6:
        if ($i(l, s), Yn(s), y & 4) {
          if (s.stateNode === null)
            throw Error(r(162));
          y = s.memoizedProps, d = s.stateNode;
          try {
            d.nodeValue = y;
          } catch (wt) {
            Sn(s, s.return, wt);
          }
        }
        break;
      case 3:
        if (Cd = null, S = xa, xa = hp(l.containerInfo), $i(l, s), xa = S, Yn(s), y & 4 && d !== null && d.memoizedState.isDehydrated)
          try {
            Gc(l.containerInfo);
          } catch (wt) {
            Sn(s, s.return, wt);
          }
        yg && (yg = !1, yv(s));
        break;
      case 4:
        y = xa, xa = hp(
          s.stateNode.containerInfo
        ), $i(l, s), Yn(s), xa = y;
        break;
      case 12:
        $i(l, s), Yn(s);
        break;
      case 31:
        $i(l, s), Yn(s), y & 4 && (y = s.updateQueue, y !== null && (s.updateQueue = null, Jh(s, y)));
        break;
      case 13:
        $i(l, s), Yn(s), s.child.flags & 8192 && s.memoizedState !== null != (d !== null && d.memoizedState !== null) && (cd = bn()), y & 4 && (y = s.updateQueue, y !== null && (s.updateQueue = null, Jh(s, y)));
        break;
      case 22:
        S = s.memoizedState !== null;
        var xe = d !== null && d.memoizedState !== null, De = Ao, Fe = Nr;
        if (Ao = De || S, Nr = Fe || xe, $i(l, s), Nr = Fe, Ao = De, Yn(s), y & 8192)
          e: for (l = s.stateNode, l._visibility = S ? l._visibility & -2 : l._visibility | 1, S && (d === null || xe || Ao || Nr || _u(s)), d = null, l = s; ; ) {
            if (l.tag === 5 || l.tag === 26) {
              if (d === null) {
                xe = d = l;
                try {
                  if (j = xe.stateNode, S)
                    L = j.style, typeof L.setProperty == "function" ? L.setProperty("display", "none", "important") : L.display = "none";
                  else {
                    ee = xe.stateNode;
                    var Ge = xe.memoizedProps.style, Pe = Ge != null && Ge.hasOwnProperty("display") ? Ge.display : null;
                    ee.style.display = Pe == null || typeof Pe == "boolean" ? "" : ("" + Pe).trim();
                  }
                } catch (wt) {
                  Sn(xe, xe.return, wt);
                }
              }
            } else if (l.tag === 6) {
              if (d === null) {
                xe = l;
                try {
                  xe.stateNode.nodeValue = S ? "" : xe.memoizedProps;
                } catch (wt) {
                  Sn(xe, xe.return, wt);
                }
              }
            } else if (l.tag === 18) {
              if (d === null) {
                xe = l;
                try {
                  var Be = xe.stateNode;
                  S ? gs(Be, !0) : gs(xe.stateNode, !1);
                } catch (wt) {
                  Sn(xe, xe.return, wt);
                }
              }
            } else if ((l.tag !== 22 && l.tag !== 23 || l.memoizedState === null || l === s) && l.child !== null) {
              l.child.return = l, l = l.child;
              continue;
            }
            if (l === s) break e;
            for (; l.sibling === null; ) {
              if (l.return === null || l.return === s) break e;
              d === l && (d = null), l = l.return;
            }
            d === l && (d = null), l.sibling.return = l.return, l = l.sibling;
          }
        y & 4 && (y = s.updateQueue, y !== null && (d = y.retryQueue, d !== null && (y.retryQueue = null, Jh(s, d))));
        break;
      case 19:
        $i(l, s), Yn(s), y & 4 && (y = s.updateQueue, y !== null && (s.updateQueue = null, Jh(s, y)));
        break;
      case 30:
        break;
      case 21:
        break;
      default:
        $i(l, s), Yn(s);
    }
  }
  function Yn(s) {
    var l = s.flags;
    if (l & 2) {
      try {
        for (var d, y = s.return; y !== null; ) {
          if (fv(y)) {
            d = y;
            break;
          }
          y = y.return;
        }
        if (d == null) throw Error(r(160));
        switch (d.tag) {
          case 27:
            var S = d.stateNode, j = mg(s);
            Qh(s, j, S);
            break;
          case 5:
            var L = d.stateNode;
            d.flags & 32 && (Di(L, ""), d.flags &= -33);
            var ee = mg(s);
            Qh(s, ee, L);
            break;
          case 3:
          case 4:
            var xe = d.stateNode.containerInfo, De = mg(s);
            gg(
              s,
              De,
              xe
            );
            break;
          default:
            throw Error(r(161));
        }
      } catch (Fe) {
        Sn(s, s.return, Fe);
      }
      s.flags &= -3;
    }
    l & 4096 && (s.flags &= -4097);
  }
  function yv(s) {
    if (s.subtreeFlags & 1024)
      for (s = s.child; s !== null; ) {
        var l = s;
        yv(l), l.tag === 5 && l.flags & 1024 && l.stateNode.reset(), s = s.sibling;
      }
  }
  function No(s, l) {
    if (l.subtreeFlags & 8772)
      for (l = l.child; l !== null; )
        vg(s, l.alternate, l), l = l.sibling;
  }
  function _u(s) {
    for (s = s.child; s !== null; ) {
      var l = s;
      switch (l.tag) {
        case 0:
        case 11:
        case 14:
        case 15:
          To(4, l, l.return), _u(l);
          break;
        case 1:
          xi(l, l.return);
          var d = l.stateNode;
          typeof d.componentWillUnmount == "function" && pg(
            l,
            l.return,
            d
          ), _u(l);
          break;
        case 27:
          Sd(l.stateNode);
        case 26:
        case 5:
          xi(l, l.return), _u(l);
          break;
        case 22:
          l.memoizedState === null && _u(l);
          break;
        case 30:
          _u(l);
          break;
        default:
          _u(l);
      }
      s = s.sibling;
    }
  }
  function Ha(s, l, d) {
    for (d = d && (l.subtreeFlags & 8772) !== 0, l = l.child; l !== null; ) {
      var y = l.alternate, S = s, j = l, L = j.flags;
      switch (j.tag) {
        case 0:
        case 11:
        case 15:
          Ha(
            S,
            j,
            d
          ), Nc(4, j);
          break;
        case 1:
          if (Ha(
            S,
            j,
            d
          ), y = j, S = y.stateNode, typeof S.componentDidMount == "function")
            try {
              S.componentDidMount();
            } catch (De) {
              Sn(y, y.return, De);
            }
          if (y = j, S = y.updateQueue, S !== null) {
            var ee = y.stateNode;
            try {
              var xe = S.shared.hiddenCallbacks;
              if (xe !== null)
                for (S.shared.hiddenCallbacks = null, S = 0; S < xe.length; S++)
                  ma(xe[S], ee);
            } catch (De) {
              Sn(y, y.return, De);
            }
          }
          d && L & 64 && sd(j), Bi(j, j.return);
          break;
        case 27:
          dv(j);
        case 26:
        case 5:
          Ha(
            S,
            j,
            d
          ), d && y === null && L & 4 && cv(j), Bi(j, j.return);
          break;
        case 12:
          Ha(
            S,
            j,
            d
          );
          break;
        case 31:
          Ha(
            S,
            j,
            d
          ), d && L & 4 && bg(S, j);
          break;
        case 13:
          Ha(
            S,
            j,
            d
          ), d && L & 4 && mv(S, j);
          break;
        case 22:
          j.memoizedState === null && Ha(
            S,
            j,
            d
          ), Bi(j, j.return);
          break;
        case 30:
          break;
        default:
          Ha(
            S,
            j,
            d
          );
      }
      l = l.sibling;
    }
  }
  function wg(s, l) {
    var d = null;
    s !== null && s.memoizedState !== null && s.memoizedState.cachePool !== null && (d = s.memoizedState.cachePool.pool), s = null, l.memoizedState !== null && l.memoizedState.cachePool !== null && (s = l.memoizedState.cachePool.pool), s !== d && (s != null && s.refCount++, d != null && Mf(d));
  }
  function _g(s, l) {
    s = null, l.alternate !== null && (s = l.alternate.memoizedState.cache), l = l.memoizedState.cache, l !== s && (l.refCount++, s != null && Mf(s));
  }
  function ba(s, l, d, y) {
    if (l.subtreeFlags & 10256)
      for (l = l.child; l !== null; )
        vv(
          s,
          l,
          d,
          y
        ), l = l.sibling;
  }
  function vv(s, l, d, y) {
    var S = l.flags;
    switch (l.tag) {
      case 0:
      case 11:
      case 15:
        ba(
          s,
          l,
          d,
          y
        ), S & 2048 && Nc(9, l);
        break;
      case 1:
        ba(
          s,
          l,
          d,
          y
        );
        break;
      case 3:
        ba(
          s,
          l,
          d,
          y
        ), S & 2048 && (s = null, l.alternate !== null && (s = l.alternate.memoizedState.cache), l = l.memoizedState.cache, l !== s && (l.refCount++, s != null && Mf(s)));
        break;
      case 12:
        if (S & 2048) {
          ba(
            s,
            l,
            d,
            y
          ), s = l.stateNode;
          try {
            var j = l.memoizedProps, L = j.id, ee = j.onPostCommit;
            typeof ee == "function" && ee(
              L,
              l.alternate === null ? "mount" : "update",
              s.passiveEffectDuration,
              -0
            );
          } catch (xe) {
            Sn(l, l.return, xe);
          }
        } else
          ba(
            s,
            l,
            d,
            y
          );
        break;
      case 31:
        ba(
          s,
          l,
          d,
          y
        );
        break;
      case 13:
        ba(
          s,
          l,
          d,
          y
        );
        break;
      case 23:
        break;
      case 22:
        j = l.stateNode, L = l.alternate, l.memoizedState !== null ? j._visibility & 2 ? ba(
          s,
          l,
          d,
          y
        ) : ad(s, l) : j._visibility & 2 ? ba(
          s,
          l,
          d,
          y
        ) : (j._visibility |= 2, bl(
          s,
          l,
          d,
          y,
          (l.subtreeFlags & 10256) !== 0 || !1
        )), S & 2048 && wg(L, l);
        break;
      case 24:
        ba(
          s,
          l,
          d,
          y
        ), S & 2048 && _g(l.alternate, l);
        break;
      default:
        ba(
          s,
          l,
          d,
          y
        );
    }
  }
  function bl(s, l, d, y, S) {
    for (S = S && ((l.subtreeFlags & 10256) !== 0 || !1), l = l.child; l !== null; ) {
      var j = s, L = l, ee = d, xe = y, De = L.flags;
      switch (L.tag) {
        case 0:
        case 11:
        case 15:
          bl(
            j,
            L,
            ee,
            xe,
            S
          ), Nc(8, L);
          break;
        case 23:
          break;
        case 22:
          var Fe = L.stateNode;
          L.memoizedState !== null ? Fe._visibility & 2 ? bl(
            j,
            L,
            ee,
            xe,
            S
          ) : ad(
            j,
            L
          ) : (Fe._visibility |= 2, bl(
            j,
            L,
            ee,
            xe,
            S
          )), S && De & 2048 && wg(
            L.alternate,
            L
          );
          break;
        case 24:
          bl(
            j,
            L,
            ee,
            xe,
            S
          ), S && De & 2048 && _g(L.alternate, L);
          break;
        default:
          bl(
            j,
            L,
            ee,
            xe,
            S
          );
      }
      l = l.sibling;
    }
  }
  function ad(s, l) {
    if (l.subtreeFlags & 10256)
      for (l = l.child; l !== null; ) {
        var d = s, y = l, S = y.flags;
        switch (y.tag) {
          case 22:
            ad(d, y), S & 2048 && wg(
              y.alternate,
              y
            );
            break;
          case 24:
            ad(d, y), S & 2048 && _g(y.alternate, y);
            break;
          default:
            ad(d, y);
        }
        l = l.sibling;
      }
  }
  var od = 8192;
  function Rc(s, l, d) {
    if (s.subtreeFlags & od)
      for (s = s.child; s !== null; )
        xv(
          s,
          l,
          d
        ), s = s.sibling;
  }
  function xv(s, l, d) {
    switch (s.tag) {
      case 26:
        Rc(
          s,
          l,
          d
        ), s.flags & od && s.memoizedState !== null && Uc(
          d,
          xa,
          s.memoizedState,
          s.memoizedProps
        );
        break;
      case 5:
        Rc(
          s,
          l,
          d
        );
        break;
      case 3:
      case 4:
        var y = xa;
        xa = hp(s.stateNode.containerInfo), Rc(
          s,
          l,
          d
        ), xa = y;
        break;
      case 22:
        s.memoizedState === null && (y = s.alternate, y !== null && y.memoizedState !== null ? (y = od, od = 16777216, Rc(
          s,
          l,
          d
        ), od = y) : Rc(
          s,
          l,
          d
        ));
        break;
      default:
        Rc(
          s,
          l,
          d
        );
    }
  }
  function bv(s) {
    var l = s.alternate;
    if (l !== null && (s = l.child, s !== null)) {
      l.child = null;
      do
        l = s.sibling, s.sibling = null, s = l;
      while (s !== null);
    }
  }
  function ld(s) {
    var l = s.deletions;
    if ((s.flags & 16) !== 0) {
      if (l !== null)
        for (var d = 0; d < l.length; d++) {
          var y = l[d];
          Fr = y, _v(
            y,
            s
          );
        }
      bv(s);
    }
    if (s.subtreeFlags & 10256)
      for (s = s.child; s !== null; )
        wv(s), s = s.sibling;
  }
  function wv(s) {
    switch (s.tag) {
      case 0:
      case 11:
      case 15:
        ld(s), s.flags & 2048 && To(9, s, s.return);
        break;
      case 3:
        ld(s);
        break;
      case 12:
        ld(s);
        break;
      case 22:
        var l = s.stateNode;
        s.memoizedState !== null && l._visibility & 2 && (s.return === null || s.return.tag !== 13) ? (l._visibility &= -3, ep(s)) : ld(s);
        break;
      default:
        ld(s);
    }
  }
  function ep(s) {
    var l = s.deletions;
    if ((s.flags & 16) !== 0) {
      if (l !== null)
        for (var d = 0; d < l.length; d++) {
          var y = l[d];
          Fr = y, _v(
            y,
            s
          );
        }
      bv(s);
    }
    for (s = s.child; s !== null; ) {
      switch (l = s, l.tag) {
        case 0:
        case 11:
        case 15:
          To(8, l, l.return), ep(l);
          break;
        case 22:
          d = l.stateNode, d._visibility & 2 && (d._visibility &= -3, ep(l));
          break;
        default:
          ep(l);
      }
      s = s.sibling;
    }
  }
  function _v(s, l) {
    for (; Fr !== null; ) {
      var d = Fr;
      switch (d.tag) {
        case 0:
        case 11:
        case 15:
          To(8, d, l);
          break;
        case 23:
        case 22:
          if (d.memoizedState !== null && d.memoizedState.cachePool !== null) {
            var y = d.memoizedState.cachePool.pool;
            y != null && y.refCount++;
          }
          break;
        case 24:
          Mf(d.memoizedState.cache);
      }
      if (y = d.child, y !== null) y.return = d, Fr = y;
      else
        e: for (d = s; Fr !== null; ) {
          y = Fr;
          var S = y.sibling, j = y.return;
          if (xg(y), y === d) {
            Fr = null;
            break e;
          }
          if (S !== null) {
            S.return = j, Fr = S;
            break e;
          }
          Fr = j;
        }
    }
  }
  var r2 = {
    getCacheForType: function(s) {
      var l = ri(jr), d = l.data.get(s);
      return d === void 0 && (d = s(), l.data.set(s, d)), d;
    },
    cacheSignal: function() {
      return ri(jr).controller.signal;
    }
  }, i2 = typeof WeakMap == "function" ? WeakMap : Map, yn = 0, zn = null, Qt = null, tn = 0, _n = 0, fs = null, wl = !1, Mc = !1, Sg = !1, wa = 0, ir = 0, _l = 0, Su = 0, Cg = 0, ds = 0, Oc = 0, ud = null, Fi = null, Eg = !1, cd = 0, Sv = 0, Cu = 1 / 0, tp = null, Sl = null, zr = 0, Cl = null, Dc = null, Ro = 0, kg = 0, Tg = null, Cv = null, fd = 0, Ag = null;
  function hs() {
    return (yn & 2) !== 0 && tn !== 0 ? tn & -tn : Q.T !== null ? ps() : so();
  }
  function Ev() {
    if (ds === 0)
      if ((tn & 536870912) === 0 || an) {
        var s = ia;
        ia <<= 1, (ia & 3932160) === 0 && (ia = 262144), ds = s;
      } else ds = 536870912;
    return s = os.current, s !== null && (s.flags |= 32), ds;
  }
  function Ui(s, l, d) {
    (s === zn && (_n === 2 || _n === 9) || s.cancelPendingCommit !== null) && (zc(s, 0), Mo(
      s,
      tn,
      ds,
      !1
    )), Mi(s, d), ((yn & 2) === 0 || s !== zn) && (s === zn && ((yn & 2) === 0 && (Su |= d), ir === 4 && Mo(
      s,
      tn,
      ds,
      !1
    )), Ga(s));
  }
  function kv(s, l, d) {
    if ((yn & 6) !== 0) throw Error(r(327));
    var y = !d && (l & 127) === 0 && (l & s.expiredLanes) === 0 || sa(s, l), S = y ? a2(s, l) : Ng(s, l, !0), j = y;
    do {
      if (S === 0) {
        Mc && !y && Mo(s, l, 0, !1);
        break;
      } else {
        if (d = s.current.alternate, j && !Av(d)) {
          S = Ng(s, l, !1), j = !1;
          continue;
        }
        if (S === 2) {
          if (j = l, s.errorRecoveryDisabledLanes & j)
            var L = 0;
          else
            L = s.pendingLanes & -536870913, L = L !== 0 ? L : L & 536870912 ? 536870912 : 0;
          if (L !== 0) {
            l = L;
            e: {
              var ee = s;
              S = ud;
              var xe = ee.current.memoizedState.isDehydrated;
              if (xe && (zc(ee, L).flags |= 256), L = Ng(
                ee,
                L,
                !1
              ), L !== 2) {
                if (Sg && !xe) {
                  ee.errorRecoveryDisabledLanes |= j, Su |= j, S = 4;
                  break e;
                }
                j = Fi, Fi = S, j !== null && (Fi === null ? Fi = j : Fi.push.apply(
                  Fi,
                  j
                ));
              }
              S = L;
            }
            if (j = !1, S !== 2) continue;
          }
        }
        if (S === 1) {
          zc(s, 0), Mo(s, l, 0, !0);
          break;
        }
        e: {
          switch (y = s, j = S, j) {
            case 0:
            case 1:
              throw Error(r(345));
            case 4:
              if ((l & 4194048) !== l) break;
            case 6:
              Mo(
                y,
                l,
                ds,
                !wl
              );
              break e;
            case 2:
              Fi = null;
              break;
            case 3:
            case 5:
              break;
            default:
              throw Error(r(329));
          }
          if ((l & 62914560) === l && (S = cd + 300 - bn(), 10 < S)) {
            if (Mo(
              y,
              l,
              ds,
              !wl
            ), io(y, 0, !0) !== 0) break e;
            Ro = l, y.timeoutHandle = Hv(
              Tv.bind(
                null,
                y,
                d,
                Fi,
                tp,
                Eg,
                l,
                ds,
                Su,
                Oc,
                wl,
                j,
                "Throttled",
                -0,
                0
              ),
              S
            );
            break e;
          }
          Tv(
            y,
            d,
            Fi,
            tp,
            Eg,
            l,
            ds,
            Su,
            Oc,
            wl,
            j,
            null,
            -0,
            0
          );
        }
      }
      break;
    } while (!0);
    Ga(s);
  }
  function Tv(s, l, d, y, S, j, L, ee, xe, De, Fe, Ge, Pe, Be) {
    if (s.timeoutHandle = -1, Ge = l.subtreeFlags, Ge & 8192 || (Ge & 16785408) === 16785408) {
      Ge = {
        stylesheets: null,
        count: 0,
        imgCount: 0,
        imgBytes: 0,
        suspenseyImages: [],
        waitingForImages: !0,
        waitingForViewTransition: !1,
        unsuspend: zi
      }, xv(
        l,
        j,
        Ge
      );
      var wt = (j & 62914560) === j ? cd - bn() : (j & 4194048) === j ? Sv - bn() : 0;
      if (wt = k2(
        Ge,
        wt
      ), wt !== null) {
        Ro = j, s.cancelPendingCommit = wt(
          Dv.bind(
            null,
            s,
            l,
            j,
            d,
            y,
            S,
            L,
            ee,
            xe,
            Fe,
            Ge,
            null,
            Pe,
            Be
          )
        ), Mo(s, j, L, !De);
        return;
      }
    }
    Dv(
      s,
      l,
      j,
      d,
      y,
      S,
      L,
      ee,
      xe
    );
  }
  function Av(s) {
    for (var l = s; ; ) {
      var d = l.tag;
      if ((d === 0 || d === 11 || d === 15) && l.flags & 16384 && (d = l.updateQueue, d !== null && (d = d.stores, d !== null)))
        for (var y = 0; y < d.length; y++) {
          var S = d[y], j = S.getSnapshot;
          S = S.value;
          try {
            if (!Bn(j(), S)) return !1;
          } catch {
            return !1;
          }
        }
      if (d = l.child, l.subtreeFlags & 16384 && d !== null)
        d.return = l, l = d;
      else {
        if (l === s) break;
        for (; l.sibling === null; ) {
          if (l.return === null || l.return === s) return !0;
          l = l.return;
        }
        l.sibling.return = l.return, l = l.sibling;
      }
    }
    return !0;
  }
  function Mo(s, l, d, y) {
    l &= ~Cg, l &= ~Su, s.suspendedLanes |= l, s.pingedLanes &= ~l, y && (s.warmLanes |= l), y = s.expirationTimes;
    for (var S = l; 0 < S; ) {
      var j = 31 - nt(S), L = 1 << j;
      y[j] = -1, S &= ~L;
    }
    d !== 0 && aa(s, d, l);
  }
  function np() {
    return (yn & 6) === 0 ? (gd(0), !1) : !0;
  }
  function jg() {
    if (Qt !== null) {
      if (_n === 0)
        var s = Qt.return;
      else
        s = Qt, wo = Ut = null, Lm(s), yc = null, as = 0, s = Qt;
      for (; s !== null; )
        Zh(s.alternate, s), s = s.return;
      Qt = null;
    }
  }
  function zc(s, l) {
    var d = s.timeoutHandle;
    d !== -1 && (s.timeoutHandle = -1, m2(d)), d = s.cancelPendingCommit, d !== null && (s.cancelPendingCommit = null, d()), Ro = 0, jg(), zn = s, Qt = d = Ds(s.current, null), tn = l, _n = 0, fs = null, wl = !1, Mc = sa(s, l), Sg = !1, Oc = ds = Cg = Su = _l = ir = 0, Fi = ud = null, Eg = !1, (l & 8) !== 0 && (l |= l & 32);
    var y = s.entangledLanes;
    if (y !== 0)
      for (s = s.entanglements, y &= l; 0 < y; ) {
        var S = 31 - nt(y), j = 1 << S;
        l |= s[S], y &= ~j;
      }
    return wa = l, Gn(), d;
  }
  function jv(s, l) {
    Vt = null, Q.H = vl, l === gc || l === Df ? (l = Fy(), _n = 3) : l === Sh ? (l = Fy(), _n = 4) : _n = l === Zf ? 8 : l !== null && typeof l == "object" && typeof l.then == "function" ? 6 : 1, fs = l, Qt === null && (ir = 1, Wf(
      s,
      is(l, s.current)
    ));
  }
  function dd() {
    var s = os.current;
    return s === null ? !0 : (tn & 4194048) === tn ? Fs === null : (tn & 62914560) === tn || (tn & 536870912) !== 0 ? s === Fs : !1;
  }
  function Nv() {
    var s = Q.H;
    return Q.H = vl, s === null ? vl : s;
  }
  function Rv() {
    var s = Q.A;
    return Q.A = r2, s;
  }
  function rp() {
    ir = 4, wl || (tn & 4194048) !== tn && os.current !== null || (Mc = !0), (_l & 134217727) === 0 && (Su & 134217727) === 0 || zn === null || Mo(
      zn,
      tn,
      ds,
      !1
    );
  }
  function Ng(s, l, d) {
    var y = yn;
    yn |= 2;
    var S = Nv(), j = Rv();
    (zn !== s || tn !== l) && (tp = null, zc(s, l)), l = !1;
    var L = ir;
    e: do
      try {
        if (_n !== 0 && Qt !== null) {
          var ee = Qt, xe = fs;
          switch (_n) {
            case 8:
              jg(), L = 6;
              break e;
            case 3:
            case 2:
            case 9:
            case 6:
              os.current === null && (l = !0);
              var De = _n;
              if (_n = 0, fs = null, Pc(s, ee, xe, De), d && Mc) {
                L = 0;
                break e;
              }
              break;
            default:
              De = _n, _n = 0, fs = null, Pc(s, ee, xe, De);
          }
        }
        s2(), L = ir;
        break;
      } catch (Fe) {
        jv(s, Fe);
      }
    while (!0);
    return l && s.shellSuspendCounter++, wo = Ut = null, yn = y, Q.H = S, Q.A = j, Qt === null && (zn = null, tn = 0, Gn()), L;
  }
  function s2() {
    for (; Qt !== null; ) Mv(Qt);
  }
  function a2(s, l) {
    var d = yn;
    yn |= 2;
    var y = Nv(), S = Rv();
    zn !== s || tn !== l ? (tp = null, Cu = bn() + 500, zc(s, l)) : Mc = sa(
      s,
      l
    );
    e: do
      try {
        if (_n !== 0 && Qt !== null) {
          l = Qt;
          var j = fs;
          t: switch (_n) {
            case 1:
              _n = 0, fs = null, Pc(s, l, j, 1);
              break;
            case 2:
            case 9:
              if ($y(j)) {
                _n = 0, fs = null, Ov(l);
                break;
              }
              l = function() {
                _n !== 2 && _n !== 9 || zn !== s || (_n = 7), Ga(s);
              }, j.then(l, l);
              break e;
            case 3:
              _n = 7;
              break e;
            case 4:
              _n = 5;
              break e;
            case 7:
              $y(j) ? (_n = 0, fs = null, Ov(l)) : (_n = 0, fs = null, Pc(s, l, j, 7));
              break;
            case 5:
              var L = null;
              switch (Qt.tag) {
                case 26:
                  L = Qt.memoizedState;
                case 5:
                case 27:
                  var ee = Qt;
                  if (L ? s1(L) : ee.stateNode.complete) {
                    _n = 0, fs = null;
                    var xe = ee.sibling;
                    if (xe !== null) Qt = xe;
                    else {
                      var De = ee.return;
                      De !== null ? (Qt = De, ip(De)) : Qt = null;
                    }
                    break t;
                  }
              }
              _n = 0, fs = null, Pc(s, l, j, 5);
              break;
            case 6:
              _n = 0, fs = null, Pc(s, l, j, 6);
              break;
            case 8:
              jg(), ir = 6;
              break e;
            default:
              throw Error(r(462));
          }
        }
        o2();
        break;
      } catch (Fe) {
        jv(s, Fe);
      }
    while (!0);
    return wo = Ut = null, Q.H = y, Q.A = S, yn = d, Qt !== null ? 0 : (zn = null, tn = 0, Gn(), ir);
  }
  function o2() {
    for (; Qt !== null && !Nn(); )
      Mv(Qt);
  }
  function Mv(s) {
    var l = lv(s.alternate, s, wa);
    s.memoizedProps = s.pendingProps, l === null ? ip(s) : Qt = l;
  }
  function Ov(s) {
    var l = s, d = l.alternate;
    switch (l.tag) {
      case 15:
      case 0:
        l = sv(
          d,
          l,
          l.pendingProps,
          l.type,
          void 0,
          tn
        );
        break;
      case 11:
        l = sv(
          d,
          l,
          l.pendingProps,
          l.type.render,
          l.ref,
          tn
        );
        break;
      case 5:
        Lm(l);
      default:
        Zh(d, l), l = Qt = Py(l, wa), l = lv(d, l, wa);
    }
    s.memoizedProps = s.pendingProps, l === null ? ip(s) : Qt = l;
  }
  function Pc(s, l, d, y) {
    wo = Ut = null, Lm(l), yc = null, as = 0;
    var S = l.return;
    try {
      if (og(
        s,
        S,
        l,
        d,
        tn
      )) {
        ir = 1, Wf(
          s,
          is(d, s.current)
        ), Qt = null;
        return;
      }
    } catch (j) {
      if (S !== null) throw Qt = S, j;
      ir = 1, Wf(
        s,
        is(d, s.current)
      ), Qt = null;
      return;
    }
    l.flags & 32768 ? (an || y === 1 ? s = !0 : Mc || (tn & 536870912) !== 0 ? s = !1 : (wl = s = !0, (y === 2 || y === 9 || y === 3 || y === 6) && (y = os.current, y !== null && y.tag === 13 && (y.flags |= 16384))), hd(l, s)) : ip(l);
  }
  function ip(s) {
    var l = s;
    do {
      if ((l.flags & 32768) !== 0) {
        hd(
          l,
          wl
        );
        return;
      }
      s = l.return;
      var d = uv(
        l.alternate,
        l,
        wa
      );
      if (d !== null) {
        Qt = d;
        return;
      }
      if (l = l.sibling, l !== null) {
        Qt = l;
        return;
      }
      Qt = l = s;
    } while (l !== null);
    ir === 0 && (ir = 5);
  }
  function hd(s, l) {
    do {
      var d = id(s.alternate, s);
      if (d !== null) {
        d.flags &= 32767, Qt = d;
        return;
      }
      if (d = s.return, d !== null && (d.flags |= 32768, d.subtreeFlags = 0, d.deletions = null), !l && (s = s.sibling, s !== null)) {
        Qt = s;
        return;
      }
      Qt = s = d;
    } while (s !== null);
    ir = 6, Qt = null;
  }
  function Dv(s, l, d, y, S, j, L, ee, xe) {
    s.cancelPendingCommit = null;
    do
      pd();
    while (zr !== 0);
    if ((yn & 6) !== 0) throw Error(r(327));
    if (l !== null) {
      if (l === s.current) throw Error(r(177));
      if (j = l.lanes | l.childLanes, j |= Lt, Ql(
        s,
        d,
        j,
        L,
        ee,
        xe
      ), s === zn && (Qt = zn = null, tn = 0), Dc = l, Cl = s, Ro = d, kg = j, Tg = S, Cv = y, (l.subtreeFlags & 10256) !== 0 || (l.flags & 10256) !== 0 ? (s.callbackNode = null, s.callbackPriority = 0, c2(at, function() {
        return Dg(), null;
      })) : (s.callbackNode = null, s.callbackPriority = 0), y = (l.flags & 13878) !== 0, (l.subtreeFlags & 13878) !== 0 || y) {
        y = Q.T, Q.T = null, S = oe.p, oe.p = 2, L = yn, yn |= 4;
        try {
          t2(s, l, d);
        } finally {
          yn = L, oe.p = S, Q.T = y;
        }
      }
      zr = 1, Rg(), Mg(), sp();
    }
  }
  function Rg() {
    if (zr === 1) {
      zr = 0;
      var s = Cl, l = Dc, d = (l.flags & 13878) !== 0;
      if ((l.subtreeFlags & 13878) !== 0 || d) {
        d = Q.T, Q.T = null;
        var y = oe.p;
        oe.p = 2;
        var S = yn;
        yn |= 4;
        try {
          gv(l, s);
          var j = Hg, L = $(s.containerInfo), ee = j.focusedElem, xe = j.selectionRange;
          if (L !== ee && ee && ee.ownerDocument && I(
            ee.ownerDocument.documentElement,
            ee
          )) {
            if (xe !== null && Z(ee)) {
              var De = xe.start, Fe = xe.end;
              if (Fe === void 0 && (Fe = De), "selectionStart" in ee)
                ee.selectionStart = De, ee.selectionEnd = Math.min(
                  Fe,
                  ee.value.length
                );
              else {
                var Ge = ee.ownerDocument || document, Pe = Ge && Ge.defaultView || window;
                if (Pe.getSelection) {
                  var Be = Pe.getSelection(), wt = ee.textContent.length, Nt = Math.min(xe.start, wt), Tn = xe.end === void 0 ? Nt : Math.min(xe.end, wt);
                  !Be.extend && Nt > Tn && (L = Tn, Tn = Nt, Nt = L);
                  var Ae = M(
                    ee,
                    Nt
                  ), Ee = M(
                    ee,
                    Tn
                  );
                  if (Ae && Ee && (Be.rangeCount !== 1 || Be.anchorNode !== Ae.node || Be.anchorOffset !== Ae.offset || Be.focusNode !== Ee.node || Be.focusOffset !== Ee.offset)) {
                    var Oe = Ge.createRange();
                    Oe.setStart(Ae.node, Ae.offset), Be.removeAllRanges(), Nt > Tn ? (Be.addRange(Oe), Be.extend(Ee.node, Ee.offset)) : (Oe.setEnd(Ee.node, Ee.offset), Be.addRange(Oe));
                  }
                }
              }
            }
            for (Ge = [], Be = ee; Be = Be.parentNode; )
              Be.nodeType === 1 && Ge.push({
                element: Be,
                left: Be.scrollLeft,
                top: Be.scrollTop
              });
            for (typeof ee.focus == "function" && ee.focus(), ee = 0; ee < Ge.length; ee++) {
              var He = Ge[ee];
              He.element.scrollLeft = He.left, He.element.scrollTop = He.top;
            }
          }
          xp = !!bd, Hg = bd = null;
        } finally {
          yn = S, oe.p = y, Q.T = d;
        }
      }
      s.current = l, zr = 2;
    }
  }
  function Mg() {
    if (zr === 2) {
      zr = 0;
      var s = Cl, l = Dc, d = (l.flags & 8772) !== 0;
      if ((l.subtreeFlags & 8772) !== 0 || d) {
        d = Q.T, Q.T = null;
        var y = oe.p;
        oe.p = 2;
        var S = yn;
        yn |= 4;
        try {
          vg(s, l.alternate, l);
        } finally {
          yn = S, oe.p = y, Q.T = d;
        }
      }
      zr = 3;
    }
  }
  function sp() {
    if (zr === 4 || zr === 3) {
      zr = 0, rn();
      var s = Cl, l = Dc, d = Ro, y = Cv;
      (l.subtreeFlags & 10256) !== 0 || (l.flags & 10256) !== 0 ? zr = 5 : (zr = 0, Dc = Cl = null, Og(s, s.pendingLanes));
      var S = s.pendingLanes;
      if (S === 0 && (Sl = null), Ra(d), l = l.stateNode, $t && typeof $t.onCommitFiberRoot == "function")
        try {
          $t.onCommitFiberRoot(
            bt,
            l,
            void 0,
            (l.current.flags & 128) === 128
          );
        } catch {
        }
      if (y !== null) {
        l = Q.T, S = oe.p, oe.p = 2, Q.T = null;
        try {
          for (var j = s.onRecoverableError, L = 0; L < y.length; L++) {
            var ee = y[L];
            j(ee.value, {
              componentStack: ee.stack
            });
          }
        } finally {
          Q.T = l, oe.p = S;
        }
      }
      (Ro & 3) !== 0 && pd(), Ga(s), S = s.pendingLanes, (d & 261930) !== 0 && (S & 42) !== 0 ? s === Ag ? fd++ : (fd = 0, Ag = s) : fd = 0, gd(0);
    }
  }
  function Og(s, l) {
    (s.pooledCacheLanes &= l) === 0 && (l = s.pooledCache, l != null && (s.pooledCache = null, Mf(l)));
  }
  function pd() {
    return Rg(), Mg(), sp(), Dg();
  }
  function Dg() {
    if (zr !== 5) return !1;
    var s = Cl, l = kg;
    kg = 0;
    var d = Ra(Ro), y = Q.T, S = oe.p;
    try {
      oe.p = 32 > d ? 32 : d, Q.T = null, d = Tg, Tg = null;
      var j = Cl, L = Ro;
      if (zr = 0, Dc = Cl = null, Ro = 0, (yn & 6) !== 0) throw Error(r(331));
      var ee = yn;
      if (yn |= 4, wv(j.current), vv(
        j,
        j.current,
        L,
        d
      ), yn = ee, gd(0, !1), $t && typeof $t.onPostCommitFiberRoot == "function")
        try {
          $t.onPostCommitFiberRoot(bt, j);
        } catch {
        }
      return !0;
    } finally {
      oe.p = S, Q.T = y, Og(s, l);
    }
  }
  function zg(s, l, d) {
    l = is(d, l), l = ag(s.stateNode, l, 2), s = pa(s, l, 2), s !== null && (Mi(s, 2), Ga(s));
  }
  function Sn(s, l, d) {
    if (s.tag === 3)
      zg(s, s, d);
    else
      for (; l !== null; ) {
        if (l.tag === 3) {
          zg(
            l,
            s,
            d
          );
          break;
        } else if (l.tag === 1) {
          var y = l.stateNode;
          if (typeof l.type.getDerivedStateFromError == "function" || typeof y.componentDidCatch == "function" && (Sl === null || !Sl.has(y))) {
            s = is(d, s), d = Ua(2), y = pa(l, d, 2), y !== null && (Uh(
              d,
              y,
              l,
              s
            ), Mi(y, 2), Ga(y));
            break;
          }
        }
        l = l.return;
      }
  }
  function Pg(s, l, d) {
    var y = s.pingCache;
    if (y === null) {
      y = s.pingCache = new i2();
      var S = /* @__PURE__ */ new Set();
      y.set(l, S);
    } else
      S = y.get(l), S === void 0 && (S = /* @__PURE__ */ new Set(), y.set(l, S));
    S.has(d) || (Sg = !0, S.add(d), s = l2.bind(null, s, l, d), l.then(s, s));
  }
  function l2(s, l, d) {
    var y = s.pingCache;
    y !== null && y.delete(l), s.pingedLanes |= s.suspendedLanes & d, s.warmLanes &= ~d, zn === s && (tn & d) === d && (ir === 4 || ir === 3 && (tn & 62914560) === tn && 300 > bn() - cd ? (yn & 2) === 0 && zc(s, 0) : Cg |= d, Oc === tn && (Oc = 0)), Ga(s);
  }
  function md(s, l) {
    l === 0 && (l = Xl()), s = On(s, l), s !== null && (Mi(s, l), Ga(s));
  }
  function ap(s) {
    var l = s.memoizedState, d = 0;
    l !== null && (d = l.retryLane), md(s, d);
  }
  function u2(s, l) {
    var d = 0;
    switch (s.tag) {
      case 31:
      case 13:
        var y = s.stateNode, S = s.memoizedState;
        S !== null && (d = S.retryLane);
        break;
      case 19:
        y = s.stateNode;
        break;
      case 22:
        y = s.stateNode._retryCache;
        break;
      default:
        throw Error(r(314));
    }
    y !== null && y.delete(l), md(s, d);
  }
  function c2(s, l) {
    return jn(s, l);
  }
  var Ic = null, Eu = null, Ig = !1, op = !1, Lg = !1, El = 0;
  function Ga(s) {
    s !== Eu && s.next === null && (Eu === null ? Ic = Eu = s : Eu = Eu.next = s), op = !0, Ig || (Ig = !0, d2());
  }
  function gd(s, l) {
    if (!Lg && op) {
      Lg = !0;
      do
        for (var d = !1, y = Ic; y !== null; ) {
          if (s !== 0) {
            var S = y.pendingLanes;
            if (S === 0) var j = 0;
            else {
              var L = y.suspendedLanes, ee = y.pingedLanes;
              j = (1 << 31 - nt(42 | s) + 1) - 1, j &= S & ~(L & ~ee), j = j & 201326741 ? j & 201326741 | 1 : j ? j | 2 : 0;
            }
            j !== 0 && (d = !0, Lv(y, j));
          } else
            j = tn, j = io(
              y,
              y === zn ? j : 0,
              y.cancelPendingCommit !== null || y.timeoutHandle !== -1
            ), (j & 3) === 0 || sa(y, j) || (d = !0, Lv(y, j));
          y = y.next;
        }
      while (d);
      Lg = !1;
    }
  }
  function f2() {
    zv();
  }
  function zv() {
    op = Ig = !1;
    var s = 0;
    El !== 0 && p2() && (s = El);
    for (var l = bn(), d = null, y = Ic; y !== null; ) {
      var S = y.next, j = Pv(y, l);
      j === 0 ? (y.next = null, d === null ? Ic = S : d.next = S, S === null && (Eu = d)) : (d = y, (s !== 0 || (j & 3) !== 0) && (op = !0)), y = S;
    }
    zr !== 0 && zr !== 5 || gd(s), El !== 0 && (El = 0);
  }
  function Pv(s, l) {
    for (var d = s.suspendedLanes, y = s.pingedLanes, S = s.expirationTimes, j = s.pendingLanes & -62914561; 0 < j; ) {
      var L = 31 - nt(j), ee = 1 << L, xe = S[L];
      xe === -1 ? ((ee & d) === 0 || (ee & y) !== 0) && (S[L] = mf(ee, l)) : xe <= l && (s.expiredLanes |= ee), j &= ~ee;
    }
    if (l = zn, d = tn, d = io(
      s,
      s === l ? d : 0,
      s.cancelPendingCommit !== null || s.timeoutHandle !== -1
    ), y = s.callbackNode, d === 0 || s === l && (_n === 2 || _n === 9) || s.cancelPendingCommit !== null)
      return y !== null && y !== null && Yt(y), s.callbackNode = null, s.callbackPriority = 0;
    if ((d & 3) === 0 || sa(s, d)) {
      if (l = d & -d, l === s.callbackPriority) return l;
      switch (y !== null && Yt(y), Ra(d)) {
        case 2:
        case 8:
          d = We;
          break;
        case 32:
          d = at;
          break;
        case 268435456:
          d = Rt;
          break;
        default:
          d = at;
      }
      return y = Iv.bind(null, s), d = jn(d, y), s.callbackPriority = l, s.callbackNode = d, l;
    }
    return y !== null && y !== null && Yt(y), s.callbackPriority = 2, s.callbackNode = null, 2;
  }
  function Iv(s, l) {
    if (zr !== 0 && zr !== 5)
      return s.callbackNode = null, s.callbackPriority = 0, null;
    var d = s.callbackNode;
    if (pd() && s.callbackNode !== d)
      return null;
    var y = tn;
    return y = io(
      s,
      s === zn ? y : 0,
      s.cancelPendingCommit !== null || s.timeoutHandle !== -1
    ), y === 0 ? null : (kv(s, y, l), Pv(s, bn()), s.callbackNode != null && s.callbackNode === d ? Iv.bind(null, s) : null);
  }
  function Lv(s, l) {
    if (pd()) return null;
    kv(s, l, !0);
  }
  function d2() {
    Kv(function() {
      (yn & 6) !== 0 ? jn(
        Le,
        f2
      ) : zv();
    });
  }
  function ps() {
    if (El === 0) {
      var s = pc;
      s === 0 && (s = lt, lt <<= 1, (lt & 261888) === 0 && (lt = 256)), El = s;
    }
    return El;
  }
  function Bv(s) {
    return s == null || typeof s == "symbol" || typeof s == "boolean" ? null : typeof s == "function" ? s : Ns("" + s);
  }
  function qv(s, l) {
    var d = l.ownerDocument.createElement("input");
    return d.name = l.name, d.value = l.value, s.id && d.setAttribute("form", s.id), l.parentNode.insertBefore(d, l), s = new FormData(s), d.parentNode.removeChild(d), s;
  }
  function ku(s, l, d, y, S) {
    if (l === "submit" && d && d.stateNode === S) {
      var j = Bv(
        (S[er] || null).action
      ), L = y.submitter;
      L && (l = (l = L[er] || null) ? Bv(l.formAction) : L.getAttribute("formAction"), l !== null && (j = l, L = null));
      var ee = new Qu(
        "action",
        "action",
        null,
        y,
        S
      );
      s.push({
        event: ee,
        listeners: [
          {
            instance: null,
            listener: function() {
              if (y.defaultPrevented) {
                if (El !== 0) {
                  var xe = L ? qv(S, L) : new FormData(S);
                  yl(
                    d,
                    {
                      pending: !0,
                      data: xe,
                      method: S.method,
                      action: j
                    },
                    null,
                    xe
                  );
                }
              } else
                typeof j == "function" && (ee.preventDefault(), xe = L ? qv(S, L) : new FormData(S), yl(
                  d,
                  {
                    pending: !0,
                    data: xe,
                    method: S.method,
                    action: j
                  },
                  j,
                  xe
                ));
            },
            currentTarget: S
          }
        ]
      });
    }
  }
  for (var Bt = 0; Bt < ot.length; Bt++) {
    var Bg = ot[Bt], Vi = Bg.toLowerCase(), _r = Bg[0].toUpperCase() + Bg.slice(1);
    Qe(
      Vi,
      "on" + _r
    );
  }
  Qe(je, "onAnimationEnd"), Qe(ze, "onAnimationIteration"), Qe($e, "onAnimationStart"), Qe("dblclick", "onDoubleClick"), Qe("focusin", "onFocus"), Qe("focusout", "onBlur"), Qe(Ve, "onTransitionRun"), Qe(et, "onTransitionStart"), Qe(st, "onTransitionCancel"), Qe(Ue, "onTransitionEnd"), Ji("onMouseEnter", ["mouseout", "mouseover"]), Ji("onMouseLeave", ["mouseout", "mouseover"]), Ji("onPointerEnter", ["pointerout", "pointerover"]), Ji("onPointerLeave", ["pointerout", "pointerover"]), Oi(
    "onChange",
    "change click focusin focusout input keydown keyup selectionchange".split(" ")
  ), Oi(
    "onSelect",
    "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(
      " "
    )
  ), Oi("onBeforeInput", [
    "compositionend",
    "keypress",
    "textInput",
    "paste"
  ]), Oi(
    "onCompositionEnd",
    "compositionend focusout keydown keypress keyup mousedown".split(" ")
  ), Oi(
    "onCompositionStart",
    "compositionstart focusout keydown keypress keyup mousedown".split(" ")
  ), Oi(
    "onCompositionUpdate",
    "compositionupdate focusout keydown keypress keyup mousedown".split(" ")
  );
  var yd = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(
    " "
  ), kl = new Set(
    "beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yd)
  );
  function $v(s, l) {
    l = (l & 4) !== 0;
    for (var d = 0; d < s.length; d++) {
      var y = s[d], S = y.event;
      y = y.listeners;
      e: {
        var j = void 0;
        if (l)
          for (var L = y.length - 1; 0 <= L; L--) {
            var ee = y[L], xe = ee.instance, De = ee.currentTarget;
            if (ee = ee.listener, xe !== j && S.isPropagationStopped())
              break e;
            j = ee, S.currentTarget = De;
            try {
              j(S);
            } catch (Fe) {
              gt(Fe);
            }
            S.currentTarget = null, j = xe;
          }
        else
          for (L = 0; L < y.length; L++) {
            if (ee = y[L], xe = ee.instance, De = ee.currentTarget, ee = ee.listener, xe !== j && S.isPropagationStopped())
              break e;
            j = ee, S.currentTarget = De;
            try {
              j(S);
            } catch (Fe) {
              gt(Fe);
            }
            S.currentTarget = null, j = xe;
          }
      }
    }
  }
  function Jt(s, l) {
    var d = l[Cs];
    d === void 0 && (d = l[Cs] = /* @__PURE__ */ new Set());
    var y = s + "__bubble";
    d.has(y) || (up(l, s, 2, !1), d.add(y));
  }
  function qg(s, l, d) {
    var y = 0;
    l && (y |= 4), up(
      d,
      s,
      y,
      l
    );
  }
  var lp = "_reactListening" + Math.random().toString(36).slice(2);
  function $g(s) {
    if (!s[lp]) {
      s[lp] = !0, oa.forEach(function(d) {
        d !== "selectionchange" && (kl.has(d) || qg(d, !1, s), qg(d, !0, s));
      });
      var l = s.nodeType === 9 ? s : s.ownerDocument;
      l === null || l[lp] || (l[lp] = !0, qg("selectionchange", !1, l));
    }
  }
  function up(s, l, d, y) {
    switch (h1(l)) {
      case 2:
        var S = A2;
        break;
      case 8:
        S = j2;
        break;
      default:
        S = Jg;
    }
    d = S.bind(
      null,
      l,
      d,
      s
    ), S = void 0, !yf || l !== "touchstart" && l !== "touchmove" && l !== "wheel" || (S = !0), y ? S !== void 0 ? s.addEventListener(l, d, {
      capture: !0,
      passive: S
    }) : s.addEventListener(l, d, !0) : S !== void 0 ? s.addEventListener(l, d, {
      passive: S
    }) : s.addEventListener(l, d, !1);
  }
  function Fg(s, l, d, y, S) {
    var j = y;
    if ((l & 1) === 0 && (l & 2) === 0 && y !== null)
      e: for (; ; ) {
        if (y === null) return;
        var L = y.tag;
        if (L === 3 || L === 4) {
          var ee = y.stateNode.containerInfo;
          if (ee === S) break;
          if (L === 4)
            for (L = y.return; L !== null; ) {
              var xe = L.tag;
              if ((xe === 3 || xe === 4) && L.stateNode.containerInfo === S)
                return;
              L = L.return;
            }
          for (; ee !== null; ) {
            if (L = ks(ee), L === null) return;
            if (xe = L.tag, xe === 5 || xe === 6 || xe === 26 || xe === 27) {
              y = j = L;
              continue e;
            }
            ee = ee.parentNode;
          }
        }
        y = y.return;
      }
    Xo(function() {
      var De = j, Fe = Zu(d), Ge = [];
      e: {
        var Pe = it.get(s);
        if (Pe !== void 0) {
          var Be = Qu, wt = s;
          switch (s) {
            case "keypress":
              if (Qo(d) === 0) break e;
            case "keydown":
            case "keyup":
              Be = ns;
              break;
            case "focusin":
              wt = "focus", Be = mo;
              break;
            case "focusout":
              wt = "blur", Be = mo;
              break;
            case "beforeblur":
            case "afterblur":
              Be = mo;
              break;
            case "click":
              if (d.button === 2) break e;
            case "auxclick":
            case "dblclick":
            case "mousedown":
            case "mousemove":
            case "mouseup":
            case "mouseout":
            case "mouseover":
            case "contextmenu":
              Be = Jo;
              break;
            case "drag":
            case "dragend":
            case "dragenter":
            case "dragexit":
            case "dragleave":
            case "dragover":
            case "dragstart":
            case "drop":
              Be = vf;
              break;
            case "touchcancel":
            case "touchend":
            case "touchmove":
            case "touchstart":
              Be = Sf;
              break;
            case je:
            case ze:
            case $e:
              Be = xf;
              break;
            case Ue:
              Be = Cf;
              break;
            case "scroll":
            case "scrollend":
              Be = Ju;
              break;
            case "wheel":
              Be = yo;
              break;
            case "copy":
            case "cut":
            case "paste":
              Be = kr;
              break;
            case "gotpointercapture":
            case "lostpointercapture":
            case "pointercancel":
            case "pointerdown":
            case "pointermove":
            case "pointerout":
            case "pointerover":
            case "pointerup":
              Be = _f;
              break;
            case "toggle":
            case "beforetoggle":
              Be = gh;
          }
          var Nt = (l & 4) !== 0, Tn = !Nt && (s === "scroll" || s === "scrollend"), Ae = Nt ? Pe !== null ? Pe + "Capture" : null : Pe;
          Nt = [];
          for (var Ee = De, Oe; Ee !== null; ) {
            var He = Ee;
            if (Oe = He.stateNode, He = He.tag, He !== 5 && He !== 26 && He !== 27 || Oe === null || Ae === null || (He = la(Ee, Ae), He != null && Nt.push(
              ms(Ee, He, Oe)
            )), Tn) break;
            Ee = Ee.return;
          }
          0 < Nt.length && (Pe = new Be(
            Pe,
            wt,
            null,
            d,
            Fe
          ), Ge.push({ event: Pe, listeners: Nt }));
        }
      }
      if ((l & 7) === 0) {
        e: {
          if (Pe = s === "mouseover" || s === "pointerover", Be = s === "mouseout" || s === "pointerout", Pe && d !== Rs && (wt = d.relatedTarget || d.fromElement) && (ks(wt) || wt[qr]))
            break e;
          if ((Be || Pe) && (Pe = Fe.window === Fe ? Fe : (Pe = Fe.ownerDocument) ? Pe.defaultView || Pe.parentWindow : window, Be ? (wt = d.relatedTarget || d.toElement, Be = De, wt = wt ? ks(wt) : null, wt !== null && (Tn = a(wt), Nt = wt.tag, wt !== Tn || Nt !== 5 && Nt !== 27 && Nt !== 6) && (wt = null)) : (Be = null, wt = De), Be !== wt)) {
            if (Nt = Jo, He = "onMouseLeave", Ae = "onMouseEnter", Ee = "mouse", (s === "pointerout" || s === "pointerover") && (Nt = _f, He = "onPointerLeave", Ae = "onPointerEnter", Ee = "pointer"), Tn = Be == null ? Pe : di(Be), Oe = wt == null ? Pe : di(wt), Pe = new Nt(
              He,
              Ee + "leave",
              Be,
              d,
              Fe
            ), Pe.target = Tn, Pe.relatedTarget = Oe, He = null, ks(Fe) === De && (Nt = new Nt(
              Ae,
              Ee + "enter",
              wt,
              d,
              Fe
            ), Nt.target = Oe, Nt.relatedTarget = Tn, He = Nt), Tn = He, Be && wt)
              t: {
                for (Nt = cp, Ae = Be, Ee = wt, Oe = 0, He = Ae; He; He = Nt(He))
                  Oe++;
                He = 0;
                for (var kt = Ee; kt; kt = Nt(kt))
                  He++;
                for (; 0 < Oe - He; )
                  Ae = Nt(Ae), Oe--;
                for (; 0 < He - Oe; )
                  Ee = Nt(Ee), He--;
                for (; Oe--; ) {
                  if (Ae === Ee || Ee !== null && Ae === Ee.alternate) {
                    Nt = Ae;
                    break t;
                  }
                  Ae = Nt(Ae), Ee = Nt(Ee);
                }
                Nt = null;
              }
            else Nt = null;
            Be !== null && Xn(
              Ge,
              Pe,
              Be,
              Nt,
              !1
            ), wt !== null && Tn !== null && Xn(
              Ge,
              Tn,
              wt,
              Nt,
              !0
            );
          }
        }
        e: {
          if (Pe = De ? di(De) : window, Be = Pe.nodeName && Pe.nodeName.toLowerCase(), Be === "select" || Be === "input" && Pe.type === "file")
            var pn = fu;
          else if (uu(Pe))
            if (Jr)
              pn = sl;
            else {
              pn = vo;
              var _t = du;
            }
          else
            Be = Pe.nodeName, !Be || Be.toLowerCase() !== "input" || Pe.type !== "checkbox" && Pe.type !== "radio" ? De && Wu(De.elementType) && (pn = fu) : pn = Af;
          if (pn && (pn = pn(s, De))) {
            sc(
              Ge,
              pn,
              d,
              Fe
            );
            break e;
          }
          _t && _t(s, Pe, De), s === "focusout" && De && Pe.type === "number" && De.memoizedProps.value != null && co(Pe, "number", Pe.value);
        }
        switch (_t = De ? di(De) : window, s) {
          case "focusin":
            (uu(_t) || _t.contentEditable === "true") && (U = _t, ie = De, ne = null);
            break;
          case "focusout":
            ne = ie = U = null;
            break;
          case "mousedown":
            ye = !0;
            break;
          case "contextmenu":
          case "mouseup":
          case "dragend":
            ye = !1, he(Ge, d, Fe);
            break;
          case "selectionchange":
            if (ue) break;
          case "keydown":
          case "keyup":
            he(Ge, d, Fe);
        }
        var Kt;
        if (tl)
          e: {
            switch (s) {
              case "compositionstart":
                var nn = "onCompositionStart";
                break e;
              case "compositionend":
                nn = "onCompositionEnd";
                break e;
              case "compositionupdate":
                nn = "onCompositionUpdate";
                break e;
            }
            nn = void 0;
          }
        else
          La ? lu(s, d) && (nn = "onCompositionEnd") : s === "keydown" && d.keyCode === 229 && (nn = "onCompositionStart");
        nn && (ou && d.locale !== "ko" && (La || nn !== "onCompositionStart" ? nn === "onCompositionEnd" && La && (Kt = fn()) : (Ms = Fe, Xu = "value" in Ms ? Ms.value : Ms.textContent, La = !0)), _t = vd(De, nn), 0 < _t.length && (nn = new Qr(
          nn,
          s,
          null,
          d,
          Fe
        ), Ge.push({ event: nn, listeners: _t }), Kt ? nn.data = Kt : (Kt = vh(d), Kt !== null && (nn.data = Kt)))), (Kt = Ef ? gi(s, d) : kf(s, d)) && (nn = vd(De, "onBeforeInput"), 0 < nn.length && (_t = new Qr(
          "onBeforeInput",
          "beforeinput",
          null,
          d,
          Fe
        ), Ge.push({
          event: _t,
          listeners: nn
        }), _t.data = Kt)), ku(
          Ge,
          s,
          De,
          d,
          Fe
        );
      }
      $v(Ge, l);
    });
  }
  function ms(s, l, d) {
    return {
      instance: s,
      listener: l,
      currentTarget: d
    };
  }
  function vd(s, l) {
    for (var d = l + "Capture", y = []; s !== null; ) {
      var S = s, j = S.stateNode;
      if (S = S.tag, S !== 5 && S !== 26 && S !== 27 || j === null || (S = la(s, d), S != null && y.unshift(
        ms(s, S, j)
      ), S = la(s, l), S != null && y.push(
        ms(s, S, j)
      )), s.tag === 3) return y;
      s = s.return;
    }
    return [];
  }
  function cp(s) {
    if (s === null) return null;
    do
      s = s.return;
    while (s && s.tag !== 5 && s.tag !== 27);
    return s || null;
  }
  function Xn(s, l, d, y, S) {
    for (var j = l._reactName, L = []; d !== null && d !== y; ) {
      var ee = d, xe = ee.alternate, De = ee.stateNode;
      if (ee = ee.tag, xe !== null && xe === y) break;
      ee !== 5 && ee !== 26 && ee !== 27 || De === null || (xe = De, S ? (De = la(d, j), De != null && L.unshift(
        ms(d, De, xe)
      )) : S || (De = la(d, j), De != null && L.push(
        ms(d, De, xe)
      ))), d = d.return;
    }
    L.length !== 0 && s.push({ event: l, listeners: L });
  }
  var ur = /\r\n?/g, Fv = /\u0000|\uFFFD/g;
  function Uv(s) {
    return (typeof s == "string" ? s : "" + s).replace(ur, `
`).replace(Fv, "");
  }
  function Vv(s, l) {
    return l = Uv(l), Uv(s) === l;
  }
  function kn(s, l, d, y, S, j) {
    switch (d) {
      case "children":
        typeof y == "string" ? l === "body" || l === "textarea" && y === "" || Di(s, y) : (typeof y == "number" || typeof y == "bigint") && l !== "body" && Di(s, "" + y);
        break;
      case "className":
        Ma(s, "class", y);
        break;
      case "tabIndex":
        Ma(s, "tabindex", y);
        break;
      case "dir":
      case "role":
      case "viewBox":
      case "width":
      case "height":
        Ma(s, d, y);
        break;
      case "style":
        gf(s, y, j);
        break;
      case "data":
        if (l !== "object") {
          Ma(s, "data", y);
          break;
        }
      case "src":
      case "href":
        if (y === "" && (l !== "a" || d !== "href")) {
          s.removeAttribute(d);
          break;
        }
        if (y == null || typeof y == "function" || typeof y == "symbol" || typeof y == "boolean") {
          s.removeAttribute(d);
          break;
        }
        y = Ns("" + y), s.setAttribute(d, y);
        break;
      case "action":
      case "formAction":
        if (typeof y == "function") {
          s.setAttribute(
            d,
            "javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')"
          );
          break;
        } else
          typeof j == "function" && (d === "formAction" ? (l !== "input" && kn(s, l, "name", S.name, S, null), kn(
            s,
            l,
            "formEncType",
            S.formEncType,
            S,
            null
          ), kn(
            s,
            l,
            "formMethod",
            S.formMethod,
            S,
            null
          ), kn(
            s,
            l,
            "formTarget",
            S.formTarget,
            S,
            null
          )) : (kn(s, l, "encType", S.encType, S, null), kn(s, l, "method", S.method, S, null), kn(s, l, "target", S.target, S, null)));
        if (y == null || typeof y == "symbol" || typeof y == "boolean") {
          s.removeAttribute(d);
          break;
        }
        y = Ns("" + y), s.setAttribute(d, y);
        break;
      case "onClick":
        y != null && (s.onclick = zi);
        break;
      case "onScroll":
        y != null && Jt("scroll", s);
        break;
      case "onScrollEnd":
        y != null && Jt("scrollend", s);
        break;
      case "dangerouslySetInnerHTML":
        if (y != null) {
          if (typeof y != "object" || !("__html" in y))
            throw Error(r(61));
          if (d = y.__html, d != null) {
            if (S.children != null) throw Error(r(60));
            s.innerHTML = d;
          }
        }
        break;
      case "multiple":
        s.multiple = y && typeof y != "function" && typeof y != "symbol";
        break;
      case "muted":
        s.muted = y && typeof y != "function" && typeof y != "symbol";
        break;
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "defaultValue":
      case "defaultChecked":
      case "innerHTML":
      case "ref":
        break;
      case "autoFocus":
        break;
      case "xlinkHref":
        if (y == null || typeof y == "function" || typeof y == "boolean" || typeof y == "symbol") {
          s.removeAttribute("xlink:href");
          break;
        }
        d = Ns("" + y), s.setAttributeNS(
          "http://www.w3.org/1999/xlink",
          "xlink:href",
          d
        );
        break;
      case "contentEditable":
      case "spellCheck":
      case "draggable":
      case "value":
      case "autoReverse":
      case "externalResourcesRequired":
      case "focusable":
      case "preserveAlpha":
        y != null && typeof y != "function" && typeof y != "symbol" ? s.setAttribute(d, "" + y) : s.removeAttribute(d);
        break;
      case "inert":
      case "allowFullScreen":
      case "async":
      case "autoPlay":
      case "controls":
      case "default":
      case "defer":
      case "disabled":
      case "disablePictureInPicture":
      case "disableRemotePlayback":
      case "formNoValidate":
      case "hidden":
      case "loop":
      case "noModule":
      case "noValidate":
      case "open":
      case "playsInline":
      case "readOnly":
      case "required":
      case "reversed":
      case "scoped":
      case "seamless":
      case "itemScope":
        y && typeof y != "function" && typeof y != "symbol" ? s.setAttribute(d, "") : s.removeAttribute(d);
        break;
      case "capture":
      case "download":
        y === !0 ? s.setAttribute(d, "") : y !== !1 && y != null && typeof y != "function" && typeof y != "symbol" ? s.setAttribute(d, y) : s.removeAttribute(d);
        break;
      case "cols":
      case "rows":
      case "size":
      case "span":
        y != null && typeof y != "function" && typeof y != "symbol" && !isNaN(y) && 1 <= y ? s.setAttribute(d, y) : s.removeAttribute(d);
        break;
      case "rowSpan":
      case "start":
        y == null || typeof y == "function" || typeof y == "symbol" || isNaN(y) ? s.removeAttribute(d) : s.setAttribute(d, y);
        break;
      case "popover":
        Jt("beforetoggle", s), Jt("toggle", s), Ft(s, "popover", y);
        break;
      case "xlinkActuate":
        wi(
          s,
          "http://www.w3.org/1999/xlink",
          "xlink:actuate",
          y
        );
        break;
      case "xlinkArcrole":
        wi(
          s,
          "http://www.w3.org/1999/xlink",
          "xlink:arcrole",
          y
        );
        break;
      case "xlinkRole":
        wi(
          s,
          "http://www.w3.org/1999/xlink",
          "xlink:role",
          y
        );
        break;
      case "xlinkShow":
        wi(
          s,
          "http://www.w3.org/1999/xlink",
          "xlink:show",
          y
        );
        break;
      case "xlinkTitle":
        wi(
          s,
          "http://www.w3.org/1999/xlink",
          "xlink:title",
          y
        );
        break;
      case "xlinkType":
        wi(
          s,
          "http://www.w3.org/1999/xlink",
          "xlink:type",
          y
        );
        break;
      case "xmlBase":
        wi(
          s,
          "http://www.w3.org/XML/1998/namespace",
          "xml:base",
          y
        );
        break;
      case "xmlLang":
        wi(
          s,
          "http://www.w3.org/XML/1998/namespace",
          "xml:lang",
          y
        );
        break;
      case "xmlSpace":
        wi(
          s,
          "http://www.w3.org/XML/1998/namespace",
          "xml:space",
          y
        );
        break;
      case "is":
        Ft(s, "is", y);
        break;
      case "innerText":
      case "textContent":
        break;
      default:
        (!(2 < d.length) || d[0] !== "o" && d[0] !== "O" || d[1] !== "n" && d[1] !== "N") && (d = hh.get(d) || d, Ft(s, d, y));
    }
  }
  function Ug(s, l, d, y, S, j) {
    switch (d) {
      case "style":
        gf(s, y, j);
        break;
      case "dangerouslySetInnerHTML":
        if (y != null) {
          if (typeof y != "object" || !("__html" in y))
            throw Error(r(61));
          if (d = y.__html, d != null) {
            if (S.children != null) throw Error(r(60));
            s.innerHTML = d;
          }
        }
        break;
      case "children":
        typeof y == "string" ? Di(s, y) : (typeof y == "number" || typeof y == "bigint") && Di(s, "" + y);
        break;
      case "onScroll":
        y != null && Jt("scroll", s);
        break;
      case "onScrollEnd":
        y != null && Jt("scrollend", s);
        break;
      case "onClick":
        y != null && (s.onclick = zi);
        break;
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "innerHTML":
      case "ref":
        break;
      case "innerText":
      case "textContent":
        break;
      default:
        if (!oo.hasOwnProperty(d))
          e: {
            if (d[0] === "o" && d[1] === "n" && (S = d.endsWith("Capture"), l = d.slice(2, S ? d.length - 7 : void 0), j = s[er] || null, j = j != null ? j[d] : null, typeof j == "function" && s.removeEventListener(l, j, S), typeof y == "function")) {
              typeof j != "function" && j !== null && (d in s ? s[d] = null : s.hasAttribute(d) && s.removeAttribute(d)), s.addEventListener(l, y, S);
              break e;
            }
            d in s ? s[d] = y : y === !0 ? s.setAttribute(d, "") : Ft(s, d, y);
          }
    }
  }
  function ai(s, l, d) {
    switch (l) {
      case "div":
      case "span":
      case "svg":
      case "path":
      case "a":
      case "g":
      case "p":
      case "li":
        break;
      case "img":
        Jt("error", s), Jt("load", s);
        var y = !1, S = !1, j;
        for (j in d)
          if (d.hasOwnProperty(j)) {
            var L = d[j];
            if (L != null)
              switch (j) {
                case "src":
                  y = !0;
                  break;
                case "srcSet":
                  S = !0;
                  break;
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(r(137, l));
                default:
                  kn(s, l, j, L, d, null);
              }
          }
        S && kn(s, l, "srcSet", d.srcSet, d, null), y && kn(s, l, "src", d.src, d, null);
        return;
      case "input":
        Jt("invalid", s);
        var ee = j = L = S = null, xe = null, De = null;
        for (y in d)
          if (d.hasOwnProperty(y)) {
            var Fe = d[y];
            if (Fe != null)
              switch (y) {
                case "name":
                  S = Fe;
                  break;
                case "type":
                  L = Fe;
                  break;
                case "checked":
                  xe = Fe;
                  break;
                case "defaultChecked":
                  De = Fe;
                  break;
                case "value":
                  j = Fe;
                  break;
                case "defaultValue":
                  ee = Fe;
                  break;
                case "children":
                case "dangerouslySetInnerHTML":
                  if (Fe != null)
                    throw Error(r(137, l));
                  break;
                default:
                  kn(s, l, y, Fe, d, null);
              }
          }
        Da(
          s,
          j,
          ee,
          xe,
          De,
          L,
          S,
          !1
        );
        return;
      case "select":
        Jt("invalid", s), y = L = j = null;
        for (S in d)
          if (d.hasOwnProperty(S) && (ee = d[S], ee != null))
            switch (S) {
              case "value":
                j = ee;
                break;
              case "defaultValue":
                L = ee;
                break;
              case "multiple":
                y = ee;
              default:
                kn(s, l, S, ee, d, null);
            }
        l = j, d = L, s.multiple = !!y, l != null ? Si(s, !!y, l, !1) : d != null && Si(s, !!y, d, !0);
        return;
      case "textarea":
        Jt("invalid", s), j = S = y = null;
        for (L in d)
          if (d.hasOwnProperty(L) && (ee = d[L], ee != null))
            switch (L) {
              case "value":
                y = ee;
                break;
              case "defaultValue":
                S = ee;
                break;
              case "children":
                j = ee;
                break;
              case "dangerouslySetInnerHTML":
                if (ee != null) throw Error(r(91));
                break;
              default:
                kn(s, l, L, ee, d, null);
            }
        fo(s, y, S, j);
        return;
      case "option":
        for (xe in d)
          if (d.hasOwnProperty(xe) && (y = d[xe], y != null))
            switch (xe) {
              case "selected":
                s.selected = y && typeof y != "function" && typeof y != "symbol";
                break;
              default:
                kn(s, l, xe, y, d, null);
            }
        return;
      case "dialog":
        Jt("beforetoggle", s), Jt("toggle", s), Jt("cancel", s), Jt("close", s);
        break;
      case "iframe":
      case "object":
        Jt("load", s);
        break;
      case "video":
      case "audio":
        for (y = 0; y < yd.length; y++)
          Jt(yd[y], s);
        break;
      case "image":
        Jt("error", s), Jt("load", s);
        break;
      case "details":
        Jt("toggle", s);
        break;
      case "embed":
      case "source":
      case "link":
        Jt("error", s), Jt("load", s);
      case "area":
      case "base":
      case "br":
      case "col":
      case "hr":
      case "keygen":
      case "meta":
      case "param":
      case "track":
      case "wbr":
      case "menuitem":
        for (De in d)
          if (d.hasOwnProperty(De) && (y = d[De], y != null))
            switch (De) {
              case "children":
              case "dangerouslySetInnerHTML":
                throw Error(r(137, l));
              default:
                kn(s, l, De, y, d, null);
            }
        return;
      default:
        if (Wu(l)) {
          for (Fe in d)
            d.hasOwnProperty(Fe) && (y = d[Fe], y !== void 0 && Ug(
              s,
              l,
              Fe,
              y,
              d,
              void 0
            ));
          return;
        }
    }
    for (ee in d)
      d.hasOwnProperty(ee) && (y = d[ee], y != null && kn(s, l, ee, y, d, null));
  }
  function h2(s, l, d, y) {
    switch (l) {
      case "div":
      case "span":
      case "svg":
      case "path":
      case "a":
      case "g":
      case "p":
      case "li":
        break;
      case "input":
        var S = null, j = null, L = null, ee = null, xe = null, De = null, Fe = null;
        for (Be in d) {
          var Ge = d[Be];
          if (d.hasOwnProperty(Be) && Ge != null)
            switch (Be) {
              case "checked":
                break;
              case "value":
                break;
              case "defaultValue":
                xe = Ge;
              default:
                y.hasOwnProperty(Be) || kn(s, l, Be, null, y, Ge);
            }
        }
        for (var Pe in y) {
          var Be = y[Pe];
          if (Ge = d[Pe], y.hasOwnProperty(Pe) && (Be != null || Ge != null))
            switch (Pe) {
              case "type":
                j = Be;
                break;
              case "name":
                S = Be;
                break;
              case "checked":
                De = Be;
                break;
              case "defaultChecked":
                Fe = Be;
                break;
              case "value":
                L = Be;
                break;
              case "defaultValue":
                ee = Be;
                break;
              case "children":
              case "dangerouslySetInnerHTML":
                if (Be != null)
                  throw Error(r(137, l));
                break;
              default:
                Be !== Ge && kn(
                  s,
                  l,
                  Pe,
                  Be,
                  y,
                  Ge
                );
            }
        }
        _i(
          s,
          L,
          ee,
          xe,
          De,
          Fe,
          j,
          S
        );
        return;
      case "select":
        Be = L = ee = Pe = null;
        for (j in d)
          if (xe = d[j], d.hasOwnProperty(j) && xe != null)
            switch (j) {
              case "value":
                break;
              case "multiple":
                Be = xe;
              default:
                y.hasOwnProperty(j) || kn(
                  s,
                  l,
                  j,
                  null,
                  y,
                  xe
                );
            }
        for (S in y)
          if (j = y[S], xe = d[S], y.hasOwnProperty(S) && (j != null || xe != null))
            switch (S) {
              case "value":
                Pe = j;
                break;
              case "defaultValue":
                ee = j;
                break;
              case "multiple":
                L = j;
              default:
                j !== xe && kn(
                  s,
                  l,
                  S,
                  j,
                  y,
                  xe
                );
            }
        l = ee, d = L, y = Be, Pe != null ? Si(s, !!d, Pe, !1) : !!y != !!d && (l != null ? Si(s, !!d, l, !0) : Si(s, !!d, d ? [] : "", !1));
        return;
      case "textarea":
        Be = Pe = null;
        for (ee in d)
          if (S = d[ee], d.hasOwnProperty(ee) && S != null && !y.hasOwnProperty(ee))
            switch (ee) {
              case "value":
                break;
              case "children":
                break;
              default:
                kn(s, l, ee, null, y, S);
            }
        for (L in y)
          if (S = y[L], j = d[L], y.hasOwnProperty(L) && (S != null || j != null))
            switch (L) {
              case "value":
                Pe = S;
                break;
              case "defaultValue":
                Be = S;
                break;
              case "children":
                break;
              case "dangerouslySetInnerHTML":
                if (S != null) throw Error(r(91));
                break;
              default:
                S !== j && kn(s, l, L, S, y, j);
            }
        tu(s, Pe, Be);
        return;
      case "option":
        for (var wt in d)
          if (Pe = d[wt], d.hasOwnProperty(wt) && Pe != null && !y.hasOwnProperty(wt))
            switch (wt) {
              case "selected":
                s.selected = !1;
                break;
              default:
                kn(
                  s,
                  l,
                  wt,
                  null,
                  y,
                  Pe
                );
            }
        for (xe in y)
          if (Pe = y[xe], Be = d[xe], y.hasOwnProperty(xe) && Pe !== Be && (Pe != null || Be != null))
            switch (xe) {
              case "selected":
                s.selected = Pe && typeof Pe != "function" && typeof Pe != "symbol";
                break;
              default:
                kn(
                  s,
                  l,
                  xe,
                  Pe,
                  y,
                  Be
                );
            }
        return;
      case "img":
      case "link":
      case "area":
      case "base":
      case "br":
      case "col":
      case "embed":
      case "hr":
      case "keygen":
      case "meta":
      case "param":
      case "source":
      case "track":
      case "wbr":
      case "menuitem":
        for (var Nt in d)
          Pe = d[Nt], d.hasOwnProperty(Nt) && Pe != null && !y.hasOwnProperty(Nt) && kn(s, l, Nt, null, y, Pe);
        for (De in y)
          if (Pe = y[De], Be = d[De], y.hasOwnProperty(De) && Pe !== Be && (Pe != null || Be != null))
            switch (De) {
              case "children":
              case "dangerouslySetInnerHTML":
                if (Pe != null)
                  throw Error(r(137, l));
                break;
              default:
                kn(
                  s,
                  l,
                  De,
                  Pe,
                  y,
                  Be
                );
            }
        return;
      default:
        if (Wu(l)) {
          for (var Tn in d)
            Pe = d[Tn], d.hasOwnProperty(Tn) && Pe !== void 0 && !y.hasOwnProperty(Tn) && Ug(
              s,
              l,
              Tn,
              void 0,
              y,
              Pe
            );
          for (Fe in y)
            Pe = y[Fe], Be = d[Fe], !y.hasOwnProperty(Fe) || Pe === Be || Pe === void 0 && Be === void 0 || Ug(
              s,
              l,
              Fe,
              Pe,
              y,
              Be
            );
          return;
        }
    }
    for (var Ae in d)
      Pe = d[Ae], d.hasOwnProperty(Ae) && Pe != null && !y.hasOwnProperty(Ae) && kn(s, l, Ae, null, y, Pe);
    for (Ge in y)
      Pe = y[Ge], Be = d[Ge], !y.hasOwnProperty(Ge) || Pe === Be || Pe == null && Be == null || kn(s, l, Ge, Pe, y, Be);
  }
  function Vg(s) {
    switch (s) {
      case "css":
      case "script":
      case "font":
      case "img":
      case "image":
      case "input":
      case "link":
        return !0;
      default:
        return !1;
    }
  }
  function xd() {
    if (typeof performance.getEntriesByType == "function") {
      for (var s = 0, l = 0, d = performance.getEntriesByType("resource"), y = 0; y < d.length; y++) {
        var S = d[y], j = S.transferSize, L = S.initiatorType, ee = S.duration;
        if (j && ee && Vg(L)) {
          for (L = 0, ee = S.responseEnd, y += 1; y < d.length; y++) {
            var xe = d[y], De = xe.startTime;
            if (De > ee) break;
            var Fe = xe.transferSize, Ge = xe.initiatorType;
            Fe && Vg(Ge) && (xe = xe.responseEnd, L += Fe * (xe < ee ? 1 : (ee - De) / (xe - De)));
          }
          if (--y, l += 8 * (j + L) / (S.duration / 1e3), s++, 10 < s) break;
        }
      }
      if (0 < s) return l / s / 1e6;
    }
    return navigator.connection && (s = navigator.connection.downlink, typeof s == "number") ? s : 5;
  }
  var bd = null, Hg = null;
  function wd(s) {
    return s.nodeType === 9 ? s : s.ownerDocument;
  }
  function _d(s) {
    switch (s) {
      case "http://www.w3.org/2000/svg":
        return 1;
      case "http://www.w3.org/1998/Math/MathML":
        return 2;
      default:
        return 0;
    }
  }
  function Hi(s, l) {
    if (s === 0)
      switch (l) {
        case "svg":
          return 1;
        case "math":
          return 2;
        default:
          return 0;
      }
    return s === 1 && l === "foreignObject" ? 0 : s;
  }
  function Tl(s, l) {
    return s === "textarea" || s === "noscript" || typeof l.children == "string" || typeof l.children == "number" || typeof l.children == "bigint" || typeof l.dangerouslySetInnerHTML == "object" && l.dangerouslySetInnerHTML !== null && l.dangerouslySetInnerHTML.__html != null;
  }
  var Gg = null;
  function p2() {
    var s = window.event;
    return s && s.type === "popstate" ? s === Gg ? !1 : (Gg = s, !0) : (Gg = null, !1);
  }
  var Hv = typeof setTimeout == "function" ? setTimeout : void 0, m2 = typeof clearTimeout == "function" ? clearTimeout : void 0, Gv = typeof Promise == "function" ? Promise : void 0, Kv = typeof queueMicrotask == "function" ? queueMicrotask : typeof Gv < "u" ? function(s) {
    return Gv.resolve(null).then(s).catch(Oo);
  } : Hv;
  function Oo(s) {
    setTimeout(function() {
      throw s;
    });
  }
  function Ot(s) {
    return s === "head";
  }
  function Kg(s, l) {
    var d = l, y = 0;
    do {
      var S = d.nextSibling;
      if (s.removeChild(d), S && S.nodeType === 8)
        if (d = S.data, d === "/$" || d === "/&") {
          if (y === 0) {
            s.removeChild(S), Gc(l);
            return;
          }
          y--;
        } else if (d === "$" || d === "$?" || d === "$~" || d === "$!" || d === "&")
          y++;
        else if (d === "html")
          Sd(s.ownerDocument.documentElement);
        else if (d === "head") {
          d = s.ownerDocument.head, Sd(d);
          for (var j = d.firstChild; j; ) {
            var L = j.nextSibling, ee = j.nodeName;
            j[bi] || ee === "SCRIPT" || ee === "STYLE" || ee === "LINK" && j.rel.toLowerCase() === "stylesheet" || d.removeChild(j), j = L;
          }
        } else
          d === "body" && Sd(s.ownerDocument.body);
      d = S;
    } while (d);
    Gc(l);
  }
  function gs(s, l) {
    var d = s;
    s = 0;
    do {
      var y = d.nextSibling;
      if (d.nodeType === 1 ? l ? (d._stashedDisplay = d.style.display, d.style.display = "none") : (d.style.display = d._stashedDisplay || "", d.getAttribute("style") === "" && d.removeAttribute("style")) : d.nodeType === 3 && (l ? (d._stashedText = d.nodeValue, d.nodeValue = "") : d.nodeValue = d._stashedText || ""), y && y.nodeType === 8)
        if (d = y.data, d === "/$") {
          if (s === 0) break;
          s--;
        } else
          d !== "$" && d !== "$?" && d !== "$~" && d !== "$!" || s++;
      d = y;
    } while (d);
  }
  function fp(s) {
    var l = s.firstChild;
    for (l && l.nodeType === 10 && (l = l.nextSibling); l; ) {
      var d = l;
      switch (l = l.nextSibling, d.nodeName) {
        case "HTML":
        case "HEAD":
        case "BODY":
          fp(d), Wo(d);
          continue;
        case "SCRIPT":
        case "STYLE":
          continue;
        case "LINK":
          if (d.rel.toLowerCase() === "stylesheet") continue;
      }
      s.removeChild(d);
    }
  }
  function g2(s, l, d, y) {
    for (; s.nodeType === 1; ) {
      var S = d;
      if (s.nodeName.toLowerCase() !== l.toLowerCase()) {
        if (!y && (s.nodeName !== "INPUT" || s.type !== "hidden"))
          break;
      } else if (y) {
        if (!s[bi])
          switch (l) {
            case "meta":
              if (!s.hasAttribute("itemprop")) break;
              return s;
            case "link":
              if (j = s.getAttribute("rel"), j === "stylesheet" && s.hasAttribute("data-precedence"))
                break;
              if (j !== S.rel || s.getAttribute("href") !== (S.href == null || S.href === "" ? null : S.href) || s.getAttribute("crossorigin") !== (S.crossOrigin == null ? null : S.crossOrigin) || s.getAttribute("title") !== (S.title == null ? null : S.title))
                break;
              return s;
            case "style":
              if (s.hasAttribute("data-precedence")) break;
              return s;
            case "script":
              if (j = s.getAttribute("src"), (j !== (S.src == null ? null : S.src) || s.getAttribute("type") !== (S.type == null ? null : S.type) || s.getAttribute("crossorigin") !== (S.crossOrigin == null ? null : S.crossOrigin)) && j && s.hasAttribute("async") && !s.hasAttribute("itemprop"))
                break;
              return s;
            default:
              return s;
          }
      } else if (l === "input" && s.type === "hidden") {
        var j = S.name == null ? null : "" + S.name;
        if (S.type === "hidden" && s.getAttribute("name") === j)
          return s;
      } else return s;
      if (s = Hs(s.nextSibling), s === null) break;
    }
    return null;
  }
  function xn(s, l, d) {
    if (l === "") return null;
    for (; s.nodeType !== 3; )
      if ((s.nodeType !== 1 || s.nodeName !== "INPUT" || s.type !== "hidden") && !d || (s = Hs(s.nextSibling), s === null)) return null;
    return s;
  }
  function Yv(s, l) {
    for (; s.nodeType !== 8; )
      if ((s.nodeType !== 1 || s.nodeName !== "INPUT" || s.type !== "hidden") && !l || (s = Hs(s.nextSibling), s === null)) return null;
    return s;
  }
  function dp(s) {
    return s.data === "$?" || s.data === "$~";
  }
  function Lc(s) {
    return s.data === "$!" || s.data === "$?" && s.ownerDocument.readyState !== "loading";
  }
  function y2(s, l) {
    var d = s.ownerDocument;
    if (s.data === "$~") s._reactRetry = l;
    else if (s.data !== "$?" || d.readyState !== "loading")
      l();
    else {
      var y = function() {
        l(), d.removeEventListener("DOMContentLoaded", y);
      };
      d.addEventListener("DOMContentLoaded", y), s._reactRetry = y;
    }
  }
  function Hs(s) {
    for (; s != null; s = s.nextSibling) {
      var l = s.nodeType;
      if (l === 1 || l === 3) break;
      if (l === 8) {
        if (l = s.data, l === "$" || l === "$!" || l === "$?" || l === "$~" || l === "&" || l === "F!" || l === "F")
          break;
        if (l === "/$" || l === "/&") return null;
      }
    }
    return s;
  }
  var Yg = null;
  function Wv(s) {
    s = s.nextSibling;
    for (var l = 0; s; ) {
      if (s.nodeType === 8) {
        var d = s.data;
        if (d === "/$" || d === "/&") {
          if (l === 0)
            return Hs(s.nextSibling);
          l--;
        } else
          d !== "$" && d !== "$!" && d !== "$?" && d !== "$~" && d !== "&" || l++;
      }
      s = s.nextSibling;
    }
    return null;
  }
  function Zv(s) {
    s = s.previousSibling;
    for (var l = 0; s; ) {
      if (s.nodeType === 8) {
        var d = s.data;
        if (d === "$" || d === "$!" || d === "$?" || d === "$~" || d === "&") {
          if (l === 0) return s;
          l--;
        } else d !== "/$" && d !== "/&" || l++;
      }
      s = s.previousSibling;
    }
    return null;
  }
  function Xv(s, l, d) {
    switch (l = wd(d), s) {
      case "html":
        if (s = l.documentElement, !s) throw Error(r(452));
        return s;
      case "head":
        if (s = l.head, !s) throw Error(r(453));
        return s;
      case "body":
        if (s = l.body, !s) throw Error(r(454));
        return s;
      default:
        throw Error(r(451));
    }
  }
  function Sd(s) {
    for (var l = s.attributes; l.length; )
      s.removeAttributeNode(l[0]);
    Wo(s);
  }
  var Gs = /* @__PURE__ */ new Map(), Qv = /* @__PURE__ */ new Set();
  function hp(s) {
    return typeof s.getRootNode == "function" ? s.getRootNode() : s.nodeType === 9 ? s : s.ownerDocument;
  }
  var Do = oe.d;
  oe.d = {
    f: v2,
    r: x2,
    D: Wg,
    C: b2,
    L: w2,
    m: _2,
    X: Gi,
    S: Ur,
    M: S2
  };
  function v2() {
    var s = Do.f(), l = np();
    return s || l;
  }
  function x2(s) {
    var l = cn(s);
    l !== null && l.tag === 5 && l.type === "form" ? Jm(l) : Do.r(s);
  }
  var Al = typeof document > "u" ? null : document;
  function Jv(s, l, d) {
    var y = Al;
    if (y && typeof l == "string" && l) {
      var S = yr(l);
      S = 'link[rel="' + s + '"][href="' + S + '"]', typeof d == "string" && (S += '[crossorigin="' + d + '"]'), Qv.has(S) || (Qv.add(S), s = { rel: s, crossOrigin: d, href: l }, y.querySelector(S) === null && (l = y.createElement("link"), ai(l, "link", s), tr(l), y.head.appendChild(l)));
    }
  }
  function Wg(s) {
    Do.D(s), Jv("dns-prefetch", s, null);
  }
  function b2(s, l) {
    Do.C(s, l), Jv("preconnect", s, l);
  }
  function w2(s, l, d) {
    Do.L(s, l, d);
    var y = Al;
    if (y && s && l) {
      var S = 'link[rel="preload"][as="' + yr(l) + '"]';
      l === "image" && d && d.imageSrcSet ? (S += '[imagesrcset="' + yr(
        d.imageSrcSet
      ) + '"]', typeof d.imageSizes == "string" && (S += '[imagesizes="' + yr(
        d.imageSizes
      ) + '"]')) : S += '[href="' + yr(s) + '"]';
      var j = S;
      switch (l) {
        case "style":
          j = Bc(s);
          break;
        case "script":
          j = $c(s);
      }
      Gs.has(j) || (s = g(
        {
          rel: "preload",
          href: l === "image" && d && d.imageSrcSet ? void 0 : s,
          as: l
        },
        d
      ), Gs.set(j, s), y.querySelector(S) !== null || l === "style" && y.querySelector(qc(j)) || l === "script" && y.querySelector(Fc(j)) || (l = y.createElement("link"), ai(l, "link", s), tr(l), y.head.appendChild(l)));
    }
  }
  function _2(s, l) {
    Do.m(s, l);
    var d = Al;
    if (d && s) {
      var y = l && typeof l.as == "string" ? l.as : "script", S = 'link[rel="modulepreload"][as="' + yr(y) + '"][href="' + yr(s) + '"]', j = S;
      switch (y) {
        case "audioworklet":
        case "paintworklet":
        case "serviceworker":
        case "sharedworker":
        case "worker":
        case "script":
          j = $c(s);
      }
      if (!Gs.has(j) && (s = g({ rel: "modulepreload", href: s }, l), Gs.set(j, s), d.querySelector(S) === null)) {
        switch (y) {
          case "audioworklet":
          case "paintworklet":
          case "serviceworker":
          case "sharedworker":
          case "worker":
          case "script":
            if (d.querySelector(Fc(j)))
              return;
        }
        y = d.createElement("link"), ai(y, "link", s), tr(y), d.head.appendChild(y);
      }
    }
  }
  function Ur(s, l, d) {
    Do.S(s, l, d);
    var y = Al;
    if (y && s) {
      var S = gr(y).hoistableStyles, j = Bc(s);
      l = l || "default";
      var L = S.get(j);
      if (!L) {
        var ee = { loading: 0, preload: null };
        if (L = y.querySelector(
          qc(j)
        ))
          ee.loading = 5;
        else {
          s = g(
            { rel: "stylesheet", href: s, "data-precedence": l },
            d
          ), (d = Gs.get(j)) && Zg(s, d);
          var xe = L = y.createElement("link");
          tr(xe), ai(xe, "link", s), xe._p = new Promise(function(De, Fe) {
            xe.onload = De, xe.onerror = Fe;
          }), xe.addEventListener("load", function() {
            ee.loading |= 1;
          }), xe.addEventListener("error", function() {
            ee.loading |= 2;
          }), ee.loading |= 4, pp(L, l, y);
        }
        L = {
          type: "stylesheet",
          instance: L,
          count: 1,
          state: ee
        }, S.set(j, L);
      }
    }
  }
  function Gi(s, l) {
    Do.X(s, l);
    var d = Al;
    if (d && s) {
      var y = gr(d).hoistableScripts, S = $c(s), j = y.get(S);
      j || (j = d.querySelector(Fc(S)), j || (s = g({ src: s, async: !0 }, l), (l = Gs.get(S)) && mp(s, l), j = d.createElement("script"), tr(j), ai(j, "link", s), d.head.appendChild(j)), j = {
        type: "script",
        instance: j,
        count: 1,
        state: null
      }, y.set(S, j));
    }
  }
  function S2(s, l) {
    Do.M(s, l);
    var d = Al;
    if (d && s) {
      var y = gr(d).hoistableScripts, S = $c(s), j = y.get(S);
      j || (j = d.querySelector(Fc(S)), j || (s = g({ src: s, async: !0, type: "module" }, l), (l = Gs.get(S)) && mp(s, l), j = d.createElement("script"), tr(j), ai(j, "link", s), d.head.appendChild(j)), j = {
        type: "script",
        instance: j,
        count: 1,
        state: null
      }, y.set(S, j));
    }
  }
  function e1(s, l, d, y) {
    var S = (S = we.current) ? hp(S) : null;
    if (!S) throw Error(r(446));
    switch (s) {
      case "meta":
      case "title":
        return null;
      case "style":
        return typeof d.precedence == "string" && typeof d.href == "string" ? (l = Bc(d.href), d = gr(
          S
        ).hoistableStyles, y = d.get(l), y || (y = {
          type: "style",
          instance: null,
          count: 0,
          state: null
        }, d.set(l, y)), y) : { type: "void", instance: null, count: 0, state: null };
      case "link":
        if (d.rel === "stylesheet" && typeof d.href == "string" && typeof d.precedence == "string") {
          s = Bc(d.href);
          var j = gr(
            S
          ).hoistableStyles, L = j.get(s);
          if (L || (S = S.ownerDocument || S, L = {
            type: "stylesheet",
            instance: null,
            count: 0,
            state: { loading: 0, preload: null }
          }, j.set(s, L), (j = S.querySelector(
            qc(s)
          )) && !j._p && (L.instance = j, L.state.loading = 5), Gs.has(s) || (d = {
            rel: "preload",
            as: "style",
            href: d.href,
            crossOrigin: d.crossOrigin,
            integrity: d.integrity,
            media: d.media,
            hrefLang: d.hrefLang,
            referrerPolicy: d.referrerPolicy
          }, Gs.set(s, d), j || C2(
            S,
            s,
            d,
            L.state
          ))), l && y === null)
            throw Error(r(528, ""));
          return L;
        }
        if (l && y !== null)
          throw Error(r(529, ""));
        return null;
      case "script":
        return l = d.async, d = d.src, typeof d == "string" && l && typeof l != "function" && typeof l != "symbol" ? (l = $c(d), d = gr(
          S
        ).hoistableScripts, y = d.get(l), y || (y = {
          type: "script",
          instance: null,
          count: 0,
          state: null
        }, d.set(l, y)), y) : { type: "void", instance: null, count: 0, state: null };
      default:
        throw Error(r(444, s));
    }
  }
  function Bc(s) {
    return 'href="' + yr(s) + '"';
  }
  function qc(s) {
    return 'link[rel="stylesheet"][' + s + "]";
  }
  function t1(s) {
    return g({}, s, {
      "data-precedence": s.precedence,
      precedence: null
    });
  }
  function C2(s, l, d, y) {
    s.querySelector('link[rel="preload"][as="style"][' + l + "]") ? y.loading = 1 : (l = s.createElement("link"), y.preload = l, l.addEventListener("load", function() {
      return y.loading |= 1;
    }), l.addEventListener("error", function() {
      return y.loading |= 2;
    }), ai(l, "link", d), tr(l), s.head.appendChild(l));
  }
  function $c(s) {
    return '[src="' + yr(s) + '"]';
  }
  function Fc(s) {
    return "script[async]" + s;
  }
  function n1(s, l, d) {
    if (l.count++, l.instance === null)
      switch (l.type) {
        case "style":
          var y = s.querySelector(
            'style[data-href~="' + yr(d.href) + '"]'
          );
          if (y)
            return l.instance = y, tr(y), y;
          var S = g({}, d, {
            "data-href": d.href,
            "data-precedence": d.precedence,
            href: null,
            precedence: null
          });
          return y = (s.ownerDocument || s).createElement(
            "style"
          ), tr(y), ai(y, "style", S), pp(y, d.precedence, s), l.instance = y;
        case "stylesheet":
          S = Bc(d.href);
          var j = s.querySelector(
            qc(S)
          );
          if (j)
            return l.state.loading |= 4, l.instance = j, tr(j), j;
          y = t1(d), (S = Gs.get(S)) && Zg(y, S), j = (s.ownerDocument || s).createElement("link"), tr(j);
          var L = j;
          return L._p = new Promise(function(ee, xe) {
            L.onload = ee, L.onerror = xe;
          }), ai(j, "link", y), l.state.loading |= 4, pp(j, d.precedence, s), l.instance = j;
        case "script":
          return j = $c(d.src), (S = s.querySelector(
            Fc(j)
          )) ? (l.instance = S, tr(S), S) : (y = d, (S = Gs.get(j)) && (y = g({}, d), mp(y, S)), s = s.ownerDocument || s, S = s.createElement("script"), tr(S), ai(S, "link", y), s.head.appendChild(S), l.instance = S);
        case "void":
          return null;
        default:
          throw Error(r(443, l.type));
      }
    else
      l.type === "stylesheet" && (l.state.loading & 4) === 0 && (y = l.instance, l.state.loading |= 4, pp(y, d.precedence, s));
    return l.instance;
  }
  function pp(s, l, d) {
    for (var y = d.querySelectorAll(
      'link[rel="stylesheet"][data-precedence],style[data-precedence]'
    ), S = y.length ? y[y.length - 1] : null, j = S, L = 0; L < y.length; L++) {
      var ee = y[L];
      if (ee.dataset.precedence === l) j = ee;
      else if (j !== S) break;
    }
    j ? j.parentNode.insertBefore(s, j.nextSibling) : (l = d.nodeType === 9 ? d.head : d, l.insertBefore(s, l.firstChild));
  }
  function Zg(s, l) {
    s.crossOrigin == null && (s.crossOrigin = l.crossOrigin), s.referrerPolicy == null && (s.referrerPolicy = l.referrerPolicy), s.title == null && (s.title = l.title);
  }
  function mp(s, l) {
    s.crossOrigin == null && (s.crossOrigin = l.crossOrigin), s.referrerPolicy == null && (s.referrerPolicy = l.referrerPolicy), s.integrity == null && (s.integrity = l.integrity);
  }
  var Cd = null;
  function r1(s, l, d) {
    if (Cd === null) {
      var y = /* @__PURE__ */ new Map(), S = Cd = /* @__PURE__ */ new Map();
      S.set(d, y);
    } else
      S = Cd, y = S.get(d), y || (y = /* @__PURE__ */ new Map(), S.set(d, y));
    if (y.has(s)) return y;
    for (y.set(s, null), d = d.getElementsByTagName(s), S = 0; S < d.length; S++) {
      var j = d[S];
      if (!(j[bi] || j[Cn] || s === "link" && j.getAttribute("rel") === "stylesheet") && j.namespaceURI !== "http://www.w3.org/2000/svg") {
        var L = j.getAttribute(l) || "";
        L = s + L;
        var ee = y.get(L);
        ee ? ee.push(j) : y.set(L, [j]);
      }
    }
    return y;
  }
  function i1(s, l, d) {
    s = s.ownerDocument || s, s.head.insertBefore(
      d,
      l === "title" ? s.querySelector("head > title") : null
    );
  }
  function E2(s, l, d) {
    if (d === 1 || l.itemProp != null) return !1;
    switch (s) {
      case "meta":
      case "title":
        return !0;
      case "style":
        if (typeof l.precedence != "string" || typeof l.href != "string" || l.href === "")
          break;
        return !0;
      case "link":
        if (typeof l.rel != "string" || typeof l.href != "string" || l.href === "" || l.onLoad || l.onError)
          break;
        switch (l.rel) {
          case "stylesheet":
            return s = l.disabled, typeof l.precedence == "string" && s == null;
          default:
            return !0;
        }
      case "script":
        if (l.async && typeof l.async != "function" && typeof l.async != "symbol" && !l.onLoad && !l.onError && l.src && typeof l.src == "string")
          return !0;
    }
    return !1;
  }
  function s1(s) {
    return !(s.type === "stylesheet" && (s.state.loading & 3) === 0);
  }
  function Uc(s, l, d, y) {
    if (d.type === "stylesheet" && (typeof y.media != "string" || matchMedia(y.media).matches !== !1) && (d.state.loading & 4) === 0) {
      if (d.instance === null) {
        var S = Bc(y.href), j = l.querySelector(
          qc(S)
        );
        if (j) {
          l = j._p, l !== null && typeof l == "object" && typeof l.then == "function" && (s.count++, s = gp.bind(s), l.then(s, s)), d.state.loading |= 4, d.instance = j, tr(j);
          return;
        }
        j = l.ownerDocument || l, y = t1(y), (S = Gs.get(S)) && Zg(y, S), j = j.createElement("link"), tr(j);
        var L = j;
        L._p = new Promise(function(ee, xe) {
          L.onload = ee, L.onerror = xe;
        }), ai(j, "link", y), d.instance = j;
      }
      s.stylesheets === null && (s.stylesheets = /* @__PURE__ */ new Map()), s.stylesheets.set(d, l), (l = d.state.preload) && (d.state.loading & 3) === 0 && (s.count++, d = gp.bind(s), l.addEventListener("load", d), l.addEventListener("error", d));
    }
  }
  var Xg = 0;
  function k2(s, l) {
    return s.stylesheets && s.count === 0 && vp(s, s.stylesheets), 0 < s.count || 0 < s.imgCount ? function(d) {
      var y = setTimeout(function() {
        if (s.stylesheets && vp(s, s.stylesheets), s.unsuspend) {
          var j = s.unsuspend;
          s.unsuspend = null, j();
        }
      }, 6e4 + l);
      0 < s.imgBytes && Xg === 0 && (Xg = 62500 * xd());
      var S = setTimeout(
        function() {
          if (s.waitingForImages = !1, s.count === 0 && (s.stylesheets && vp(s, s.stylesheets), s.unsuspend)) {
            var j = s.unsuspend;
            s.unsuspend = null, j();
          }
        },
        (s.imgBytes > Xg ? 50 : 800) + l
      );
      return s.unsuspend = d, function() {
        s.unsuspend = null, clearTimeout(y), clearTimeout(S);
      };
    } : null;
  }
  function gp() {
    if (this.count--, this.count === 0 && (this.imgCount === 0 || !this.waitingForImages)) {
      if (this.stylesheets) vp(this, this.stylesheets);
      else if (this.unsuspend) {
        var s = this.unsuspend;
        this.unsuspend = null, s();
      }
    }
  }
  var yp = null;
  function vp(s, l) {
    s.stylesheets = null, s.unsuspend !== null && (s.count++, yp = /* @__PURE__ */ new Map(), l.forEach(a1, s), yp = null, gp.call(s));
  }
  function a1(s, l) {
    if (!(l.state.loading & 4)) {
      var d = yp.get(s);
      if (d) var y = d.get(null);
      else {
        d = /* @__PURE__ */ new Map(), yp.set(s, d);
        for (var S = s.querySelectorAll(
          "link[data-precedence],style[data-precedence]"
        ), j = 0; j < S.length; j++) {
          var L = S[j];
          (L.nodeName === "LINK" || L.getAttribute("media") !== "not all") && (d.set(L.dataset.precedence, L), y = L);
        }
        y && d.set(null, y);
      }
      S = l.instance, L = S.getAttribute("data-precedence"), j = d.get(L) || y, j === y && d.set(null, S), d.set(L, S), this.count++, y = gp.bind(this), S.addEventListener("load", y), S.addEventListener("error", y), j ? j.parentNode.insertBefore(S, j.nextSibling) : (s = s.nodeType === 9 ? s.head : s, s.insertBefore(S, s.firstChild)), l.state.loading |= 4;
    }
  }
  var Vc = {
    $$typeof: N,
    Provider: null,
    Consumer: null,
    _currentValue: fe,
    _currentValue2: fe,
    _threadCount: 0
  };
  function T2(s, l, d, y, S, j, L, ee, xe) {
    this.tag = 1, this.containerInfo = s, this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.callbackNode = this.next = this.pendingContext = this.context = this.cancelPendingCommit = null, this.callbackPriority = 0, this.expirationTimes = _s(-1), this.entangledLanes = this.shellSuspendCounter = this.errorRecoveryDisabledLanes = this.expiredLanes = this.warmLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = _s(0), this.hiddenUpdates = _s(null), this.identifierPrefix = y, this.onUncaughtError = S, this.onCaughtError = j, this.onRecoverableError = L, this.pooledCache = null, this.pooledCacheLanes = 0, this.formState = xe, this.incompleteTransitions = /* @__PURE__ */ new Map();
  }
  function o1(s, l, d, y, S, j, L, ee, xe, De, Fe, Ge) {
    return s = new T2(
      s,
      l,
      d,
      L,
      xe,
      De,
      Fe,
      Ge,
      ee
    ), l = 1, j === !0 && (l |= 24), j = ni(3, null, null, l), s.current = j, j.stateNode = s, l = fa(), l.refCount++, s.pooledCache = l, l.refCount++, j.memoizedState = {
      element: y,
      isDehydrated: d,
      cache: l
    }, $a(j), s;
  }
  function l1(s) {
    return s ? (s = ti, s) : ti;
  }
  function u1(s, l, d, y, S, j) {
    S = l1(S), y.context === null ? y.context = S : y.pendingContext = S, y = pl(l), y.payload = { element: d }, j = j === void 0 ? null : j, j !== null && (y.callback = j), d = pa(s, y, l), d !== null && (Ui(d, s, l), zf(d, s, l));
  }
  function c1(s, l) {
    if (s = s.memoizedState, s !== null && s.dehydrated !== null) {
      var d = s.retryLane;
      s.retryLane = d !== 0 && d < l ? d : l;
    }
  }
  function Qg(s, l) {
    c1(s, l), (s = s.alternate) && c1(s, l);
  }
  function f1(s) {
    if (s.tag === 13 || s.tag === 31) {
      var l = On(s, 67108864);
      l !== null && Ui(l, s, 67108864), Qg(s, 67108864);
    }
  }
  function d1(s) {
    if (s.tag === 13 || s.tag === 31) {
      var l = hs();
      l = Jl(l);
      var d = On(s, l);
      d !== null && Ui(d, s, l), Qg(s, l);
    }
  }
  var xp = !0;
  function A2(s, l, d, y) {
    var S = Q.T;
    Q.T = null;
    var j = oe.p;
    try {
      oe.p = 2, Jg(s, l, d, y);
    } finally {
      oe.p = j, Q.T = S;
    }
  }
  function j2(s, l, d, y) {
    var S = Q.T;
    Q.T = null;
    var j = oe.p;
    try {
      oe.p = 8, Jg(s, l, d, y);
    } finally {
      oe.p = j, Q.T = S;
    }
  }
  function Jg(s, l, d, y) {
    if (xp) {
      var S = e0(y);
      if (S === null)
        Fg(
          s,
          l,
          y,
          bp,
          d
        ), p1(s, y);
      else if (m1(
        S,
        s,
        l,
        d,
        y
      ))
        y.stopPropagation();
      else if (p1(s, y), l & 4 && -1 < N2.indexOf(s)) {
        for (; S !== null; ) {
          var j = cn(S);
          if (j !== null)
            switch (j.tag) {
              case 3:
                if (j = j.stateNode, j.current.memoizedState.isDehydrated) {
                  var L = Qi(j.pendingLanes);
                  if (L !== 0) {
                    var ee = j;
                    for (ee.pendingLanes |= 2, ee.entangledLanes |= 2; L; ) {
                      var xe = 1 << 31 - nt(L);
                      ee.entanglements[1] |= xe, L &= ~xe;
                    }
                    Ga(j), (yn & 6) === 0 && (Cu = bn() + 500, gd(0));
                  }
                }
                break;
              case 31:
              case 13:
                ee = On(j, 2), ee !== null && Ui(ee, j, 2), np(), Qg(j, 2);
            }
          if (j = e0(y), j === null && Fg(
            s,
            l,
            y,
            bp,
            d
          ), j === S) break;
          S = j;
        }
        S !== null && y.stopPropagation();
      } else
        Fg(
          s,
          l,
          y,
          null,
          d
        );
    }
  }
  function e0(s) {
    return s = Zu(s), t0(s);
  }
  var bp = null;
  function t0(s) {
    if (bp = null, s = ks(s), s !== null) {
      var l = a(s);
      if (l === null) s = null;
      else {
        var d = l.tag;
        if (d === 13) {
          if (s = o(l), s !== null) return s;
          s = null;
        } else if (d === 31) {
          if (s = u(l), s !== null) return s;
          s = null;
        } else if (d === 3) {
          if (l.stateNode.current.memoizedState.isDehydrated)
            return l.tag === 3 ? l.stateNode.containerInfo : null;
          s = null;
        } else l !== s && (s = null);
      }
    }
    return bp = s, null;
  }
  function h1(s) {
    switch (s) {
      case "beforetoggle":
      case "cancel":
      case "click":
      case "close":
      case "contextmenu":
      case "copy":
      case "cut":
      case "auxclick":
      case "dblclick":
      case "dragend":
      case "dragstart":
      case "drop":
      case "focusin":
      case "focusout":
      case "input":
      case "invalid":
      case "keydown":
      case "keypress":
      case "keyup":
      case "mousedown":
      case "mouseup":
      case "paste":
      case "pause":
      case "play":
      case "pointercancel":
      case "pointerdown":
      case "pointerup":
      case "ratechange":
      case "reset":
      case "resize":
      case "seeked":
      case "submit":
      case "toggle":
      case "touchcancel":
      case "touchend":
      case "touchstart":
      case "volumechange":
      case "change":
      case "selectionchange":
      case "textInput":
      case "compositionstart":
      case "compositionend":
      case "compositionupdate":
      case "beforeblur":
      case "afterblur":
      case "beforeinput":
      case "blur":
      case "fullscreenchange":
      case "focus":
      case "hashchange":
      case "popstate":
      case "select":
      case "selectstart":
        return 2;
      case "drag":
      case "dragenter":
      case "dragexit":
      case "dragleave":
      case "dragover":
      case "mousemove":
      case "mouseout":
      case "mouseover":
      case "pointermove":
      case "pointerout":
      case "pointerover":
      case "scroll":
      case "touchmove":
      case "wheel":
      case "mouseenter":
      case "mouseleave":
      case "pointerenter":
      case "pointerleave":
        return 8;
      case "message":
        switch ($n()) {
          case Le:
            return 2;
          case We:
            return 8;
          case at:
          case Ct:
            return 32;
          case Rt:
            return 268435456;
          default:
            return 32;
        }
      default:
        return 32;
    }
  }
  var n0 = !1, jl = null, Nl = null, Rl = null, Ed = /* @__PURE__ */ new Map(), kd = /* @__PURE__ */ new Map(), Ml = [], N2 = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(
    " "
  );
  function p1(s, l) {
    switch (s) {
      case "focusin":
      case "focusout":
        jl = null;
        break;
      case "dragenter":
      case "dragleave":
        Nl = null;
        break;
      case "mouseover":
      case "mouseout":
        Rl = null;
        break;
      case "pointerover":
      case "pointerout":
        Ed.delete(l.pointerId);
        break;
      case "gotpointercapture":
      case "lostpointercapture":
        kd.delete(l.pointerId);
    }
  }
  function Tu(s, l, d, y, S, j) {
    return s === null || s.nativeEvent !== j ? (s = {
      blockedOn: l,
      domEventName: d,
      eventSystemFlags: y,
      nativeEvent: j,
      targetContainers: [S]
    }, l !== null && (l = cn(l), l !== null && f1(l)), s) : (s.eventSystemFlags |= y, l = s.targetContainers, S !== null && l.indexOf(S) === -1 && l.push(S), s);
  }
  function m1(s, l, d, y, S) {
    switch (l) {
      case "focusin":
        return jl = Tu(
          jl,
          s,
          l,
          d,
          y,
          S
        ), !0;
      case "dragenter":
        return Nl = Tu(
          Nl,
          s,
          l,
          d,
          y,
          S
        ), !0;
      case "mouseover":
        return Rl = Tu(
          Rl,
          s,
          l,
          d,
          y,
          S
        ), !0;
      case "pointerover":
        var j = S.pointerId;
        return Ed.set(
          j,
          Tu(
            Ed.get(j) || null,
            s,
            l,
            d,
            y,
            S
          )
        ), !0;
      case "gotpointercapture":
        return j = S.pointerId, kd.set(
          j,
          Tu(
            kd.get(j) || null,
            s,
            l,
            d,
            y,
            S
          )
        ), !0;
    }
    return !1;
  }
  function r0(s) {
    var l = ks(s.target);
    if (l !== null) {
      var d = a(l);
      if (d !== null) {
        if (l = d.tag, l === 13) {
          if (l = o(d), l !== null) {
            s.blockedOn = l, ao(s.priority, function() {
              d1(d);
            });
            return;
          }
        } else if (l === 31) {
          if (l = u(d), l !== null) {
            s.blockedOn = l, ao(s.priority, function() {
              d1(d);
            });
            return;
          }
        } else if (l === 3 && d.stateNode.current.memoizedState.isDehydrated) {
          s.blockedOn = d.tag === 3 ? d.stateNode.containerInfo : null;
          return;
        }
      }
    }
    s.blockedOn = null;
  }
  function wp(s) {
    if (s.blockedOn !== null) return !1;
    for (var l = s.targetContainers; 0 < l.length; ) {
      var d = e0(s.nativeEvent);
      if (d === null) {
        d = s.nativeEvent;
        var y = new d.constructor(
          d.type,
          d
        );
        Rs = y, d.target.dispatchEvent(y), Rs = null;
      } else
        return l = cn(d), l !== null && f1(l), s.blockedOn = d, !1;
      l.shift();
    }
    return !0;
  }
  function g1(s, l, d) {
    wp(s) && d.delete(l);
  }
  function R2() {
    n0 = !1, jl !== null && wp(jl) && (jl = null), Nl !== null && wp(Nl) && (Nl = null), Rl !== null && wp(Rl) && (Rl = null), Ed.forEach(g1), kd.forEach(g1);
  }
  function Hc(s, l) {
    s.blockedOn === l && (s.blockedOn = null, n0 || (n0 = !0, e.unstable_scheduleCallback(
      e.unstable_NormalPriority,
      R2
    )));
  }
  var _p = null;
  function y1(s) {
    _p !== s && (_p = s, e.unstable_scheduleCallback(
      e.unstable_NormalPriority,
      function() {
        _p === s && (_p = null);
        for (var l = 0; l < s.length; l += 3) {
          var d = s[l], y = s[l + 1], S = s[l + 2];
          if (typeof y != "function") {
            if (t0(y || d) === null)
              continue;
            break;
          }
          var j = cn(d);
          j !== null && (s.splice(l, 3), l -= 3, yl(
            j,
            {
              pending: !0,
              data: S,
              method: d.method,
              action: y
            },
            y,
            S
          ));
        }
      }
    ));
  }
  function Gc(s) {
    function l(xe) {
      return Hc(xe, s);
    }
    jl !== null && Hc(jl, s), Nl !== null && Hc(Nl, s), Rl !== null && Hc(Rl, s), Ed.forEach(l), kd.forEach(l);
    for (var d = 0; d < Ml.length; d++) {
      var y = Ml[d];
      y.blockedOn === s && (y.blockedOn = null);
    }
    for (; 0 < Ml.length && (d = Ml[0], d.blockedOn === null); )
      r0(d), d.blockedOn === null && Ml.shift();
    if (d = (s.ownerDocument || s).$$reactFormReplay, d != null)
      for (y = 0; y < d.length; y += 3) {
        var S = d[y], j = d[y + 1], L = S[er] || null;
        if (typeof j == "function")
          L || y1(d);
        else if (L) {
          var ee = null;
          if (j && j.hasAttribute("formAction")) {
            if (S = j, L = j[er] || null)
              ee = L.formAction;
            else if (t0(S) !== null) continue;
          } else ee = L.action;
          typeof ee == "function" ? d[y + 1] = ee : (d.splice(y, 3), y -= 3), y1(d);
        }
      }
  }
  function Ai() {
    function s(j) {
      j.canIntercept && j.info === "react-transition" && j.intercept({
        handler: function() {
          return new Promise(function(L) {
            return S = L;
          });
        },
        focusReset: "manual",
        scroll: "manual"
      });
    }
    function l() {
      S !== null && (S(), S = null), y || setTimeout(d, 20);
    }
    function d() {
      if (!y && !navigation.transition) {
        var j = navigation.currentEntry;
        j && j.url != null && navigation.navigate(j.url, {
          state: j.getState(),
          info: "react-transition",
          history: "replace"
        });
      }
    }
    if (typeof navigation == "object") {
      var y = !1, S = null;
      return navigation.addEventListener("navigate", s), navigation.addEventListener("navigatesuccess", l), navigation.addEventListener("navigateerror", l), setTimeout(d, 100), function() {
        y = !0, navigation.removeEventListener("navigate", s), navigation.removeEventListener("navigatesuccess", l), navigation.removeEventListener("navigateerror", l), S !== null && (S(), S = null);
      };
    }
  }
  function Td(s) {
    this._internalRoot = s;
  }
  Sp.prototype.render = Td.prototype.render = function(s) {
    var l = this._internalRoot;
    if (l === null) throw Error(r(409));
    var d = l.current, y = hs();
    u1(d, y, s, l, null, null);
  }, Sp.prototype.unmount = Td.prototype.unmount = function() {
    var s = this._internalRoot;
    if (s !== null) {
      this._internalRoot = null;
      var l = s.containerInfo;
      u1(s.current, 2, null, s, null, null), np(), l[qr] = null;
    }
  };
  function Sp(s) {
    this._internalRoot = s;
  }
  Sp.prototype.unstable_scheduleHydration = function(s) {
    if (s) {
      var l = so();
      s = { blockedOn: null, target: s, priority: l };
      for (var d = 0; d < Ml.length && l !== 0 && l < Ml[d].priority; d++) ;
      Ml.splice(d, 0, s), d === 0 && r0(s);
    }
  };
  var v1 = t.version;
  if (v1 !== "19.2.3")
    throw Error(
      r(
        527,
        v1,
        "19.2.3"
      )
    );
  oe.findDOMNode = function(s) {
    var l = s._reactInternals;
    if (l === void 0)
      throw typeof s.render == "function" ? Error(r(188)) : (s = Object.keys(s).join(","), Error(r(268, s)));
    return s = f(l), s = s !== null ? p(s) : null, s = s === null ? null : s.stateNode, s;
  };
  var M2 = {
    bundleType: 0,
    version: "19.2.3",
    rendererPackageName: "react-dom",
    currentDispatcherRef: Q,
    reconcilerVersion: "19.2.3"
  };
  if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") {
    var Cp = __REACT_DEVTOOLS_GLOBAL_HOOK__;
    if (!Cp.isDisabled && Cp.supportsFiber)
      try {
        bt = Cp.inject(
          M2
        ), $t = Cp;
      } catch {
      }
  }
  return s0.createRoot = function(s, l) {
    if (!i(s)) throw Error(r(299));
    var d = !1, y = "", S = ig, j = sg, L = rv;
    return l != null && (l.unstable_strictMode === !0 && (d = !0), l.identifierPrefix !== void 0 && (y = l.identifierPrefix), l.onUncaughtError !== void 0 && (S = l.onUncaughtError), l.onCaughtError !== void 0 && (j = l.onCaughtError), l.onRecoverableError !== void 0 && (L = l.onRecoverableError)), l = o1(
      s,
      1,
      !1,
      null,
      null,
      d,
      y,
      null,
      S,
      j,
      L,
      Ai
    ), s[qr] = l.current, $g(s), new Td(l);
  }, s0.hydrateRoot = function(s, l, d) {
    if (!i(s)) throw Error(r(299));
    var y = !1, S = "", j = ig, L = sg, ee = rv, xe = null;
    return d != null && (d.unstable_strictMode === !0 && (y = !0), d.identifierPrefix !== void 0 && (S = d.identifierPrefix), d.onUncaughtError !== void 0 && (j = d.onUncaughtError), d.onCaughtError !== void 0 && (L = d.onCaughtError), d.onRecoverableError !== void 0 && (ee = d.onRecoverableError), d.formState !== void 0 && (xe = d.formState)), l = o1(
      s,
      1,
      !0,
      l,
      d ?? null,
      y,
      S,
      xe,
      j,
      L,
      ee,
      Ai
    ), l.context = l1(null), d = l.current, y = hs(), y = Jl(y), S = pl(y), S.callback = null, pa(d, S, y), d = y, l.current.lanes = d, Mi(l, d), Ga(l), s[qr] = l.current, $g(s), new Sp(l);
  }, s0.version = "19.2.3", s0;
}
var KT;
function b$() {
  if (KT) return P2.exports;
  KT = 1;
  function e() {
    if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function"))
      try {
        __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e);
      } catch (t) {
        console.error(t);
      }
  }
  return e(), P2.exports = /* @__PURE__ */ x$(), P2.exports;
}
var w$ = /* @__PURE__ */ b$();
const YO = /* @__PURE__ */ uf(w$), _$ = () => {
  if (document.getElementById("engram-font-preload")) return;
  [
    "https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&display=swap",
    "https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500&display=swap"
  ].forEach((t, n) => {
    const r = document.createElement("link");
    r.rel = "preload", r.as = "style", r.href = t, n === 0 && (r.id = "engram-font-preload"), document.head.appendChild(r);
    const i = document.createElement("link");
    i.rel = "stylesheet", i.href = t, document.head.appendChild(i);
  });
}, S$ = () => (B.useEffect(() => {
  _$();
}, []), /* @__PURE__ */ h.jsx("style", { children: `
    :root {
      --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
      --font-mono: 'JetBrains Mono', monospace;
    }

    body {
      font-family: var(--font-sans);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    .font-mono {
      font-family: var(--font-mono);
    }
    
    /* Custom Scrollbar for dark theme - Minimalist */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(63, 63, 70, 0.4); /* zinc-700 with opacity */
      border-radius: 3px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(82, 82, 91, 0.6); /* zinc-600 with opacity */
    }

    /* Animation Utilities */
    .animate-float {
      animation: float 6s ease-in-out infinite;
    }
    .animate-in {
      animation: fadeIn 0.3s ease-out forwards;
    }
    .fade-in {
      opacity: 0;
      animation: fadeIn 0.3s ease-out forwards;
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Utility to hide scrollbar but keep functionality */
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  ` }));
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const C$ = (e) => e.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase(), E$ = (e) => e.replace(
  /^([A-Z])|[\s-_]+(\w)/g,
  (t, n, r) => r ? r.toUpperCase() : n.toLowerCase()
), YT = (e) => {
  const t = E$(e);
  return t.charAt(0).toUpperCase() + t.slice(1);
}, WO = (...e) => e.filter((t, n, r) => !!t && t.trim() !== "" && r.indexOf(t) === n).join(" ").trim(), k$ = (e) => {
  for (const t in e)
    if (t.startsWith("aria-") || t === "role" || t === "title")
      return !0;
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var T$ = {
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  strokeWidth: 2,
  strokeLinecap: "round",
  strokeLinejoin: "round"
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const A$ = B.forwardRef(
  ({
    color: e = "currentColor",
    size: t = 24,
    strokeWidth: n = 2,
    absoluteStrokeWidth: r,
    className: i = "",
    children: a,
    iconNode: o,
    ...u
  }, c) => B.createElement(
    "svg",
    {
      ref: c,
      ...T$,
      width: t,
      height: t,
      stroke: e,
      strokeWidth: r ? Number(n) * 24 / Number(t) : n,
      className: WO("lucide", i),
      ...!a && !k$(u) && { "aria-hidden": "true" },
      ...u
    },
    [
      ...o.map(([f, p]) => B.createElement(f, p)),
      ...Array.isArray(a) ? a : [a]
    ]
  )
);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ht = (e, t) => {
  const n = B.forwardRef(
    ({ className: r, ...i }, a) => B.createElement(A$, {
      ref: a,
      iconNode: t,
      className: WO(
        `lucide-${C$(YT(e))}`,
        `lucide-${e}`,
        r
      ),
      ...i
    })
  );
  return n.displayName = YT(e), n;
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const j$ = [
  ["path", { d: "M12 17V3", key: "1cwfxf" }],
  ["path", { d: "m6 11 6 6 6-6", key: "12ii2o" }],
  ["path", { d: "M19 21H5", key: "150jfl" }]
], N$ = ht("arrow-down-to-line", j$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const R$ = [
  ["path", { d: "m12 19-7-7 7-7", key: "1l729n" }],
  ["path", { d: "M19 12H5", key: "x3x0zl" }]
], N5 = ht("arrow-left", R$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const M$ = [
  ["path", { d: "M10.268 21a2 2 0 0 0 3.464 0", key: "vwvbt9" }],
  [
    "path",
    {
      d: "M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",
      key: "11g9vi"
    }
  ]
], O$ = ht("bell", M$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const D$ = [
  ["path", { d: "M12 7v14", key: "1akyts" }],
  [
    "path",
    {
      d: "M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",
      key: "ruj8y"
    }
  ]
], R5 = ht("book-open", D$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const z$ = [
  [
    "path",
    {
      d: "M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",
      key: "k3hazp"
    }
  ]
], ZO = ht("book", z$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const P$ = [
  ["path", { d: "M12 8V4H8", key: "hb8ula" }],
  ["rect", { width: "16", height: "12", x: "4", y: "8", rx: "2", key: "enze0r" }],
  ["path", { d: "M2 14h2", key: "vft8re" }],
  ["path", { d: "M20 14h2", key: "4cs60a" }],
  ["path", { d: "M15 13v2", key: "1xurst" }],
  ["path", { d: "M9 13v2", key: "rq6x2g" }]
], XO = ht("bot", P$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const I$ = [
  [
    "path",
    { d: "M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1", key: "ezmyqa" }
  ],
  [
    "path",
    {
      d: "M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",
      key: "e1hn23"
    }
  ]
], QO = ht("braces", I$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const L$ = [
  [
    "path",
    {
      d: "M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",
      key: "l5xja"
    }
  ],
  ["path", { d: "M9 13a4.5 4.5 0 0 0 3-4", key: "10igwf" }],
  ["path", { d: "M6.003 5.125A3 3 0 0 0 6.401 6.5", key: "105sqy" }],
  ["path", { d: "M3.477 10.896a4 4 0 0 1 .585-.396", key: "ql3yin" }],
  ["path", { d: "M6 18a4 4 0 0 1-1.967-.516", key: "2e4loj" }],
  ["path", { d: "M12 13h4", key: "1ku699" }],
  ["path", { d: "M12 18h6a2 2 0 0 1 2 2v1", key: "105ag5" }],
  ["path", { d: "M12 8h8", key: "1lhi5i" }],
  ["path", { d: "M16 8V5a2 2 0 0 1 2-2", key: "u6izg6" }],
  ["circle", { cx: "16", cy: "13", r: ".5", key: "ry7gng" }],
  ["circle", { cx: "18", cy: "3", r: ".5", key: "1aiba7" }],
  ["circle", { cx: "20", cy: "21", r: ".5", key: "yhc1fs" }],
  ["circle", { cx: "20", cy: "8", r: ".5", key: "1e43v0" }]
], WT = ht("brain-circuit", L$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const B$ = [
  ["path", { d: "M12 18V5", key: "adv99a" }],
  ["path", { d: "M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4", key: "1e3is1" }],
  ["path", { d: "M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5", key: "1gqd8o" }],
  ["path", { d: "M17.997 5.125a4 4 0 0 1 2.526 5.77", key: "iwvgf7" }],
  ["path", { d: "M18 18a4 4 0 0 0 2-7.464", key: "efp6ie" }],
  ["path", { d: "M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517", key: "1gq6am" }],
  ["path", { d: "M6 18a4 4 0 0 1-2-7.464", key: "k1g0md" }],
  ["path", { d: "M6.003 5.125a4 4 0 0 0-2.526 5.77", key: "q97ue3" }]
], hy = ht("brain", B$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const q$ = [
  ["path", { d: "M12 20v-9", key: "1qisl0" }],
  ["path", { d: "M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z", key: "uouzyp" }],
  ["path", { d: "M14.12 3.88 16 2", key: "qol33r" }],
  ["path", { d: "M21 21a4 4 0 0 0-3.81-4", key: "1b0z45" }],
  ["path", { d: "M21 5a4 4 0 0 1-3.55 3.97", key: "5cxbf6" }],
  ["path", { d: "M22 13h-4", key: "1jl80f" }],
  ["path", { d: "M3 21a4 4 0 0 1 3.81-4", key: "1fjd4g" }],
  ["path", { d: "M3 5a4 4 0 0 0 3.55 3.97", key: "1d7oge" }],
  ["path", { d: "M6 13H2", key: "82j7cp" }],
  ["path", { d: "m8 2 1.88 1.88", key: "fmnt4t" }],
  ["path", { d: "M9 7.13V6a3 3 0 1 1 6 0v1.13", key: "1vgav8" }]
], $$ = ht("bug", q$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const F$ = [
  ["rect", { width: "16", height: "20", x: "4", y: "2", rx: "2", key: "1nb95v" }],
  ["line", { x1: "8", x2: "16", y1: "6", y2: "6", key: "x4nwl0" }],
  ["line", { x1: "16", x2: "16", y1: "14", y2: "18", key: "wjye3r" }],
  ["path", { d: "M16 10h.01", key: "1m94wz" }],
  ["path", { d: "M12 10h.01", key: "1nrarc" }],
  ["path", { d: "M8 10h.01", key: "19clt8" }],
  ["path", { d: "M12 14h.01", key: "1etili" }],
  ["path", { d: "M8 14h.01", key: "6423bh" }],
  ["path", { d: "M12 18h.01", key: "mhygvu" }],
  ["path", { d: "M8 18h.01", key: "lrp35t" }]
], U$ = ht("calculator", F$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const V$ = [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]], Gx = ht("check", V$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const H$ = [["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]], Zd = ht("chevron-down", H$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const G$ = [["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]], ih = ht("chevron-right", G$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const K$ = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }],
  ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]
], rf = ht("circle-alert", K$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Y$ = [
  ["path", { d: "M21.801 10A10 10 0 1 1 17 3.335", key: "yps3ct" }],
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]
], M5 = ht("circle-check-big", Y$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const W$ = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]
], Kx = ht("circle-check", W$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Z$ = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3", key: "1u773s" }],
  ["path", { d: "M12 17h.01", key: "p32p05" }]
], X$ = ht("circle-question-mark", Z$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Q$ = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m15 9-6 6", key: "1uzhvr" }],
  ["path", { d: "m9 9 6 6", key: "z0biqf" }]
], JO = ht("circle-x", Q$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const J$ = [
  ["path", { d: "M12 6v6l4 2", key: "mmk7yg" }],
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]
], hx = ht("clock", J$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const eF = [
  ["path", { d: "M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z", key: "p7xjir" }]
], tF = ht("cloud", eF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const nF = [
  [
    "path",
    { d: "M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3", key: "11bfej" }
  ]
], ZT = ht("command", nF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const rF = [
  ["rect", { width: "14", height: "14", x: "8", y: "8", rx: "2", ry: "2", key: "17jyea" }],
  ["path", { d: "M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2", key: "zix9uf" }]
], O5 = ht("copy", rF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const iF = [
  ["path", { d: "M20 4v7a4 4 0 0 1-4 4H4", key: "6o5b7l" }],
  ["path", { d: "m9 10-5 5 5 5", key: "1kshq7" }]
], XT = ht("corner-down-left", iF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const sF = [
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M17 20v2", key: "1rnc9c" }],
  ["path", { d: "M17 2v2", key: "11trls" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M2 17h2", key: "7oei6x" }],
  ["path", { d: "M2 7h2", key: "asdhe0" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "M20 17h2", key: "1fpfkl" }],
  ["path", { d: "M20 7h2", key: "1o8tra" }],
  ["path", { d: "M7 20v2", key: "4gnj0m" }],
  ["path", { d: "M7 2v2", key: "1i4yhu" }],
  ["rect", { x: "4", y: "4", width: "16", height: "16", rx: "2", key: "1vbyd7" }],
  ["rect", { x: "8", y: "8", width: "8", height: "8", rx: "1", key: "z9xiuo" }]
], D5 = ht("cpu", sF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const aF = [
  ["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }],
  ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }],
  ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]
], py = ht("database", aF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const oF = [
  ["path", { d: "M12 15V3", key: "m9g1x1" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["path", { d: "m7 10 5 5 5-5", key: "brsn70" }]
], k0 = ht("download", oF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const lF = [
  ["path", { d: "M15 3h6v6", key: "1q9fwt" }],
  ["path", { d: "M10 14 21 3", key: "gplh6r" }],
  ["path", { d: "M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6", key: "a6xqqp" }]
], uF = ht("external-link", lF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const cF = [
  [
    "path",
    {
      d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",
      key: "1nclc0"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
], QT = ht("eye", cF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const fF = [
  [
    "path",
    {
      d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",
      key: "1oefj6"
    }
  ],
  ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }],
  ["path", { d: "M10 12.5 8 15l2 2.5", key: "1tg20x" }],
  ["path", { d: "m14 12.5 2 2.5-2 2.5", key: "yinavb" }]
], dF = ht("file-code", fF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const hF = [
  [
    "path",
    {
      d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",
      key: "1oefj6"
    }
  ],
  ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }],
  ["path", { d: "M10 9H8", key: "b1mrlr" }],
  ["path", { d: "M16 13H8", key: "t4e002" }],
  ["path", { d: "M16 17H8", key: "z1uh3a" }]
], sh = ht("file-text", hF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const pF = [
  [
    "path",
    {
      d: "M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",
      key: "sc7q7i"
    }
  ]
], mF = ht("funnel", pF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const gF = [
  ["line", { x1: "6", x2: "6", y1: "3", y2: "15", key: "17qcm7" }],
  ["circle", { cx: "18", cy: "6", r: "3", key: "1h7g24" }],
  ["circle", { cx: "6", cy: "18", r: "3", key: "fqmcym" }],
  ["path", { d: "M18 9a9 9 0 0 1-9 9", key: "n2h4wq" }]
], yF = ht("git-branch", gF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const vF = [
  [
    "path",
    {
      d: "M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",
      key: "tonef"
    }
  ],
  ["path", { d: "M9 18c-4.51 2-5-2-7-2", key: "9comsn" }]
], xF = ht("github", vF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const bF = [
  ["circle", { cx: "9", cy: "12", r: "1", key: "1vctgf" }],
  ["circle", { cx: "9", cy: "5", r: "1", key: "hp0tcf" }],
  ["circle", { cx: "9", cy: "19", r: "1", key: "fkjjf6" }],
  ["circle", { cx: "15", cy: "12", r: "1", key: "1tmaij" }],
  ["circle", { cx: "15", cy: "5", r: "1", key: "19l28e" }],
  ["circle", { cx: "15", cy: "19", r: "1", key: "f4zoj3" }]
], eD = ht("grip-vertical", bF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const wF = [
  ["line", { x1: "4", x2: "20", y1: "9", y2: "9", key: "4lhtct" }],
  ["line", { x1: "4", x2: "20", y1: "15", y2: "15", key: "vyu0kd" }],
  ["line", { x1: "10", x2: "8", y1: "3", y2: "21", key: "1ggp8o" }],
  ["line", { x1: "16", x2: "14", y1: "3", y2: "21", key: "weycgp" }]
], _F = ht("hash", wF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const SF = [
  ["path", { d: "M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8", key: "5wwlr5" }],
  [
    "path",
    {
      d: "M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",
      key: "r6nss1"
    }
  ]
], CF = ht("house", SF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const EF = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M12 16v-4", key: "1dtifu" }],
  ["path", { d: "M12 8h.01", key: "e9boi3" }]
], kF = ht("info", EF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const TF = [
  ["path", { d: "m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4", key: "g0fldk" }],
  ["path", { d: "m21 2-9.6 9.6", key: "1j0ho8" }],
  ["circle", { cx: "7.5", cy: "15.5", r: "5.5", key: "yqb3hr" }]
], Yx = ht("key", TF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const AF = [
  [
    "path",
    {
      d: "M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",
      key: "zw3jo"
    }
  ],
  [
    "path",
    {
      d: "M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",
      key: "1wduqc"
    }
  ],
  [
    "path",
    {
      d: "M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",
      key: "kqbvx6"
    }
  ]
], $0 = ht("layers", AF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const jF = [
  ["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }],
  ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }],
  ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }],
  ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]
], NF = ht("layout-dashboard", jF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const RF = [
  ["rect", { width: "7", height: "7", x: "3", y: "3", rx: "1", key: "1g98yp" }],
  ["rect", { width: "7", height: "7", x: "14", y: "3", rx: "1", key: "6d4xhi" }],
  ["rect", { width: "7", height: "7", x: "14", y: "14", rx: "1", key: "nxv5o0" }],
  ["rect", { width: "7", height: "7", x: "3", y: "14", rx: "1", key: "1bb6yr" }]
], MF = ht("layout-grid", RF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const OF = [
  ["path", { d: "M8 5h13", key: "1pao27" }],
  ["path", { d: "M13 12h8", key: "h98zly" }],
  ["path", { d: "M13 19h8", key: "c3s6r1" }],
  ["path", { d: "M3 10a2 2 0 0 0 2 2h3", key: "1npucw" }],
  ["path", { d: "M3 5v12a2 2 0 0 0 2 2h3", key: "x1gjn2" }]
], DF = ht("list-tree", OF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const zF = [
  ["path", { d: "M3 5h.01", key: "18ugdj" }],
  ["path", { d: "M3 12h.01", key: "nlz23k" }],
  ["path", { d: "M3 19h.01", key: "noohij" }],
  ["path", { d: "M8 5h13", key: "1pao27" }],
  ["path", { d: "M8 12h13", key: "1za7za" }],
  ["path", { d: "M8 19h13", key: "m83p4d" }]
], PF = ht("list", zF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const IF = [["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]], $u = ht("loader-circle", IF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const LF = [
  ["path", { d: "M4 5h16", key: "1tepv9" }],
  ["path", { d: "M4 12h16", key: "1lakjw" }],
  ["path", { d: "M4 19h16", key: "1djgab" }]
], BF = ht("menu", LF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const qF = [
  [
    "path",
    {
      d: "M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",
      key: "18887p"
    }
  ]
], $F = ht("message-square", qF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const FF = [
  [
    "path",
    {
      d: "M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",
      key: "kfwtm"
    }
  ]
], JT = ht("moon", FF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const UF = [
  ["rect", { x: "16", y: "16", width: "6", height: "6", rx: "1", key: "4q2zg0" }],
  ["rect", { x: "2", y: "16", width: "6", height: "6", rx: "1", key: "8cvhb9" }],
  ["rect", { x: "9", y: "2", width: "6", height: "6", rx: "1", key: "1egb70" }],
  ["path", { d: "M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3", key: "1jsf9p" }],
  ["path", { d: "M12 12V8", key: "2874zd" }]
], z5 = ht("network", UF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const VF = [
  ["path", { d: "M12 22v-9", key: "x3hkom" }],
  [
    "path",
    {
      d: "M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",
      key: "2ntwy6"
    }
  ],
  [
    "path",
    {
      d: "M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",
      key: "1pmm1c"
    }
  ],
  [
    "path",
    {
      d: "M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",
      key: "12ttoo"
    }
  ]
], HF = ht("package-open", VF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const GF = [
  [
    "path",
    {
      d: "M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",
      key: "e79jfc"
    }
  ],
  ["circle", { cx: "13.5", cy: "6.5", r: ".5", fill: "currentColor", key: "1okk4w" }],
  ["circle", { cx: "17.5", cy: "10.5", r: ".5", fill: "currentColor", key: "f64h9f" }],
  ["circle", { cx: "6.5", cy: "12.5", r: ".5", fill: "currentColor", key: "qy21gx" }],
  ["circle", { cx: "8.5", cy: "7.5", r: ".5", fill: "currentColor", key: "fotxhn" }]
], eA = ht("palette", GF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const KF = [
  ["rect", { x: "14", y: "3", width: "5", height: "18", rx: "1", key: "kaeet6" }],
  ["rect", { x: "5", y: "3", width: "5", height: "18", rx: "1", key: "1wsw3u" }]
], tD = ht("pause", KF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const YF = [
  [
    "path",
    {
      d: "M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",
      key: "1a8usu"
    }
  ]
], WF = ht("pen", YF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ZF = [
  [
    "path",
    {
      d: "M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",
      key: "10ikf1"
    }
  ]
], em = ht("play", ZF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const XF = [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "M12 5v14", key: "s699le" }]
], P5 = ht("plus", XF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const QF = [
  ["path", { d: "M12 2v10", key: "mnfbl" }],
  ["path", { d: "M18.4 6.6a9 9 0 1 1-12.77.04", key: "obofu9" }]
], Wx = ht("power", QF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const JF = [
  ["path", { d: "M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8", key: "v9h5vc" }],
  ["path", { d: "M21 3v5h-5", key: "1q7to0" }],
  ["path", { d: "M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16", key: "3uifl3" }],
  ["path", { d: "M8 16H3v5", key: "1cv678" }]
], Or = ht("refresh-cw", JF);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const eU = [
  ["path", { d: "M17 3v10", key: "15fgeh" }],
  ["path", { d: "m12.67 5.5 8.66 5", key: "1gpheq" }],
  ["path", { d: "m12.67 10.5 8.66-5", key: "1dkfa6" }],
  [
    "path",
    { d: "M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z", key: "swwfx4" }
  ]
], nD = ht("regex", eU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const tU = [
  ["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }],
  ["path", { d: "M3 3v5h5", key: "1xhq8a" }]
], rD = ht("rotate-ccw", tU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const nU = [
  [
    "path",
    {
      d: "M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",
      key: "1c8476"
    }
  ],
  ["path", { d: "M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7", key: "1ydtos" }],
  ["path", { d: "M7 3v4a1 1 0 0 0 1 1h7", key: "t51u73" }]
], Xc = ht("save", nU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const rU = [
  ["circle", { cx: "6", cy: "6", r: "3", key: "1lh9wr" }],
  ["path", { d: "M8.12 8.12 12 12", key: "1alkpv" }],
  ["path", { d: "M20 4 8.12 15.88", key: "xgtan2" }],
  ["circle", { cx: "6", cy: "18", r: "3", key: "fqmcym" }],
  ["path", { d: "M14.8 14.8 20 20", key: "ptml3r" }]
], iU = ht("scissors", rU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const sU = [
  ["path", { d: "M15 12h-5", key: "r7krc0" }],
  ["path", { d: "M15 8h-5", key: "1khuty" }],
  ["path", { d: "M19 17V5a2 2 0 0 0-2-2H4", key: "zz82l3" }],
  [
    "path",
    {
      d: "M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",
      key: "1ph1d7"
    }
  ]
], aU = ht("scroll-text", sU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const oU = [
  ["path", { d: "m21 21-4.34-4.34", key: "14j7rj" }],
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }]
], ta = ht("search", oU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const lU = [
  [
    "path",
    {
      d: "M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",
      key: "1ffxy3"
    }
  ],
  ["path", { d: "m21.854 2.147-10.94 10.939", key: "12cjpa" }]
], uU = ht("send", lU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const cU = [
  ["rect", { width: "20", height: "8", x: "2", y: "2", rx: "2", ry: "2", key: "ngkwjq" }],
  ["rect", { width: "20", height: "8", x: "2", y: "14", rx: "2", ry: "2", key: "iecqi9" }],
  ["line", { x1: "6", x2: "6.01", y1: "6", y2: "6", key: "16zg32" }],
  ["line", { x1: "6", x2: "6.01", y1: "18", y2: "18", key: "nzw8ys" }]
], fU = ht("server", cU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const dU = [
  [
    "path",
    {
      d: "M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",
      key: "1i5ecw"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
], F0 = ht("settings", dU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const hU = [
  ["path", { d: "M10 8h4", key: "1sr2af" }],
  ["path", { d: "M12 21v-9", key: "17s77i" }],
  ["path", { d: "M12 8V3", key: "13r4qs" }],
  ["path", { d: "M17 16h4", key: "h1uq16" }],
  ["path", { d: "M19 12V3", key: "o1uvq1" }],
  ["path", { d: "M19 21v-5", key: "qua636" }],
  ["path", { d: "M3 14h4", key: "bcjad9" }],
  ["path", { d: "M5 10V3", key: "cb8scm" }],
  ["path", { d: "M5 21v-7", key: "1w1uti" }]
], tA = ht("sliders-vertical", hU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const pU = [
  [
    "path",
    {
      d: "M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",
      key: "1s2grr"
    }
  ],
  ["path", { d: "M20 2v4", key: "1rf3ol" }],
  ["path", { d: "M22 4h-4", key: "gwowj6" }],
  ["circle", { cx: "4", cy: "20", r: "2", key: "6kqj1y" }]
], iD = ht("sparkles", pU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mU = [
  ["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", key: "afitv7" }]
], sD = ht("square", mU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const gU = [
  ["circle", { cx: "12", cy: "12", r: "4", key: "4exip2" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "m4.93 4.93 1.41 1.41", key: "149t6j" }],
  ["path", { d: "m17.66 17.66 1.41 1.41", key: "ptbguv" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "m6.34 17.66-1.41 1.41", key: "1m8zz5" }],
  ["path", { d: "m19.07 4.93-1.41 1.41", key: "1shlcs" }]
], yU = ht("sun", gU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const vU = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["circle", { cx: "12", cy: "12", r: "6", key: "1vlfrh" }],
  ["circle", { cx: "12", cy: "12", r: "2", key: "1c9p78" }]
], I5 = ht("target", vU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const xU = [
  ["path", { d: "M12 19h8", key: "baeox8" }],
  ["path", { d: "m4 17 6-6-6-6", key: "1yngyt" }]
], Zx = ht("terminal", xU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const bU = [
  ["path", { d: "M10 11v6", key: "nco0om" }],
  ["path", { d: "M14 11v6", key: "outv1u" }],
  ["path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6", key: "miytrc" }],
  ["path", { d: "M3 6h18", key: "d0wm0j" }],
  ["path", { d: "M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2", key: "e791ji" }]
], Ja = ht("trash-2", bU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const wU = [
  [
    "path",
    {
      d: "m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",
      key: "wmoenq"
    }
  ],
  ["path", { d: "M12 9v4", key: "juzpu7" }],
  ["path", { d: "M12 17h.01", key: "p32p05" }]
], oE = ht("triangle-alert", wU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const _U = [
  ["path", { d: "M12 3v12", key: "1x0j5s" }],
  ["path", { d: "m17 8-5-5-5 5", key: "7q97r8" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }]
], aD = ht("upload", _U);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const SU = [
  [
    "path",
    {
      d: "m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",
      key: "ul74o6"
    }
  ],
  ["path", { d: "m14 7 3 3", key: "1r5n42" }],
  ["path", { d: "M5 6v4", key: "ilb8ba" }],
  ["path", { d: "M19 14v4", key: "blhpug" }],
  ["path", { d: "M10 2v2", key: "7u0qdc" }],
  ["path", { d: "M7 8H3", key: "zfb6yr" }],
  ["path", { d: "M21 16h-4", key: "1cnmox" }],
  ["path", { d: "M11 3H9", key: "1obp7u" }]
], oD = ht("wand-sparkles", SU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const CU = [
  ["path", { d: "M18 6 6 18", key: "1bl5f8" }],
  ["path", { d: "m6 6 12 12", key: "d8bk6v" }]
], gm = ht("x", CU);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const EU = [
  [
    "path",
    {
      d: "M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",
      key: "1xq2db"
    }
  ]
], sf = ht("zap", EU);
var lD = /* @__PURE__ */ KO();
const L5 = /* @__PURE__ */ uf(lD);
function nA(e) {
  const t = {
    blockquote: "blockquote",
    h1: "h1",
    h2: "h2",
    hr: "hr",
    li: "li",
    p: "p",
    strong: "strong",
    ul: "ul",
    ...e.components
  };
  return h.jsxs(h.Fragment, {
    children: [h.jsx(t.h1, {
      children: " Engram"
    }), `
`, h.jsxs(t.blockquote, {
      children: [`
`, h.jsxs(t.p, {
        children: [h.jsx(t.strong, {
          children: "Engram"
        }), "  SillyTavern  World Info "]
      }), `
`]
    }), `
`, h.jsx(t.hr, {}), `
`, h.jsx(t.h2, {
      children: ""
    }), `
`, h.jsx(t.p, {
      children: "Engram "
    }), `
`, h.jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-2 gap-4 my-6",
      children: [h.jsxs("div", {
        className: "p-4 border border-border rounded-lg bg-card",
        children: [h.jsxs("div", {
          className: "flex items-center gap-2 mb-2 text-primary font-bold",
          children: [h.jsx(hy, {
            className: "w-5 h-5"
          }), h.jsx("span", {
            children: " (Consolidation)"
          })]
        }), h.jsxs("ul", {
          className: "text-sm text-muted-foreground list-disc pl-4 space-y-1",
          children: [h.jsx("li", {
            children: ""
          }), h.jsx("li", {
            children: "10 LLM "
          }), h.jsx("li", {
            children: " IndexedDB"
          })]
        })]
      }), h.jsxs("div", {
        className: "p-4 border border-border rounded-lg bg-card",
        children: [h.jsxs("div", {
          className: "flex items-center gap-2 mb-2 text-primary font-bold",
          children: [h.jsx(z5, {
            className: "w-5 h-5"
          }), h.jsx("span", {
            children: " (Retrieval)"
          })]
        }), h.jsxs("ul", {
          className: "text-sm text-muted-foreground list-disc pl-4 space-y-1",
          children: [h.jsx("li", {
            children: ""
          }), h.jsx("li", {
            children: ""
          }), h.jsx("li", {
            children: " Top-K  Prompt "
          })]
        })]
      })]
    }), `
`, h.jsx(t.h2, {
      children: ""
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), " IndexedDB "]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: "API "
        }), " OpenAI  Ollama"]
      }), `
`]
    })]
  });
}
function kU(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(nA, {
      ...e
    })
  }) : nA(e);
}
function rA(e) {
  const t = {
    blockquote: "blockquote",
    code: "code",
    h1: "h1",
    h2: "h2",
    h3: "h3",
    hr: "hr",
    li: "li",
    ol: "ol",
    p: "p",
    strong: "strong",
    table: "table",
    tbody: "tbody",
    td: "td",
    th: "th",
    thead: "thead",
    tr: "tr",
    ul: "ul",
    ...e.components
  };
  return h.jsxs(h.Fragment, {
    children: [h.jsx(t.h1, {
      children: ""
    }), `
`, h.jsxs(t.blockquote, {
      children: [`
`, h.jsx(t.p, {
        children: "Engram "
      }), `
`]
    }), `
`, h.jsx(t.hr, {}), `
`, h.jsx(t.h2, {
      children: "1.  (API Presets)"
    }), `
`, h.jsxs(t.p, {
      children: [" ", h.jsx(t.strong, {
        children: "API "
      }), " "]
    }), `
`, h.jsx(t.h3, {
      children: " (Model)"
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: "LLM"
        }), ":  ", h.jsx(t.code, {
          children: "gpt-4o-mini"
        }), "  ", h.jsx(t.code, {
          children: "deepseek-chat"
        }), " "]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: " (Vector)"
        }), ":  RAG  ", h.jsx(t.code, {
          children: "Transformers.js"
        }), " ()  ", h.jsx(t.code, {
          children: "text-embedding-3-small"
        }), ""]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: " (Rerank)"
        }), ": ()  Rerank  ", h.jsx(t.code, {
          children: "bge-reranker"
        }), ""]
      }), `
`]
    }), `
`, h.jsx(t.h2, {
      children: "2.  (Fine-tuning)"
    }), `
`, h.jsx(t.p, {
      children: " API "
    }), `
`, h.jsxs(t.h3, {
      children: [h.jsx(dF, {
        className: "inline-block w-4 h-4 align-text-bottom"
      }), "  (Prompt Templates)"]
    }), `
`, h.jsx(t.p, {
      children: "Engram  Prompt "
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ":  ", h.jsx(t.code, {
          children: "Summarize"
        }), "  System Prompt"]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ": "]
      }), `
`]
    }), `
`, h.jsxs(t.h3, {
      children: [h.jsx(ZO, {
        className: "inline-block w-4 h-4 align-text-bottom"
      }), "  (Worldbook)"]
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [" ", h.jsx(t.strong, {
          children: "Global Worldbook"
        }), " ()"]
      }), `
`, h.jsx(t.li, {
        children: ""
      }), `
`]
    }), `
`, h.jsx(t.h3, {
      children: " (Regex)"
    }), `
`, h.jsx(t.p, {
      children: "Engram "
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ":  Engram  Prompt"]
      }), `
`]
    }), `
`, h.jsx(t.h2, {
      children: "3. "
    }), `
`, h.jsxs(t.p, {
      children: [" ", h.jsx(t.strong, {
        children: "Dashboard"
      }), " "]
    }), `
`, h.jsxs(t.table, {
      children: [h.jsx(t.thead, {
        children: h.jsxs(t.tr, {
          children: [h.jsx(t.th, {
            style: {
              textAlign: "left"
            },
            children: ""
          }), h.jsx(t.th, {
            style: {
              textAlign: "left"
            },
            children: ""
          })]
        })
      }), h.jsxs(t.tbody, {
        children: [h.jsxs(t.tr, {
          children: [h.jsx(t.td, {
            style: {
              textAlign: "left"
            },
            children: h.jsx(t.strong, {
              children: "Summarizer"
            })
          }), h.jsx(t.td, {
            style: {
              textAlign: "left"
            },
            children: ""
          })]
        }), h.jsxs(t.tr, {
          children: [h.jsx(t.td, {
            style: {
              textAlign: "left"
            },
            children: h.jsx(t.strong, {
              children: "RAG Recall"
            })
          }), h.jsx(t.td, {
            style: {
              textAlign: "left"
            },
            children: ""
          })]
        }), h.jsxs(t.tr, {
          children: [h.jsx(t.td, {
            style: {
              textAlign: "left"
            },
            children: h.jsx(t.strong, {
              children: "Auto-Trim"
            })
          }), h.jsx(t.td, {
            style: {
              textAlign: "left"
            },
            children: " Prompt  Token"
          })]
        })]
      })]
    }), `
`, h.jsx(t.h2, {
      children: "4. "
    }), `
`, h.jsxs(t.p, {
      children: [" ", h.jsx(t.strong, {
        children: "Dashboard"
      }), ""]
    }), `
`, h.jsxs(t.ol, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: "Summarizer"
        }), ':  "Running"']
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: "RAG Recall"
        }), ": DevLog "]
      }), `
`]
    })]
  });
}
function TU(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(rA, {
      ...e
    })
  }) : rA(e);
}
function iA(e) {
  const t = {
    blockquote: "blockquote",
    code: "code",
    h1: "h1",
    h2: "h2",
    h3: "h3",
    hr: "hr",
    li: "li",
    p: "p",
    strong: "strong",
    ul: "ul",
    ...e.components
  };
  return h.jsxs(h.Fragment, {
    children: [h.jsx(t.h1, {
      children: ""
    }), `
`, h.jsxs(t.blockquote, {
      children: [`
`, h.jsx(t.p, {
        children: "Engram "
      }), `
`]
    }), `
`, h.jsx(t.hr, {}), `
`, h.jsxs(t.h2, {
      children: [h.jsx(ta, {
        className: "inline-block w-4 h-4 align-text-bottom"
      }), "  (Command Palette)"]
    }), `
`, h.jsxs(t.p, {
      children: [" ", h.jsx(t.code, {
        children: "/"
      }), " "]
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ":  ", h.jsx(t.code, {
          children: "Dashboard"
        }), ", ", h.jsx(t.code, {
          children: "Data Processing"
        }), ""]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ": "]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ":  ", h.jsx(t.code, {
          children: "Theme: Twitter Dark"
        }), ""]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ": "]
      }), `
`]
    }), `
`, h.jsx(t.hr, {}), `
`, h.jsxs(t.h2, {
      children: [h.jsx(hy, {
        className: "inline-block w-4 h-4 align-text-bottom"
      }), "  (Sticky Retrieval)"]
    }), `
`, h.jsxs(t.p, {
      children: ["Engram  ", h.jsx(t.strong, {
        children: "Sticky Cache ()"
      }), " "]
    }), `
`, h.jsx(t.h3, {
      children: "1. "
    }), `
`, h.jsx(t.p, {
      children: ""
    }), `
`, h.jsx(t.h3, {
      children: '2. ""'
    }), `
`, h.jsxs(t.p, {
      children: [" 3  ", h.jsx(t.strong, {
        children: ""
      }), " (Penalty) AI "]
    }), `
`, h.jsx(t.hr, {}), `
`, h.jsxs(t.h2, {
      children: [h.jsx($0, {
        className: "inline-block w-4 h-4 align-text-bottom"
      }), "  (Preprocessing)"]
    }), `
`, h.jsxs(t.p, {
      children: [" ", h.jsx(t.strong, {
        children: " (Processing)"
      }), " "]
    }), `
`, h.jsx(t.h3, {
      children: ""
    }), `
`, h.jsx(t.p, {
      children: " Engram"
    }), `
`, h.jsxs(t.h3, {
      children: [h.jsx(sh, {
        className: "inline-block w-4 h-4 align-text-bottom"
      }), "  (Novel Import)"]
    }), `
`, h.jsxs(t.p, {
      children: [" ", h.jsx(t.code, {
        children: ".txt"
      }), "  ", h.jsx(t.code, {
        children: ".md"
      }), " "]
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: " (Fast Mode)"
        }), `:
`]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: " (Detailed Mode)"
        }), `:
 LLM  Token`]
      }), `
`]
    }), `
`, h.jsx(t.hr, {}), `
`, h.jsxs(t.h2, {
      children: [h.jsx(py, {
        className: "inline-block w-4 h-4 align-text-bottom"
      }), " "]
    }), `
`, h.jsxs(t.p, {
      children: [" ", h.jsx(t.strong, {
        children: " (Memory Stream)"
      }), " "]
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ": "]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ": "]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ": "]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ":  ", h.jsx(t.strong, {
          children: "Re-embed"
        }), " "]
      }), `
`]
    })]
  });
}
function AU(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(iA, {
      ...e
    })
  }) : iA(e);
}
function sA(e) {
  const t = {
    code: "code",
    h1: "h1",
    h3: "h3",
    hr: "hr",
    li: "li",
    ol: "ol",
    p: "p",
    strong: "strong",
    ul: "ul",
    ...e.components
  };
  return h.jsxs(h.Fragment, {
    children: [h.jsx(t.h1, {
      children: " (FAQ)"
    }), `
`, h.jsx(t.hr, {}), `
`, h.jsx(t.h3, {
      children: "Q: "
    }), `
`, h.jsx(t.p, {
      children: ""
    }), `
`, h.jsxs(t.ol, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ":  5-10 Dashboard "]
      }), `
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ": "]
      }), `
`]
    }), `
`, h.jsx(t.h3, {
      children: "Q:  RAG "
    }), `
`, h.jsx(t.p, {
      children: "RAG Embedding/Rerank API"
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ":  ", h.jsx(t.code, {
          children: "Transformers.js"
        }), " "]
      }), `
`]
    }), `
`, h.jsx(t.h3, {
      children: "Q: API  (404/Connection Refused)"
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [" API  ", h.jsx(t.code, {
          children: "/v1"
        }), ""]
      }), `
`, h.jsxs(t.li, {
        children: ["CORS  API  ", h.jsx(t.code, {
          children: "localhost"
        }), " "]
      }), `
`]
    }), `
`, h.jsx(t.h3, {
      children: "Q: "
    }), `
`, h.jsx(t.p, {
      children: ""
    }), `
`, h.jsxs(t.ul, {
      children: [`
`, h.jsxs(t.li, {
        children: [h.jsx(t.strong, {
          children: ""
        }), ":  ", h.jsx(t.strong, {
          children: "Re-embed"
        }), " "]
      }), `
`]
    }), `
`, h.jsx(t.h3, {
      children: "Q: "
    }), `
`, h.jsxs(t.p, {
      children: [" ", h.jsx(t.strong, {
        children: ""
      }), "  JSON  IndexedDB"]
    })]
  });
}
function jU(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(sA, {
      ...e
    })
  }) : sA(e);
}
const Op = [
  {
    id: "intro",
    label: "",
    icon: hy,
    component: kU,
    keywords: ["", "intro", "", "about", ""],
    description: " Engram "
  },
  {
    id: "getting-started",
    label: "",
    icon: em,
    component: TU,
    keywords: ["", "setup", "", "start", "api"],
    description: "Engram "
  },
  {
    id: "features",
    label: "",
    icon: F0,
    component: AU,
    keywords: ["", "feature", "rag", "", "summary", "vector", "edit"],
    description: "RAG "
  },
  {
    id: "faq",
    label: "",
    icon: X$,
    component: jU,
    keywords: ["faq", "", "help", "", "error", "debug"],
    description: ""
  }
];
class NU {
  async search(t) {
    const n = t.toLowerCase().trim();
    return n ? Op.filter(
      (r) => {
        var i, a;
        return r.label.toLowerCase().includes(n) || ((i = r.keywords) == null ? void 0 : i.some((o) => o.toLowerCase().includes(n))) || ((a = r.description) == null ? void 0 : a.toLowerCase().includes(n));
      }
    ).map((r) => ({
      id: `doc-${r.id}`,
      type: "doc",
      title: r.label,
      description: r.description || "",
      icon: r.icon || R5,
      //  docs  Tab 
      // DocsView  activeTab  /docs:getting-started
      action: (i) => i(`/docs:${r.id}`),
      score: 8
    })) : [];
  }
}
const RU = [
  // Sub-view Navigation (Deep Links)
  // These are NOT in the main sidebar, so we keep them here.
  {
    id: "nav-prompt",
    icon: F0,
    label: "",
    description: " Prompt ",
    action: (e) => e("presets:prompt"),
    keywords: ["prompt", "template", "", ""],
    type: "navigation"
  },
  {
    id: "nav-regex",
    icon: F0,
    label: "",
    description: " Regex ",
    action: (e) => e("presets:regex"),
    keywords: ["regex", "rule", "", ""],
    type: "navigation"
  },
  {
    id: "nav-worldbook",
    icon: CF,
    label: "",
    description: " World Info  Lorebook",
    action: (e) => e("presets:worldbook"),
    keywords: ["world", "book", "lore", ""],
    type: "navigation"
  }
], px = [
  { id: "dashboard", icon: NF, label: "", path: "/dashboard" },
  { id: "memory", icon: DF, label: "", path: "/memory" },
  { id: "processing", icon: D5, label: "", path: "/processing" },
  { id: "presets", icon: Yx, label: "API ", path: "/presets" },
  { id: "devlog", icon: Zx, label: "", path: "/devlog" },
  { id: "docs", icon: R5, label: "", path: "/docs" },
  // V0.9.11
  { id: "settings", icon: F0, label: "", path: "/settings" }
], MU = {}, aA = (e) => {
  let t;
  const n = /* @__PURE__ */ new Set(), r = (p, g) => {
    const x = typeof p == "function" ? p(t) : p;
    if (!Object.is(x, t)) {
      const b = t;
      t = g ?? (typeof x != "object" || x === null) ? x : Object.assign({}, t, x), n.forEach((_) => _(t, b));
    }
  }, i = () => t, c = { setState: r, getState: i, getInitialState: () => f, subscribe: (p) => (n.add(p), () => n.delete(p)), destroy: () => {
    (MU ? "production" : void 0) !== "production" && console.warn(
      "[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."
    ), n.clear();
  } }, f = t = e(r, i, c);
  return c;
}, uD = (e) => e ? aA(e) : aA;
var q2 = { exports: {} }, $2 = {}, F2 = { exports: {} }, U2 = {};
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var oA;
function OU() {
  if (oA) return U2;
  oA = 1;
  var e = /* @__PURE__ */ fy();
  function t(g, x) {
    return g === x && (g !== 0 || 1 / g === 1 / x) || g !== g && x !== x;
  }
  var n = typeof Object.is == "function" ? Object.is : t, r = e.useState, i = e.useEffect, a = e.useLayoutEffect, o = e.useDebugValue;
  function u(g, x) {
    var b = x(), _ = r({ inst: { value: b, getSnapshot: x } }), E = _[0].inst, k = _[1];
    return a(
      function() {
        E.value = b, E.getSnapshot = x, c(E) && k({ inst: E });
      },
      [g, b, x]
    ), i(
      function() {
        return c(E) && k({ inst: E }), g(function() {
          c(E) && k({ inst: E });
        });
      },
      [g]
    ), o(b), b;
  }
  function c(g) {
    var x = g.getSnapshot;
    g = g.value;
    try {
      var b = x();
      return !n(g, b);
    } catch {
      return !0;
    }
  }
  function f(g, x) {
    return x();
  }
  var p = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? f : u;
  return U2.useSyncExternalStore = e.useSyncExternalStore !== void 0 ? e.useSyncExternalStore : p, U2;
}
var lA;
function DU() {
  return lA || (lA = 1, F2.exports = /* @__PURE__ */ OU()), F2.exports;
}
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var uA;
function zU() {
  if (uA) return $2;
  uA = 1;
  var e = /* @__PURE__ */ fy(), t = /* @__PURE__ */ DU();
  function n(f, p) {
    return f === p && (f !== 0 || 1 / f === 1 / p) || f !== f && p !== p;
  }
  var r = typeof Object.is == "function" ? Object.is : n, i = t.useSyncExternalStore, a = e.useRef, o = e.useEffect, u = e.useMemo, c = e.useDebugValue;
  return $2.useSyncExternalStoreWithSelector = function(f, p, g, x, b) {
    var _ = a(null);
    if (_.current === null) {
      var E = { hasValue: !1, value: null };
      _.current = E;
    } else E = _.current;
    _ = u(
      function() {
        function T(z) {
          if (!R) {
            if (R = !0, N = z, z = x(z), b !== void 0 && E.hasValue) {
              var q = E.value;
              if (b(q, z))
                return O = q;
            }
            return O = z;
          }
          if (q = O, r(N, z)) return q;
          var G = x(z);
          return b !== void 0 && b(q, G) ? (N = z, q) : (N = z, O = G);
        }
        var R = !1, N, O, P = g === void 0 ? null : g;
        return [
          function() {
            return T(p());
          },
          P === null ? void 0 : function() {
            return T(P());
          }
        ];
      },
      [p, g, x, b]
    );
    var k = i(f, _[0], _[1]);
    return o(
      function() {
        E.hasValue = !0, E.value = k;
      },
      [k]
    ), c(k), k;
  }, $2;
}
var cA;
function PU() {
  return cA || (cA = 1, q2.exports = /* @__PURE__ */ zU()), q2.exports;
}
var IU = /* @__PURE__ */ PU();
const cD = /* @__PURE__ */ uf(IU), fD = {}, { useDebugValue: LU } = dy, { useSyncExternalStoreWithSelector: BU } = cD;
let fA = !1;
const qU = (e) => e;
function $U(e, t = qU, n) {
  (fD ? "production" : void 0) !== "production" && n && !fA && (console.warn(
    "[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"
  ), fA = !0);
  const r = BU(
    e.subscribe,
    e.getState,
    e.getServerState || e.getInitialState,
    t,
    n
  );
  return LU(r), r;
}
const dA = (e) => {
  (fD ? "production" : void 0) !== "production" && typeof e != "function" && console.warn(
    "[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`."
  );
  const t = typeof e == "function" ? uD(e) : e, n = (r, i) => $U(t, r, i);
  return Object.assign(n, t), n;
}, dD = (e) => e ? dA(e) : dA, FU = {
  name: "Paper (Light)",
  colors: {
    background: "oklch(1.0000 0 0)",
    foreground: "oklch(0.1884 0.0128 248.5103)",
    card: "oklch(0.9784 0.0011 197.1387)",
    cardForeground: "oklch(0.1884 0.0128 248.5103)",
    popover: "oklch(1.0000 0 0)",
    popoverForeground: "oklch(0.1884 0.0128 248.5103)",
    primary: "oklch(0.6723 0.1606 244.9955)",
    primaryForeground: "oklch(1.0000 0 0)",
    secondary: "oklch(0.1884 0.0128 248.5103)",
    secondaryForeground: "oklch(1.0000 0 0)",
    muted: "oklch(0.9222 0.0013 286.3737)",
    mutedForeground: "oklch(0.1884 0.0128 248.5103)",
    accent: "oklch(0.9392 0.0166 250.8453)",
    accentForeground: "oklch(0.6723 0.1606 244.9955)",
    destructive: "oklch(0.6188 0.2376 25.7658)",
    destructiveForeground: "oklch(1.0000 0 0)",
    border: "oklch(0.1884 0.0128 248.5103 / 0.15)",
    // Darker (Foreground based) as requested
    input: "oklch(0.9809 0.0025 228.7836)",
    ring: "oklch(0.6818 0.1584 243.3540)",
    chart1: "oklch(0.6723 0.1606 244.9955)",
    chart2: "oklch(0.6907 0.1554 160.3454)",
    chart3: "oklch(0.8214 0.1600 82.5337)",
    chart4: "oklch(0.7064 0.1822 151.7125)",
    chart5: "oklch(0.5919 0.2186 10.5826)",
    sidebar: "oklch(0.9784 0.0011 197.1387)",
    sidebarForeground: "oklch(0.1884 0.0128 248.5103)",
    sidebarPrimary: "oklch(0.6723 0.1606 244.9955)",
    sidebarPrimaryForeground: "oklch(1.0000 0 0)",
    sidebarAccent: "oklch(0.9392 0.0166 250.8453)",
    sidebarAccentForeground: "oklch(0.6723 0.1606 244.9955)",
    sidebarBorder: "oklch(0.1884 0.0128 248.5103 / 0.1)",
    // Darker (Foreground based)
    sidebarRing: "oklch(0.6818 0.1584 243.3540)"
  },
  variables: {
    radius: "1.3rem"
  }
}, UU = {
  name: "Claude (Dark)",
  colors: {
    background: "oklch(0.2679 0.0036 106.6427)",
    foreground: "oklch(0.8074 0.0142 93.0137)",
    card: "oklch(0.2679 0.0036 106.6427)",
    cardForeground: "oklch(0.8074 0.0142 93.0137)",
    popover: "oklch(0.2357 0.0024 67.7077)",
    popoverForeground: "oklch(0.8074 0.0142 93.0137)",
    primary: "oklch(0.6724 0.1308 38.7559)",
    primaryForeground: "oklch(1.0000 0 0)",
    secondary: "oklch(0.2213 0.0038 106.7070)",
    secondaryForeground: "oklch(0.8074 0.0142 93.0137)",
    muted: "oklch(0.2357 0.0024 67.7077)",
    mutedForeground: "oklch(0.7713 0.0169 99.0657)",
    accent: "oklch(0.6724 0.1308 38.7559)",
    accentForeground: "oklch(1.0000 0 0)",
    destructive: "oklch(0.6368 0.2078 25.3313)",
    destructiveForeground: "oklch(1.0000 0 0)",
    border: "oklch(0.8074 0.0142 93.0137 / 0.15)",
    // Foreground / 0.15
    input: "oklch(0.4336 0.0113 100.2195)",
    ring: "oklch(0.6724 0.1308 38.7559)",
    chart1: "oklch(0.6724 0.1308 38.7559)",
    chart2: "oklch(0.6898 0.1581 290.4107)",
    chart3: "oklch(0.8816 0.0276 93.1280)",
    chart4: "oklch(0.3074 0.0516 289.3230)",
    chart5: "oklch(0.6368 0.2078 25.3313)",
    sidebar: "oklch(0.2357 0.0024 67.7077)",
    sidebarForeground: "oklch(0.7713 0.0169 99.0657)",
    sidebarPrimary: "oklch(0.6724 0.1308 38.7559)",
    sidebarPrimaryForeground: "oklch(1.0000 0 0)",
    sidebarAccent: "oklch(0.2213 0.0038 106.7070)",
    sidebarAccentForeground: "oklch(0.8074 0.0142 93.0137)",
    sidebarBorder: "oklch(0.7713 0.0169 99.0657 / 0.15)",
    // SidebarForeground / 0.15
    sidebarRing: "oklch(0.6724 0.1308 38.7559)"
  },
  variables: {
    radius: "0.4rem"
  }
}, VU = {
  name: "Twitter (Dark)",
  colors: {
    background: "oklch(0 0 0)",
    foreground: "oklch(0.9328 0.0025 228.7857)",
    card: "oklch(0 0 0)",
    // Matching background for seamless look, or slightly lighter
    cardForeground: "oklch(0.9328 0.0025 228.7857)",
    popover: "oklch(0 0 0)",
    popoverForeground: "oklch(0.9328 0.0025 228.7857)",
    primary: "oklch(0.6692 0.1607 245.0110)",
    primaryForeground: "oklch(1.0000 0 0)",
    secondary: "oklch(0.2097 0.0080 274.5332)",
    // Using card color from ref as secondary
    secondaryForeground: "oklch(0.8853 0 0)",
    muted: "oklch(0.2090 0 0)",
    mutedForeground: "oklch(0.5637 0.0078 247.9662)",
    accent: "oklch(0.1928 0.0331 242.5459)",
    accentForeground: "oklch(0.6692 0.1607 245.0110)",
    destructive: "oklch(0.6188 0.2376 25.7658)",
    destructiveForeground: "oklch(1.0000 0 0)",
    border: "oklch(0.9328 0.0025 228.7857 / 0.15)",
    // Foreground / 0.15
    input: "oklch(0.3020 0.0288 244.8244)",
    ring: "oklch(0.6818 0.1584 243.3540)",
    chart1: "oklch(0.6723 0.1606 244.9955)",
    chart2: "oklch(0.6907 0.1554 160.3454)",
    chart3: "oklch(0.8214 0.1600 82.5337)",
    chart4: "oklch(0.7064 0.1822 151.7125)",
    chart5: "oklch(0.5919 0.2186 10.5826)",
    sidebar: "oklch(0 0 0)",
    sidebarForeground: "oklch(0.9328 0.0025 228.7857)",
    sidebarPrimary: "oklch(0.6692 0.1607 245.0110)",
    sidebarPrimaryForeground: "oklch(1.0000 0 0)",
    sidebarAccent: "oklch(0.1928 0.0331 242.5459)",
    sidebarAccentForeground: "oklch(0.6692 0.1607 245.0110)",
    sidebarBorder: "oklch(0.9328 0.0025 228.7857 / 0.15)",
    // SidebarForeground / 0.15
    sidebarRing: "oklch(0.6818 0.1584 243.3540)"
  },
  variables: {
    radius: "1.3rem"
  }
}, HU = {
  name: "Discord (Dark)",
  colors: {
    background: "#313338",
    foreground: "#f2f3f5",
    card: "#2b2d31",
    cardForeground: "#f2f3f5",
    popover: "#313338",
    popoverForeground: "#f2f3f5",
    primary: "#5865f2",
    primaryForeground: "#ffffff",
    secondary: "#2b2d31",
    secondaryForeground: "#f2f3f5",
    muted: "#1e1f22",
    mutedForeground: "#949ba4",
    accent: "#3f4147",
    accentForeground: "#f2f3f5",
    destructive: "#fa777c",
    destructiveForeground: "#313338",
    border: "#f2f3f526",
    // Foreground #f2f3f5 with ~15% alpha
    input: "#1e1f22",
    ring: "#5865f2",
    chart1: "#5865f2",
    chart2: "#23a559",
    chart3: "#f0b232",
    chart4: "#00a8fc",
    chart5: "#eb459e",
    sidebar: "#1e1f22",
    sidebarForeground: "#949ba4",
    sidebarPrimary: "#5865f2",
    sidebarPrimaryForeground: "#ffffff",
    sidebarAccent: "#3f4147",
    sidebarAccentForeground: "#f2f3f5",
    sidebarBorder: "#949ba426",
    // SidebarForeground #949ba4 with ~15% alpha
    sidebarRing: "#5865f2"
  },
  variables: {
    radius: "0.25rem"
  }
}, GU = {
  name: "Catppuccin Mocha",
  colors: {
    background: "#1e1e2e",
    // foreground: '#cdd6f4', // Old Text
    foreground: "#cba6f7",
    // Modified: Mauve as requested
    card: "#313244",
    cardForeground: "#cba6f7",
    // Also match text
    popover: "#1e1e2e",
    popoverForeground: "#cba6f7",
    primary: "#89b4fa",
    primaryForeground: "#1e1e2e",
    secondary: "#45475a",
    secondaryForeground: "#cba6f7",
    muted: "#313244",
    mutedForeground: "#a6adc8",
    accent: "#45475a",
    accentForeground: "#cba6f7",
    destructive: "#f38ba8",
    destructiveForeground: "#1e1e2e",
    border: "#cba6f726",
    // Mauve with ~15% alpha
    input: "#313244",
    ring: "#89b4fa",
    chart1: "#89b4fa",
    chart2: "#a6e3a1",
    chart3: "#f9e2af",
    chart4: "#fab387",
    chart5: "#cba6f7",
    sidebar: "#181825",
    sidebarForeground: "#cba6f7",
    // Mauve
    sidebarPrimary: "#89b4fa",
    sidebarPrimaryForeground: "#1e1e2e",
    sidebarAccent: "#313244",
    sidebarAccentForeground: "#cba6f7",
    sidebarBorder: "#cba6f726",
    // Mauve with ~15% alpha
    sidebarRing: "#89b4fa"
  },
  variables: {
    radius: "0.5rem"
  }
}, KU = {
  name: "SillyTavern ()",
  colors: {
    background: "var(--SmartThemeBlurTintColor)",
    foreground: "var(--SmartThemeBodyColor)",
    card: "var(--SmartThemeBlurTintColor)",
    cardForeground: "var(--SmartThemeBodyColor)",
    popover: "var(--SmartThemeBlurTintColor)",
    popoverForeground: "var(--SmartThemeBodyColor)",
    primary: "var(--SmartThemeQuoteColor)",
    primaryForeground: "var(--SmartThemeBodyColor)",
    secondary: "var(--SmartThemeBorderColor)",
    secondaryForeground: "var(--SmartThemeBodyColor)",
    muted: "rgba(0,0,0,0.2)",
    mutedForeground: "rgba(255,255,255,0.5)",
    accent: "var(--SmartThemeQuoteColor)",
    accentForeground: "var(--SmartThemeBodyColor)",
    destructive: "var(--SmartThemeBorderColor)",
    destructiveForeground: "var(--SmartThemeBodyColor)",
    border: "var(--SmartThemeBorderColor)",
    input: "var(--SmartThemeBorderColor)",
    ring: "var(--SmartThemeQuoteColor)",
    chart1: "var(--SmartThemeQuoteColor)",
    chart2: "var(--SmartThemeQuoteColor)",
    chart3: "var(--SmartThemeQuoteColor)",
    chart4: "var(--SmartThemeQuoteColor)",
    chart5: "var(--SmartThemeQuoteColor)",
    sidebar: "var(--SmartThemeBlurTintColor)",
    sidebarForeground: "var(--SmartThemeBodyColor)",
    sidebarPrimary: "var(--SmartThemeQuoteColor)",
    sidebarPrimaryForeground: "var(--SmartThemeBodyColor)",
    sidebarAccent: "var(--SmartThemeBorderColor)",
    sidebarAccentForeground: "var(--SmartThemeBodyColor)",
    sidebarBorder: "var(--SmartThemeBorderColor)",
    sidebarRing: "var(--SmartThemeQuoteColor)"
  },
  variables: {
    radius: "0.4rem"
  }
}, YU = {
  name: "Glass (Frosted)",
  colors: {
    // 
    background: "rgba(255, 255, 255, var(--glass-opacity, 0.1))",
    foreground: "#0f172a",
    //  (Slate-900) 
    //  - 
    card: "rgba(255, 255, 255, var(--glass-opacity, 0.25))",
    cardForeground: "#0f172a",
    popover: "rgba(255, 255, 255, var(--glass-opacity, 0.4))",
    popoverForeground: "#0f172a",
    primary: "rgba(15, 23, 42, 0.8)",
    // 
    primaryForeground: "#ffffff",
    secondary: "rgba(255, 255, 255, 0.3)",
    secondaryForeground: "#0f172a",
    muted: "rgba(255, 255, 255, 0.3)",
    mutedForeground: "rgba(15, 23, 42, 0.6)",
    accent: "rgba(255, 255, 255, 0.4)",
    accentForeground: "#0f172a",
    destructive: "rgba(239, 68, 68, 0.8)",
    destructiveForeground: "#ffffff",
    border: "rgba(15, 23, 42, 0.15)",
    // Lighter base (will be resistant to fade)
    input: "rgba(255, 255, 255, 0.4)",
    ring: "rgba(15, 23, 42, 0.4)",
    chart1: "#0f172a",
    chart2: "rgba(15, 23, 42, 0.8)",
    chart3: "rgba(15, 23, 42, 0.6)",
    chart4: "rgba(15, 23, 42, 0.4)",
    chart5: "rgba(15, 23, 42, 0.2)",
    sidebar: "rgba(255, 255, 255, var(--glass-opacity, 0.15))",
    sidebarForeground: "#0f172a",
    sidebarPrimary: "rgba(15, 23, 42, 0.8)",
    sidebarPrimaryForeground: "#ffffff",
    sidebarAccent: "rgba(255, 255, 255, 0.3)",
    sidebarAccentForeground: "#0f172a",
    sidebarBorder: "rgba(15, 23, 42, 0.1)",
    // Lighter base
    sidebarRing: "rgba(15, 23, 42, 0.4)"
  },
  variables: {
    radius: "1rem"
  }
}, Y1 = {
  sillytavern: KU,
  // SillyTavern 
  paperLight: FU,
  twitterDark: VU,
  claudeDark: UU,
  catppuccin: GU,
  discord: HU,
  glass: YU
}, ji = [];
for (let e = 0; e < 256; ++e)
  ji.push((e + 256).toString(16).slice(1));
function WU(e, t = 0) {
  return (ji[e[t + 0]] + ji[e[t + 1]] + ji[e[t + 2]] + ji[e[t + 3]] + "-" + ji[e[t + 4]] + ji[e[t + 5]] + "-" + ji[e[t + 6]] + ji[e[t + 7]] + "-" + ji[e[t + 8]] + ji[e[t + 9]] + "-" + ji[e[t + 10]] + ji[e[t + 11]] + ji[e[t + 12]] + ji[e[t + 13]] + ji[e[t + 14]] + ji[e[t + 15]]).toLowerCase();
}
let V2;
const ZU = new Uint8Array(16);
function XU() {
  if (!V2) {
    if (typeof crypto > "u" || !crypto.getRandomValues)
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    V2 = crypto.getRandomValues.bind(crypto);
  }
  return V2(ZU);
}
const QU = typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto), hA = { randomUUID: QU };
function JU(e, t, n) {
  var i;
  e = e || {};
  const r = e.random ?? ((i = e.rng) == null ? void 0 : i.call(e)) ?? XU();
  if (r.length < 16)
    throw new Error("Random bytes length must be >= 16");
  return r[6] = r[6] & 15 | 64, r[8] = r[8] & 63 | 128, WU(r);
}
function Dp(e, t, n) {
  return hA.randomUUID && !e ? hA.randomUUID() : JU(e);
}
var lE = function(e, t) {
  return lE = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {
    n.__proto__ = r;
  } || function(n, r) {
    for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (n[i] = r[i]);
  }, lE(e, t);
};
function my(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  lE(e, t);
  function n() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
}
function uE(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, n = t && e[t], r = 0;
  if (n) return n.call(e);
  if (e && typeof e.length == "number") return {
    next: function() {
      return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function cE(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) a.push(i.value);
  } catch (u) {
    o = { error: u };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (o) throw o.error;
    }
  }
  return a;
}
function fE(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, a; r < i; r++)
    (a || !(r in t)) && (a || (a = Array.prototype.slice.call(t, 0, r)), a[r] = t[r]);
  return e.concat(a || Array.prototype.slice.call(t));
}
function $l(e) {
  return typeof e == "function";
}
function hD(e) {
  var t = function(r) {
    Error.call(r), r.stack = new Error().stack;
  }, n = e(t);
  return n.prototype = Object.create(Error.prototype), n.prototype.constructor = n, n;
}
var H2 = hD(function(e) {
  return function(n) {
    e(this), this.message = n ? n.length + ` errors occurred during unsubscription:
` + n.map(function(r, i) {
      return i + 1 + ") " + r.toString();
    }).join(`
  `) : "", this.name = "UnsubscriptionError", this.errors = n;
  };
});
function dE(e, t) {
  if (e) {
    var n = e.indexOf(t);
    0 <= n && e.splice(n, 1);
  }
}
var Xx = (function() {
  function e(t) {
    this.initialTeardown = t, this.closed = !1, this._parentage = null, this._finalizers = null;
  }
  return e.prototype.unsubscribe = function() {
    var t, n, r, i, a;
    if (!this.closed) {
      this.closed = !0;
      var o = this._parentage;
      if (o)
        if (this._parentage = null, Array.isArray(o))
          try {
            for (var u = uE(o), c = u.next(); !c.done; c = u.next()) {
              var f = c.value;
              f.remove(this);
            }
          } catch (E) {
            t = { error: E };
          } finally {
            try {
              c && !c.done && (n = u.return) && n.call(u);
            } finally {
              if (t) throw t.error;
            }
          }
        else
          o.remove(this);
      var p = this.initialTeardown;
      if ($l(p))
        try {
          p();
        } catch (E) {
          a = E instanceof H2 ? E.errors : [E];
        }
      var g = this._finalizers;
      if (g) {
        this._finalizers = null;
        try {
          for (var x = uE(g), b = x.next(); !b.done; b = x.next()) {
            var _ = b.value;
            try {
              pA(_);
            } catch (E) {
              a = a ?? [], E instanceof H2 ? a = fE(fE([], cE(a)), cE(E.errors)) : a.push(E);
            }
          }
        } catch (E) {
          r = { error: E };
        } finally {
          try {
            b && !b.done && (i = x.return) && i.call(x);
          } finally {
            if (r) throw r.error;
          }
        }
      }
      if (a)
        throw new H2(a);
    }
  }, e.prototype.add = function(t) {
    var n;
    if (t && t !== this)
      if (this.closed)
        pA(t);
      else {
        if (t instanceof e) {
          if (t.closed || t._hasParent(this))
            return;
          t._addParent(this);
        }
        (this._finalizers = (n = this._finalizers) !== null && n !== void 0 ? n : []).push(t);
      }
  }, e.prototype._hasParent = function(t) {
    var n = this._parentage;
    return n === t || Array.isArray(n) && n.includes(t);
  }, e.prototype._addParent = function(t) {
    var n = this._parentage;
    this._parentage = Array.isArray(n) ? (n.push(t), n) : n ? [n, t] : t;
  }, e.prototype._removeParent = function(t) {
    var n = this._parentage;
    n === t ? this._parentage = null : Array.isArray(n) && dE(n, t);
  }, e.prototype.remove = function(t) {
    var n = this._finalizers;
    n && dE(n, t), t instanceof e && t._removeParent(this);
  }, e.EMPTY = (function() {
    var t = new e();
    return t.closed = !0, t;
  })(), e;
})(), pD = Xx.EMPTY;
function mD(e) {
  return e instanceof Xx || e && "closed" in e && $l(e.remove) && $l(e.add) && $l(e.unsubscribe);
}
function pA(e) {
  $l(e) ? e() : e.unsubscribe();
}
var eV = {
  Promise: void 0
}, tV = {
  setTimeout: function(e, t) {
    for (var n = [], r = 2; r < arguments.length; r++)
      n[r - 2] = arguments[r];
    return setTimeout.apply(void 0, fE([e, t], cE(n)));
  },
  clearTimeout: function(e) {
    return clearTimeout(e);
  },
  delegate: void 0
};
function nV(e) {
  tV.setTimeout(function() {
    throw e;
  });
}
function mA() {
}
function W1(e) {
  e();
}
var B5 = (function(e) {
  my(t, e);
  function t(n) {
    var r = e.call(this) || this;
    return r.isStopped = !1, n ? (r.destination = n, mD(n) && n.add(r)) : r.destination = sV, r;
  }
  return t.create = function(n, r, i) {
    return new hE(n, r, i);
  }, t.prototype.next = function(n) {
    this.isStopped || this._next(n);
  }, t.prototype.error = function(n) {
    this.isStopped || (this.isStopped = !0, this._error(n));
  }, t.prototype.complete = function() {
    this.isStopped || (this.isStopped = !0, this._complete());
  }, t.prototype.unsubscribe = function() {
    this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this), this.destination = null);
  }, t.prototype._next = function(n) {
    this.destination.next(n);
  }, t.prototype._error = function(n) {
    try {
      this.destination.error(n);
    } finally {
      this.unsubscribe();
    }
  }, t.prototype._complete = function() {
    try {
      this.destination.complete();
    } finally {
      this.unsubscribe();
    }
  }, t;
})(Xx), rV = (function() {
  function e(t) {
    this.partialObserver = t;
  }
  return e.prototype.next = function(t) {
    var n = this.partialObserver;
    if (n.next)
      try {
        n.next(t);
      } catch (r) {
        x1(r);
      }
  }, e.prototype.error = function(t) {
    var n = this.partialObserver;
    if (n.error)
      try {
        n.error(t);
      } catch (r) {
        x1(r);
      }
    else
      x1(t);
  }, e.prototype.complete = function() {
    var t = this.partialObserver;
    if (t.complete)
      try {
        t.complete();
      } catch (n) {
        x1(n);
      }
  }, e;
})(), hE = (function(e) {
  my(t, e);
  function t(n, r, i) {
    var a = e.call(this) || this, o;
    return $l(n) || !n ? o = {
      next: n ?? void 0,
      error: r ?? void 0,
      complete: i ?? void 0
    } : o = n, a.destination = new rV(o), a;
  }
  return t;
})(B5);
function x1(e) {
  nV(e);
}
function iV(e) {
  throw e;
}
var sV = {
  closed: !0,
  next: mA,
  error: iV,
  complete: mA
}, aV = (function() {
  return typeof Symbol == "function" && Symbol.observable || "@@observable";
})();
function oV(e) {
  return e;
}
function lV(e) {
  return e.length === 0 ? oV : e.length === 1 ? e[0] : function(n) {
    return e.reduce(function(r, i) {
      return i(r);
    }, n);
  };
}
var gA = (function() {
  function e(t) {
    t && (this._subscribe = t);
  }
  return e.prototype.lift = function(t) {
    var n = new e();
    return n.source = this, n.operator = t, n;
  }, e.prototype.subscribe = function(t, n, r) {
    var i = this, a = cV(t) ? t : new hE(t, n, r);
    return W1(function() {
      var o = i, u = o.operator, c = o.source;
      a.add(u ? u.call(a, c) : c ? i._subscribe(a) : i._trySubscribe(a));
    }), a;
  }, e.prototype._trySubscribe = function(t) {
    try {
      return this._subscribe(t);
    } catch (n) {
      t.error(n);
    }
  }, e.prototype.forEach = function(t, n) {
    var r = this;
    return n = yA(n), new n(function(i, a) {
      var o = new hE({
        next: function(u) {
          try {
            t(u);
          } catch (c) {
            a(c), o.unsubscribe();
          }
        },
        error: a,
        complete: i
      });
      r.subscribe(o);
    });
  }, e.prototype._subscribe = function(t) {
    var n;
    return (n = this.source) === null || n === void 0 ? void 0 : n.subscribe(t);
  }, e.prototype[aV] = function() {
    return this;
  }, e.prototype.pipe = function() {
    for (var t = [], n = 0; n < arguments.length; n++)
      t[n] = arguments[n];
    return lV(t)(this);
  }, e.prototype.toPromise = function(t) {
    var n = this;
    return t = yA(t), new t(function(r, i) {
      var a;
      n.subscribe(function(o) {
        return a = o;
      }, function(o) {
        return i(o);
      }, function() {
        return r(a);
      });
    });
  }, e.create = function(t) {
    return new e(t);
  }, e;
})();
function yA(e) {
  var t;
  return (t = e ?? eV.Promise) !== null && t !== void 0 ? t : Promise;
}
function uV(e) {
  return e && $l(e.next) && $l(e.error) && $l(e.complete);
}
function cV(e) {
  return e && e instanceof B5 || uV(e) && mD(e);
}
function fV(e) {
  return $l(e == null ? void 0 : e.lift);
}
function dV(e) {
  return function(t) {
    if (fV(t))
      return t.lift(function(n) {
        try {
          return e(n, this);
        } catch (r) {
          this.error(r);
        }
      });
    throw new TypeError("Unable to lift unknown Observable type");
  };
}
function hV(e, t, n, r, i) {
  return new pV(e, t, n, r, i);
}
var pV = (function(e) {
  my(t, e);
  function t(n, r, i, a, o, u) {
    var c = e.call(this, n) || this;
    return c.onFinalize = o, c.shouldUnsubscribe = u, c._next = r ? function(f) {
      try {
        r(f);
      } catch (p) {
        n.error(p);
      }
    } : e.prototype._next, c._error = a ? function(f) {
      try {
        a(f);
      } catch (p) {
        n.error(p);
      } finally {
        this.unsubscribe();
      }
    } : e.prototype._error, c._complete = i ? function() {
      try {
        i();
      } catch (f) {
        n.error(f);
      } finally {
        this.unsubscribe();
      }
    } : e.prototype._complete, c;
  }
  return t.prototype.unsubscribe = function() {
    var n;
    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
      var r = this.closed;
      e.prototype.unsubscribe.call(this), !r && ((n = this.onFinalize) === null || n === void 0 || n.call(this));
    }
  }, t;
})(B5), mV = hD(function(e) {
  return function() {
    e(this), this.name = "ObjectUnsubscribedError", this.message = "object unsubscribed";
  };
}), q5 = (function(e) {
  my(t, e);
  function t() {
    var n = e.call(this) || this;
    return n.closed = !1, n.currentObservers = null, n.observers = [], n.isStopped = !1, n.hasError = !1, n.thrownError = null, n;
  }
  return t.prototype.lift = function(n) {
    var r = new vA(this, this);
    return r.operator = n, r;
  }, t.prototype._throwIfClosed = function() {
    if (this.closed)
      throw new mV();
  }, t.prototype.next = function(n) {
    var r = this;
    W1(function() {
      var i, a;
      if (r._throwIfClosed(), !r.isStopped) {
        r.currentObservers || (r.currentObservers = Array.from(r.observers));
        try {
          for (var o = uE(r.currentObservers), u = o.next(); !u.done; u = o.next()) {
            var c = u.value;
            c.next(n);
          }
        } catch (f) {
          i = { error: f };
        } finally {
          try {
            u && !u.done && (a = o.return) && a.call(o);
          } finally {
            if (i) throw i.error;
          }
        }
      }
    });
  }, t.prototype.error = function(n) {
    var r = this;
    W1(function() {
      if (r._throwIfClosed(), !r.isStopped) {
        r.hasError = r.isStopped = !0, r.thrownError = n;
        for (var i = r.observers; i.length; )
          i.shift().error(n);
      }
    });
  }, t.prototype.complete = function() {
    var n = this;
    W1(function() {
      if (n._throwIfClosed(), !n.isStopped) {
        n.isStopped = !0;
        for (var r = n.observers; r.length; )
          r.shift().complete();
      }
    });
  }, t.prototype.unsubscribe = function() {
    this.isStopped = this.closed = !0, this.observers = this.currentObservers = null;
  }, Object.defineProperty(t.prototype, "observed", {
    get: function() {
      var n;
      return ((n = this.observers) === null || n === void 0 ? void 0 : n.length) > 0;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype._trySubscribe = function(n) {
    return this._throwIfClosed(), e.prototype._trySubscribe.call(this, n);
  }, t.prototype._subscribe = function(n) {
    return this._throwIfClosed(), this._checkFinalizedStatuses(n), this._innerSubscribe(n);
  }, t.prototype._innerSubscribe = function(n) {
    var r = this, i = this, a = i.hasError, o = i.isStopped, u = i.observers;
    return a || o ? pD : (this.currentObservers = null, u.push(n), new Xx(function() {
      r.currentObservers = null, dE(u, n);
    }));
  }, t.prototype._checkFinalizedStatuses = function(n) {
    var r = this, i = r.hasError, a = r.thrownError, o = r.isStopped;
    i ? n.error(a) : o && n.complete();
  }, t.prototype.asObservable = function() {
    var n = new gA();
    return n.source = this, n;
  }, t.create = function(n, r) {
    return new vA(n, r);
  }, t;
})(gA), vA = (function(e) {
  my(t, e);
  function t(n, r) {
    var i = e.call(this) || this;
    return i.destination = n, i.source = r, i;
  }
  return t.prototype.next = function(n) {
    var r, i;
    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.next) === null || i === void 0 || i.call(r, n);
  }, t.prototype.error = function(n) {
    var r, i;
    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.error) === null || i === void 0 || i.call(r, n);
  }, t.prototype.complete = function() {
    var n, r;
    (r = (n = this.destination) === null || n === void 0 ? void 0 : n.complete) === null || r === void 0 || r.call(n);
  }, t.prototype._subscribe = function(n) {
    var r, i;
    return (i = (r = this.source) === null || r === void 0 ? void 0 : r.subscribe(n)) !== null && i !== void 0 ? i : pD;
  }, t;
})(q5);
function gV(e, t) {
  return dV(function(n, r) {
    var i = 0;
    n.subscribe(hV(r, function(a) {
      return e.call(t, a, i++) && r.next(a);
    }));
  });
}
const b1 = new q5(), $5 = {
  /**
   * 
   */
  emit(e) {
    b1.next({
      ...e,
      timestamp: Date.now()
    });
  },
  /**
   * 
   */
  subscribe(e) {
    const t = b1.subscribe(e);
    return {
      unsubscribe: () => t.unsubscribe()
    };
  },
  /**
   * 
   */
  on(e, t) {
    const n = b1.pipe(gV((r) => r.type === e)).subscribe((r) => t(r.payload));
    return {
      unsubscribe: () => n.unsubscribe()
    };
  },
  /**
   *  RxJS 
   */
  asObservable() {
    return b1.asObservable();
  }
}, Wa = {
  // 
  MESSAGE_SENT: "message_sent",
  MESSAGE_RECEIVED: "message_received",
  MESSAGE_EDITED: "message_edited",
  MESSAGE_DELETED: "message_deleted",
  MESSAGE_UPDATED: "message_updated",
  MESSAGE_SWIPED: "message_swiped",
  USER_MESSAGE_RENDERED: "user_message_rendered",
  CHARACTER_MESSAGE_RENDERED: "character_message_rendered",
  // 
  CHAT_CHANGED: "chat_id_changed",
  CHAT_CREATED: "chat_created",
  CHAT_DELETED: "chat_deleted",
  // 
  GENERATION_STARTED: "generation_started",
  GENERATION_STOPPED: "generation_stopped",
  GENERATION_ENDED: "generation_ended",
  GENERATION_AFTER_COMMANDS: "GENERATION_AFTER_COMMANDS",
  STREAM_TOKEN_RECEIVED: "stream_token_received",
  // V0.7: RAG  -  prompt await  handler 
  GENERATE_BEFORE_COMBINE_PROMPTS: "generate_before_combine_prompts",
  GENERATE_AFTER_COMBINE_PROMPTS: "generate_after_combine_prompts",
  GENERATE_AFTER_DATA: "generate_after_data",
  // V0.8: Chat Completion  ()
  CHAT_COMPLETION_PROMPT_READY: "chat_completion_prompt_ready",
  CHAT_COMPLETION_SETTINGS_READY: "chat_completion_settings_ready",
  // 
  WORLDINFO_UPDATED: "worldinfo_updated",
  WORLDINFO_SETTINGS_UPDATED: "worldinfo_settings_updated",
  WORLDINFO_ENTRIES_LOADED: "worldinfo_entries_loaded",
  WORLD_INFO_ACTIVATED: "world_info_activated",
  // 
  APP_READY: "app_ready",
  SETTINGS_LOADED: "settings_loaded",
  SETTINGS_LOADED_AFTER: "settings_loaded_after",
  EXTENSION_SETTINGS_LOADED: "extension_settings_loaded",
  // 
  CHARACTER_EDITED: "character_edited",
  CHARACTER_DELETED: "characterDeleted",
  // 
  ENGRAM_REQUEST_REVISION: "engram:request_revision"
};
function Ep() {
  try {
    const e = window.SillyTavern;
    if (e != null && e.getContext) {
      const t = e.getContext();
      return (t == null ? void 0 : t.eventSource) || null;
    }
    return null;
  } catch {
    return console.warn("[Engram] EventBus:  SillyTavern eventSource"), null;
  }
}
class Ta {
  /**
   * 
   * @param event 
   * @param callback 
   * @returns 
   */
  static on(t, n) {
    const r = Ep();
    return r && r.on(t, n), this.listeners.has(t) || this.listeners.set(t, /* @__PURE__ */ new Set()), this.listeners.get(t).add(n), () => {
      this.off(t, n);
    };
  }
  /**
   * 
   * @param event 
   * @param callback 
   */
  static once(t, n) {
    const r = Ep();
    if (r)
      r.once(t, n);
    else {
      const i = (...a) => {
        this.off(t, i), n(...a);
      };
      this.on(t, i);
    }
  }
  /**
   * 
   * @param event 
   * @param callback 
   */
  static off(t, n) {
    var i;
    const r = Ep();
    r && r.removeListener(t, n), (i = this.listeners.get(t)) == null || i.delete(n);
  }
  /**
   * 
   * @param event 
   * @param args 
   */
  static async emit(t, ...n) {
    const r = Ep();
    if (r)
      return r.emit(t, ...n);
  }
  /**
   * 
   * 
   */
  static clearAll() {
    const t = Ep();
    for (const [n, r] of this.listeners)
      for (const i of r)
        t && t.removeListener(n, i);
    this.listeners.clear();
  }
  /**
   *  EventBus 
   */
  static isAvailable() {
    return Ep() !== null;
  }
}
yt(Ta, "listeners", /* @__PURE__ */ new Map());
const yV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  EventBus: Ta,
  TavernEventType: Wa
}, Symbol.toStringTag, { value: "Module" })), zd = class zd {
  constructor() {
    yt(this, "unsubscribers", []);
    yt(this, "callbacks", /* @__PURE__ */ new Map());
  }
  /**
   * 
   */
  static getInstance() {
    return zd.instance || (zd.instance = new zd()), zd.instance;
  }
  /**
   * 
   * 
   */
  start() {
    if (this.unsubscribers.length > 0) {
      console.log("[EventWatcher] Already started.");
      return;
    }
    this.unsubscribers.push(
      Ta.on(Wa.MESSAGE_RECEIVED, () => this.emit("messageReceived")),
      Ta.on(Wa.CHAT_CHANGED, () => this.emit("chatChanged")),
      Ta.on(Wa.GENERATION_STARTED, () => this.emit("generationStarted")),
      Ta.on(Wa.GENERATION_ENDED, () => this.emit("generationEnded"))
    ), console.log("[EventWatcher] Started, listening to core events.");
  }
  /**
   * 
   */
  stop() {
    this.unsubscribers.forEach((t) => t()), this.unsubscribers = [], console.log("[EventWatcher] Stopped.");
  }
  /**
   * 
   * @param event 
   * @param callback 
   * @returns 
   */
  on(t, n) {
    const r = this.mapEventKey(t);
    return this.callbacks.has(r) || this.callbacks.set(r, /* @__PURE__ */ new Set()), this.callbacks.get(r).add(n), () => {
      var i;
      (i = this.callbacks.get(r)) == null || i.delete(n);
    };
  }
  /**
   * 
   */
  emit(t) {
    const n = this.callbacks.get(t);
    n && n.forEach((r) => {
      try {
        r();
      } catch (i) {
        console.error(`[EventWatcher] Callback error for ${t}:`, i);
      }
    });
  }
  /**
   * 
   */
  mapEventKey(t) {
    return {
      onMessageReceived: "messageReceived",
      onChatChanged: "chatChanged",
      onGenerationStarted: "generationStarted",
      onGenerationEnded: "generationEnded"
    }[t];
  }
};
yt(zd, "instance", null);
let pE = zd;
const G2 = pE.getInstance();
function eo() {
  var e, t;
  try {
    return ((t = (e = window.SillyTavern) == null ? void 0 : e.getContext) == null ? void 0 : t.call(e)) || null;
  } catch (n) {
    return console.warn("[Engram] Failed to get ST context:", n), null;
  }
}
function gD() {
  const e = eo();
  return (e == null ? void 0 : e.chat) || [];
}
function yD() {
  return gD();
}
function fi() {
  const e = eo();
  return (e == null ? void 0 : e.chatId) || null;
}
function tm() {
  const e = eo();
  return e ? {
    name: e.name2,
    id: e.characterId
  } : null;
}
function Qx() {
  try {
    return window.selected_model || void 0;
  } catch {
    return;
  }
}
function vD() {
  return eo() !== null;
}
function v0(e) {
  const t = eo();
  return t != null && t.getRequestHeaders ? t.getRequestHeaders(e) : { "Content-Type": "application/json" };
}
const vV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  getChatMessages: yD,
  getCurrentCharacter: tm,
  getCurrentChat: gD,
  getCurrentChatId: fi,
  getCurrentModel: Qx,
  getRequestHeaders: v0,
  getSTContext: eo,
  isSTAvailable: vD
}, Symbol.toStringTag, { value: "Module" }));
function xV(e, t) {
  let n = "assistant";
  return e.is_user ? n = "user" : e.is_system && (n = "system"), {
    id: t,
    role: n,
    content: e.mes || "",
    name: e.name || "",
    isHidden: e.is_hidden ?? !1,
    raw: e
  };
}
class xD {
  /**
   * 
   * @param options 
   */
  static getAllMessages(t = {}) {
    const n = eo();
    if (!(n != null && n.chat))
      return [];
    let r = n.chat.map((i, a) => xV(i, a));
    if (t.includeHidden || (r = r.filter((i) => !i.isHidden)), t.role) {
      const i = Array.isArray(t.role) ? t.role : [t.role];
      r = r.filter((a) => i.includes(a.role));
    }
    return r;
  }
  /**
   *  N 
   * @param count 
   * @param options 
   */
  static getRecentMessages(t, n = {}) {
    return this.getAllMessages(n).slice(-t);
  }
  /**
   * 
   * @param start 
   * @param end 
   * @param options 
   */
  static getMessages(t, n, r = {}) {
    return this.getAllMessages(r).slice(t, n);
  }
  /**
   * 
   * @param options 
   */
  static getFloorCount(t = {}) {
    return this.getAllMessages(t).length;
  }
  /**
   * 
   * @param options 
   */
  static getLastMessage(t = {}) {
    const n = this.getAllMessages(t);
    return n.length > 0 ? n[n.length - 1] : null;
  }
  /**
   * 
   */
  static getCurrentCharacterName() {
    var n;
    const t = eo();
    return !(t != null && t.characters) || t.characterId < 0 ? null : ((n = t.characters[t.characterId]) == null ? void 0 : n.name) || null;
  }
  /**
   *  LLM
   * @param messages 
   * @param format 
   */
  static formatMessagesAsText(t, n = "simple") {
    return n === "simple" ? t.map((r) => `${r.name}: ${r.content}`).join(`

`) : t.map((r) => `[${r.role.toUpperCase()}] ${r.name}:
${r.content}`).join(`

---

`);
  }
  /**
   *  MessageService 
   */
  static isAvailable() {
    return vD();
  }
}
const bV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  MessageService: xD
}, Symbol.toStringTag, { value: "Module" }));
async function xA(e) {
  try {
    const t = window.SillyTavern;
    if (t != null && t.getContext) {
      const n = t.getContext();
      if (n != null && n.getTokenCountAsync)
        return await n.getTokenCountAsync(e);
    }
    return Math.ceil(e.length / 4);
  } catch {
    return console.warn("[Engram] WorldInfoService:  Token "), Math.ceil(e.length / 4);
  }
}
function Zs() {
  try {
    return window.TavernHelper || null;
  } catch {
    return null;
  }
}
const Z1 = "engram";
class Yr {
  /**
   *  Token 
   * @param text 
   */
  static async countTokens(t) {
    return xA(t);
  }
  /**
   *  Engram  Token 
   * 
   * @param worldbookName 
   */
  static async countSummaryTokens(t) {
    const r = (await this.getEntries(t)).filter(
      (o) => o.enabled && o.keys.includes(Z1)
    );
    if (r.length === 0) return 0;
    const i = r.map((o) => o.content);
    return (await Promise.all(i.map((o) => this.countTokens(o)))).reduce((o, u) => o + u, 0);
  }
  /**
   *  Engram  {{engramSummaries}} 
   * 
   */
  static async getEngramSummariesContent() {
    const t = this.findExistingWorldbook();
    if (!t)
      return "";
    const r = (await this.getEntries(t)).filter((a) => a.keys.includes(Z1));
    return r.length === 0 ? "" : (r.sort((a, o) => a.order - o.order), r.map((a) => {
      const o = a.content.replace(/\{\{\/\/.*?\}\}/gs, "").trim();
      return `${a.name}
${o}`;
    }).join(`

---

`));
  }
  /**
   *  Token 
   * @param texts 
   */
  static async countTokensBatch(t) {
    return Promise.all(t.map((n) => xA(n)));
  }
  /**
   *  Engram 
   * 
   */
  static findExistingWorldbook() {
    try {
      const t = Zs();
      if (!(t != null && t.getCharWorldbookNames))
        return null;
      const n = t.getCharWorldbookNames("current");
      return n && [...n.additional || [], n.primary].filter(Boolean).find((a) => a == null ? void 0 : a.startsWith("[Engram]")) || null;
    } catch {
      return null;
    }
  }
  /**
   *  Engram 
   * 
   * ****
   *
   *  the_world 
   * 1. TavernHelper.createWorldbook() 
   * 2. TavernHelper.getCharWorldbookNames() 
   * 3. TavernHelper.rebindCharWorldbooks() 
   */
  static async getOrCreateWorldbook() {
    var t, n;
    try {
      const r = this.findExistingWorldbook();
      if (r)
        return console.debug("[Engram] WorldInfoService: ", r), r;
      const i = Zs();
      if (!i)
        return console.warn("[Engram] WorldInfoService: TavernHelper "), null;
      const a = (n = (t = window.SillyTavern) == null ? void 0 : t.getContext) == null ? void 0 : n.call(t);
      if (!(a != null && a.name2) || a.name2 === "SillyTavern System")
        return console.warn("[Engram] WorldInfoService: "), null;
      const o = a.name2, u = `[Engram] ${o}`;
      if (console.debug("[Engram] WorldInfoService: ", u), i.createWorldbook)
        await i.createWorldbook(u);
      else
        return console.error("[Engram] WorldInfoService: TavernHelper.createWorldbook "), null;
      if (i.getCharWorldbookNames && i.rebindCharWorldbooks) {
        const c = i.getCharWorldbookNames("current");
        c && (c.additional.push(u), await i.rebindCharWorldbooks("current", c), console.info("[Engram] WorldInfoService: ", {
          character: o,
          worldbook: u
        }));
      }
      return u;
    } catch (r) {
      return console.error("[Engram] WorldInfoService: /", r), null;
    }
  }
  /**
   * @deprecated  getOrCreateWorldbook() 
   */
  static async getChatWorldbook() {
    return this.getOrCreateWorldbook();
  }
  /**
   * 
   * @param worldbookName 
   */
  static async getEntries(t) {
    const n = Zs();
    if (!(n != null && n.getWorldbook))
      return console.warn("[Engram] WorldInfoService: TavernHelper "), [];
    try {
      return (await n.getWorldbook(t)).map((i) => {
        const a = i, o = a.strategy, u = a.position, c = a.recursion, f = [];
        if (o != null && o.keys && Array.isArray(o.keys))
          for (const p of o.keys)
            typeof p == "string" ? f.push(p) : p && typeof p == "object" && "source" in p && f.push(p.source);
        return {
          uid: a.uid || 0,
          name: a.name || "",
          content: a.content || "",
          enabled: a.enabled ?? !0,
          constant: (o == null ? void 0 : o.type) === "constant",
          keys: f,
          position: (u == null ? void 0 : u.type) || "before_character_definition",
          depth: (u == null ? void 0 : u.depth) || 0,
          order: (u == null ? void 0 : u.order) || 100,
          recursion: c ? {
            prevent_incoming: c.prevent_incoming,
            prevent_outgoing: c.prevent_outgoing
          } : void 0,
          comment: a.comment || "",
          extra: a.extra || void 0
        };
      });
    } catch (r) {
      return console.error("[Engram] WorldInfoService: ", r), [];
    }
  }
  /**
   * 
   */
  static async getWorldbookNames() {
    const t = Zs();
    try {
      return t != null && t.getWorldbookNames ? t.getWorldbookNames() : [];
    } catch (n) {
      return console.error("[Engram] WorldInfoService: ", n), [];
    }
  }
  /**
   * 
   * @param worldbookName 
   */
  static async deleteWorldbook(t) {
    const n = Zs();
    if (!(n != null && n.deleteWorldbook))
      return console.warn("[Engram] WorldInfoService: TavernHelper.deleteWorldbook "), !1;
    try {
      const r = await n.deleteWorldbook(t);
      return r && console.info("[Engram] WorldInfoService: ", t), r;
    } catch (r) {
      return console.error("[Engram] WorldInfoService: ", r), !1;
    }
  }
  /**
   * 
   *  TavernHelper API the_world 
   * @param worldbookName 
   * @param params 
   */
  static async createEntry(t, n) {
    try {
      const r = Zs();
      if (!(r != null && r.createWorldbookEntries))
        return console.error("[Engram] WorldInfoService: TavernHelper.createWorldbookEntries "), !1;
      const i = {
        name: n.name,
        content: n.content,
        comment: n.name,
        // 
        disable: !(n.enabled ?? !0),
        // TavernHelper  disable 
        strategy: {
          type: n.constant ? "constant" : "selective",
          keys: n.keys || []
        },
        position: {
          type: n.position || "before_character_definition",
          order: n.order ?? 100,
          depth: n.depth ?? 4
        },
        recursion: n.recursion,
        //  Engram 
        extra: {
          engram: !0
        }
      };
      return console.debug("[Engram] WorldInfoService: ", {
        worldbook: t,
        name: n.name,
        contentLength: n.content.length
      }), await r.createWorldbookEntries(t, [i]), console.info("[Engram] WorldInfoService: ", t), !0;
    } catch (r) {
      return console.error("[Engram] WorldInfoService: ", r), !1;
    }
  }
  /**
   * 
   * @param worldbookName 
   * @param uid  UID
   * @param updates 
   */
  /**
   * 
   *  updateWorldbookWith 
   * @param worldbookName 
   * @param uid  UID
   * @param updates 
   */
  static async updateEntry(t, n, r) {
    const i = Zs();
    if (!(i != null && i.updateWorldbookWith))
      return console.warn("[Engram] WorldInfoService: TavernHelper.updateWorldbookWith "), !1;
    try {
      return await i.updateWorldbookWith(t, (a) => {
        var u;
        const o = a.findIndex((c) => c.uid === n);
        if (o !== -1) {
          const c = a[o];
          let f = c.disable;
          "enabled" in r && (f = !r.enabled);
          let p = c.strategy || { type: "selective", keys: [] };
          if ("constant" in r || "keys" in r) {
            const b = r.constant !== void 0 ? r.constant : p.type === "constant", _ = r.keys !== void 0 ? r.keys : p.keys || [];
            p = {
              ...p,
              type: b ? "constant" : "selective",
              keys: _
            };
          }
          let g = c.position || { type: "before_character_definition", order: 0, depth: 0 };
          (r.position || typeof r.order == "number" || typeof r.depth == "number") && (g = {
            ...g,
            type: (typeof r.position == "string" ? r.position : (u = r.position) == null ? void 0 : u.type) || g.type,
            order: r.order ?? g.order,
            depth: r.depth ?? g.depth
          });
          let x = c.recursion;
          r.recursion && (x = r.recursion), a[o] = {
            ...c,
            name: r.name ?? c.name,
            content: r.content ?? c.content,
            comment: r.name ?? c.comment,
            // 
            disable: f,
            strategy: p,
            position: g,
            recursion: x
          }, console.debug("[Engram] WorldInfoService:  (In-Place)", { uid: n, name: a[o].name });
        } else
          console.warn("[Engram] WorldInfoService: updateEntry ", n);
        return a;
      }), !0;
    } catch (a) {
      return console.error("[Engram] WorldInfoService: ", a), !1;
    }
  }
  /**
   * 
   * @param worldbookName 
   * @param uid  UID
   */
  static async deleteEntry(t, n) {
    const r = Zs();
    if (!(r != null && r.deleteWorldbookEntries))
      return console.warn("[Engram] WorldInfoService: TavernHelper.deleteWorldbookEntries "), !1;
    try {
      return await r.deleteWorldbookEntries(t, (i) => i.uid === n), console.debug("[Engram] WorldInfoService: ", { worldbook: t, uid: n }), !0;
    } catch (i) {
      return console.error("[Engram] WorldInfoService: ", i), !1;
    }
  }
  /**
   * 
   * @param worldbookName 
   * @param uids  UID 
   */
  static async deleteEntries(t, n) {
    const r = Zs();
    if (!(r != null && r.deleteWorldbookEntries))
      return console.warn("[Engram] WorldInfoService: TavernHelper.deleteWorldbookEntries "), !1;
    try {
      const i = new Set(n);
      return await r.deleteWorldbookEntries(t, (a) => i.has(a.uid)), console.debug("[Engram] WorldInfoService: ", { worldbook: t, count: n.length }), !0;
    } catch (i) {
      return console.error("[Engram] WorldInfoService: ", i), !1;
    }
  }
  /**
   *  Engram  order 
   * 
   * @param worldbookName 
   */
  static async getSummaryEntries(t) {
    const r = (await this.getEntries(t)).filter((i) => i.keys.includes(Z1));
    return r.sort((i, a) => i.order - a.order), r;
  }
  /**
   * 
   * @param entryName  "_1-10"
   * @returns [startFloor, endFloor]  null
   */
  static parseFloorRangeFromName(t) {
    const n = t.match(/_(\d+)-(\d+)/);
    return n ? [parseInt(n[1], 10), parseInt(n[2], 10)] : null;
  }
  /**
   * 
   * 8999:  <summary>
   * 10000:  </summary>
   */
  static async ensureSeparatorEntries(t) {
    await this.findEntryByKey(t, "") || await this.createEntry(t, {
      name: "",
      content: "<summary>",
      keys: [""],
      constant: !0,
      order: 8999,
      enabled: !0,
      position: "before_character_definition"
    }), await this.findEntryByKey(t, "") || await this.createEntry(t, {
      name: "",
      content: "</summary>",
      keys: [""],
      constant: !0,
      order: 1e4,
      enabled: !0,
      position: "before_character_definition"
    });
  }
  /**
   * 
   *  9000
   */
  static async getNextSummaryOrder(t) {
    const r = (await this.getEntries(t)).map((a) => a.order).filter((a) => a >= 9e3 && a < 1e4);
    return r.length === 0 ? 9e3 : Math.max(...r) + 1;
  }
  /**
   *  Key 
   * @param worldbookName 
   * @param key 
   */
  static async findEntryByKey(t, n) {
    const r = await this.getEntries(t);
    let i = r.find((a) => a.keys.includes(n));
    return i || (i = r.find((a) => a.name === n || n === "__ENGRAM_STATE__" && a.name === "Engram System State")), i || null;
  }
  /**
   *  Token 
   * @param worldbookName 
   */
  static async getWorldbookTokenStats(t) {
    const n = await this.getEntries(t), r = await Promise.all(
      n.map(async (a) => ({
        name: a.name,
        tokens: await this.countTokens(a.content)
      }))
    );
    return {
      totalTokens: r.reduce((a, o) => a + o.tokens, 0),
      entryCount: n.length,
      entries: r
    };
  }
  /**
   *  WorldInfoService 
   */
  static isAvailable() {
    return Zs() !== null;
  }
  /**
   *  Token  API
   */
  static async isNativeTokenCountAvailable() {
    try {
      const t = window.SillyTavern;
      if (t != null && t.getContext) {
        const n = t.getContext();
        return typeof (n == null ? void 0 : n.getTokenCountAsync) == "function";
      }
      return !1;
    } catch {
      return !1;
    }
  }
  /**
   * 
   *  getWorldInfoPrompt 
   * + 
   *
   * @param chatMessages  options
   * @param options 
   *   - floorRange: [start, end] 1-indexed Summary 
   *   -  4 /
   * @returns 
   */
  static async getActivatedWorldInfo(t, n) {
    var i, a, o;
    const { Logger: r } = await Promise.resolve().then(() => F5);
    try {
      const c = await new Function("path", "return import(path)")("/scripts/world-info.js"), f = c == null ? void 0 : c.getWorldInfoPrompt, p = c == null ? void 0 : c.getSortedEntries;
      if (typeof p == "function") {
        const F = await p(), X = [...new Set((F == null ? void 0 : F.map((J) => J.world)) || [])], me = ((i = F == null ? void 0 : F.filter((J) => J.constant)) == null ? void 0 : i.length) || 0;
        r.info("WorldInfo", "getSortedEntries ", {
          totalEntries: (F == null ? void 0 : F.length) || 0,
          worlds: X,
          constantCount: me,
          sampleEntry: F != null && F[0] ? {
            name: F[0].name,
            world: F[0].world,
            constant: F[0].constant
          } : null
        });
      }
      if (typeof f != "function")
        return r.warn("WorldInfo", "getWorldInfoPrompt "), this.getConstantWorldInfo();
      const g = 4;
      let x = t;
      const b = (o = (a = window.SillyTavern) == null ? void 0 : a.getContext) == null ? void 0 : o.call(a);
      if (n != null && n.floorRange) {
        const [F, X] = n.floorRange;
        b != null && b.chat && Array.isArray(b.chat) && (x = b.chat.slice(F - 1, X).map((J) => J.mes || "").reverse(), r.debug("WorldInfo", "", {
          floorRange: n.floorRange,
          messageCount: x.length
        }));
      } else (!x || x.length === 0) && b != null && b.chat && Array.isArray(b.chat) && (x = b.chat.slice(-g).map((X) => X.mes || "").reverse(), r.debug("WorldInfo", "", {
        scanLimit: g,
        messageCount: x.length
      }));
      if (!x || x.length === 0)
        return r.warn("WorldInfo", ""), this.getConstantWorldInfo();
      r.debug("WorldInfo", " getWorldInfoPrompt", {
        messageCount: x.length
      });
      const E = Math.max(1e4, x.length * 500), k = c == null ? void 0 : c.checkWorldInfo;
      if (typeof k != "function")
        return r.error("WorldInfo", "checkWorldInfo "), this.getConstantWorldInfo();
      const T = await k(x, E, !0, {
        trigger: "normal"
      }), R = T == null ? void 0 : T.allActivatedEntries, N = R ? Array.from(R.values()) : [];
      r.info("WorldInfo", ` ${N.length} `);
      const O = await this.loadFilteringState(), { disabledGlobalBooks: P, disabledEntries: z, globalWorldbooks: q, config: G } = O, Y = N.filter(
        (F) => this.shouldIncludeEntry(F, q, P, z, G)
      );
      return r.info("WorldInfo", "", {
        total: N.length,
        kept: Y.length,
        filteredOut: N.length - Y.length,
        keptWorlds: [...new Set(Y.map((F) => F.world))]
      }), Y.sort((F, X) => (F.order || 0) - (X.order || 0)), Y.map((F) => F.content).filter(Boolean).join(`

`);
    } catch (u) {
      return r.error("WorldInfo", "", u), this.getConstantWorldInfo();
    }
  }
  /**
   * 
   * @private
   */
  static async loadFilteringState() {
    var p, g, x;
    const t = Zs(), n = ((p = t == null ? void 0 : t.getGlobalWorldbookNames) == null ? void 0 : p.call(t)) || [], { SettingsManager: r } = await Promise.resolve().then(() => H5), a = (g = r.getSettings().apiSettings) == null ? void 0 : g.worldbookConfig, o = (a == null ? void 0 : a.disabledWorldbooks) || [], { WorldBookStateService: u } = await Promise.resolve().then(() => rre), c = (x = t == null ? void 0 : t.getCharWorldbookNames) == null ? void 0 : x.call(t, "current");
    let f = {};
    return c != null && c.primary && (f = (await u.loadState(c.primary)).disabledEntries || {}), {
      globalWorldbooks: n,
      disabledGlobalBooks: o,
      disabledEntries: f,
      config: a
    };
  }
  /**
   * 
   * @private
   */
  static shouldIncludeEntry(t, n, r, i, a) {
    var o, u, c, f;
    if (((o = t.extra) == null ? void 0 : o.engram) === !0 || (u = t.world) != null && u.startsWith("[Engram]")) return !0;
    if (t.world && n.includes(t.world) && ((a == null ? void 0 : a.includeGlobal) === !1 || r.includes(t.world)))
      return !1;
    if (t.world && t.uid) {
      const p = i[t.world];
      if (p && p.includes(t.uid))
        return !1;
    }
    return !((c = t.world) != null && c.startsWith("") || (f = t.world) != null && f.startsWith("---"));
  }
  /**
   *  UI 
   * 
   */
  static async getWorldbookStructure() {
    var o;
    const t = Zs();
    if (!t) return {};
    const n = ((o = t.getGlobalWorldbookNames) == null ? void 0 : o.call(t)) || [];
    let r = [];
    if (t.getCharWorldbookNames) {
      const u = t.getCharWorldbookNames("current");
      u && (r = [...u.additional || [], u.primary].filter(Boolean));
    }
    const i = Array.from(/* @__PURE__ */ new Set([...n, ...r])).sort(), a = {};
    for (const u of i)
      try {
        const c = await this.getEntries(u);
        a[u] = c.map((f) => {
          var p;
          return {
            uid: f.uid,
            name: f.name,
            // 
            keys: f.keys,
            constant: f.constant,
            // 
            comment: f.comment || "",
            content: ((p = f.content) == null ? void 0 : p.substring(0, 50)) + "..."
            // 
          };
        });
      } catch (c) {
        console.warn(`[Engram] WorldInfoService:  ${u} `, c), a[u] = [];
      }
    return a;
  }
  /**
   * 
   *  getActivatedWorldInfo 
   */
  static async getConstantWorldInfo() {
    try {
      const n = await new Function("path", "return import(path)")("/scripts/world-info.js"), r = n == null ? void 0 : n.getSortedEntries;
      if (typeof r != "function")
        return "";
      const i = await r();
      if (!i || !Array.isArray(i))
        return "";
      const a = i.filter((o) => o.constant === !0 && o.disable !== !0 && o.content);
      return a.length === 0 ? "" : (console.debug(`[Engram] WorldInfoService:  ${a.length} `), a.map((o) => o.content).join(`

`));
    } catch {
      return "";
    }
  }
}
const wV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  SUMMARY_ENTRY_KEY: Z1,
  WorldInfoService: Yr,
  getTavernHelper: Zs
}, Symbol.toStringTag, { value: "Module" }));
async function _V() {
  const { EventBus: e } = await Promise.resolve().then(() => yV), { MessageService: t } = await Promise.resolve().then(() => bV), { WorldInfoService: n } = await Promise.resolve().then(() => wV);
  return {
    eventBus: e.isAvailable(),
    messageService: t.isAvailable(),
    worldInfoService: n.isAvailable(),
    nativeTokenCount: await n.isNativeTokenCountAvailable(),
    floorCount: t.isAvailable() ? t.getFloorCount() : null,
    characterName: t.isAvailable() ? t.getCurrentCharacterName() : null
  };
}
const bD = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  EventBus: Ta,
  MessageService: xD,
  TavernEventType: Wa,
  WorldInfoService: Yr,
  checkTavernIntegration: _V
}, Symbol.toStringTag, { value: "Module" }));
class SV {
  /**
   * 
   * @returns Promise<string> 
   * @throws Error 
   */
  async requestRevision(t, n, r) {
    return new Promise((i, a) => {
      Ta.emit(Wa.ENGRAM_REQUEST_REVISION, {
        title: t,
        description: n,
        content: r,
        onConfirm: (o) => i(o),
        onCancel: () => a(new Error("User cancelled revision"))
      });
    });
  }
}
const wD = new SV();
var Jn = /* @__PURE__ */ ((e) => (e[e.DEBUG = 0] = "DEBUG", e[e.INFO = 1] = "INFO", e[e.SUCCESS = 2] = "SUCCESS", e[e.WARN = 3] = "WARN", e[e.ERROR = 4] = "ERROR", e))(Jn || {});
const mx = {
  0: { label: "DEBUG", icon: "", color: "#6c757d" },
  1: { label: "INFO", icon: "", color: "#17a2b8" },
  2: { label: "OK", icon: "", color: "#28a745" },
  3: { label: "WARN", icon: "", color: "#ffc107" },
  4: { label: "ERROR", icon: "", color: "#dc3545" }
}, _D = {
  maxEntries: 5e3,
  minLevel: 0
  /* DEBUG */
}, SD = new q5();
let Mu = [], T0 = { ..._D }, bA = !1;
function CV(e) {
  return new Date(e).toTimeString().slice(0, 8);
}
function zp(e, t, n, r) {
  if (e < T0.minLevel) return;
  const i = {
    id: Dp(),
    timestamp: Date.now(),
    level: e,
    module: t,
    message: n,
    data: r
  };
  Mu.push(i), Mu.length > T0.maxEntries && (Mu = Mu.slice(-T0.maxEntries)), SD.next(i);
}
function EV() {
  $5.subscribe((e) => {
    const n = {
      INGESTION_START: Jn.INFO,
      INGESTION_COMPLETE: Jn.SUCCESS,
      ENTITY_CREATED: Jn.INFO,
      MEMORY_STORED: Jn.SUCCESS,
      RETRIEVAL_START: Jn.DEBUG,
      RETRIEVAL_COMPLETE: Jn.SUCCESS,
      CHAT_CHANGED: Jn.INFO,
      MESSAGE_RECEIVED: Jn.DEBUG
    }[e.type] ?? Jn.DEBUG;
    zp(n, "EventBus", `${e.type}`, e.payload);
  });
}
const pe = {
  /**
   *  Logger
   * 
   */
  init(e) {
    Mu = [], e && (T0 = { ...T0, ...e }), bA || (EV(), bA = !0), pe.info("System", "Logger ");
  },
  /**
   * DEBUG 
   * @param module  LogModule 
   */
  debug(e, t, n) {
    zp(Jn.DEBUG, e, t, n);
  },
  /**
   * INFO 
   * @param module  LogModule 
   */
  info(e, t, n) {
    zp(Jn.INFO, e, t, n);
  },
  /**
   * SUCCESS 
   * @param module  LogModule 
   */
  success(e, t, n) {
    zp(Jn.SUCCESS, e, t, n);
  },
  /**
   * WARN 
   * @param module  LogModule 
   */
  warn(e, t, n) {
    zp(Jn.WARN, e, t, n);
  },
  /**
   * ERROR 
   * @param module  LogModule 
   */
  error(e, t, n) {
    zp(Jn.ERROR, e, t, n);
  },
  /**
   * 
   */
  getLogs() {
    return [...Mu];
  },
  /**
   * 
   */
  subscribe(e) {
    const t = SD.subscribe(e);
    return () => t.unsubscribe();
  },
  /**
   * 
   */
  clear() {
    Mu = [], pe.info("Logger", "");
  },
  /**
   *  Markdown 
   */
  exportToMarkdown() {
    const e = /* @__PURE__ */ new Date();
    e.toISOString().slice(0, 10), e.toTimeString().slice(0, 8).replace(/:/g, "");
    const t = {
      [Jn.DEBUG]: "DEBUG",
      [Jn.INFO]: "INFO",
      [Jn.SUCCESS]: "SUCCESS",
      [Jn.WARN]: "WARN",
      [Jn.ERROR]: "ERROR"
    };
    let n = `# Engram Debug Log

`;
    n += `- ****: ${e.toLocaleString("zh-CN")}
`, n += `- ****: 0.1.0
`, n += `- ****: ${Mu.length}

`, n += `---

`, n += `## 

`, n += "```\n";
    for (const r of Mu) {
      const i = CV(r.timestamp), a = t[r.level].padEnd(7), o = r.module.padEnd(16);
      if (n += `[${i}] [${o}] ${a} ${r.message}
`, r.data !== void 0) {
        const u = JSON.stringify(r.data, null, 2).split(`
`).map((c) => `    ${c}`).join(`
`);
        n += `${u}
`;
      }
    }
    return n += "```\n", n;
  },
  /**
   * 
   */
  getExportFilename() {
    const e = /* @__PURE__ */ new Date(), t = e.toISOString().slice(0, 10), n = e.toTimeString().slice(0, 8).replace(/:/g, "");
    return `engram_log_${t}_${n}.md`;
  }
}, wA = 100;
class kV {
  constructor() {
    yt(this, "entries", []);
    yt(this, "listeners", /* @__PURE__ */ new Set());
  }
  /**
   * 
   */
  logSend(t) {
    const n = `log_${Date.now()}_${Math.random().toString(36).slice(2, 8)}`, r = {
      id: n,
      timestamp: Date.now(),
      type: t.type,
      direction: "sent",
      systemPrompt: t.systemPrompt,
      userPrompt: t.userPrompt,
      tokensSent: t.tokensSent,
      model: t.model,
      character: t.character,
      floorRange: t.floorRange,
      status: "pending"
    };
    return this.entries.unshift(r), this.trimEntries(), this.notifyListeners(), n;
  }
  /**
   * 
   */
  logReceive(t, n) {
    const r = this.entries.find((o) => o.id === t);
    if (!r) return;
    const i = {
      id: `${t}_recv`,
      timestamp: Date.now(),
      type: r.type,
      direction: "received",
      response: n.response,
      tokensReceived: n.tokensReceived,
      status: n.status,
      error: n.error,
      duration: n.duration,
      model: r.model,
      character: r.character,
      floorRange: r.floorRange
    };
    r.status = n.status, r.duration = n.duration;
    const a = this.entries.findIndex((o) => o.id === t);
    a >= 0 ? this.entries.splice(a, 0, i) : this.entries.unshift(i), this.trimEntries(), this.notifyListeners();
  }
  /**
   * 
   */
  async logCall(t, n) {
    const r = this.logSend(t), i = Date.now();
    try {
      const a = await n();
      return this.logReceive(r, {
        response: typeof a == "string" ? a : JSON.stringify(a),
        status: "success",
        duration: Date.now() - i
      }), a;
    } catch (a) {
      throw this.logReceive(r, {
        status: "error",
        error: a instanceof Error ? a.message : String(a),
        duration: Date.now() - i
      }), a;
    }
  }
  /**
   * 
   */
  getAll() {
    return [...this.entries];
  }
  /**
   * +
   */
  getPaired() {
    const t = [], n = this.entries.filter((r) => r.direction === "sent");
    for (const r of n) {
      const i = this.entries.find(
        (a) => a.id === `${r.id}_recv` && a.direction === "received"
      );
      t.push({ sent: r, received: i });
    }
    return t;
  }
  /**
   * 
   */
  clear() {
    this.entries = [], this.notifyListeners();
  }
  /**
   * 
   */
  subscribe(t) {
    return this.listeners.add(t), () => this.listeners.delete(t);
  }
  /**
   * 
   */
  getCount() {
    return this.entries.filter((t) => t.direction === "sent").length;
  }
  /**
   * 
   */
  trimEntries() {
    this.entries.length > wA * 2 && (this.entries = this.entries.slice(0, wA * 2));
  }
  /**
   * 
   */
  notifyListeners() {
    for (const t of this.listeners)
      t();
  }
}
const Xs = new kV();
var qe = /* @__PURE__ */ ((e) => (e.SYSTEM = "System", e.EVENTS = "System/Events", e.MEMORY_SUMMARY = "Memory/Summary", e.MEMORY_ENTITY = "Memory/Entity", e.MEMORY_TRIM = "Memory/Trim", e.RAG_EMBED = "RAG/Embed", e.RAG_RETRIEVE = "RAG/Retrieve", e.RAG_RERANK = "RAG/Rerank", e.RAG_INJECT = "RAG/Inject", e.RAG_CACHE = "RAG/Cache", e.PREPROCESS = "Preprocess", e.BATCH = "Batch", e.DATA_SYNC = "Data/Sync", e.DATA_CLEANUP = "Data/Cleanup", e.DATA_DB = "Data/DB", e.TAVERN = "Tavern", e.LLM = "LLM", e))(qe || {});
const CD = Object.values(qe), F5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ALL_MODULES: CD,
  DEFAULT_LOGGER_CONFIG: _D,
  LogLevel: Jn,
  LogLevelConfig: mx,
  LogModule: qe,
  Logger: pe,
  ModelLogger: Xs
}, Symbol.toStringTag, { value: "Module" })), U0 = [
  { value: "summary", label: "", description: " JSON " },
  { value: "trim", label: "/", description: "" },
  { value: "preprocessing", label: "", description: "Query //" },
  { value: "entity_extraction", label: "", description: "" }
], ED = {
  enabled: !0,
  decayFactor: 0.15,
  maxStickRounds: 3
};
class TV {
  constructor() {
    /** : eventId -> StickyCacheEntry */
    yt(this, "cache", /* @__PURE__ */ new Map());
    /**  */
    yt(this, "currentRound", 0);
  }
  /**
   * 
   */
  nextRound() {
    this.currentRound++, pe.debug(qe.RAG_CACHE, ` ${this.currentRound} `);
  }
  /**
   * 
   */
  getCurrentRound() {
    return this.currentRound;
  }
  /**
   * 
   */
  markRecalled(t) {
    const n = this.cache.get(t);
    n && n.lastRound === this.currentRound - 1 ? this.cache.set(t, {
      lastRound: this.currentRound,
      consecutiveCount: n.consecutiveCount + 1
    }) : this.cache.set(t, {
      lastRound: this.currentRound,
      consecutiveCount: 1
    });
  }
  /**
   * 
   */
  markRecalledBatch(t) {
    t.forEach((n) => this.markRecalled(n));
  }
  /**
   * 
   *
   * @param eventId  ID
   * @param config 
   * @returns  [0, 1]0 = 1 = 
   */
  getStickyPenalty(t, n) {
    if (!n.enabled) return 0;
    const r = this.cache.get(t);
    return !r || this.currentRound - r.lastRound > n.maxStickRounds ? 0 : Math.min(1, r.consecutiveCount * n.decayFactor);
  }
  /**
   * 
   */
  isSticky(t, n) {
    return this.getStickyPenalty(t, n) > 0;
  }
  /**
   * 
   *
   * @param maxAge 
   */
  cleanup(t = 10) {
    let n = 0;
    for (const [r, i] of this.cache)
      this.currentRound - i.lastRound > t && (this.cache.delete(r), n++);
    n > 0 && pe.debug(qe.RAG_CACHE, ` ${n} `);
  }
  /**
   * 
   */
  clear() {
    this.cache.clear(), this.currentRound = 0, pe.debug(qe.RAG_CACHE, "");
  }
  /**
   * 
   */
  getStats() {
    return {
      size: this.cache.size,
      currentRound: this.currentRound
    };
  }
  /**
   * /
   */
  getEventInfo(t) {
    return this.cache.get(t);
  }
}
const kp = new TV();
function _A(e) {
  const t = {
    code: "code",
    p: "p",
    ...e.components
  };
  return h.jsxs(t.p, {
    children: ['export default "<system_configuration>\\n  <role_definition>\\n    : \\n    : """"""\\n    \\n    :\\n      : \\n      : \\n      : \\n      : \\n    \\n    :\\n      - \\n      -  YAML \\n      - \\n      - \\n  </role_definition>\\n\\n  <formatting_protocol>\\n    :  JSON \\n    :\\n      - summary: //\\n      - meta:  (role, location, event, logic, causality)\\n      - significance_score: 0.0-1.0 \\n  </formatting_protocol>\\n\\n  <logic_protocol>\\n    :\\n      : ""\\n      : """"\\n    \\n    :\\n      : \\n      : \\n        : "102344"\\n        : "1""3"""\\n      : \\n        :  HH:MM (14:30)\\n        :  \\n        :   \\n\\n     (Token):\\n      : \\n      : \\n       ():\\n        1: {{user}}\\n        2: {{user}}\\n        3: {{user}}...\\n       ():\\n        1: [ | {{user}}, , ] {{user}} ( | 0.7)\\n\\n     ():\\n      -: "/"\\n        : {{user}}\\n        : {{user}}\\n      : ""\\n        : {{user}}...\\n        : {{user}}\\n      : \\n        : {{user}}{{user}}...\\n        : {{user}}\\n      : """"\\n        : {{user}}\\n        : {{user}}\\n\\n     ():\\n      _ (Foundation):\\n        : 0.1 - 0.4\\n        : >60%\\n        : """" 0.3-0.4 ()\\n      _ (Propulsion):\\n        : 0.5 - 0.7\\n        :  <30%\\n        : \\n      _ (Keystone):\\n        : 0.8 - 0.9\\n        :  <10%\\n        : \\n        : \\n      _ (Turning Point):\\n        : 1.0\\n        : "" 1%\\n        : \\n  </logic_protocol>\\n\\n  <output_template>\\n    ', "\\n    ", "\\n      \\n        - : ${}\\n        - : ${}\\n      \\n      \\n        - : ${}\\n        - : ${}\\n      \\n      \\n        - : ${}\\n        - : ${}\\n      \\n      \\n        - : ${}\\n        - : ${}\\n    ", "\\n\\n    ", h.jsx(t.code, {
      children: 'json\\n    {\\n      \\"events\\": [\\n        {\\n          \\"summary\\": \\"//\\",\\n          \\"meta\\": {\\n            \\"time_anchor\\": \\" 102344 \\",\\n            \\"role\\": [\\"\\"],\\n            \\"location\\": \\"\\",\\n            \\"event\\": \\"\\",\\n            \\"logic\\": [\\"\\"],\\n            \\"causality\\": \\"Start|Chain|End\\"\\n          },\\n          \\"significance_score\\": 0.7\\n        }\\n      ]\\n    }\\n    '
    }), '\\n  </output_template>\\n  \\n  <example_demonstration>\\n    :\\n      "ABBA\\n      () AB""A""\\n      () A""A"""\\n\\n    AI:\\n      ', "\\n        \\n          - : //\\n          - : \\n        \\n        \\n          - 1: A (//) -> \\n          - 2: B (//) -> \\n          - 3:  +  -> \\n          - 4:  +  -> \\n      ", "\\n\\n      ", h.jsx(t.code, {
      children: 'json\\n      {\\n        \\"events\\": [\\n          {\\n            \\"summary\\": \\"ABBA\\",\\n            \\"meta\\": {\\n              \\"time_anchor\\": \\"102344 \\",\\n              \\"role\\": [\\"A\\", \\"B\\"],\\n              \\"location\\": \\"\\",\\n              \\"event\\": \\"\\",\\n              \\"logic\\": [\\"\\", \\"\\", \\"\\"],\\n              \\"causality\\": \\"Start\\"\\n            },\\n            \\"significance_score\\": 0.8\\n          },\\n          {\\n            \\"summary\\": \\"ABA\\",\\n            \\"meta\\": {\\n              \\"role\\": [\\"A\\", \\"B\\", \\"\\"],\\n              \\"location\\": \\"\\",\\n              \\"event\\": \\"\\",\\n              \\"logic\\": [\\"\\", \\"\\", \\"\\"],\\n              \\"causality\\": \\"Chain\\"\\n            },\\n            \\"significance_score\\": 0.8\\n          },\\n          {\\n            \\"summary\\": \\"A\\",\\n            \\"meta\\": {\\n              \\"role\\": [\\"A\\", \\"\\"],\\n              \\"location\\": \\"\\",\\n              \\"event\\": \\"\\",\\n              \\"logic\\": [\\"\\", \\"\\", \\"\\"],\\n              \\"causality\\": \\"Start\\"\\n            },\\n            \\"significance_score\\": 0.6\\n          }\\n        ]\\n      }\\n      '
    }), '\\n  </example_demonstration>\\n</system_configuration>\\n"']
  });
}
function AV(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(_A, {
      ...e
    })
  }) : _A(e);
}
function SA(e) {
  const t = {
    code: "code",
    p: "p",
    ...e.components
  };
  return h.jsxs(t.p, {
    children: ['export default "<system_configuration>\\n  <role_definition>\\n    : \\n    : "" Token \\n    \\n    :\\n      : \\n      : \\n      : \\n      : \\n    \\n    :\\n      - \\n      - \\n      - \\n      - \\n  </role_definition>\\n\\n  <compression_protocol>\\n    _: \\n      : \\n      :\\n        - P0 (): //\\n        - P1 (): /\\n        - P2 (): \\n    \\n    _:\\n      : \\n      :   \\n    \\n    _:\\n      : \\n      :\\n        : "A " + "A "  "A " ()\\n        : "A "\\n  </compression_protocol>\\n\\n  <merge_strategy>\\n    _:\\n      : \\n      :\\n        :\\n          1. [3 | ] A  ( | 0.2)\\n          2. [5 | ] A  ( | 0.2)\\n          3. [7 | ] A  ( | 0.5)\\n        :\\n          1. [3-7 | ] A  ( | 0.5)\\n    \\n    _:\\n      : \\n      : \\n    \\n    _:\\n      : \\n      :\\n        : "A " + "A " + "A "\\n        : "A "\\n      : ""\\n  </merge_strategy>\\n\\n  <output_format>\\n    ', "\\n      \\n        -  P0 ()  P1 () \\n        - \\n      \\n      \\n        - _\\n        - _\\n      \\n      \\n        - \\n        - \\n    ", "\\n\\n    :  JSON  text_summary \\n    :\\n      - summary: \\n      - meta:  (role, location, event, logic, causality)\\n      - significance_score: 0.0-1.0  ()\\n    \\n    :  30-50%\\n  </output_format>\\n\\n  <example_demonstration>\\n     ():\\n      ", h.jsx(t.code, {
      children: "\\n      (102344 ) AB\\n      Role: [A, B]\\n      Loc: \\n      Event: \\n      Logic: []\\n      Causality: Start\\n      Significance: 0.8\\n\\n      (102344 ) BA\\n      Role: [A, B]\\n      Loc: \\n      Event: \\n      Logic: []\\n      Causality: Chain\\n      Significance: 0.6\\n\\n      (1023-1026 ) AB\\n      Role: [A, ]\\n      Loc: \\n      Event: \\n      Logic: []\\n      Causality: Chain\\n      Significance: 0.4\\n\\n      (1026 ) A\\n      Role: [A, B]\\n      Loc: B\\n      Event: \\n      Logic: []\\n      Causality: End\\n      Significance: 0.8\\n\\n      (410 ) A\\n      Role: [A]\\n      Loc: \\n      Event: \\n      Logic: []\\n      Causality: Start\\n      Significance: 0.3\\n\\n      (410 14:30) A\\n      Role: [A, ]\\n      Loc: \\n      Event: \\n      Logic: [, ]\\n      Causality: Chain\\n      Significance: 0.7\\n      "
    }), "\\n\\n     (JSON ):\\n      ", h.jsx(t.code, {
      children: 'json\\n      {\\n        \\"events\\": [\\n          {\\n            \\"summary\\": \\"ABBA\\",\\n            \\"meta\\": {\\n              \\"time_anchor\\": \\"102344\\",\\n              \\"role\\": [\\"A\\", \\"B\\"],\\n              \\"location\\": \\"\\",\\n              \\"event\\": \\"\\",\\n              \\"logic\\": [\\"\\", \\"\\", \\"\\"],\\n              \\"causality\\": \\"Start\\"\\n            },\\n            \\"significance_score\\": 0.8\\n          },\\n          {\\n            \\"summary\\": \\"AB\\",\\n            \\"meta\\": {\\n              \\"time_anchor\\": \\"1023-1026\\",\\n              \\"role\\": [\\"A\\", \\"B\\", \\"\\"],\\n              \\"location\\": \\"\\",\\n              \\"event\\": \\"\\",\\n              \\"logic\\": [\\"\\", \\"\\"],\\n              \\"causality\\": \\"Chain\\"\\n            },\\n            \\"significance_score\\": 0.8\\n          },\\n          {\\n            \\"summary\\": \\"A\\",\\n            \\"meta\\": {\\n              \\"time_anchor\\": \\"410\\",\\n              \\"role\\": [\\"A\\", \\"\\"],\\n              \\"location\\": \\"\\",\\n              \\"event\\": \\"\\",\\n              \\"logic\\": [\\"\\", \\"\\", \\"\\"],\\n              \\"causality\\": \\"Start\\"\\n            },\\n            \\"significance_score\\": 0.7\\n          }\\n        ]\\n      }\\n      '
    }), '\\n  </example_demonstration>\\n</system_configuration>\\n\\n"']
  });
}
function kD(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(SA, {
      ...e
    })
  }) : SA(e);
}
function CA(e) {
  const t = {
    em: "em",
    p: "p",
    ...e.components
  };
  return h.jsxs(t.p, {
    children: ['export default "<system_configuration>\\n  <role_definition>\\n    : \\n    : RAG\\n    :\\n      1. : /\\n      2. : \\n      3. : \\n  </role_definition>\\n\\n  <output_template>\\n    ', "\\n      \\n        - ${}\\n\\n      \\n        - ${}\\n        - ${}\\n\\n      \\n        - ${rerank_instruction}\\n\\n       YAML \\n        - ${}\\n    ", "\\n\\n    ", '\\n    rerank_instruction: "${}"\\n    retrieval_queries:\\n      - "${1}"\\n      - "${2}"\\n      - "${3}"\\n    ', "\\n  </output_template>\\n\\n  ", "\\n    ", "\\n      Input: ", h.jsx(t.em, {
      children: ""
    }), "\\n      Output:\\n      ", '\\n        :\\n          : ""\\n          : , , , 032-E, \\n          : \\n\\n        : \\n      ', "\\n\\n      ", `\\n      rerank_instruction: "''''"\\n      retrieval_queries:\\n        - "   "\\n        - "  032-E  "\\n        - "    "\\n        - "   "\\n        - "   "\\n        - "    "\\n      `, "\\n    ", "\\n    ", "\\n      Input: \\n      Output:\\n      ", '\\n        :\\n          : "" Alice  Bob""\\n          : Alice, Bob, , , \\n          : \\n\\n        : \\n      ', "\\n\\n      ", `\\n      rerank_instruction: "'AliceBob'''"\\n      retrieval_queries:\\n        - "Alice Bob   "\\n        - "Alice  Bob  "\\n        - "   "\\n      `, "\\n    ", "\\n  ", '\\n</system_configuration>\\n"']
  });
}
function jV(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(CA, {
      ...e
    })
  }) : CA(e);
}
function EA(e) {
  const t = {
    a: "a",
    p: "p",
    ...e.components
  };
  return h.jsxs(t.p, {
    children: ['export default "<system_configuration>\\n  <role_definition>\\n    : \\n    : """"\\n    \\n    :\\n      : \\n      : \\n      : \\n      : /\\n\\n    :\\n      :\\n        : {{roll:1d100}} // \\n        : {{roll:1d10}} // \\n    \\n    :\\n      : \\n      : \\n      : \\n    \\n    :\\n      - \\n      - \\n      - \\n      - ', "\\n      - \\n  </role_definition>\\n\\n  <behavior_guidelines>\\n    :\\n      : \\n      :  -> ", " -> ", '\\n      : """"""\\n  </behavior_guidelines>\\n\\n  <core_rules>\\n    A_:\\n      A1_: NPC\\n      A2_: \\n      A3_: ()()()\\n      A4_: (++)100\\n      A5_: 10%\\n    \\n    B_ ():\\n      B0_: []\\n      B1_:\\n        - 1:  ()\\n        - 2-15:  ()\\n        - 16-81:  ()\\n        - 82-84:  ()\\n        - 85-99:  ()\\n        - 100:  ()\\n      B2_: 1-2\\n\\n    C_:\\n      C1_: >=100[]', h.jsx(t.a, {
      href: "%E7%8B%AC%E5%A4%84/%E5%AE%89%E5%85%A8",
      children: ""
    }), "\\n      C2_: (/)\\n  </core_rules>\\n\\n  <output_template>\\n    ", "\\n      \\n        : ${}\\n        : ${}\\n        : ${ vs }\\n\\n      \\n        - ${}\\n        - ${}\\n\\n      \\n        - : ${}\\n        - : ${} vs ${} -> ${}\\n        - : ${}\\n\\n      \\n        - : ${}\\n        - : (${}), (${}), (${})\\n        - : ${}\\n\\n      \\n        - : ${} (${//...})\\n        - : ${}\\n\\n      \\n        - : ${}\\n        - : ${}\\n        - : ${}\\n        - : ${}\\n      \\n      \\n        - : ${}\\n        - : ${rerank}\\n    ", "\\n\\n    ", '\\n    rerank_instruction: "${}"\\n    retrieval_queries:\\n      - "${1}"\\n      - "${2}"\\n      - "${3}"\\n    ', "\\n\\n    ", "\\n    ", "\\n      ", "\\n        ", "${}", "\\n        <plot_summary>${}</plot_summary>\\n        <key_points>\\n          ", "${(): }", "\\n          ", "${: }", "\\n          ", "${: }", "\\n          ", "${: +}", "\\n          ", "${: }", "\\n          ", "${: }", "\\n        </key_points>\\n      ", "\\n\\n      :\\n        : ${}\\n        : ${}/100 ${}\\n        : ${}/100\\n        : ${}/100\\n        : ${} \\n        \\n        : ${}\\n        : ${}\\n        : ${}\\n        : ${NPC -  ()}\\n        : ${NPC -  ()}\\n\\n        :\\n          // : [] [: X] \\n          1: ${1}\\n          2: ${2}\\n    ", "\\n    ", '\\n  </output_template>\\n</system_configuration>\\n"']
  });
}
function NV(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(EA, {
      ...e
    })
  }) : EA(e);
}
function kA(e) {
  const t = {
    code: "code",
    p: "p",
    strong: "strong",
    ...e.components
  };
  return h.jsxs(t.p, {
    children: ['export default "# \\n\\n\\n\\n---\\n\\n## \\n\\n', h.jsx(t.strong, {
      children: ""
    }), "\\n{{context}}\\n\\n", h.jsx(t.strong, {
      children: ""
    }), "\\n{{chatHistory}}\\n\\n---\\n\\n## \\n\\n\\n1. ", h.jsx(t.strong, {
      children: ""
    }), "\\n2. ", h.jsx(t.strong, {
      children: ""
    }), "\\n3. ", h.jsx(t.strong, {
      children: ""
    }), "\\n4. ", h.jsx(t.strong, {
      children: ""
    }), "\\n\\n---\\n\\n## \\n\\n", h.jsx(t.code, {
      children: "xml\\n<think>\\n\\n  - ...\\n\\n  - ...\\n\\n  - ...\\n\\n  - ...\\n</think>\\n\\n<output>\\n[]\\n</output>\\n"
    }), "\\n\\n---\\n\\n## \\n\\n", h.jsx(t.strong, {
      children: ""
    }), "\\n\\n", h.jsx(t.strong, {
      children: ""
    }), "\\n", h.jsx(t.code, {
      children: "xml\\n<think>\\n\\n  - \\n\\n  - \\n\\n  - \\n</think>\\n\\n<output>\\n\\n</output>\\n"
    }), '\\n\\n---\\n\\n## \\n\\n{{userInput}}\\n"']
  });
}
function RV(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(kA, {
      ...e
    })
  }) : kA(e);
}
function TA(e) {
  const t = {
    code: "code",
    p: "p",
    ...e.components
  };
  return h.jsxs(t.p, {
    children: ['export default "<system_configuration>\\n  <role_definition>\\n    : \\n    : \\n    \\n    :\\n      : \\n      : \\n    \\n    :\\n      - \\n      - \\n      -  existingEntities\\n      - \\n  </role_definition>\\n\\n  <entity_types>\\n    char: / ()\\n    loc:  ()\\n    item:  ()\\n    concept: \\n    unknown: \\n  </entity_types>\\n\\n  <logic_protocol>\\n     (Naming Specificity):\\n      : \\n      :\\n        : "" ()\\n        : "" ()\\n        : "" ()\\n        : "" ()\\n        : "" ()\\n        : "" ()\\n\\n     (Significance Filter):\\n      : \\n      :\\n        - ()\\n        - (3)\\n        - ()\\n      :\\n        : "" ()\\n        : ""\\n\\n     (Granularity Control):\\n      : \\n      :\\n        : \\n        : "" (Entity)\\n        : """" ()\\n\\n     (State vs Identity):\\n      : \\n      :\\n        : "" (Entity Name)\\n        : "" (Entity Name), / ""\\n\\n     (Deduplication):\\n      : \\n      :\\n        -  existingEntities\\n        - """" entity  name  "" ""  aliases\\n  </logic_protocol>\\n\\n  <update_strategy>\\n    : RFC 6902 (JSON Patch)\\n    :\\n      -  existingEntities  patches \\n      -  (op: replace/add/remove)\\n      - path  JSON Pointer ( /profile/status)\\n    :\\n      : { name: "A", profile: { status: "" } }\\n      : A \\n      :\\n        patches:\\n          - name: "A"\\n            ops:\\n              - { op: "replace", path: "/profile/status", value: "" }\\n  </update_strategy>\\n\\n  <profile_structure>\\n    profile  JSON  \\n    \\n     ():\\n      - relations: EntityRelation[]  \\n        : target (), type ()\\n        : description ()\\n    \\n     ():\\n      - identity: string  \\n      - tags: string[]  \\n      \\n     (char) :\\n      - personality: string  \\n      - skills: string[]  /\\n      - affiliation: string  \\n      \\n     (loc) :\\n      - atmosphere: string  \\n      - features: string[]  \\n      \\n     (item) :\\n      - owner: string  \\n      - abilities: string[]  \\n  </profile_structure>\\n\\n  <output_template>\\n    ', '\\n      \\n        -  existingEntities \\n        - /\\n      \\n      \\n        - : ("" -> "A")\\n        - : ()\\n        - : \\n      \\n      (JSON Patch)\\n        -  existingEntities \\n        -  replace/add/remove \\n        - \\n      \\n      \\n        - \\n        - \\n    ', "\\n\\n    ", h.jsx(t.code, {
      children: 'json\\n    {\\n      \\"entities\\": [\\n        {\\n          \\"name\\": \\"\\",\\n          \\"type\\": \\"char|loc|item|concept\\",\\n          \\"aliases\\": [\\"1\\", \\"2\\"],\\n          \\"profile\\": {\\n            \\"identity\\": \\"\\",\\n            \\"relations\\": [\\n              { \\"target\\": \\"\\", \\"type\\": \\"\\", \\"description\\": \\"\\" }\\n            ],\\n            \\"\\": \\"\\"\\n          }\\n        }\\n      ]\\n    }\\n    '
    }), '\\n  </output_template>\\n\\n  <example_demonstration>\\n    :\\n      chatHistory: "ABAB"\\n      existingEntities: []\\n\\n    :\\n      ', h.jsx(t.code, {
      children: 'json\\n                { \\"target\\": \\"A\\", \\"type\\": \\"\\", \\"description\\": \\"A\\" }\\n              ]\\n            }\\n          },\\n          {\\n            \\"name\\": \\"\\",\\n            \\"type\\": \\"loc\\",\\n            \\"aliases\\": [],\\n            \\"profile\\": {\\n              \\"atmosphere\\": \\"\\",\\n              \\"features\\": [\\"\\", \\"\\"]\\n            }\\n          }\\n        ]\\n      }\\n      '
    }), '\\n  </example_demonstration>\\n</system_configuration>\\n"']
  });
}
function TD(e = {}) {
  const { wrapper: t } = e.components || {};
  return t ? h.jsx(t, {
    ...e,
    children: h.jsx(TA, {
      ...e
    })
  }) : TA(e);
}
const AD = {
  temperature: 0.7,
  topP: 0.95,
  maxTokens: 2048,
  frequencyPenalty: 0,
  presencePenalty: 0
}, jD = {
  maxChatHistory: 10
}, ND = {
  source: "transformers"
}, RD = {
  enabled: !1,
  url: "",
  apiKey: "",
  model: "",
  topN: 5,
  hybridAlpha: 0.5
}, Jx = {
  enabled: !1,
  // 
  workingLimit: 10,
  // 
  shortTermLimit: 35,
  //  (35  3-4 )
  reinforceFactor: 0.2,
  // 
  decayRate: 0.08,
  //  ()
  evictionThreshold: 0.25,
  //  ()
  contextSwitchThreshold: 0.4
}, eb = {
  enabled: !0,
  useEmbedding: !0,
  useRerank: !1,
  usePreprocessing: !1,
  useBruteForce: !1,
  embedding: {
    topK: 50,
    // Embedding  50 
    minScoreThreshold: 0.35
    //  ()
  },
  sticky: { ...ED, enabled: !1 },
  // 
  brainRecall: Jx
}, mE = {
  enabled: !1,
  trigger: "with_trim",
  concurrency: 5,
  keepRecentCount: 3
}, MD = {
  enabled: !1,
  trigger: "floor",
  floorInterval: 15,
  // V0.9.5: 10-20 
  keepRecentCount: 5
}, OD = {
  enableNativeRegex: !0,
  enableEngramRegex: !0
}, DD = [
  {
    id: "custom_user_profile",
    name: "",
    content: "",
    // 
    enabled: !0,
    createdAt: Date.now()
  }
], zD = {
  enabled: !0,
  includeGlobal: !0,
  disabledWorldbooks: [],
  enableEJS: !0
  // V0.8  EJS
};
function U5(e = "") {
  const t = Date.now();
  return {
    id: `preset_${t}`,
    name: e,
    source: "tavern",
    parameters: { ...AD },
    context: { ...jD },
    isDefault: !0,
    createdAt: t,
    updatedAt: t
  };
}
function Il(e, t, n = {}) {
  const r = Date.now();
  return {
    id: n.id || `template_${r}_${Math.random().toString(36).slice(2, 8)}`,
    name: e,
    category: t,
    enabled: n.enabled ?? !1,
    isBuiltIn: n.isBuiltIn ?? !1,
    boundPresetId: n.boundPresetId ?? null,
    systemPrompt: n.systemPrompt ?? "",
    userPromptTemplate: n.userPromptTemplate ?? "",
    createdAt: r,
    updatedAt: r
  };
}
function tb() {
  return [
    Il("", "summary", {
      id: "builtin_summary",
      enabled: !0,
      isBuiltIn: !0,
      systemPrompt: AV,
      userPromptTemplate: `****:
{{context}}

****:
{{userPersona}}

****:
{{worldbookContext}}

****:
{{engramSummaries}}

---


{{chatHistory}}

 JSON `
    }),
    Il("", "trim", {
      id: "builtin_trim",
      enabled: !0,
      isBuiltIn: !0,
      systemPrompt: kD,
      userPromptTemplate: `{{worldbookContext}}




{{engramSummaries}}

`
    }),
    Il("Query ", "preprocessing", {
      id: "builtin_query_enhance",
      enabled: !0,
      isBuiltIn: !0,
      systemPrompt: jV,
      userPromptTemplate: `****:
{{context}}

****:
{{userPersona}}

****:
{{worldbookContext}}

****:
{{engramSummaries}}

****:
{{chatHistory}}

****:
{{userInput}}

---
`
    }),
    Il("", "preprocessing", {
      id: "builtin_plot_director",
      enabled: !1,
      // 
      isBuiltIn: !0,
      systemPrompt: NV,
      userPromptTemplate: `****:
{{context}}

****:
{{userPersona}}

****:
{{worldbookContext}}

****:
{{engramSummaries}}

****:
{{chatHistory}}

****:
{{userInput}}

---
`
    }),
    Il("", "preprocessing", {
      id: "builtin_description_enhance",
      enabled: !1,
      // 
      isBuiltIn: !0,
      systemPrompt: RV,
      userPromptTemplate: `****:
{{context}}

****:
{{userPersona}}

****:
{{engramSummaries}}

****:
{{chatHistory}}

****:
{{userInput}}

---
`
    }),
    // V0.9: 
    Il("", "entity_extraction", {
      id: "builtin_entity_extraction",
      enabled: !1,
      // 
      isBuiltIn: !0,
      systemPrompt: TD,
      userPromptTemplate: `

{{engramGraph}}

---
 JSON `
    })
  ];
}
function V5(e) {
  return tb().find((t) => t.id === e);
}
function nb(e) {
  return tb().find((t) => t.category === e) || null;
}
function nm() {
  return {
    llmPresets: [U5()],
    selectedPresetId: null,
    vectorConfig: { ...ND },
    rerankConfig: { ...RD },
    promptTemplates: tb(),
    worldbookConfig: { ...zD },
    regexConfig: { ...OD },
    // V0.8
    recallConfig: { ...eb },
    // V0.8.5
    customMacros: [...DD]
    // V0.9.2
  };
}
const MV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DEFAULT_BRAIN_RECALL_CONFIG: Jx,
  DEFAULT_CONTEXT_SETTINGS: jD,
  DEFAULT_CUSTOM_MACROS: DD,
  DEFAULT_EMBEDDING_CONFIG: mE,
  DEFAULT_ENTITY_CONFIG: MD,
  DEFAULT_RECALL_CONFIG: eb,
  DEFAULT_REGEX_CONFIG: OD,
  DEFAULT_RERANK_CONFIG: RD,
  DEFAULT_SAMPLING_PARAMETERS: AD,
  DEFAULT_VECTOR_CONFIG: ND,
  DEFAULT_WORLDBOOK_CONFIG: zD,
  PROMPT_CATEGORIES: U0,
  createDefaultLLMPreset: U5,
  createPromptTemplate: Il,
  getBuiltInPromptTemplates: tb,
  getBuiltInTemplateByCategory: nb,
  getBuiltInTemplateById: V5,
  getDefaultAPISettings: nm
}, Symbol.toStringTag, { value: "Module" })), Ad = Object.freeze({
  theme: "odysseia",
  presets: {},
  templates: {},
  promptTemplates: [],
  hasSeenWelcome: !1,
  lastReadVersion: "0.0.0",
  summarizerConfig: {},
  trimmerConfig: {},
  regexRules: [],
  apiSettings: null,
  preprocessingConfig: null,
  // V0.8: 
  linkedDeletion: {
    enabled: !0,
    deleteWorldbook: !0,
    deleteChatWorldbook: !1,
    // 
    deleteIndexedDB: !1,
    showConfirmation: !0
  },
  glassSettings: {
    enabled: !0,
    opacity: 0.3,
    blur: 10
  },
  syncConfig: {
    enabled: !1,
    // Beta
    autoSync: !0
    // 
  }
});
class tt {
  /**
   *  SillyTavern context
   */
  static getContext() {
    var t, n;
    return (n = (t = window.SillyTavern) == null ? void 0 : t.getContext) == null ? void 0 : n.call(t);
  }
  /**
   * 
   * 
   */
  static getSettings() {
    const t = this.getContext();
    return t != null && t.extensionSettings ? (t.extensionSettings[this.EXTENSION_NAME] || (t.extensionSettings[this.EXTENSION_NAME] = { ...Ad }, pe.debug("SettingsManager", "Initialized engram settings with defaults"), this.save()), t.extensionSettings[this.EXTENSION_NAME]) : (pe.warn("SettingsManager", "SillyTavern context.extensionSettings not available"), { ...Ad });
  }
  static getExtensionSettings() {
    return this.getSettings();
  }
  /**
   * 
   * 
   */
  static initSettings() {
    const t = this.getContext();
    if (!(t != null && t.extensionSettings)) {
      pe.warn("SettingsManager", "Cannot init settings: context not available");
      return;
    }
    let n = !1;
    t.extensionSettings[this.EXTENSION_NAME] || (t.extensionSettings[this.EXTENSION_NAME] = { ...Ad }, n = !0, pe.info("SettingsManager", "Created engram settings"));
    const r = t.extensionSettings[this.EXTENSION_NAME];
    for (const i of Object.keys(Ad))
      i in r || (r[i] = Ad[i], n = !0, pe.debug("SettingsManager", `Added missing field: ${i}`));
    n && this.save();
  }
  /**
   * Get a specific setting value
   */
  static get(t) {
    const r = this.getExtensionSettings()[t];
    return r !== void 0 ? r : Ad[t];
  }
  /**
   * Save a specific setting value
   *  context.extensionSettings 
   */
  static set(t, n) {
    const r = this.getContext();
    if (!(r != null && r.extensionSettings)) {
      pe.warn("SettingsManager", "Cannot set: context.extensionSettings not available");
      return;
    }
    r.extensionSettings[this.EXTENSION_NAME] || (r.extensionSettings[this.EXTENSION_NAME] = { ...Ad }), r.extensionSettings[this.EXTENSION_NAME][t] = n, pe.debug("SettingsManager", `Set ${String(t)} = ${JSON.stringify(n)}`), this.save();
  }
  /**
   * 
   */
  static save() {
    const t = this.getContext();
    t != null && t.saveSettingsDebounced ? (t.saveSettingsDebounced(), pe.debug("SettingsManager", "Saved via context.saveSettingsDebounced")) : pe.warn("SettingsManager", "saveSettingsDebounced not available");
  }
  /**
   * Load settings from SillyTavern global state
   * 
   */
  static loadSettings() {
    return this.getExtensionSettings();
  }
  /**
   * 
   * @param category 
   * @returns  null
   */
  static getEnabledPromptTemplate(t) {
    const n = this.get("apiSettings");
    return ((n == null ? void 0 : n.promptTemplates) || []).find((i) => i.category === t && i.enabled) || null;
  }
  /**
   *  ID 
   * @param id  ID
   * @returns  null
   */
  static getPromptTemplateById(t) {
    const n = this.get("apiSettings"), r = (n == null ? void 0 : n.promptTemplates) || [], i = r.find((o) => o.id === t);
    if (i) return i;
    const a = V5(t);
    return a || r.find((o) => o.category === t && o.enabled) || null;
  }
  /**
   * 
   * @returns summarizerConfig 
   */
  static getSummarizerSettings() {
    return this.get("summarizerConfig") || {};
  }
  /**
   * 
   * @param config 
   */
  static setSummarizerSettings(t) {
    const n = this.getSummarizerSettings();
    this.set("summarizerConfig", { ...n, ...t });
  }
  /**
   * 
   * @returns RegexRule[] 
   */
  static getRegexRules() {
    return this.get("regexRules") || [];
  }
  /**
   * 
   * @param rules 
   */
  static setRegexRules(t) {
    this.set("regexRules", t);
  }
}
yt(tt, "EXTENSION_NAME", "engram");
const H5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  SettingsManager: tt
}, Symbol.toStringTag, { value: "Module" }));
class ef {
  /**
   * 
   */
  static init() {
    this.injectStyles();
    let n = tt.loadSettings().theme;
    n || (n = localStorage.getItem(this.STORAGE_KEY), n && tt.set("theme", n));
    const r = Y1[n] ? n : "claudeDark";
    this.setTheme(r), pe.info("ThemeManager", `: ${r}`);
  }
  /**
   * 
   */
  static setTheme(t) {
    Y1[t] || (pe.warn("ThemeManager", `: ${t},  claudeDark`), t = "claudeDark"), this.currentTheme = t, tt.set("theme", t), localStorage.setItem(this.STORAGE_KEY, t), this.applyThemeVariables(t);
  }
  /**
   * 
   */
  static getTheme() {
    return this.currentTheme;
  }
  /**
   *  (dist/style.css)
   */
  static injectStyles() {
    const t = "engram-styles";
    if (document.getElementById(t)) return;
    const n = document.createElement("link");
    n.id = t, n.rel = "stylesheet", n.type = "text/css", n.href = `scripts/extensions/Engram_project/dist/style.css?v=${Date.now()}`, document.head.appendChild(n);
  }
  /**
   *  CSS 
   */
  static applyThemeVariables(t) {
    var _, E;
    const n = Y1[t];
    if (!n) return;
    const r = document.documentElement, i = (k, T) => {
      r.style.setProperty(k, T);
    }, a = tt.getSettings(), u = ((_ = a.glassSettings) == null ? void 0 : _.enabled) ?? !0 ? ((E = a.glassSettings) == null ? void 0 : E.opacity) ?? 1 : 1, f = !(t === "glass") && u < 1, p = Math.round((1 - u) * 100), g = [
      "background",
      "card",
      "popover",
      "sidebar",
      "secondary",
      "muted",
      "input",
      "border",
      "sidebarBorder"
    ];
    Object.entries(n.colors).forEach(([k, T]) => {
      let R = `--${k.replace(/([A-Z])/g, "-$1").toLowerCase()}`;
      R = R.replace(/(\d+)/, "-$1");
      let N = T;
      if (f && g.includes(k)) {
        const P = k.toLowerCase().includes("border") ? Math.round(p * 0.1) : p;
        N = `color-mix(in srgb, ${T}, transparent ${P}%)`;
      }
      i(R, N);
    }), Object.entries(n.variables).forEach(([k, T]) => {
      i(`--${k}`, T);
    }), t !== "paperLight" ? r.classList.add("dark") : r.classList.remove("dark");
    const b = tt.getSettings().glassSettings;
    b && b.enabled ? (i("--glass-opacity", b.opacity.toString()), i("--glass-blur", `${b.blur}px`), b.blur > 0 ? i("--glass-backdrop-filter", `blur(${b.blur}px)`) : i("--glass-backdrop-filter", "none")) : (i("--glass-opacity", "1"), i("--glass-blur", "0px"), i("--glass-backdrop-filter", "none"));
  }
}
yt(ef, "STORAGE_KEY", "engram-theme"), yt(ef, "currentTheme", "claudeDark");
const X1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ThemeManager: ef
}, Symbol.toStringTag, { value: "Module" })), OV = dD((e) => ({
  theme: ef.getTheme(),
  isDarkMode: ef.getTheme() !== "paperLight",
  setTheme: (t) => {
    ef.setTheme(t), e({
      theme: t,
      isDarkMode: t !== "paperLight"
    });
  }
}));
class G5 {
  async search(t) {
    const n = t.toLowerCase().trim(), r = px.map((o) => ({
      id: `nav-${o.id}`,
      type: "navigation",
      // Explicitly cast to 'navigation' | 'action' | 'setting' | 'log'
      title: o.label,
      description: `Navigate to ${o.label}`,
      // Auto-generated description
      icon: o.icon,
      action: (u) => u(o.path),
      score: 10
    })).filter(
      (o) => o.title.toLowerCase().includes(n) || o.id.includes(n)
    ), i = RU.filter(
      (o) => {
        var u;
        return o.label.toLowerCase().includes(n) || ((u = o.description) == null ? void 0 : u.toLowerCase().includes(n)) || o.keywords.some((c) => c.toLowerCase().includes(n));
      }
    ).map((o) => ({
      id: o.id,
      type: "command",
      title: o.label,
      description: o.description,
      icon: o.icon,
      action: o.action,
      score: 9
    })), a = this.getThemeCommands().filter(
      (o) => {
        var u;
        return o.title.toLowerCase().includes(n) || ((u = o.keywords) == null ? void 0 : u.some((c) => c.toLowerCase().includes(n)));
      }
    );
    return [...r, ...i, ...a];
  }
  getThemeCommands() {
    const t = OV.getState().setTheme;
    return [
      {
        id: "theme-paper-light",
        type: "command",
        title: ": Paper Light (Twitter)",
        description: "",
        icon: yU,
        action: () => t("paperLight"),
        keywords: ["theme", "light", "white", "twitter", "paper", ""],
        score: 5
      },
      {
        id: "theme-twitter-dark",
        type: "command",
        title: ": Twitter Dark",
        description: "",
        icon: JT,
        action: () => t("twitterDark"),
        keywords: ["theme", "dark", "black", "twitter", "blue", ""],
        score: 5
      },
      {
        id: "theme-claude-dark",
        type: "command",
        title: ": Claude Dark",
        description: "",
        icon: JT,
        action: () => t("claudeDark"),
        keywords: ["theme", "dark", "claude", "paper", ""],
        score: 5
      },
      {
        id: "theme-catppuccin",
        type: "command",
        title: ": Catppuccin Mocha",
        description: "",
        icon: eA,
        action: () => t("catppuccin"),
        keywords: ["theme", "dark", "catppuccin", "mocha", ""],
        score: 5
      },
      {
        id: "theme-discord",
        type: "command",
        title: ": Discord Dark",
        description: " Discord ",
        icon: eA,
        action: () => t("discord"),
        keywords: ["theme", "dark", "discord", "game", ""],
        score: 5
      }
    ];
  }
}
class DV {
  constructor() {
    yt(this, "adapters", []);
  }
  registerAdapter(t) {
    this.adapters.push(t);
  }
  async search(t) {
    return t.trim() ? (await Promise.all(this.adapters.map((r) => r.search(t)))).flat().sort((r, i) => (i.score || 0) - (r.score || 0)) : [];
  }
}
const Qc = new DV();
Qc.registerAdapter(new G5());
Qc.registerAdapter(new NU());
class zV {
  async search(t) {
    const n = t.toLowerCase().trim();
    return this.getAllSettings().filter(
      (r) => {
        var i;
        return r.title.toLowerCase().includes(n) || ((i = r.keywords) == null ? void 0 : i.some((a) => a.toLowerCase().includes(n)));
      }
    );
  }
  getAllSettings() {
    return [
      // API Settings
      {
        id: "setting-api-key",
        type: "setting",
        title: " API Key",
        description: " LLM ",
        icon: Yx,
        action: (t) => t("/api"),
        // Default to API page
        keywords: ["api", "key", "token", "credential"],
        score: 8
      },
      {
        id: "setting-model",
        type: "setting",
        title: " (Model)",
        description: " LLM ",
        icon: D5,
        action: (t) => t("/api"),
        keywords: ["model", "llm", "change", "switch"],
        score: 8
      },
      // Parameters
      {
        id: "setting-temperature",
        type: "setting",
        title: " (Temperature)",
        description: "",
        icon: tA,
        action: (t) => t("/api"),
        keywords: ["temp", "temperature", "random", "creativity"],
        score: 7
      },
      {
        id: "setting-top-p",
        type: "setting",
        title: " Top P",
        description: "",
        icon: tA,
        action: (t) => t("/api"),
        keywords: ["top", "p", "nucleus", "sampling"],
        score: 7
      },
      // Vector/RAG
      {
        id: "setting-vector",
        type: "setting",
        title: " (Vectorization)",
        description: "",
        icon: py,
        action: (t) => t("/processing"),
        // processing:vectorization ideally
        keywords: ["vector", "embedding", "db", "store"],
        score: 7
      },
      {
        id: "setting-recall",
        type: "setting",
        title: " (Recall)",
        description: " RAG ",
        icon: $F,
        action: (t) => t("/processing"),
        // processing:recall
        keywords: ["recall", "rag", "retrieval", "search"],
        score: 7
      }
    ];
  }
}
class PV {
  async search(t) {
    const n = t.toLowerCase().trim();
    return ["log", "debug", "error", "warn", "info", "dev"].some((i) => i.includes(n)) || n.includes("log") ? this.getLogActions() : [];
  }
  getLogActions() {
    return [
      {
        id: "log-view-all",
        type: "log",
        title: " (DevLog)",
        description: "",
        icon: Zx,
        action: (t) => t("devlog"),
        score: 9
      },
      {
        id: "log-errors",
        type: "log",
        title: " (Errors)",
        description: "",
        icon: $$,
        action: (t) => t("devlog"),
        // In future: nav('/dev?filter=error')
        score: 8
      }
    ];
  }
}
var Q1 = { exports: {} }, IV = Q1.exports, AA;
function LV() {
  return AA || (AA = 1, (function(e, t) {
    (function(n, r) {
      e.exports = r();
    })(IV, function() {
      var n = function(w, A) {
        return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(M, I) {
          M.__proto__ = I;
        } || function(M, I) {
          for (var $ in I) Object.prototype.hasOwnProperty.call(I, $) && (M[$] = I[$]);
        })(w, A);
      }, r = function() {
        return (r = Object.assign || function(w) {
          for (var A, M = 1, I = arguments.length; M < I; M++) for (var $ in A = arguments[M]) Object.prototype.hasOwnProperty.call(A, $) && (w[$] = A[$]);
          return w;
        }).apply(this, arguments);
      };
      function i(w, A, M) {
        for (var I, $ = 0, Z = A.length; $ < Z; $++) !I && $ in A || ((I = I || Array.prototype.slice.call(A, 0, $))[$] = A[$]);
        return w.concat(I || Array.prototype.slice.call(A));
      }
      var a = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : Ou, o = Object.keys, u = Array.isArray;
      function c(w, A) {
        return typeof A != "object" || o(A).forEach(function(M) {
          w[M] = A[M];
        }), w;
      }
      typeof Promise > "u" || a.Promise || (a.Promise = Promise);
      var f = Object.getPrototypeOf, p = {}.hasOwnProperty;
      function g(w, A) {
        return p.call(w, A);
      }
      function x(w, A) {
        typeof A == "function" && (A = A(f(w))), (typeof Reflect > "u" ? o : Reflect.ownKeys)(A).forEach(function(M) {
          _(w, M, A[M]);
        });
      }
      var b = Object.defineProperty;
      function _(w, A, M, I) {
        b(w, A, c(M && g(M, "get") && typeof M.get == "function" ? { get: M.get, set: M.set, configurable: !0 } : { value: M, configurable: !0, writable: !0 }, I));
      }
      function E(w) {
        return { from: function(A) {
          return w.prototype = Object.create(A.prototype), _(w.prototype, "constructor", w), { extend: x.bind(null, w.prototype) };
        } };
      }
      var k = Object.getOwnPropertyDescriptor, T = [].slice;
      function R(w, A, M) {
        return T.call(w, A, M);
      }
      function N(w, A) {
        return A(w);
      }
      function O(w) {
        if (!w) throw new Error("Assertion Failed");
      }
      function P(w) {
        a.setImmediate ? setImmediate(w) : setTimeout(w, 0);
      }
      function z(w, A) {
        if (typeof A == "string" && g(w, A)) return w[A];
        if (!A) return w;
        if (typeof A != "string") {
          for (var M = [], I = 0, $ = A.length; I < $; ++I) {
            var Z = z(w, A[I]);
            M.push(Z);
          }
          return M;
        }
        var ue = A.indexOf(".");
        if (ue !== -1) {
          var U = w[A.substr(0, ue)];
          return U == null ? void 0 : z(U, A.substr(ue + 1));
        }
      }
      function q(w, A, M) {
        if (w && A !== void 0 && !("isFrozen" in Object && Object.isFrozen(w))) if (typeof A != "string" && "length" in A) {
          O(typeof M != "string" && "length" in M);
          for (var I = 0, $ = A.length; I < $; ++I) q(w, A[I], M[I]);
        } else {
          var Z, ue, U = A.indexOf(".");
          U !== -1 ? (Z = A.substr(0, U), (ue = A.substr(U + 1)) === "" ? M === void 0 ? u(w) && !isNaN(parseInt(Z)) ? w.splice(Z, 1) : delete w[Z] : w[Z] = M : q(U = !(U = w[Z]) || !g(w, Z) ? w[Z] = {} : U, ue, M)) : M === void 0 ? u(w) && !isNaN(parseInt(A)) ? w.splice(A, 1) : delete w[A] : w[A] = M;
        }
      }
      function G(w) {
        var A, M = {};
        for (A in w) g(w, A) && (M[A] = w[A]);
        return M;
      }
      var Y = [].concat;
      function W(w) {
        return Y.apply([], w);
      }
      var Le = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8, 16, 32, 64].map(function(w) {
        return ["Int", "Uint", "Float"].map(function(A) {
          return A + w + "Array";
        });
      }))).filter(function(w) {
        return a[w];
      }), F = new Set(Le.map(function(w) {
        return a[w];
      })), X = null;
      function me(w) {
        return X = /* @__PURE__ */ new WeakMap(), w = (function A(M) {
          if (!M || typeof M != "object") return M;
          var I = X.get(M);
          if (I) return I;
          if (u(M)) {
            I = [], X.set(M, I);
            for (var $ = 0, Z = M.length; $ < Z; ++$) I.push(A(M[$]));
          } else if (F.has(M.constructor)) I = M;
          else {
            var ue, U = f(M);
            for (ue in I = U === Object.prototype ? {} : Object.create(U), X.set(M, I), M) g(M, ue) && (I[ue] = A(M[ue]));
          }
          return I;
        })(w), X = null, w;
      }
      var J = {}.toString;
      function le(w) {
        return J.call(w).slice(8, -1);
      }
      var Q = typeof Symbol < "u" ? Symbol.iterator : "@@iterator", oe = typeof Q == "symbol" ? function(w) {
        var A;
        return w != null && (A = w[Q]) && A.apply(w);
      } : function() {
        return null;
      };
      function fe(w, A) {
        return A = w.indexOf(A), 0 <= A && w.splice(A, 1), 0 <= A;
      }
      var ce = {};
      function K(w) {
        var A, M, I, $;
        if (arguments.length === 1) {
          if (u(w)) return w.slice();
          if (this === ce && typeof w == "string") return [w];
          if ($ = oe(w)) {
            for (M = []; !(I = $.next()).done; ) M.push(I.value);
            return M;
          }
          if (w == null) return [w];
          if (typeof (A = w.length) != "number") return [w];
          for (M = new Array(A); A--; ) M[A] = w[A];
          return M;
        }
        for (A = arguments.length, M = new Array(A); A--; ) M[A] = arguments[A];
        return M;
      }
      var re = typeof Symbol < "u" ? function(w) {
        return w[Symbol.toStringTag] === "AsyncFunction";
      } : function() {
        return !1;
      }, $n = ["Unknown", "Constraint", "Data", "TransactionInactive", "ReadOnly", "Version", "NotFound", "InvalidState", "InvalidAccess", "Abort", "Timeout", "QuotaExceeded", "Syntax", "DataClone"], ei = ["Modify", "Bulk", "OpenFailed", "VersionChange", "Schema", "Upgrade", "InvalidTable", "MissingAPI", "NoSuchDatabase", "InvalidArgument", "SubTransaction", "Unsupported", "Internal", "DatabaseClosed", "PrematureCommit", "ForeignAwait"].concat($n), de = { VersionChanged: "Database version changed by other database connection", DatabaseClosed: "Database has been closed", Abort: "Transaction aborted", TransactionInactive: "Transaction has already completed or failed", MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb" };
      function V(w, A) {
        this.name = w, this.message = A;
      }
      function ae(w, A) {
        return w + ". Errors: " + Object.keys(A).map(function(M) {
          return A[M].toString();
        }).filter(function(M, I, $) {
          return $.indexOf(M) === I;
        }).join(`
`);
      }
      function ge(w, A, M, I) {
        this.failures = A, this.failedKeys = I, this.successCount = M, this.message = ae(w, A);
      }
      function we(w, A) {
        this.name = "BulkError", this.failures = Object.keys(A).map(function(M) {
          return A[M];
        }), this.failuresByPos = A, this.message = ae(w, this.failures);
      }
      E(V).from(Error).extend({ toString: function() {
        return this.name + ": " + this.message;
      } }), E(ge).from(V), E(we).from(V);
      var Re = ei.reduce(function(w, A) {
        return w[A] = A + "Error", w;
      }, {}), Ie = V, Me = ei.reduce(function(w, A) {
        var M = A + "Error";
        function I($, Z) {
          this.name = M, $ ? typeof $ == "string" ? (this.message = "".concat($).concat(Z ? `
 ` + Z : ""), this.inner = Z || null) : typeof $ == "object" && (this.message = "".concat($.name, " ").concat($.message), this.inner = $) : (this.message = de[A] || M, this.inner = null);
        }
        return E(I).from(Ie), w[A] = I, w;
      }, {});
      Me.Syntax = SyntaxError, Me.Type = TypeError, Me.Range = RangeError;
      var dt = $n.reduce(function(w, A) {
        return w[A + "Error"] = Me[A], w;
      }, {}), ut = ei.reduce(function(w, A) {
        return ["Syntax", "Type", "Range"].indexOf(A) === -1 && (w[A + "Error"] = Me[A]), w;
      }, {});
      function Je() {
      }
      function ct(w) {
        return w;
      }
      function mt(w, A) {
        return w == null || w === ct ? A : function(M) {
          return A(w(M));
        };
      }
      function ft(w, A) {
        return function() {
          w.apply(this, arguments), A.apply(this, arguments);
        };
      }
      function At(w, A) {
        return w === Je ? A : function() {
          var M = w.apply(this, arguments);
          M !== void 0 && (arguments[0] = M);
          var I = this.onsuccess, $ = this.onerror;
          this.onsuccess = null, this.onerror = null;
          var Z = A.apply(this, arguments);
          return I && (this.onsuccess = this.onsuccess ? ft(I, this.onsuccess) : I), $ && (this.onerror = this.onerror ? ft($, this.onerror) : $), Z !== void 0 ? Z : M;
        };
      }
      function xt(w, A) {
        return w === Je ? A : function() {
          w.apply(this, arguments);
          var M = this.onsuccess, I = this.onerror;
          this.onsuccess = this.onerror = null, A.apply(this, arguments), M && (this.onsuccess = this.onsuccess ? ft(M, this.onsuccess) : M), I && (this.onerror = this.onerror ? ft(I, this.onerror) : I);
        };
      }
      function qn(w, A) {
        return w === Je ? A : function(M) {
          var I = w.apply(this, arguments);
          c(M, I);
          var $ = this.onsuccess, Z = this.onerror;
          return this.onsuccess = null, this.onerror = null, M = A.apply(this, arguments), $ && (this.onsuccess = this.onsuccess ? ft($, this.onsuccess) : $), Z && (this.onerror = this.onerror ? ft(Z, this.onerror) : Z), I === void 0 ? M === void 0 ? void 0 : M : c(I, M);
        };
      }
      function An(w, A) {
        return w === Je ? A : function() {
          return A.apply(this, arguments) !== !1 && w.apply(this, arguments);
        };
      }
      function jn(w, A) {
        return w === Je ? A : function() {
          var M = w.apply(this, arguments);
          if (M && typeof M.then == "function") {
            for (var I = this, $ = arguments.length, Z = new Array($); $--; ) Z[$] = arguments[$];
            return M.then(function() {
              return A.apply(I, Z);
            });
          }
          return A.apply(this, arguments);
        };
      }
      ut.ModifyError = ge, ut.DexieError = V, ut.BulkError = we;
      var Yt = typeof location < "u" && /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
      function Nn(w) {
        Yt = w;
      }
      var rn = {}, bn = 100, Le = typeof Promise > "u" ? [] : (function() {
        var w = Promise.resolve();
        if (typeof crypto > "u" || !crypto.subtle) return [w, f(w), w];
        var A = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
        return [A, f(A), w];
      })(), $n = Le[0], ei = Le[1], Le = Le[2], ei = ei && ei.then, We = $n && $n.constructor, at = !!Le, Ct = function(w, A) {
        Br.push([w, A]), In && (queueMicrotask(Xl), In = !1);
      }, Rt = !0, In = !0, Rn = [], bt = [], $t = ct, Ln = { id: "global", global: !0, ref: 0, unhandleds: [], onunhandled: Je, pgp: !1, env: {}, finalize: Je }, nt = Ln, Br = [], mr = 0, Yo = [];
      function lt(w) {
        if (typeof this != "object") throw new TypeError("Promises must be constructed via new");
        this._listeners = [], this._lib = !1;
        var A = this._PSD = nt;
        if (typeof w != "function") {
          if (w !== rn) throw new TypeError("Not a function");
          return this._state = arguments[1], this._value = arguments[2], void (this._state === !1 && Qi(this, this._value));
        }
        this._state = null, this._value = null, ++A.ref, (function M(I, $) {
          try {
            $(function(Z) {
              if (I._state === null) {
                if (Z === I) throw new TypeError("A promise cannot be resolved with itself.");
                var ue = I._lib && _s();
                Z && typeof Z.then == "function" ? M(I, function(U, ie) {
                  Z instanceof lt ? Z._then(U, ie) : Z.then(U, ie);
                }) : (I._state = !0, I._value = Z, io(I)), ue && Mi();
              }
            }, Qi.bind(null, I));
          } catch (Z) {
            Qi(I, Z);
          }
        })(this, w);
      }
      var ia = { get: function() {
        var w = nt, A = ao;
        function M(I, $) {
          var Z = this, ue = !w.global && (w !== nt || A !== ao), U = ue && !qr(), ie = new lt(function(ne, ye) {
            sa(Z, new Na(Wo(I, w, ue, U), Wo($, w, ue, U), ne, ye, w));
          });
          return this._consoleTask && (ie._consoleTask = this._consoleTask), ie;
        }
        return M.prototype = rn, M;
      }, set: function(w) {
        _(this, "then", w && w.prototype === rn ? ia : { get: function() {
          return w;
        }, set: ia.set });
      } };
      function Na(w, A, M, I, $) {
        this.onFulfilled = typeof w == "function" ? w : null, this.onRejected = typeof A == "function" ? A : null, this.resolve = M, this.reject = I, this.psd = $;
      }
      function Qi(w, A) {
        var M, I;
        bt.push(A), w._state === null && (M = w._lib && _s(), A = $t(A), w._state = !1, w._value = A, I = w, Rn.some(function($) {
          return $._value === I._value;
        }) || Rn.push(I), io(w), M && Mi());
      }
      function io(w) {
        var A = w._listeners;
        w._listeners = [];
        for (var M = 0, I = A.length; M < I; ++M) sa(w, A[M]);
        var $ = w._PSD;
        --$.ref || $.finalize(), mr === 0 && (++mr, Ct(function() {
          --mr == 0 && Ql();
        }, []));
      }
      function sa(w, A) {
        if (w._state !== null) {
          var M = w._state ? A.onFulfilled : A.onRejected;
          if (M === null) return (w._state ? A.resolve : A.reject)(w._value);
          ++A.psd.ref, ++mr, Ct(mf, [M, w, A]);
        } else w._listeners.push(A);
      }
      function mf(w, A, M) {
        try {
          var I, $ = A._value;
          !A._state && bt.length && (bt = []), I = Yt && A._consoleTask ? A._consoleTask.run(function() {
            return w($);
          }) : w($), A._state || bt.indexOf($) !== -1 || (function(Z) {
            for (var ue = Rn.length; ue; ) if (Rn[--ue]._value === Z._value) return Rn.splice(ue, 1);
          })(A), M.resolve(I);
        } catch (Z) {
          M.reject(Z);
        } finally {
          --mr == 0 && Ql(), --M.psd.ref || M.psd.finalize();
        }
      }
      function Xl() {
        bi(Ln, function() {
          _s() && Mi();
        });
      }
      function _s() {
        var w = Rt;
        return In = Rt = !1, w;
      }
      function Mi() {
        var w, A, M;
        do
          for (; 0 < Br.length; ) for (w = Br, Br = [], M = w.length, A = 0; A < M; ++A) {
            var I = w[A];
            I[0].apply(null, I[1]);
          }
        while (0 < Br.length);
        In = Rt = !0;
      }
      function Ql() {
        var w = Rn;
        Rn = [], w.forEach(function(I) {
          I._PSD.onunhandled.call(null, I._value, I);
        });
        for (var A = Yo.slice(0), M = A.length; M; ) A[--M]();
      }
      function aa(w) {
        return new lt(rn, !1, w);
      }
      function wn(w, A) {
        var M = nt;
        return function() {
          var I = _s(), $ = nt;
          try {
            return Es(M, !0), w.apply(this, arguments);
          } catch (Z) {
            A && A(Z);
          } finally {
            Es($, !1), I && Mi();
          }
        };
      }
      x(lt.prototype, { then: ia, _then: function(w, A) {
        sa(this, new Na(null, null, w, A, nt));
      }, catch: function(w) {
        if (arguments.length === 1) return this.then(null, w);
        var A = w, M = arguments[1];
        return typeof A == "function" ? this.then(null, function(I) {
          return (I instanceof A ? M : aa)(I);
        }) : this.then(null, function(I) {
          return (I && I.name === A ? M : aa)(I);
        });
      }, finally: function(w) {
        return this.then(function(A) {
          return lt.resolve(w()).then(function() {
            return A;
          });
        }, function(A) {
          return lt.resolve(w()).then(function() {
            return aa(A);
          });
        });
      }, timeout: function(w, A) {
        var M = this;
        return w < 1 / 0 ? new lt(function(I, $) {
          var Z = setTimeout(function() {
            return $(new Me.Timeout(A));
          }, w);
          M.then(I, $).finally(clearTimeout.bind(null, Z));
        }) : this;
      } }), typeof Symbol < "u" && Symbol.toStringTag && _(lt.prototype, Symbol.toStringTag, "Dexie.Promise"), Ln.env = eu(), x(lt, { all: function() {
        var w = K.apply(null, arguments).map(Cs);
        return new lt(function(A, M) {
          w.length === 0 && A([]);
          var I = w.length;
          w.forEach(function($, Z) {
            return lt.resolve($).then(function(ue) {
              w[Z] = ue, --I || A(w);
            }, M);
          });
        });
      }, resolve: function(w) {
        return w instanceof lt ? w : w && typeof w.then == "function" ? new lt(function(A, M) {
          w.then(A, M);
        }) : new lt(rn, !0, w);
      }, reject: aa, race: function() {
        var w = K.apply(null, arguments).map(Cs);
        return new lt(function(A, M) {
          w.map(function(I) {
            return lt.resolve(I).then(A, M);
          });
        });
      }, PSD: { get: function() {
        return nt;
      }, set: function(w) {
        return nt = w;
      } }, totalEchoes: { get: function() {
        return ao;
      } }, newPSD: Cn, usePSD: bi, scheduler: { get: function() {
        return Ct;
      }, set: function(w) {
        Ct = w;
      } }, rejectionMapper: { get: function() {
        return $t;
      }, set: function(w) {
        $t = w;
      } }, follow: function(w, A) {
        return new lt(function(M, I) {
          return Cn(function($, Z) {
            var ue = nt;
            ue.unhandleds = [], ue.onunhandled = Z, ue.finalize = ft(function() {
              var U, ie = this;
              U = function() {
                ie.unhandleds.length === 0 ? $() : Z(ie.unhandleds[0]);
              }, Yo.push(function ne() {
                U(), Yo.splice(Yo.indexOf(ne), 1);
              }), ++mr, Ct(function() {
                --mr == 0 && Ql();
              }, []);
            }, ue.finalize), w();
          }, A, M, I);
        });
      } }), We && (We.allSettled && _(lt, "allSettled", function() {
        var w = K.apply(null, arguments).map(Cs);
        return new lt(function(A) {
          w.length === 0 && A([]);
          var M = w.length, I = new Array(M);
          w.forEach(function($, Z) {
            return lt.resolve($).then(function(ue) {
              return I[Z] = { status: "fulfilled", value: ue };
            }, function(ue) {
              return I[Z] = { status: "rejected", reason: ue };
            }).then(function() {
              return --M || A(I);
            });
          });
        });
      }), We.any && typeof AggregateError < "u" && _(lt, "any", function() {
        var w = K.apply(null, arguments).map(Cs);
        return new lt(function(A, M) {
          w.length === 0 && M(new AggregateError([]));
          var I = w.length, $ = new Array(I);
          w.forEach(function(Z, ue) {
            return lt.resolve(Z).then(function(U) {
              return A(U);
            }, function(U) {
              $[ue] = U, --I || M(new AggregateError($));
            });
          });
        });
      }), We.withResolvers && (lt.withResolvers = We.withResolvers));
      var Fn = { awaits: 0, echoes: 0, id: 0 }, Jl = 0, Ra = [], so = 0, ao = 0, Ss = 0;
      function Cn(w, A, M, I) {
        var $ = nt, Z = Object.create($);
        return Z.parent = $, Z.ref = 0, Z.global = !1, Z.id = ++Ss, Z.env = at ? { Promise: lt, PromiseProp: { value: lt, configurable: !0, writable: !0 }, all: lt.all, race: lt.race, allSettled: lt.allSettled, any: lt.any, resolve: lt.resolve, reject: lt.reject } : {}, A && c(Z, A), ++$.ref, Z.finalize = function() {
          --this.parent.ref || this.parent.finalize();
        }, I = bi(Z, w, M, I), Z.ref === 0 && Z.finalize(), I;
      }
      function er() {
        return Fn.id || (Fn.id = ++Jl), ++Fn.awaits, Fn.echoes += bn, Fn.id;
      }
      function qr() {
        return !!Fn.awaits && (--Fn.awaits == 0 && (Fn.id = 0), Fn.echoes = Fn.awaits * bn, !0);
      }
      function Cs(w) {
        return Fn.echoes && w && w.constructor === We ? (er(), w.then(function(A) {
          return qr(), A;
        }, function(A) {
          return qr(), cn(A);
        })) : w;
      }
      function Gu() {
        var w = Ra[Ra.length - 1];
        Ra.pop(), Es(w, !1);
      }
      function Es(w, A) {
        var M, I = nt;
        (A ? !Fn.echoes || so++ && w === nt : !so || --so && w === nt) || queueMicrotask(A ? (function($) {
          ++ao, Fn.echoes && --Fn.echoes != 0 || (Fn.echoes = Fn.awaits = Fn.id = 0), Ra.push(nt), Es($, !0);
        }).bind(null, w) : Gu), w !== nt && (nt = w, I === Ln && (Ln.env = eu()), at && (M = Ln.env.Promise, A = w.env, (I.global || w.global) && (Object.defineProperty(a, "Promise", A.PromiseProp), M.all = A.all, M.race = A.race, M.resolve = A.resolve, M.reject = A.reject, A.allSettled && (M.allSettled = A.allSettled), A.any && (M.any = A.any))));
      }
      function eu() {
        var w = a.Promise;
        return at ? { Promise: w, PromiseProp: Object.getOwnPropertyDescriptor(a, "Promise"), all: w.all, race: w.race, allSettled: w.allSettled, any: w.any, resolve: w.resolve, reject: w.reject } : {};
      }
      function bi(w, A, M, I, $) {
        var Z = nt;
        try {
          return Es(w, !0), A(M, I, $);
        } finally {
          Es(Z, !1);
        }
      }
      function Wo(w, A, M, I) {
        return typeof w != "function" ? w : function() {
          var $ = nt;
          M && er(), Es(A, !0);
          try {
            return w.apply(this, arguments);
          } finally {
            Es($, !1), I && queueMicrotask(qr);
          }
        };
      }
      function ks(w) {
        Promise === We && Fn.echoes === 0 ? so === 0 ? w() : enqueueNativeMicroTask(w) : setTimeout(w, 0);
      }
      ("" + ei).indexOf("[native code]") === -1 && (er = qr = Je);
      var cn = lt.reject, di = "", gr = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.", tr = "String expected.", oa = [], oo = "__dbnames", Oi = "readonly", Ji = "readwrite";
      function Ts(w, A) {
        return w ? A ? function() {
          return w.apply(this, arguments) && A.apply(this, arguments);
        } : w : A;
      }
      var Zo = { type: 3, lower: -1 / 0, lowerOpen: !1, upper: [[]], upperOpen: !1 };
      function lo(w) {
        return typeof w != "string" || /\./.test(w) ? function(A) {
          return A;
        } : function(A) {
          return A[w] === void 0 && w in A && delete (A = me(A))[w], A;
        };
      }
      function Ku() {
        throw Me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.");
      }
      function Ft(w, A) {
        try {
          var M = Ma(w), I = Ma(A);
          if (M !== I) return M === "Array" ? 1 : I === "Array" ? -1 : M === "binary" ? 1 : I === "binary" ? -1 : M === "string" ? 1 : I === "string" ? -1 : M === "Date" ? 1 : I !== "Date" ? NaN : -1;
          switch (M) {
            case "number":
            case "Date":
            case "string":
              return A < w ? 1 : w < A ? -1 : 0;
            case "binary":
              return (function($, Z) {
                for (var ue = $.length, U = Z.length, ie = ue < U ? ue : U, ne = 0; ne < ie; ++ne) if ($[ne] !== Z[ne]) return $[ne] < Z[ne] ? -1 : 1;
                return ue === U ? 0 : ue < U ? -1 : 1;
              })(wi(w), wi(A));
            case "Array":
              return (function($, Z) {
                for (var ue = $.length, U = Z.length, ie = ue < U ? ue : U, ne = 0; ne < ie; ++ne) {
                  var ye = Ft($[ne], Z[ne]);
                  if (ye !== 0) return ye;
                }
                return ue === U ? 0 : ue < U ? -1 : 1;
              })(w, A);
          }
        } catch {
        }
        return NaN;
      }
      function Ma(w) {
        var A = typeof w;
        return A != "object" ? A : ArrayBuffer.isView(w) ? "binary" : (w = le(w), w === "ArrayBuffer" ? "binary" : w);
      }
      function wi(w) {
        return w instanceof Uint8Array ? w : ArrayBuffer.isView(w) ? new Uint8Array(w.buffer, w.byteOffset, w.byteLength) : new Uint8Array(w);
      }
      function Cr(w, A, M) {
        var I = w.schema.yProps;
        return I ? (A && 0 < M.numFailures && (A = A.filter(function($, Z) {
          return !M.failures[Z];
        })), Promise.all(I.map(function($) {
          return $ = $.updatesTable, A ? w.db.table($).where("k").anyOf(A).delete() : w.db.table($).clear();
        })).then(function() {
          return M;
        })) : M;
      }
      var As = (Yu.prototype.execute = function(w) {
        var A = this["@@propmod"];
        if (A.add !== void 0) {
          var M = A.add;
          if (u(M)) return i(i([], u(w) ? w : [], !0), M).sort();
          if (typeof M == "number") return (Number(w) || 0) + M;
          if (typeof M == "bigint") try {
            return BigInt(w) + M;
          } catch {
            return BigInt(0) + M;
          }
          throw new TypeError("Invalid term ".concat(M));
        }
        if (A.remove !== void 0) {
          var I = A.remove;
          if (u(I)) return u(w) ? w.filter(function($) {
            return !I.includes($);
          }).sort() : [];
          if (typeof I == "number") return Number(w) - I;
          if (typeof I == "bigint") try {
            return BigInt(w) - I;
          } catch {
            return BigInt(0) - I;
          }
          throw new TypeError("Invalid subtrahend ".concat(I));
        }
        return M = (M = A.replacePrefix) === null || M === void 0 ? void 0 : M[0], M && typeof w == "string" && w.startsWith(M) ? A.replacePrefix[1] + w.substring(M.length) : w;
      }, Yu);
      function Yu(w) {
        this["@@propmod"] = w;
      }
      function js(w, A) {
        for (var M = o(A), I = M.length, $ = !1, Z = 0; Z < I; ++Z) {
          var ue = M[Z], U = A[ue], ie = z(w, ue);
          U instanceof As ? (q(w, ue, U.execute(ie)), $ = !0) : ie !== U && (q(w, ue, U), $ = !0);
        }
        return $;
      }
      var Oa = (sn.prototype._trans = function(w, A, M) {
        var I = this._tx || nt.trans, $ = this.name, Z = Yt && typeof console < "u" && console.createTask && console.createTask("Dexie: ".concat(w === "readonly" ? "read" : "write", " ").concat(this.name));
        function ue(ne, ye, he) {
          if (!he.schema[$]) throw new Me.NotFound("Table " + $ + " not part of transaction");
          return A(he.idbtrans, he);
        }
        var U = _s();
        try {
          var ie = I && I.db._novip === this.db._novip ? I === nt.trans ? I._promise(w, ue, M) : Cn(function() {
            return I._promise(w, ue, M);
          }, { trans: I, transless: nt.transless || nt }) : (function ne(ye, he, Se, be) {
            if (ye.idbdb && (ye._state.openComplete || nt.letThrough || ye._vip)) {
              var _e = ye._createTransaction(he, Se, ye._dbSchema);
              try {
                _e.create(), ye._state.PR1398_maxLoop = 3;
              } catch (ke) {
                return ke.name === Re.InvalidState && ye.isOpen() && 0 < --ye._state.PR1398_maxLoop ? (console.warn("Dexie: Need to reopen db"), ye.close({ disableAutoOpen: !1 }), ye.open().then(function() {
                  return ne(ye, he, Se, be);
                })) : cn(ke);
              }
              return _e._promise(he, function(ke, Te) {
                return Cn(function() {
                  return nt.trans = _e, be(ke, Te, _e);
                });
              }).then(function(ke) {
                if (he === "readwrite") try {
                  _e.idbtrans.commit();
                } catch {
                }
                return he === "readonly" ? ke : _e._completion.then(function() {
                  return ke;
                });
              });
            }
            if (ye._state.openComplete) return cn(new Me.DatabaseClosed(ye._state.dbOpenError));
            if (!ye._state.isBeingOpened) {
              if (!ye._state.autoOpen) return cn(new Me.DatabaseClosed());
              ye.open().catch(Je);
            }
            return ye._state.dbReadyPromise.then(function() {
              return ne(ye, he, Se, be);
            });
          })(this.db, w, [this.name], ue);
          return Z && (ie._consoleTask = Z, ie = ie.catch(function(ne) {
            return console.trace(ne), cn(ne);
          })), ie;
        } finally {
          U && Mi();
        }
      }, sn.prototype.get = function(w, A) {
        var M = this;
        return w && w.constructor === Object ? this.where(w).first(A) : w == null ? cn(new Me.Type("Invalid argument to Table.get()")) : this._trans("readonly", function(I) {
          return M.core.get({ trans: I, key: w }).then(function($) {
            return M.hook.reading.fire($);
          });
        }).then(A);
      }, sn.prototype.where = function(w) {
        if (typeof w == "string") return new this.db.WhereClause(this, w);
        if (u(w)) return new this.db.WhereClause(this, "[".concat(w.join("+"), "]"));
        var A = o(w);
        if (A.length === 1) return this.where(A[0]).equals(w[A[0]]);
        var M = this.schema.indexes.concat(this.schema.primKey).filter(function(U) {
          if (U.compound && A.every(function(ne) {
            return 0 <= U.keyPath.indexOf(ne);
          })) {
            for (var ie = 0; ie < A.length; ++ie) if (A.indexOf(U.keyPath[ie]) === -1) return !1;
            return !0;
          }
          return !1;
        }).sort(function(U, ie) {
          return U.keyPath.length - ie.keyPath.length;
        })[0];
        if (M && this.db._maxKey !== di) {
          var Z = M.keyPath.slice(0, A.length);
          return this.where(Z).equals(Z.map(function(ie) {
            return w[ie];
          }));
        }
        !M && Yt && console.warn("The query ".concat(JSON.stringify(w), " on ").concat(this.name, " would benefit from a ") + "compound index [".concat(A.join("+"), "]"));
        var I = this.schema.idxByName;
        function $(U, ie) {
          return Ft(U, ie) === 0;
        }
        var ue = A.reduce(function(he, ie) {
          var ne = he[0], ye = he[1], he = I[ie], Se = w[ie];
          return [ne || he, ne || !he ? Ts(ye, he && he.multi ? function(be) {
            return be = z(be, ie), u(be) && be.some(function(_e) {
              return $(Se, _e);
            });
          } : function(be) {
            return $(Se, z(be, ie));
          }) : ye];
        }, [null, null]), Z = ue[0], ue = ue[1];
        return Z ? this.where(Z.name).equals(w[Z.keyPath]).filter(ue) : M ? this.filter(ue) : this.where(A).equals("");
      }, sn.prototype.filter = function(w) {
        return this.toCollection().and(w);
      }, sn.prototype.count = function(w) {
        return this.toCollection().count(w);
      }, sn.prototype.offset = function(w) {
        return this.toCollection().offset(w);
      }, sn.prototype.limit = function(w) {
        return this.toCollection().limit(w);
      }, sn.prototype.each = function(w) {
        return this.toCollection().each(w);
      }, sn.prototype.toArray = function(w) {
        return this.toCollection().toArray(w);
      }, sn.prototype.toCollection = function() {
        return new this.db.Collection(new this.db.WhereClause(this));
      }, sn.prototype.orderBy = function(w) {
        return new this.db.Collection(new this.db.WhereClause(this, u(w) ? "[".concat(w.join("+"), "]") : w));
      }, sn.prototype.reverse = function() {
        return this.toCollection().reverse();
      }, sn.prototype.mapToClass = function(w) {
        var A, M = this.db, I = this.name;
        function $() {
          return A !== null && A.apply(this, arguments) || this;
        }
        (this.schema.mappedClass = w).prototype instanceof Ku && ((function(ie, ne) {
          if (typeof ne != "function" && ne !== null) throw new TypeError("Class extends value " + String(ne) + " is not a constructor or null");
          function ye() {
            this.constructor = ie;
          }
          n(ie, ne), ie.prototype = ne === null ? Object.create(ne) : (ye.prototype = ne.prototype, new ye());
        })($, A = w), Object.defineProperty($.prototype, "db", { get: function() {
          return M;
        }, enumerable: !1, configurable: !0 }), $.prototype.table = function() {
          return I;
        }, w = $);
        for (var Z = /* @__PURE__ */ new Set(), ue = w.prototype; ue; ue = f(ue)) Object.getOwnPropertyNames(ue).forEach(function(ie) {
          return Z.add(ie);
        });
        function U(ie) {
          if (!ie) return ie;
          var ne, ye = Object.create(w.prototype);
          for (ne in ie) if (!Z.has(ne)) try {
            ye[ne] = ie[ne];
          } catch {
          }
          return ye;
        }
        return this.schema.readHook && this.hook.reading.unsubscribe(this.schema.readHook), this.schema.readHook = U, this.hook("reading", U), w;
      }, sn.prototype.defineClass = function() {
        return this.mapToClass(function(w) {
          c(this, w);
        });
      }, sn.prototype.add = function(w, A) {
        var M = this, I = this.schema.primKey, $ = I.auto, Z = I.keyPath, ue = w;
        return Z && $ && (ue = lo(Z)(w)), this._trans("readwrite", function(U) {
          return M.core.mutate({ trans: U, type: "add", keys: A != null ? [A] : null, values: [ue] });
        }).then(function(U) {
          return U.numFailures ? lt.reject(U.failures[0]) : U.lastResult;
        }).then(function(U) {
          if (Z) try {
            q(w, Z, U);
          } catch {
          }
          return U;
        });
      }, sn.prototype.upsert = function(w, A) {
        var M = this, I = this.schema.primKey.keyPath;
        return this._trans("readwrite", function($) {
          return M.core.get({ trans: $, key: w }).then(function(Z) {
            var ue = Z ?? {};
            return js(ue, A), I && q(ue, I, w), M.core.mutate({ trans: $, type: "put", values: [ue], keys: [w], upsert: !0, updates: { keys: [w], changeSpecs: [A] } }).then(function(U) {
              return U.numFailures ? lt.reject(U.failures[0]) : !!Z;
            });
          });
        });
      }, sn.prototype.update = function(w, A) {
        return typeof w != "object" || u(w) ? this.where(":id").equals(w).modify(A) : (w = z(w, this.schema.primKey.keyPath), w === void 0 ? cn(new Me.InvalidArgument("Given object does not contain its primary key")) : this.where(":id").equals(w).modify(A));
      }, sn.prototype.put = function(w, A) {
        var M = this, I = this.schema.primKey, $ = I.auto, Z = I.keyPath, ue = w;
        return Z && $ && (ue = lo(Z)(w)), this._trans("readwrite", function(U) {
          return M.core.mutate({ trans: U, type: "put", values: [ue], keys: A != null ? [A] : null });
        }).then(function(U) {
          return U.numFailures ? lt.reject(U.failures[0]) : U.lastResult;
        }).then(function(U) {
          if (Z) try {
            q(w, Z, U);
          } catch {
          }
          return U;
        });
      }, sn.prototype.delete = function(w) {
        var A = this;
        return this._trans("readwrite", function(M) {
          return A.core.mutate({ trans: M, type: "delete", keys: [w] }).then(function(I) {
            return Cr(A, [w], I);
          }).then(function(I) {
            return I.numFailures ? lt.reject(I.failures[0]) : void 0;
          });
        });
      }, sn.prototype.clear = function() {
        var w = this;
        return this._trans("readwrite", function(A) {
          return w.core.mutate({ trans: A, type: "deleteRange", range: Zo }).then(function(M) {
            return Cr(w, null, M);
          });
        }).then(function(A) {
          return A.numFailures ? lt.reject(A.failures[0]) : void 0;
        });
      }, sn.prototype.bulkGet = function(w) {
        var A = this;
        return this._trans("readonly", function(M) {
          return A.core.getMany({ keys: w, trans: M }).then(function(I) {
            return I.map(function($) {
              return A.hook.reading.fire($);
            });
          });
        });
      }, sn.prototype.bulkAdd = function(w, A, M) {
        var I = this, $ = Array.isArray(A) ? A : void 0, Z = (M = M || ($ ? void 0 : A)) ? M.allKeys : void 0;
        return this._trans("readwrite", function(ue) {
          var ne = I.schema.primKey, U = ne.auto, ne = ne.keyPath;
          if (ne && $) throw new Me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
          if ($ && $.length !== w.length) throw new Me.InvalidArgument("Arguments objects and keys must have the same length");
          var ie = w.length, ne = ne && U ? w.map(lo(ne)) : w;
          return I.core.mutate({ trans: ue, type: "add", keys: $, values: ne, wantResults: Z }).then(function(_e) {
            var he = _e.numFailures, Se = _e.results, be = _e.lastResult, _e = _e.failures;
            if (he === 0) return Z ? Se : be;
            throw new we("".concat(I.name, ".bulkAdd(): ").concat(he, " of ").concat(ie, " operations failed"), _e);
          });
        });
      }, sn.prototype.bulkPut = function(w, A, M) {
        var I = this, $ = Array.isArray(A) ? A : void 0, Z = (M = M || ($ ? void 0 : A)) ? M.allKeys : void 0;
        return this._trans("readwrite", function(ue) {
          var ne = I.schema.primKey, U = ne.auto, ne = ne.keyPath;
          if (ne && $) throw new Me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
          if ($ && $.length !== w.length) throw new Me.InvalidArgument("Arguments objects and keys must have the same length");
          var ie = w.length, ne = ne && U ? w.map(lo(ne)) : w;
          return I.core.mutate({ trans: ue, type: "put", keys: $, values: ne, wantResults: Z }).then(function(_e) {
            var he = _e.numFailures, Se = _e.results, be = _e.lastResult, _e = _e.failures;
            if (he === 0) return Z ? Se : be;
            throw new we("".concat(I.name, ".bulkPut(): ").concat(he, " of ").concat(ie, " operations failed"), _e);
          });
        });
      }, sn.prototype.bulkUpdate = function(w) {
        var A = this, M = this.core, I = w.map(function(ue) {
          return ue.key;
        }), $ = w.map(function(ue) {
          return ue.changes;
        }), Z = [];
        return this._trans("readwrite", function(ue) {
          return M.getMany({ trans: ue, keys: I, cache: "clone" }).then(function(U) {
            var ie = [], ne = [];
            w.forEach(function(he, Se) {
              var be = he.key, _e = he.changes, ke = U[Se];
              if (ke) {
                for (var Te = 0, je = Object.keys(_e); Te < je.length; Te++) {
                  var ze = je[Te], $e = _e[ze];
                  if (ze === A.schema.primKey.keyPath) {
                    if (Ft($e, be) !== 0) throw new Me.Constraint("Cannot update primary key in bulkUpdate()");
                  } else q(ke, ze, $e);
                }
                Z.push(Se), ie.push(be), ne.push(ke);
              }
            });
            var ye = ie.length;
            return M.mutate({ trans: ue, type: "put", keys: ie, values: ne, updates: { keys: I, changeSpecs: $ } }).then(function(he) {
              var Se = he.numFailures, be = he.failures;
              if (Se === 0) return ye;
              for (var _e = 0, ke = Object.keys(be); _e < ke.length; _e++) {
                var Te, je = ke[_e], ze = Z[Number(je)];
                ze != null && (Te = be[je], delete be[je], be[ze] = Te);
              }
              throw new we("".concat(A.name, ".bulkUpdate(): ").concat(Se, " of ").concat(ye, " operations failed"), be);
            });
          });
        });
      }, sn.prototype.bulkDelete = function(w) {
        var A = this, M = w.length;
        return this._trans("readwrite", function(I) {
          return A.core.mutate({ trans: I, type: "delete", keys: w }).then(function($) {
            return Cr(A, w, $);
          });
        }).then(function(ue) {
          var $ = ue.numFailures, Z = ue.lastResult, ue = ue.failures;
          if ($ === 0) return Z;
          throw new we("".concat(A.name, ".bulkDelete(): ").concat($, " of ").concat(M, " operations failed"), ue);
        });
      }, sn);
      function sn() {
      }
      function uo(w) {
        function A(ue, U) {
          if (U) {
            for (var ie = arguments.length, ne = new Array(ie - 1); --ie; ) ne[ie - 1] = arguments[ie];
            return M[ue].subscribe.apply(null, ne), w;
          }
          if (typeof ue == "string") return M[ue];
        }
        var M = {};
        A.addEventType = Z;
        for (var I = 1, $ = arguments.length; I < $; ++I) Z(arguments[I]);
        return A;
        function Z(ue, U, ie) {
          if (typeof ue != "object") {
            var ne;
            U = U || An;
            var ye = { subscribers: [], fire: ie = ie || Je, subscribe: function(he) {
              ye.subscribers.indexOf(he) === -1 && (ye.subscribers.push(he), ye.fire = U(ye.fire, he));
            }, unsubscribe: function(he) {
              ye.subscribers = ye.subscribers.filter(function(Se) {
                return Se !== he;
              }), ye.fire = ye.subscribers.reduce(U, ie);
            } };
            return M[ue] = A[ue] = ye;
          }
          o(ne = ue).forEach(function(he) {
            var Se = ne[he];
            if (u(Se)) Z(he, ne[he][0], ne[he][1]);
            else {
              if (Se !== "asap") throw new Me.InvalidArgument("Invalid event config");
              var be = Z(he, ct, function() {
                for (var _e = arguments.length, ke = new Array(_e); _e--; ) ke[_e] = arguments[_e];
                be.subscribers.forEach(function(Te) {
                  P(function() {
                    Te.apply(null, ke);
                  });
                });
              });
            }
          });
        }
      }
      function yr(w, A) {
        return E(A).from({ prototype: w }), A;
      }
      function _i(w, A) {
        return !(w.filter || w.algorithm || w.or) && (A ? w.justLimit : !w.replayFilter);
      }
      function Da(w, A) {
        w.filter = Ts(w.filter, A);
      }
      function co(w, A, M) {
        var I = w.replayFilter;
        w.replayFilter = I ? function() {
          return Ts(I(), A());
        } : A, w.justLimit = M && !I;
      }
      function Si(w, A) {
        if (w.isPrimKey) return A.primaryKey;
        var M = A.getIndexByKeyPath(w.index);
        if (!M) throw new Me.Schema("KeyPath " + w.index + " on object store " + A.name + " is not indexed");
        return M;
      }
      function tu(w, A, M) {
        var I = Si(w, A.schema);
        return A.openCursor({ trans: M, values: !w.keysOnly, reverse: w.dir === "prev", unique: !!w.unique, query: { index: I, range: w.range } });
      }
      function fo(w, A, M, I) {
        var $ = w.replayFilter ? Ts(w.filter, w.replayFilter()) : w.filter;
        if (w.or) {
          var Z = {}, ue = function(U, ie, ne) {
            var ye, he;
            $ && !$(ie, ne, function(Se) {
              return ie.stop(Se);
            }, function(Se) {
              return ie.fail(Se);
            }) || ((he = "" + (ye = ie.primaryKey)) == "[object ArrayBuffer]" && (he = "" + new Uint8Array(ye)), g(Z, he) || (Z[he] = !0, A(U, ie, ne)));
          };
          return Promise.all([w.or._iterate(ue, M), Di(tu(w, I, M), w.algorithm, ue, !w.keysOnly && w.valueMapper)]);
        }
        return Di(tu(w, I, M), Ts(w.algorithm, $), A, !w.keysOnly && w.valueMapper);
      }
      function Di(w, A, M, I) {
        var $ = wn(I ? function(Z, ue, U) {
          return M(I(Z), ue, U);
        } : M);
        return w.then(function(Z) {
          if (Z) return Z.start(function() {
            var ue = function() {
              return Z.continue();
            };
            A && !A(Z, function(U) {
              return ue = U;
            }, function(U) {
              Z.stop(U), ue = Je;
            }, function(U) {
              Z.fail(U), ue = Je;
            }) || $(Z.value, Z, function(U) {
              return ue = U;
            }), ue();
          });
        });
      }
      var dh = (en.prototype._read = function(w, A) {
        var M = this._ctx;
        return M.error ? M.table._trans(null, cn.bind(null, M.error)) : M.table._trans("readonly", w).then(A);
      }, en.prototype._write = function(w) {
        var A = this._ctx;
        return A.error ? A.table._trans(null, cn.bind(null, A.error)) : A.table._trans("readwrite", w, "locked");
      }, en.prototype._addAlgorithm = function(w) {
        var A = this._ctx;
        A.algorithm = Ts(A.algorithm, w);
      }, en.prototype._iterate = function(w, A) {
        return fo(this._ctx, w, A, this._ctx.table.core);
      }, en.prototype.clone = function(w) {
        var A = Object.create(this.constructor.prototype), M = Object.create(this._ctx);
        return w && c(M, w), A._ctx = M, A;
      }, en.prototype.raw = function() {
        return this._ctx.valueMapper = null, this;
      }, en.prototype.each = function(w) {
        var A = this._ctx;
        return this._read(function(M) {
          return fo(A, w, M, A.table.core);
        });
      }, en.prototype.count = function(w) {
        var A = this;
        return this._read(function(M) {
          var I = A._ctx, $ = I.table.core;
          if (_i(I, !0)) return $.count({ trans: M, query: { index: Si(I, $.schema), range: I.range } }).then(function(ue) {
            return Math.min(ue, I.limit);
          });
          var Z = 0;
          return fo(I, function() {
            return ++Z, !1;
          }, M, $).then(function() {
            return Z;
          });
        }).then(w);
      }, en.prototype.sortBy = function(w, A) {
        var M = w.split(".").reverse(), I = M[0], $ = M.length - 1;
        function Z(ie, ne) {
          return ne ? Z(ie[M[ne]], ne - 1) : ie[I];
        }
        var ue = this._ctx.dir === "next" ? 1 : -1;
        function U(ie, ne) {
          return Ft(Z(ie, $), Z(ne, $)) * ue;
        }
        return this.toArray(function(ie) {
          return ie.sort(U);
        }).then(A);
      }, en.prototype.toArray = function(w) {
        var A = this;
        return this._read(function(M) {
          var I = A._ctx;
          if (I.dir === "next" && _i(I, !0) && 0 < I.limit) {
            var $ = I.valueMapper, Z = Si(I, I.table.core.schema);
            return I.table.core.query({ trans: M, limit: I.limit, values: !0, query: { index: Z, range: I.range } }).then(function(U) {
              return U = U.result, $ ? U.map($) : U;
            });
          }
          var ue = [];
          return fo(I, function(U) {
            return ue.push(U);
          }, M, I.table.core).then(function() {
            return ue;
          });
        }, w);
      }, en.prototype.offset = function(w) {
        var A = this._ctx;
        return w <= 0 || (A.offset += w, _i(A) ? co(A, function() {
          var M = w;
          return function(I, $) {
            return M === 0 || (M === 1 ? --M : $(function() {
              I.advance(M), M = 0;
            }), !1);
          };
        }) : co(A, function() {
          var M = w;
          return function() {
            return --M < 0;
          };
        })), this;
      }, en.prototype.limit = function(w) {
        return this._ctx.limit = Math.min(this._ctx.limit, w), co(this._ctx, function() {
          var A = w;
          return function(M, I, $) {
            return --A <= 0 && I($), 0 <= A;
          };
        }, !0), this;
      }, en.prototype.until = function(w, A) {
        return Da(this._ctx, function(M, I, $) {
          return !w(M.value) || (I($), A);
        }), this;
      }, en.prototype.first = function(w) {
        return this.limit(1).toArray(function(A) {
          return A[0];
        }).then(w);
      }, en.prototype.last = function(w) {
        return this.reverse().first(w);
      }, en.prototype.filter = function(w) {
        var A;
        return Da(this._ctx, function(M) {
          return w(M.value);
        }), (A = this._ctx).isMatch = Ts(A.isMatch, w), this;
      }, en.prototype.and = function(w) {
        return this.filter(w);
      }, en.prototype.or = function(w) {
        return new this.db.WhereClause(this._ctx.table, w, this);
      }, en.prototype.reverse = function() {
        return this._ctx.dir = this._ctx.dir === "prev" ? "next" : "prev", this._ondirectionchange && this._ondirectionchange(this._ctx.dir), this;
      }, en.prototype.desc = function() {
        return this.reverse();
      }, en.prototype.eachKey = function(w) {
        var A = this._ctx;
        return A.keysOnly = !A.isMatch, this.each(function(M, I) {
          w(I.key, I);
        });
      }, en.prototype.eachUniqueKey = function(w) {
        return this._ctx.unique = "unique", this.eachKey(w);
      }, en.prototype.eachPrimaryKey = function(w) {
        var A = this._ctx;
        return A.keysOnly = !A.isMatch, this.each(function(M, I) {
          w(I.primaryKey, I);
        });
      }, en.prototype.keys = function(w) {
        var A = this._ctx;
        A.keysOnly = !A.isMatch;
        var M = [];
        return this.each(function(I, $) {
          M.push($.key);
        }).then(function() {
          return M;
        }).then(w);
      }, en.prototype.primaryKeys = function(w) {
        var A = this._ctx;
        if (A.dir === "next" && _i(A, !0) && 0 < A.limit) return this._read(function(I) {
          var $ = Si(A, A.table.core.schema);
          return A.table.core.query({ trans: I, values: !1, limit: A.limit, query: { index: $, range: A.range } });
        }).then(function(I) {
          return I.result;
        }).then(w);
        A.keysOnly = !A.isMatch;
        var M = [];
        return this.each(function(I, $) {
          M.push($.primaryKey);
        }).then(function() {
          return M;
        }).then(w);
      }, en.prototype.uniqueKeys = function(w) {
        return this._ctx.unique = "unique", this.keys(w);
      }, en.prototype.firstKey = function(w) {
        return this.limit(1).keys(function(A) {
          return A[0];
        }).then(w);
      }, en.prototype.lastKey = function(w) {
        return this.reverse().firstKey(w);
      }, en.prototype.distinct = function() {
        var w = this._ctx, w = w.index && w.table.schema.idxByName[w.index];
        if (!w || !w.multi) return this;
        var A = {};
        return Da(this._ctx, function($) {
          var I = $.primaryKey.toString(), $ = g(A, I);
          return A[I] = !0, !$;
        }), this;
      }, en.prototype.modify = function(w) {
        var A = this, M = this._ctx;
        return this._write(function(I) {
          var $ = typeof w == "function" ? w : function(ke) {
            return js(ke, w);
          }, Z = M.table.core, ne = Z.schema.primaryKey, ue = ne.outbound, U = ne.extractKey, ie = 200, ne = A.db._options.modifyChunkSize;
          ne && (ie = typeof ne == "object" ? ne[Z.name] || ne["*"] || 200 : ne);
          function ye(ke, ze) {
            var je = ze.failures, ze = ze.numFailures;
            Se += ke - ze;
            for (var $e = 0, Ve = o(je); $e < Ve.length; $e++) {
              var et = Ve[$e];
              he.push(je[et]);
            }
          }
          var he = [], Se = 0, be = [], _e = w === gf;
          return A.clone().primaryKeys().then(function(ke) {
            function Te(ze) {
              var $e = Math.min(ie, ke.length - ze), Ve = ke.slice(ze, ze + $e);
              return (_e ? Promise.resolve([]) : Z.getMany({ trans: I, keys: Ve, cache: "immutable" })).then(function(et) {
                var st = [], Ue = [], it = ue ? [] : null, ot = _e ? Ve : [];
                if (!_e) for (var Qe = 0; Qe < $e; ++Qe) {
                  var gt = et[Qe], Et = { value: me(gt), primKey: ke[ze + Qe] };
                  $.call(Et, Et.value, Et) !== !1 && (Et.value == null ? ot.push(ke[ze + Qe]) : ue || Ft(U(gt), U(Et.value)) === 0 ? (Ue.push(Et.value), ue && it.push(ke[ze + Qe])) : (ot.push(ke[ze + Qe]), st.push(Et.value)));
                }
                return Promise.resolve(0 < st.length && Z.mutate({ trans: I, type: "add", values: st }).then(function(Pt) {
                  for (var Lt in Pt.failures) ot.splice(parseInt(Lt), 1);
                  ye(st.length, Pt);
                })).then(function() {
                  return (0 < Ue.length || je && typeof w == "object") && Z.mutate({ trans: I, type: "put", keys: it, values: Ue, criteria: je, changeSpec: typeof w != "function" && w, isAdditionalChunk: 0 < ze }).then(function(Pt) {
                    return ye(Ue.length, Pt);
                  });
                }).then(function() {
                  return (0 < ot.length || je && _e) && Z.mutate({ trans: I, type: "delete", keys: ot, criteria: je, isAdditionalChunk: 0 < ze }).then(function(Pt) {
                    return Cr(M.table, ot, Pt);
                  }).then(function(Pt) {
                    return ye(ot.length, Pt);
                  });
                }).then(function() {
                  return ke.length > ze + $e && Te(ze + ie);
                });
              });
            }
            var je = _i(M) && M.limit === 1 / 0 && (typeof w != "function" || _e) && { index: M.index, range: M.range };
            return Te(0).then(function() {
              if (0 < he.length) throw new ge("Error modifying one or more objects", he, Se, be);
              return ke.length;
            });
          });
        });
      }, en.prototype.delete = function() {
        var w = this._ctx, A = w.range;
        return !_i(w) || w.table.schema.yProps || !w.isPrimKey && A.type !== 3 ? this.modify(gf) : this._write(function(M) {
          var I = w.table.core.schema.primaryKey, $ = A;
          return w.table.core.count({ trans: M, query: { index: I, range: $ } }).then(function(Z) {
            return w.table.core.mutate({ trans: M, type: "deleteRange", range: $ }).then(function(ie) {
              var U = ie.failures, ie = ie.numFailures;
              if (ie) throw new ge("Could not delete some values", Object.keys(U).map(function(ne) {
                return U[ne];
              }), Z - ie);
              return Z - ie;
            });
          });
        });
      }, en);
      function en() {
      }
      var gf = function(w, A) {
        return A.value = null;
      };
      function Wu(w, A) {
        return w < A ? -1 : w === A ? 0 : 1;
      }
      function hh(w, A) {
        return A < w ? -1 : w === A ? 0 : 1;
      }
      function hi(w, A, M) {
        return w = w instanceof za ? new w.Collection(w) : w, w._ctx.error = new (M || TypeError)(A), w;
      }
      function Ns(w) {
        return new w.Collection(w, function() {
          return Zu("");
        }).limit(0);
      }
      function zi(w, A, M, I) {
        var $, Z, ue, U, ie, ne, ye, he = M.length;
        if (!M.every(function(_e) {
          return typeof _e == "string";
        })) return hi(w, tr);
        function Se(_e) {
          $ = _e === "next" ? function(Te) {
            return Te.toUpperCase();
          } : function(Te) {
            return Te.toLowerCase();
          }, Z = _e === "next" ? function(Te) {
            return Te.toLowerCase();
          } : function(Te) {
            return Te.toUpperCase();
          }, ue = _e === "next" ? Wu : hh;
          var ke = M.map(function(Te) {
            return { lower: Z(Te), upper: $(Te) };
          }).sort(function(Te, je) {
            return ue(Te.lower, je.lower);
          });
          U = ke.map(function(Te) {
            return Te.upper;
          }), ie = ke.map(function(Te) {
            return Te.lower;
          }), ye = (ne = _e) === "next" ? "" : I;
        }
        Se("next"), w = new w.Collection(w, function() {
          return Rs(U[0], ie[he - 1] + I);
        }), w._ondirectionchange = function(_e) {
          Se(_e);
        };
        var be = 0;
        return w._addAlgorithm(function(_e, ke, Te) {
          var je = _e.key;
          if (typeof je != "string") return !1;
          var ze = Z(je);
          if (A(ze, ie, be)) return !0;
          for (var $e = null, Ve = be; Ve < he; ++Ve) {
            var et = (function(st, Ue, it, ot, Qe, gt) {
              for (var Et = Math.min(st.length, ot.length), Pt = -1, Lt = 0; Lt < Et; ++Lt) {
                var Gn = Ue[Lt];
                if (Gn !== ot[Lt]) return Qe(st[Lt], it[Lt]) < 0 ? st.substr(0, Lt) + it[Lt] + it.substr(Lt + 1) : Qe(st[Lt], ot[Lt]) < 0 ? st.substr(0, Lt) + ot[Lt] + it.substr(Lt + 1) : 0 <= Pt ? st.substr(0, Pt) + Ue[Pt] + it.substr(Pt + 1) : null;
                Qe(st[Lt], Gn) < 0 && (Pt = Lt);
              }
              return Et < ot.length && gt === "next" ? st + it.substr(st.length) : Et < st.length && gt === "prev" ? st.substr(0, it.length) : Pt < 0 ? null : st.substr(0, Pt) + ot[Pt] + it.substr(Pt + 1);
            })(je, ze, U[Ve], ie[Ve], ue, ne);
            et === null && $e === null ? be = Ve + 1 : ($e === null || 0 < ue($e, et)) && ($e = et);
          }
          return ke($e !== null ? function() {
            _e.continue($e + ye);
          } : Te), !1;
        }), w;
      }
      function Rs(w, A, M, I) {
        return { type: 2, lower: w, upper: A, lowerOpen: M, upperOpen: I };
      }
      function Zu(w) {
        return { type: 1, lower: w, upper: w };
      }
      var za = (Object.defineProperty(Un.prototype, "Collection", { get: function() {
        return this._ctx.table.db.Collection;
      }, enumerable: !1, configurable: !0 }), Un.prototype.between = function(w, A, M, I) {
        M = M !== !1, I = I === !0;
        try {
          return 0 < this._cmp(w, A) || this._cmp(w, A) === 0 && (M || I) && (!M || !I) ? Ns(this) : new this.Collection(this, function() {
            return Rs(w, A, !M, !I);
          });
        } catch {
          return hi(this, gr);
        }
      }, Un.prototype.equals = function(w) {
        return w == null ? hi(this, gr) : new this.Collection(this, function() {
          return Zu(w);
        });
      }, Un.prototype.above = function(w) {
        return w == null ? hi(this, gr) : new this.Collection(this, function() {
          return Rs(w, void 0, !0);
        });
      }, Un.prototype.aboveOrEqual = function(w) {
        return w == null ? hi(this, gr) : new this.Collection(this, function() {
          return Rs(w, void 0, !1);
        });
      }, Un.prototype.below = function(w) {
        return w == null ? hi(this, gr) : new this.Collection(this, function() {
          return Rs(void 0, w, !1, !0);
        });
      }, Un.prototype.belowOrEqual = function(w) {
        return w == null ? hi(this, gr) : new this.Collection(this, function() {
          return Rs(void 0, w);
        });
      }, Un.prototype.startsWith = function(w) {
        return typeof w != "string" ? hi(this, tr) : this.between(w, w + di, !0, !0);
      }, Un.prototype.startsWithIgnoreCase = function(w) {
        return w === "" ? this.startsWith(w) : zi(this, function(A, M) {
          return A.indexOf(M[0]) === 0;
        }, [w], di);
      }, Un.prototype.equalsIgnoreCase = function(w) {
        return zi(this, function(A, M) {
          return A === M[0];
        }, [w], "");
      }, Un.prototype.anyOfIgnoreCase = function() {
        var w = K.apply(ce, arguments);
        return w.length === 0 ? Ns(this) : zi(this, function(A, M) {
          return M.indexOf(A) !== -1;
        }, w, "");
      }, Un.prototype.startsWithAnyOfIgnoreCase = function() {
        var w = K.apply(ce, arguments);
        return w.length === 0 ? Ns(this) : zi(this, function(A, M) {
          return M.some(function(I) {
            return A.indexOf(I) === 0;
          });
        }, w, di);
      }, Un.prototype.anyOf = function() {
        var w = this, A = K.apply(ce, arguments), M = this._cmp;
        try {
          A.sort(M);
        } catch {
          return hi(this, gr);
        }
        if (A.length === 0) return Ns(this);
        var I = new this.Collection(this, function() {
          return Rs(A[0], A[A.length - 1]);
        });
        I._ondirectionchange = function(Z) {
          M = Z === "next" ? w._ascending : w._descending, A.sort(M);
        };
        var $ = 0;
        return I._addAlgorithm(function(Z, ue, U) {
          for (var ie = Z.key; 0 < M(ie, A[$]); ) if (++$ === A.length) return ue(U), !1;
          return M(ie, A[$]) === 0 || (ue(function() {
            Z.continue(A[$]);
          }), !1);
        }), I;
      }, Un.prototype.notEqual = function(w) {
        return this.inAnyRange([[-1 / 0, w], [w, this.db._maxKey]], { includeLowers: !1, includeUppers: !1 });
      }, Un.prototype.noneOf = function() {
        var w = K.apply(ce, arguments);
        if (w.length === 0) return new this.Collection(this);
        try {
          w.sort(this._ascending);
        } catch {
          return hi(this, gr);
        }
        var A = w.reduce(function(M, I) {
          return M ? M.concat([[M[M.length - 1][1], I]]) : [[-1 / 0, I]];
        }, null);
        return A.push([w[w.length - 1], this.db._maxKey]), this.inAnyRange(A, { includeLowers: !1, includeUppers: !1 });
      }, Un.prototype.inAnyRange = function(je, A) {
        var M = this, I = this._cmp, $ = this._ascending, Z = this._descending, ue = this._min, U = this._max;
        if (je.length === 0) return Ns(this);
        if (!je.every(function(ze) {
          return ze[0] !== void 0 && ze[1] !== void 0 && $(ze[0], ze[1]) <= 0;
        })) return hi(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", Me.InvalidArgument);
        var ie = !A || A.includeLowers !== !1, ne = A && A.includeUppers === !0, ye, he = $;
        function Se(ze, $e) {
          return he(ze[0], $e[0]);
        }
        try {
          (ye = je.reduce(function(ze, $e) {
            for (var Ve = 0, et = ze.length; Ve < et; ++Ve) {
              var st = ze[Ve];
              if (I($e[0], st[1]) < 0 && 0 < I($e[1], st[0])) {
                st[0] = ue(st[0], $e[0]), st[1] = U(st[1], $e[1]);
                break;
              }
            }
            return Ve === et && ze.push($e), ze;
          }, [])).sort(Se);
        } catch {
          return hi(this, gr);
        }
        var be = 0, _e = ne ? function(ze) {
          return 0 < $(ze, ye[be][1]);
        } : function(ze) {
          return 0 <= $(ze, ye[be][1]);
        }, ke = ie ? function(ze) {
          return 0 < Z(ze, ye[be][0]);
        } : function(ze) {
          return 0 <= Z(ze, ye[be][0]);
        }, Te = _e, je = new this.Collection(this, function() {
          return Rs(ye[0][0], ye[ye.length - 1][1], !ie, !ne);
        });
        return je._ondirectionchange = function(ze) {
          he = ze === "next" ? (Te = _e, $) : (Te = ke, Z), ye.sort(Se);
        }, je._addAlgorithm(function(ze, $e, Ve) {
          for (var et, st = ze.key; Te(st); ) if (++be === ye.length) return $e(Ve), !1;
          return !_e(et = st) && !ke(et) || (M._cmp(st, ye[be][1]) === 0 || M._cmp(st, ye[be][0]) === 0 || $e(function() {
            he === $ ? ze.continue(ye[be][0]) : ze.continue(ye[be][1]);
          }), !1);
        }), je;
      }, Un.prototype.startsWithAnyOf = function() {
        var w = K.apply(ce, arguments);
        return w.every(function(A) {
          return typeof A == "string";
        }) ? w.length === 0 ? Ns(this) : this.inAnyRange(w.map(function(A) {
          return [A, A + di];
        })) : hi(this, "startsWithAnyOf() only works with strings");
      }, Un);
      function Un() {
      }
      function es(w) {
        return wn(function(A) {
          return ho(A), w(A.target.error), !1;
        });
      }
      function ho(w) {
        w.stopPropagation && w.stopPropagation(), w.preventDefault && w.preventDefault();
      }
      var Xo = "storagemutated", la = "x-storagemutated-1", $r = uo(null, Xo), yf = (pi.prototype._lock = function() {
        return O(!nt.global), ++this._reculock, this._reculock !== 1 || nt.global || (nt.lockOwnerFor = this), this;
      }, pi.prototype._unlock = function() {
        if (O(!nt.global), --this._reculock == 0) for (nt.global || (nt.lockOwnerFor = null); 0 < this._blockedFuncs.length && !this._locked(); ) {
          var w = this._blockedFuncs.shift();
          try {
            bi(w[1], w[0]);
          } catch {
          }
        }
        return this;
      }, pi.prototype._locked = function() {
        return this._reculock && nt.lockOwnerFor !== this;
      }, pi.prototype.create = function(w) {
        var A = this;
        if (!this.mode) return this;
        var M = this.db.idbdb, I = this.db._state.dbOpenError;
        if (O(!this.idbtrans), !w && !M) switch (I && I.name) {
          case "DatabaseClosedError":
            throw new Me.DatabaseClosed(I);
          case "MissingAPIError":
            throw new Me.MissingAPI(I.message, I);
          default:
            throw new Me.OpenFailed(I);
        }
        if (!this.active) throw new Me.TransactionInactive();
        return O(this._completion._state === null), (w = this.idbtrans = w || (this.db.core || M).transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })).onerror = wn(function($) {
          ho($), A._reject(w.error);
        }), w.onabort = wn(function($) {
          ho($), A.active && A._reject(new Me.Abort(w.error)), A.active = !1, A.on("abort").fire($);
        }), w.oncomplete = wn(function() {
          A.active = !1, A._resolve(), "mutatedParts" in w && $r.storagemutated.fire(w.mutatedParts);
        }), this;
      }, pi.prototype._promise = function(w, A, M) {
        var I = this;
        if (w === "readwrite" && this.mode !== "readwrite") return cn(new Me.ReadOnly("Transaction is readonly"));
        if (!this.active) return cn(new Me.TransactionInactive());
        if (this._locked()) return new lt(function(Z, ue) {
          I._blockedFuncs.push([function() {
            I._promise(w, A, M).then(Z, ue);
          }, nt]);
        });
        if (M) return Cn(function() {
          var Z = new lt(function(ue, U) {
            I._lock();
            var ie = A(ue, U, I);
            ie && ie.then && ie.then(ue, U);
          });
          return Z.finally(function() {
            return I._unlock();
          }), Z._lib = !0, Z;
        });
        var $ = new lt(function(Z, ue) {
          var U = A(Z, ue, I);
          U && U.then && U.then(Z, ue);
        });
        return $._lib = !0, $;
      }, pi.prototype._root = function() {
        return this.parent ? this.parent._root() : this;
      }, pi.prototype.waitFor = function(w) {
        var A, M = this._root(), I = lt.resolve(w);
        M._waitingFor ? M._waitingFor = M._waitingFor.then(function() {
          return I;
        }) : (M._waitingFor = I, M._waitingQueue = [], A = M.idbtrans.objectStore(M.storeNames[0]), (function Z() {
          for (++M._spinCount; M._waitingQueue.length; ) M._waitingQueue.shift()();
          M._waitingFor && (A.get(-1 / 0).onsuccess = Z);
        })());
        var $ = M._waitingFor;
        return new lt(function(Z, ue) {
          I.then(function(U) {
            return M._waitingQueue.push(wn(Z.bind(null, U)));
          }, function(U) {
            return M._waitingQueue.push(wn(ue.bind(null, U)));
          }).finally(function() {
            M._waitingFor === $ && (M._waitingFor = null);
          });
        });
      }, pi.prototype.abort = function() {
        this.active && (this.active = !1, this.idbtrans && this.idbtrans.abort(), this._reject(new Me.Abort()));
      }, pi.prototype.table = function(w) {
        var A = this._memoizedTables || (this._memoizedTables = {});
        if (g(A, w)) return A[w];
        var M = this.schema[w];
        if (!M) throw new Me.NotFound("Table " + w + " not part of transaction");
        return M = new this.db.Table(w, M, this), M.core = this.db.core.table(w), A[w] = M;
      }, pi);
      function pi() {
      }
      function Ms(w, A, M, I, $, Z, ue, U) {
        return { name: w, keyPath: A, unique: M, multi: I, auto: $, compound: Z, src: (M && !ue ? "&" : "") + (I ? "*" : "") + ($ ? "++" : "") + Xu(A), type: U };
      }
      function Xu(w) {
        return typeof w == "string" ? w : w ? "[" + [].join.call(w, "+") + "]" : "";
      }
      function hn(w, A, M) {
        return { name: w, primKey: A, indexes: M, mappedClass: null, idxByName: (I = function($) {
          return [$.name, $];
        }, M.reduce(function($, Z, ue) {
          return ue = I(Z, ue), ue && ($[ue[0]] = ue[1]), $;
        }, {})) };
        var I;
      }
      var fn = function(w) {
        try {
          return w.only([[]]), fn = function() {
            return [[]];
          }, [[]];
        } catch {
          return fn = function() {
            return di;
          }, di;
        }
      };
      function Qo(w) {
        return w == null ? function() {
        } : typeof w == "string" ? (A = w).split(".").length === 1 ? function(M) {
          return M[A];
        } : function(M) {
          return z(M, A);
        } : function(M) {
          return z(M, w);
        };
        var A;
      }
      function nu(w) {
        return [].slice.call(w);
      }
      var ph = 0;
      function Er(w) {
        return w == null ? ":id" : typeof w == "string" ? w : "[".concat(w.join("+"), "]");
      }
      function po(w, A, ie) {
        function I(Te) {
          if (Te.type === 3) return null;
          if (Te.type === 4) throw new Error("Cannot convert never type to IDBKeyRange");
          var be = Te.lower, _e = Te.upper, ke = Te.lowerOpen, Te = Te.upperOpen;
          return be === void 0 ? _e === void 0 ? null : A.upperBound(_e, !!Te) : _e === void 0 ? A.lowerBound(be, !!ke) : A.bound(be, _e, !!ke, !!Te);
        }
        function $(Se) {
          var be, _e = Se.name;
          return { name: _e, schema: Se, mutate: function(ke) {
            var Te = ke.trans, je = ke.type, ze = ke.keys, $e = ke.values, Ve = ke.range;
            return new Promise(function(et, st) {
              et = wn(et);
              var Ue = Te.objectStore(_e), it = Ue.keyPath == null, ot = je === "put" || je === "add";
              if (!ot && je !== "delete" && je !== "deleteRange") throw new Error("Invalid operation type: " + je);
              var Qe, gt = (ze || $e || { length: 1 }).length;
              if (ze && $e && ze.length !== $e.length) throw new Error("Given keys array must have same length as given values array.");
              if (gt === 0) return et({ numFailures: 0, failures: {}, results: [], lastResult: void 0 });
              function Et(xr) {
                ++Gn, ho(xr);
              }
              var Pt = [], Lt = [], Gn = 0;
              if (je === "deleteRange") {
                if (Ve.type === 4) return et({ numFailures: Gn, failures: Lt, results: [], lastResult: void 0 });
                Ve.type === 3 ? Pt.push(Qe = Ue.clear()) : Pt.push(Qe = Ue.delete(I(Ve)));
              } else {
                var it = ot ? it ? [$e, ze] : [$e, null] : [ze, null], jt = it[0], vr = it[1];
                if (ot) for (var On = 0; On < gt; ++On) Pt.push(Qe = vr && vr[On] !== void 0 ? Ue[je](jt[On], vr[On]) : Ue[je](jt[On])), Qe.onerror = Et;
                else for (On = 0; On < gt; ++On) Pt.push(Qe = Ue[je](jt[On])), Qe.onerror = Et;
              }
              function al(xr) {
                xr = xr.target.result, Pt.forEach(function(ti, oc) {
                  return ti.error != null && (Lt[oc] = ti.error);
                }), et({ numFailures: Gn, failures: Lt, results: je === "delete" ? ze : Pt.map(function(ti) {
                  return ti.result;
                }), lastResult: xr });
              }
              Qe.onerror = function(xr) {
                Et(xr), al(xr);
              }, Qe.onsuccess = al;
            });
          }, getMany: function(ke) {
            var Te = ke.trans, je = ke.keys;
            return new Promise(function(ze, $e) {
              ze = wn(ze);
              for (var Ve, et = Te.objectStore(_e), st = je.length, Ue = new Array(st), it = 0, ot = 0, Qe = function(Pt) {
                Pt = Pt.target, Ue[Pt._pos] = Pt.result, ++ot === it && ze(Ue);
              }, gt = es($e), Et = 0; Et < st; ++Et) je[Et] != null && ((Ve = et.get(je[Et]))._pos = Et, Ve.onsuccess = Qe, Ve.onerror = gt, ++it);
              it === 0 && ze(Ue);
            });
          }, get: function(ke) {
            var Te = ke.trans, je = ke.key;
            return new Promise(function(ze, $e) {
              ze = wn(ze);
              var Ve = Te.objectStore(_e).get(je);
              Ve.onsuccess = function(et) {
                return ze(et.target.result);
              }, Ve.onerror = es($e);
            });
          }, query: (be = ne, function(ke) {
            return new Promise(function(Te, je) {
              Te = wn(Te);
              var ze, $e, Ve, it = ke.trans, et = ke.values, st = ke.limit, Qe = ke.query, Ue = st === 1 / 0 ? void 0 : st, ot = Qe.index, Qe = Qe.range, it = it.objectStore(_e), ot = ot.isPrimaryKey ? it : it.index(ot.name), Qe = I(Qe);
              if (st === 0) return Te({ result: [] });
              be ? ((Ue = et ? ot.getAll(Qe, Ue) : ot.getAllKeys(Qe, Ue)).onsuccess = function(gt) {
                return Te({ result: gt.target.result });
              }, Ue.onerror = es(je)) : (ze = 0, $e = !et && "openKeyCursor" in ot ? ot.openKeyCursor(Qe) : ot.openCursor(Qe), Ve = [], $e.onsuccess = function(gt) {
                var Et = $e.result;
                return Et ? (Ve.push(et ? Et.value : Et.primaryKey), ++ze === st ? Te({ result: Ve }) : void Et.continue()) : Te({ result: Ve });
              }, $e.onerror = es(je));
            });
          }), openCursor: function(ke) {
            var Te = ke.trans, je = ke.values, ze = ke.query, $e = ke.reverse, Ve = ke.unique;
            return new Promise(function(et, st) {
              et = wn(et);
              var ot = ze.index, Ue = ze.range, it = Te.objectStore(_e), it = ot.isPrimaryKey ? it : it.index(ot.name), ot = $e ? Ve ? "prevunique" : "prev" : Ve ? "nextunique" : "next", Qe = !je && "openKeyCursor" in it ? it.openKeyCursor(I(Ue), ot) : it.openCursor(I(Ue), ot);
              Qe.onerror = es(st), Qe.onsuccess = wn(function(gt) {
                var Et, Pt, Lt, Gn, jt = Qe.result;
                jt ? (jt.___id = ++ph, jt.done = !1, Et = jt.continue.bind(jt), Pt = (Pt = jt.continuePrimaryKey) && Pt.bind(jt), Lt = jt.advance.bind(jt), Gn = function() {
                  throw new Error("Cursor not stopped");
                }, jt.trans = Te, jt.stop = jt.continue = jt.continuePrimaryKey = jt.advance = function() {
                  throw new Error("Cursor not started");
                }, jt.fail = wn(st), jt.next = function() {
                  var vr = this, On = 1;
                  return this.start(function() {
                    return On-- ? vr.continue() : vr.stop();
                  }).then(function() {
                    return vr;
                  });
                }, jt.start = function(vr) {
                  function On() {
                    if (Qe.result) try {
                      vr();
                    } catch (xr) {
                      jt.fail(xr);
                    }
                    else jt.done = !0, jt.start = function() {
                      throw new Error("Cursor behind last entry");
                    }, jt.stop();
                  }
                  var al = new Promise(function(xr, ti) {
                    xr = wn(xr), Qe.onerror = es(ti), jt.fail = ti, jt.stop = function(oc) {
                      jt.stop = jt.continue = jt.continuePrimaryKey = jt.advance = Gn, xr(oc);
                    };
                  });
                  return Qe.onsuccess = wn(function(xr) {
                    Qe.onsuccess = On, On();
                  }), jt.continue = Et, jt.continuePrimaryKey = Pt, jt.advance = Lt, On(), al;
                }, et(jt)) : et(null);
              }, st);
            });
          }, count: function(ke) {
            var Te = ke.query, je = ke.trans, ze = Te.index, $e = Te.range;
            return new Promise(function(Ve, et) {
              var st = je.objectStore(_e), Ue = ze.isPrimaryKey ? st : st.index(ze.name), st = I($e), Ue = st ? Ue.count(st) : Ue.count();
              Ue.onsuccess = wn(function(it) {
                return Ve(it.target.result);
              }), Ue.onerror = es(et);
            });
          } };
        }
        var Z, ue, U, ye = (ue = ie, U = nu((Z = w).objectStoreNames), { schema: { name: Z.name, tables: U.map(function(Se) {
          return ue.objectStore(Se);
        }).map(function(Se) {
          var be = Se.keyPath, Te = Se.autoIncrement, _e = u(be), ke = {}, Te = { name: Se.name, primaryKey: { name: null, isPrimaryKey: !0, outbound: be == null, compound: _e, keyPath: be, autoIncrement: Te, unique: !0, extractKey: Qo(be) }, indexes: nu(Se.indexNames).map(function(je) {
            return Se.index(je);
          }).map(function(Ve) {
            var ze = Ve.name, $e = Ve.unique, et = Ve.multiEntry, Ve = Ve.keyPath, et = { name: ze, compound: u(Ve), keyPath: Ve, unique: $e, multiEntry: et, extractKey: Qo(Ve) };
            return ke[Er(Ve)] = et;
          }), getIndexByKeyPath: function(je) {
            return ke[Er(je)];
          } };
          return ke[":id"] = Te.primaryKey, be != null && (ke[Er(be)] = Te.primaryKey), Te;
        }) }, hasGetAll: 0 < U.length && "getAll" in ue.objectStore(U[0]) && !(typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604) }), ie = ye.schema, ne = ye.hasGetAll, ye = ie.tables.map($), he = {};
        return ye.forEach(function(Se) {
          return he[Se.name] = Se;
        }), { stack: "dbcore", transaction: w.transaction.bind(w), table: function(Se) {
          if (!he[Se]) throw new Error("Table '".concat(Se, "' not found"));
          return he[Se];
        }, MIN_KEY: -1 / 0, MAX_KEY: fn(A), schema: ie };
      }
      function Qu(w, A, M, I) {
        var $ = M.IDBKeyRange;
        return { dbcore: (I = po(A, $, I), w.dbcore.reduce(function(Z, ue) {
          return ue = ue.create, r(r({}, Z), ue(Z));
        }, I)) };
      }
      function ua(w, I) {
        var M = I.db, I = Qu(w._middlewares, M, w._deps, I);
        w.core = I.dbcore, w.tables.forEach(function($) {
          var Z = $.name;
          w.core.schema.tables.some(function(ue) {
            return ue.name === Z;
          }) && ($.core = w.core.table(Z), w[Z] instanceof w.Table && (w[Z].core = $.core));
        });
      }
      function Ju(w, A, M, I) {
        M.forEach(function($) {
          var Z = I[$];
          A.forEach(function(ue) {
            var U = (function ie(ne, ye) {
              return k(ne, ye) || (ne = f(ne)) && ie(ne, ye);
            })(ue, $);
            (!U || "value" in U && U.value === void 0) && (ue === w.Transaction.prototype || ue instanceof w.Transaction ? _(ue, $, { get: function() {
              return this.table($);
            }, set: function(ie) {
              b(this, $, { value: ie, writable: !0, configurable: !0, enumerable: !0 });
            } }) : ue[$] = new w.Table($, Z));
          });
        });
      }
      function nr(w, A) {
        A.forEach(function(M) {
          for (var I in M) M[I] instanceof w.Table && delete M[I];
        });
      }
      function ru(w, A) {
        return w._cfg.version - A._cfg.version;
      }
      function ts(w, A, M, I) {
        var $ = w._dbSchema;
        M.objectStoreNames.contains("$meta") && !$.$meta && ($.$meta = hn("$meta", xf("")[0], []), w._storeNames.push("$meta"));
        var Z = w._createTransaction("readwrite", w._storeNames, $);
        Z.create(M), Z._completion.catch(I);
        var ue = Z._reject.bind(Z), U = nt.transless || nt;
        Cn(function() {
          return nt.trans = Z, nt.transless = U, A !== 0 ? (ua(w, M), ne = A, ((ie = Z).storeNames.includes("$meta") ? ie.table("$meta").get("version").then(function(ye) {
            return ye ?? ne;
          }) : lt.resolve(ne)).then(function(ye) {
            return Se = ye, be = Z, _e = M, ke = [], ye = (he = w)._versions, Te = he._dbSchema = mo(0, he.idbdb, _e), (ye = ye.filter(function(je) {
              return je._cfg.version >= Se;
            })).length !== 0 ? (ye.forEach(function(je) {
              ke.push(function() {
                var ze = Te, $e = je._cfg.dbschema;
                au(he, ze, _e), au(he, $e, _e), Te = he._dbSchema = $e;
                var Ve = Jo(ze, $e);
                Ve.add.forEach(function(ot) {
                  mi(_e, ot[0], ot[1].primKey, ot[1].indexes);
                }), Ve.change.forEach(function(ot) {
                  if (ot.recreate) throw new Me.Upgrade("Not yet support for changing primary key");
                  var Qe = _e.objectStore(ot.name);
                  ot.add.forEach(function(gt) {
                    return su(Qe, gt);
                  }), ot.change.forEach(function(gt) {
                    Qe.deleteIndex(gt.name), su(Qe, gt);
                  }), ot.del.forEach(function(gt) {
                    return Qe.deleteIndex(gt);
                  });
                });
                var et = je._cfg.contentUpgrade;
                if (et && je._cfg.version > Se) {
                  ua(he, _e), be._memoizedTables = {};
                  var st = G($e);
                  Ve.del.forEach(function(ot) {
                    st[ot] = ze[ot];
                  }), nr(he, [he.Transaction.prototype]), Ju(he, [he.Transaction.prototype], o(st), st), be.schema = st;
                  var Ue, it = re(et);
                  return it && er(), Ve = lt.follow(function() {
                    var ot;
                    (Ue = et(be)) && it && (ot = qr.bind(null, null), Ue.then(ot, ot));
                  }), Ue && typeof Ue.then == "function" ? lt.resolve(Ue) : Ve.then(function() {
                    return Ue;
                  });
                }
              }), ke.push(function(ze) {
                var $e, Ve, et = je._cfg.dbschema;
                $e = et, Ve = ze, [].slice.call(Ve.db.objectStoreNames).forEach(function(st) {
                  return $e[st] == null && Ve.db.deleteObjectStore(st);
                }), nr(he, [he.Transaction.prototype]), Ju(he, [he.Transaction.prototype], he._storeNames, he._dbSchema), be.schema = he._dbSchema;
              }), ke.push(function(ze) {
                he.idbdb.objectStoreNames.contains("$meta") && (Math.ceil(he.idbdb.version / 10) === je._cfg.version ? (he.idbdb.deleteObjectStore("$meta"), delete he._dbSchema.$meta, he._storeNames = he._storeNames.filter(function($e) {
                  return $e !== "$meta";
                })) : ze.objectStore("$meta").put(je._cfg.version, "version"));
              });
            }), (function je() {
              return ke.length ? lt.resolve(ke.shift()(be.idbtrans)).then(je) : lt.resolve();
            })().then(function() {
              vf(Te, _e);
            })) : lt.resolve();
            var he, Se, be, _e, ke, Te;
          }).catch(ue)) : (o($).forEach(function(ye) {
            mi(M, ye, $[ye].primKey, $[ye].indexes);
          }), ua(w, M), void lt.follow(function() {
            return w.on.populate.fire(Z);
          }).catch(ue));
          var ie, ne;
        });
      }
      function iu(w, A) {
        vf(w._dbSchema, A), A.db.version % 10 != 0 || A.objectStoreNames.contains("$meta") || A.db.createObjectStore("$meta").add(Math.ceil(A.db.version / 10 - 1), "version");
        var M = mo(0, w.idbdb, A);
        au(w, w._dbSchema, A);
        for (var I = 0, $ = Jo(M, w._dbSchema).change; I < $.length; I++) {
          var Z = (function(ue) {
            if (ue.change.length || ue.recreate) return console.warn("Unable to patch indexes of table ".concat(ue.name, " because it has changes on the type of index or primary key.")), { value: void 0 };
            var U = A.objectStore(ue.name);
            ue.add.forEach(function(ie) {
              Yt && console.debug("Dexie upgrade patch: Creating missing index ".concat(ue.name, ".").concat(ie.src)), su(U, ie);
            });
          })($[I]);
          if (typeof Z == "object") return Z.value;
        }
      }
      function Jo(w, A) {
        var M, I = { del: [], add: [], change: [] };
        for (M in w) A[M] || I.del.push(M);
        for (M in A) {
          var $ = w[M], Z = A[M];
          if ($) {
            var ue = { name: M, def: Z, recreate: !1, del: [], add: [], change: [] };
            if ("" + ($.primKey.keyPath || "") != "" + (Z.primKey.keyPath || "") || $.primKey.auto !== Z.primKey.auto) ue.recreate = !0, I.change.push(ue);
            else {
              var U = $.idxByName, ie = Z.idxByName, ne = void 0;
              for (ne in U) ie[ne] || ue.del.push(ne);
              for (ne in ie) {
                var ye = U[ne], he = ie[ne];
                ye ? ye.src !== he.src && ue.change.push(he) : ue.add.push(he);
              }
              (0 < ue.del.length || 0 < ue.add.length || 0 < ue.change.length) && I.change.push(ue);
            }
          } else I.add.push([M, Z]);
        }
        return I;
      }
      function mi(w, A, M, I) {
        var $ = w.db.createObjectStore(A, M.keyPath ? { keyPath: M.keyPath, autoIncrement: M.auto } : { autoIncrement: M.auto });
        return I.forEach(function(Z) {
          return su($, Z);
        }), $;
      }
      function vf(w, A) {
        o(w).forEach(function(M) {
          A.db.objectStoreNames.contains(M) || (Yt && console.debug("Dexie: Creating missing table", M), mi(A, M, w[M].primKey, w[M].indexes));
        });
      }
      function su(w, A) {
        w.createIndex(A.name, A.keyPath, { unique: A.unique, multiEntry: A.multi });
      }
      function mo(w, A, M) {
        var I = {};
        return R(A.objectStoreNames, 0).forEach(function($) {
          for (var Z = M.objectStore($), ue = Ms(Xu(ne = Z.keyPath), ne || "", !0, !1, !!Z.autoIncrement, ne && typeof ne != "string", !0), U = [], ie = 0; ie < Z.indexNames.length; ++ie) {
            var ye = Z.index(Z.indexNames[ie]), ne = ye.keyPath, ye = Ms(ye.name, ne, !!ye.unique, !!ye.multiEntry, !1, ne && typeof ne != "string", !1);
            U.push(ye);
          }
          I[$] = hn($, ue, U);
        }), I;
      }
      function au(w, A, M) {
        for (var I = M.db.objectStoreNames, $ = 0; $ < I.length; ++$) {
          var Z = I[$], ue = M.objectStore(Z);
          w._hasGetAll = "getAll" in ue;
          for (var U = 0; U < ue.indexNames.length; ++U) {
            var ie = ue.indexNames[U], ne = ue.index(ie).keyPath, ye = typeof ne == "string" ? ne : "[" + R(ne).join("+") + "]";
            !A[Z] || (ne = A[Z].idxByName[ye]) && (ne.name = ie, delete A[Z].idxByName[ye], A[Z].idxByName[ie] = ne);
          }
        }
        typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && a.WorkerGlobalScope && a instanceof a.WorkerGlobalScope && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604 && (w._hasGetAll = !1);
      }
      function xf(w) {
        return w.split(",").map(function(A, M) {
          var Z = A.split(":"), I = ($ = Z[1]) === null || $ === void 0 ? void 0 : $.trim(), $ = (A = Z[0].trim()).replace(/([&*]|\+\+)/g, ""), Z = /^\[/.test($) ? $.match(/^\[(.*)\]$/)[1].split("+") : $;
          return Ms($, Z || null, /\&/.test(A), /\*/.test(A), /\+\+/.test(A), u(Z), M === 0, I);
        });
      }
      var mh = (kr.prototype._createTableSchema = hn, kr.prototype._parseIndexSyntax = xf, kr.prototype._parseStoresSpec = function(w, A) {
        var M = this;
        o(w).forEach(function(I) {
          if (w[I] !== null) {
            var $ = M._parseIndexSyntax(w[I]), Z = $.shift();
            if (!Z) throw new Me.Schema("Invalid schema for table " + I + ": " + w[I]);
            if (Z.unique = !0, Z.multi) throw new Me.Schema("Primary key cannot be multiEntry*");
            $.forEach(function(ue) {
              if (ue.auto) throw new Me.Schema("Only primary key can be marked as autoIncrement (++)");
              if (!ue.keyPath) throw new Me.Schema("Index must have a name and cannot be an empty string");
            }), $ = M._createTableSchema(I, Z, $), A[I] = $;
          }
        });
      }, kr.prototype.stores = function(M) {
        var A = this.db;
        this._cfg.storesSource = this._cfg.storesSource ? c(this._cfg.storesSource, M) : M;
        var M = A._versions, I = {}, $ = {};
        return M.forEach(function(Z) {
          c(I, Z._cfg.storesSource), $ = Z._cfg.dbschema = {}, Z._parseStoresSpec(I, $);
        }), A._dbSchema = $, nr(A, [A._allTables, A, A.Transaction.prototype]), Ju(A, [A._allTables, A, A.Transaction.prototype, this._cfg.tables], o($), $), A._storeNames = o($), this;
      }, kr.prototype.upgrade = function(w) {
        return this._cfg.contentUpgrade = jn(this._cfg.contentUpgrade || Je, w), this;
      }, kr);
      function kr() {
      }
      function bf(w, A) {
        var M = w._dbNamesDB;
        return M || (M = w._dbNamesDB = new Jr(oo, { addons: [], indexedDB: w, IDBKeyRange: A })).version(1).stores({ dbnames: "name" }), M.table("dbnames");
      }
      function Qr(w) {
        return w && typeof w.databases == "function";
      }
      function wf(w) {
        return Cn(function() {
          return nt.letThrough = !0, w();
        });
      }
      function ec(w) {
        return !("from" in w);
      }
      var Vn = function(w, A) {
        if (!this) {
          var M = new Vn();
          return w && "d" in w && c(M, w), M;
        }
        c(this, arguments.length ? { d: 1, from: w, to: 1 < arguments.length ? A : w } : { d: 0 });
      };
      function Pa(w, A, M) {
        var I = Ft(A, M);
        if (!isNaN(I)) {
          if (0 < I) throw RangeError();
          if (ec(w)) return c(w, { from: A, to: M, d: 1 });
          var $ = w.l, I = w.r;
          if (Ft(M, w.from) < 0) return $ ? Pa($, A, M) : w.l = { from: A, to: M, d: 1, l: null, r: null }, tc(w);
          if (0 < Ft(A, w.to)) return I ? Pa(I, A, M) : w.r = { from: A, to: M, d: 1, l: null, r: null }, tc(w);
          Ft(A, w.from) < 0 && (w.from = A, w.l = null, w.d = I ? I.d + 1 : 1), 0 < Ft(M, w.to) && (w.to = M, w.r = null, w.d = w.l ? w.l.d + 1 : 1), M = !w.r, $ && !w.l && ca(w, $), I && M && ca(w, I);
        }
      }
      function ca(w, A) {
        ec(A) || (function M(I, ie) {
          var Z = ie.from, ue = ie.to, U = ie.l, ie = ie.r;
          Pa(I, Z, ue), U && M(I, U), ie && M(I, ie);
        })(w, A);
      }
      function Mn(w, A) {
        var M = ns(A), I = M.next();
        if (I.done) return !1;
        for (var $ = I.value, Z = ns(w), ue = Z.next($.from), U = ue.value; !I.done && !ue.done; ) {
          if (Ft(U.from, $.to) <= 0 && 0 <= Ft(U.to, $.from)) return !0;
          Ft($.from, U.from) < 0 ? $ = (I = M.next(U.from)).value : U = (ue = Z.next($.from)).value;
        }
        return !1;
      }
      function ns(w) {
        var A = ec(w) ? null : { s: 0, n: w };
        return { next: function(M) {
          for (var I = 0 < arguments.length; A; ) switch (A.s) {
            case 0:
              if (A.s = 1, I) for (; A.n.l && Ft(M, A.n.from) < 0; ) A = { up: A, n: A.n.l, s: 1 };
              else for (; A.n.l; ) A = { up: A, n: A.n.l, s: 1 };
            case 1:
              if (A.s = 2, !I || Ft(M, A.n.to) <= 0) return { value: A.n, done: !1 };
            case 2:
              if (A.n.r) {
                A.s = 3, A = { up: A, n: A.n.r, s: 0 };
                continue;
              }
            case 3:
              A = A.up;
          }
          return { done: !0 };
        } };
      }
      function tc(w) {
        var A, M, I = (((A = w.r) === null || A === void 0 ? void 0 : A.d) || 0) - (((M = w.l) === null || M === void 0 ? void 0 : M.d) || 0), $ = 1 < I ? "r" : I < -1 ? "l" : "";
        $ && (A = $ == "r" ? "l" : "r", M = r({}, w), I = w[$], w.from = I.from, w.to = I.to, w[$] = I[$], M[$] = I[A], (w[A] = M).d = _f(M)), w.d = _f(w);
      }
      function _f(M) {
        var A = M.r, M = M.l;
        return (A ? M ? Math.max(A.d, M.d) : A.d : M ? M.d : 0) + 1;
      }
      function el(w, A) {
        return o(A).forEach(function(M) {
          w[M] ? ca(w[M], A[M]) : w[M] = (function I($) {
            var Z, ue, U = {};
            for (Z in $) g($, Z) && (ue = $[Z], U[Z] = !ue || typeof ue != "object" || F.has(ue.constructor) ? ue : I(ue));
            return U;
          })(A[M]);
        }), w;
      }
      function Sf(w, A) {
        return w.all || A.all || Object.keys(w).some(function(M) {
          return A[M] && Mn(A[M], w[M]);
        });
      }
      x(Vn.prototype, ((ei = { add: function(w) {
        return ca(this, w), this;
      }, addKey: function(w) {
        return Pa(this, w, w), this;
      }, addKeys: function(w) {
        var A = this;
        return w.forEach(function(M) {
          return Pa(A, M, M);
        }), this;
      }, hasKey: function(w) {
        var A = ns(this).next(w).value;
        return A && Ft(A.from, w) <= 0 && 0 <= Ft(A.to, w);
      } })[Q] = function() {
        return ns(this);
      }, ei));
      var go = {}, Cf = {}, nc = !1;
      function yo(w) {
        el(Cf, w), nc || (nc = !0, setTimeout(function() {
          nc = !1, Ia(Cf, !(Cf = {}));
        }, 0));
      }
      function Ia(w, A) {
        A === void 0 && (A = !1);
        var M = /* @__PURE__ */ new Set();
        if (w.all) for (var I = 0, $ = Object.values(go); I < $.length; I++) gh(ue = $[I], w, M, A);
        else for (var Z in w) {
          var ue, U = /^idb\:\/\/(.*)\/(.*)\//.exec(Z);
          U && (Z = U[1], U = U[2], (ue = go["idb://".concat(Z, "/").concat(U)]) && gh(ue, w, M, A));
        }
        M.forEach(function(ie) {
          return ie();
        });
      }
      function gh(w, A, M, I) {
        for (var $ = [], Z = 0, ue = Object.entries(w.queries.query); Z < ue.length; Z++) {
          for (var U = ue[Z], ie = U[0], ne = [], ye = 0, he = U[1]; ye < he.length; ye++) {
            var Se = he[ye];
            Sf(A, Se.obsSet) ? Se.subscribers.forEach(function(Te) {
              return M.add(Te);
            }) : I && ne.push(Se);
          }
          I && $.push([ie, ne]);
        }
        if (I) for (var be = 0, _e = $; be < _e.length; be++) {
          var ke = _e[be], ie = ke[0], ne = ke[1];
          w.queries.query[ie] = ne;
        }
      }
      function yh(w) {
        var A = w._state, M = w._deps.indexedDB;
        if (A.isBeingOpened || w.idbdb) return A.dbReadyPromise.then(function() {
          return A.dbOpenError ? cn(A.dbOpenError) : w;
        });
        A.isBeingOpened = !0, A.dbOpenError = null, A.openComplete = !1;
        var I = A.openCanceller, $ = Math.round(10 * w.verno), Z = !1;
        function ue() {
          if (A.openCanceller !== I) throw new Me.DatabaseClosed("db.open() was cancelled");
        }
        function U() {
          return new lt(function(Se, be) {
            if (ue(), !M) throw new Me.MissingAPI();
            var _e = w.name, ke = A.autoSchema || !$ ? M.open(_e) : M.open(_e, $);
            if (!ke) throw new Me.MissingAPI();
            ke.onerror = es(be), ke.onblocked = wn(w._fireOnBlocked), ke.onupgradeneeded = wn(function(Te) {
              var je;
              ye = ke.transaction, A.autoSchema && !w._options.allowEmptyDB ? (ke.onerror = ho, ye.abort(), ke.result.close(), (je = M.deleteDatabase(_e)).onsuccess = je.onerror = wn(function() {
                be(new Me.NoSuchDatabase("Database ".concat(_e, " doesnt exist")));
              })) : (ye.onerror = es(be), Te = Te.oldVersion > Math.pow(2, 62) ? 0 : Te.oldVersion, he = Te < 1, w.idbdb = ke.result, Z && iu(w, ye), ts(w, Te / 10, ye, be));
            }, be), ke.onsuccess = wn(function() {
              ye = null;
              var Te, je, ze, $e, Ve, et = w.idbdb = ke.result, st = R(et.objectStoreNames);
              if (0 < st.length) try {
                var Ue = et.transaction(($e = st).length === 1 ? $e[0] : $e, "readonly");
                if (A.autoSchema) je = et, ze = Ue, (Te = w).verno = je.version / 10, ze = Te._dbSchema = mo(0, je, ze), Te._storeNames = R(je.objectStoreNames, 0), Ju(Te, [Te._allTables], o(ze), ze);
                else if (au(w, w._dbSchema, Ue), ((Ve = Jo(mo(0, (Ve = w).idbdb, Ue), Ve._dbSchema)).add.length || Ve.change.some(function(it) {
                  return it.add.length || it.change.length;
                })) && !Z) return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."), et.close(), $ = et.version + 1, Z = !0, Se(U());
                ua(w, Ue);
              } catch {
              }
              oa.push(w), et.onversionchange = wn(function(it) {
                A.vcFired = !0, w.on("versionchange").fire(it);
              }), et.onclose = wn(function() {
                w.close({ disableAutoOpen: !1 });
              }), he && (Ve = w._deps, Ue = _e, et = Ve.indexedDB, Ve = Ve.IDBKeyRange, Qr(et) || Ue === oo || bf(et, Ve).put({ name: Ue }).catch(Je)), Se();
            }, be);
          }).catch(function(Se) {
            switch (Se == null ? void 0 : Se.name) {
              case "UnknownError":
                if (0 < A.PR1398_maxLoop) return A.PR1398_maxLoop--, console.warn("Dexie: Workaround for Chrome UnknownError on open()"), U();
                break;
              case "VersionError":
                if (0 < $) return $ = 0, U();
            }
            return lt.reject(Se);
          });
        }
        var ie, ne = A.dbReadyResolve, ye = null, he = !1;
        return lt.race([I, (typeof navigator > "u" ? lt.resolve() : !navigator.userAgentData && /Safari\//.test(navigator.userAgent) && !/Chrom(e|ium)\//.test(navigator.userAgent) && indexedDB.databases ? new Promise(function(Se) {
          function be() {
            return indexedDB.databases().finally(Se);
          }
          ie = setInterval(be, 100), be();
        }).finally(function() {
          return clearInterval(ie);
        }) : Promise.resolve()).then(U)]).then(function() {
          return ue(), A.onReadyBeingFired = [], lt.resolve(wf(function() {
            return w.on.ready.fire(w.vip);
          })).then(function Se() {
            if (0 < A.onReadyBeingFired.length) {
              var be = A.onReadyBeingFired.reduce(jn, Je);
              return A.onReadyBeingFired = [], lt.resolve(wf(function() {
                return be(w.vip);
              })).then(Se);
            }
          });
        }).finally(function() {
          A.openCanceller === I && (A.onReadyBeingFired = null, A.isBeingOpened = !1);
        }).catch(function(Se) {
          A.dbOpenError = Se;
          try {
            ye && ye.abort();
          } catch {
          }
          return I === A.openCanceller && w._close(), cn(Se);
        }).finally(function() {
          A.openComplete = !0, ne();
        }).then(function() {
          var Se;
          return he && (Se = {}, w.tables.forEach(function(be) {
            be.schema.indexes.forEach(function(_e) {
              _e.name && (Se["idb://".concat(w.name, "/").concat(be.name, "/").concat(_e.name)] = new Vn(-1 / 0, [[[]]]));
            }), Se["idb://".concat(w.name, "/").concat(be.name, "/")] = Se["idb://".concat(w.name, "/").concat(be.name, "/:dels")] = new Vn(-1 / 0, [[[]]]);
          }), $r(Xo).fire(Se), Ia(Se, !0)), w;
        });
      }
      function tl(w) {
        function A(Z) {
          return w.next(Z);
        }
        var M = $(A), I = $(function(Z) {
          return w.throw(Z);
        });
        function $(Z) {
          return function(ie) {
            var U = Z(ie), ie = U.value;
            return U.done ? ie : ie && typeof ie.then == "function" ? ie.then(M, I) : u(ie) ? Promise.all(ie).then(M, I) : M(ie);
          };
        }
        return $(A)();
      }
      function Os(w, A, M) {
        for (var I = u(w) ? w.slice() : [w], $ = 0; $ < M; ++$) I.push(A);
        return I;
      }
      var Ef = { stack: "dbcore", name: "VirtualIndexMiddleware", level: 1, create: function(w) {
        return r(r({}, w), { table: function(A) {
          var M = w.table(A), I = M.schema, $ = {}, Z = [];
          function ue(he, Se, be) {
            var _e = Er(he), ke = $[_e] = $[_e] || [], Te = he == null ? 0 : typeof he == "string" ? 1 : he.length, je = 0 < Se, je = r(r({}, be), { name: je ? "".concat(_e, "(virtual-from:").concat(be.name, ")") : be.name, lowLevelIndex: be, isVirtual: je, keyTail: Se, keyLength: Te, extractKey: Qo(he), unique: !je && be.unique });
            return ke.push(je), je.isPrimaryKey || Z.push(je), 1 < Te && ue(Te === 2 ? he[0] : he.slice(0, Te - 1), Se + 1, be), ke.sort(function(ze, $e) {
              return ze.keyTail - $e.keyTail;
            }), je;
          }
          A = ue(I.primaryKey.keyPath, 0, I.primaryKey), $[":id"] = [A];
          for (var U = 0, ie = I.indexes; U < ie.length; U++) {
            var ne = ie[U];
            ue(ne.keyPath, 0, ne);
          }
          function ye(he) {
            var Se, be = he.query.index;
            return be.isVirtual ? r(r({}, he), { query: { index: be.lowLevelIndex, range: (Se = he.query.range, be = be.keyTail, { type: Se.type === 1 ? 2 : Se.type, lower: Os(Se.lower, Se.lowerOpen ? w.MAX_KEY : w.MIN_KEY, be), lowerOpen: !0, upper: Os(Se.upper, Se.upperOpen ? w.MIN_KEY : w.MAX_KEY, be), upperOpen: !0 }) } }) : he;
          }
          return r(r({}, M), { schema: r(r({}, I), { primaryKey: A, indexes: Z, getIndexByKeyPath: function(he) {
            return (he = $[Er(he)]) && he[0];
          } }), count: function(he) {
            return M.count(ye(he));
          }, query: function(he) {
            return M.query(ye(he));
          }, openCursor: function(he) {
            var Se = he.query.index, be = Se.keyTail, _e = Se.isVirtual, ke = Se.keyLength;
            return _e ? M.openCursor(ye(he)).then(function(je) {
              return je && Te(je);
            }) : M.openCursor(he);
            function Te(je) {
              return Object.create(je, { continue: { value: function(ze) {
                ze != null ? je.continue(Os(ze, he.reverse ? w.MAX_KEY : w.MIN_KEY, be)) : he.unique ? je.continue(je.key.slice(0, ke).concat(he.reverse ? w.MIN_KEY : w.MAX_KEY, be)) : je.continue();
              } }, continuePrimaryKey: { value: function(ze, $e) {
                je.continuePrimaryKey(Os(ze, w.MAX_KEY, be), $e);
              } }, primaryKey: { get: function() {
                return je.primaryKey;
              } }, key: { get: function() {
                var ze = je.key;
                return ke === 1 ? ze[0] : ze.slice(0, ke);
              } }, value: { get: function() {
                return je.value;
              } } });
            }
          } });
        } });
      } };
      function ou(w, A, M, I) {
        return M = M || {}, I = I || "", o(w).forEach(function($) {
          var Z, ue, U;
          g(A, $) ? (Z = w[$], ue = A[$], typeof Z == "object" && typeof ue == "object" && Z && ue ? (U = le(Z)) !== le(ue) ? M[I + $] = A[$] : U === "Object" ? ou(Z, ue, M, I + $ + ".") : Z !== ue && (M[I + $] = A[$]) : Z !== ue && (M[I + $] = A[$])) : M[I + $] = void 0;
        }), o(A).forEach(function($) {
          g(w, $) || (M[I + $] = A[$]);
        }), M;
      }
      function rc(w, A) {
        return A.type === "delete" ? A.keys : A.keys || A.values.map(w.extractKey);
      }
      var ic = { stack: "dbcore", name: "HooksMiddleware", level: 2, create: function(w) {
        return r(r({}, w), { table: function(A) {
          var M = w.table(A), I = M.schema.primaryKey;
          return r(r({}, M), { mutate: function($) {
            var Z = nt.trans, ue = Z.table(A).hook, U = ue.deleting, ie = ue.creating, ne = ue.updating;
            switch ($.type) {
              case "add":
                if (ie.fire === Je) break;
                return Z._promise("readwrite", function() {
                  return ye($);
                }, !0);
              case "put":
                if (ie.fire === Je && ne.fire === Je) break;
                return Z._promise("readwrite", function() {
                  return ye($);
                }, !0);
              case "delete":
                if (U.fire === Je) break;
                return Z._promise("readwrite", function() {
                  return ye($);
                }, !0);
              case "deleteRange":
                if (U.fire === Je) break;
                return Z._promise("readwrite", function() {
                  return (function he(Se, be, _e) {
                    return M.query({ trans: Se, values: !1, query: { index: I, range: be }, limit: _e }).then(function(ke) {
                      var Te = ke.result;
                      return ye({ type: "delete", keys: Te, trans: Se }).then(function(je) {
                        return 0 < je.numFailures ? Promise.reject(je.failures[0]) : Te.length < _e ? { failures: [], numFailures: 0, lastResult: void 0 } : he(Se, r(r({}, be), { lower: Te[Te.length - 1], lowerOpen: !0 }), _e);
                      });
                    });
                  })($.trans, $.range, 1e4);
                }, !0);
            }
            return M.mutate($);
            function ye(he) {
              var Se, be, _e, ke = nt.trans, Te = he.keys || rc(I, he);
              if (!Te) throw new Error("Keys missing");
              return (he = he.type === "add" || he.type === "put" ? r(r({}, he), { keys: Te }) : r({}, he)).type !== "delete" && (he.values = i([], he.values)), he.keys && (he.keys = i([], he.keys)), Se = M, _e = Te, ((be = he).type === "add" ? Promise.resolve([]) : Se.getMany({ trans: be.trans, keys: _e, cache: "immutable" })).then(function(je) {
                var ze = Te.map(function($e, Ve) {
                  var et, st, Ue, it = je[Ve], ot = { onerror: null, onsuccess: null };
                  return he.type === "delete" ? U.fire.call(ot, $e, it, ke) : he.type === "add" || it === void 0 ? (et = ie.fire.call(ot, $e, he.values[Ve], ke), $e == null && et != null && (he.keys[Ve] = $e = et, I.outbound || q(he.values[Ve], I.keyPath, $e))) : (et = ou(it, he.values[Ve]), (st = ne.fire.call(ot, et, $e, it, ke)) && (Ue = he.values[Ve], Object.keys(st).forEach(function(Qe) {
                    g(Ue, Qe) ? Ue[Qe] = st[Qe] : q(Ue, Qe, st[Qe]);
                  }))), ot;
                });
                return M.mutate(he).then(function($e) {
                  for (var Ve = $e.failures, et = $e.results, st = $e.numFailures, $e = $e.lastResult, Ue = 0; Ue < Te.length; ++Ue) {
                    var it = (et || Te)[Ue], ot = ze[Ue];
                    it == null ? ot.onerror && ot.onerror(Ve[Ue]) : ot.onsuccess && ot.onsuccess(he.type === "put" && je[Ue] ? he.values[Ue] : it);
                  }
                  return { failures: Ve, results: et, numFailures: st, lastResult: $e };
                }).catch(function($e) {
                  return ze.forEach(function(Ve) {
                    return Ve.onerror && Ve.onerror($e);
                  }), Promise.reject($e);
                });
              });
            }
          } });
        } });
      } };
      function lu(w, A, M) {
        try {
          if (!A || A.keys.length < w.length) return null;
          for (var I = [], $ = 0, Z = 0; $ < A.keys.length && Z < w.length; ++$) Ft(A.keys[$], w[Z]) === 0 && (I.push(M ? me(A.values[$]) : A.values[$]), ++Z);
          return I.length === w.length ? I : null;
        } catch {
          return null;
        }
      }
      var vh = { stack: "dbcore", level: -1, create: function(w) {
        return { table: function(A) {
          var M = w.table(A);
          return r(r({}, M), { getMany: function(I) {
            if (!I.cache) return M.getMany(I);
            var $ = lu(I.keys, I.trans._cache, I.cache === "clone");
            return $ ? lt.resolve($) : M.getMany(I).then(function(Z) {
              return I.trans._cache = { keys: I.keys, values: I.cache === "clone" ? me(Z) : Z }, Z;
            });
          }, mutate: function(I) {
            return I.type !== "add" && (I.trans._cache = null), M.mutate(I);
          } });
        } };
      } };
      function La(w, A) {
        return w.trans.mode === "readonly" && !!w.subscr && !w.trans.explicit && w.trans.db._options.cache !== "disabled" && !A.schema.primaryKey.outbound;
      }
      function gi(w, A) {
        switch (w) {
          case "query":
            return A.values && !A.unique;
          case "get":
          case "getMany":
          case "count":
          case "openCursor":
            return !1;
        }
      }
      var kf = { stack: "dbcore", level: 0, name: "Observability", create: function(w) {
        var A = w.schema.name, M = new Vn(w.MIN_KEY, w.MAX_KEY);
        return r(r({}, w), { transaction: function(I, $, Z) {
          if (nt.subscr && $ !== "readonly") throw new Me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(nt.querier));
          return w.transaction(I, $, Z);
        }, table: function(I) {
          var $ = w.table(I), Z = $.schema, ue = Z.primaryKey, he = Z.indexes, U = ue.extractKey, ie = ue.outbound, ne = ue.autoIncrement && he.filter(function(be) {
            return be.compound && be.keyPath.includes(ue.keyPath);
          }), ye = r(r({}, $), { mutate: function(be) {
            function _e(Qe) {
              return Qe = "idb://".concat(A, "/").concat(I, "/").concat(Qe), $e[Qe] || ($e[Qe] = new Vn());
            }
            var ke, Te, je, ze = be.trans, $e = be.mutatedParts || (be.mutatedParts = {}), Ve = _e(""), et = _e(":dels"), st = be.type, ot = be.type === "deleteRange" ? [be.range] : be.type === "delete" ? [be.keys] : be.values.length < 50 ? [rc(ue, be).filter(function(Qe) {
              return Qe;
            }), be.values] : [], Ue = ot[0], it = ot[1], ot = be.trans._cache;
            return u(Ue) ? (Ve.addKeys(Ue), (ot = st === "delete" || Ue.length === it.length ? lu(Ue, ot) : null) || et.addKeys(Ue), (ot || it) && (ke = _e, Te = ot, je = it, Z.indexes.forEach(function(Qe) {
              var gt = ke(Qe.name || "");
              function Et(Lt) {
                return Lt != null ? Qe.extractKey(Lt) : null;
              }
              function Pt(Lt) {
                return Qe.multiEntry && u(Lt) ? Lt.forEach(function(Gn) {
                  return gt.addKey(Gn);
                }) : gt.addKey(Lt);
              }
              (Te || je).forEach(function(Lt, vr) {
                var jt = Te && Et(Te[vr]), vr = je && Et(je[vr]);
                Ft(jt, vr) !== 0 && (jt != null && Pt(jt), vr != null && Pt(vr));
              });
            }))) : Ue ? (it = { from: (it = Ue.lower) !== null && it !== void 0 ? it : w.MIN_KEY, to: (it = Ue.upper) !== null && it !== void 0 ? it : w.MAX_KEY }, et.add(it), Ve.add(it)) : (Ve.add(M), et.add(M), Z.indexes.forEach(function(Qe) {
              return _e(Qe.name).add(M);
            })), $.mutate(be).then(function(Qe) {
              return !Ue || be.type !== "add" && be.type !== "put" || (Ve.addKeys(Qe.results), ne && ne.forEach(function(gt) {
                for (var Et = be.values.map(function(jt) {
                  return gt.extractKey(jt);
                }), Pt = gt.keyPath.findIndex(function(jt) {
                  return jt === ue.keyPath;
                }), Lt = 0, Gn = Qe.results.length; Lt < Gn; ++Lt) Et[Lt][Pt] = Qe.results[Lt];
                _e(gt.name).addKeys(Et);
              })), ze.mutatedParts = el(ze.mutatedParts || {}, $e), Qe;
            });
          } }), he = function(_e) {
            var ke = _e.query, _e = ke.index, ke = ke.range;
            return [_e, new Vn((_e = ke.lower) !== null && _e !== void 0 ? _e : w.MIN_KEY, (ke = ke.upper) !== null && ke !== void 0 ? ke : w.MAX_KEY)];
          }, Se = { get: function(be) {
            return [ue, new Vn(be.key)];
          }, getMany: function(be) {
            return [ue, new Vn().addKeys(be.keys)];
          }, count: he, query: he, openCursor: he };
          return o(Se).forEach(function(be) {
            ye[be] = function(_e) {
              var ke = nt.subscr, Te = !!ke, je = La(nt, $) && gi(be, _e) ? _e.obsSet = {} : ke;
              if (Te) {
                var ze = function(it) {
                  return it = "idb://".concat(A, "/").concat(I, "/").concat(it), je[it] || (je[it] = new Vn());
                }, $e = ze(""), Ve = ze(":dels"), ke = Se[be](_e), Te = ke[0], ke = ke[1];
                if ((be === "query" && Te.isPrimaryKey && !_e.values ? Ve : ze(Te.name || "")).add(ke), !Te.isPrimaryKey) {
                  if (be !== "count") {
                    var et = be === "query" && ie && _e.values && $.query(r(r({}, _e), { values: !1 }));
                    return $[be].apply(this, arguments).then(function(it) {
                      if (be === "query") {
                        if (ie && _e.values) return et.then(function(Et) {
                          return Et = Et.result, $e.addKeys(Et), it;
                        });
                        var ot = _e.values ? it.result.map(U) : it.result;
                        (_e.values ? $e : Ve).addKeys(ot);
                      } else if (be === "openCursor") {
                        var Qe = it, gt = _e.values;
                        return Qe && Object.create(Qe, { key: { get: function() {
                          return Ve.addKey(Qe.primaryKey), Qe.key;
                        } }, primaryKey: { get: function() {
                          var Et = Qe.primaryKey;
                          return Ve.addKey(Et), Et;
                        } }, value: { get: function() {
                          return gt && $e.addKey(Qe.primaryKey), Qe.value;
                        } } });
                      }
                      return it;
                    });
                  }
                  Ve.add(M);
                }
              }
              return $[be].apply(this, arguments);
            };
          }), ye;
        } });
      } };
      function nl(w, A, M) {
        if (M.numFailures === 0) return A;
        if (A.type === "deleteRange") return null;
        var I = A.keys ? A.keys.length : "values" in A && A.values ? A.values.length : 1;
        return M.numFailures === I ? null : (A = r({}, A), u(A.keys) && (A.keys = A.keys.filter(function($, Z) {
          return !(Z in M.failures);
        })), "values" in A && u(A.values) && (A.values = A.values.filter(function($, Z) {
          return !(Z in M.failures);
        })), A);
      }
      function uu(w, A) {
        return M = w, ((I = A).lower === void 0 || (I.lowerOpen ? 0 < Ft(M, I.lower) : 0 <= Ft(M, I.lower))) && (w = w, (A = A).upper === void 0 || (A.upperOpen ? Ft(w, A.upper) < 0 : Ft(w, A.upper) <= 0));
        var M, I;
      }
      function sc(w, A, Se, I, $, Z) {
        if (!Se || Se.length === 0) return w;
        var ue = A.query.index, U = ue.multiEntry, ie = A.query.range, ne = I.schema.primaryKey.extractKey, ye = ue.extractKey, he = (ue.lowLevelIndex || ue).extractKey, Se = Se.reduce(function(be, _e) {
          var ke = be, Te = [];
          if (_e.type === "add" || _e.type === "put") for (var je = new Vn(), ze = _e.values.length - 1; 0 <= ze; --ze) {
            var $e, Ve = _e.values[ze], et = ne(Ve);
            je.hasKey(et) || ($e = ye(Ve), (U && u($e) ? $e.some(function(Qe) {
              return uu(Qe, ie);
            }) : uu($e, ie)) && (je.addKey(et), Te.push(Ve)));
          }
          switch (_e.type) {
            case "add":
              var st = new Vn().addKeys(A.values ? be.map(function(gt) {
                return ne(gt);
              }) : be), ke = be.concat(A.values ? Te.filter(function(gt) {
                return gt = ne(gt), !st.hasKey(gt) && (st.addKey(gt), !0);
              }) : Te.map(function(gt) {
                return ne(gt);
              }).filter(function(gt) {
                return !st.hasKey(gt) && (st.addKey(gt), !0);
              }));
              break;
            case "put":
              var Ue = new Vn().addKeys(_e.values.map(function(gt) {
                return ne(gt);
              }));
              ke = be.filter(function(gt) {
                return !Ue.hasKey(A.values ? ne(gt) : gt);
              }).concat(A.values ? Te : Te.map(function(gt) {
                return ne(gt);
              }));
              break;
            case "delete":
              var it = new Vn().addKeys(_e.keys);
              ke = be.filter(function(gt) {
                return !it.hasKey(A.values ? ne(gt) : gt);
              });
              break;
            case "deleteRange":
              var ot = _e.range;
              ke = be.filter(function(gt) {
                return !uu(ne(gt), ot);
              });
          }
          return ke;
        }, w);
        return Se === w ? w : (Se.sort(function(be, _e) {
          return Ft(he(be), he(_e)) || Ft(ne(be), ne(_e));
        }), A.limit && A.limit < 1 / 0 && (Se.length > A.limit ? Se.length = A.limit : w.length === A.limit && Se.length < A.limit && ($.dirty = !0)), Z ? Object.freeze(Se) : Se);
      }
      function rl(w, A) {
        return Ft(w.lower, A.lower) === 0 && Ft(w.upper, A.upper) === 0 && !!w.lowerOpen == !!A.lowerOpen && !!w.upperOpen == !!A.upperOpen;
      }
      function cu(w, A) {
        return (function(M, I, $, Z) {
          if (M === void 0) return I !== void 0 ? -1 : 0;
          if (I === void 0) return 1;
          if ((I = Ft(M, I)) === 0) {
            if ($ && Z) return 0;
            if ($) return 1;
            if (Z) return -1;
          }
          return I;
        })(w.lower, A.lower, w.lowerOpen, A.lowerOpen) <= 0 && 0 <= (function(M, I, $, Z) {
          if (M === void 0) return I !== void 0 ? 1 : 0;
          if (I === void 0) return -1;
          if ((I = Ft(M, I)) === 0) {
            if ($ && Z) return 0;
            if ($) return -1;
            if (Z) return 1;
          }
          return I;
        })(w.upper, A.upper, w.upperOpen, A.upperOpen);
      }
      function jm(w, A, M, I) {
        w.subscribers.add(M), I.addEventListener("abort", function() {
          var $, Z;
          w.subscribers.delete(M), w.subscribers.size === 0 && ($ = w, Z = A, setTimeout(function() {
            $.subscribers.size === 0 && fe(Z, $);
          }, 3e3));
        });
      }
      var ac = { stack: "dbcore", level: 0, name: "Cache", create: function(w) {
        var A = w.schema.name;
        return r(r({}, w), { transaction: function(M, I, $) {
          var Z, ue, U = w.transaction(M, I, $);
          return I === "readwrite" && (ue = (Z = new AbortController()).signal, $ = function(ie) {
            return function() {
              if (Z.abort(), I === "readwrite") {
                for (var ne = /* @__PURE__ */ new Set(), ye = 0, he = M; ye < he.length; ye++) {
                  var Se = he[ye], be = go["idb://".concat(A, "/").concat(Se)];
                  if (be) {
                    var _e = w.table(Se), ke = be.optimisticOps.filter(function(gt) {
                      return gt.trans === U;
                    });
                    if (U._explicit && ie && U.mutatedParts) for (var Te = 0, je = Object.values(be.queries.query); Te < je.length; Te++) for (var ze = 0, $e = (st = je[Te]).slice(); ze < $e.length; ze++) Sf((Ue = $e[ze]).obsSet, U.mutatedParts) && (fe(st, Ue), Ue.subscribers.forEach(function(gt) {
                      return ne.add(gt);
                    }));
                    else if (0 < ke.length) {
                      be.optimisticOps = be.optimisticOps.filter(function(gt) {
                        return gt.trans !== U;
                      });
                      for (var Ve = 0, et = Object.values(be.queries.query); Ve < et.length; Ve++) for (var st, Ue, it, ot = 0, Qe = (st = et[Ve]).slice(); ot < Qe.length; ot++) (Ue = Qe[ot]).res != null && U.mutatedParts && (ie && !Ue.dirty ? (it = Object.isFrozen(Ue.res), it = sc(Ue.res, Ue.req, ke, _e, Ue, it), Ue.dirty ? (fe(st, Ue), Ue.subscribers.forEach(function(gt) {
                        return ne.add(gt);
                      })) : it !== Ue.res && (Ue.res = it, Ue.promise = lt.resolve({ result: it }))) : (Ue.dirty && fe(st, Ue), Ue.subscribers.forEach(function(gt) {
                        return ne.add(gt);
                      })));
                    }
                  }
                }
                ne.forEach(function(gt) {
                  return gt();
                });
              }
            };
          }, U.addEventListener("abort", $(!1), { signal: ue }), U.addEventListener("error", $(!1), { signal: ue }), U.addEventListener("complete", $(!0), { signal: ue })), U;
        }, table: function(M) {
          var I = w.table(M), $ = I.schema.primaryKey;
          return r(r({}, I), { mutate: function(Z) {
            var ue = nt.trans;
            if ($.outbound || ue.db._options.cache === "disabled" || ue.explicit || ue.idbtrans.mode !== "readwrite") return I.mutate(Z);
            var U = go["idb://".concat(A, "/").concat(M)];
            return U ? (ue = I.mutate(Z), Z.type !== "add" && Z.type !== "put" || !(50 <= Z.values.length || rc($, Z).some(function(ie) {
              return ie == null;
            })) ? (U.optimisticOps.push(Z), Z.mutatedParts && yo(Z.mutatedParts), ue.then(function(ie) {
              0 < ie.numFailures && (fe(U.optimisticOps, Z), (ie = nl(0, Z, ie)) && U.optimisticOps.push(ie), Z.mutatedParts && yo(Z.mutatedParts));
            }), ue.catch(function() {
              fe(U.optimisticOps, Z), Z.mutatedParts && yo(Z.mutatedParts);
            })) : ue.then(function(ie) {
              var ne = nl(0, r(r({}, Z), { values: Z.values.map(function(ye, he) {
                var Se;
                return ie.failures[he] ? ye : (ye = (Se = $.keyPath) !== null && Se !== void 0 && Se.includes(".") ? me(ye) : r({}, ye), q(ye, $.keyPath, ie.results[he]), ye);
              }) }), ie);
              U.optimisticOps.push(ne), queueMicrotask(function() {
                return Z.mutatedParts && yo(Z.mutatedParts);
              });
            }), ue) : I.mutate(Z);
          }, query: function(Z) {
            if (!La(nt, I) || !gi("query", Z)) return I.query(Z);
            var ue = ((ne = nt.trans) === null || ne === void 0 ? void 0 : ne.db._options.cache) === "immutable", he = nt, U = he.requery, ie = he.signal, ne = (function(_e, ke, Te, je) {
              var ze = go["idb://".concat(_e, "/").concat(ke)];
              if (!ze) return [];
              if (!(ke = ze.queries[Te])) return [null, !1, ze, null];
              var $e = ke[(je.query ? je.query.index.name : null) || ""];
              if (!$e) return [null, !1, ze, null];
              switch (Te) {
                case "query":
                  var Ve = $e.find(function(et) {
                    return et.req.limit === je.limit && et.req.values === je.values && rl(et.req.query.range, je.query.range);
                  });
                  return Ve ? [Ve, !0, ze, $e] : [$e.find(function(et) {
                    return ("limit" in et.req ? et.req.limit : 1 / 0) >= je.limit && (!je.values || et.req.values) && cu(et.req.query.range, je.query.range);
                  }), !1, ze, $e];
                case "count":
                  return Ve = $e.find(function(et) {
                    return rl(et.req.query.range, je.query.range);
                  }), [Ve, !!Ve, ze, $e];
              }
            })(A, M, "query", Z), ye = ne[0], he = ne[1], Se = ne[2], be = ne[3];
            return ye && he ? ye.obsSet = Z.obsSet : (he = I.query(Z).then(function(_e) {
              var ke = _e.result;
              if (ye && (ye.res = ke), ue) {
                for (var Te = 0, je = ke.length; Te < je; ++Te) Object.freeze(ke[Te]);
                Object.freeze(ke);
              } else _e.result = me(ke);
              return _e;
            }).catch(function(_e) {
              return be && ye && fe(be, ye), Promise.reject(_e);
            }), ye = { obsSet: Z.obsSet, promise: he, subscribers: /* @__PURE__ */ new Set(), type: "query", req: Z, dirty: !1 }, be ? be.push(ye) : (be = [ye], (Se = Se || (go["idb://".concat(A, "/").concat(M)] = { queries: { query: {}, count: {} }, objs: /* @__PURE__ */ new Map(), optimisticOps: [], unsignaledParts: {} })).queries.query[Z.query.index.name || ""] = be)), jm(ye, be, U, ie), ye.promise.then(function(_e) {
              return { result: sc(_e.result, Z, Se == null ? void 0 : Se.optimisticOps, I, ye, ue) };
            });
          } });
        } });
      } };
      function fu(w, A) {
        return new Proxy(w, { get: function(M, I, $) {
          return I === "db" ? A : Reflect.get(M, I, $);
        } });
      }
      var Jr = (Hn.prototype.version = function(w) {
        if (isNaN(w) || w < 0.1) throw new Me.Type("Given version is not a positive number");
        if (w = Math.round(10 * w) / 10, this.idbdb || this._state.isBeingOpened) throw new Me.Schema("Cannot add version when database is open");
        this.verno = Math.max(this.verno, w);
        var A = this._versions, M = A.filter(function(I) {
          return I._cfg.version === w;
        })[0];
        return M || (M = new this.Version(w), A.push(M), A.sort(ru), M.stores({}), this._state.autoSchema = !1, M);
      }, Hn.prototype._whenReady = function(w) {
        var A = this;
        return this.idbdb && (this._state.openComplete || nt.letThrough || this._vip) ? w() : new lt(function(M, I) {
          if (A._state.openComplete) return I(new Me.DatabaseClosed(A._state.dbOpenError));
          if (!A._state.isBeingOpened) {
            if (!A._state.autoOpen) return void I(new Me.DatabaseClosed());
            A.open().catch(Je);
          }
          A._state.dbReadyPromise.then(M, I);
        }).then(w);
      }, Hn.prototype.use = function(w) {
        var A = w.stack, M = w.create, I = w.level, $ = w.name;
        return $ && this.unuse({ stack: A, name: $ }), w = this._middlewares[A] || (this._middlewares[A] = []), w.push({ stack: A, create: M, level: I ?? 10, name: $ }), w.sort(function(Z, ue) {
          return Z.level - ue.level;
        }), this;
      }, Hn.prototype.unuse = function(w) {
        var A = w.stack, M = w.name, I = w.create;
        return A && this._middlewares[A] && (this._middlewares[A] = this._middlewares[A].filter(function($) {
          return I ? $.create !== I : !!M && $.name !== M;
        })), this;
      }, Hn.prototype.open = function() {
        var w = this;
        return bi(Ln, function() {
          return yh(w);
        });
      }, Hn.prototype._close = function() {
        this.on.close.fire(new CustomEvent("close"));
        var w = this._state, A = oa.indexOf(this);
        if (0 <= A && oa.splice(A, 1), this.idbdb) {
          try {
            this.idbdb.close();
          } catch {
          }
          this.idbdb = null;
        }
        w.isBeingOpened || (w.dbReadyPromise = new lt(function(M) {
          w.dbReadyResolve = M;
        }), w.openCanceller = new lt(function(M, I) {
          w.cancelOpen = I;
        }));
      }, Hn.prototype.close = function(M) {
        var A = (M === void 0 ? { disableAutoOpen: !0 } : M).disableAutoOpen, M = this._state;
        A ? (M.isBeingOpened && M.cancelOpen(new Me.DatabaseClosed()), this._close(), M.autoOpen = !1, M.dbOpenError = new Me.DatabaseClosed()) : (this._close(), M.autoOpen = this._options.autoOpen || M.isBeingOpened, M.openComplete = !1, M.dbOpenError = null);
      }, Hn.prototype.delete = function(w) {
        var A = this;
        w === void 0 && (w = { disableAutoOpen: !0 });
        var M = 0 < arguments.length && typeof arguments[0] != "object", I = this._state;
        return new lt(function($, Z) {
          function ue() {
            A.close(w);
            var U = A._deps.indexedDB.deleteDatabase(A.name);
            U.onsuccess = wn(function() {
              var ie, ne, ye;
              ie = A._deps, ne = A.name, ye = ie.indexedDB, ie = ie.IDBKeyRange, Qr(ye) || ne === oo || bf(ye, ie).delete(ne).catch(Je), $();
            }), U.onerror = es(Z), U.onblocked = A._fireOnBlocked;
          }
          if (M) throw new Me.InvalidArgument("Invalid closeOptions argument to db.delete()");
          I.isBeingOpened ? I.dbReadyPromise.then(ue) : ue();
        });
      }, Hn.prototype.backendDB = function() {
        return this.idbdb;
      }, Hn.prototype.isOpen = function() {
        return this.idbdb !== null;
      }, Hn.prototype.hasBeenClosed = function() {
        var w = this._state.dbOpenError;
        return w && w.name === "DatabaseClosed";
      }, Hn.prototype.hasFailed = function() {
        return this._state.dbOpenError !== null;
      }, Hn.prototype.dynamicallyOpened = function() {
        return this._state.autoSchema;
      }, Object.defineProperty(Hn.prototype, "tables", { get: function() {
        var w = this;
        return o(this._allTables).map(function(A) {
          return w._allTables[A];
        });
      }, enumerable: !1, configurable: !0 }), Hn.prototype.transaction = function() {
        var w = (function(A, M, I) {
          var $ = arguments.length;
          if ($ < 2) throw new Me.InvalidArgument("Too few arguments");
          for (var Z = new Array($ - 1); --$; ) Z[$ - 1] = arguments[$];
          return I = Z.pop(), [A, W(Z), I];
        }).apply(this, arguments);
        return this._transaction.apply(this, w);
      }, Hn.prototype._transaction = function(w, A, M) {
        var I = this, $ = nt.trans;
        $ && $.db === this && w.indexOf("!") === -1 || ($ = null);
        var Z, ue, U = w.indexOf("?") !== -1;
        w = w.replace("!", "").replace("?", "");
        try {
          if (ue = A.map(function(ne) {
            if (ne = ne instanceof I.Table ? ne.name : ne, typeof ne != "string") throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
            return ne;
          }), w == "r" || w === Oi) Z = Oi;
          else {
            if (w != "rw" && w != Ji) throw new Me.InvalidArgument("Invalid transaction mode: " + w);
            Z = Ji;
          }
          if ($) {
            if ($.mode === Oi && Z === Ji) {
              if (!U) throw new Me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
              $ = null;
            }
            $ && ue.forEach(function(ne) {
              if ($ && $.storeNames.indexOf(ne) === -1) {
                if (!U) throw new Me.SubTransaction("Table " + ne + " not included in parent transaction.");
                $ = null;
              }
            }), U && $ && !$.active && ($ = null);
          }
        } catch (ne) {
          return $ ? $._promise(null, function(ye, he) {
            he(ne);
          }) : cn(ne);
        }
        var ie = (function ne(ye, he, Se, be, _e) {
          return lt.resolve().then(function() {
            var ke = nt.transless || nt, Te = ye._createTransaction(he, Se, ye._dbSchema, be);
            if (Te.explicit = !0, ke = { trans: Te, transless: ke }, be) Te.idbtrans = be.idbtrans;
            else try {
              Te.create(), Te.idbtrans._explicit = !0, ye._state.PR1398_maxLoop = 3;
            } catch ($e) {
              return $e.name === Re.InvalidState && ye.isOpen() && 0 < --ye._state.PR1398_maxLoop ? (console.warn("Dexie: Need to reopen db"), ye.close({ disableAutoOpen: !1 }), ye.open().then(function() {
                return ne(ye, he, Se, null, _e);
              })) : cn($e);
            }
            var je, ze = re(_e);
            return ze && er(), ke = lt.follow(function() {
              var $e;
              (je = _e.call(Te, Te)) && (ze ? ($e = qr.bind(null, null), je.then($e, $e)) : typeof je.next == "function" && typeof je.throw == "function" && (je = tl(je)));
            }, ke), (je && typeof je.then == "function" ? lt.resolve(je).then(function($e) {
              return Te.active ? $e : cn(new Me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"));
            }) : ke.then(function() {
              return je;
            })).then(function($e) {
              return be && Te._resolve(), Te._completion.then(function() {
                return $e;
              });
            }).catch(function($e) {
              return Te._reject($e), cn($e);
            });
          });
        }).bind(null, this, Z, ue, $, M);
        return $ ? $._promise(Z, ie, "lock") : nt.trans ? bi(nt.transless, function() {
          return I._whenReady(ie);
        }) : this._whenReady(ie);
      }, Hn.prototype.table = function(w) {
        if (!g(this._allTables, w)) throw new Me.InvalidTable("Table ".concat(w, " does not exist"));
        return this._allTables[w];
      }, Hn);
      function Hn(w, A) {
        var M = this;
        this._middlewares = {}, this.verno = 0;
        var I = Hn.dependencies;
        this._options = A = r({ addons: Hn.addons, autoOpen: !0, indexedDB: I.indexedDB, IDBKeyRange: I.IDBKeyRange, cache: "cloned" }, A), this._deps = { indexedDB: A.indexedDB, IDBKeyRange: A.IDBKeyRange }, I = A.addons, this._dbSchema = {}, this._versions = [], this._storeNames = [], this._allTables = {}, this.idbdb = null, this._novip = this;
        var $, Z, ue, U, ie, ne = { dbOpenError: null, isBeingOpened: !1, onReadyBeingFired: null, openComplete: !1, dbReadyResolve: Je, dbReadyPromise: null, cancelOpen: Je, openCanceller: null, autoSchema: !0, PR1398_maxLoop: 3, autoOpen: A.autoOpen };
        ne.dbReadyPromise = new lt(function(he) {
          ne.dbReadyResolve = he;
        }), ne.openCanceller = new lt(function(he, Se) {
          ne.cancelOpen = Se;
        }), this._state = ne, this.name = w, this.on = uo(this, "populate", "blocked", "versionchange", "close", { ready: [jn, Je] }), this.once = function(he, Se) {
          var be = function() {
            for (var _e = [], ke = 0; ke < arguments.length; ke++) _e[ke] = arguments[ke];
            M.on(he).unsubscribe(be), Se.apply(M, _e);
          };
          return M.on(he, be);
        }, this.on.ready.subscribe = N(this.on.ready.subscribe, function(he) {
          return function(Se, be) {
            Hn.vip(function() {
              var _e, ke = M._state;
              ke.openComplete ? (ke.dbOpenError || lt.resolve().then(Se), be && he(Se)) : ke.onReadyBeingFired ? (ke.onReadyBeingFired.push(Se), be && he(Se)) : (he(Se), _e = M, be || he(function Te() {
                _e.on.ready.unsubscribe(Se), _e.on.ready.unsubscribe(Te);
              }));
            });
          };
        }), this.Collection = ($ = this, yr(dh.prototype, function(je, Te) {
          this.db = $;
          var be = Zo, _e = null;
          if (Te) try {
            be = Te();
          } catch (ze) {
            _e = ze;
          }
          var ke = je._ctx, Te = ke.table, je = Te.hook.reading.fire;
          this._ctx = { table: Te, index: ke.index, isPrimKey: !ke.index || Te.schema.primKey.keyPath && ke.index === Te.schema.primKey.name, range: be, keysOnly: !1, dir: "next", unique: "", algorithm: null, filter: null, replayFilter: null, justLimit: !0, isMatch: null, offset: 0, limit: 1 / 0, error: _e, or: ke.or, valueMapper: je !== ct ? je : null };
        })), this.Table = (Z = this, yr(Oa.prototype, function(he, Se, be) {
          this.db = Z, this._tx = be, this.name = he, this.schema = Se, this.hook = Z._allTables[he] ? Z._allTables[he].hook : uo(null, { creating: [At, Je], reading: [mt, ct], updating: [qn, Je], deleting: [xt, Je] });
        })), this.Transaction = (ue = this, yr(yf.prototype, function(he, Se, be, _e, ke) {
          var Te = this;
          he !== "readonly" && Se.forEach(function(je) {
            je = (je = be[je]) === null || je === void 0 ? void 0 : je.yProps, je && (Se = Se.concat(je.map(function(ze) {
              return ze.updatesTable;
            })));
          }), this.db = ue, this.mode = he, this.storeNames = Se, this.schema = be, this.chromeTransactionDurability = _e, this.idbtrans = null, this.on = uo(this, "complete", "error", "abort"), this.parent = ke || null, this.active = !0, this._reculock = 0, this._blockedFuncs = [], this._resolve = null, this._reject = null, this._waitingFor = null, this._waitingQueue = null, this._spinCount = 0, this._completion = new lt(function(je, ze) {
            Te._resolve = je, Te._reject = ze;
          }), this._completion.then(function() {
            Te.active = !1, Te.on.complete.fire();
          }, function(je) {
            var ze = Te.active;
            return Te.active = !1, Te.on.error.fire(je), Te.parent ? Te.parent._reject(je) : ze && Te.idbtrans && Te.idbtrans.abort(), cn(je);
          });
        })), this.Version = (U = this, yr(mh.prototype, function(he) {
          this.db = U, this._cfg = { version: he, storesSource: null, dbschema: {}, tables: {}, contentUpgrade: null };
        })), this.WhereClause = (ie = this, yr(za.prototype, function(he, Se, be) {
          if (this.db = ie, this._ctx = { table: he, index: Se === ":id" ? null : Se, or: be }, this._cmp = this._ascending = Ft, this._descending = function(_e, ke) {
            return Ft(ke, _e);
          }, this._max = function(_e, ke) {
            return 0 < Ft(_e, ke) ? _e : ke;
          }, this._min = function(_e, ke) {
            return Ft(_e, ke) < 0 ? _e : ke;
          }, this._IDBKeyRange = ie._deps.IDBKeyRange, !this._IDBKeyRange) throw new Me.MissingAPI();
        })), this.on("versionchange", function(he) {
          0 < he.newVersion ? console.warn("Another connection wants to upgrade database '".concat(M.name, "'. Closing db now to resume the upgrade.")) : console.warn("Another connection wants to delete database '".concat(M.name, "'. Closing db now to resume the delete request.")), M.close({ disableAutoOpen: !1 });
        }), this.on("blocked", function(he) {
          !he.newVersion || he.newVersion < he.oldVersion ? console.warn("Dexie.delete('".concat(M.name, "') was blocked")) : console.warn("Upgrade '".concat(M.name, "' blocked by other connection holding version ").concat(he.oldVersion / 10));
        }), this._maxKey = fn(A.IDBKeyRange), this._createTransaction = function(he, Se, be, _e) {
          return new M.Transaction(he, Se, be, M._options.chromeTransactionDurability, _e);
        }, this._fireOnBlocked = function(he) {
          M.on("blocked").fire(he), oa.filter(function(Se) {
            return Se.name === M.name && Se !== M && !Se._state.vcFired;
          }).map(function(Se) {
            return Se.on("versionchange").fire(he);
          });
        }, this.use(vh), this.use(ac), this.use(kf), this.use(Ef), this.use(ic);
        var ye = new Proxy(this, { get: function(he, Se, be) {
          if (Se === "_vip") return !0;
          if (Se === "table") return function(ke) {
            return fu(M.table(ke), ye);
          };
          var _e = Reflect.get(he, Se, be);
          return _e instanceof Oa ? fu(_e, ye) : Se === "tables" ? _e.map(function(ke) {
            return fu(ke, ye);
          }) : Se === "_createTransaction" ? function() {
            return fu(_e.apply(this, arguments), ye);
          } : _e;
        } });
        this.vip = ye, I.forEach(function(he) {
          return he(M);
        });
      }
      var il, ei = typeof Symbol < "u" && "observable" in Symbol ? Symbol.observable : "@@observable", Tf = (rs.prototype.subscribe = function(w, A, M) {
        return this._subscribe(w && typeof w != "function" ? w : { next: w, error: A, complete: M });
      }, rs.prototype[ei] = function() {
        return this;
      }, rs);
      function rs(w) {
        this._subscribe = w;
      }
      try {
        il = { indexedDB: a.indexedDB || a.mozIndexedDB || a.webkitIndexedDB || a.msIndexedDB, IDBKeyRange: a.IDBKeyRange || a.webkitIDBKeyRange };
      } catch {
        il = { indexedDB: null, IDBKeyRange: null };
      }
      function du(w) {
        var A, M = !1, I = new Tf(function($) {
          var Z = re(w), ue, U = !1, ie = {}, ne = {}, ye = { get closed() {
            return U;
          }, unsubscribe: function() {
            U || (U = !0, ue && ue.abort(), he && $r.storagemutated.unsubscribe(be));
          } };
          $.start && $.start(ye);
          var he = !1, Se = function() {
            return ks(_e);
          }, be = function(ke) {
            el(ie, ke), Sf(ne, ie) && Se();
          }, _e = function() {
            var ke, Te, je;
            !U && il.indexedDB && (ie = {}, ke = {}, ue && ue.abort(), ue = new AbortController(), je = (function(ze) {
              var $e = _s();
              try {
                Z && er();
                var Ve = Cn(w, ze);
                return Ve = Z ? Ve.finally(qr) : Ve;
              } finally {
                $e && Mi();
              }
            })(Te = { subscr: ke, signal: ue.signal, requery: Se, querier: w, trans: null }), Promise.resolve(je).then(function(ze) {
              M = !0, A = ze, U || Te.signal.aborted || (ie = {}, (function($e) {
                for (var Ve in $e) if (g($e, Ve)) return;
                return 1;
              })(ne = ke) || he || ($r(Xo, be), he = !0), ks(function() {
                return !U && $.next && $.next(ze);
              }));
            }, function(ze) {
              M = !1, ["DatabaseClosedError", "AbortError"].includes(ze == null ? void 0 : ze.name) || U || ks(function() {
                U || $.error && $.error(ze);
              });
            }));
          };
          return setTimeout(Se, 0), ye;
        });
        return I.hasValue = function() {
          return M;
        }, I.getValue = function() {
          return A;
        }, I;
      }
      var vo = Jr;
      function Af(w) {
        var A = Ci;
        try {
          Ci = !0, $r.storagemutated.fire(w), Ia(w, !0);
        } finally {
          Ci = A;
        }
      }
      x(vo, r(r({}, ut), { delete: function(w) {
        return new vo(w, { addons: [] }).delete();
      }, exists: function(w) {
        return new vo(w, { addons: [] }).open().then(function(A) {
          return A.close(), !0;
        }).catch("NoSuchDatabaseError", function() {
          return !1;
        });
      }, getDatabaseNames: function(w) {
        try {
          return A = vo.dependencies, M = A.indexedDB, A = A.IDBKeyRange, (Qr(M) ? Promise.resolve(M.databases()).then(function(I) {
            return I.map(function($) {
              return $.name;
            }).filter(function($) {
              return $ !== oo;
            });
          }) : bf(M, A).toCollection().primaryKeys()).then(w);
        } catch {
          return cn(new Me.MissingAPI());
        }
        var A, M;
      }, defineClass: function() {
        return function(w) {
          c(this, w);
        };
      }, ignoreTransaction: function(w) {
        return nt.trans ? bi(nt.transless, w) : w();
      }, vip: wf, async: function(w) {
        return function() {
          try {
            var A = tl(w.apply(this, arguments));
            return A && typeof A.then == "function" ? A : lt.resolve(A);
          } catch (M) {
            return cn(M);
          }
        };
      }, spawn: function(w, A, M) {
        try {
          var I = tl(w.apply(M, A || []));
          return I && typeof I.then == "function" ? I : lt.resolve(I);
        } catch ($) {
          return cn($);
        }
      }, currentTransaction: { get: function() {
        return nt.trans || null;
      } }, waitFor: function(w, A) {
        return A = lt.resolve(typeof w == "function" ? vo.ignoreTransaction(w) : w).timeout(A || 6e4), nt.trans ? nt.trans.waitFor(A) : A;
      }, Promise: lt, debug: { get: function() {
        return Yt;
      }, set: function(w) {
        Nn(w);
      } }, derive: E, extend: c, props: x, override: N, Events: uo, on: $r, liveQuery: du, extendObservabilitySet: el, getByKeyPath: z, setByKeyPath: q, delByKeyPath: function(w, A) {
        typeof A == "string" ? q(w, A, void 0) : "length" in A && [].map.call(A, function(M) {
          q(w, M, void 0);
        });
      }, shallowClone: G, deepClone: me, getObjectDiff: ou, cmp: Ft, asap: P, minKey: -1 / 0, addons: [], connections: oa, errnames: Re, dependencies: il, cache: go, semVer: "4.2.1", version: "4.2.1".split(".").map(function(w) {
        return parseInt(w);
      }).reduce(function(w, A, M) {
        return w + A / Math.pow(10, 2 * M);
      }) })), vo.maxKey = fn(vo.dependencies.IDBKeyRange), typeof dispatchEvent < "u" && typeof addEventListener < "u" && ($r(Xo, function(w) {
        Ci || (w = new CustomEvent(la, { detail: w }), Ci = !0, dispatchEvent(w), Ci = !1);
      }), addEventListener(la, function(w) {
        w = w.detail, Ci || Af(w);
      }));
      var sl, Ci = !1, Bn = function() {
      };
      return typeof BroadcastChannel < "u" && ((Bn = function() {
        (sl = new BroadcastChannel(la)).onmessage = function(w) {
          return w.data && Af(w.data);
        };
      })(), typeof sl.unref == "function" && sl.unref(), $r(Xo, function(w) {
        Ci || sl.postMessage(w);
      })), typeof addEventListener < "u" && (addEventListener("pagehide", function(w) {
        if (!Jr.disableBfCache && w.persisted) {
          Yt && console.debug("Dexie: handling persisted pagehide"), sl != null && sl.close();
          for (var A = 0, M = oa; A < M.length; A++) M[A].close({ disableAutoOpen: !1 });
        }
      }), addEventListener("pageshow", function(w) {
        !Jr.disableBfCache && w.persisted && (Yt && console.debug("Dexie: handling persisted pageshow"), Bn(), Af({ all: new Vn(-1 / 0, [[]]) }));
      })), lt.rejectionMapper = function(w, A) {
        return !w || w instanceof V || w instanceof TypeError || w instanceof SyntaxError || !w.name || !dt[w.name] ? w : (A = new dt[w.name](A || w.message, w), "stack" in w && _(A, "stack", { get: function() {
          return this.inner.stack;
        } }), A);
      }, Nn(Yt), r(Jr, Object.freeze({ __proto__: null, Dexie: Jr, liveQuery: du, Entity: Ku, cmp: Ft, PropModification: As, replacePrefix: function(w, A) {
        return new As({ replacePrefix: [w, A] });
      }, add: function(w) {
        return new As({ add: w });
      }, remove: function(w) {
        return new As({ remove: w });
      }, default: Jr, RangeSet: Vn, mergeRanges: ca, rangesOverlap: Mn }), { default: Jr }), Jr;
    });
  })(Q1)), Q1.exports;
}
var BV = /* @__PURE__ */ LV();
const gE = /* @__PURE__ */ uf(BV), jA = Symbol.for("Dexie"), gx = globalThis[jA] || (globalThis[jA] = gE);
if (gE.semVer !== gx.semVer)
  throw new Error(`Two different versions of Dexie loaded in the same app: ${gE.semVer} and ${gx.semVer}`);
var x0 = { exports: {} };
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var qV = x0.exports, NA;
function $V() {
  return NA || (NA = 1, (function(e, t) {
    (function() {
      var n, r = "4.17.21", i = 200, a = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", o = "Expected a function", u = "Invalid `variable` option passed into `_.template`", c = "__lodash_hash_undefined__", f = 500, p = "__lodash_placeholder__", g = 1, x = 2, b = 4, _ = 1, E = 2, k = 1, T = 2, R = 4, N = 8, O = 16, P = 32, z = 64, q = 128, G = 256, Y = 512, W = 30, F = "...", X = 800, me = 16, J = 1, le = 2, Q = 3, oe = 1 / 0, fe = 9007199254740991, ce = 17976931348623157e292, K = NaN, re = 4294967295, de = re - 1, V = re >>> 1, ae = [
        ["ary", q],
        ["bind", k],
        ["bindKey", T],
        ["curry", N],
        ["curryRight", O],
        ["flip", Y],
        ["partial", P],
        ["partialRight", z],
        ["rearg", G]
      ], ge = "[object Arguments]", we = "[object Array]", Re = "[object AsyncFunction]", Ie = "[object Boolean]", Me = "[object Date]", dt = "[object DOMException]", ut = "[object Error]", Je = "[object Function]", ct = "[object GeneratorFunction]", mt = "[object Map]", ft = "[object Number]", At = "[object Null]", xt = "[object Object]", qn = "[object Promise]", An = "[object Proxy]", jn = "[object RegExp]", Yt = "[object Set]", Nn = "[object String]", rn = "[object Symbol]", bn = "[object Undefined]", $n = "[object WeakMap]", Le = "[object WeakSet]", We = "[object ArrayBuffer]", at = "[object DataView]", Ct = "[object Float32Array]", Rt = "[object Float64Array]", In = "[object Int8Array]", Rn = "[object Int16Array]", bt = "[object Int32Array]", $t = "[object Uint8Array]", Ln = "[object Uint8ClampedArray]", nt = "[object Uint16Array]", Br = "[object Uint32Array]", mr = /\b__p \+= '';/g, Yo = /\b(__p \+=) '' \+/g, lt = /(__e\(.*?\)|\b__t\)) \+\n'';/g, ia = /&(?:amp|lt|gt|quot|#39);/g, Na = /[&<>"']/g, Qi = RegExp(ia.source), io = RegExp(Na.source), sa = /<%-([\s\S]+?)%>/g, mf = /<%([\s\S]+?)%>/g, Xl = /<%=([\s\S]+?)%>/g, _s = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, Mi = /^\w*$/, Ql = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, aa = /[\\^$.*+?()[\]{}|]/g, wn = RegExp(aa.source), Fn = /^\s+/, Jl = /\s/, Ra = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, so = /\{\n\/\* \[wrapped with (.+)\] \*/, ao = /,? & /, Ss = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, Cn = /[()=,{}\[\]\/\s]/, er = /\\(\\)?/g, qr = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, Cs = /\w*$/, Gu = /^[-+]0x[0-9a-f]+$/i, Es = /^0b[01]+$/i, eu = /^\[object .+?Constructor\]$/, bi = /^0o[0-7]+$/i, Wo = /^(?:0|[1-9]\d*)$/, ks = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, cn = /($^)/, di = /['\n\r\u2028\u2029\\]/g, gr = "\\ud800-\\udfff", tr = "\\u0300-\\u036f", oa = "\\ufe20-\\ufe2f", oo = "\\u20d0-\\u20ff", Oi = tr + oa + oo, Ji = "\\u2700-\\u27bf", Ts = "a-z\\xdf-\\xf6\\xf8-\\xff", Zo = "\\xac\\xb1\\xd7\\xf7", lo = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", Ku = "\\u2000-\\u206f", Ft = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", Ma = "A-Z\\xc0-\\xd6\\xd8-\\xde", wi = "\\ufe0e\\ufe0f", Cr = Zo + lo + Ku + Ft, As = "[']", Yu = "[" + gr + "]", js = "[" + Cr + "]", Oa = "[" + Oi + "]", sn = "\\d+", uo = "[" + Ji + "]", yr = "[" + Ts + "]", _i = "[^" + gr + Cr + sn + Ji + Ts + Ma + "]", Da = "\\ud83c[\\udffb-\\udfff]", co = "(?:" + Oa + "|" + Da + ")", Si = "[^" + gr + "]", tu = "(?:\\ud83c[\\udde6-\\uddff]){2}", fo = "[\\ud800-\\udbff][\\udc00-\\udfff]", Di = "[" + Ma + "]", dh = "\\u200d", en = "(?:" + yr + "|" + _i + ")", gf = "(?:" + Di + "|" + _i + ")", Wu = "(?:" + As + "(?:d|ll|m|re|s|t|ve))?", hh = "(?:" + As + "(?:D|LL|M|RE|S|T|VE))?", hi = co + "?", Ns = "[" + wi + "]?", zi = "(?:" + dh + "(?:" + [Si, tu, fo].join("|") + ")" + Ns + hi + ")*", Rs = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", Zu = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", za = Ns + hi + zi, Un = "(?:" + [uo, tu, fo].join("|") + ")" + za, es = "(?:" + [Si + Oa + "?", Oa, tu, fo, Yu].join("|") + ")", ho = RegExp(As, "g"), Xo = RegExp(Oa, "g"), la = RegExp(Da + "(?=" + Da + ")|" + es + za, "g"), $r = RegExp([
        Di + "?" + yr + "+" + Wu + "(?=" + [js, Di, "$"].join("|") + ")",
        gf + "+" + hh + "(?=" + [js, Di + en, "$"].join("|") + ")",
        Di + "?" + en + "+" + Wu,
        Di + "+" + hh,
        Zu,
        Rs,
        sn,
        Un
      ].join("|"), "g"), yf = RegExp("[" + dh + gr + Oi + wi + "]"), pi = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, Ms = [
        "Array",
        "Buffer",
        "DataView",
        "Date",
        "Error",
        "Float32Array",
        "Float64Array",
        "Function",
        "Int8Array",
        "Int16Array",
        "Int32Array",
        "Map",
        "Math",
        "Object",
        "Promise",
        "RegExp",
        "Set",
        "String",
        "Symbol",
        "TypeError",
        "Uint8Array",
        "Uint8ClampedArray",
        "Uint16Array",
        "Uint32Array",
        "WeakMap",
        "_",
        "clearTimeout",
        "isFinite",
        "parseInt",
        "setTimeout"
      ], Xu = -1, hn = {};
      hn[Ct] = hn[Rt] = hn[In] = hn[Rn] = hn[bt] = hn[$t] = hn[Ln] = hn[nt] = hn[Br] = !0, hn[ge] = hn[we] = hn[We] = hn[Ie] = hn[at] = hn[Me] = hn[ut] = hn[Je] = hn[mt] = hn[ft] = hn[xt] = hn[jn] = hn[Yt] = hn[Nn] = hn[$n] = !1;
      var fn = {};
      fn[ge] = fn[we] = fn[We] = fn[at] = fn[Ie] = fn[Me] = fn[Ct] = fn[Rt] = fn[In] = fn[Rn] = fn[bt] = fn[mt] = fn[ft] = fn[xt] = fn[jn] = fn[Yt] = fn[Nn] = fn[rn] = fn[$t] = fn[Ln] = fn[nt] = fn[Br] = !0, fn[ut] = fn[Je] = fn[$n] = !1;
      var Qo = {
        // Latin-1 Supplement block.
        : "A",
        : "A",
        : "A",
        : "A",
        : "A",
        : "A",
        : "a",
        : "a",
        : "a",
        : "a",
        : "a",
        : "a",
        : "C",
        : "c",
        : "D",
        : "d",
        : "E",
        : "E",
        : "E",
        : "E",
        : "e",
        : "e",
        : "e",
        : "e",
        : "I",
        : "I",
        : "I",
        : "I",
        : "i",
        : "i",
        : "i",
        : "i",
        : "N",
        : "n",
        : "O",
        : "O",
        : "O",
        : "O",
        : "O",
        : "O",
        : "o",
        : "o",
        : "o",
        : "o",
        : "o",
        : "o",
        : "U",
        : "U",
        : "U",
        : "U",
        : "u",
        : "u",
        : "u",
        : "u",
        : "Y",
        : "y",
        : "y",
        : "Ae",
        : "ae",
        : "Th",
        : "th",
        : "ss",
        // Latin Extended-A block.
        : "A",
        : "A",
        : "A",
        : "a",
        : "a",
        : "a",
        : "C",
        : "C",
        : "C",
        : "C",
        : "c",
        : "c",
        : "c",
        : "c",
        : "D",
        : "D",
        : "d",
        : "d",
        : "E",
        : "E",
        : "E",
        : "E",
        : "E",
        : "e",
        : "e",
        : "e",
        : "e",
        : "e",
        : "G",
        : "G",
        : "G",
        : "G",
        : "g",
        : "g",
        : "g",
        : "g",
        : "H",
        : "H",
        : "h",
        : "h",
        : "I",
        : "I",
        : "I",
        : "I",
        : "I",
        : "i",
        : "i",
        : "i",
        : "i",
        : "i",
        : "J",
        : "j",
        : "K",
        : "k",
        : "k",
        : "L",
        : "L",
        : "L",
        : "L",
        : "L",
        : "l",
        : "l",
        : "l",
        : "l",
        : "l",
        : "N",
        : "N",
        : "N",
        : "N",
        : "n",
        : "n",
        : "n",
        : "n",
        : "O",
        : "O",
        : "O",
        : "o",
        : "o",
        : "o",
        : "R",
        : "R",
        : "R",
        : "r",
        : "r",
        : "r",
        : "S",
        : "S",
        : "S",
        : "S",
        : "s",
        : "s",
        : "s",
        : "s",
        : "T",
        : "T",
        : "T",
        : "t",
        : "t",
        : "t",
        : "U",
        : "U",
        : "U",
        : "U",
        : "U",
        : "U",
        : "u",
        : "u",
        : "u",
        : "u",
        : "u",
        : "u",
        : "W",
        : "w",
        : "Y",
        : "y",
        : "Y",
        : "Z",
        : "Z",
        : "Z",
        : "z",
        : "z",
        : "z",
        : "IJ",
        : "ij",
        : "Oe",
        : "oe",
        : "'n",
        : "s"
      }, nu = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      }, ph = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'"
      }, Er = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\u2028": "u2028",
        "\u2029": "u2029"
      }, po = parseFloat, Qu = parseInt, ua = typeof Ou == "object" && Ou && Ou.Object === Object && Ou, Ju = typeof self == "object" && self && self.Object === Object && self, nr = ua || Ju || Function("return this")(), ru = t && !t.nodeType && t, ts = ru && !0 && e && !e.nodeType && e, iu = ts && ts.exports === ru, Jo = iu && ua.process, mi = (function() {
        try {
          var U = ts && ts.require && ts.require("util").types;
          return U || Jo && Jo.binding && Jo.binding("util");
        } catch {
        }
      })(), vf = mi && mi.isArrayBuffer, su = mi && mi.isDate, mo = mi && mi.isMap, au = mi && mi.isRegExp, xf = mi && mi.isSet, mh = mi && mi.isTypedArray;
      function kr(U, ie, ne) {
        switch (ne.length) {
          case 0:
            return U.call(ie);
          case 1:
            return U.call(ie, ne[0]);
          case 2:
            return U.call(ie, ne[0], ne[1]);
          case 3:
            return U.call(ie, ne[0], ne[1], ne[2]);
        }
        return U.apply(ie, ne);
      }
      function bf(U, ie, ne, ye) {
        for (var he = -1, Se = U == null ? 0 : U.length; ++he < Se; ) {
          var be = U[he];
          ie(ye, be, ne(be), U);
        }
        return ye;
      }
      function Qr(U, ie) {
        for (var ne = -1, ye = U == null ? 0 : U.length; ++ne < ye && ie(U[ne], ne, U) !== !1; )
          ;
        return U;
      }
      function wf(U, ie) {
        for (var ne = U == null ? 0 : U.length; ne-- && ie(U[ne], ne, U) !== !1; )
          ;
        return U;
      }
      function ec(U, ie) {
        for (var ne = -1, ye = U == null ? 0 : U.length; ++ne < ye; )
          if (!ie(U[ne], ne, U))
            return !1;
        return !0;
      }
      function Vn(U, ie) {
        for (var ne = -1, ye = U == null ? 0 : U.length, he = 0, Se = []; ++ne < ye; ) {
          var be = U[ne];
          ie(be, ne, U) && (Se[he++] = be);
        }
        return Se;
      }
      function Pa(U, ie) {
        var ne = U == null ? 0 : U.length;
        return !!ne && Ia(U, ie, 0) > -1;
      }
      function ca(U, ie, ne) {
        for (var ye = -1, he = U == null ? 0 : U.length; ++ye < he; )
          if (ne(ie, U[ye]))
            return !0;
        return !1;
      }
      function Mn(U, ie) {
        for (var ne = -1, ye = U == null ? 0 : U.length, he = Array(ye); ++ne < ye; )
          he[ne] = ie(U[ne], ne, U);
        return he;
      }
      function ns(U, ie) {
        for (var ne = -1, ye = ie.length, he = U.length; ++ne < ye; )
          U[he + ne] = ie[ne];
        return U;
      }
      function tc(U, ie, ne, ye) {
        var he = -1, Se = U == null ? 0 : U.length;
        for (ye && Se && (ne = U[++he]); ++he < Se; )
          ne = ie(ne, U[he], he, U);
        return ne;
      }
      function _f(U, ie, ne, ye) {
        var he = U == null ? 0 : U.length;
        for (ye && he && (ne = U[--he]); he--; )
          ne = ie(ne, U[he], he, U);
        return ne;
      }
      function el(U, ie) {
        for (var ne = -1, ye = U == null ? 0 : U.length; ++ne < ye; )
          if (ie(U[ne], ne, U))
            return !0;
        return !1;
      }
      var Sf = Os("length");
      function go(U) {
        return U.split("");
      }
      function Cf(U) {
        return U.match(Ss) || [];
      }
      function nc(U, ie, ne) {
        var ye;
        return ne(U, function(he, Se, be) {
          if (ie(he, Se, be))
            return ye = Se, !1;
        }), ye;
      }
      function yo(U, ie, ne, ye) {
        for (var he = U.length, Se = ne + (ye ? 1 : -1); ye ? Se-- : ++Se < he; )
          if (ie(U[Se], Se, U))
            return Se;
        return -1;
      }
      function Ia(U, ie, ne) {
        return ie === ie ? Af(U, ie, ne) : yo(U, yh, ne);
      }
      function gh(U, ie, ne, ye) {
        for (var he = ne - 1, Se = U.length; ++he < Se; )
          if (ye(U[he], ie))
            return he;
        return -1;
      }
      function yh(U) {
        return U !== U;
      }
      function tl(U, ie) {
        var ne = U == null ? 0 : U.length;
        return ne ? ic(U, ie) / ne : K;
      }
      function Os(U) {
        return function(ie) {
          return ie == null ? n : ie[U];
        };
      }
      function Ef(U) {
        return function(ie) {
          return U == null ? n : U[ie];
        };
      }
      function ou(U, ie, ne, ye, he) {
        return he(U, function(Se, be, _e) {
          ne = ye ? (ye = !1, Se) : ie(ne, Se, be, _e);
        }), ne;
      }
      function rc(U, ie) {
        var ne = U.length;
        for (U.sort(ie); ne--; )
          U[ne] = U[ne].value;
        return U;
      }
      function ic(U, ie) {
        for (var ne, ye = -1, he = U.length; ++ye < he; ) {
          var Se = ie(U[ye]);
          Se !== n && (ne = ne === n ? Se : ne + Se);
        }
        return ne;
      }
      function lu(U, ie) {
        for (var ne = -1, ye = Array(U); ++ne < U; )
          ye[ne] = ie(ne);
        return ye;
      }
      function vh(U, ie) {
        return Mn(ie, function(ne) {
          return [ne, U[ne]];
        });
      }
      function La(U) {
        return U && U.slice(0, w(U) + 1).replace(Fn, "");
      }
      function gi(U) {
        return function(ie) {
          return U(ie);
        };
      }
      function kf(U, ie) {
        return Mn(ie, function(ne) {
          return U[ne];
        });
      }
      function nl(U, ie) {
        return U.has(ie);
      }
      function uu(U, ie) {
        for (var ne = -1, ye = U.length; ++ne < ye && Ia(ie, U[ne], 0) > -1; )
          ;
        return ne;
      }
      function sc(U, ie) {
        for (var ne = U.length; ne-- && Ia(ie, U[ne], 0) > -1; )
          ;
        return ne;
      }
      function rl(U, ie) {
        for (var ne = U.length, ye = 0; ne--; )
          U[ne] === ie && ++ye;
        return ye;
      }
      var cu = Ef(Qo), jm = Ef(nu);
      function ac(U) {
        return "\\" + Er[U];
      }
      function fu(U, ie) {
        return U == null ? n : U[ie];
      }
      function Jr(U) {
        return yf.test(U);
      }
      function Hn(U) {
        return pi.test(U);
      }
      function il(U) {
        for (var ie, ne = []; !(ie = U.next()).done; )
          ne.push(ie.value);
        return ne;
      }
      function ei(U) {
        var ie = -1, ne = Array(U.size);
        return U.forEach(function(ye, he) {
          ne[++ie] = [he, ye];
        }), ne;
      }
      function Tf(U, ie) {
        return function(ne) {
          return U(ie(ne));
        };
      }
      function rs(U, ie) {
        for (var ne = -1, ye = U.length, he = 0, Se = []; ++ne < ye; ) {
          var be = U[ne];
          (be === ie || be === p) && (U[ne] = p, Se[he++] = ne);
        }
        return Se;
      }
      function du(U) {
        var ie = -1, ne = Array(U.size);
        return U.forEach(function(ye) {
          ne[++ie] = ye;
        }), ne;
      }
      function vo(U) {
        var ie = -1, ne = Array(U.size);
        return U.forEach(function(ye) {
          ne[++ie] = [ye, ye];
        }), ne;
      }
      function Af(U, ie, ne) {
        for (var ye = ne - 1, he = U.length; ++ye < he; )
          if (U[ye] === ie)
            return ye;
        return -1;
      }
      function sl(U, ie, ne) {
        for (var ye = ne + 1; ye--; )
          if (U[ye] === ie)
            return ye;
        return ye;
      }
      function Ci(U) {
        return Jr(U) ? M(U) : Sf(U);
      }
      function Bn(U) {
        return Jr(U) ? I(U) : go(U);
      }
      function w(U) {
        for (var ie = U.length; ie-- && Jl.test(U.charAt(ie)); )
          ;
        return ie;
      }
      var A = Ef(ph);
      function M(U) {
        for (var ie = la.lastIndex = 0; la.test(U); )
          ++ie;
        return ie;
      }
      function I(U) {
        return U.match(la) || [];
      }
      function $(U) {
        return U.match($r) || [];
      }
      var Z = (function U(ie) {
        ie = ie == null ? nr : ue.defaults(nr.Object(), ie, ue.pick(nr, Ms));
        var ne = ie.Array, ye = ie.Date, he = ie.Error, Se = ie.Function, be = ie.Math, _e = ie.Object, ke = ie.RegExp, Te = ie.String, je = ie.TypeError, ze = ne.prototype, $e = Se.prototype, Ve = _e.prototype, et = ie["__core-js_shared__"], st = $e.toString, Ue = Ve.hasOwnProperty, it = 0, ot = (function() {
          var m = /[^.]+$/.exec(et && et.keys && et.keys.IE_PROTO || "");
          return m ? "Symbol(src)_1." + m : "";
        })(), Qe = Ve.toString, gt = st.call(_e), Et = nr._, Pt = ke(
          "^" + st.call(Ue).replace(aa, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
        ), Lt = iu ? ie.Buffer : n, Gn = ie.Symbol, jt = ie.Uint8Array, vr = Lt ? Lt.allocUnsafe : n, On = Tf(_e.getPrototypeOf, _e), al = _e.create, xr = Ve.propertyIsEnumerable, ti = ze.splice, oc = Gn ? Gn.isConcatSpreadable : n, ni = Gn ? Gn.iterator : n, xo = Gn ? Gn.toStringTag : n, Ds = (function() {
          try {
            var m = xl(_e, "defineProperty");
            return m({}, "", {}), m;
          } catch {
          }
        })(), Py = ie.clearTimeout !== nr.clearTimeout && ie.clearTimeout, xh = ye && ye.now !== nr.Date.now && ye.now, hu = ie.setTimeout !== nr.setTimeout && ie.setTimeout, lc = be.ceil, jf = be.floor, Nf = _e.getOwnPropertySymbols, Iy = Lt ? Lt.isBuffer : n, is = ie.isFinite, uc = ze.join, cc = Tf(_e.keys, _e), ar = be.max, Tr = be.min, zs = ye.now, Ps = ie.parseInt, bo = be.random, Ba = ze.reverse, Is = xl(ie, "DataView"), ss = xl(ie, "Map"), bh = xl(ie, "Promise"), ol = xl(ie, "Set"), pu = xl(ie, "WeakMap"), fc = xl(_e, "create"), Ar = pu && new pu(), vn = {}, an = xi(Is), ll = xi(ss), Ls = xi(bh), Nm = xi(ol), ul = xi(pu), Rf = Gn ? Gn.prototype : n, dc = Rf ? Rf.valueOf : n, mu = Rf ? Rf.toString : n;
        function te(m) {
          if (ur(m) && !Bt(m) && !(m instanceof Ut)) {
            if (m instanceof Pi)
              return m;
            if (Ue.call(m, "__wrapped__"))
              return Xh(m);
          }
          return new Pi(m);
        }
        var cl = /* @__PURE__ */ (function() {
          function m() {
          }
          return function(v) {
            if (!Xn(v))
              return {};
            if (al)
              return al(v);
            m.prototype = v;
            var C = new m();
            return m.prototype = n, C;
          };
        })();
        function fl() {
        }
        function Pi(m, v) {
          this.__wrapped__ = m, this.__actions__ = [], this.__chain__ = !!v, this.__index__ = 0, this.__values__ = n;
        }
        te.templateSettings = {
          /**
           * Used to detect `data` property values to be HTML-escaped.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          escape: sa,
          /**
           * Used to detect code to be evaluated.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          evaluate: mf,
          /**
           * Used to detect `data` property values to inject.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          interpolate: Xl,
          /**
           * Used to reference the data object in the template text.
           *
           * @memberOf _.templateSettings
           * @type {string}
           */
          variable: "",
          /**
           * Used to import variables into the compiled template.
           *
           * @memberOf _.templateSettings
           * @type {Object}
           */
          imports: {
            /**
             * A reference to the `lodash` function.
             *
             * @memberOf _.templateSettings.imports
             * @type {Function}
             */
            _: te
          }
        }, te.prototype = fl.prototype, te.prototype.constructor = te, Pi.prototype = cl(fl.prototype), Pi.prototype.constructor = Pi;
        function Ut(m) {
          this.__wrapped__ = m, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = re, this.__views__ = [];
        }
        function wo() {
          var m = new Ut(this.__wrapped__);
          return m.__actions__ = ki(this.__actions__), m.__dir__ = this.__dir__, m.__filtered__ = this.__filtered__, m.__iteratees__ = ki(this.__iteratees__), m.__takeCount__ = this.__takeCount__, m.__views__ = ki(this.__views__), m;
        }
        function dl() {
          if (this.__filtered__) {
            var m = new Ut(this);
            m.__dir__ = -1, m.__filtered__ = !0;
          } else
            m = this.clone(), m.__dir__ *= -1;
          return m;
        }
        function _o() {
          var m = this.__wrapped__.value(), v = this.__dir__, C = Bt(m), D = v < 0, H = C ? m.length : 0, se = Jb(0, H, this.__views__), ve = se.start, Ce = se.end, Ne = Ce - ve, Ke = D ? Ce : ve - 1, Ye = this.__iteratees__, Xe = Ye.length, pt = 0, St = Tr(Ne, this.__takeCount__);
          if (!C || !D && H == Ne && St == Ne)
            return Hm(m, this.__actions__);
          var Dt = [];
          e:
            for (; Ne-- && pt < St; ) {
              Ke += v;
              for (var Xt = -1, zt = m[Ke]; ++Xt < Xe; ) {
                var on = Ye[Xt], dn = on.iteratee, _a = on.type, ys = dn(zt);
                if (_a == le)
                  zt = ys;
                else if (!ys) {
                  if (_a == J)
                    continue e;
                  break e;
                }
              }
              Dt[pt++] = zt;
            }
          return Dt;
        }
        Ut.prototype = cl(fl.prototype), Ut.prototype.constructor = Ut;
        function So(m) {
          var v = -1, C = m == null ? 0 : m.length;
          for (this.clear(); ++v < C; ) {
            var D = m[v];
            this.set(D[0], D[1]);
          }
        }
        function Rm() {
          this.__data__ = fc ? fc(null) : {}, this.size = 0;
        }
        function hc(m) {
          var v = this.has(m) && delete this.__data__[m];
          return this.size -= v ? 1 : 0, v;
        }
        function wh(m) {
          var v = this.__data__;
          if (fc) {
            var C = v[m];
            return C === c ? n : C;
          }
          return Ue.call(v, m) ? v[m] : n;
        }
        function gu(m) {
          var v = this.__data__;
          return fc ? v[m] !== n : Ue.call(v, m);
        }
        function ri(m, v) {
          var C = this.__data__;
          return this.size += this.has(m) ? 0 : 1, C[m] = fc && v === n ? c : v, this;
        }
        So.prototype.clear = Rm, So.prototype.delete = hc, So.prototype.get = wh, So.prototype.has = gu, So.prototype.set = ri;
        function Bs(m) {
          var v = -1, C = m == null ? 0 : m.length;
          for (this.clear(); ++v < C; ) {
            var D = m[v];
            this.set(D[0], D[1]);
          }
        }
        function Ly() {
          this.__data__ = [], this.size = 0;
        }
        function Hb(m) {
          var v = this.__data__, C = qa(v, m);
          if (C < 0)
            return !1;
          var D = v.length - 1;
          return C == D ? v.pop() : ti.call(v, C, 1), --this.size, !0;
        }
        function Gb(m) {
          var v = this.__data__, C = qa(v, m);
          return C < 0 ? n : v[C][1];
        }
        function Kb(m) {
          return qa(this.__data__, m) > -1;
        }
        function jr(m, v) {
          var C = this.__data__, D = qa(C, m);
          return D < 0 ? (++this.size, C.push([m, v])) : C[D][1] = v, this;
        }
        Bs.prototype.clear = Ly, Bs.prototype.delete = Hb, Bs.prototype.get = Gb, Bs.prototype.has = Kb, Bs.prototype.set = jr;
        function fa(m) {
          var v = -1, C = m == null ? 0 : m.length;
          for (this.clear(); ++v < C; ) {
            var D = m[v];
            this.set(D[0], D[1]);
          }
        }
        function Mf() {
          this.size = 0, this.__data__ = {
            hash: new So(),
            map: new (ss || Bs)(),
            string: new So()
          };
        }
        function Of(m) {
          var v = Xf(this, m).delete(m);
          return this.size -= v ? 1 : 0, v;
        }
        function Mm(m) {
          return Xf(this, m).get(m);
        }
        function pc(m) {
          return Xf(this, m).has(m);
        }
        function mc(m, v) {
          var C = Xf(this, m), D = C.size;
          return C.set(m, v), this.size += C.size == D ? 0 : 1, this;
        }
        fa.prototype.clear = Mf, fa.prototype.delete = Of, fa.prototype.get = Mm, fa.prototype.has = pc, fa.prototype.set = mc;
        function yu(m) {
          var v = -1, C = m == null ? 0 : m.length;
          for (this.__data__ = new fa(); ++v < C; )
            this.add(m[v]);
        }
        function By(m) {
          return this.__data__.set(m, c), this;
        }
        function Yb(m) {
          return this.__data__.has(m);
        }
        yu.prototype.add = yu.prototype.push = By, yu.prototype.has = Yb;
        function qs(m) {
          var v = this.__data__ = new Bs(m);
          this.size = v.size;
        }
        function vu() {
          this.__data__ = new Bs(), this.size = 0;
        }
        function Om(m) {
          var v = this.__data__, C = v.delete(m);
          return this.size = v.size, C;
        }
        function _h(m) {
          return this.__data__.get(m);
        }
        function qy(m) {
          return this.__data__.has(m);
        }
        function gc(m, v) {
          var C = this.__data__;
          if (C instanceof Bs) {
            var D = C.__data__;
            if (!ss || D.length < i - 1)
              return D.push([m, v]), this.size = ++C.size, this;
            C = this.__data__ = new fa(D);
          }
          return C.set(m, v), this.size = C.size, this;
        }
        qs.prototype.clear = vu, qs.prototype.delete = Om, qs.prototype.get = _h, qs.prototype.has = qy, qs.prototype.set = gc;
        function Sh(m, v) {
          var C = Bt(m), D = !C && ku(m), H = !C && !D && kl(m), se = !C && !D && !H && Tl(m), ve = C || D || H || se, Ce = ve ? lu(m.length, Te) : [], Ne = Ce.length;
          for (var Ke in m)
            (v || Ue.call(m, Ke)) && !(ve && // Safari 9 has enumerable `arguments.length` in strict mode.
            (Ke == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
            H && (Ke == "offset" || Ke == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
            se && (Ke == "buffer" || Ke == "byteLength" || Ke == "byteOffset") || // Skip index properties.
            va(Ke, Ne))) && Ce.push(Ke);
          return Ce;
        }
        function Df(m) {
          var v = m.length;
          return v ? m[Cc(0, v - 1)] : n;
        }
        function Ch(m, v) {
          return sd(ki(m), ha(v, 0, m.length));
        }
        function $y(m) {
          return sd(ki(m));
        }
        function Eh(m, v, C) {
          (C !== n && !ps(m[v], C) || C === n && !(v in m)) && as(m, v, C);
        }
        function da(m, v, C) {
          var D = m[v];
          (!(Ue.call(m, v) && ps(D, C)) || C === n && !(v in m)) && as(m, v, C);
        }
        function qa(m, v) {
          for (var C = m.length; C--; )
            if (ps(m[C][0], v))
              return C;
          return -1;
        }
        function Fy(m, v, C, D) {
          return $a(m, function(H, se, ve) {
            v(D, H, C(H), ve);
          }), D;
        }
        function Dm(m, v) {
          return m && Vs(v, Ur(v), m);
        }
        function yc(m, v) {
          return m && Vs(v, Gi(v), m);
        }
        function as(m, v, C) {
          v == "__proto__" && Ds ? Ds(m, v, {
            configurable: !0,
            enumerable: !0,
            value: C,
            writable: !0
          }) : m[v] = C;
        }
        function vc(m, v) {
          for (var C = -1, D = v.length, H = ne(D), se = m == null; ++C < D; )
            H[C] = se ? n : Al(m, v[C]);
          return H;
        }
        function ha(m, v, C) {
          return m === m && (C !== n && (m = m <= C ? m : C), v !== n && (m = m >= v ? m : v)), m;
        }
        function Ei(m, v, C, D, H, se) {
          var ve, Ce = v & g, Ne = v & x, Ke = v & b;
          if (C && (ve = H ? C(m, D, H, se) : C(m)), ve !== n)
            return ve;
          if (!Xn(m))
            return m;
          var Ye = Bt(m);
          if (Ye) {
            if (ve = sv(m), !Ce)
              return ki(m, ve);
          } else {
            var Xe = si(m), pt = Xe == Je || Xe == ct;
            if (kl(m))
              return Ym(m, Ce);
            if (Xe == xt || Xe == ge || pt && !H) {
              if (ve = Ne || pt ? {} : lg(m), !Ce)
                return Ne ? ev(m, yc(ve, m)) : Jy(m, Dm(ve, m));
            } else {
              if (!fn[Xe])
                return H ? m : {};
              ve = av(m, Xe, Ce);
            }
          }
          se || (se = new qs());
          var St = se.get(m);
          if (St)
            return St;
          se.set(m, ve), wd(m) ? m.forEach(function(zt) {
            ve.add(Ei(zt, v, C, zt, m, se));
          }) : Fv(m) && m.forEach(function(zt, on) {
            ve.set(on, Ei(zt, v, C, on, m, se));
          });
          var Dt = Ke ? Ne ? og : Uh : Ne ? Gi : Ur, Xt = Ye ? n : Dt(m);
          return Qr(Xt || m, function(zt, on) {
            Xt && (on = zt, zt = m[on]), da(ve, on, Ei(zt, v, C, on, m, se));
          }), ve;
        }
        function Uy(m) {
          var v = Ur(m);
          return function(C) {
            return hl(C, m, v);
          };
        }
        function hl(m, v, C) {
          var D = C.length;
          if (m == null)
            return !D;
          for (m = _e(m); D--; ) {
            var H = C[D], se = v[H], ve = m[H];
            if (ve === n && !(H in m) || !se(ve))
              return !1;
          }
          return !0;
        }
        function zm(m, v, C) {
          if (typeof m != "function")
            throw new je(o);
          return id(function() {
            m.apply(n, C);
          }, v);
        }
        function $s(m, v, C, D) {
          var H = -1, se = Pa, ve = !0, Ce = m.length, Ne = [], Ke = v.length;
          if (!Ce)
            return Ne;
          C && (v = Mn(v, gi(C))), D ? (se = ca, ve = !1) : v.length >= i && (se = nl, ve = !1, v = new yu(v));
          e:
            for (; ++H < Ce; ) {
              var Ye = m[H], Xe = C == null ? Ye : C(Ye);
              if (Ye = D || Ye !== 0 ? Ye : 0, ve && Xe === Xe) {
                for (var pt = Ke; pt--; )
                  if (v[pt] === Xe)
                    continue e;
                Ne.push(Ye);
              } else se(v, Xe, D) || Ne.push(Ye);
            }
          return Ne;
        }
        var $a = Qm(ma), kh = Qm(Ah, !0);
        function pl(m, v) {
          var C = !0;
          return $a(m, function(D, H, se) {
            return C = !!v(D, H, se), C;
          }), C;
        }
        function pa(m, v, C) {
          for (var D = -1, H = m.length; ++D < H; ) {
            var se = m[D], ve = v(se);
            if (ve != null && (Ce === n ? ve === ve && !Hi(ve) : C(ve, Ce)))
              var Ce = ve, Ne = se;
          }
          return Ne;
        }
        function zf(m, v, C, D) {
          var H = m.length;
          for (C = Ot(C), C < 0 && (C = -C > H ? 0 : H + C), D = D === n || D > H ? H : Ot(D), D < 0 && (D += H), D = C > D ? 0 : Kg(D); C < D; )
            m[C++] = v;
          return m;
        }
        function Th(m, v) {
          var C = [];
          return $a(m, function(D, H, se) {
            v(D, H, se) && C.push(D);
          }), C;
        }
        function Dr(m, v, C, D, H) {
          var se = -1, ve = m.length;
          for (C || (C = cg), H || (H = []); ++se < ve; ) {
            var Ce = m[se];
            v > 0 && C(Ce) ? v > 1 ? Dr(Ce, v - 1, C, D, H) : ns(H, Ce) : D || (H[H.length] = Ce);
          }
          return H;
        }
        var xu = Jm(), xc = Jm(!0);
        function ma(m, v) {
          return m && xu(m, v, Ur);
        }
        function Ah(m, v) {
          return m && xc(m, v, Ur);
        }
        function Co(m, v) {
          return Vn(v, function(C) {
            return ms(m[C]);
          });
        }
        function Fa(m, v) {
          v = cs(v, m);
          for (var C = 0, D = v.length; m != null && C < D; )
            m = m[Bi(v[C++])];
          return C && C == D ? m : n;
        }
        function Pm(m, v, C) {
          var D = v(m);
          return Bt(m) ? D : ns(D, C(m));
        }
        function ii(m) {
          return m == null ? m === n ? bn : At : xo && xo in _e(m) ? Qf(m) : dg(m);
        }
        function Pf(m, v) {
          return m > v;
        }
        function os(m, v) {
          return m != null && Ue.call(m, v);
        }
        function Fs(m, v) {
          return m != null && v in _e(m);
        }
        function ml(m, v, C) {
          return m >= Tr(v, C) && m < ar(v, C);
        }
        function If(m, v, C) {
          for (var D = C ? ca : Pa, H = m[0].length, se = m.length, ve = se, Ce = ne(se), Ne = 1 / 0, Ke = []; ve--; ) {
            var Ye = m[ve];
            ve && v && (Ye = Mn(Ye, gi(v))), Ne = Tr(Ye.length, Ne), Ce[ve] = !C && (v || H >= 120 && Ye.length >= 120) ? new yu(ve && Ye) : n;
          }
          Ye = m[0];
          var Xe = -1, pt = Ce[0];
          e:
            for (; ++Xe < H && Ke.length < Ne; ) {
              var St = Ye[Xe], Dt = v ? v(St) : St;
              if (St = C || St !== 0 ? St : 0, !(pt ? nl(pt, Dt) : D(Ke, Dt, C))) {
                for (ve = se; --ve; ) {
                  var Xt = Ce[ve];
                  if (!(Xt ? nl(Xt, Dt) : D(m[ve], Dt, C)))
                    continue e;
                }
                pt && pt.push(Dt), Ke.push(St);
              }
            }
          return Ke;
        }
        function Vy(m, v, C, D) {
          return ma(m, function(H, se, ve) {
            v(D, C(H), se, ve);
          }), D;
        }
        function Us(m, v, C) {
          v = cs(v, m), m = nd(m, v);
          var D = m == null ? m : m[Bi(Yn(v))];
          return D == null ? n : kr(D, m, C);
        }
        function Ii(m) {
          return ur(m) && ii(m) == ge;
        }
        function br(m) {
          return ur(m) && ii(m) == We;
        }
        function jh(m) {
          return ur(m) && ii(m) == Me;
        }
        function ls(m, v, C, D, H) {
          return m === v ? !0 : m == null || v == null || !ur(m) && !ur(v) ? m !== m && v !== v : Vt(m, v, C, D, ls, H);
        }
        function Vt(m, v, C, D, H, se) {
          var ve = Bt(m), Ce = Bt(v), Ne = ve ? we : si(m), Ke = Ce ? we : si(v);
          Ne = Ne == ge ? xt : Ne, Ke = Ke == ge ? xt : Ke;
          var Ye = Ne == xt, Xe = Ke == xt, pt = Ne == Ke;
          if (pt && kl(m)) {
            if (!kl(v))
              return !1;
            ve = !0, Ye = !1;
          }
          if (pt && !Ye)
            return se || (se = new qs()), ve || Tl(m) ? Wf(m, v, C, D, H, se) : iv(m, v, Ne, C, D, H, se);
          if (!(C & _)) {
            var St = Ye && Ue.call(m, "__wrapped__"), Dt = Xe && Ue.call(v, "__wrapped__");
            if (St || Dt) {
              var Xt = St ? m.value() : m, zt = Dt ? v.value() : v;
              return se || (se = new qs()), H(Xt, zt, C, D, se);
            }
          }
          return pt ? (se || (se = new qs()), ag(m, v, C, D, H, se)) : !1;
        }
        function En(m) {
          return ur(m) && si(m) == mt;
        }
        function or(m, v, C, D) {
          var H = C.length, se = H, ve = !D;
          if (m == null)
            return !se;
          for (m = _e(m); H--; ) {
            var Ce = C[H];
            if (ve && Ce[2] ? Ce[1] !== m[Ce[0]] : !(Ce[0] in m))
              return !1;
          }
          for (; ++H < se; ) {
            Ce = C[H];
            var Ne = Ce[0], Ke = m[Ne], Ye = Ce[1];
            if (ve && Ce[2]) {
              if (Ke === n && !(Ne in m))
                return !1;
            } else {
              var Xe = new qs();
              if (D)
                var pt = D(Ke, Ye, Ne, m, v, Xe);
              if (!(pt === n ? ls(Ye, Ke, _ | E, D, Xe) : pt))
                return !1;
            }
          }
          return !0;
        }
        function Lf(m) {
          if (!Xn(m) || ov(m))
            return !1;
          var v = ms(m) ? Pt : eu;
          return v.test(xi(m));
        }
        function bc(m) {
          return ur(m) && ii(m) == jn;
        }
        function bu(m) {
          return ur(m) && si(m) == Yt;
        }
        function Nh(m) {
          return ur(m) && cp(m.length) && !!hn[ii(m)];
        }
        function wc(m) {
          return typeof m == "function" ? m : m == null ? Ai : typeof m == "object" ? Bt(m) ? Im(m[0], m[1]) : Mh(m) : ee(m);
        }
        function gl(m) {
          if (!jc(m))
            return cc(m);
          var v = [];
          for (var C in _e(m))
            Ue.call(m, C) && C != "constructor" && v.push(C);
          return v;
        }
        function Wb(m) {
          if (!Xn(m))
            return ko(m);
          var v = jc(m), C = [];
          for (var D in m)
            D == "constructor" && (v || !Ue.call(m, D)) || C.push(D);
          return C;
        }
        function Zn(m, v) {
          return m < v;
        }
        function Rh(m, v) {
          var C = -1, D = Vi(m) ? ne(m.length) : [];
          return $a(m, function(H, se, ve) {
            D[++C] = v(H, se, ve);
          }), D;
        }
        function Mh(m) {
          var v = Vh(m);
          return v.length == 1 && v[0][2] ? Wh(v[0][0], v[0][1]) : function(C) {
            return C === m || or(C, m, v);
          };
        }
        function Im(m, v) {
          return ed(m) && Va(v) ? Wh(Bi(m), v) : function(C) {
            var D = Al(C, m);
            return D === n && D === v ? Wg(C, m) : ls(v, D, _ | E);
          };
        }
        function Bf(m, v, C, D, H) {
          m !== v && xu(v, function(se, ve) {
            if (H || (H = new qs()), Xn(se))
              Zb(m, v, ve, C, Bf, D, H);
            else {
              var Ce = D ? D(Dn(m, ve), se, ve + "", m, v, H) : n;
              Ce === n && (Ce = se), Eh(m, ve, Ce);
            }
          }, Gi);
        }
        function Zb(m, v, C, D, H, se, ve) {
          var Ce = Dn(m, C), Ne = Dn(v, C), Ke = ve.get(Ne);
          if (Ke) {
            Eh(m, C, Ke);
            return;
          }
          var Ye = se ? se(Ce, Ne, C + "", m, v, ve) : n, Xe = Ye === n;
          if (Xe) {
            var pt = Bt(Ne), St = !pt && kl(Ne), Dt = !pt && !St && Tl(Ne);
            Ye = Ne, pt || St || Dt ? Bt(Ce) ? Ye = Ce : _r(Ce) ? Ye = ki(Ce) : St ? (Xe = !1, Ye = Ym(Ne, !0)) : Dt ? (Xe = !1, Ye = Wm(Ne, !0)) : Ye = [] : xd(Ne) || ku(Ne) ? (Ye = Ce, ku(Ce) ? Ye = fp(Ce) : (!Xn(Ce) || ms(Ce)) && (Ye = lg(Ne))) : Xe = !1;
          }
          Xe && (ve.set(Ne, Ye), H(Ye, Ne, D, se, ve), ve.delete(Ne)), Eh(m, C, Ye);
        }
        function Oh(m, v) {
          var C = m.length;
          if (C)
            return v += v < 0 ? C : 0, va(v, C) ? m[v] : n;
        }
        function Dh(m, v, C) {
          v.length ? v = Mn(v, function(se) {
            return Bt(se) ? function(ve) {
              return Fa(ve, se.length === 1 ? se[0] : se);
            } : se;
          }) : v = [Ai];
          var D = -1;
          v = Mn(v, gi(Tt()));
          var H = Rh(m, function(se, ve, Ce) {
            var Ne = Mn(v, function(Ke) {
              return Ke(se);
            });
            return { criteria: Ne, index: ++D, value: se };
          });
          return rc(H, function(se, ve) {
            return Qy(se, ve, C);
          });
        }
        function Lm(m, v) {
          return yi(m, v, function(C, D) {
            return Wg(m, D);
          });
        }
        function yi(m, v, C) {
          for (var D = -1, H = v.length, se = {}; ++D < H; ) {
            var ve = v[D], Ce = Fa(m, ve);
            C(Ce, ve) && Ec(se, cs(ve, m), Ce);
          }
          return se;
        }
        function wr(m) {
          return function(v) {
            return Fa(v, m);
          };
        }
        function _c(m, v, C, D) {
          var H = D ? gh : Ia, se = -1, ve = v.length, Ce = m;
          for (m === v && (v = ki(v)), C && (Ce = Mn(m, gi(C))); ++se < ve; )
            for (var Ne = 0, Ke = v[se], Ye = C ? C(Ke) : Ke; (Ne = H(Ce, Ye, Ne, D)) > -1; )
              Ce !== m && ti.call(Ce, Ne, 1), ti.call(m, Ne, 1);
          return m;
        }
        function Sc(m, v) {
          for (var C = m ? v.length : 0, D = C - 1; C--; ) {
            var H = v[C];
            if (C == D || H !== se) {
              var se = H;
              va(H) ? ti.call(m, H, 1) : qf(m, H);
            }
          }
          return m;
        }
        function Cc(m, v) {
          return m + jf(bo() * (v - m + 1));
        }
        function Bm(m, v, C, D) {
          for (var H = -1, se = ar(lc((v - m) / (C || 1)), 0), ve = ne(se); se--; )
            ve[D ? se : ++H] = m, m += C;
          return ve;
        }
        function ga(m, v) {
          var C = "";
          if (!m || v < 1 || v > fe)
            return C;
          do
            v % 2 && (C += m), v = jf(v / 2), v && (m += m);
          while (v);
          return C;
        }
        function Ht(m, v) {
          return Zh(hg(m, v, Ai), m + "");
        }
        function qm(m) {
          return Df(Uc(m));
        }
        function $m(m, v) {
          var C = Uc(m);
          return sd(C, ha(v, 0, C.length));
        }
        function Ec(m, v, C, D) {
          if (!Xn(m))
            return m;
          v = cs(v, m);
          for (var H = -1, se = v.length, ve = se - 1, Ce = m; Ce != null && ++H < se; ) {
            var Ne = Bi(v[H]), Ke = C;
            if (Ne === "__proto__" || Ne === "constructor" || Ne === "prototype")
              return m;
            if (H != ve) {
              var Ye = Ce[Ne];
              Ke = D ? D(Ye, Ne, Ce) : n, Ke === n && (Ke = Xn(Ye) ? Ye : va(v[H + 1]) ? [] : {});
            }
            da(Ce, Ne, Ke), Ce = Ce[Ne];
          }
          return m;
        }
        var Fm = Ar ? function(m, v) {
          return Ar.set(m, v), m;
        } : Ai, Hy = Ds ? function(m, v) {
          return Ds(m, "toString", {
            configurable: !0,
            enumerable: !1,
            value: Hc(v),
            writable: !0
          });
        } : Ai;
        function Gy(m) {
          return sd(Uc(m));
        }
        function us(m, v, C) {
          var D = -1, H = m.length;
          v < 0 && (v = -v > H ? 0 : H + v), C = C > H ? H : C, C < 0 && (C += H), H = v > C ? 0 : C - v >>> 0, v >>>= 0;
          for (var se = ne(H); ++D < H; )
            se[D] = m[D + v];
          return se;
        }
        function Ky(m, v) {
          var C;
          return $a(m, function(D, H, se) {
            return C = v(D, H, se), !C;
          }), !!C;
        }
        function kc(m, v, C) {
          var D = 0, H = m == null ? D : m.length;
          if (typeof v == "number" && v === v && H <= V) {
            for (; D < H; ) {
              var se = D + H >>> 1, ve = m[se];
              ve !== null && !Hi(ve) && (C ? ve <= v : ve < v) ? D = se + 1 : H = se;
            }
            return H;
          }
          return zh(m, v, Ai, C);
        }
        function zh(m, v, C, D) {
          var H = 0, se = m == null ? 0 : m.length;
          if (se === 0)
            return 0;
          v = C(v);
          for (var ve = v !== v, Ce = v === null, Ne = Hi(v), Ke = v === n; H < se; ) {
            var Ye = jf((H + se) / 2), Xe = C(m[Ye]), pt = Xe !== n, St = Xe === null, Dt = Xe === Xe, Xt = Hi(Xe);
            if (ve)
              var zt = D || Dt;
            else Ke ? zt = Dt && (D || pt) : Ce ? zt = Dt && pt && (D || !St) : Ne ? zt = Dt && pt && !St && (D || !Xt) : St || Xt ? zt = !1 : zt = D ? Xe <= v : Xe < v;
            zt ? H = Ye + 1 : se = Ye;
          }
          return Tr(se, de);
        }
        function Yy(m, v) {
          for (var C = -1, D = m.length, H = 0, se = []; ++C < D; ) {
            var ve = m[C], Ce = v ? v(ve) : ve;
            if (!C || !ps(Ce, Ne)) {
              var Ne = Ce;
              se[H++] = ve === 0 ? 0 : ve;
            }
          }
          return se;
        }
        function Um(m) {
          return typeof m == "number" ? m : Hi(m) ? K : +m;
        }
        function Li(m) {
          if (typeof m == "string")
            return m;
          if (Bt(m))
            return Mn(m, Li) + "";
          if (Hi(m))
            return mu ? mu.call(m) : "";
          var v = m + "";
          return v == "0" && 1 / m == -oe ? "-0" : v;
        }
        function Eo(m, v, C) {
          var D = -1, H = Pa, se = m.length, ve = !0, Ce = [], Ne = Ce;
          if (C)
            ve = !1, H = ca;
          else if (se >= i) {
            var Ke = v ? null : nv(m);
            if (Ke)
              return du(Ke);
            ve = !1, H = nl, Ne = new yu();
          } else
            Ne = v ? [] : Ce;
          e:
            for (; ++D < se; ) {
              var Ye = m[D], Xe = v ? v(Ye) : Ye;
              if (Ye = C || Ye !== 0 ? Ye : 0, ve && Xe === Xe) {
                for (var pt = Ne.length; pt--; )
                  if (Ne[pt] === Xe)
                    continue e;
                v && Ne.push(Xe), Ce.push(Ye);
              } else H(Ne, Xe, C) || (Ne !== Ce && Ne.push(Xe), Ce.push(Ye));
            }
          return Ce;
        }
        function qf(m, v) {
          return v = cs(v, m), m = nd(m, v), m == null || delete m[Bi(Yn(v))];
        }
        function Vm(m, v, C, D) {
          return Ec(m, v, C(Fa(m, v)), D);
        }
        function $f(m, v, C, D) {
          for (var H = m.length, se = D ? H : -1; (D ? se-- : ++se < H) && v(m[se], se, m); )
            ;
          return C ? us(m, D ? 0 : se, D ? se + 1 : H) : us(m, D ? se + 1 : 0, D ? H : se);
        }
        function Hm(m, v) {
          var C = m;
          return C instanceof Ut && (C = C.value()), tc(v, function(D, H) {
            return H.func.apply(H.thisArg, ns([D], H.args));
          }, C);
        }
        function Ph(m, v, C) {
          var D = m.length;
          if (D < 2)
            return D ? Eo(m[0]) : [];
          for (var H = -1, se = ne(D); ++H < D; )
            for (var ve = m[H], Ce = -1; ++Ce < D; )
              Ce != H && (se[H] = $s(se[H] || ve, m[Ce], v, C));
          return Eo(Dr(se, 1), v, C);
        }
        function Gm(m, v, C) {
          for (var D = -1, H = m.length, se = v.length, ve = {}; ++D < H; ) {
            var Ce = D < se ? v[D] : n;
            C(ve, m[D], Ce);
          }
          return ve;
        }
        function Km(m) {
          return _r(m) ? m : [];
        }
        function Ih(m) {
          return typeof m == "function" ? m : Ai;
        }
        function cs(m, v) {
          return Bt(m) ? m : ed(m, v) ? [m] : pg(xn(m));
        }
        var Wy = Ht;
        function ya(m, v, C) {
          var D = m.length;
          return C = C === n ? D : C, !v && C >= D ? m : us(m, v, C);
        }
        var Ff = Py || function(m) {
          return nr.clearTimeout(m);
        };
        function Ym(m, v) {
          if (v)
            return m.slice();
          var C = m.length, D = vr ? vr(C) : new m.constructor(C);
          return m.copy(D), D;
        }
        function Uf(m) {
          var v = new m.constructor(m.byteLength);
          return new jt(v).set(new jt(m)), v;
        }
        function Xb(m, v) {
          var C = v ? Uf(m.buffer) : m.buffer;
          return new m.constructor(C, m.byteOffset, m.byteLength);
        }
        function Zy(m) {
          var v = new m.constructor(m.source, Cs.exec(m));
          return v.lastIndex = m.lastIndex, v;
        }
        function Xy(m) {
          return dc ? _e(dc.call(m)) : {};
        }
        function Wm(m, v) {
          var C = v ? Uf(m.buffer) : m.buffer;
          return new m.constructor(C, m.byteOffset, m.length);
        }
        function Zm(m, v) {
          if (m !== v) {
            var C = m !== n, D = m === null, H = m === m, se = Hi(m), ve = v !== n, Ce = v === null, Ne = v === v, Ke = Hi(v);
            if (!Ce && !Ke && !se && m > v || se && ve && Ne && !Ce && !Ke || D && ve && Ne || !C && Ne || !H)
              return 1;
            if (!D && !se && !Ke && m < v || Ke && C && H && !D && !se || Ce && C && H || !ve && H || !Ne)
              return -1;
          }
          return 0;
        }
        function Qy(m, v, C) {
          for (var D = -1, H = m.criteria, se = v.criteria, ve = H.length, Ce = C.length; ++D < ve; ) {
            var Ne = Zm(H[D], se[D]);
            if (Ne) {
              if (D >= Ce)
                return Ne;
              var Ke = C[D];
              return Ne * (Ke == "desc" ? -1 : 1);
            }
          }
          return m.index - v.index;
        }
        function Lh(m, v, C, D) {
          for (var H = -1, se = m.length, ve = C.length, Ce = -1, Ne = v.length, Ke = ar(se - ve, 0), Ye = ne(Ne + Ke), Xe = !D; ++Ce < Ne; )
            Ye[Ce] = v[Ce];
          for (; ++H < ve; )
            (Xe || H < se) && (Ye[C[H]] = m[H]);
          for (; Ke--; )
            Ye[Ce++] = m[H++];
          return Ye;
        }
        function Xm(m, v, C, D) {
          for (var H = -1, se = m.length, ve = -1, Ce = C.length, Ne = -1, Ke = v.length, Ye = ar(se - Ce, 0), Xe = ne(Ye + Ke), pt = !D; ++H < Ye; )
            Xe[H] = m[H];
          for (var St = H; ++Ne < Ke; )
            Xe[St + Ne] = v[Ne];
          for (; ++ve < Ce; )
            (pt || H < se) && (Xe[St + C[ve]] = m[H++]);
          return Xe;
        }
        function ki(m, v) {
          var C = -1, D = m.length;
          for (v || (v = ne(D)); ++C < D; )
            v[C] = m[C];
          return v;
        }
        function Vs(m, v, C, D) {
          var H = !C;
          C || (C = {});
          for (var se = -1, ve = v.length; ++se < ve; ) {
            var Ce = v[se], Ne = D ? D(C[Ce], m[Ce], Ce, C, m) : n;
            Ne === n && (Ne = m[Ce]), H ? as(C, Ce, Ne) : da(C, Ce, Ne);
          }
          return C;
        }
        function Jy(m, v) {
          return Vs(m, Hh(m), v);
        }
        function ev(m, v) {
          return Vs(m, Jf(m), v);
        }
        function Bh(m, v) {
          return function(C, D) {
            var H = Bt(C) ? bf : Fy, se = v ? v() : {};
            return H(C, m, Tt(D, 2), se);
          };
        }
        function yl(m) {
          return Ht(function(v, C) {
            var D = -1, H = C.length, se = H > 1 ? C[H - 1] : n, ve = H > 2 ? C[2] : n;
            for (se = m.length > 3 && typeof se == "function" ? (H--, se) : n, ve && vi(C[0], C[1], ve) && (se = H < 3 ? n : se, H = 1), v = _e(v); ++D < H; ) {
              var Ce = C[D];
              Ce && m(v, Ce, D, se);
            }
            return v;
          });
        }
        function Qm(m, v) {
          return function(C, D) {
            if (C == null)
              return C;
            if (!Vi(C))
              return m(C, D);
            for (var H = C.length, se = v ? H : -1, ve = _e(C); (v ? se-- : ++se < H) && D(ve[se], se, ve) !== !1; )
              ;
            return C;
          };
        }
        function Jm(m) {
          return function(v, C, D) {
            for (var H = -1, se = _e(v), ve = D(v), Ce = ve.length; Ce--; ) {
              var Ne = ve[m ? Ce : ++H];
              if (C(se[Ne], Ne, se) === !1)
                break;
            }
            return v;
          };
        }
        function eg(m, v, C) {
          var D = v & k, H = Vf(m);
          function se() {
            var ve = this && this !== nr && this instanceof se ? H : m;
            return ve.apply(D ? C : this, arguments);
          }
          return se;
        }
        function tg(m) {
          return function(v) {
            v = xn(v);
            var C = Jr(v) ? Bn(v) : n, D = C ? C[0] : v.charAt(0), H = C ? ya(C, 1).join("") : v.slice(1);
            return D[m]() + H;
          };
        }
        function wu(m) {
          return function(v) {
            return tc(m1(Vc(v).replace(ho, "")), m, "");
          };
        }
        function Vf(m) {
          return function() {
            var v = arguments;
            switch (v.length) {
              case 0:
                return new m();
              case 1:
                return new m(v[0]);
              case 2:
                return new m(v[0], v[1]);
              case 3:
                return new m(v[0], v[1], v[2]);
              case 4:
                return new m(v[0], v[1], v[2], v[3]);
              case 5:
                return new m(v[0], v[1], v[2], v[3], v[4]);
              case 6:
                return new m(v[0], v[1], v[2], v[3], v[4], v[5]);
              case 7:
                return new m(v[0], v[1], v[2], v[3], v[4], v[5], v[6]);
            }
            var C = cl(m.prototype), D = m.apply(C, v);
            return Xn(D) ? D : C;
          };
        }
        function Qb(m, v, C) {
          var D = Vf(m);
          function H() {
            for (var se = arguments.length, ve = ne(se), Ce = se, Ne = lr(H); Ce--; )
              ve[Ce] = arguments[Ce];
            var Ke = se < 3 && ve[0] !== Ne && ve[se - 1] !== Ne ? [] : rs(ve, Ne);
            if (se -= Ke.length, se < C)
              return Fh(
                m,
                v,
                Ac,
                H.placeholder,
                n,
                ve,
                Ke,
                n,
                n,
                C - se
              );
            var Ye = this && this !== nr && this instanceof H ? D : m;
            return kr(Ye, this, ve);
          }
          return H;
        }
        function ng(m) {
          return function(v, C, D) {
            var H = _e(v);
            if (!Vi(v)) {
              var se = Tt(C, 3);
              v = Ur(v), C = function(Ce) {
                return se(H[Ce], Ce, H);
              };
            }
            var ve = m(v, C, D);
            return ve > -1 ? H[se ? v[ve] : ve] : n;
          };
        }
        function Tc(m) {
          return Ua(function(v) {
            var C = v.length, D = C, H = Pi.prototype.thru;
            for (m && v.reverse(); D--; ) {
              var se = v[D];
              if (typeof se != "function")
                throw new je(o);
              if (H && !ve && rr(se) == "wrapper")
                var ve = new Pi([], !0);
            }
            for (D = ve ? D : C; ++D < C; ) {
              se = v[D];
              var Ce = rr(se), Ne = Ce == "wrapper" ? Zf(se) : n;
              Ne && td(Ne[0]) && Ne[1] == (q | N | P | G) && !Ne[4].length && Ne[9] == 1 ? ve = ve[rr(Ne[0])].apply(ve, Ne[3]) : ve = se.length == 1 && td(se) ? ve[Ce]() : ve.thru(se);
            }
            return function() {
              var Ke = arguments, Ye = Ke[0];
              if (ve && Ke.length == 1 && Bt(Ye))
                return ve.plant(Ye).value();
              for (var Xe = 0, pt = C ? v[Xe].apply(this, Ke) : Ye; ++Xe < C; )
                pt = v[Xe].call(this, pt);
              return pt;
            };
          });
        }
        function Ac(m, v, C, D, H, se, ve, Ce, Ne, Ke) {
          var Ye = v & q, Xe = v & k, pt = v & T, St = v & (N | O), Dt = v & Y, Xt = pt ? n : Vf(m);
          function zt() {
            for (var on = arguments.length, dn = ne(on), _a = on; _a--; )
              dn[_a] = arguments[_a];
            if (St)
              var ys = lr(zt), Sa = rl(dn, ys);
            if (D && (dn = Lh(dn, D, H, St)), se && (dn = Xm(dn, se, ve, St)), on -= Sa, St && on < Ke) {
              var Pr = rs(dn, ys);
              return Fh(
                m,
                v,
                Ac,
                zt.placeholder,
                C,
                dn,
                Pr,
                Ce,
                Ne,
                Ke - on
              );
            }
            var zo = Xe ? C : this, Au = pt ? zo[m] : m;
            return on = dn.length, Ce ? dn = rd(dn, Ce) : Dt && on > 1 && dn.reverse(), Ye && Ne < on && (dn.length = Ne), this && this !== nr && this instanceof zt && (Au = Xt || Vf(Au)), Au.apply(zo, dn);
          }
          return zt;
        }
        function Hf(m, v) {
          return function(C, D) {
            return Vy(C, m, v(D), {});
          };
        }
        function Gf(m, v) {
          return function(C, D) {
            var H;
            if (C === n && D === n)
              return v;
            if (C !== n && (H = C), D !== n) {
              if (H === n)
                return D;
              typeof C == "string" || typeof D == "string" ? (C = Li(C), D = Li(D)) : (C = Um(C), D = Um(D)), H = m(C, D);
            }
            return H;
          };
        }
        function qh(m) {
          return Ua(function(v) {
            return v = Mn(v, gi(Tt())), Ht(function(C) {
              var D = this;
              return m(v, function(H) {
                return kr(H, D, C);
              });
            });
          });
        }
        function vl(m, v) {
          v = v === n ? " " : Li(v);
          var C = v.length;
          if (C < 2)
            return C ? ga(v, m) : v;
          var D = ga(v, lc(m / Ci(v)));
          return Jr(v) ? ya(Bn(D), 0, m).join("") : D.slice(0, m);
        }
        function tv(m, v, C, D) {
          var H = v & k, se = Vf(m);
          function ve() {
            for (var Ce = -1, Ne = arguments.length, Ke = -1, Ye = D.length, Xe = ne(Ye + Ne), pt = this && this !== nr && this instanceof ve ? se : m; ++Ke < Ye; )
              Xe[Ke] = D[Ke];
            for (; Ne--; )
              Xe[Ke++] = arguments[++Ce];
            return kr(pt, H ? C : this, Xe);
          }
          return ve;
        }
        function $h(m) {
          return function(v, C, D) {
            return D && typeof D != "number" && vi(v, C, D) && (C = D = n), v = Oo(v), C === n ? (C = v, v = 0) : C = Oo(C), D = D === n ? v < C ? 1 : -1 : Oo(D), Bm(v, C, D, m);
          };
        }
        function Kf(m) {
          return function(v, C) {
            return typeof v == "string" && typeof C == "string" || (v = gs(v), C = gs(C)), m(v, C);
          };
        }
        function Fh(m, v, C, D, H, se, ve, Ce, Ne, Ke) {
          var Ye = v & N, Xe = Ye ? ve : n, pt = Ye ? n : ve, St = Ye ? se : n, Dt = Ye ? n : se;
          v |= Ye ? P : z, v &= ~(Ye ? z : P), v & R || (v &= -4);
          var Xt = [
            m,
            v,
            H,
            St,
            Xe,
            Dt,
            pt,
            Ce,
            Ne,
            Ke
          ], zt = C.apply(n, Xt);
          return td(m) && uv(zt, Xt), zt.placeholder = D, Nc(zt, m, v);
        }
        function Yf(m) {
          var v = be[m];
          return function(C, D) {
            if (C = gs(C), D = D == null ? 0 : Tr(Ot(D), 292), D && is(C)) {
              var H = (xn(C) + "e").split("e"), se = v(H[0] + "e" + (+H[1] + D));
              return H = (xn(se) + "e").split("e"), +(H[0] + "e" + (+H[1] - D));
            }
            return v(C);
          };
        }
        var nv = ol && 1 / du(new ol([, -0]))[1] == oe ? function(m) {
          return new ol(m);
        } : d;
        function rg(m) {
          return function(v) {
            var C = si(v);
            return C == mt ? ei(v) : C == Yt ? vo(v) : vh(v, m(v));
          };
        }
        function Ti(m, v, C, D, H, se, ve, Ce) {
          var Ne = v & T;
          if (!Ne && typeof m != "function")
            throw new je(o);
          var Ke = D ? D.length : 0;
          if (Ke || (v &= -97, D = H = n), ve = ve === n ? ve : ar(Ot(ve), 0), Ce = Ce === n ? Ce : Ot(Ce), Ke -= H ? H.length : 0, v & z) {
            var Ye = D, Xe = H;
            D = H = n;
          }
          var pt = Ne ? n : Zf(m), St = [
            m,
            v,
            C,
            D,
            H,
            Ye,
            Xe,
            se,
            ve,
            Ce
          ];
          if (pt && lv(St, pt), m = St[0], v = St[1], C = St[2], D = St[3], H = St[4], Ce = St[9] = St[9] === n ? Ne ? 0 : m.length : ar(St[9] - Ke, 0), !Ce && v & (N | O) && (v &= -25), !v || v == k)
            var Dt = eg(m, v, C);
          else v == N || v == O ? Dt = Qb(m, v, Ce) : (v == P || v == (k | P)) && !H.length ? Dt = tv(m, v, C, D) : Dt = Ac.apply(n, St);
          var Xt = pt ? Fm : uv;
          return Nc(Xt(Dt, St), m, v);
        }
        function ig(m, v, C, D) {
          return m === n || ps(m, Ve[C]) && !Ue.call(D, C) ? v : m;
        }
        function sg(m, v, C, D, H, se) {
          return Xn(m) && Xn(v) && (se.set(v, m), Bf(m, v, n, sg, se), se.delete(v)), m;
        }
        function rv(m) {
          return xd(m) ? n : m;
        }
        function Wf(m, v, C, D, H, se) {
          var ve = C & _, Ce = m.length, Ne = v.length;
          if (Ce != Ne && !(ve && Ne > Ce))
            return !1;
          var Ke = se.get(m), Ye = se.get(v);
          if (Ke && Ye)
            return Ke == v && Ye == m;
          var Xe = -1, pt = !0, St = C & E ? new yu() : n;
          for (se.set(m, v), se.set(v, m); ++Xe < Ce; ) {
            var Dt = m[Xe], Xt = v[Xe];
            if (D)
              var zt = ve ? D(Xt, Dt, Xe, v, m, se) : D(Dt, Xt, Xe, m, v, se);
            if (zt !== n) {
              if (zt)
                continue;
              pt = !1;
              break;
            }
            if (St) {
              if (!el(v, function(on, dn) {
                if (!nl(St, dn) && (Dt === on || H(Dt, on, C, D, se)))
                  return St.push(dn);
              })) {
                pt = !1;
                break;
              }
            } else if (!(Dt === Xt || H(Dt, Xt, C, D, se))) {
              pt = !1;
              break;
            }
          }
          return se.delete(m), se.delete(v), pt;
        }
        function iv(m, v, C, D, H, se, ve) {
          switch (C) {
            case at:
              if (m.byteLength != v.byteLength || m.byteOffset != v.byteOffset)
                return !1;
              m = m.buffer, v = v.buffer;
            case We:
              return !(m.byteLength != v.byteLength || !se(new jt(m), new jt(v)));
            case Ie:
            case Me:
            case ft:
              return ps(+m, +v);
            case ut:
              return m.name == v.name && m.message == v.message;
            case jn:
            case Nn:
              return m == v + "";
            case mt:
              var Ce = ei;
            case Yt:
              var Ne = D & _;
              if (Ce || (Ce = du), m.size != v.size && !Ne)
                return !1;
              var Ke = ve.get(m);
              if (Ke)
                return Ke == v;
              D |= E, ve.set(m, v);
              var Ye = Wf(Ce(m), Ce(v), D, H, se, ve);
              return ve.delete(m), Ye;
            case rn:
              if (dc)
                return dc.call(m) == dc.call(v);
          }
          return !1;
        }
        function ag(m, v, C, D, H, se) {
          var ve = C & _, Ce = Uh(m), Ne = Ce.length, Ke = Uh(v), Ye = Ke.length;
          if (Ne != Ye && !ve)
            return !1;
          for (var Xe = Ne; Xe--; ) {
            var pt = Ce[Xe];
            if (!(ve ? pt in v : Ue.call(v, pt)))
              return !1;
          }
          var St = se.get(m), Dt = se.get(v);
          if (St && Dt)
            return St == v && Dt == m;
          var Xt = !0;
          se.set(m, v), se.set(v, m);
          for (var zt = ve; ++Xe < Ne; ) {
            pt = Ce[Xe];
            var on = m[pt], dn = v[pt];
            if (D)
              var _a = ve ? D(dn, on, pt, v, m, se) : D(on, dn, pt, m, v, se);
            if (!(_a === n ? on === dn || H(on, dn, C, D, se) : _a)) {
              Xt = !1;
              break;
            }
            zt || (zt = pt == "constructor");
          }
          if (Xt && !zt) {
            var ys = m.constructor, Sa = v.constructor;
            ys != Sa && "constructor" in m && "constructor" in v && !(typeof ys == "function" && ys instanceof ys && typeof Sa == "function" && Sa instanceof Sa) && (Xt = !1);
          }
          return se.delete(m), se.delete(v), Xt;
        }
        function Ua(m) {
          return Zh(hg(m, n, Kn), m + "");
        }
        function Uh(m) {
          return Pm(m, Ur, Hh);
        }
        function og(m) {
          return Pm(m, Gi, Jf);
        }
        var Zf = Ar ? function(m) {
          return Ar.get(m);
        } : d;
        function rr(m) {
          for (var v = m.name + "", C = vn[v], D = Ue.call(vn, v) ? C.length : 0; D--; ) {
            var H = C[D], se = H.func;
            if (se == null || se == m)
              return H.name;
          }
          return v;
        }
        function lr(m) {
          var v = Ue.call(te, "placeholder") ? te : m;
          return v.placeholder;
        }
        function Tt() {
          var m = te.iteratee || Td;
          return m = m === Td ? wc : m, arguments.length ? m(arguments[0], arguments[1]) : m;
        }
        function Xf(m, v) {
          var C = m.__data__;
          return Yh(v) ? C[typeof v == "string" ? "string" : "hash"] : C.map;
        }
        function Vh(m) {
          for (var v = Ur(m), C = v.length; C--; ) {
            var D = v[C], H = m[D];
            v[C] = [D, H, Va(H)];
          }
          return v;
        }
        function xl(m, v) {
          var C = fu(m, v);
          return Lf(C) ? C : n;
        }
        function Qf(m) {
          var v = Ue.call(m, xo), C = m[xo];
          try {
            m[xo] = n;
            var D = !0;
          } catch {
          }
          var H = Qe.call(m);
          return D && (v ? m[xo] = C : delete m[xo]), H;
        }
        var Hh = Nf ? function(m) {
          return m == null ? [] : (m = _e(m), Vn(Nf(m), function(v) {
            return xr.call(m, v);
          }));
        } : Ge, Jf = Nf ? function(m) {
          for (var v = []; m; )
            ns(v, Hh(m)), m = On(m);
          return v;
        } : Ge, si = ii;
        (Is && si(new Is(new ArrayBuffer(1))) != at || ss && si(new ss()) != mt || bh && si(bh.resolve()) != qn || ol && si(new ol()) != Yt || pu && si(new pu()) != $n) && (si = function(m) {
          var v = ii(m), C = v == xt ? m.constructor : n, D = C ? xi(C) : "";
          if (D)
            switch (D) {
              case an:
                return at;
              case ll:
                return mt;
              case Ls:
                return qn;
              case Nm:
                return Yt;
              case ul:
                return $n;
            }
          return v;
        });
        function Jb(m, v, C) {
          for (var D = -1, H = C.length; ++D < H; ) {
            var se = C[D], ve = se.size;
            switch (se.type) {
              case "drop":
                m += ve;
                break;
              case "dropRight":
                v -= ve;
                break;
              case "take":
                v = Tr(v, m + ve);
                break;
              case "takeRight":
                m = ar(m, v - ve);
                break;
            }
          }
          return { start: m, end: v };
        }
        function Gh(m) {
          var v = m.match(so);
          return v ? v[1].split(ao) : [];
        }
        function Kh(m, v, C) {
          v = cs(v, m);
          for (var D = -1, H = v.length, se = !1; ++D < H; ) {
            var ve = Bi(v[D]);
            if (!(se = m != null && C(m, ve)))
              break;
            m = m[ve];
          }
          return se || ++D != H ? se : (H = m == null ? 0 : m.length, !!H && cp(H) && va(ve, H) && (Bt(m) || ku(m)));
        }
        function sv(m) {
          var v = m.length, C = new m.constructor(v);
          return v && typeof m[0] == "string" && Ue.call(m, "index") && (C.index = m.index, C.input = m.input), C;
        }
        function lg(m) {
          return typeof m.constructor == "function" && !jc(m) ? cl(On(m)) : {};
        }
        function av(m, v, C) {
          var D = m.constructor;
          switch (v) {
            case We:
              return Uf(m);
            case Ie:
            case Me:
              return new D(+m);
            case at:
              return Xb(m, C);
            case Ct:
            case Rt:
            case In:
            case Rn:
            case bt:
            case $t:
            case Ln:
            case nt:
            case Br:
              return Wm(m, C);
            case mt:
              return new D();
            case ft:
            case Nn:
              return new D(m);
            case jn:
              return Zy(m);
            case Yt:
              return new D();
            case rn:
              return Xy(m);
          }
        }
        function ug(m, v) {
          var C = v.length;
          if (!C)
            return m;
          var D = C - 1;
          return v[D] = (C > 1 ? "& " : "") + v[D], v = v.join(C > 2 ? ", " : " "), m.replace(Ra, `{
/* [wrapped with ` + v + `] */
`);
        }
        function cg(m) {
          return Bt(m) || ku(m) || !!(oc && m && m[oc]);
        }
        function va(m, v) {
          var C = typeof m;
          return v = v ?? fe, !!v && (C == "number" || C != "symbol" && Wo.test(m)) && m > -1 && m % 1 == 0 && m < v;
        }
        function vi(m, v, C) {
          if (!Xn(C))
            return !1;
          var D = typeof v;
          return (D == "number" ? Vi(C) && va(v, C.length) : D == "string" && v in C) ? ps(C[v], m) : !1;
        }
        function ed(m, v) {
          if (Bt(m))
            return !1;
          var C = typeof m;
          return C == "number" || C == "symbol" || C == "boolean" || m == null || Hi(m) ? !0 : Mi.test(m) || !_s.test(m) || v != null && m in _e(v);
        }
        function Yh(m) {
          var v = typeof m;
          return v == "string" || v == "number" || v == "symbol" || v == "boolean" ? m !== "__proto__" : m === null;
        }
        function td(m) {
          var v = rr(m), C = te[v];
          if (typeof C != "function" || !(v in Ut.prototype))
            return !1;
          if (m === C)
            return !0;
          var D = Zf(C);
          return !!D && m === D[0];
        }
        function ov(m) {
          return !!ot && ot in m;
        }
        var fg = et ? ms : Pe;
        function jc(m) {
          var v = m && m.constructor, C = typeof v == "function" && v.prototype || Ve;
          return m === C;
        }
        function Va(m) {
          return m === m && !Xn(m);
        }
        function Wh(m, v) {
          return function(C) {
            return C == null ? !1 : C[m] === v && (v !== n || m in _e(C));
          };
        }
        function e2(m) {
          var v = md(m, function(D) {
            return C.size === f && C.clear(), D;
          }), C = v.cache;
          return v;
        }
        function lv(m, v) {
          var C = m[1], D = v[1], H = C | D, se = H < (k | T | q), ve = D == q && C == N || D == q && C == G && m[7].length <= v[8] || D == (q | G) && v[7].length <= v[8] && C == N;
          if (!(se || ve))
            return m;
          D & k && (m[2] = v[2], H |= C & k ? 0 : R);
          var Ce = v[3];
          if (Ce) {
            var Ne = m[3];
            m[3] = Ne ? Lh(Ne, Ce, v[4]) : Ce, m[4] = Ne ? rs(m[3], p) : v[4];
          }
          return Ce = v[5], Ce && (Ne = m[5], m[5] = Ne ? Xm(Ne, Ce, v[6]) : Ce, m[6] = Ne ? rs(m[5], p) : v[6]), Ce = v[7], Ce && (m[7] = Ce), D & q && (m[8] = m[8] == null ? v[8] : Tr(m[8], v[8])), m[9] == null && (m[9] = v[9]), m[0] = v[0], m[1] = H, m;
        }
        function ko(m) {
          var v = [];
          if (m != null)
            for (var C in _e(m))
              v.push(C);
          return v;
        }
        function dg(m) {
          return Qe.call(m);
        }
        function hg(m, v, C) {
          return v = ar(v === n ? m.length - 1 : v, 0), function() {
            for (var D = arguments, H = -1, se = ar(D.length - v, 0), ve = ne(se); ++H < se; )
              ve[H] = D[v + H];
            H = -1;
            for (var Ce = ne(v + 1); ++H < v; )
              Ce[H] = D[H];
            return Ce[v] = C(ve), kr(m, this, Ce);
          };
        }
        function nd(m, v) {
          return v.length < 2 ? m : Fa(m, us(v, 0, -1));
        }
        function rd(m, v) {
          for (var C = m.length, D = Tr(v.length, C), H = ki(m); D--; ) {
            var se = v[D];
            m[D] = va(se, C) ? H[se] : n;
          }
          return m;
        }
        function Dn(m, v) {
          if (!(v === "constructor" && typeof m[v] == "function") && v != "__proto__")
            return m[v];
        }
        var uv = To(Fm), id = hu || function(m, v) {
          return nr.setTimeout(m, v);
        }, Zh = To(Hy);
        function Nc(m, v, C) {
          var D = v + "";
          return Zh(m, ug(D, cv(Gh(D), C)));
        }
        function To(m) {
          var v = 0, C = 0;
          return function() {
            var D = zs(), H = me - (D - C);
            if (C = D, H > 0) {
              if (++v >= X)
                return arguments[0];
            } else
              v = 0;
            return m.apply(n, arguments);
          };
        }
        function sd(m, v) {
          var C = -1, D = m.length, H = D - 1;
          for (v = v === n ? D : v; ++C < v; ) {
            var se = Cc(C, H), ve = m[se];
            m[se] = m[C], m[C] = ve;
          }
          return m.length = v, m;
        }
        var pg = e2(function(m) {
          var v = [];
          return m.charCodeAt(0) === 46 && v.push(""), m.replace(Ql, function(C, D, H, se) {
            v.push(H ? se.replace(er, "$1") : D || C);
          }), v;
        });
        function Bi(m) {
          if (typeof m == "string" || Hi(m))
            return m;
          var v = m + "";
          return v == "0" && 1 / m == -oe ? "-0" : v;
        }
        function xi(m) {
          if (m != null) {
            try {
              return st.call(m);
            } catch {
            }
            try {
              return m + "";
            } catch {
            }
          }
          return "";
        }
        function cv(m, v) {
          return Qr(ae, function(C) {
            var D = "_." + C[0];
            v & C[1] && !Pa(m, D) && m.push(D);
          }), m.sort();
        }
        function Xh(m) {
          if (m instanceof Ut)
            return m.clone();
          var v = new Pi(m.__wrapped__, m.__chain__);
          return v.__actions__ = ki(m.__actions__), v.__index__ = m.__index__, v.__values__ = m.__values__, v;
        }
        function fv(m, v, C) {
          (C ? vi(m, v, C) : v === n) ? v = 1 : v = ar(Ot(v), 0);
          var D = m == null ? 0 : m.length;
          if (!D || v < 1)
            return [];
          for (var H = 0, se = 0, ve = ne(lc(D / v)); H < D; )
            ve[se++] = us(m, H, H += v);
          return ve;
        }
        function mg(m) {
          for (var v = -1, C = m == null ? 0 : m.length, D = 0, H = []; ++v < C; ) {
            var se = m[v];
            se && (H[D++] = se);
          }
          return H;
        }
        function gg() {
          var m = arguments.length;
          if (!m)
            return [];
          for (var v = ne(m - 1), C = arguments[0], D = m; D--; )
            v[D - 1] = arguments[D];
          return ns(Bt(C) ? ki(C) : [C], Dr(v, 1));
        }
        var Qh = Ht(function(m, v) {
          return _r(m) ? $s(m, Dr(v, 1, _r, !0)) : [];
        }), dv = Ht(function(m, v) {
          var C = Yn(v);
          return _r(C) && (C = n), _r(m) ? $s(m, Dr(v, 1, _r, !0), Tt(C, 2)) : [];
        }), Ao = Ht(function(m, v) {
          var C = Yn(v);
          return _r(C) && (C = n), _r(m) ? $s(m, Dr(v, 1, _r, !0), n, C) : [];
        });
        function Nr(m, v, C) {
          var D = m == null ? 0 : m.length;
          return D ? (v = C || v === n ? 1 : Ot(v), us(m, v < 0 ? 0 : v, D)) : [];
        }
        function yg(m, v, C) {
          var D = m == null ? 0 : m.length;
          return D ? (v = C || v === n ? 1 : Ot(v), v = D - v, us(m, 0, v < 0 ? 0 : v)) : [];
        }
        function hv(m, v) {
          return m && m.length ? $f(m, Tt(v, 3), !0, !0) : [];
        }
        function Fr(m, v) {
          return m && m.length ? $f(m, Tt(v, 3), !0) : [];
        }
        function t2(m, v, C, D) {
          var H = m == null ? 0 : m.length;
          return H ? (C && typeof C != "number" && vi(m, v, C) && (C = 0, D = H), zf(m, v, C, D)) : [];
        }
        function vg(m, v, C) {
          var D = m == null ? 0 : m.length;
          if (!D)
            return -1;
          var H = C == null ? 0 : Ot(C);
          return H < 0 && (H = ar(D + H, 0)), yo(m, Tt(v, 3), H);
        }
        function xg(m, v, C) {
          var D = m == null ? 0 : m.length;
          if (!D)
            return -1;
          var H = D - 1;
          return C !== n && (H = Ot(C), H = C < 0 ? ar(D + H, 0) : Tr(H, D - 1)), yo(m, Tt(v, 3), H, !0);
        }
        function Kn(m) {
          var v = m == null ? 0 : m.length;
          return v ? Dr(m, 1) : [];
        }
        function qi(m) {
          var v = m == null ? 0 : m.length;
          return v ? Dr(m, oe) : [];
        }
        function jo(m, v) {
          var C = m == null ? 0 : m.length;
          return C ? (v = v === n ? 1 : Ot(v), Dr(m, v)) : [];
        }
        function pv(m) {
          for (var v = -1, C = m == null ? 0 : m.length, D = {}; ++v < C; ) {
            var H = m[v];
            D[H[0]] = H[1];
          }
          return D;
        }
        function bg(m) {
          return m && m.length ? m[0] : n;
        }
        function mv(m, v, C) {
          var D = m == null ? 0 : m.length;
          if (!D)
            return -1;
          var H = C == null ? 0 : Ot(C);
          return H < 0 && (H = ar(D + H, 0)), Ia(m, v, H);
        }
        function n2(m) {
          var v = m == null ? 0 : m.length;
          return v ? us(m, 0, -1) : [];
        }
        var Jh = Ht(function(m) {
          var v = Mn(m, Km);
          return v.length && v[0] === m[0] ? If(v) : [];
        }), $i = Ht(function(m) {
          var v = Yn(m), C = Mn(m, Km);
          return v === Yn(C) ? v = n : C.pop(), C.length && C[0] === m[0] ? If(C, Tt(v, 2)) : [];
        }), xa = Ht(function(m) {
          var v = Yn(m), C = Mn(m, Km);
          return v = typeof v == "function" ? v : n, v && C.pop(), C.length && C[0] === m[0] ? If(C, n, v) : [];
        });
        function gv(m, v) {
          return m == null ? "" : uc.call(m, v);
        }
        function Yn(m) {
          var v = m == null ? 0 : m.length;
          return v ? m[v - 1] : n;
        }
        function yv(m, v, C) {
          var D = m == null ? 0 : m.length;
          if (!D)
            return -1;
          var H = D;
          return C !== n && (H = Ot(C), H = H < 0 ? ar(D + H, 0) : Tr(H, D - 1)), v === v ? sl(m, v, H) : yo(m, yh, H, !0);
        }
        function No(m, v) {
          return m && m.length ? Oh(m, Ot(v)) : n;
        }
        var _u = Ht(Ha);
        function Ha(m, v) {
          return m && m.length && v && v.length ? _c(m, v) : m;
        }
        function wg(m, v, C) {
          return m && m.length && v && v.length ? _c(m, v, Tt(C, 2)) : m;
        }
        function _g(m, v, C) {
          return m && m.length && v && v.length ? _c(m, v, n, C) : m;
        }
        var ba = Ua(function(m, v) {
          var C = m == null ? 0 : m.length, D = vc(m, v);
          return Sc(m, Mn(v, function(H) {
            return va(H, C) ? +H : H;
          }).sort(Zm)), D;
        });
        function vv(m, v) {
          var C = [];
          if (!(m && m.length))
            return C;
          var D = -1, H = [], se = m.length;
          for (v = Tt(v, 3); ++D < se; ) {
            var ve = m[D];
            v(ve, D, m) && (C.push(ve), H.push(D));
          }
          return Sc(m, H), C;
        }
        function bl(m) {
          return m == null ? m : Ba.call(m);
        }
        function ad(m, v, C) {
          var D = m == null ? 0 : m.length;
          return D ? (C && typeof C != "number" && vi(m, v, C) ? (v = 0, C = D) : (v = v == null ? 0 : Ot(v), C = C === n ? D : Ot(C)), us(m, v, C)) : [];
        }
        function od(m, v) {
          return kc(m, v);
        }
        function Rc(m, v, C) {
          return zh(m, v, Tt(C, 2));
        }
        function xv(m, v) {
          var C = m == null ? 0 : m.length;
          if (C) {
            var D = kc(m, v);
            if (D < C && ps(m[D], v))
              return D;
          }
          return -1;
        }
        function bv(m, v) {
          return kc(m, v, !0);
        }
        function ld(m, v, C) {
          return zh(m, v, Tt(C, 2), !0);
        }
        function wv(m, v) {
          var C = m == null ? 0 : m.length;
          if (C) {
            var D = kc(m, v, !0) - 1;
            if (ps(m[D], v))
              return D;
          }
          return -1;
        }
        function ep(m) {
          return m && m.length ? Yy(m) : [];
        }
        function _v(m, v) {
          return m && m.length ? Yy(m, Tt(v, 2)) : [];
        }
        function r2(m) {
          var v = m == null ? 0 : m.length;
          return v ? us(m, 1, v) : [];
        }
        function i2(m, v, C) {
          return m && m.length ? (v = C || v === n ? 1 : Ot(v), us(m, 0, v < 0 ? 0 : v)) : [];
        }
        function yn(m, v, C) {
          var D = m == null ? 0 : m.length;
          return D ? (v = C || v === n ? 1 : Ot(v), v = D - v, us(m, v < 0 ? 0 : v, D)) : [];
        }
        function zn(m, v) {
          return m && m.length ? $f(m, Tt(v, 3), !1, !0) : [];
        }
        function Qt(m, v) {
          return m && m.length ? $f(m, Tt(v, 3)) : [];
        }
        var tn = Ht(function(m) {
          return Eo(Dr(m, 1, _r, !0));
        }), _n = Ht(function(m) {
          var v = Yn(m);
          return _r(v) && (v = n), Eo(Dr(m, 1, _r, !0), Tt(v, 2));
        }), fs = Ht(function(m) {
          var v = Yn(m);
          return v = typeof v == "function" ? v : n, Eo(Dr(m, 1, _r, !0), n, v);
        });
        function wl(m) {
          return m && m.length ? Eo(m) : [];
        }
        function Mc(m, v) {
          return m && m.length ? Eo(m, Tt(v, 2)) : [];
        }
        function Sg(m, v) {
          return v = typeof v == "function" ? v : n, m && m.length ? Eo(m, n, v) : [];
        }
        function wa(m) {
          if (!(m && m.length))
            return [];
          var v = 0;
          return m = Vn(m, function(C) {
            if (_r(C))
              return v = ar(C.length, v), !0;
          }), lu(v, function(C) {
            return Mn(m, Os(C));
          });
        }
        function ir(m, v) {
          if (!(m && m.length))
            return [];
          var C = wa(m);
          return v == null ? C : Mn(C, function(D) {
            return kr(v, n, D);
          });
        }
        var _l = Ht(function(m, v) {
          return _r(m) ? $s(m, v) : [];
        }), Su = Ht(function(m) {
          return Ph(Vn(m, _r));
        }), Cg = Ht(function(m) {
          var v = Yn(m);
          return _r(v) && (v = n), Ph(Vn(m, _r), Tt(v, 2));
        }), ds = Ht(function(m) {
          var v = Yn(m);
          return v = typeof v == "function" ? v : n, Ph(Vn(m, _r), n, v);
        }), Oc = Ht(wa);
        function ud(m, v) {
          return Gm(m || [], v || [], da);
        }
        function Fi(m, v) {
          return Gm(m || [], v || [], Ec);
        }
        var Eg = Ht(function(m) {
          var v = m.length, C = v > 1 ? m[v - 1] : n;
          return C = typeof C == "function" ? (m.pop(), C) : n, ir(m, C);
        });
        function cd(m) {
          var v = te(m);
          return v.__chain__ = !0, v;
        }
        function Sv(m, v) {
          return v(m), m;
        }
        function Cu(m, v) {
          return v(m);
        }
        var tp = Ua(function(m) {
          var v = m.length, C = v ? m[0] : 0, D = this.__wrapped__, H = function(se) {
            return vc(se, m);
          };
          return v > 1 || this.__actions__.length || !(D instanceof Ut) || !va(C) ? this.thru(H) : (D = D.slice(C, +C + (v ? 1 : 0)), D.__actions__.push({
            func: Cu,
            args: [H],
            thisArg: n
          }), new Pi(D, this.__chain__).thru(function(se) {
            return v && !se.length && se.push(n), se;
          }));
        });
        function Sl() {
          return cd(this);
        }
        function zr() {
          return new Pi(this.value(), this.__chain__);
        }
        function Cl() {
          this.__values__ === n && (this.__values__ = Kv(this.value()));
          var m = this.__index__ >= this.__values__.length, v = m ? n : this.__values__[this.__index__++];
          return { done: m, value: v };
        }
        function Dc() {
          return this;
        }
        function Ro(m) {
          for (var v, C = this; C instanceof fl; ) {
            var D = Xh(C);
            D.__index__ = 0, D.__values__ = n, v ? H.__wrapped__ = D : v = D;
            var H = D;
            C = C.__wrapped__;
          }
          return H.__wrapped__ = m, v;
        }
        function kg() {
          var m = this.__wrapped__;
          if (m instanceof Ut) {
            var v = m;
            return this.__actions__.length && (v = new Ut(this)), v = v.reverse(), v.__actions__.push({
              func: Cu,
              args: [bl],
              thisArg: n
            }), new Pi(v, this.__chain__);
          }
          return this.thru(bl);
        }
        function Tg() {
          return Hm(this.__wrapped__, this.__actions__);
        }
        var Cv = Bh(function(m, v, C) {
          Ue.call(m, C) ? ++m[C] : as(m, C, 1);
        });
        function fd(m, v, C) {
          var D = Bt(m) ? ec : pl;
          return C && vi(m, v, C) && (v = n), D(m, Tt(v, 3));
        }
        function Ag(m, v) {
          var C = Bt(m) ? Vn : Th;
          return C(m, Tt(v, 3));
        }
        var hs = ng(vg), Ev = ng(xg);
        function Ui(m, v) {
          return Dr(dd(m, v), 1);
        }
        function kv(m, v) {
          return Dr(dd(m, v), oe);
        }
        function Tv(m, v, C) {
          return C = C === n ? 1 : Ot(C), Dr(dd(m, v), C);
        }
        function Av(m, v) {
          var C = Bt(m) ? Qr : $a;
          return C(m, Tt(v, 3));
        }
        function Mo(m, v) {
          var C = Bt(m) ? wf : kh;
          return C(m, Tt(v, 3));
        }
        var np = Bh(function(m, v, C) {
          Ue.call(m, C) ? m[C].push(v) : as(m, C, [v]);
        });
        function jg(m, v, C, D) {
          m = Vi(m) ? m : Uc(m), C = C && !D ? Ot(C) : 0;
          var H = m.length;
          return C < 0 && (C = ar(H + C, 0)), _d(m) ? C <= H && m.indexOf(v, C) > -1 : !!H && Ia(m, v, C) > -1;
        }
        var zc = Ht(function(m, v, C) {
          var D = -1, H = typeof v == "function", se = Vi(m) ? ne(m.length) : [];
          return $a(m, function(ve) {
            se[++D] = H ? kr(v, ve, C) : Us(ve, v, C);
          }), se;
        }), jv = Bh(function(m, v, C) {
          as(m, C, v);
        });
        function dd(m, v) {
          var C = Bt(m) ? Mn : Rh;
          return C(m, Tt(v, 3));
        }
        function Nv(m, v, C, D) {
          return m == null ? [] : (Bt(v) || (v = v == null ? [] : [v]), C = D ? n : C, Bt(C) || (C = C == null ? [] : [C]), Dh(m, v, C));
        }
        var Rv = Bh(function(m, v, C) {
          m[C ? 0 : 1].push(v);
        }, function() {
          return [[], []];
        });
        function rp(m, v, C) {
          var D = Bt(m) ? tc : ou, H = arguments.length < 3;
          return D(m, Tt(v, 4), C, H, $a);
        }
        function Ng(m, v, C) {
          var D = Bt(m) ? _f : ou, H = arguments.length < 3;
          return D(m, Tt(v, 4), C, H, kh);
        }
        function s2(m, v) {
          var C = Bt(m) ? Vn : Th;
          return C(m, ap(Tt(v, 3)));
        }
        function a2(m) {
          var v = Bt(m) ? Df : qm;
          return v(m);
        }
        function o2(m, v, C) {
          (C ? vi(m, v, C) : v === n) ? v = 1 : v = Ot(v);
          var D = Bt(m) ? Ch : $m;
          return D(m, v);
        }
        function Mv(m) {
          var v = Bt(m) ? $y : Gy;
          return v(m);
        }
        function Ov(m) {
          if (m == null)
            return 0;
          if (Vi(m))
            return _d(m) ? Ci(m) : m.length;
          var v = si(m);
          return v == mt || v == Yt ? m.size : gl(m).length;
        }
        function Pc(m, v, C) {
          var D = Bt(m) ? el : Ky;
          return C && vi(m, v, C) && (v = n), D(m, Tt(v, 3));
        }
        var ip = Ht(function(m, v) {
          if (m == null)
            return [];
          var C = v.length;
          return C > 1 && vi(m, v[0], v[1]) ? v = [] : C > 2 && vi(v[0], v[1], v[2]) && (v = [v[0]]), Dh(m, Dr(v, 1), []);
        }), hd = xh || function() {
          return nr.Date.now();
        };
        function Dv(m, v) {
          if (typeof v != "function")
            throw new je(o);
          return m = Ot(m), function() {
            if (--m < 1)
              return v.apply(this, arguments);
          };
        }
        function Rg(m, v, C) {
          return v = C ? n : v, v = m && v == null ? m.length : v, Ti(m, q, n, n, n, n, v);
        }
        function Mg(m, v) {
          var C;
          if (typeof v != "function")
            throw new je(o);
          return m = Ot(m), function() {
            return --m > 0 && (C = v.apply(this, arguments)), m <= 1 && (v = n), C;
          };
        }
        var sp = Ht(function(m, v, C) {
          var D = k;
          if (C.length) {
            var H = rs(C, lr(sp));
            D |= P;
          }
          return Ti(m, D, v, C, H);
        }), Og = Ht(function(m, v, C) {
          var D = k | T;
          if (C.length) {
            var H = rs(C, lr(Og));
            D |= P;
          }
          return Ti(v, D, m, C, H);
        });
        function pd(m, v, C) {
          v = C ? n : v;
          var D = Ti(m, N, n, n, n, n, n, v);
          return D.placeholder = pd.placeholder, D;
        }
        function Dg(m, v, C) {
          v = C ? n : v;
          var D = Ti(m, O, n, n, n, n, n, v);
          return D.placeholder = Dg.placeholder, D;
        }
        function zg(m, v, C) {
          var D, H, se, ve, Ce, Ne, Ke = 0, Ye = !1, Xe = !1, pt = !0;
          if (typeof m != "function")
            throw new je(o);
          v = gs(v) || 0, Xn(C) && (Ye = !!C.leading, Xe = "maxWait" in C, se = Xe ? ar(gs(C.maxWait) || 0, v) : se, pt = "trailing" in C ? !!C.trailing : pt);
          function St(Pr) {
            var zo = D, Au = H;
            return D = H = n, Ke = Pr, ve = m.apply(Au, zo), ve;
          }
          function Dt(Pr) {
            return Ke = Pr, Ce = id(on, v), Ye ? St(Pr) : ve;
          }
          function Xt(Pr) {
            var zo = Pr - Ne, Au = Pr - Ke, IT = v - zo;
            return Xe ? Tr(IT, se - Au) : IT;
          }
          function zt(Pr) {
            var zo = Pr - Ne, Au = Pr - Ke;
            return Ne === n || zo >= v || zo < 0 || Xe && Au >= se;
          }
          function on() {
            var Pr = hd();
            if (zt(Pr))
              return dn(Pr);
            Ce = id(on, Xt(Pr));
          }
          function dn(Pr) {
            return Ce = n, pt && D ? St(Pr) : (D = H = n, ve);
          }
          function _a() {
            Ce !== n && Ff(Ce), Ke = 0, D = Ne = H = Ce = n;
          }
          function ys() {
            return Ce === n ? ve : dn(hd());
          }
          function Sa() {
            var Pr = hd(), zo = zt(Pr);
            if (D = arguments, H = this, Ne = Pr, zo) {
              if (Ce === n)
                return Dt(Ne);
              if (Xe)
                return Ff(Ce), Ce = id(on, v), St(Ne);
            }
            return Ce === n && (Ce = id(on, v)), ve;
          }
          return Sa.cancel = _a, Sa.flush = ys, Sa;
        }
        var Sn = Ht(function(m, v) {
          return zm(m, 1, v);
        }), Pg = Ht(function(m, v, C) {
          return zm(m, gs(v) || 0, C);
        });
        function l2(m) {
          return Ti(m, Y);
        }
        function md(m, v) {
          if (typeof m != "function" || v != null && typeof v != "function")
            throw new je(o);
          var C = function() {
            var D = arguments, H = v ? v.apply(this, D) : D[0], se = C.cache;
            if (se.has(H))
              return se.get(H);
            var ve = m.apply(this, D);
            return C.cache = se.set(H, ve) || se, ve;
          };
          return C.cache = new (md.Cache || fa)(), C;
        }
        md.Cache = fa;
        function ap(m) {
          if (typeof m != "function")
            throw new je(o);
          return function() {
            var v = arguments;
            switch (v.length) {
              case 0:
                return !m.call(this);
              case 1:
                return !m.call(this, v[0]);
              case 2:
                return !m.call(this, v[0], v[1]);
              case 3:
                return !m.call(this, v[0], v[1], v[2]);
            }
            return !m.apply(this, v);
          };
        }
        function u2(m) {
          return Mg(2, m);
        }
        var c2 = Wy(function(m, v) {
          v = v.length == 1 && Bt(v[0]) ? Mn(v[0], gi(Tt())) : Mn(Dr(v, 1), gi(Tt()));
          var C = v.length;
          return Ht(function(D) {
            for (var H = -1, se = Tr(D.length, C); ++H < se; )
              D[H] = v[H].call(this, D[H]);
            return kr(m, this, D);
          });
        }), Ic = Ht(function(m, v) {
          var C = rs(v, lr(Ic));
          return Ti(m, P, n, v, C);
        }), Eu = Ht(function(m, v) {
          var C = rs(v, lr(Eu));
          return Ti(m, z, n, v, C);
        }), Ig = Ua(function(m, v) {
          return Ti(m, G, n, n, n, v);
        });
        function op(m, v) {
          if (typeof m != "function")
            throw new je(o);
          return v = v === n ? v : Ot(v), Ht(m, v);
        }
        function Lg(m, v) {
          if (typeof m != "function")
            throw new je(o);
          return v = v == null ? 0 : ar(Ot(v), 0), Ht(function(C) {
            var D = C[v], H = ya(C, 0, v);
            return D && ns(H, D), kr(m, this, H);
          });
        }
        function El(m, v, C) {
          var D = !0, H = !0;
          if (typeof m != "function")
            throw new je(o);
          return Xn(C) && (D = "leading" in C ? !!C.leading : D, H = "trailing" in C ? !!C.trailing : H), zg(m, v, {
            leading: D,
            maxWait: v,
            trailing: H
          });
        }
        function Ga(m) {
          return Rg(m, 1);
        }
        function gd(m, v) {
          return Ic(Ih(v), m);
        }
        function f2() {
          if (!arguments.length)
            return [];
          var m = arguments[0];
          return Bt(m) ? m : [m];
        }
        function zv(m) {
          return Ei(m, b);
        }
        function Pv(m, v) {
          return v = typeof v == "function" ? v : n, Ei(m, b, v);
        }
        function Iv(m) {
          return Ei(m, g | b);
        }
        function Lv(m, v) {
          return v = typeof v == "function" ? v : n, Ei(m, g | b, v);
        }
        function d2(m, v) {
          return v == null || hl(m, v, Ur(v));
        }
        function ps(m, v) {
          return m === v || m !== m && v !== v;
        }
        var Bv = Kf(Pf), qv = Kf(function(m, v) {
          return m >= v;
        }), ku = Ii(/* @__PURE__ */ (function() {
          return arguments;
        })()) ? Ii : function(m) {
          return ur(m) && Ue.call(m, "callee") && !xr.call(m, "callee");
        }, Bt = ne.isArray, Bg = vf ? gi(vf) : br;
        function Vi(m) {
          return m != null && cp(m.length) && !ms(m);
        }
        function _r(m) {
          return ur(m) && Vi(m);
        }
        function yd(m) {
          return m === !0 || m === !1 || ur(m) && ii(m) == Ie;
        }
        var kl = Iy || Pe, $v = su ? gi(su) : jh;
        function Jt(m) {
          return ur(m) && m.nodeType === 1 && !xd(m);
        }
        function qg(m) {
          if (m == null)
            return !0;
          if (Vi(m) && (Bt(m) || typeof m == "string" || typeof m.splice == "function" || kl(m) || Tl(m) || ku(m)))
            return !m.length;
          var v = si(m);
          if (v == mt || v == Yt)
            return !m.size;
          if (jc(m))
            return !gl(m).length;
          for (var C in m)
            if (Ue.call(m, C))
              return !1;
          return !0;
        }
        function lp(m, v) {
          return ls(m, v);
        }
        function $g(m, v, C) {
          C = typeof C == "function" ? C : n;
          var D = C ? C(m, v) : n;
          return D === n ? ls(m, v, n, C) : !!D;
        }
        function up(m) {
          if (!ur(m))
            return !1;
          var v = ii(m);
          return v == ut || v == dt || typeof m.message == "string" && typeof m.name == "string" && !xd(m);
        }
        function Fg(m) {
          return typeof m == "number" && is(m);
        }
        function ms(m) {
          if (!Xn(m))
            return !1;
          var v = ii(m);
          return v == Je || v == ct || v == Re || v == An;
        }
        function vd(m) {
          return typeof m == "number" && m == Ot(m);
        }
        function cp(m) {
          return typeof m == "number" && m > -1 && m % 1 == 0 && m <= fe;
        }
        function Xn(m) {
          var v = typeof m;
          return m != null && (v == "object" || v == "function");
        }
        function ur(m) {
          return m != null && typeof m == "object";
        }
        var Fv = mo ? gi(mo) : En;
        function Uv(m, v) {
          return m === v || or(m, v, Vh(v));
        }
        function Vv(m, v, C) {
          return C = typeof C == "function" ? C : n, or(m, v, Vh(v), C);
        }
        function kn(m) {
          return Vg(m) && m != +m;
        }
        function Ug(m) {
          if (fg(m))
            throw new he(a);
          return Lf(m);
        }
        function ai(m) {
          return m === null;
        }
        function h2(m) {
          return m == null;
        }
        function Vg(m) {
          return typeof m == "number" || ur(m) && ii(m) == ft;
        }
        function xd(m) {
          if (!ur(m) || ii(m) != xt)
            return !1;
          var v = On(m);
          if (v === null)
            return !0;
          var C = Ue.call(v, "constructor") && v.constructor;
          return typeof C == "function" && C instanceof C && st.call(C) == gt;
        }
        var bd = au ? gi(au) : bc;
        function Hg(m) {
          return vd(m) && m >= -fe && m <= fe;
        }
        var wd = xf ? gi(xf) : bu;
        function _d(m) {
          return typeof m == "string" || !Bt(m) && ur(m) && ii(m) == Nn;
        }
        function Hi(m) {
          return typeof m == "symbol" || ur(m) && ii(m) == rn;
        }
        var Tl = mh ? gi(mh) : Nh;
        function Gg(m) {
          return m === n;
        }
        function p2(m) {
          return ur(m) && si(m) == $n;
        }
        function Hv(m) {
          return ur(m) && ii(m) == Le;
        }
        var m2 = Kf(Zn), Gv = Kf(function(m, v) {
          return m <= v;
        });
        function Kv(m) {
          if (!m)
            return [];
          if (Vi(m))
            return _d(m) ? Bn(m) : ki(m);
          if (ni && m[ni])
            return il(m[ni]());
          var v = si(m), C = v == mt ? ei : v == Yt ? du : Uc;
          return C(m);
        }
        function Oo(m) {
          if (!m)
            return m === 0 ? m : 0;
          if (m = gs(m), m === oe || m === -oe) {
            var v = m < 0 ? -1 : 1;
            return v * ce;
          }
          return m === m ? m : 0;
        }
        function Ot(m) {
          var v = Oo(m), C = v % 1;
          return v === v ? C ? v - C : v : 0;
        }
        function Kg(m) {
          return m ? ha(Ot(m), 0, re) : 0;
        }
        function gs(m) {
          if (typeof m == "number")
            return m;
          if (Hi(m))
            return K;
          if (Xn(m)) {
            var v = typeof m.valueOf == "function" ? m.valueOf() : m;
            m = Xn(v) ? v + "" : v;
          }
          if (typeof m != "string")
            return m === 0 ? m : +m;
          m = La(m);
          var C = Es.test(m);
          return C || bi.test(m) ? Qu(m.slice(2), C ? 2 : 8) : Gu.test(m) ? K : +m;
        }
        function fp(m) {
          return Vs(m, Gi(m));
        }
        function g2(m) {
          return m ? ha(Ot(m), -fe, fe) : m === 0 ? m : 0;
        }
        function xn(m) {
          return m == null ? "" : Li(m);
        }
        var Yv = yl(function(m, v) {
          if (jc(v) || Vi(v)) {
            Vs(v, Ur(v), m);
            return;
          }
          for (var C in v)
            Ue.call(v, C) && da(m, C, v[C]);
        }), dp = yl(function(m, v) {
          Vs(v, Gi(v), m);
        }), Lc = yl(function(m, v, C, D) {
          Vs(v, Gi(v), m, D);
        }), y2 = yl(function(m, v, C, D) {
          Vs(v, Ur(v), m, D);
        }), Hs = Ua(vc);
        function Yg(m, v) {
          var C = cl(m);
          return v == null ? C : Dm(C, v);
        }
        var Wv = Ht(function(m, v) {
          m = _e(m);
          var C = -1, D = v.length, H = D > 2 ? v[2] : n;
          for (H && vi(v[0], v[1], H) && (D = 1); ++C < D; )
            for (var se = v[C], ve = Gi(se), Ce = -1, Ne = ve.length; ++Ce < Ne; ) {
              var Ke = ve[Ce], Ye = m[Ke];
              (Ye === n || ps(Ye, Ve[Ke]) && !Ue.call(m, Ke)) && (m[Ke] = se[Ke]);
            }
          return m;
        }), Zv = Ht(function(m) {
          return m.push(n, sg), kr(qc, n, m);
        });
        function Xv(m, v) {
          return nc(m, Tt(v, 3), ma);
        }
        function Sd(m, v) {
          return nc(m, Tt(v, 3), Ah);
        }
        function Gs(m, v) {
          return m == null ? m : xu(m, Tt(v, 3), Gi);
        }
        function Qv(m, v) {
          return m == null ? m : xc(m, Tt(v, 3), Gi);
        }
        function hp(m, v) {
          return m && ma(m, Tt(v, 3));
        }
        function Do(m, v) {
          return m && Ah(m, Tt(v, 3));
        }
        function v2(m) {
          return m == null ? [] : Co(m, Ur(m));
        }
        function x2(m) {
          return m == null ? [] : Co(m, Gi(m));
        }
        function Al(m, v, C) {
          var D = m == null ? n : Fa(m, v);
          return D === n ? C : D;
        }
        function Jv(m, v) {
          return m != null && Kh(m, v, os);
        }
        function Wg(m, v) {
          return m != null && Kh(m, v, Fs);
        }
        var b2 = Hf(function(m, v, C) {
          v != null && typeof v.toString != "function" && (v = Qe.call(v)), m[v] = C;
        }, Hc(Ai)), w2 = Hf(function(m, v, C) {
          v != null && typeof v.toString != "function" && (v = Qe.call(v)), Ue.call(m, v) ? m[v].push(C) : m[v] = [C];
        }, Tt), _2 = Ht(Us);
        function Ur(m) {
          return Vi(m) ? Sh(m) : gl(m);
        }
        function Gi(m) {
          return Vi(m) ? Sh(m, !0) : Wb(m);
        }
        function S2(m, v) {
          var C = {};
          return v = Tt(v, 3), ma(m, function(D, H, se) {
            as(C, v(D, H, se), D);
          }), C;
        }
        function e1(m, v) {
          var C = {};
          return v = Tt(v, 3), ma(m, function(D, H, se) {
            as(C, H, v(D, H, se));
          }), C;
        }
        var Bc = yl(function(m, v, C) {
          Bf(m, v, C);
        }), qc = yl(function(m, v, C, D) {
          Bf(m, v, C, D);
        }), t1 = Ua(function(m, v) {
          var C = {};
          if (m == null)
            return C;
          var D = !1;
          v = Mn(v, function(se) {
            return se = cs(se, m), D || (D = se.length > 1), se;
          }), Vs(m, og(m), C), D && (C = Ei(C, g | x | b, rv));
          for (var H = v.length; H--; )
            qf(C, v[H]);
          return C;
        });
        function C2(m, v) {
          return Fc(m, ap(Tt(v)));
        }
        var $c = Ua(function(m, v) {
          return m == null ? {} : Lm(m, v);
        });
        function Fc(m, v) {
          if (m == null)
            return {};
          var C = Mn(og(m), function(D) {
            return [D];
          });
          return v = Tt(v), yi(m, C, function(D, H) {
            return v(D, H[0]);
          });
        }
        function n1(m, v, C) {
          v = cs(v, m);
          var D = -1, H = v.length;
          for (H || (H = 1, m = n); ++D < H; ) {
            var se = m == null ? n : m[Bi(v[D])];
            se === n && (D = H, se = C), m = ms(se) ? se.call(m) : se;
          }
          return m;
        }
        function pp(m, v, C) {
          return m == null ? m : Ec(m, v, C);
        }
        function Zg(m, v, C, D) {
          return D = typeof D == "function" ? D : n, m == null ? m : Ec(m, v, C, D);
        }
        var mp = rg(Ur), Cd = rg(Gi);
        function r1(m, v, C) {
          var D = Bt(m), H = D || kl(m) || Tl(m);
          if (v = Tt(v, 4), C == null) {
            var se = m && m.constructor;
            H ? C = D ? new se() : [] : Xn(m) ? C = ms(se) ? cl(On(m)) : {} : C = {};
          }
          return (H ? Qr : ma)(m, function(ve, Ce, Ne) {
            return v(C, ve, Ce, Ne);
          }), C;
        }
        function i1(m, v) {
          return m == null ? !0 : qf(m, v);
        }
        function E2(m, v, C) {
          return m == null ? m : Vm(m, v, Ih(C));
        }
        function s1(m, v, C, D) {
          return D = typeof D == "function" ? D : n, m == null ? m : Vm(m, v, Ih(C), D);
        }
        function Uc(m) {
          return m == null ? [] : kf(m, Ur(m));
        }
        function Xg(m) {
          return m == null ? [] : kf(m, Gi(m));
        }
        function k2(m, v, C) {
          return C === n && (C = v, v = n), C !== n && (C = gs(C), C = C === C ? C : 0), v !== n && (v = gs(v), v = v === v ? v : 0), ha(gs(m), v, C);
        }
        function gp(m, v, C) {
          return v = Oo(v), C === n ? (C = v, v = 0) : C = Oo(C), m = gs(m), ml(m, v, C);
        }
        function yp(m, v, C) {
          if (C && typeof C != "boolean" && vi(m, v, C) && (v = C = n), C === n && (typeof v == "boolean" ? (C = v, v = n) : typeof m == "boolean" && (C = m, m = n)), m === n && v === n ? (m = 0, v = 1) : (m = Oo(m), v === n ? (v = m, m = 0) : v = Oo(v)), m > v) {
            var D = m;
            m = v, v = D;
          }
          if (C || m % 1 || v % 1) {
            var H = bo();
            return Tr(m + H * (v - m + po("1e-" + ((H + "").length - 1))), v);
          }
          return Cc(m, v);
        }
        var vp = wu(function(m, v, C) {
          return v = v.toLowerCase(), m + (C ? a1(v) : v);
        });
        function a1(m) {
          return Tu(xn(m).toLowerCase());
        }
        function Vc(m) {
          return m = xn(m), m && m.replace(ks, cu).replace(Xo, "");
        }
        function T2(m, v, C) {
          m = xn(m), v = Li(v);
          var D = m.length;
          C = C === n ? D : ha(Ot(C), 0, D);
          var H = C;
          return C -= v.length, C >= 0 && m.slice(C, H) == v;
        }
        function o1(m) {
          return m = xn(m), m && io.test(m) ? m.replace(Na, jm) : m;
        }
        function l1(m) {
          return m = xn(m), m && wn.test(m) ? m.replace(aa, "\\$&") : m;
        }
        var u1 = wu(function(m, v, C) {
          return m + (C ? "-" : "") + v.toLowerCase();
        }), c1 = wu(function(m, v, C) {
          return m + (C ? " " : "") + v.toLowerCase();
        }), Qg = tg("toLowerCase");
        function f1(m, v, C) {
          m = xn(m), v = Ot(v);
          var D = v ? Ci(m) : 0;
          if (!v || D >= v)
            return m;
          var H = (v - D) / 2;
          return vl(jf(H), C) + m + vl(lc(H), C);
        }
        function d1(m, v, C) {
          m = xn(m), v = Ot(v);
          var D = v ? Ci(m) : 0;
          return v && D < v ? m + vl(v - D, C) : m;
        }
        function xp(m, v, C) {
          m = xn(m), v = Ot(v);
          var D = v ? Ci(m) : 0;
          return v && D < v ? vl(v - D, C) + m : m;
        }
        function A2(m, v, C) {
          return C || v == null ? v = 0 : v && (v = +v), Ps(xn(m).replace(Fn, ""), v || 0);
        }
        function j2(m, v, C) {
          return (C ? vi(m, v, C) : v === n) ? v = 1 : v = Ot(v), ga(xn(m), v);
        }
        function Jg() {
          var m = arguments, v = xn(m[0]);
          return m.length < 3 ? v : v.replace(m[1], m[2]);
        }
        var e0 = wu(function(m, v, C) {
          return m + (C ? "_" : "") + v.toLowerCase();
        });
        function bp(m, v, C) {
          return C && typeof C != "number" && vi(m, v, C) && (v = C = n), C = C === n ? re : C >>> 0, C ? (m = xn(m), m && (typeof v == "string" || v != null && !bd(v)) && (v = Li(v), !v && Jr(m)) ? ya(Bn(m), 0, C) : m.split(v, C)) : [];
        }
        var t0 = wu(function(m, v, C) {
          return m + (C ? " " : "") + Tu(v);
        });
        function h1(m, v, C) {
          return m = xn(m), C = C == null ? 0 : ha(Ot(C), 0, m.length), v = Li(v), m.slice(C, C + v.length) == v;
        }
        function n0(m, v, C) {
          var D = te.templateSettings;
          C && vi(m, v, C) && (v = n), m = xn(m), v = Lc({}, v, D, ig);
          var H = Lc({}, v.imports, D.imports, ig), se = Ur(H), ve = kf(H, se), Ce, Ne, Ke = 0, Ye = v.interpolate || cn, Xe = "__p += '", pt = ke(
            (v.escape || cn).source + "|" + Ye.source + "|" + (Ye === Xl ? qr : cn).source + "|" + (v.evaluate || cn).source + "|$",
            "g"
          ), St = "//# sourceURL=" + (Ue.call(v, "sourceURL") ? (v.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++Xu + "]") + `
`;
          m.replace(pt, function(zt, on, dn, _a, ys, Sa) {
            return dn || (dn = _a), Xe += m.slice(Ke, Sa).replace(di, ac), on && (Ce = !0, Xe += `' +
__e(` + on + `) +
'`), ys && (Ne = !0, Xe += `';
` + ys + `;
__p += '`), dn && (Xe += `' +
((__t = (` + dn + `)) == null ? '' : __t) +
'`), Ke = Sa + zt.length, zt;
          }), Xe += `';
`;
          var Dt = Ue.call(v, "variable") && v.variable;
          if (!Dt)
            Xe = `with (obj) {
` + Xe + `
}
`;
          else if (Cn.test(Dt))
            throw new he(u);
          Xe = (Ne ? Xe.replace(mr, "") : Xe).replace(Yo, "$1").replace(lt, "$1;"), Xe = "function(" + (Dt || "obj") + `) {
` + (Dt ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (Ce ? ", __e = _.escape" : "") + (Ne ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + Xe + `return __p
}`;
          var Xt = r0(function() {
            return Se(se, St + "return " + Xe).apply(n, ve);
          });
          if (Xt.source = Xe, up(Xt))
            throw Xt;
          return Xt;
        }
        function jl(m) {
          return xn(m).toLowerCase();
        }
        function Nl(m) {
          return xn(m).toUpperCase();
        }
        function Rl(m, v, C) {
          if (m = xn(m), m && (C || v === n))
            return La(m);
          if (!m || !(v = Li(v)))
            return m;
          var D = Bn(m), H = Bn(v), se = uu(D, H), ve = sc(D, H) + 1;
          return ya(D, se, ve).join("");
        }
        function Ed(m, v, C) {
          if (m = xn(m), m && (C || v === n))
            return m.slice(0, w(m) + 1);
          if (!m || !(v = Li(v)))
            return m;
          var D = Bn(m), H = sc(D, Bn(v)) + 1;
          return ya(D, 0, H).join("");
        }
        function kd(m, v, C) {
          if (m = xn(m), m && (C || v === n))
            return m.replace(Fn, "");
          if (!m || !(v = Li(v)))
            return m;
          var D = Bn(m), H = uu(D, Bn(v));
          return ya(D, H).join("");
        }
        function Ml(m, v) {
          var C = W, D = F;
          if (Xn(v)) {
            var H = "separator" in v ? v.separator : H;
            C = "length" in v ? Ot(v.length) : C, D = "omission" in v ? Li(v.omission) : D;
          }
          m = xn(m);
          var se = m.length;
          if (Jr(m)) {
            var ve = Bn(m);
            se = ve.length;
          }
          if (C >= se)
            return m;
          var Ce = C - Ci(D);
          if (Ce < 1)
            return D;
          var Ne = ve ? ya(ve, 0, Ce).join("") : m.slice(0, Ce);
          if (H === n)
            return Ne + D;
          if (ve && (Ce += Ne.length - Ce), bd(H)) {
            if (m.slice(Ce).search(H)) {
              var Ke, Ye = Ne;
              for (H.global || (H = ke(H.source, xn(Cs.exec(H)) + "g")), H.lastIndex = 0; Ke = H.exec(Ye); )
                var Xe = Ke.index;
              Ne = Ne.slice(0, Xe === n ? Ce : Xe);
            }
          } else if (m.indexOf(Li(H), Ce) != Ce) {
            var pt = Ne.lastIndexOf(H);
            pt > -1 && (Ne = Ne.slice(0, pt));
          }
          return Ne + D;
        }
        function N2(m) {
          return m = xn(m), m && Qi.test(m) ? m.replace(ia, A) : m;
        }
        var p1 = wu(function(m, v, C) {
          return m + (C ? " " : "") + v.toUpperCase();
        }), Tu = tg("toUpperCase");
        function m1(m, v, C) {
          return m = xn(m), v = C ? n : v, v === n ? Hn(m) ? $(m) : Cf(m) : m.match(v) || [];
        }
        var r0 = Ht(function(m, v) {
          try {
            return kr(m, n, v);
          } catch (C) {
            return up(C) ? C : new he(C);
          }
        }), wp = Ua(function(m, v) {
          return Qr(v, function(C) {
            C = Bi(C), as(m, C, sp(m[C], m));
          }), m;
        });
        function g1(m) {
          var v = m == null ? 0 : m.length, C = Tt();
          return m = v ? Mn(m, function(D) {
            if (typeof D[1] != "function")
              throw new je(o);
            return [C(D[0]), D[1]];
          }) : [], Ht(function(D) {
            for (var H = -1; ++H < v; ) {
              var se = m[H];
              if (kr(se[0], this, D))
                return kr(se[1], this, D);
            }
          });
        }
        function R2(m) {
          return Uy(Ei(m, g));
        }
        function Hc(m) {
          return function() {
            return m;
          };
        }
        function _p(m, v) {
          return m == null || m !== m ? v : m;
        }
        var y1 = Tc(), Gc = Tc(!0);
        function Ai(m) {
          return m;
        }
        function Td(m) {
          return wc(typeof m == "function" ? m : Ei(m, g));
        }
        function Sp(m) {
          return Mh(Ei(m, g));
        }
        function v1(m, v) {
          return Im(m, Ei(v, g));
        }
        var M2 = Ht(function(m, v) {
          return function(C) {
            return Us(C, m, v);
          };
        }), Cp = Ht(function(m, v) {
          return function(C) {
            return Us(m, C, v);
          };
        });
        function s(m, v, C) {
          var D = Ur(v), H = Co(v, D);
          C == null && !(Xn(v) && (H.length || !D.length)) && (C = v, v = m, m = this, H = Co(v, Ur(v)));
          var se = !(Xn(C) && "chain" in C) || !!C.chain, ve = ms(m);
          return Qr(H, function(Ce) {
            var Ne = v[Ce];
            m[Ce] = Ne, ve && (m.prototype[Ce] = function() {
              var Ke = this.__chain__;
              if (se || Ke) {
                var Ye = m(this.__wrapped__), Xe = Ye.__actions__ = ki(this.__actions__);
                return Xe.push({ func: Ne, args: arguments, thisArg: m }), Ye.__chain__ = Ke, Ye;
              }
              return Ne.apply(m, ns([this.value()], arguments));
            });
          }), m;
        }
        function l() {
          return nr._ === this && (nr._ = Et), this;
        }
        function d() {
        }
        function y(m) {
          return m = Ot(m), Ht(function(v) {
            return Oh(v, m);
          });
        }
        var S = qh(Mn), j = qh(ec), L = qh(el);
        function ee(m) {
          return ed(m) ? Os(Bi(m)) : wr(m);
        }
        function xe(m) {
          return function(v) {
            return m == null ? n : Fa(m, v);
          };
        }
        var De = $h(), Fe = $h(!0);
        function Ge() {
          return [];
        }
        function Pe() {
          return !1;
        }
        function Be() {
          return {};
        }
        function wt() {
          return "";
        }
        function Nt() {
          return !0;
        }
        function Tn(m, v) {
          if (m = Ot(m), m < 1 || m > fe)
            return [];
          var C = re, D = Tr(m, re);
          v = Tt(v), m -= re;
          for (var H = lu(D, v); ++C < m; )
            v(C);
          return H;
        }
        function Ae(m) {
          return Bt(m) ? Mn(m, Bi) : Hi(m) ? [m] : ki(pg(xn(m)));
        }
        function Ee(m) {
          var v = ++it;
          return xn(m) + v;
        }
        var Oe = Gf(function(m, v) {
          return m + v;
        }, 0), He = Yf("ceil"), kt = Gf(function(m, v) {
          return m / v;
        }, 1), pn = Yf("floor");
        function _t(m) {
          return m && m.length ? pa(m, Ai, Pf) : n;
        }
        function Kt(m, v) {
          return m && m.length ? pa(m, Tt(v, 2), Pf) : n;
        }
        function nn(m) {
          return tl(m, Ai);
        }
        function mn(m, v) {
          return tl(m, Tt(v, 2));
        }
        function Ol(m) {
          return m && m.length ? pa(m, Ai, Zn) : n;
        }
        function O2(m, v) {
          return m && m.length ? pa(m, Tt(v, 2), Zn) : n;
        }
        var a$ = Gf(function(m, v) {
          return m * v;
        }, 1), o$ = Yf("round"), l$ = Gf(function(m, v) {
          return m - v;
        }, 0);
        function u$(m) {
          return m && m.length ? ic(m, Ai) : 0;
        }
        function c$(m, v) {
          return m && m.length ? ic(m, Tt(v, 2)) : 0;
        }
        return te.after = Dv, te.ary = Rg, te.assign = Yv, te.assignIn = dp, te.assignInWith = Lc, te.assignWith = y2, te.at = Hs, te.before = Mg, te.bind = sp, te.bindAll = wp, te.bindKey = Og, te.castArray = f2, te.chain = cd, te.chunk = fv, te.compact = mg, te.concat = gg, te.cond = g1, te.conforms = R2, te.constant = Hc, te.countBy = Cv, te.create = Yg, te.curry = pd, te.curryRight = Dg, te.debounce = zg, te.defaults = Wv, te.defaultsDeep = Zv, te.defer = Sn, te.delay = Pg, te.difference = Qh, te.differenceBy = dv, te.differenceWith = Ao, te.drop = Nr, te.dropRight = yg, te.dropRightWhile = hv, te.dropWhile = Fr, te.fill = t2, te.filter = Ag, te.flatMap = Ui, te.flatMapDeep = kv, te.flatMapDepth = Tv, te.flatten = Kn, te.flattenDeep = qi, te.flattenDepth = jo, te.flip = l2, te.flow = y1, te.flowRight = Gc, te.fromPairs = pv, te.functions = v2, te.functionsIn = x2, te.groupBy = np, te.initial = n2, te.intersection = Jh, te.intersectionBy = $i, te.intersectionWith = xa, te.invert = b2, te.invertBy = w2, te.invokeMap = zc, te.iteratee = Td, te.keyBy = jv, te.keys = Ur, te.keysIn = Gi, te.map = dd, te.mapKeys = S2, te.mapValues = e1, te.matches = Sp, te.matchesProperty = v1, te.memoize = md, te.merge = Bc, te.mergeWith = qc, te.method = M2, te.methodOf = Cp, te.mixin = s, te.negate = ap, te.nthArg = y, te.omit = t1, te.omitBy = C2, te.once = u2, te.orderBy = Nv, te.over = S, te.overArgs = c2, te.overEvery = j, te.overSome = L, te.partial = Ic, te.partialRight = Eu, te.partition = Rv, te.pick = $c, te.pickBy = Fc, te.property = ee, te.propertyOf = xe, te.pull = _u, te.pullAll = Ha, te.pullAllBy = wg, te.pullAllWith = _g, te.pullAt = ba, te.range = De, te.rangeRight = Fe, te.rearg = Ig, te.reject = s2, te.remove = vv, te.rest = op, te.reverse = bl, te.sampleSize = o2, te.set = pp, te.setWith = Zg, te.shuffle = Mv, te.slice = ad, te.sortBy = ip, te.sortedUniq = ep, te.sortedUniqBy = _v, te.split = bp, te.spread = Lg, te.tail = r2, te.take = i2, te.takeRight = yn, te.takeRightWhile = zn, te.takeWhile = Qt, te.tap = Sv, te.throttle = El, te.thru = Cu, te.toArray = Kv, te.toPairs = mp, te.toPairsIn = Cd, te.toPath = Ae, te.toPlainObject = fp, te.transform = r1, te.unary = Ga, te.union = tn, te.unionBy = _n, te.unionWith = fs, te.uniq = wl, te.uniqBy = Mc, te.uniqWith = Sg, te.unset = i1, te.unzip = wa, te.unzipWith = ir, te.update = E2, te.updateWith = s1, te.values = Uc, te.valuesIn = Xg, te.without = _l, te.words = m1, te.wrap = gd, te.xor = Su, te.xorBy = Cg, te.xorWith = ds, te.zip = Oc, te.zipObject = ud, te.zipObjectDeep = Fi, te.zipWith = Eg, te.entries = mp, te.entriesIn = Cd, te.extend = dp, te.extendWith = Lc, s(te, te), te.add = Oe, te.attempt = r0, te.camelCase = vp, te.capitalize = a1, te.ceil = He, te.clamp = k2, te.clone = zv, te.cloneDeep = Iv, te.cloneDeepWith = Lv, te.cloneWith = Pv, te.conformsTo = d2, te.deburr = Vc, te.defaultTo = _p, te.divide = kt, te.endsWith = T2, te.eq = ps, te.escape = o1, te.escapeRegExp = l1, te.every = fd, te.find = hs, te.findIndex = vg, te.findKey = Xv, te.findLast = Ev, te.findLastIndex = xg, te.findLastKey = Sd, te.floor = pn, te.forEach = Av, te.forEachRight = Mo, te.forIn = Gs, te.forInRight = Qv, te.forOwn = hp, te.forOwnRight = Do, te.get = Al, te.gt = Bv, te.gte = qv, te.has = Jv, te.hasIn = Wg, te.head = bg, te.identity = Ai, te.includes = jg, te.indexOf = mv, te.inRange = gp, te.invoke = _2, te.isArguments = ku, te.isArray = Bt, te.isArrayBuffer = Bg, te.isArrayLike = Vi, te.isArrayLikeObject = _r, te.isBoolean = yd, te.isBuffer = kl, te.isDate = $v, te.isElement = Jt, te.isEmpty = qg, te.isEqual = lp, te.isEqualWith = $g, te.isError = up, te.isFinite = Fg, te.isFunction = ms, te.isInteger = vd, te.isLength = cp, te.isMap = Fv, te.isMatch = Uv, te.isMatchWith = Vv, te.isNaN = kn, te.isNative = Ug, te.isNil = h2, te.isNull = ai, te.isNumber = Vg, te.isObject = Xn, te.isObjectLike = ur, te.isPlainObject = xd, te.isRegExp = bd, te.isSafeInteger = Hg, te.isSet = wd, te.isString = _d, te.isSymbol = Hi, te.isTypedArray = Tl, te.isUndefined = Gg, te.isWeakMap = p2, te.isWeakSet = Hv, te.join = gv, te.kebabCase = u1, te.last = Yn, te.lastIndexOf = yv, te.lowerCase = c1, te.lowerFirst = Qg, te.lt = m2, te.lte = Gv, te.max = _t, te.maxBy = Kt, te.mean = nn, te.meanBy = mn, te.min = Ol, te.minBy = O2, te.stubArray = Ge, te.stubFalse = Pe, te.stubObject = Be, te.stubString = wt, te.stubTrue = Nt, te.multiply = a$, te.nth = No, te.noConflict = l, te.noop = d, te.now = hd, te.pad = f1, te.padEnd = d1, te.padStart = xp, te.parseInt = A2, te.random = yp, te.reduce = rp, te.reduceRight = Ng, te.repeat = j2, te.replace = Jg, te.result = n1, te.round = o$, te.runInContext = U, te.sample = a2, te.size = Ov, te.snakeCase = e0, te.some = Pc, te.sortedIndex = od, te.sortedIndexBy = Rc, te.sortedIndexOf = xv, te.sortedLastIndex = bv, te.sortedLastIndexBy = ld, te.sortedLastIndexOf = wv, te.startCase = t0, te.startsWith = h1, te.subtract = l$, te.sum = u$, te.sumBy = c$, te.template = n0, te.times = Tn, te.toFinite = Oo, te.toInteger = Ot, te.toLength = Kg, te.toLower = jl, te.toNumber = gs, te.toSafeInteger = g2, te.toString = xn, te.toUpper = Nl, te.trim = Rl, te.trimEnd = Ed, te.trimStart = kd, te.truncate = Ml, te.unescape = N2, te.uniqueId = Ee, te.upperCase = p1, te.upperFirst = Tu, te.each = Av, te.eachRight = Mo, te.first = bg, s(te, (function() {
          var m = {};
          return ma(te, function(v, C) {
            Ue.call(te.prototype, C) || (m[C] = v);
          }), m;
        })(), { chain: !1 }), te.VERSION = r, Qr(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(m) {
          te[m].placeholder = te;
        }), Qr(["drop", "take"], function(m, v) {
          Ut.prototype[m] = function(C) {
            C = C === n ? 1 : ar(Ot(C), 0);
            var D = this.__filtered__ && !v ? new Ut(this) : this.clone();
            return D.__filtered__ ? D.__takeCount__ = Tr(C, D.__takeCount__) : D.__views__.push({
              size: Tr(C, re),
              type: m + (D.__dir__ < 0 ? "Right" : "")
            }), D;
          }, Ut.prototype[m + "Right"] = function(C) {
            return this.reverse()[m](C).reverse();
          };
        }), Qr(["filter", "map", "takeWhile"], function(m, v) {
          var C = v + 1, D = C == J || C == Q;
          Ut.prototype[m] = function(H) {
            var se = this.clone();
            return se.__iteratees__.push({
              iteratee: Tt(H, 3),
              type: C
            }), se.__filtered__ = se.__filtered__ || D, se;
          };
        }), Qr(["head", "last"], function(m, v) {
          var C = "take" + (v ? "Right" : "");
          Ut.prototype[m] = function() {
            return this[C](1).value()[0];
          };
        }), Qr(["initial", "tail"], function(m, v) {
          var C = "drop" + (v ? "" : "Right");
          Ut.prototype[m] = function() {
            return this.__filtered__ ? new Ut(this) : this[C](1);
          };
        }), Ut.prototype.compact = function() {
          return this.filter(Ai);
        }, Ut.prototype.find = function(m) {
          return this.filter(m).head();
        }, Ut.prototype.findLast = function(m) {
          return this.reverse().find(m);
        }, Ut.prototype.invokeMap = Ht(function(m, v) {
          return typeof m == "function" ? new Ut(this) : this.map(function(C) {
            return Us(C, m, v);
          });
        }), Ut.prototype.reject = function(m) {
          return this.filter(ap(Tt(m)));
        }, Ut.prototype.slice = function(m, v) {
          m = Ot(m);
          var C = this;
          return C.__filtered__ && (m > 0 || v < 0) ? new Ut(C) : (m < 0 ? C = C.takeRight(-m) : m && (C = C.drop(m)), v !== n && (v = Ot(v), C = v < 0 ? C.dropRight(-v) : C.take(v - m)), C);
        }, Ut.prototype.takeRightWhile = function(m) {
          return this.reverse().takeWhile(m).reverse();
        }, Ut.prototype.toArray = function() {
          return this.take(re);
        }, ma(Ut.prototype, function(m, v) {
          var C = /^(?:filter|find|map|reject)|While$/.test(v), D = /^(?:head|last)$/.test(v), H = te[D ? "take" + (v == "last" ? "Right" : "") : v], se = D || /^find/.test(v);
          H && (te.prototype[v] = function() {
            var ve = this.__wrapped__, Ce = D ? [1] : arguments, Ne = ve instanceof Ut, Ke = Ce[0], Ye = Ne || Bt(ve), Xe = function(on) {
              var dn = H.apply(te, ns([on], Ce));
              return D && pt ? dn[0] : dn;
            };
            Ye && C && typeof Ke == "function" && Ke.length != 1 && (Ne = Ye = !1);
            var pt = this.__chain__, St = !!this.__actions__.length, Dt = se && !pt, Xt = Ne && !St;
            if (!se && Ye) {
              ve = Xt ? ve : new Ut(this);
              var zt = m.apply(ve, Ce);
              return zt.__actions__.push({ func: Cu, args: [Xe], thisArg: n }), new Pi(zt, pt);
            }
            return Dt && Xt ? m.apply(this, Ce) : (zt = this.thru(Xe), Dt ? D ? zt.value()[0] : zt.value() : zt);
          });
        }), Qr(["pop", "push", "shift", "sort", "splice", "unshift"], function(m) {
          var v = ze[m], C = /^(?:push|sort|unshift)$/.test(m) ? "tap" : "thru", D = /^(?:pop|shift)$/.test(m);
          te.prototype[m] = function() {
            var H = arguments;
            if (D && !this.__chain__) {
              var se = this.value();
              return v.apply(Bt(se) ? se : [], H);
            }
            return this[C](function(ve) {
              return v.apply(Bt(ve) ? ve : [], H);
            });
          };
        }), ma(Ut.prototype, function(m, v) {
          var C = te[v];
          if (C) {
            var D = C.name + "";
            Ue.call(vn, D) || (vn[D] = []), vn[D].push({ name: v, func: C });
          }
        }), vn[Ac(n, T).name] = [{
          name: "wrapper",
          func: n
        }], Ut.prototype.clone = wo, Ut.prototype.reverse = dl, Ut.prototype.value = _o, te.prototype.at = tp, te.prototype.chain = Sl, te.prototype.commit = zr, te.prototype.next = Cl, te.prototype.plant = Ro, te.prototype.reverse = kg, te.prototype.toJSON = te.prototype.valueOf = te.prototype.value = Tg, te.prototype.first = te.prototype.head, ni && (te.prototype[ni] = Dc), te;
      }), ue = Z();
      ts ? ((ts.exports = ue)._ = ue, ru._ = ue) : nr._ = ue;
    }).call(qV);
  })(x0, x0.exports)), x0.exports;
}
var FV = /* @__PURE__ */ $V();
const Ca = qe.DATA_SYNC, UV = 3e3, K2 = "webllm", Y2 = [0], w1 = "__engram_sync__", Pd = class Pd {
  constructor() {
    yt(this, "debouncedUploads", /* @__PURE__ */ new Map());
    yt(this, "deviceId");
    this.deviceId = Math.random().toString(36).substring(2, 15), pe.info(Ca, `Initialized with Device ID: ${this.deviceId}`);
  }
  static getInstance() {
    return Pd.instance || (Pd.instance = new Pd()), Pd.instance;
  }
  /**
   *  Collection ID
   * : engram_sync_{chatId}
   */
  getCollectionId(t) {
    return `engram_sync_${t}`;
  }
  /**
   * 
   */
  scheduleUpload(t) {
    const n = tt.getSettings().syncConfig;
    if (!(n != null && n.enabled) || !(n != null && n.autoSync))
      return;
    if (!this.debouncedUploads.has(t)) {
      const i = FV.debounce(() => {
        const a = tt.getSettings().syncConfig;
        !(a != null && a.enabled) || !(a != null && a.autoSync) || this.upload(t).catch((o) => {
          pe.error(Ca, `Auto-upload failed for ${t}`, o);
        });
      }, UV);
      this.debouncedUploads.set(t, i);
    }
    const r = this.debouncedUploads.get(t);
    r && r();
  }
  /**
   *  Vector Store
   * :  embeddings key text 
   */
  async upload(t) {
    try {
      pe.info(Ca, `Starting upload for ${t}...`);
      const n = await Fl(t), r = await ID(n), i = Date.now();
      pe.debug(Ca, `: ${r.events.length} , ${r.entities.length} `);
      const a = JSON.stringify({
        ...r,
        meta: { ...r.meta, syncTimestamp: i, deviceId: this.deviceId }
      }), o = {
        collectionId: this.getCollectionId(t),
        source: K2,
        model: "engram_store",
        items: [{
          hash: 0,
          index: 0,
          text: a
          // 
        }],
        embeddings: {
          //  key text
          // webllm  embeddings  key items.text 
          [a]: Y2
          //  textContent  key
        }
      };
      await this.purge(t);
      const u = await fetch("/api/vector/insert", {
        method: "POST",
        headers: v0(),
        body: JSON.stringify(o)
      });
      if (!u.ok) {
        const c = await u.text();
        throw new Error(`Upload failed: ${u.statusText} - ${c}`);
      }
      return pe.success(Ca, `: ${t}`), !0;
    } catch (n) {
      return pe.error(Ca, `Upload error for ${t}`, n), !1;
    }
  }
  /**
   * 
   */
  async purge(t) {
    try {
      await fetch("/api/vector/purge", {
        method: "POST",
        headers: v0(),
        body: JSON.stringify({
          collectionId: this.getCollectionId(t)
        })
      });
    } catch {
    }
  }
  /**
   * 
   */
  async getRemoteStatus(t) {
    var n, r;
    try {
      const i = await fetch("/api/vector/query", {
        method: "POST",
        headers: v0(),
        body: JSON.stringify({
          collectionId: this.getCollectionId(t),
          searchText: w1,
          source: K2,
          model: "engram_store",
          topK: 1,
          embeddings: {
            [w1]: Y2
          }
        })
      });
      if (!i.ok) return { exists: !1, timestamp: 0 };
      const a = await i.json();
      if (!a.metadata || a.metadata.length === 0)
        return { exists: !1, timestamp: 0 };
      const o = JSON.parse(a.metadata[0].text);
      return {
        exists: !0,
        timestamp: ((n = o.meta) == null ? void 0 : n.syncTimestamp) || 0,
        deviceId: (r = o.meta) == null ? void 0 : r.deviceId
      };
    } catch (i) {
      return pe.warn(Ca, `Check status failed for ${t}`, i), { exists: !1, timestamp: 0 };
    }
  }
  /**
   * 
   */
  async download(t) {
    var n, r;
    try {
      pe.info(Ca, `Downloading for ${t}...`);
      const i = await fetch("/api/vector/query", {
        method: "POST",
        headers: v0(),
        body: JSON.stringify({
          collectionId: this.getCollectionId(t),
          searchText: w1,
          source: K2,
          model: "engram_store",
          topK: 1,
          embeddings: {
            [w1]: Y2
          }
        })
      });
      if (!i.ok) throw new Error("Download request failed");
      const a = await i.json();
      if (!a.metadata || a.metadata.length === 0)
        return pe.warn(Ca, `No remote data found for ${t}`), "no_data";
      const o = JSON.parse(a.metadata[0].text);
      pe.debug(Ca, `: ${(n = o.events) == null ? void 0 : n.length} , ${(r = o.entities) == null ? void 0 : r.length} `);
      const u = await Fl(t);
      await LD(u, o);
      const c = await u.events.count(), f = await u.entities.count();
      return pe.debug(Ca, `: ${c} , ${f} `), "success";
    } catch (i) {
      return pe.error(Ca, `Download failed for ${t}`, i), "error";
    }
  }
  /**
   * 
   * @returns 'downloaded' | 'uploaded' | 'synced' | 'error' | 'ignored'
   */
  async autoSync(t) {
    const n = await this.getRemoteStatus(t);
    if (!n.exists)
      return "ignored";
    const i = await (await Fl(t)).meta.toArray(), a = i.length > 0 ? i[0] : null, o = (a == null ? void 0 : a.syncTimestamp) || 0;
    return n.deviceId === this.deviceId ? "synced" : n.timestamp > o ? (pe.info(Ca, `Remote is newer (${n.timestamp} > ${o}), downloading...`), await this.download(t) === "success" ? "downloaded" : "error") : "synced";
  }
};
yt(Pd, "instance");
let yx = Pd;
const Rd = yx.getInstance(), VV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  SyncService: yx,
  syncService: Rd
}, Symbol.toStringTag, { value: "Module" }));
class PD extends gx {
  constructor(n) {
    super(`Engram_${n}`);
    yt(this, "events");
    yt(this, "entities");
    yt(this, "meta");
    yt(this, "chatId");
    this.chatId = n, this.version(2).stores({
      // Events: 
      events: "id, timestamp, significance_score, level",
      // Entities:  (V0.9.4:  aliases )
      entities: "id, type, name, *aliases",
      // Meta:  (lastSummarizedFloor )
      meta: "key"
    }), this.events.hook("creating", () => {
      Rd.scheduleUpload(this.chatId);
    }), this.events.hook("updating", () => {
      Rd.scheduleUpload(this.chatId);
    }), this.events.hook("deleting", () => {
      Rd.scheduleUpload(this.chatId);
    }), this.entities.hook("creating", () => {
      Rd.scheduleUpload(this.chatId);
    }), this.entities.hook("updating", () => {
      Rd.scheduleUpload(this.chatId);
    }), this.entities.hook("deleting", () => {
      Rd.scheduleUpload(this.chatId);
    });
  }
}
async function ID(e) {
  const t = await e.events.toArray(), n = await e.entities.toArray(), i = (await e.meta.toArray()).reduce((a, o) => ({ ...a, [o.key]: o.value }), {});
  return { events: t, entities: n, meta: i };
}
async function LD(e, t) {
  await e.transaction("rw", e.events, e.entities, e.meta, async () => {
    await e.events.clear(), await e.entities.clear(), await e.meta.clear(), await e.events.bulkAdd(t.events), await e.entities.bulkAdd(t.entities);
    const n = Object.entries(t.meta || {}).map(([r, i]) => ({ key: r, value: i }));
    await e.meta.bulkAdd(n);
  });
}
const Ud = /* @__PURE__ */ new Map();
function Fl(e) {
  if (!e)
    throw new Error("[Engram DB] chatId is required");
  return Ud.has(e) || (console.debug(`[Engram DB] Creating database for chat: ${e}`), Ud.set(e, new PD(e))), Ud.get(e);
}
function BD(e) {
  const t = Ud.get(e);
  t && (t.close(), Ud.delete(e), console.debug(`[Engram DB] Closed database for chat: ${e}`));
}
function HV(e) {
  return Ud.has(e);
}
function tf(e) {
  return Ud.get(e) || null;
}
async function qD(e) {
  BD(e), await gx.delete(`Engram_${e}`), console.info(`[Engram DB] Deleted database for chat: ${e}`);
}
const GV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ChatDatabase: PD,
  closeDb: BD,
  deleteDatabase: qD,
  exportChatData: ID,
  getDbForChat: Fl,
  hasDbForChat: HV,
  importChatData: LD,
  tryGetDbForChat: tf
}, Symbol.toStringTag, { value: "Module" }));
class KV {
  async search(t) {
    const n = t.toLowerCase().trim();
    if (!n || n.length < 2) return [];
    const r = fi();
    if (!r) return [];
    const i = tf(r);
    if (!i) return [];
    try {
      return (await i.events.filter((o) => o.summary.toLowerCase().includes(n)).reverse().limit(5).toArray()).map((o) => ({
        id: `memory-${o.id}`,
        type: "memory",
        title: o.summary.slice(0, 50) + (o.summary.length > 50 ? "..." : ""),
        description: new Date(o.timestamp).toLocaleString(),
        icon: sh,
        action: (u) => u("/memory"),
        // TODO: Nav to specific item?
        score: 5
        // Lower score than exact commands
      }));
    } catch (a) {
      return console.error("Memory search failed", a), [];
    }
  }
}
class YV {
  async search(t) {
    const n = t.toLowerCase().trim();
    if (!n) return [];
    const r = [];
    return (tt.get("promptTemplates") || []).forEach((a) => {
      a.name.toLowerCase().includes(n) && r.push({
        id: `template-${a.id}`,
        type: "setting",
        // or 'template'
        title: `: ${a.name}`,
        description: `Prompt Template (${a.category})`,
        icon: sh,
        action: (o) => o("presets:prompt"),
        // Ideally navigates to specific template
        score: 7
      });
    }), r;
  }
}
window.__ENGRAM_SEARCH_INIT__ || (Qc.registerAdapter(new G5()), Qc.registerAdapter(new zV()), Qc.registerAdapter(new PV()), Qc.registerAdapter(new KV()), Qc.registerAdapter(new YV()), window.__ENGRAM_SEARCH_INIT__ = !0);
const WV = ({ onNavigate: e }) => {
  const [t, n] = B.useState(""), [r, i] = B.useState(!1), [a, o] = B.useState(0), [u, c] = B.useState([]), f = B.useRef(null);
  B.useEffect(() => {
    (async () => {
      if (!t.trim()) {
        const E = await new G5().search("");
        c(E);
        return;
      }
      const _ = await Qc.search(t);
      c(_), o(0);
    })();
  }, [t, r]), B.useEffect(() => {
    const b = (_) => {
      (_.metaKey || _.ctrlKey) && _.key === "k" && (_.preventDefault(), i(!0));
    };
    return window.addEventListener("keydown", b), () => window.removeEventListener("keydown", b);
  }, []), B.useEffect(() => {
    r && setTimeout(() => {
      var b;
      return (b = f.current) == null ? void 0 : b.focus();
    }, 50);
  }, [r]), B.useEffect(() => {
    Promise.resolve().then(() => jP).then(({ setCommandPaletteCallback: b }) => {
      b(() => i(!0));
    }).catch(() => {
    });
  }, []);
  const p = (b) => {
    const _ = u.length + (t ? 1 : 0);
    switch (b.key) {
      case "ArrowDown":
        b.preventDefault(), o((E) => (E + 1) % _);
        break;
      case "ArrowUp":
        b.preventDefault(), o((E) => (E - 1 + _) % _);
        break;
      case "Enter":
        b.preventDefault(), g();
        break;
      case "Escape":
        i(!1);
        break;
    }
  }, g = () => {
    u.length > 0 && a < u.length ? u[a].action(e) : t && (console.log("Searching memory for:", t), e("/memory")), i(!1), n("");
  }, x = /* @__PURE__ */ h.jsx(
    "div",
    {
      className: "fixed inset-0 flex items-start justify-center pt-[15vh] px-4 animate-in fade-in duration-200",
      style: {
        height: "100dvh",
        width: "100vw",
        backgroundColor: "rgba(0,0,0,0.4)",
        // Slightly more transparent to not feel too heavy
        backdropFilter: "var(--glass-backdrop-filter, blur(4px))",
        zIndex: 2147483647
        // Max safe integer to ensure it's on top of SillyTavern UI
      },
      onClick: (b) => {
        b.target === b.currentTarget && i(!1);
      },
      children: /* @__PURE__ */ h.jsxs(
        "div",
        {
          className: "w-full max-w-xl border border-border rounded-xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 slide-in-from-top-4 duration-200",
          style: {
            backgroundColor: "var(--popover)",
            color: "var(--popover-foreground)",
            backdropFilter: "var(--glass-backdrop-filter)",
            maxHeight: "70vh"
          },
          children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 px-4 py-3 border-b border-border/50", children: [
              /* @__PURE__ */ h.jsx(ta, { size: 20, className: "text-muted-foreground shrink-0" }),
              /* @__PURE__ */ h.jsx(
                "input",
                {
                  ref: f,
                  type: "text",
                  className: "flex-1 bg-transparent border-none outline-none text-lg text-foreground placeholder:text-muted-foreground/50",
                  placeholder: "...",
                  value: t,
                  onChange: (b) => n(b.target.value),
                  onKeyDown: p
                }
              ),
              /* @__PURE__ */ h.jsx("div", { className: "text-[10px] text-muted-foreground border border-border px-1.5 py-0.5 rounded bg-muted/50 hidden sm:block", children: "ESC" })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "overflow-y-auto p-2 scroll-smooth", children: [
              u.length > 0 && /* @__PURE__ */ h.jsx("div", { className: "space-y-1", children: u.map((b, _) => /* @__PURE__ */ h.jsxs(
                "div",
                {
                  className: `flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-[var(--duration-fast)] ${_ === a ? "bg-primary/10 text-primary" : "text-foreground hover:bg-muted/50"}`,
                  onClick: () => {
                    b.action(e), i(!1), n("");
                  },
                  onMouseEnter: () => o(_),
                  children: [
                    /* @__PURE__ */ h.jsx("div", { className: `
                                        w-8 h-8 rounded-md flex items-center justify-center shrink-0
                                        ${_ === a ? "bg-primary/20" : "bg-muted/50 text-muted-foreground"}
                                    `, children: b.icon ? /* @__PURE__ */ h.jsx(b.icon, { size: 16 }) : /* @__PURE__ */ h.jsx(ZT, { size: 16 }) }),
                    /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
                      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
                        /* @__PURE__ */ h.jsx("span", { className: "text-sm font-medium", children: b.title }),
                        b.type !== "command" && /* @__PURE__ */ h.jsx("span", { className: "text-[10px] px-1.5 py-0.5 rounded-full bg-muted text-muted-foreground uppercase", children: b.type })
                      ] }),
                      b.description && /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground/80 truncate", children: b.description })
                    ] }),
                    _ === a && /* @__PURE__ */ h.jsx(XT, { size: 16, className: "text-muted-foreground/50" })
                  ]
                },
                b.id
              )) }),
              t && /* @__PURE__ */ h.jsxs(
                "div",
                {
                  className: `
                            mt-2 pt-2 border-t border-border/50
                            flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors
                            ${a === u.length ? "bg-primary/10 text-primary" : "text-foreground hover:bg-muted/50"}
                        `,
                  onClick: () => g(),
                  onMouseEnter: () => o(u.length),
                  children: [
                    /* @__PURE__ */ h.jsx("div", { className: `w-8 h-8 rounded-md flex items-center justify-center shrink-0 ${a === u.length ? "bg-primary/20" : "bg-muted/50 text-muted-foreground"}`, children: /* @__PURE__ */ h.jsx(ta, { size: 16 }) }),
                    /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
                      /* @__PURE__ */ h.jsxs("div", { className: "text-sm font-medium", children: [
                        ': "',
                        /* @__PURE__ */ h.jsx("span", { className: "text-primary", children: t }),
                        '"'
                      ] }),
                      /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground/80", children: "..." })
                    ] }),
                    a === u.length && /* @__PURE__ */ h.jsx(XT, { size: 16, className: "text-muted-foreground/50" })
                  ]
                }
              ),
              u.length === 0 && !t && /* @__PURE__ */ h.jsxs("div", { className: "px-4 py-8 text-center text-muted-foreground text-sm", children: [
                /* @__PURE__ */ h.jsx(ZT, { size: 32, className: "mx-auto mb-2 opacity-20" }),
                /* @__PURE__ */ h.jsx("p", { children: " (Cmd+K)" })
              ] })
            ] })
          ]
        }
      )
    }
  );
  return /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
    /* @__PURE__ */ h.jsx(
      "button",
      {
        onClick: () => i(!0),
        className: "p-2 rounded-md hover:bg-accent hover:text-accent-foreground transition-all duration-[var(--duration-fast)] text-muted-foreground hover:scale-110 active:scale-95",
        title: " (Cmd+K)",
        children: /* @__PURE__ */ h.jsx(ta, { size: 20 })
      }
    ),
    r && L5.createPortal(x, document.body)
  ] });
}, ZV = ({ className: e = "", size: t = 24 }) => /* @__PURE__ */ h.jsx(
  "svg",
  {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 400 592",
    width: t,
    height: t,
    className: e,
    "aria-label": "Engram Icon",
    children: /* @__PURE__ */ h.jsx(
      "path",
      {
        fill: "currentColor",
        d: `M103.875908,522.166260 
                C75.225380,521.276611 55.289425,503.229828 52.249313,475.852142 
                C49.879883,454.514191 63.027035,433.000366 83.930901,424.858398 
                C88.449257,423.098541 89.857674,420.860199 89.801926,416.150269 
                C89.555420,395.322357 89.621246,374.489380 89.762306,353.659515 
                C89.787170,349.987000 88.728760,348.057556 85.120293,346.642609 
                C64.672897,338.625031 52.338894,320.951630 52.085896,299.869415 
                C51.832878,278.785156 63.730618,260.903198 84.118019,252.449951 
                C88.288918,250.720566 89.867378,248.680847 89.807304,244.052597 
                C89.539139,223.391968 89.589142,202.724701 89.796356,182.062561 
                C89.836380,178.071609 88.518524,176.326385 84.841705,174.787247 
                C57.730556,163.438416 45.530682,135.966721 55.436111,109.194000 
                C62.627293,89.757439 81.922821,76.710289 103.282494,76.841476 
                C124.355003,76.970901 143.082275,89.740875 149.993118,109.121849 
                C151.315979,112.831749 153.184799,113.869263 156.863403,113.853104 
                C186.192612,113.724319 215.522736,113.698357 244.851929,113.811600 
                C248.773117,113.826736 250.677307,112.652130 252.052902,108.765602 
                C259.013885,89.098465 278.589447,76.365829 300.503601,76.811897 
                C322.171844,77.252960 341.040283,91.132324 347.255371,111.201912 
                C356.569763,141.279358 340.344788,170.373184 309.893127,176.623123 
                C283.359375,182.068970 260.376740,167.450562 251.980011,145.670181 
                C250.492157,141.810806 248.818085,140.240295 244.552948,140.266785 
                C215.390915,140.447968 186.227219,140.357330 157.064072,140.375076 
                C154.628784,140.376556 151.855545,139.805771 151.141357,143.359161 
                C150.400787,147.043839 146.628937,150.064713 151.136917,154.478546 
                C184.592346,187.235229 217.778336,220.267349 250.982285,253.280014 
                C253.021469,255.307434 254.527191,255.254166 257.033264,254.047714 
                C276.199188,244.820953 294.752930,247.045853 310.978485,259.993408 
                C328.011017,273.584869 333.936798,292.106659 327.764038,313.282837 
                C321.779785,333.812378 307.254517,345.637268 286.367889,349.037231 
                C276.405396,350.658997 266.352570,349.443024 257.275055,344.363342 
                C254.265045,342.678986 252.301132,343.049744 249.903275,345.441406 
                C230.205368,365.088531 210.395386,384.623230 190.631638,404.204376 
                C177.732651,416.984222 164.859726,429.790344 151.962982,442.572388 
                C148.257980,446.244415 148.113403,452.901764 151.629196,456.671387 
                C152.707138,457.827148 154.029282,457.681976 155.328629,457.681946 
                C185.658203,457.681458 215.987854,457.631042 246.317261,457.695557 
                C249.355972,457.702026 250.687012,456.399414 251.717636,453.698944 
                C259.314423,433.793579 278.324493,420.868317 299.341309,421.146240 
                C320.526215,421.426361 339.575745,434.206421 346.686249,452.909271 
                C354.337341,473.034058 348.794159,495.642761 332.699371,509.956390 
                C307.061371,532.757202 263.380280,521.715210 251.978027,489.436371 
                C250.838303,486.209961 249.371201,484.953583 245.964813,484.962799 
                C216.302094,485.043304 186.639008,484.985840 156.976028,484.969330 
                C154.436981,484.967896 152.081528,484.923981 150.916916,488.054077 
                C142.892441,509.621246 126.842339,520.325989 103.875908,522.166260 
                M141.430466,266.110352 
                C145.394760,270.906738 148.503693,276.196198 150.388428,282.139069 
                C151.211502,284.734314 152.692291,285.770782 155.494156,285.760895 
                C179.139755,285.677429 202.787949,285.547394 226.430206,285.843811 
                C232.373352,285.918304 231.388184,281.058533 233.335602,278.254700 
                C235.007233,275.847992 233.916855,274.189880 232.000244,272.304352 
                C199.956863,240.780380 167.866821,209.301468 136.133682,177.467056 
                C131.183243,172.500824 127.483856,170.729507 121.013550,174.621368 
                C117.660522,176.638214 116.183739,178.155136 116.217278,182.042480 
                C116.398239,203.022598 116.444160,224.006012 116.243645,244.985474 
                C116.204666,249.064667 117.676285,250.918961 121.328865,252.228989 
                C128.972488,254.970444 135.505173,259.524170 141.430466,266.110352 
                M116.349434,377.499908 
                C116.351860,390.663696 116.870338,403.855377 116.161102,416.980713 
                C115.742699,424.723846 121.926743,423.801880 125.649162,426.262665 
                C129.080231,428.530792 130.798965,425.706268 132.741440,423.784821 
                C165.551407,391.329803 198.234940,358.745361 231.274231,326.525696 
                C235.764252,322.147095 232.377243,319.155212 231.599960,315.493317 
                C230.884583,312.123138 228.193359,312.382568 225.670288,312.382812 
                C202.675171,312.384949 179.679749,312.445435 156.685303,312.323212 
                C153.331955,312.305389 151.624329,313.386505 150.456299,316.584381 
                C145.119888,331.194611 135.004120,341.287384 120.496223,346.769958 
                C117.238434,348.001068 116.190170,349.706024 116.267418,353.006317 
                C116.450615,360.833862 116.340004,368.668243 116.349434,377.499908z`
      }
    )
  }
), XV = ({
  onToggleSidebar: e,
  isMobile: t,
  // Deprecated prop, handled by CSS
  onClose: n,
  onNavigate: r
}) => /* @__PURE__ */ h.jsxs("header", { className: "h-10 flex items-center justify-between px-4 bg-transparent z-50 transition-all duration-300 w-full flex-shrink-0", children: [
  /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 w-16 md:w-64", children: [
    /* @__PURE__ */ h.jsx(
      "button",
      {
        className: "p-2 -ml-2 rounded-md hover:bg-sidebar-accent hover:text-sidebar-accent-foreground transition-colors md:hidden",
        onClick: e,
        title: "",
        children: /* @__PURE__ */ h.jsx(BF, { size: 18 })
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "hidden md:flex items-center gap-2", children: [
      /* @__PURE__ */ h.jsx(ZV, { size: 18, className: "text-primary" }),
      /* @__PURE__ */ h.jsx("span", { className: "font-semibold text-sidebar-foreground tracking-tight", children: "Engram" })
    ] })
  ] }),
  /* @__PURE__ */ h.jsx("div", { className: "flex-1" }),
  /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1 md:gap-2", children: [
    /* @__PURE__ */ h.jsx(WV, { onNavigate: r }),
    /* @__PURE__ */ h.jsx("div", { className: "h-4 w-[1px] bg-border mx-1" }),
    /* @__PURE__ */ h.jsx(
      "button",
      {
        className: "p-2 rounded-md hover:bg-destructive hover:text-destructive-foreground transition-colors text-muted-foreground",
        onClick: n,
        title: "",
        children: /* @__PURE__ */ h.jsx(gm, { size: 20 })
      }
    )
  ] })
] }), QV = ({ className: e = "", height: t = 24 }) => {
  const n = Math.round(t * 3.17);
  return /* @__PURE__ */ h.jsxs(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "235 175 555 175",
      width: n,
      height: t,
      className: e,
      "aria-label": "Engram",
      children: [
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M752.3,294.5c-0.2-11.8-0.3-23.1-0.4-34.4c0-2.7,0-5.3-0.2-8c-0.6-6.4-4.1-10.1-9.8-10.9 c-6.9-0.9-12.2,2-14.5,7.9c-1,2.5-1.2,5.2-1.2,7.9c0,11,-0.3,22,0,33c0.1,5.2-1.7,6.9-6.7,6.4c-3.3-0.3-6.7-0.3-10,0 c-4.9,0.5-5.9-1.9-5.8-6.2c0.2-11.8,0.2-23.7,0-35.5c-0.2-9.4-5.4-14.3-14.1-13.5c-6.4,0.6-11.1,5.7-11.3,13 c-0.3,11.7-0.2,23.3-0.3,35c0,7.1,0,7.1-7.3,7.1c-3.3,0-6.7-0.1-10,0c-3.3,0.1-4.9-1.1-4.9-4.6c0.1-21.5,0-43-0.1-64.5 c0-2.9,1.3-4.3,4.2-4.3c3.2,0,6.3-0.1,9.5,0.1c4,0,8.8-1,7.5,6.6c8.6-6.1,16.9-8.7,26.3-7c5.2,1,10.1,2.7,13.7,6.6 c2.8,2.9,4.6,2.4,7.4,0c6.8-5.8,15-7.9,23.8-6.9c16.3,1.8,25.1,11.7,25.8,29.5c0.5,13.3,0.1,26.6,0.2,40 c0,3.4-1.2,5.1-4.7,4.7C763.8,295.7,757.9,298,752.3,294.5z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M463.1,324.1c-10.8-0.7-20.9-2.4-30.2-7.5c-3.6-2-5-4-2.4-7.8c2.3-3.4,4.1-7.1,6.5-11.3 c6.1,3.6,11.8,6.8,18.5,7.7c5.3,0.7,10.6,1.1,15.8-0.5c8.3-2.6,12.2-9.1,10.9-18.6c-9.1,7.5-19.3,8.6-30.2,6.4 c-7.8-1.6-14.2-5.6-19.2-11.8c-10.5-12.8-10.6-32.5-0.5-45.5c11.2-14.3,28.6-16.4,50.9-6.1c-0.4-6.2,3.5-6.3,8.1-6.2 c13,0.2,13,0.1,13,13c0,16.3-0.5,32.7,0.1,49C505.4,309.3,491.3,322.1,467.6,324C466.2,324.1,464.9,324.1,463.1,324.1z M482.1,252.6 c-0.6-2.1-1.6-4-3-5.7c-4.6-6-13.5-8.4-21.2-5.5c-7.4,2.7-11.1,8.9-10.6,17.8c0.4,7.4,5.7,13.5,13.6,15.2 C474.1,277.2,485.2,266.4,482.1,252.6z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M258.1,201.6c20.3,0,40.1,0.1,60-0.1c4.5,0,6.3,1.3,6.1,5.9c-0.4,14.6,2.1,12.6-12.7,12.7 c-10.7,0.1-21.3,0.1-32-0.1c-3.8-0.1-5.2,1-5.3,5.1c0,13.4-0.2,13.4,13.4,13.4c8.7,0,17.3,0.1,26,0c3.4-0.1,4.7,1.2,4.7,4.7 c-0.2,16.4,1.9,13.7-13.1,13.9c-8.8,0.1-17.7,0.1-26.5,0c-3.2,0-4.6,1.1-4.4,4.4c0.2,3.8,0.2,7.7,0,11.5 c-0.2,3.5,1.1,4.7,4.6,4.7c13.7-0.1,27.3,0.2,41-0.1c5.1-0.1,6.6,1.5,6.5,6.5c-0.2,12.3,0,12.3-12.1,12.3 c-18.7-0.1-37.3-0.2-56,0c-4.9,0.1-6.7-1.2-6.7-6.4c0.2-27.5,0.2-55,0-82.5C251.6,203,253,200.9,258.1,201.6z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M599.5,239.6c-5.6,0.9-10.6,2.1-15,4.9c-2.5,1.6-4,0.9-5.1-1.6c-0.9-2-1.9-3.9-2.9-5.8 c-3.1-6.1-3-6.4,3-9.3c11.6-5.6,23.9-7.1,36.5-4.6c15.1,2.9,23.6,12.8,24.1,28.7c0.4,13.3,0.1,26.6,0.2,40 c0,3.5-1.5,4.8-4.8,4.6c-3,0-6,0-9,0.1c-4.2,0.2-8.1,0.2-6.6-6.6c-12.4,9.5-24.9,10.4-37.7,3.9c-8.5-4.3-11.9-12-11.3-21.2 c0.6-9.1,5.9-15,14.4-17.9c5.7-1.9,11.6-2.8,17.7-2.8c4.6,0,9.3,0.5,13.8-0.4c1.9-7.2-7.4-13.5-17.2-11.9 M617.7,271.9 c-0.1-2.5,1-5.8-3.3-5.8c-5,0-10-0.1-15,0.2c-4,0.3-6.9,2.4-7.1,6.9c-0.2,4.5,2.2,7.2,6.3,8.4C606.5,283.8,613.8,280.3,617.7,271.9z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M346.2,222.9c2.6,0,4.8,0.1,7,0c4.7-0.4,8.1,0.7,7,7.3c6-4,11.6-7.1,18.2-7.9c18.2-2.1,34.8,7.7,35,29.4 c0.1,13.2-0.1,26.3,0.1,39.5c0,3.9-1.2,5.5-5.2,5.2c-4,0-8,0-12,0.2c-3.5,0.2-4.7-1.3-4.7-4.7c0.1-10.3,0.1-20.7,0-31 c0-2.3-0.1-4.7-0.5-7c-1.3-8.4-5.4-12.3-12.9-12.6c-8.4-0.3-14.3,3.9-16,11.9c-2,9.6-0.7,19.3-0.9,28.9 c-0.2,14.4,0,14.4-14.4,14.4c-7.8,0-7.9,0-7.9-8c0-19.5,0-39,0-58.5C339,223.3,339.2,223.2,346.2,222.9z" }),
        /* @__PURE__ */ h.jsx("path", { fill: "currentColor", d: "M543.2,258.4c-0.1,11.1-0.3,21.8-0.2,32.4c0,4-1.2,5.9-5.4,5.6c-4.3-0.3-8.7-0.1-13-0.1 c-2.7,0-3.9-1.3-3.9-4c0-21.8,0-43.6,0-65.5c0-2.8,1.3-3.9,3.9-4c2.8,0,5.7,0,8.5-0.1c4.8-0.2,9.6-0.5,8.7,6.4 c2.1,0.8,2.8-0.7,3.9-1.3c2.3-1.2,4.5-2.8,7-3.8c11.8-4.7,14.3-3,14.3,9.3c0,0.8-0.1,1.7,0,2.5c0.6,4.6-1,6.4-6,6.5 C550,242.6,544.8,247.5,543.2,258.4z" })
      ]
    }
  );
}, JV = "0.9.10", $D = {
  version: JV
}, RA = ({
  activeTab: e,
  onNavigate: t,
  isMobile: n,
  isOpen: r = !1,
  onClose: i,
  onShowUpdateNotice: a,
  hasUnreadUpdate: o
}) => {
  const u = (f) => {
    t(f), n && i && i();
  }, c = () => /* @__PURE__ */ h.jsxs("div", { className: "pt-4 border-t border-border/30 mt-2 space-y-2", children: [
    /* @__PURE__ */ h.jsxs(
      "button",
      {
        onClick: a,
        className: "w-full flex items-center gap-2 px-2 py-1.5 rounded-lg transition-all duration-[var(--duration-fast)] text-muted-foreground hover:text-foreground hover:bg-muted/10 text-left",
        children: [
          /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ h.jsx(
              O$,
              {
                size: 16,
                strokeWidth: 1.5,
                className: o ? "engram-animate-bell-ring" : ""
              }
            ),
            o && /* @__PURE__ */ h.jsx("span", { className: "absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full engram-animate-pulse" })
          ] }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs", children: "" }),
          o && /* @__PURE__ */ h.jsx("span", { className: "ml-auto text-[10px] px-1.5 py-0.5 bg-primary/20 text-primary rounded-full", children: "NEW" })
        ]
      }
    ),
    /* @__PURE__ */ h.jsxs(
      "a",
      {
        href: "https://github.com/shiyue137mh-netizen/Engram",
        target: "_blank",
        rel: "noopener noreferrer",
        className: "group w-full flex items-center gap-2 px-2 py-1.5 rounded-lg transition-all duration-200 text-muted-foreground hover:text-foreground hover:bg-muted/10",
        title: "",
        children: [
          /* @__PURE__ */ h.jsx(xF, { size: 16, strokeWidth: 1.5, className: "group-hover:text-primary transition-colors" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs", children: "GitHub" }),
          /* @__PURE__ */ h.jsx("span", { className: "ml-auto text-[10px] text-primary opacity-0 group-hover:opacity-100 transition-opacity", children: "Star " })
        ]
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 px-2 py-1 opacity-50", children: [
      /* @__PURE__ */ h.jsx(QV, { height: 12 }),
      /* @__PURE__ */ h.jsxs("span", { className: "text-[10px] text-muted-foreground font-mono", children: [
        "v",
        $D.version
      ] })
    ] })
  ] });
  return n && !r ? null : n ? /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: "fixed inset-0 z-[60] flex justify-start",
      style: { height: "100dvh", width: "100vw" },
      children: [
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",
            onClick: i
          }
        ),
        /* @__PURE__ */ h.jsxs(
          "div",
          {
            id: "mobile-menu-drawer",
            className: "relative w-64 max-w-[80vw] h-full bg-sidebar border-r border-border shadow-2xl flex flex-col p-6 animate-in slide-in-from-left duration-300",
            style: { height: "100dvh" },
            children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between items-center mb-8", children: [
                /* @__PURE__ */ h.jsx("span", { className: "text-lg font-semibold text-sidebar-foreground/80", children: "" }),
                /* @__PURE__ */ h.jsx(
                  "button",
                  {
                    onClick: i,
                    className: "p-2 -mr-2 rounded-md hover:bg-sidebar-accent text-muted-foreground hover:text-sidebar-accent-foreground transition-colors",
                    children: /* @__PURE__ */ h.jsx(gm, { size: 20 })
                  }
                )
              ] }),
              /* @__PURE__ */ h.jsx("nav", { className: "space-y-2 flex-1 overflow-y-auto", children: px.map((f) => {
                const p = f.icon, g = e === f.id;
                return /* @__PURE__ */ h.jsxs(
                  "button",
                  {
                    onClick: () => u(f.id),
                    className: `
                                    group w-full flex items-center gap-4 px-4 py-3 rounded-xl text-left
                                    transition-all duration-[var(--duration-fast)] ease-[var(--ease-out)]
                                    active:scale-[0.98]
                                    ${g ? "bg-primary/10 text-primary font-medium" : "text-muted-foreground hover:bg-sidebar-accent hover:text-sidebar-foreground"}
                                `,
                    children: [
                      /* @__PURE__ */ h.jsx(
                        p,
                        {
                          size: 22,
                          className: `transition-transform duration-[var(--duration-fast)] group-hover:scale-110 ${g ? "text-primary" : "text-muted-foreground/70"}`
                        }
                      ),
                      /* @__PURE__ */ h.jsx("span", { children: f.label })
                    ]
                  },
                  f.id
                );
              }) }),
              /* @__PURE__ */ h.jsx("div", { className: "mt-auto", children: /* @__PURE__ */ h.jsx(c, {}) })
            ]
          }
        )
      ]
    }
  ) : /* @__PURE__ */ h.jsxs("aside", { className: "[display:none] md:flex w-36 flex-shrink-0 bg-sidebar flex-col z-40 pt-4 px-2 border-r border-border/50 animate-in slide-in-from-left-4 fade-in duration-500 fill-mode-both", style: { animationDelay: "100ms", animationFillMode: "both" }, children: [
    /* @__PURE__ */ h.jsx("nav", { className: "flex-1 w-full flex flex-col gap-1 overflow-y-auto no-scrollbar", children: px.map((f) => {
      const p = f.icon, g = e === f.id;
      return /* @__PURE__ */ h.jsxs(
        "button",
        {
          onClick: () => u(f.id),
          className: `
                                    group w-full flex items-center gap-2 px-2 py-2 rounded-lg text-left
                                    transition-all duration-[var(--duration-fast)] ease-[var(--ease-out)]
                                    ${g ? "bg-primary/10 text-primary" : "text-muted-foreground hover:text-foreground hover:bg-muted/10"}
                                `,
          children: [
            /* @__PURE__ */ h.jsx(
              p,
              {
                size: 18,
                strokeWidth: g ? 2 : 1.5,
                className: "flex-shrink-0 transition-transform duration-[var(--duration-fast)] group-hover:scale-110"
              }
            ),
            /* @__PURE__ */ h.jsx("span", { className: `text-xs ${g ? "font-medium" : "font-normal"}`, children: f.label })
          ]
        },
        f.id
      );
    }) }),
    /* @__PURE__ */ h.jsx("div", { className: "pb-3", children: /* @__PURE__ */ h.jsx(c, {}) })
  ] });
}, _1 = {
  timeOut: 5e3,
  extendedTimeOut: 1e3,
  closeButton: !0,
  progressBar: !0
}, Id = class Id {
  constructor() {
  }
  static getInstance() {
    return Id.instance || (Id.instance = new Id()), Id.instance;
  }
  /**
   *  toastr 
   */
  getToastr() {
    return window.toastr || null;
  }
  /**
   * 
   * V0.9.10:  action 
   */
  success(t, n = "Engram", r = {}) {
    var o, u;
    const i = this.getToastr(), a = ((o = r.action) == null ? void 0 : o.onClick) ?? ((u = r.action) != null && u.goto ? () => this.navigate(r.action.goto) : void 0);
    i ? i.success(t, n, {
      ..._1,
      ...r,
      onclick: this.buildClickHandler(a),
      tapToDismiss: !!a
    }) : console.log(`[Engram] SUCCESS: ${n} - ${t}`), pe.info("Notification", `Success: ${t}`);
  }
  /**
   * 
   * V0.9.10:  action 
   */
  info(t, n = "Engram", r = {}) {
    var o, u;
    const i = this.getToastr(), a = ((o = r.action) == null ? void 0 : o.onClick) ?? ((u = r.action) != null && u.goto ? () => this.navigate(r.action.goto) : void 0);
    i ? i.info(t, n, {
      ..._1,
      ...r,
      onclick: this.buildClickHandler(a),
      tapToDismiss: !!a
    }) : console.log(`[Engram] INFO: ${n} - ${t}`), pe.info("Notification", `Info: ${t}`);
  }
  /**
   * 
   * V0.9.10:  action 
   */
  warning(t, n = "Engram", r = {}) {
    var o, u;
    const i = this.getToastr(), a = ((o = r.action) == null ? void 0 : o.onClick) ?? ((u = r.action) != null && u.goto ? () => this.navigate(r.action.goto) : void 0);
    i ? i.warning(t, n, {
      ..._1,
      ...r,
      onclick: this.buildClickHandler(a),
      tapToDismiss: !!a
    }) : console.warn(`[Engram] WARNING: ${n} - ${t}`), pe.warn("Notification", `Warning: ${t}`);
  }
  /**
   * 
   * V0.9.10: 
   */
  error(t, n = "Engram", r = {}) {
    const i = this.getToastr(), a = r.action ?? { goto: "devlog" }, o = this.buildClickHandler(a.onClick ?? a.goto ? () => this.navigate(a.goto) : void 0);
    i ? i.error(t, n, {
      ..._1,
      timeOut: 8e3,
      ...r,
      onclick: o,
      tapToDismiss: !!o
    }) : console.error(`[Engram] ERROR: ${n} - ${t}`), pe.error("Notification", `Error: ${t}`);
  }
  /**
   *  UI 
   */
  navigate(t) {
    pe.info("Notification", `: ${t}`), $5.emit({ type: "UI_NAVIGATE_REQUEST", payload: t });
  }
  /**
   * 
   */
  buildClickHandler(t) {
    if (t)
      return () => {
        try {
          t();
        } catch (n) {
          console.error("[Engram] Notification click handler error:", n);
        }
      };
  }
  /**
   * 
   * @param message 
   * @param title 
   * @param onCancel 
   * @returns toastr 
   */
  running(t, n = "Engram", r) {
    const i = this.getToastr();
    if (i) {
      const a = r ? `${t} <small style="opacity:0.7">()</small>` : t;
      return i.info(a, n, {
        timeOut: 2e4,
        //  20 
        extendedTimeOut: 0,
        // 
        closeButton: !1,
        // 
        progressBar: !0,
        // 
        tapToDismiss: !!r,
        // 
        onclick: r ? () => {
          pe.info("Notification", ""), r();
        } : void 0,
        escapeHtml: !1
        //  HTML
      });
    } else
      return console.log(`[Engram] RUNNING: ${n} - ${t}`), null;
  }
  /**
   *  toastr 
   */
  remove(t) {
    const n = this.getToastr();
    n && t && n.remove(t);
  }
  /**
   * 
   */
  clear() {
    const t = this.getToastr();
    t && t.clear();
  }
};
yt(Id, "instance");
let yE = Id;
const Zt = yE.getInstance(), Tp = {
  owner: "shiyue137mh-netizen",
  repo: "Engram",
  branch: "master"
}, S1 = $D.version;
let a0 = null, o0 = null;
function W2(e, t) {
  const n = e.split(".").map(Number), r = t.split(".").map(Number);
  for (let i = 0; i < Math.max(n.length, r.length); i++) {
    const a = n[i] || 0, o = r[i] || 0;
    if (a > o) return 1;
    if (a < o) return -1;
  }
  return 0;
}
class Pl {
  /**
   * 
   */
  static getCurrentVersion() {
    return S1;
  }
  /**
   *  GitHub 
   */
  static async getLatestVersion() {
    if (a0)
      return a0;
    try {
      const t = `https://raw.githubusercontent.com/${Tp.owner}/${Tp.repo}/${Tp.branch}/manifest.json`, n = await fetch(t);
      return n.ok ? (a0 = (await n.json()).version || null, a0) : null;
    } catch {
      return null;
    }
  }
  /**
   * 
   */
  static async hasUpdate() {
    const t = await this.getLatestVersion();
    return t ? W2(t, S1) > 0 : !1;
  }
  /**
   * 
   */
  static async getChangelog() {
    if (o0)
      return o0;
    try {
      const t = `https://raw.githubusercontent.com/${Tp.owner}/${Tp.repo}/${Tp.branch}/CHANGELOG.md`, n = await fetch(t);
      return n.ok ? (o0 = await n.text(), o0) : (console.warn("[Engram] UpdateService: ", n.status), Zt.warning(`: ${n.status}`, ""), null);
    } catch (t) {
      return console.error("[Engram] UpdateService: ", t), Zt.error("", ""), null;
    }
  }
  /**
   * 
   */
  static getReadVersion() {
    try {
      return tt.get("lastReadVersion") || "0.0.0";
    } catch {
      return "0.0.0";
    }
  }
  /**
   * 
   */
  static async markAsRead(t) {
    const n = t || await this.getLatestVersion() || S1;
    try {
      tt.set("lastReadVersion", n), console.debug("[Engram] UpdateService: ", n);
    } catch (r) {
      console.error("[Engram] UpdateService: ", r);
    }
  }
  /**
   * 
   */
  static async hasUnreadUpdate() {
    const t = await this.getLatestVersion();
    if (!t || W2(t, S1) <= 0)
      return !1;
    const n = this.getReadVersion();
    return W2(t, n) > 0;
  }
  /**
   * 
   */
  static clearCache() {
    a0 = null, o0 = null;
  }
}
function eH(e, t) {
  const n = {};
  return (e[e.length - 1] === "" ? [...e, ""] : e).join(
    (n.padRight ? " " : "") + "," + (n.padLeft === !1 ? "" : " ")
  ).trim();
}
const tH = /^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u, nH = /^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u, rH = {};
function MA(e, t) {
  return (rH.jsx ? nH : tH).test(e);
}
const iH = /[ \t\n\f\r]/g;
function sH(e) {
  return typeof e == "object" ? e.type === "text" ? OA(e.value) : !1 : OA(e);
}
function OA(e) {
  return e.replace(iH, "") === "";
}
class gy {
  /**
   * @param {SchemaType['property']} property
   *   Property.
   * @param {SchemaType['normal']} normal
   *   Normal.
   * @param {Space | undefined} [space]
   *   Space.
   * @returns
   *   Schema.
   */
  constructor(t, n, r) {
    this.normal = n, this.property = t, r && (this.space = r);
  }
}
gy.prototype.normal = {};
gy.prototype.property = {};
gy.prototype.space = void 0;
function FD(e, t) {
  const n = {}, r = {};
  for (const i of e)
    Object.assign(n, i.property), Object.assign(r, i.normal);
  return new gy(n, r, t);
}
function vE(e) {
  return e.toLowerCase();
}
class ra {
  /**
   * @param {string} property
   *   Property.
   * @param {string} attribute
   *   Attribute.
   * @returns
   *   Info.
   */
  constructor(t, n) {
    this.attribute = n, this.property = t;
  }
}
ra.prototype.attribute = "";
ra.prototype.booleanish = !1;
ra.prototype.boolean = !1;
ra.prototype.commaOrSpaceSeparated = !1;
ra.prototype.commaSeparated = !1;
ra.prototype.defined = !1;
ra.prototype.mustUseProperty = !1;
ra.prototype.number = !1;
ra.prototype.overloadedBoolean = !1;
ra.prototype.property = "";
ra.prototype.spaceSeparated = !1;
ra.prototype.space = void 0;
let aH = 0;
const Wt = ah(), Vr = ah(), xE = ah(), rt = ah(), Qn = ah(), Yp = ah(), Ea = ah();
function ah() {
  return 2 ** ++aH;
}
const bE = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  boolean: Wt,
  booleanish: Vr,
  commaOrSpaceSeparated: Ea,
  commaSeparated: Yp,
  number: rt,
  overloadedBoolean: xE,
  spaceSeparated: Qn
}, Symbol.toStringTag, { value: "Module" })), Z2 = (
  /** @type {ReadonlyArray<keyof typeof types>} */
  Object.keys(bE)
);
class K5 extends ra {
  /**
   * @constructor
   * @param {string} property
   *   Property.
   * @param {string} attribute
   *   Attribute.
   * @param {number | null | undefined} [mask]
   *   Mask.
   * @param {Space | undefined} [space]
   *   Space.
   * @returns
   *   Info.
   */
  constructor(t, n, r, i) {
    let a = -1;
    if (super(t, n), DA(this, "space", i), typeof r == "number")
      for (; ++a < Z2.length; ) {
        const o = Z2[a];
        DA(this, Z2[a], (r & bE[o]) === bE[o]);
      }
  }
}
K5.prototype.defined = !0;
function DA(e, t, n) {
  n && (e[t] = n);
}
function ym(e) {
  const t = {}, n = {};
  for (const [r, i] of Object.entries(e.properties)) {
    const a = new K5(
      r,
      e.transform(e.attributes || {}, r),
      i,
      e.space
    );
    e.mustUseProperty && e.mustUseProperty.includes(r) && (a.mustUseProperty = !0), t[r] = a, n[vE(r)] = r, n[vE(a.attribute)] = r;
  }
  return new gy(t, n, e.space);
}
const UD = ym({
  properties: {
    ariaActiveDescendant: null,
    ariaAtomic: Vr,
    ariaAutoComplete: null,
    ariaBusy: Vr,
    ariaChecked: Vr,
    ariaColCount: rt,
    ariaColIndex: rt,
    ariaColSpan: rt,
    ariaControls: Qn,
    ariaCurrent: null,
    ariaDescribedBy: Qn,
    ariaDetails: null,
    ariaDisabled: Vr,
    ariaDropEffect: Qn,
    ariaErrorMessage: null,
    ariaExpanded: Vr,
    ariaFlowTo: Qn,
    ariaGrabbed: Vr,
    ariaHasPopup: null,
    ariaHidden: Vr,
    ariaInvalid: null,
    ariaKeyShortcuts: null,
    ariaLabel: null,
    ariaLabelledBy: Qn,
    ariaLevel: rt,
    ariaLive: null,
    ariaModal: Vr,
    ariaMultiLine: Vr,
    ariaMultiSelectable: Vr,
    ariaOrientation: null,
    ariaOwns: Qn,
    ariaPlaceholder: null,
    ariaPosInSet: rt,
    ariaPressed: Vr,
    ariaReadOnly: Vr,
    ariaRelevant: null,
    ariaRequired: Vr,
    ariaRoleDescription: Qn,
    ariaRowCount: rt,
    ariaRowIndex: rt,
    ariaRowSpan: rt,
    ariaSelected: Vr,
    ariaSetSize: rt,
    ariaSort: null,
    ariaValueMax: rt,
    ariaValueMin: rt,
    ariaValueNow: rt,
    ariaValueText: null,
    role: null
  },
  transform(e, t) {
    return t === "role" ? t : "aria-" + t.slice(4).toLowerCase();
  }
});
function VD(e, t) {
  return t in e ? e[t] : t;
}
function HD(e, t) {
  return VD(e, t.toLowerCase());
}
const oH = ym({
  attributes: {
    acceptcharset: "accept-charset",
    classname: "class",
    htmlfor: "for",
    httpequiv: "http-equiv"
  },
  mustUseProperty: ["checked", "multiple", "muted", "selected"],
  properties: {
    // Standard Properties.
    abbr: null,
    accept: Yp,
    acceptCharset: Qn,
    accessKey: Qn,
    action: null,
    allow: null,
    allowFullScreen: Wt,
    allowPaymentRequest: Wt,
    allowUserMedia: Wt,
    alt: null,
    as: null,
    async: Wt,
    autoCapitalize: null,
    autoComplete: Qn,
    autoFocus: Wt,
    autoPlay: Wt,
    blocking: Qn,
    capture: null,
    charSet: null,
    checked: Wt,
    cite: null,
    className: Qn,
    cols: rt,
    colSpan: null,
    content: null,
    contentEditable: Vr,
    controls: Wt,
    controlsList: Qn,
    coords: rt | Yp,
    crossOrigin: null,
    data: null,
    dateTime: null,
    decoding: null,
    default: Wt,
    defer: Wt,
    dir: null,
    dirName: null,
    disabled: Wt,
    download: xE,
    draggable: Vr,
    encType: null,
    enterKeyHint: null,
    fetchPriority: null,
    form: null,
    formAction: null,
    formEncType: null,
    formMethod: null,
    formNoValidate: Wt,
    formTarget: null,
    headers: Qn,
    height: rt,
    hidden: xE,
    high: rt,
    href: null,
    hrefLang: null,
    htmlFor: Qn,
    httpEquiv: Qn,
    id: null,
    imageSizes: null,
    imageSrcSet: null,
    inert: Wt,
    inputMode: null,
    integrity: null,
    is: null,
    isMap: Wt,
    itemId: null,
    itemProp: Qn,
    itemRef: Qn,
    itemScope: Wt,
    itemType: Qn,
    kind: null,
    label: null,
    lang: null,
    language: null,
    list: null,
    loading: null,
    loop: Wt,
    low: rt,
    manifest: null,
    max: null,
    maxLength: rt,
    media: null,
    method: null,
    min: null,
    minLength: rt,
    multiple: Wt,
    muted: Wt,
    name: null,
    nonce: null,
    noModule: Wt,
    noValidate: Wt,
    onAbort: null,
    onAfterPrint: null,
    onAuxClick: null,
    onBeforeMatch: null,
    onBeforePrint: null,
    onBeforeToggle: null,
    onBeforeUnload: null,
    onBlur: null,
    onCancel: null,
    onCanPlay: null,
    onCanPlayThrough: null,
    onChange: null,
    onClick: null,
    onClose: null,
    onContextLost: null,
    onContextMenu: null,
    onContextRestored: null,
    onCopy: null,
    onCueChange: null,
    onCut: null,
    onDblClick: null,
    onDrag: null,
    onDragEnd: null,
    onDragEnter: null,
    onDragExit: null,
    onDragLeave: null,
    onDragOver: null,
    onDragStart: null,
    onDrop: null,
    onDurationChange: null,
    onEmptied: null,
    onEnded: null,
    onError: null,
    onFocus: null,
    onFormData: null,
    onHashChange: null,
    onInput: null,
    onInvalid: null,
    onKeyDown: null,
    onKeyPress: null,
    onKeyUp: null,
    onLanguageChange: null,
    onLoad: null,
    onLoadedData: null,
    onLoadedMetadata: null,
    onLoadEnd: null,
    onLoadStart: null,
    onMessage: null,
    onMessageError: null,
    onMouseDown: null,
    onMouseEnter: null,
    onMouseLeave: null,
    onMouseMove: null,
    onMouseOut: null,
    onMouseOver: null,
    onMouseUp: null,
    onOffline: null,
    onOnline: null,
    onPageHide: null,
    onPageShow: null,
    onPaste: null,
    onPause: null,
    onPlay: null,
    onPlaying: null,
    onPopState: null,
    onProgress: null,
    onRateChange: null,
    onRejectionHandled: null,
    onReset: null,
    onResize: null,
    onScroll: null,
    onScrollEnd: null,
    onSecurityPolicyViolation: null,
    onSeeked: null,
    onSeeking: null,
    onSelect: null,
    onSlotChange: null,
    onStalled: null,
    onStorage: null,
    onSubmit: null,
    onSuspend: null,
    onTimeUpdate: null,
    onToggle: null,
    onUnhandledRejection: null,
    onUnload: null,
    onVolumeChange: null,
    onWaiting: null,
    onWheel: null,
    open: Wt,
    optimum: rt,
    pattern: null,
    ping: Qn,
    placeholder: null,
    playsInline: Wt,
    popover: null,
    popoverTarget: null,
    popoverTargetAction: null,
    poster: null,
    preload: null,
    readOnly: Wt,
    referrerPolicy: null,
    rel: Qn,
    required: Wt,
    reversed: Wt,
    rows: rt,
    rowSpan: rt,
    sandbox: Qn,
    scope: null,
    scoped: Wt,
    seamless: Wt,
    selected: Wt,
    shadowRootClonable: Wt,
    shadowRootDelegatesFocus: Wt,
    shadowRootMode: null,
    shape: null,
    size: rt,
    sizes: null,
    slot: null,
    span: rt,
    spellCheck: Vr,
    src: null,
    srcDoc: null,
    srcLang: null,
    srcSet: null,
    start: rt,
    step: null,
    style: null,
    tabIndex: rt,
    target: null,
    title: null,
    translate: null,
    type: null,
    typeMustMatch: Wt,
    useMap: null,
    value: Vr,
    width: rt,
    wrap: null,
    writingSuggestions: null,
    // Legacy.
    // See: https://html.spec.whatwg.org/#other-elements,-attributes-and-apis
    align: null,
    // Several. Use CSS `text-align` instead,
    aLink: null,
    // `<body>`. Use CSS `a:active {color}` instead
    archive: Qn,
    // `<object>`. List of URIs to archives
    axis: null,
    // `<td>` and `<th>`. Use `scope` on `<th>`
    background: null,
    // `<body>`. Use CSS `background-image` instead
    bgColor: null,
    // `<body>` and table elements. Use CSS `background-color` instead
    border: rt,
    // `<table>`. Use CSS `border-width` instead,
    borderColor: null,
    // `<table>`. Use CSS `border-color` instead,
    bottomMargin: rt,
    // `<body>`
    cellPadding: null,
    // `<table>`
    cellSpacing: null,
    // `<table>`
    char: null,
    // Several table elements. When `align=char`, sets the character to align on
    charOff: null,
    // Several table elements. When `char`, offsets the alignment
    classId: null,
    // `<object>`
    clear: null,
    // `<br>`. Use CSS `clear` instead
    code: null,
    // `<object>`
    codeBase: null,
    // `<object>`
    codeType: null,
    // `<object>`
    color: null,
    // `<font>` and `<hr>`. Use CSS instead
    compact: Wt,
    // Lists. Use CSS to reduce space between items instead
    declare: Wt,
    // `<object>`
    event: null,
    // `<script>`
    face: null,
    // `<font>`. Use CSS instead
    frame: null,
    // `<table>`
    frameBorder: null,
    // `<iframe>`. Use CSS `border` instead
    hSpace: rt,
    // `<img>` and `<object>`
    leftMargin: rt,
    // `<body>`
    link: null,
    // `<body>`. Use CSS `a:link {color: *}` instead
    longDesc: null,
    // `<frame>`, `<iframe>`, and `<img>`. Use an `<a>`
    lowSrc: null,
    // `<img>`. Use a `<picture>`
    marginHeight: rt,
    // `<body>`
    marginWidth: rt,
    // `<body>`
    noResize: Wt,
    // `<frame>`
    noHref: Wt,
    // `<area>`. Use no href instead of an explicit `nohref`
    noShade: Wt,
    // `<hr>`. Use background-color and height instead of borders
    noWrap: Wt,
    // `<td>` and `<th>`
    object: null,
    // `<applet>`
    profile: null,
    // `<head>`
    prompt: null,
    // `<isindex>`
    rev: null,
    // `<link>`
    rightMargin: rt,
    // `<body>`
    rules: null,
    // `<table>`
    scheme: null,
    // `<meta>`
    scrolling: Vr,
    // `<frame>`. Use overflow in the child context
    standby: null,
    // `<object>`
    summary: null,
    // `<table>`
    text: null,
    // `<body>`. Use CSS `color` instead
    topMargin: rt,
    // `<body>`
    valueType: null,
    // `<param>`
    version: null,
    // `<html>`. Use a doctype.
    vAlign: null,
    // Several. Use CSS `vertical-align` instead
    vLink: null,
    // `<body>`. Use CSS `a:visited {color}` instead
    vSpace: rt,
    // `<img>` and `<object>`
    // Non-standard Properties.
    allowTransparency: null,
    autoCorrect: null,
    autoSave: null,
    disablePictureInPicture: Wt,
    disableRemotePlayback: Wt,
    prefix: null,
    property: null,
    results: rt,
    security: null,
    unselectable: null
  },
  space: "html",
  transform: HD
}), lH = ym({
  attributes: {
    accentHeight: "accent-height",
    alignmentBaseline: "alignment-baseline",
    arabicForm: "arabic-form",
    baselineShift: "baseline-shift",
    capHeight: "cap-height",
    className: "class",
    clipPath: "clip-path",
    clipRule: "clip-rule",
    colorInterpolation: "color-interpolation",
    colorInterpolationFilters: "color-interpolation-filters",
    colorProfile: "color-profile",
    colorRendering: "color-rendering",
    crossOrigin: "crossorigin",
    dataType: "datatype",
    dominantBaseline: "dominant-baseline",
    enableBackground: "enable-background",
    fillOpacity: "fill-opacity",
    fillRule: "fill-rule",
    floodColor: "flood-color",
    floodOpacity: "flood-opacity",
    fontFamily: "font-family",
    fontSize: "font-size",
    fontSizeAdjust: "font-size-adjust",
    fontStretch: "font-stretch",
    fontStyle: "font-style",
    fontVariant: "font-variant",
    fontWeight: "font-weight",
    glyphName: "glyph-name",
    glyphOrientationHorizontal: "glyph-orientation-horizontal",
    glyphOrientationVertical: "glyph-orientation-vertical",
    hrefLang: "hreflang",
    horizAdvX: "horiz-adv-x",
    horizOriginX: "horiz-origin-x",
    horizOriginY: "horiz-origin-y",
    imageRendering: "image-rendering",
    letterSpacing: "letter-spacing",
    lightingColor: "lighting-color",
    markerEnd: "marker-end",
    markerMid: "marker-mid",
    markerStart: "marker-start",
    navDown: "nav-down",
    navDownLeft: "nav-down-left",
    navDownRight: "nav-down-right",
    navLeft: "nav-left",
    navNext: "nav-next",
    navPrev: "nav-prev",
    navRight: "nav-right",
    navUp: "nav-up",
    navUpLeft: "nav-up-left",
    navUpRight: "nav-up-right",
    onAbort: "onabort",
    onActivate: "onactivate",
    onAfterPrint: "onafterprint",
    onBeforePrint: "onbeforeprint",
    onBegin: "onbegin",
    onCancel: "oncancel",
    onCanPlay: "oncanplay",
    onCanPlayThrough: "oncanplaythrough",
    onChange: "onchange",
    onClick: "onclick",
    onClose: "onclose",
    onCopy: "oncopy",
    onCueChange: "oncuechange",
    onCut: "oncut",
    onDblClick: "ondblclick",
    onDrag: "ondrag",
    onDragEnd: "ondragend",
    onDragEnter: "ondragenter",
    onDragExit: "ondragexit",
    onDragLeave: "ondragleave",
    onDragOver: "ondragover",
    onDragStart: "ondragstart",
    onDrop: "ondrop",
    onDurationChange: "ondurationchange",
    onEmptied: "onemptied",
    onEnd: "onend",
    onEnded: "onended",
    onError: "onerror",
    onFocus: "onfocus",
    onFocusIn: "onfocusin",
    onFocusOut: "onfocusout",
    onHashChange: "onhashchange",
    onInput: "oninput",
    onInvalid: "oninvalid",
    onKeyDown: "onkeydown",
    onKeyPress: "onkeypress",
    onKeyUp: "onkeyup",
    onLoad: "onload",
    onLoadedData: "onloadeddata",
    onLoadedMetadata: "onloadedmetadata",
    onLoadStart: "onloadstart",
    onMessage: "onmessage",
    onMouseDown: "onmousedown",
    onMouseEnter: "onmouseenter",
    onMouseLeave: "onmouseleave",
    onMouseMove: "onmousemove",
    onMouseOut: "onmouseout",
    onMouseOver: "onmouseover",
    onMouseUp: "onmouseup",
    onMouseWheel: "onmousewheel",
    onOffline: "onoffline",
    onOnline: "ononline",
    onPageHide: "onpagehide",
    onPageShow: "onpageshow",
    onPaste: "onpaste",
    onPause: "onpause",
    onPlay: "onplay",
    onPlaying: "onplaying",
    onPopState: "onpopstate",
    onProgress: "onprogress",
    onRateChange: "onratechange",
    onRepeat: "onrepeat",
    onReset: "onreset",
    onResize: "onresize",
    onScroll: "onscroll",
    onSeeked: "onseeked",
    onSeeking: "onseeking",
    onSelect: "onselect",
    onShow: "onshow",
    onStalled: "onstalled",
    onStorage: "onstorage",
    onSubmit: "onsubmit",
    onSuspend: "onsuspend",
    onTimeUpdate: "ontimeupdate",
    onToggle: "ontoggle",
    onUnload: "onunload",
    onVolumeChange: "onvolumechange",
    onWaiting: "onwaiting",
    onZoom: "onzoom",
    overlinePosition: "overline-position",
    overlineThickness: "overline-thickness",
    paintOrder: "paint-order",
    panose1: "panose-1",
    pointerEvents: "pointer-events",
    referrerPolicy: "referrerpolicy",
    renderingIntent: "rendering-intent",
    shapeRendering: "shape-rendering",
    stopColor: "stop-color",
    stopOpacity: "stop-opacity",
    strikethroughPosition: "strikethrough-position",
    strikethroughThickness: "strikethrough-thickness",
    strokeDashArray: "stroke-dasharray",
    strokeDashOffset: "stroke-dashoffset",
    strokeLineCap: "stroke-linecap",
    strokeLineJoin: "stroke-linejoin",
    strokeMiterLimit: "stroke-miterlimit",
    strokeOpacity: "stroke-opacity",
    strokeWidth: "stroke-width",
    tabIndex: "tabindex",
    textAnchor: "text-anchor",
    textDecoration: "text-decoration",
    textRendering: "text-rendering",
    transformOrigin: "transform-origin",
    typeOf: "typeof",
    underlinePosition: "underline-position",
    underlineThickness: "underline-thickness",
    unicodeBidi: "unicode-bidi",
    unicodeRange: "unicode-range",
    unitsPerEm: "units-per-em",
    vAlphabetic: "v-alphabetic",
    vHanging: "v-hanging",
    vIdeographic: "v-ideographic",
    vMathematical: "v-mathematical",
    vectorEffect: "vector-effect",
    vertAdvY: "vert-adv-y",
    vertOriginX: "vert-origin-x",
    vertOriginY: "vert-origin-y",
    wordSpacing: "word-spacing",
    writingMode: "writing-mode",
    xHeight: "x-height",
    // These were camelcased in Tiny. Now lowercased in SVG 2
    playbackOrder: "playbackorder",
    timelineBegin: "timelinebegin"
  },
  properties: {
    about: Ea,
    accentHeight: rt,
    accumulate: null,
    additive: null,
    alignmentBaseline: null,
    alphabetic: rt,
    amplitude: rt,
    arabicForm: null,
    ascent: rt,
    attributeName: null,
    attributeType: null,
    azimuth: rt,
    bandwidth: null,
    baselineShift: null,
    baseFrequency: null,
    baseProfile: null,
    bbox: null,
    begin: null,
    bias: rt,
    by: null,
    calcMode: null,
    capHeight: rt,
    className: Qn,
    clip: null,
    clipPath: null,
    clipPathUnits: null,
    clipRule: null,
    color: null,
    colorInterpolation: null,
    colorInterpolationFilters: null,
    colorProfile: null,
    colorRendering: null,
    content: null,
    contentScriptType: null,
    contentStyleType: null,
    crossOrigin: null,
    cursor: null,
    cx: null,
    cy: null,
    d: null,
    dataType: null,
    defaultAction: null,
    descent: rt,
    diffuseConstant: rt,
    direction: null,
    display: null,
    dur: null,
    divisor: rt,
    dominantBaseline: null,
    download: Wt,
    dx: null,
    dy: null,
    edgeMode: null,
    editable: null,
    elevation: rt,
    enableBackground: null,
    end: null,
    event: null,
    exponent: rt,
    externalResourcesRequired: null,
    fill: null,
    fillOpacity: rt,
    fillRule: null,
    filter: null,
    filterRes: null,
    filterUnits: null,
    floodColor: null,
    floodOpacity: null,
    focusable: null,
    focusHighlight: null,
    fontFamily: null,
    fontSize: null,
    fontSizeAdjust: null,
    fontStretch: null,
    fontStyle: null,
    fontVariant: null,
    fontWeight: null,
    format: null,
    fr: null,
    from: null,
    fx: null,
    fy: null,
    g1: Yp,
    g2: Yp,
    glyphName: Yp,
    glyphOrientationHorizontal: null,
    glyphOrientationVertical: null,
    glyphRef: null,
    gradientTransform: null,
    gradientUnits: null,
    handler: null,
    hanging: rt,
    hatchContentUnits: null,
    hatchUnits: null,
    height: null,
    href: null,
    hrefLang: null,
    horizAdvX: rt,
    horizOriginX: rt,
    horizOriginY: rt,
    id: null,
    ideographic: rt,
    imageRendering: null,
    initialVisibility: null,
    in: null,
    in2: null,
    intercept: rt,
    k: rt,
    k1: rt,
    k2: rt,
    k3: rt,
    k4: rt,
    kernelMatrix: Ea,
    kernelUnitLength: null,
    keyPoints: null,
    // SEMI_COLON_SEPARATED
    keySplines: null,
    // SEMI_COLON_SEPARATED
    keyTimes: null,
    // SEMI_COLON_SEPARATED
    kerning: null,
    lang: null,
    lengthAdjust: null,
    letterSpacing: null,
    lightingColor: null,
    limitingConeAngle: rt,
    local: null,
    markerEnd: null,
    markerMid: null,
    markerStart: null,
    markerHeight: null,
    markerUnits: null,
    markerWidth: null,
    mask: null,
    maskContentUnits: null,
    maskUnits: null,
    mathematical: null,
    max: null,
    media: null,
    mediaCharacterEncoding: null,
    mediaContentEncodings: null,
    mediaSize: rt,
    mediaTime: null,
    method: null,
    min: null,
    mode: null,
    name: null,
    navDown: null,
    navDownLeft: null,
    navDownRight: null,
    navLeft: null,
    navNext: null,
    navPrev: null,
    navRight: null,
    navUp: null,
    navUpLeft: null,
    navUpRight: null,
    numOctaves: null,
    observer: null,
    offset: null,
    onAbort: null,
    onActivate: null,
    onAfterPrint: null,
    onBeforePrint: null,
    onBegin: null,
    onCancel: null,
    onCanPlay: null,
    onCanPlayThrough: null,
    onChange: null,
    onClick: null,
    onClose: null,
    onCopy: null,
    onCueChange: null,
    onCut: null,
    onDblClick: null,
    onDrag: null,
    onDragEnd: null,
    onDragEnter: null,
    onDragExit: null,
    onDragLeave: null,
    onDragOver: null,
    onDragStart: null,
    onDrop: null,
    onDurationChange: null,
    onEmptied: null,
    onEnd: null,
    onEnded: null,
    onError: null,
    onFocus: null,
    onFocusIn: null,
    onFocusOut: null,
    onHashChange: null,
    onInput: null,
    onInvalid: null,
    onKeyDown: null,
    onKeyPress: null,
    onKeyUp: null,
    onLoad: null,
    onLoadedData: null,
    onLoadedMetadata: null,
    onLoadStart: null,
    onMessage: null,
    onMouseDown: null,
    onMouseEnter: null,
    onMouseLeave: null,
    onMouseMove: null,
    onMouseOut: null,
    onMouseOver: null,
    onMouseUp: null,
    onMouseWheel: null,
    onOffline: null,
    onOnline: null,
    onPageHide: null,
    onPageShow: null,
    onPaste: null,
    onPause: null,
    onPlay: null,
    onPlaying: null,
    onPopState: null,
    onProgress: null,
    onRateChange: null,
    onRepeat: null,
    onReset: null,
    onResize: null,
    onScroll: null,
    onSeeked: null,
    onSeeking: null,
    onSelect: null,
    onShow: null,
    onStalled: null,
    onStorage: null,
    onSubmit: null,
    onSuspend: null,
    onTimeUpdate: null,
    onToggle: null,
    onUnload: null,
    onVolumeChange: null,
    onWaiting: null,
    onZoom: null,
    opacity: null,
    operator: null,
    order: null,
    orient: null,
    orientation: null,
    origin: null,
    overflow: null,
    overlay: null,
    overlinePosition: rt,
    overlineThickness: rt,
    paintOrder: null,
    panose1: null,
    path: null,
    pathLength: rt,
    patternContentUnits: null,
    patternTransform: null,
    patternUnits: null,
    phase: null,
    ping: Qn,
    pitch: null,
    playbackOrder: null,
    pointerEvents: null,
    points: null,
    pointsAtX: rt,
    pointsAtY: rt,
    pointsAtZ: rt,
    preserveAlpha: null,
    preserveAspectRatio: null,
    primitiveUnits: null,
    propagate: null,
    property: Ea,
    r: null,
    radius: null,
    referrerPolicy: null,
    refX: null,
    refY: null,
    rel: Ea,
    rev: Ea,
    renderingIntent: null,
    repeatCount: null,
    repeatDur: null,
    requiredExtensions: Ea,
    requiredFeatures: Ea,
    requiredFonts: Ea,
    requiredFormats: Ea,
    resource: null,
    restart: null,
    result: null,
    rotate: null,
    rx: null,
    ry: null,
    scale: null,
    seed: null,
    shapeRendering: null,
    side: null,
    slope: null,
    snapshotTime: null,
    specularConstant: rt,
    specularExponent: rt,
    spreadMethod: null,
    spacing: null,
    startOffset: null,
    stdDeviation: null,
    stemh: null,
    stemv: null,
    stitchTiles: null,
    stopColor: null,
    stopOpacity: null,
    strikethroughPosition: rt,
    strikethroughThickness: rt,
    string: null,
    stroke: null,
    strokeDashArray: Ea,
    strokeDashOffset: null,
    strokeLineCap: null,
    strokeLineJoin: null,
    strokeMiterLimit: rt,
    strokeOpacity: rt,
    strokeWidth: null,
    style: null,
    surfaceScale: rt,
    syncBehavior: null,
    syncBehaviorDefault: null,
    syncMaster: null,
    syncTolerance: null,
    syncToleranceDefault: null,
    systemLanguage: Ea,
    tabIndex: rt,
    tableValues: null,
    target: null,
    targetX: rt,
    targetY: rt,
    textAnchor: null,
    textDecoration: null,
    textRendering: null,
    textLength: null,
    timelineBegin: null,
    title: null,
    transformBehavior: null,
    type: null,
    typeOf: Ea,
    to: null,
    transform: null,
    transformOrigin: null,
    u1: null,
    u2: null,
    underlinePosition: rt,
    underlineThickness: rt,
    unicode: null,
    unicodeBidi: null,
    unicodeRange: null,
    unitsPerEm: rt,
    values: null,
    vAlphabetic: rt,
    vMathematical: rt,
    vectorEffect: null,
    vHanging: rt,
    vIdeographic: rt,
    version: null,
    vertAdvY: rt,
    vertOriginX: rt,
    vertOriginY: rt,
    viewBox: null,
    viewTarget: null,
    visibility: null,
    width: null,
    widths: null,
    wordSpacing: null,
    writingMode: null,
    x: null,
    x1: null,
    x2: null,
    xChannelSelector: null,
    xHeight: rt,
    y: null,
    y1: null,
    y2: null,
    yChannelSelector: null,
    z: null,
    zoomAndPan: null
  },
  space: "svg",
  transform: VD
}), GD = ym({
  properties: {
    xLinkActuate: null,
    xLinkArcRole: null,
    xLinkHref: null,
    xLinkRole: null,
    xLinkShow: null,
    xLinkTitle: null,
    xLinkType: null
  },
  space: "xlink",
  transform(e, t) {
    return "xlink:" + t.slice(5).toLowerCase();
  }
}), KD = ym({
  attributes: { xmlnsxlink: "xmlns:xlink" },
  properties: { xmlnsXLink: null, xmlns: null },
  space: "xmlns",
  transform: HD
}), YD = ym({
  properties: { xmlBase: null, xmlLang: null, xmlSpace: null },
  space: "xml",
  transform(e, t) {
    return "xml:" + t.slice(3).toLowerCase();
  }
}), uH = {
  classId: "classID",
  dataType: "datatype",
  itemId: "itemID",
  strokeDashArray: "strokeDasharray",
  strokeDashOffset: "strokeDashoffset",
  strokeLineCap: "strokeLinecap",
  strokeLineJoin: "strokeLinejoin",
  strokeMiterLimit: "strokeMiterlimit",
  typeOf: "typeof",
  xLinkActuate: "xlinkActuate",
  xLinkArcRole: "xlinkArcrole",
  xLinkHref: "xlinkHref",
  xLinkRole: "xlinkRole",
  xLinkShow: "xlinkShow",
  xLinkTitle: "xlinkTitle",
  xLinkType: "xlinkType",
  xmlnsXLink: "xmlnsXlink"
}, cH = /[A-Z]/g, zA = /-[a-z]/g, fH = /^data[-\w.:]+$/i;
function dH(e, t) {
  const n = vE(t);
  let r = t, i = ra;
  if (n in e.normal)
    return e.property[e.normal[n]];
  if (n.length > 4 && n.slice(0, 4) === "data" && fH.test(t)) {
    if (t.charAt(4) === "-") {
      const a = t.slice(5).replace(zA, pH);
      r = "data" + a.charAt(0).toUpperCase() + a.slice(1);
    } else {
      const a = t.slice(4);
      if (!zA.test(a)) {
        let o = a.replace(cH, hH);
        o.charAt(0) !== "-" && (o = "-" + o), t = "data" + o;
      }
    }
    i = K5;
  }
  return new i(r, t);
}
function hH(e) {
  return "-" + e.toLowerCase();
}
function pH(e) {
  return e.charAt(1).toUpperCase();
}
const mH = FD([UD, oH, GD, KD, YD], "html"), Y5 = FD([UD, lH, GD, KD, YD], "svg");
function gH(e) {
  return e.join(" ").trim();
}
var Ap = {}, X2, PA;
function yH() {
  if (PA) return X2;
  PA = 1;
  var e = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g, t = /\n/g, n = /^\s*/, r = /^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/, i = /^:\s*/, a = /^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/, o = /^[;\s]*/, u = /^\s+|\s+$/g, c = `
`, f = "/", p = "*", g = "", x = "comment", b = "declaration";
  function _(k, T) {
    if (typeof k != "string")
      throw new TypeError("First argument must be a string");
    if (!k) return [];
    T = T || {};
    var R = 1, N = 1;
    function O(J) {
      var le = J.match(t);
      le && (R += le.length);
      var Q = J.lastIndexOf(c);
      N = ~Q ? J.length - Q : N + J.length;
    }
    function P() {
      var J = { line: R, column: N };
      return function(le) {
        return le.position = new z(J), Y(), le;
      };
    }
    function z(J) {
      this.start = J, this.end = { line: R, column: N }, this.source = T.source;
    }
    z.prototype.content = k;
    function q(J) {
      var le = new Error(
        T.source + ":" + R + ":" + N + ": " + J
      );
      if (le.reason = J, le.filename = T.source, le.line = R, le.column = N, le.source = k, !T.silent) throw le;
    }
    function G(J) {
      var le = J.exec(k);
      if (le) {
        var Q = le[0];
        return O(Q), k = k.slice(Q.length), le;
      }
    }
    function Y() {
      G(n);
    }
    function W(J) {
      var le;
      for (J = J || []; le = F(); )
        le !== !1 && J.push(le);
      return J;
    }
    function F() {
      var J = P();
      if (!(f != k.charAt(0) || p != k.charAt(1))) {
        for (var le = 2; g != k.charAt(le) && (p != k.charAt(le) || f != k.charAt(le + 1)); )
          ++le;
        if (le += 2, g === k.charAt(le - 1))
          return q("End of comment missing");
        var Q = k.slice(2, le - 2);
        return N += 2, O(Q), k = k.slice(le), N += 2, J({
          type: x,
          comment: Q
        });
      }
    }
    function X() {
      var J = P(), le = G(r);
      if (le) {
        if (F(), !G(i)) return q("property missing ':'");
        var Q = G(a), oe = J({
          type: b,
          property: E(le[0].replace(e, g)),
          value: Q ? E(Q[0].replace(e, g)) : g
        });
        return G(o), oe;
      }
    }
    function me() {
      var J = [];
      W(J);
      for (var le; le = X(); )
        le !== !1 && (J.push(le), W(J));
      return J;
    }
    return Y(), me();
  }
  function E(k) {
    return k ? k.replace(u, g) : g;
  }
  return X2 = _, X2;
}
var IA;
function vH() {
  if (IA) return Ap;
  IA = 1;
  var e = Ap && Ap.__importDefault || function(r) {
    return r && r.__esModule ? r : { default: r };
  };
  Object.defineProperty(Ap, "__esModule", { value: !0 }), Ap.default = n;
  const t = e(/* @__PURE__ */ yH());
  function n(r, i) {
    let a = null;
    if (!r || typeof r != "string")
      return a;
    const o = (0, t.default)(r), u = typeof i == "function";
    return o.forEach((c) => {
      if (c.type !== "declaration")
        return;
      const { property: f, value: p } = c;
      u ? i(f, p, c) : p && (a = a || {}, a[f] = p);
    }), a;
  }
  return Ap;
}
var l0 = {}, LA;
function xH() {
  if (LA) return l0;
  LA = 1, Object.defineProperty(l0, "__esModule", { value: !0 }), l0.camelCase = void 0;
  var e = /^--[a-zA-Z0-9_-]+$/, t = /-([a-z])/g, n = /^[^-]+$/, r = /^-(webkit|moz|ms|o|khtml)-/, i = /^-(ms)-/, a = function(f) {
    return !f || n.test(f) || e.test(f);
  }, o = function(f, p) {
    return p.toUpperCase();
  }, u = function(f, p) {
    return "".concat(p, "-");
  }, c = function(f, p) {
    return p === void 0 && (p = {}), a(f) ? f : (f = f.toLowerCase(), p.reactCompat ? f = f.replace(i, u) : f = f.replace(r, u), f.replace(t, o));
  };
  return l0.camelCase = c, l0;
}
var u0, BA;
function bH() {
  if (BA) return u0;
  BA = 1;
  var e = u0 && u0.__importDefault || function(i) {
    return i && i.__esModule ? i : { default: i };
  }, t = e(/* @__PURE__ */ vH()), n = /* @__PURE__ */ xH();
  function r(i, a) {
    var o = {};
    return !i || typeof i != "string" || (0, t.default)(i, function(u, c) {
      u && c && (o[(0, n.camelCase)(u, a)] = c);
    }), o;
  }
  return r.default = r, u0 = r, u0;
}
var wH = /* @__PURE__ */ bH();
const _H = /* @__PURE__ */ uf(wH), WD = ZD("end"), W5 = ZD("start");
function ZD(e) {
  return t;
  function t(n) {
    const r = n && n.position && n.position[e] || {};
    if (typeof r.line == "number" && r.line > 0 && typeof r.column == "number" && r.column > 0)
      return {
        line: r.line,
        column: r.column,
        offset: typeof r.offset == "number" && r.offset > -1 ? r.offset : void 0
      };
  }
}
function SH(e) {
  const t = W5(e), n = WD(e);
  if (t && n)
    return { start: t, end: n };
}
function A0(e) {
  return !e || typeof e != "object" ? "" : "position" in e || "type" in e ? qA(e.position) : "start" in e || "end" in e ? qA(e) : "line" in e || "column" in e ? wE(e) : "";
}
function wE(e) {
  return $A(e && e.line) + ":" + $A(e && e.column);
}
function qA(e) {
  return wE(e && e.start) + "-" + wE(e && e.end);
}
function $A(e) {
  return e && typeof e == "number" ? e : 1;
}
class Xi extends Error {
  /**
   * Create a message for `reason`.
   *
   * >  **Note**: also has obsolete signatures.
   *
   * @overload
   * @param {string} reason
   * @param {Options | null | undefined} [options]
   * @returns
   *
   * @overload
   * @param {string} reason
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {string} reason
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {string} reason
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {string | null | undefined} [origin]
   * @returns
   *
   * @param {Error | VFileMessage | string} causeOrReason
   *   Reason for message, should use markdown.
   * @param {Node | NodeLike | Options | Point | Position | string | null | undefined} [optionsOrParentOrPlace]
   *   Configuration (optional).
   * @param {string | null | undefined} [origin]
   *   Place in code where the message originates (example:
   *   `'my-package:my-rule'` or `'my-rule'`).
   * @returns
   *   Instance of `VFileMessage`.
   */
  // eslint-disable-next-line complexity
  constructor(t, n, r) {
    super(), typeof n == "string" && (r = n, n = void 0);
    let i = "", a = {}, o = !1;
    if (n && ("line" in n && "column" in n ? a = { place: n } : "start" in n && "end" in n ? a = { place: n } : "type" in n ? a = {
      ancestors: [n],
      place: n.position
    } : a = { ...n }), typeof t == "string" ? i = t : !a.cause && t && (o = !0, i = t.message, a.cause = t), !a.ruleId && !a.source && typeof r == "string") {
      const c = r.indexOf(":");
      c === -1 ? a.ruleId = r : (a.source = r.slice(0, c), a.ruleId = r.slice(c + 1));
    }
    if (!a.place && a.ancestors && a.ancestors) {
      const c = a.ancestors[a.ancestors.length - 1];
      c && (a.place = c.position);
    }
    const u = a.place && "start" in a.place ? a.place.start : a.place;
    this.ancestors = a.ancestors || void 0, this.cause = a.cause || void 0, this.column = u ? u.column : void 0, this.fatal = void 0, this.file = "", this.message = i, this.line = u ? u.line : void 0, this.name = A0(a.place) || "1:1", this.place = a.place || void 0, this.reason = this.message, this.ruleId = a.ruleId || void 0, this.source = a.source || void 0, this.stack = o && a.cause && typeof a.cause.stack == "string" ? a.cause.stack : "", this.actual = void 0, this.expected = void 0, this.note = void 0, this.url = void 0;
  }
}
Xi.prototype.file = "";
Xi.prototype.name = "";
Xi.prototype.reason = "";
Xi.prototype.message = "";
Xi.prototype.stack = "";
Xi.prototype.column = void 0;
Xi.prototype.line = void 0;
Xi.prototype.ancestors = void 0;
Xi.prototype.cause = void 0;
Xi.prototype.fatal = void 0;
Xi.prototype.place = void 0;
Xi.prototype.ruleId = void 0;
Xi.prototype.source = void 0;
const Z5 = {}.hasOwnProperty, CH = /* @__PURE__ */ new Map(), EH = /[A-Z]/g, kH = /* @__PURE__ */ new Set(["table", "tbody", "thead", "tfoot", "tr"]), TH = /* @__PURE__ */ new Set(["td", "th"]), XD = "https://github.com/syntax-tree/hast-util-to-jsx-runtime";
function AH(e, t) {
  if (!t || t.Fragment === void 0)
    throw new TypeError("Expected `Fragment` in options");
  const n = t.filePath || void 0;
  let r;
  if (t.development) {
    if (typeof t.jsxDEV != "function")
      throw new TypeError(
        "Expected `jsxDEV` in options when `development: true`"
      );
    r = PH(n, t.jsxDEV);
  } else {
    if (typeof t.jsx != "function")
      throw new TypeError("Expected `jsx` in production options");
    if (typeof t.jsxs != "function")
      throw new TypeError("Expected `jsxs` in production options");
    r = zH(n, t.jsx, t.jsxs);
  }
  const i = {
    Fragment: t.Fragment,
    ancestors: [],
    components: t.components || {},
    create: r,
    elementAttributeNameCase: t.elementAttributeNameCase || "react",
    evaluater: t.createEvaluater ? t.createEvaluater() : void 0,
    filePath: n,
    ignoreInvalidStyle: t.ignoreInvalidStyle || !1,
    passKeys: t.passKeys !== !1,
    passNode: t.passNode || !1,
    schema: t.space === "svg" ? Y5 : mH,
    stylePropertyNameCase: t.stylePropertyNameCase || "dom",
    tableCellAlignToStyle: t.tableCellAlignToStyle !== !1
  }, a = QD(i, e, void 0);
  return a && typeof a != "string" ? a : i.create(
    e,
    i.Fragment,
    { children: a || void 0 },
    void 0
  );
}
function QD(e, t, n) {
  if (t.type === "element")
    return jH(e, t, n);
  if (t.type === "mdxFlowExpression" || t.type === "mdxTextExpression")
    return NH(e, t);
  if (t.type === "mdxJsxFlowElement" || t.type === "mdxJsxTextElement")
    return MH(e, t, n);
  if (t.type === "mdxjsEsm")
    return RH(e, t);
  if (t.type === "root")
    return OH(e, t, n);
  if (t.type === "text")
    return DH(e, t);
}
function jH(e, t, n) {
  const r = e.schema;
  let i = r;
  t.tagName.toLowerCase() === "svg" && r.space === "html" && (i = Y5, e.schema = i), e.ancestors.push(t);
  const a = ez(e, t.tagName, !1), o = IH(e, t);
  let u = Q5(e, t);
  return kH.has(t.tagName) && (u = u.filter(function(c) {
    return typeof c == "string" ? !sH(c) : !0;
  })), JD(e, o, a, t), X5(o, u), e.ancestors.pop(), e.schema = r, e.create(t, a, o, n);
}
function NH(e, t) {
  if (t.data && t.data.estree && e.evaluater) {
    const r = t.data.estree.body[0];
    return (
      /** @type {Child | undefined} */
      e.evaluater.evaluateExpression(r.expression)
    );
  }
  V0(e, t.position);
}
function RH(e, t) {
  if (t.data && t.data.estree && e.evaluater)
    return (
      /** @type {Child | undefined} */
      e.evaluater.evaluateProgram(t.data.estree)
    );
  V0(e, t.position);
}
function MH(e, t, n) {
  const r = e.schema;
  let i = r;
  t.name === "svg" && r.space === "html" && (i = Y5, e.schema = i), e.ancestors.push(t);
  const a = t.name === null ? e.Fragment : ez(e, t.name, !0), o = LH(e, t), u = Q5(e, t);
  return JD(e, o, a, t), X5(o, u), e.ancestors.pop(), e.schema = r, e.create(t, a, o, n);
}
function OH(e, t, n) {
  const r = {};
  return X5(r, Q5(e, t)), e.create(t, e.Fragment, r, n);
}
function DH(e, t) {
  return t.value;
}
function JD(e, t, n, r) {
  typeof n != "string" && n !== e.Fragment && e.passNode && (t.node = r);
}
function X5(e, t) {
  if (t.length > 0) {
    const n = t.length > 1 ? t : t[0];
    n && (e.children = n);
  }
}
function zH(e, t, n) {
  return r;
  function r(i, a, o, u) {
    const f = Array.isArray(o.children) ? n : t;
    return u ? f(a, o, u) : f(a, o);
  }
}
function PH(e, t) {
  return n;
  function n(r, i, a, o) {
    const u = Array.isArray(a.children), c = W5(r);
    return t(
      i,
      a,
      o,
      u,
      {
        columnNumber: c ? c.column - 1 : void 0,
        fileName: e,
        lineNumber: c ? c.line : void 0
      },
      void 0
    );
  }
}
function IH(e, t) {
  const n = {};
  let r, i;
  for (i in t.properties)
    if (i !== "children" && Z5.call(t.properties, i)) {
      const a = BH(e, i, t.properties[i]);
      if (a) {
        const [o, u] = a;
        e.tableCellAlignToStyle && o === "align" && typeof u == "string" && TH.has(t.tagName) ? r = u : n[o] = u;
      }
    }
  if (r) {
    const a = (
      /** @type {Style} */
      n.style || (n.style = {})
    );
    a[e.stylePropertyNameCase === "css" ? "text-align" : "textAlign"] = r;
  }
  return n;
}
function LH(e, t) {
  const n = {};
  for (const r of t.attributes)
    if (r.type === "mdxJsxExpressionAttribute")
      if (r.data && r.data.estree && e.evaluater) {
        const u = r.data.estree.body[0].expression.properties[0];
        Object.assign(
          n,
          e.evaluater.evaluateExpression(u.argument)
        );
      } else
        V0(e, t.position);
    else {
      const i = r.name;
      let a;
      if (r.value && typeof r.value == "object")
        if (r.value.data && r.value.data.estree && e.evaluater) {
          const u = r.value.data.estree.body[0];
          a = e.evaluater.evaluateExpression(u.expression);
        } else
          V0(e, t.position);
      else
        a = r.value === null ? !0 : r.value;
      n[i] = /** @type {Props[keyof Props]} */
      a;
    }
  return n;
}
function Q5(e, t) {
  const n = [];
  let r = -1;
  const i = e.passKeys ? /* @__PURE__ */ new Map() : CH;
  for (; ++r < t.children.length; ) {
    const a = t.children[r];
    let o;
    if (e.passKeys) {
      const c = a.type === "element" ? a.tagName : a.type === "mdxJsxFlowElement" || a.type === "mdxJsxTextElement" ? a.name : void 0;
      if (c) {
        const f = i.get(c) || 0;
        o = c + "-" + f, i.set(c, f + 1);
      }
    }
    const u = QD(e, a, o);
    u !== void 0 && n.push(u);
  }
  return n;
}
function BH(e, t, n) {
  const r = dH(e.schema, t);
  if (!(n == null || typeof n == "number" && Number.isNaN(n))) {
    if (Array.isArray(n) && (n = r.commaSeparated ? eH(n) : gH(n)), r.property === "style") {
      let i = typeof n == "object" ? n : qH(e, String(n));
      return e.stylePropertyNameCase === "css" && (i = $H(i)), ["style", i];
    }
    return [
      e.elementAttributeNameCase === "react" && r.space ? uH[r.property] || r.property : r.attribute,
      n
    ];
  }
}
function qH(e, t) {
  try {
    return _H(t, { reactCompat: !0 });
  } catch (n) {
    if (e.ignoreInvalidStyle)
      return {};
    const r = (
      /** @type {Error} */
      n
    ), i = new Xi("Cannot parse `style` attribute", {
      ancestors: e.ancestors,
      cause: r,
      ruleId: "style",
      source: "hast-util-to-jsx-runtime"
    });
    throw i.file = e.filePath || void 0, i.url = XD + "#cannot-parse-style-attribute", i;
  }
}
function ez(e, t, n) {
  let r;
  if (!n)
    r = { type: "Literal", value: t };
  else if (t.includes(".")) {
    const i = t.split(".");
    let a = -1, o;
    for (; ++a < i.length; ) {
      const u = MA(i[a]) ? { type: "Identifier", name: i[a] } : { type: "Literal", value: i[a] };
      o = o ? {
        type: "MemberExpression",
        object: o,
        property: u,
        computed: !!(a && u.type === "Literal"),
        optional: !1
      } : u;
    }
    r = o;
  } else
    r = MA(t) && !/^[a-z]/.test(t) ? { type: "Identifier", name: t } : { type: "Literal", value: t };
  if (r.type === "Literal") {
    const i = (
      /** @type {string | number} */
      r.value
    );
    return Z5.call(e.components, i) ? e.components[i] : i;
  }
  if (e.evaluater)
    return e.evaluater.evaluateExpression(r);
  V0(e);
}
function V0(e, t) {
  const n = new Xi(
    "Cannot handle MDX estrees without `createEvaluater`",
    {
      ancestors: e.ancestors,
      place: t,
      ruleId: "mdx-estree",
      source: "hast-util-to-jsx-runtime"
    }
  );
  throw n.file = e.filePath || void 0, n.url = XD + "#cannot-handle-mdx-estrees-without-createevaluater", n;
}
function $H(e) {
  const t = {};
  let n;
  for (n in e)
    Z5.call(e, n) && (t[FH(n)] = e[n]);
  return t;
}
function FH(e) {
  let t = e.replace(EH, UH);
  return t.slice(0, 3) === "ms-" && (t = "-" + t), t;
}
function UH(e) {
  return "-" + e.toLowerCase();
}
const Q2 = {
  action: ["form"],
  cite: ["blockquote", "del", "ins", "q"],
  data: ["object"],
  formAction: ["button", "input"],
  href: ["a", "area", "base", "link"],
  icon: ["menuitem"],
  itemId: null,
  manifest: ["html"],
  ping: ["a", "area"],
  poster: ["video"],
  src: [
    "audio",
    "embed",
    "iframe",
    "img",
    "input",
    "script",
    "source",
    "track",
    "video"
  ]
}, VH = {};
function J5(e, t) {
  const n = VH, r = typeof n.includeImageAlt == "boolean" ? n.includeImageAlt : !0, i = typeof n.includeHtml == "boolean" ? n.includeHtml : !0;
  return tz(e, r, i);
}
function tz(e, t, n) {
  if (HH(e)) {
    if ("value" in e)
      return e.type === "html" && !n ? "" : e.value;
    if (t && "alt" in e && e.alt)
      return e.alt;
    if ("children" in e)
      return FA(e.children, t, n);
  }
  return Array.isArray(e) ? FA(e, t, n) : "";
}
function FA(e, t, n) {
  const r = [];
  let i = -1;
  for (; ++i < e.length; )
    r[i] = tz(e[i], t, n);
  return r.join("");
}
function HH(e) {
  return !!(e && typeof e == "object");
}
const UA = document.createElement("i");
function ek(e) {
  const t = "&" + e + ";";
  UA.innerHTML = t;
  const n = UA.textContent;
  return (
    // @ts-expect-error: TypeScript is wrong that `textContent` on elements can
    // yield `null`.
    n.charCodeAt(n.length - 1) === 59 && e !== "semi" || n === t ? !1 : n
  );
}
function Aa(e, t, n, r) {
  const i = e.length;
  let a = 0, o;
  if (t < 0 ? t = -t > i ? 0 : i + t : t = t > i ? i : t, n = n > 0 ? n : 0, r.length < 1e4)
    o = Array.from(r), o.unshift(t, n), e.splice(...o);
  else
    for (n && e.splice(t, n); a < r.length; )
      o = r.slice(a, a + 1e4), o.unshift(t, 0), e.splice(...o), a += 1e4, t += 1e4;
}
function Ya(e, t) {
  return e.length > 0 ? (Aa(e, e.length, 0, t), e) : t;
}
const VA = {}.hasOwnProperty;
function nz(e) {
  const t = {};
  let n = -1;
  for (; ++n < e.length; )
    GH(t, e[n]);
  return t;
}
function GH(e, t) {
  let n;
  for (n in t) {
    const i = (VA.call(e, n) ? e[n] : void 0) || (e[n] = {}), a = t[n];
    let o;
    if (a)
      for (o in a) {
        VA.call(i, o) || (i[o] = []);
        const u = a[o];
        KH(
          // @ts-expect-error Looks like a list.
          i[o],
          Array.isArray(u) ? u : u ? [u] : []
        );
      }
  }
}
function KH(e, t) {
  let n = -1;
  const r = [];
  for (; ++n < t.length; )
    (t[n].add === "after" ? e : r).push(t[n]);
  Aa(e, 0, 0, r);
}
function rz(e, t) {
  const n = Number.parseInt(e, t);
  return (
    // C0 except for HT, LF, FF, CR, space.
    n < 9 || n === 11 || n > 13 && n < 32 || // Control character (DEL) of C0, and C1 controls.
    n > 126 && n < 160 || // Lone high surrogates and low surrogates.
    n > 55295 && n < 57344 || // Noncharacters.
    n > 64975 && n < 65008 || /* eslint-disable no-bitwise */
    (n & 65535) === 65535 || (n & 65535) === 65534 || /* eslint-enable no-bitwise */
    // Out of range
    n > 1114111 ? "" : String.fromCodePoint(n)
  );
}
function Vo(e) {
  return e.replace(/[\t\n\r ]+/g, " ").replace(/^ | $/g, "").toLowerCase().toUpperCase();
}
const xs = cf(/[A-Za-z]/), Wi = cf(/[\dA-Za-z]/), YH = cf(/[#-'*+\--9=?A-Z^-~]/);
function vx(e) {
  return (
    // Special whitespace codes (which have negative values), C0 and Control
    // character DEL
    e !== null && (e < 32 || e === 127)
  );
}
const _E = cf(/\d/), WH = cf(/[\dA-Fa-f]/), ZH = cf(/[!-/:-@[-`{-~]/);
function Mt(e) {
  return e !== null && e < -2;
}
function Wn(e) {
  return e !== null && (e < 0 || e === 32);
}
function ln(e) {
  return e === -2 || e === -1 || e === 32;
}
const rb = cf(new RegExp("\\p{P}|\\p{S}", "u")), Xd = cf(/\s/);
function cf(e) {
  return t;
  function t(n) {
    return n !== null && n > -1 && e.test(String.fromCharCode(n));
  }
}
function vm(e) {
  const t = [];
  let n = -1, r = 0, i = 0;
  for (; ++n < e.length; ) {
    const a = e.charCodeAt(n);
    let o = "";
    if (a === 37 && Wi(e.charCodeAt(n + 1)) && Wi(e.charCodeAt(n + 2)))
      i = 2;
    else if (a < 128)
      /[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a)) || (o = String.fromCharCode(a));
    else if (a > 55295 && a < 57344) {
      const u = e.charCodeAt(n + 1);
      a < 56320 && u > 56319 && u < 57344 ? (o = String.fromCharCode(a, u), i = 1) : o = "";
    } else
      o = String.fromCharCode(a);
    o && (t.push(e.slice(r, n), encodeURIComponent(o)), r = n + i + 1, o = ""), i && (n += i, i = 0);
  }
  return t.join("") + e.slice(r);
}
function gn(e, t, n, r) {
  const i = r ? r - 1 : Number.POSITIVE_INFINITY;
  let a = 0;
  return o;
  function o(c) {
    return ln(c) ? (e.enter(n), u(c)) : t(c);
  }
  function u(c) {
    return ln(c) && a++ < i ? (e.consume(c), u) : (e.exit(n), t(c));
  }
}
const XH = {
  tokenize: QH
};
function QH(e) {
  const t = e.attempt(this.parser.constructs.contentInitial, r, i);
  let n;
  return t;
  function r(u) {
    if (u === null) {
      e.consume(u);
      return;
    }
    return e.enter("lineEnding"), e.consume(u), e.exit("lineEnding"), gn(e, t, "linePrefix");
  }
  function i(u) {
    return e.enter("paragraph"), a(u);
  }
  function a(u) {
    const c = e.enter("chunkText", {
      contentType: "text",
      previous: n
    });
    return n && (n.next = c), n = c, o(u);
  }
  function o(u) {
    if (u === null) {
      e.exit("chunkText"), e.exit("paragraph"), e.consume(u);
      return;
    }
    return Mt(u) ? (e.consume(u), e.exit("chunkText"), a) : (e.consume(u), o);
  }
}
const JH = {
  tokenize: eG
}, HA = {
  tokenize: tG
};
function eG(e) {
  const t = this, n = [];
  let r = 0, i, a, o;
  return u;
  function u(N) {
    if (r < n.length) {
      const O = n[r];
      return t.containerState = O[1], e.attempt(O[0].continuation, c, f)(N);
    }
    return f(N);
  }
  function c(N) {
    if (r++, t.containerState._closeFlow) {
      t.containerState._closeFlow = void 0, i && R();
      const O = t.events.length;
      let P = O, z;
      for (; P--; )
        if (t.events[P][0] === "exit" && t.events[P][1].type === "chunkFlow") {
          z = t.events[P][1].end;
          break;
        }
      T(r);
      let q = O;
      for (; q < t.events.length; )
        t.events[q][1].end = {
          ...z
        }, q++;
      return Aa(t.events, P + 1, 0, t.events.slice(O)), t.events.length = q, f(N);
    }
    return u(N);
  }
  function f(N) {
    if (r === n.length) {
      if (!i)
        return x(N);
      if (i.currentConstruct && i.currentConstruct.concrete)
        return _(N);
      t.interrupt = !!(i.currentConstruct && !i._gfmTableDynamicInterruptHack);
    }
    return t.containerState = {}, e.check(HA, p, g)(N);
  }
  function p(N) {
    return i && R(), T(r), x(N);
  }
  function g(N) {
    return t.parser.lazy[t.now().line] = r !== n.length, o = t.now().offset, _(N);
  }
  function x(N) {
    return t.containerState = {}, e.attempt(HA, b, _)(N);
  }
  function b(N) {
    return r++, n.push([t.currentConstruct, t.containerState]), x(N);
  }
  function _(N) {
    if (N === null) {
      i && R(), T(0), e.consume(N);
      return;
    }
    return i = i || t.parser.flow(t.now()), e.enter("chunkFlow", {
      _tokenizer: i,
      contentType: "flow",
      previous: a
    }), E(N);
  }
  function E(N) {
    if (N === null) {
      k(e.exit("chunkFlow"), !0), T(0), e.consume(N);
      return;
    }
    return Mt(N) ? (e.consume(N), k(e.exit("chunkFlow")), r = 0, t.interrupt = void 0, u) : (e.consume(N), E);
  }
  function k(N, O) {
    const P = t.sliceStream(N);
    if (O && P.push(null), N.previous = a, a && (a.next = N), a = N, i.defineSkip(N.start), i.write(P), t.parser.lazy[N.start.line]) {
      let z = i.events.length;
      for (; z--; )
        if (
          // The token starts before the line ending
          i.events[z][1].start.offset < o && // and either is not ended yet
          (!i.events[z][1].end || // or ends after it.
          i.events[z][1].end.offset > o)
        )
          return;
      const q = t.events.length;
      let G = q, Y, W;
      for (; G--; )
        if (t.events[G][0] === "exit" && t.events[G][1].type === "chunkFlow") {
          if (Y) {
            W = t.events[G][1].end;
            break;
          }
          Y = !0;
        }
      for (T(r), z = q; z < t.events.length; )
        t.events[z][1].end = {
          ...W
        }, z++;
      Aa(t.events, G + 1, 0, t.events.slice(q)), t.events.length = z;
    }
  }
  function T(N) {
    let O = n.length;
    for (; O-- > N; ) {
      const P = n[O];
      t.containerState = P[1], P[0].exit.call(t, e);
    }
    n.length = N;
  }
  function R() {
    i.write([null]), a = void 0, i = void 0, t.containerState._closeFlow = void 0;
  }
}
function tG(e, t, n) {
  return gn(e, e.attempt(this.parser.constructs.document, t, n), "linePrefix", this.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4);
}
function rm(e) {
  if (e === null || Wn(e) || Xd(e))
    return 1;
  if (rb(e))
    return 2;
}
function ib(e, t, n) {
  const r = [];
  let i = -1;
  for (; ++i < e.length; ) {
    const a = e[i].resolveAll;
    a && !r.includes(a) && (t = a(t, n), r.push(a));
  }
  return t;
}
const SE = {
  name: "attention",
  resolveAll: nG,
  tokenize: rG
};
function nG(e, t) {
  let n = -1, r, i, a, o, u, c, f, p;
  for (; ++n < e.length; )
    if (e[n][0] === "enter" && e[n][1].type === "attentionSequence" && e[n][1]._close) {
      for (r = n; r--; )
        if (e[r][0] === "exit" && e[r][1].type === "attentionSequence" && e[r][1]._open && // If the markers are the same:
        t.sliceSerialize(e[r][1]).charCodeAt(0) === t.sliceSerialize(e[n][1]).charCodeAt(0)) {
          if ((e[r][1]._close || e[n][1]._open) && (e[n][1].end.offset - e[n][1].start.offset) % 3 && !((e[r][1].end.offset - e[r][1].start.offset + e[n][1].end.offset - e[n][1].start.offset) % 3))
            continue;
          c = e[r][1].end.offset - e[r][1].start.offset > 1 && e[n][1].end.offset - e[n][1].start.offset > 1 ? 2 : 1;
          const g = {
            ...e[r][1].end
          }, x = {
            ...e[n][1].start
          };
          GA(g, -c), GA(x, c), o = {
            type: c > 1 ? "strongSequence" : "emphasisSequence",
            start: g,
            end: {
              ...e[r][1].end
            }
          }, u = {
            type: c > 1 ? "strongSequence" : "emphasisSequence",
            start: {
              ...e[n][1].start
            },
            end: x
          }, a = {
            type: c > 1 ? "strongText" : "emphasisText",
            start: {
              ...e[r][1].end
            },
            end: {
              ...e[n][1].start
            }
          }, i = {
            type: c > 1 ? "strong" : "emphasis",
            start: {
              ...o.start
            },
            end: {
              ...u.end
            }
          }, e[r][1].end = {
            ...o.start
          }, e[n][1].start = {
            ...u.end
          }, f = [], e[r][1].end.offset - e[r][1].start.offset && (f = Ya(f, [["enter", e[r][1], t], ["exit", e[r][1], t]])), f = Ya(f, [["enter", i, t], ["enter", o, t], ["exit", o, t], ["enter", a, t]]), f = Ya(f, ib(t.parser.constructs.insideSpan.null, e.slice(r + 1, n), t)), f = Ya(f, [["exit", a, t], ["enter", u, t], ["exit", u, t], ["exit", i, t]]), e[n][1].end.offset - e[n][1].start.offset ? (p = 2, f = Ya(f, [["enter", e[n][1], t], ["exit", e[n][1], t]])) : p = 0, Aa(e, r - 1, n - r + 3, f), n = r + f.length - p - 2;
          break;
        }
    }
  for (n = -1; ++n < e.length; )
    e[n][1].type === "attentionSequence" && (e[n][1].type = "data");
  return e;
}
function rG(e, t) {
  const n = this.parser.constructs.attentionMarkers.null, r = this.previous, i = rm(r);
  let a;
  return o;
  function o(c) {
    return a = c, e.enter("attentionSequence"), u(c);
  }
  function u(c) {
    if (c === a)
      return e.consume(c), u;
    const f = e.exit("attentionSequence"), p = rm(c), g = !p || p === 2 && i || n.includes(c), x = !i || i === 2 && p || n.includes(r);
    return f._open = !!(a === 42 ? g : g && (i || !x)), f._close = !!(a === 42 ? x : x && (p || !g)), t(c);
  }
}
function GA(e, t) {
  e.column += t, e.offset += t, e._bufferIndex += t;
}
const iG = {
  name: "autolink",
  tokenize: sG
};
function sG(e, t, n) {
  let r = 0;
  return i;
  function i(b) {
    return e.enter("autolink"), e.enter("autolinkMarker"), e.consume(b), e.exit("autolinkMarker"), e.enter("autolinkProtocol"), a;
  }
  function a(b) {
    return xs(b) ? (e.consume(b), o) : b === 64 ? n(b) : f(b);
  }
  function o(b) {
    return b === 43 || b === 45 || b === 46 || Wi(b) ? (r = 1, u(b)) : f(b);
  }
  function u(b) {
    return b === 58 ? (e.consume(b), r = 0, c) : (b === 43 || b === 45 || b === 46 || Wi(b)) && r++ < 32 ? (e.consume(b), u) : (r = 0, f(b));
  }
  function c(b) {
    return b === 62 ? (e.exit("autolinkProtocol"), e.enter("autolinkMarker"), e.consume(b), e.exit("autolinkMarker"), e.exit("autolink"), t) : b === null || b === 32 || b === 60 || vx(b) ? n(b) : (e.consume(b), c);
  }
  function f(b) {
    return b === 64 ? (e.consume(b), p) : YH(b) ? (e.consume(b), f) : n(b);
  }
  function p(b) {
    return Wi(b) ? g(b) : n(b);
  }
  function g(b) {
    return b === 46 ? (e.consume(b), r = 0, p) : b === 62 ? (e.exit("autolinkProtocol").type = "autolinkEmail", e.enter("autolinkMarker"), e.consume(b), e.exit("autolinkMarker"), e.exit("autolink"), t) : x(b);
  }
  function x(b) {
    if ((b === 45 || Wi(b)) && r++ < 63) {
      const _ = b === 45 ? x : g;
      return e.consume(b), _;
    }
    return n(b);
  }
}
const yy = {
  partial: !0,
  tokenize: aG
};
function aG(e, t, n) {
  return r;
  function r(a) {
    return ln(a) ? gn(e, i, "linePrefix")(a) : i(a);
  }
  function i(a) {
    return a === null || Mt(a) ? t(a) : n(a);
  }
}
const iz = {
  continuation: {
    tokenize: lG
  },
  exit: uG,
  name: "blockQuote",
  tokenize: oG
};
function oG(e, t, n) {
  const r = this;
  return i;
  function i(o) {
    if (o === 62) {
      const u = r.containerState;
      return u.open || (e.enter("blockQuote", {
        _container: !0
      }), u.open = !0), e.enter("blockQuotePrefix"), e.enter("blockQuoteMarker"), e.consume(o), e.exit("blockQuoteMarker"), a;
    }
    return n(o);
  }
  function a(o) {
    return ln(o) ? (e.enter("blockQuotePrefixWhitespace"), e.consume(o), e.exit("blockQuotePrefixWhitespace"), e.exit("blockQuotePrefix"), t) : (e.exit("blockQuotePrefix"), t(o));
  }
}
function lG(e, t, n) {
  const r = this;
  return i;
  function i(o) {
    return ln(o) ? gn(e, a, "linePrefix", r.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(o) : a(o);
  }
  function a(o) {
    return e.attempt(iz, t, n)(o);
  }
}
function uG(e) {
  e.exit("blockQuote");
}
const sz = {
  name: "characterEscape",
  tokenize: cG
};
function cG(e, t, n) {
  return r;
  function r(a) {
    return e.enter("characterEscape"), e.enter("escapeMarker"), e.consume(a), e.exit("escapeMarker"), i;
  }
  function i(a) {
    return ZH(a) ? (e.enter("characterEscapeValue"), e.consume(a), e.exit("characterEscapeValue"), e.exit("characterEscape"), t) : n(a);
  }
}
const az = {
  name: "characterReference",
  tokenize: fG
};
function fG(e, t, n) {
  const r = this;
  let i = 0, a, o;
  return u;
  function u(g) {
    return e.enter("characterReference"), e.enter("characterReferenceMarker"), e.consume(g), e.exit("characterReferenceMarker"), c;
  }
  function c(g) {
    return g === 35 ? (e.enter("characterReferenceMarkerNumeric"), e.consume(g), e.exit("characterReferenceMarkerNumeric"), f) : (e.enter("characterReferenceValue"), a = 31, o = Wi, p(g));
  }
  function f(g) {
    return g === 88 || g === 120 ? (e.enter("characterReferenceMarkerHexadecimal"), e.consume(g), e.exit("characterReferenceMarkerHexadecimal"), e.enter("characterReferenceValue"), a = 6, o = WH, p) : (e.enter("characterReferenceValue"), a = 7, o = _E, p(g));
  }
  function p(g) {
    if (g === 59 && i) {
      const x = e.exit("characterReferenceValue");
      return o === Wi && !ek(r.sliceSerialize(x)) ? n(g) : (e.enter("characterReferenceMarker"), e.consume(g), e.exit("characterReferenceMarker"), e.exit("characterReference"), t);
    }
    return o(g) && i++ < a ? (e.consume(g), p) : n(g);
  }
}
const KA = {
  partial: !0,
  tokenize: hG
}, YA = {
  concrete: !0,
  name: "codeFenced",
  tokenize: dG
};
function dG(e, t, n) {
  const r = this, i = {
    partial: !0,
    tokenize: P
  };
  let a = 0, o = 0, u;
  return c;
  function c(z) {
    return f(z);
  }
  function f(z) {
    const q = r.events[r.events.length - 1];
    return a = q && q[1].type === "linePrefix" ? q[2].sliceSerialize(q[1], !0).length : 0, u = z, e.enter("codeFenced"), e.enter("codeFencedFence"), e.enter("codeFencedFenceSequence"), p(z);
  }
  function p(z) {
    return z === u ? (o++, e.consume(z), p) : o < 3 ? n(z) : (e.exit("codeFencedFenceSequence"), ln(z) ? gn(e, g, "whitespace")(z) : g(z));
  }
  function g(z) {
    return z === null || Mt(z) ? (e.exit("codeFencedFence"), r.interrupt ? t(z) : e.check(KA, E, O)(z)) : (e.enter("codeFencedFenceInfo"), e.enter("chunkString", {
      contentType: "string"
    }), x(z));
  }
  function x(z) {
    return z === null || Mt(z) ? (e.exit("chunkString"), e.exit("codeFencedFenceInfo"), g(z)) : ln(z) ? (e.exit("chunkString"), e.exit("codeFencedFenceInfo"), gn(e, b, "whitespace")(z)) : z === 96 && z === u ? n(z) : (e.consume(z), x);
  }
  function b(z) {
    return z === null || Mt(z) ? g(z) : (e.enter("codeFencedFenceMeta"), e.enter("chunkString", {
      contentType: "string"
    }), _(z));
  }
  function _(z) {
    return z === null || Mt(z) ? (e.exit("chunkString"), e.exit("codeFencedFenceMeta"), g(z)) : z === 96 && z === u ? n(z) : (e.consume(z), _);
  }
  function E(z) {
    return e.attempt(i, O, k)(z);
  }
  function k(z) {
    return e.enter("lineEnding"), e.consume(z), e.exit("lineEnding"), T;
  }
  function T(z) {
    return a > 0 && ln(z) ? gn(e, R, "linePrefix", a + 1)(z) : R(z);
  }
  function R(z) {
    return z === null || Mt(z) ? e.check(KA, E, O)(z) : (e.enter("codeFlowValue"), N(z));
  }
  function N(z) {
    return z === null || Mt(z) ? (e.exit("codeFlowValue"), R(z)) : (e.consume(z), N);
  }
  function O(z) {
    return e.exit("codeFenced"), t(z);
  }
  function P(z, q, G) {
    let Y = 0;
    return W;
    function W(le) {
      return z.enter("lineEnding"), z.consume(le), z.exit("lineEnding"), F;
    }
    function F(le) {
      return z.enter("codeFencedFence"), ln(le) ? gn(z, X, "linePrefix", r.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(le) : X(le);
    }
    function X(le) {
      return le === u ? (z.enter("codeFencedFenceSequence"), me(le)) : G(le);
    }
    function me(le) {
      return le === u ? (Y++, z.consume(le), me) : Y >= o ? (z.exit("codeFencedFenceSequence"), ln(le) ? gn(z, J, "whitespace")(le) : J(le)) : G(le);
    }
    function J(le) {
      return le === null || Mt(le) ? (z.exit("codeFencedFence"), q(le)) : G(le);
    }
  }
}
function hG(e, t, n) {
  const r = this;
  return i;
  function i(o) {
    return o === null ? n(o) : (e.enter("lineEnding"), e.consume(o), e.exit("lineEnding"), a);
  }
  function a(o) {
    return r.parser.lazy[r.now().line] ? n(o) : t(o);
  }
}
const J2 = {
  name: "codeIndented",
  tokenize: mG
}, pG = {
  partial: !0,
  tokenize: gG
};
function mG(e, t, n) {
  const r = this;
  return i;
  function i(f) {
    return e.enter("codeIndented"), gn(e, a, "linePrefix", 5)(f);
  }
  function a(f) {
    const p = r.events[r.events.length - 1];
    return p && p[1].type === "linePrefix" && p[2].sliceSerialize(p[1], !0).length >= 4 ? o(f) : n(f);
  }
  function o(f) {
    return f === null ? c(f) : Mt(f) ? e.attempt(pG, o, c)(f) : (e.enter("codeFlowValue"), u(f));
  }
  function u(f) {
    return f === null || Mt(f) ? (e.exit("codeFlowValue"), o(f)) : (e.consume(f), u);
  }
  function c(f) {
    return e.exit("codeIndented"), t(f);
  }
}
function gG(e, t, n) {
  const r = this;
  return i;
  function i(o) {
    return r.parser.lazy[r.now().line] ? n(o) : Mt(o) ? (e.enter("lineEnding"), e.consume(o), e.exit("lineEnding"), i) : gn(e, a, "linePrefix", 5)(o);
  }
  function a(o) {
    const u = r.events[r.events.length - 1];
    return u && u[1].type === "linePrefix" && u[2].sliceSerialize(u[1], !0).length >= 4 ? t(o) : Mt(o) ? i(o) : n(o);
  }
}
const yG = {
  name: "codeText",
  previous: xG,
  resolve: vG,
  tokenize: bG
};
function vG(e) {
  let t = e.length - 4, n = 3, r, i;
  if ((e[n][1].type === "lineEnding" || e[n][1].type === "space") && (e[t][1].type === "lineEnding" || e[t][1].type === "space")) {
    for (r = n; ++r < t; )
      if (e[r][1].type === "codeTextData") {
        e[n][1].type = "codeTextPadding", e[t][1].type = "codeTextPadding", n += 2, t -= 2;
        break;
      }
  }
  for (r = n - 1, t++; ++r <= t; )
    i === void 0 ? r !== t && e[r][1].type !== "lineEnding" && (i = r) : (r === t || e[r][1].type === "lineEnding") && (e[i][1].type = "codeTextData", r !== i + 2 && (e[i][1].end = e[r - 1][1].end, e.splice(i + 2, r - i - 2), t -= r - i - 2, r = i + 2), i = void 0);
  return e;
}
function xG(e) {
  return e !== 96 || this.events[this.events.length - 1][1].type === "characterEscape";
}
function bG(e, t, n) {
  let r = 0, i, a;
  return o;
  function o(g) {
    return e.enter("codeText"), e.enter("codeTextSequence"), u(g);
  }
  function u(g) {
    return g === 96 ? (e.consume(g), r++, u) : (e.exit("codeTextSequence"), c(g));
  }
  function c(g) {
    return g === null ? n(g) : g === 32 ? (e.enter("space"), e.consume(g), e.exit("space"), c) : g === 96 ? (a = e.enter("codeTextSequence"), i = 0, p(g)) : Mt(g) ? (e.enter("lineEnding"), e.consume(g), e.exit("lineEnding"), c) : (e.enter("codeTextData"), f(g));
  }
  function f(g) {
    return g === null || g === 32 || g === 96 || Mt(g) ? (e.exit("codeTextData"), c(g)) : (e.consume(g), f);
  }
  function p(g) {
    return g === 96 ? (e.consume(g), i++, p) : i === r ? (e.exit("codeTextSequence"), e.exit("codeText"), t(g)) : (a.type = "codeTextData", f(g));
  }
}
class wG {
  /**
   * @param {ReadonlyArray<T> | null | undefined} [initial]
   *   Initial items (optional).
   * @returns
   *   Splice buffer.
   */
  constructor(t) {
    this.left = t ? [...t] : [], this.right = [];
  }
  /**
   * Array access;
   * does not move the cursor.
   *
   * @param {number} index
   *   Index.
   * @return {T}
   *   Item.
   */
  get(t) {
    if (t < 0 || t >= this.left.length + this.right.length)
      throw new RangeError("Cannot access index `" + t + "` in a splice buffer of size `" + (this.left.length + this.right.length) + "`");
    return t < this.left.length ? this.left[t] : this.right[this.right.length - t + this.left.length - 1];
  }
  /**
   * The length of the splice buffer, one greater than the largest index in the
   * array.
   */
  get length() {
    return this.left.length + this.right.length;
  }
  /**
   * Remove and return `list[0]`;
   * moves the cursor to `0`.
   *
   * @returns {T | undefined}
   *   Item, optional.
   */
  shift() {
    return this.setCursor(0), this.right.pop();
  }
  /**
   * Slice the buffer to get an array;
   * does not move the cursor.
   *
   * @param {number} start
   *   Start.
   * @param {number | null | undefined} [end]
   *   End (optional).
   * @returns {Array<T>}
   *   Array of items.
   */
  slice(t, n) {
    const r = n ?? Number.POSITIVE_INFINITY;
    return r < this.left.length ? this.left.slice(t, r) : t > this.left.length ? this.right.slice(this.right.length - r + this.left.length, this.right.length - t + this.left.length).reverse() : this.left.slice(t).concat(this.right.slice(this.right.length - r + this.left.length).reverse());
  }
  /**
   * Mimics the behavior of Array.prototype.splice() except for the change of
   * interface necessary to avoid segfaults when patching in very large arrays.
   *
   * This operation moves cursor is moved to `start` and results in the cursor
   * placed after any inserted items.
   *
   * @param {number} start
   *   Start;
   *   zero-based index at which to start changing the array;
   *   negative numbers count backwards from the end of the array and values
   *   that are out-of bounds are clamped to the appropriate end of the array.
   * @param {number | null | undefined} [deleteCount=0]
   *   Delete count (default: `0`);
   *   maximum number of elements to delete, starting from start.
   * @param {Array<T> | null | undefined} [items=[]]
   *   Items to include in place of the deleted items (default: `[]`).
   * @return {Array<T>}
   *   Any removed items.
   */
  splice(t, n, r) {
    const i = n || 0;
    this.setCursor(Math.trunc(t));
    const a = this.right.splice(this.right.length - i, Number.POSITIVE_INFINITY);
    return r && c0(this.left, r), a.reverse();
  }
  /**
   * Remove and return the highest-numbered item in the array, so
   * `list[list.length - 1]`;
   * Moves the cursor to `length`.
   *
   * @returns {T | undefined}
   *   Item, optional.
   */
  pop() {
    return this.setCursor(Number.POSITIVE_INFINITY), this.left.pop();
  }
  /**
   * Inserts a single item to the high-numbered side of the array;
   * moves the cursor to `length`.
   *
   * @param {T} item
   *   Item.
   * @returns {undefined}
   *   Nothing.
   */
  push(t) {
    this.setCursor(Number.POSITIVE_INFINITY), this.left.push(t);
  }
  /**
   * Inserts many items to the high-numbered side of the array.
   * Moves the cursor to `length`.
   *
   * @param {Array<T>} items
   *   Items.
   * @returns {undefined}
   *   Nothing.
   */
  pushMany(t) {
    this.setCursor(Number.POSITIVE_INFINITY), c0(this.left, t);
  }
  /**
   * Inserts a single item to the low-numbered side of the array;
   * Moves the cursor to `0`.
   *
   * @param {T} item
   *   Item.
   * @returns {undefined}
   *   Nothing.
   */
  unshift(t) {
    this.setCursor(0), this.right.push(t);
  }
  /**
   * Inserts many items to the low-numbered side of the array;
   * moves the cursor to `0`.
   *
   * @param {Array<T>} items
   *   Items.
   * @returns {undefined}
   *   Nothing.
   */
  unshiftMany(t) {
    this.setCursor(0), c0(this.right, t.reverse());
  }
  /**
   * Move the cursor to a specific position in the array. Requires
   * time proportional to the distance moved.
   *
   * If `n < 0`, the cursor will end up at the beginning.
   * If `n > length`, the cursor will end up at the end.
   *
   * @param {number} n
   *   Position.
   * @return {undefined}
   *   Nothing.
   */
  setCursor(t) {
    if (!(t === this.left.length || t > this.left.length && this.right.length === 0 || t < 0 && this.left.length === 0))
      if (t < this.left.length) {
        const n = this.left.splice(t, Number.POSITIVE_INFINITY);
        c0(this.right, n.reverse());
      } else {
        const n = this.right.splice(this.left.length + this.right.length - t, Number.POSITIVE_INFINITY);
        c0(this.left, n.reverse());
      }
  }
}
function c0(e, t) {
  let n = 0;
  if (t.length < 1e4)
    e.push(...t);
  else
    for (; n < t.length; )
      e.push(...t.slice(n, n + 1e4)), n += 1e4;
}
function oz(e) {
  const t = {};
  let n = -1, r, i, a, o, u, c, f;
  const p = new wG(e);
  for (; ++n < p.length; ) {
    for (; n in t; )
      n = t[n];
    if (r = p.get(n), n && r[1].type === "chunkFlow" && p.get(n - 1)[1].type === "listItemPrefix" && (c = r[1]._tokenizer.events, a = 0, a < c.length && c[a][1].type === "lineEndingBlank" && (a += 2), a < c.length && c[a][1].type === "content"))
      for (; ++a < c.length && c[a][1].type !== "content"; )
        c[a][1].type === "chunkText" && (c[a][1]._isInFirstContentOfListItem = !0, a++);
    if (r[0] === "enter")
      r[1].contentType && (Object.assign(t, _G(p, n)), n = t[n], f = !0);
    else if (r[1]._container) {
      for (a = n, i = void 0; a--; )
        if (o = p.get(a), o[1].type === "lineEnding" || o[1].type === "lineEndingBlank")
          o[0] === "enter" && (i && (p.get(i)[1].type = "lineEndingBlank"), o[1].type = "lineEnding", i = a);
        else if (!(o[1].type === "linePrefix" || o[1].type === "listItemIndent")) break;
      i && (r[1].end = {
        ...p.get(i)[1].start
      }, u = p.slice(i, n), u.unshift(r), p.splice(i, n - i + 1, u));
    }
  }
  return Aa(e, 0, Number.POSITIVE_INFINITY, p.slice(0)), !f;
}
function _G(e, t) {
  const n = e.get(t)[1], r = e.get(t)[2];
  let i = t - 1;
  const a = [];
  let o = n._tokenizer;
  o || (o = r.parser[n.contentType](n.start), n._contentTypeTextTrailing && (o._contentTypeTextTrailing = !0));
  const u = o.events, c = [], f = {};
  let p, g, x = -1, b = n, _ = 0, E = 0;
  const k = [E];
  for (; b; ) {
    for (; e.get(++i)[1] !== b; )
      ;
    a.push(i), b._tokenizer || (p = r.sliceStream(b), b.next || p.push(null), g && o.defineSkip(b.start), b._isInFirstContentOfListItem && (o._gfmTasklistFirstContentOfListItem = !0), o.write(p), b._isInFirstContentOfListItem && (o._gfmTasklistFirstContentOfListItem = void 0)), g = b, b = b.next;
  }
  for (b = n; ++x < u.length; )
    // Find a void token that includes a break.
    u[x][0] === "exit" && u[x - 1][0] === "enter" && u[x][1].type === u[x - 1][1].type && u[x][1].start.line !== u[x][1].end.line && (E = x + 1, k.push(E), b._tokenizer = void 0, b.previous = void 0, b = b.next);
  for (o.events = [], b ? (b._tokenizer = void 0, b.previous = void 0) : k.pop(), x = k.length; x--; ) {
    const T = u.slice(k[x], k[x + 1]), R = a.pop();
    c.push([R, R + T.length - 1]), e.splice(R, 2, T);
  }
  for (c.reverse(), x = -1; ++x < c.length; )
    f[_ + c[x][0]] = _ + c[x][1], _ += c[x][1] - c[x][0] - 1;
  return f;
}
const SG = {
  resolve: EG,
  tokenize: kG
}, CG = {
  partial: !0,
  tokenize: TG
};
function EG(e) {
  return oz(e), e;
}
function kG(e, t) {
  let n;
  return r;
  function r(u) {
    return e.enter("content"), n = e.enter("chunkContent", {
      contentType: "content"
    }), i(u);
  }
  function i(u) {
    return u === null ? a(u) : Mt(u) ? e.check(CG, o, a)(u) : (e.consume(u), i);
  }
  function a(u) {
    return e.exit("chunkContent"), e.exit("content"), t(u);
  }
  function o(u) {
    return e.consume(u), e.exit("chunkContent"), n.next = e.enter("chunkContent", {
      contentType: "content",
      previous: n
    }), n = n.next, i;
  }
}
function TG(e, t, n) {
  const r = this;
  return i;
  function i(o) {
    return e.exit("chunkContent"), e.enter("lineEnding"), e.consume(o), e.exit("lineEnding"), gn(e, a, "linePrefix");
  }
  function a(o) {
    if (o === null || Mt(o))
      return n(o);
    const u = r.events[r.events.length - 1];
    return !r.parser.constructs.disable.null.includes("codeIndented") && u && u[1].type === "linePrefix" && u[2].sliceSerialize(u[1], !0).length >= 4 ? t(o) : e.interrupt(r.parser.constructs.flow, n, t)(o);
  }
}
function lz(e, t, n, r, i, a, o, u, c) {
  const f = c || Number.POSITIVE_INFINITY;
  let p = 0;
  return g;
  function g(T) {
    return T === 60 ? (e.enter(r), e.enter(i), e.enter(a), e.consume(T), e.exit(a), x) : T === null || T === 32 || T === 41 || vx(T) ? n(T) : (e.enter(r), e.enter(o), e.enter(u), e.enter("chunkString", {
      contentType: "string"
    }), E(T));
  }
  function x(T) {
    return T === 62 ? (e.enter(a), e.consume(T), e.exit(a), e.exit(i), e.exit(r), t) : (e.enter(u), e.enter("chunkString", {
      contentType: "string"
    }), b(T));
  }
  function b(T) {
    return T === 62 ? (e.exit("chunkString"), e.exit(u), x(T)) : T === null || T === 60 || Mt(T) ? n(T) : (e.consume(T), T === 92 ? _ : b);
  }
  function _(T) {
    return T === 60 || T === 62 || T === 92 ? (e.consume(T), b) : b(T);
  }
  function E(T) {
    return !p && (T === null || T === 41 || Wn(T)) ? (e.exit("chunkString"), e.exit(u), e.exit(o), e.exit(r), t(T)) : p < f && T === 40 ? (e.consume(T), p++, E) : T === 41 ? (e.consume(T), p--, E) : T === null || T === 32 || T === 40 || vx(T) ? n(T) : (e.consume(T), T === 92 ? k : E);
  }
  function k(T) {
    return T === 40 || T === 41 || T === 92 ? (e.consume(T), E) : E(T);
  }
}
function uz(e, t, n, r, i, a) {
  const o = this;
  let u = 0, c;
  return f;
  function f(b) {
    return e.enter(r), e.enter(i), e.consume(b), e.exit(i), e.enter(a), p;
  }
  function p(b) {
    return u > 999 || b === null || b === 91 || b === 93 && !c || // To do: remove in the future once weve switched from
    // `micromark-extension-footnote` to `micromark-extension-gfm-footnote`,
    // which doesnt need this.
    // Hidden footnotes hook.
    /* c8 ignore next 3 */
    b === 94 && !u && "_hiddenFootnoteSupport" in o.parser.constructs ? n(b) : b === 93 ? (e.exit(a), e.enter(i), e.consume(b), e.exit(i), e.exit(r), t) : Mt(b) ? (e.enter("lineEnding"), e.consume(b), e.exit("lineEnding"), p) : (e.enter("chunkString", {
      contentType: "string"
    }), g(b));
  }
  function g(b) {
    return b === null || b === 91 || b === 93 || Mt(b) || u++ > 999 ? (e.exit("chunkString"), p(b)) : (e.consume(b), c || (c = !ln(b)), b === 92 ? x : g);
  }
  function x(b) {
    return b === 91 || b === 92 || b === 93 ? (e.consume(b), u++, g) : g(b);
  }
}
function cz(e, t, n, r, i, a) {
  let o;
  return u;
  function u(x) {
    return x === 34 || x === 39 || x === 40 ? (e.enter(r), e.enter(i), e.consume(x), e.exit(i), o = x === 40 ? 41 : x, c) : n(x);
  }
  function c(x) {
    return x === o ? (e.enter(i), e.consume(x), e.exit(i), e.exit(r), t) : (e.enter(a), f(x));
  }
  function f(x) {
    return x === o ? (e.exit(a), c(o)) : x === null ? n(x) : Mt(x) ? (e.enter("lineEnding"), e.consume(x), e.exit("lineEnding"), gn(e, f, "linePrefix")) : (e.enter("chunkString", {
      contentType: "string"
    }), p(x));
  }
  function p(x) {
    return x === o || x === null || Mt(x) ? (e.exit("chunkString"), f(x)) : (e.consume(x), x === 92 ? g : p);
  }
  function g(x) {
    return x === o || x === 92 ? (e.consume(x), p) : p(x);
  }
}
function j0(e, t) {
  let n;
  return r;
  function r(i) {
    return Mt(i) ? (e.enter("lineEnding"), e.consume(i), e.exit("lineEnding"), n = !0, r) : ln(i) ? gn(e, r, n ? "linePrefix" : "lineSuffix")(i) : t(i);
  }
}
const AG = {
  name: "definition",
  tokenize: NG
}, jG = {
  partial: !0,
  tokenize: RG
};
function NG(e, t, n) {
  const r = this;
  let i;
  return a;
  function a(b) {
    return e.enter("definition"), o(b);
  }
  function o(b) {
    return uz.call(
      r,
      e,
      u,
      // Note: we dont need to reset the way `markdown-rs` does.
      n,
      "definitionLabel",
      "definitionLabelMarker",
      "definitionLabelString"
    )(b);
  }
  function u(b) {
    return i = Vo(r.sliceSerialize(r.events[r.events.length - 1][1]).slice(1, -1)), b === 58 ? (e.enter("definitionMarker"), e.consume(b), e.exit("definitionMarker"), c) : n(b);
  }
  function c(b) {
    return Wn(b) ? j0(e, f)(b) : f(b);
  }
  function f(b) {
    return lz(
      e,
      p,
      // Note: we dont need to reset the way `markdown-rs` does.
      n,
      "definitionDestination",
      "definitionDestinationLiteral",
      "definitionDestinationLiteralMarker",
      "definitionDestinationRaw",
      "definitionDestinationString"
    )(b);
  }
  function p(b) {
    return e.attempt(jG, g, g)(b);
  }
  function g(b) {
    return ln(b) ? gn(e, x, "whitespace")(b) : x(b);
  }
  function x(b) {
    return b === null || Mt(b) ? (e.exit("definition"), r.parser.defined.push(i), t(b)) : n(b);
  }
}
function RG(e, t, n) {
  return r;
  function r(u) {
    return Wn(u) ? j0(e, i)(u) : n(u);
  }
  function i(u) {
    return cz(e, a, n, "definitionTitle", "definitionTitleMarker", "definitionTitleString")(u);
  }
  function a(u) {
    return ln(u) ? gn(e, o, "whitespace")(u) : o(u);
  }
  function o(u) {
    return u === null || Mt(u) ? t(u) : n(u);
  }
}
const MG = {
  name: "hardBreakEscape",
  tokenize: OG
};
function OG(e, t, n) {
  return r;
  function r(a) {
    return e.enter("hardBreakEscape"), e.consume(a), i;
  }
  function i(a) {
    return Mt(a) ? (e.exit("hardBreakEscape"), t(a)) : n(a);
  }
}
const DG = {
  name: "headingAtx",
  resolve: zG,
  tokenize: PG
};
function zG(e, t) {
  let n = e.length - 2, r = 3, i, a;
  return e[r][1].type === "whitespace" && (r += 2), n - 2 > r && e[n][1].type === "whitespace" && (n -= 2), e[n][1].type === "atxHeadingSequence" && (r === n - 1 || n - 4 > r && e[n - 2][1].type === "whitespace") && (n -= r + 1 === n ? 2 : 4), n > r && (i = {
    type: "atxHeadingText",
    start: e[r][1].start,
    end: e[n][1].end
  }, a = {
    type: "chunkText",
    start: e[r][1].start,
    end: e[n][1].end,
    contentType: "text"
  }, Aa(e, r, n - r + 1, [["enter", i, t], ["enter", a, t], ["exit", a, t], ["exit", i, t]])), e;
}
function PG(e, t, n) {
  let r = 0;
  return i;
  function i(p) {
    return e.enter("atxHeading"), a(p);
  }
  function a(p) {
    return e.enter("atxHeadingSequence"), o(p);
  }
  function o(p) {
    return p === 35 && r++ < 6 ? (e.consume(p), o) : p === null || Wn(p) ? (e.exit("atxHeadingSequence"), u(p)) : n(p);
  }
  function u(p) {
    return p === 35 ? (e.enter("atxHeadingSequence"), c(p)) : p === null || Mt(p) ? (e.exit("atxHeading"), t(p)) : ln(p) ? gn(e, u, "whitespace")(p) : (e.enter("atxHeadingText"), f(p));
  }
  function c(p) {
    return p === 35 ? (e.consume(p), c) : (e.exit("atxHeadingSequence"), u(p));
  }
  function f(p) {
    return p === null || p === 35 || Wn(p) ? (e.exit("atxHeadingText"), u(p)) : (e.consume(p), f);
  }
}
const IG = [
  "address",
  "article",
  "aside",
  "base",
  "basefont",
  "blockquote",
  "body",
  "caption",
  "center",
  "col",
  "colgroup",
  "dd",
  "details",
  "dialog",
  "dir",
  "div",
  "dl",
  "dt",
  "fieldset",
  "figcaption",
  "figure",
  "footer",
  "form",
  "frame",
  "frameset",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "head",
  "header",
  "hr",
  "html",
  "iframe",
  "legend",
  "li",
  "link",
  "main",
  "menu",
  "menuitem",
  "nav",
  "noframes",
  "ol",
  "optgroup",
  "option",
  "p",
  "param",
  "search",
  "section",
  "summary",
  "table",
  "tbody",
  "td",
  "tfoot",
  "th",
  "thead",
  "title",
  "tr",
  "track",
  "ul"
], WA = ["pre", "script", "style", "textarea"], LG = {
  concrete: !0,
  name: "htmlFlow",
  resolveTo: $G,
  tokenize: FG
}, BG = {
  partial: !0,
  tokenize: VG
}, qG = {
  partial: !0,
  tokenize: UG
};
function $G(e) {
  let t = e.length;
  for (; t-- && !(e[t][0] === "enter" && e[t][1].type === "htmlFlow"); )
    ;
  return t > 1 && e[t - 2][1].type === "linePrefix" && (e[t][1].start = e[t - 2][1].start, e[t + 1][1].start = e[t - 2][1].start, e.splice(t - 2, 2)), e;
}
function FG(e, t, n) {
  const r = this;
  let i, a, o, u, c;
  return f;
  function f(V) {
    return p(V);
  }
  function p(V) {
    return e.enter("htmlFlow"), e.enter("htmlFlowData"), e.consume(V), g;
  }
  function g(V) {
    return V === 33 ? (e.consume(V), x) : V === 47 ? (e.consume(V), a = !0, E) : V === 63 ? (e.consume(V), i = 3, r.interrupt ? t : K) : xs(V) ? (e.consume(V), o = String.fromCharCode(V), k) : n(V);
  }
  function x(V) {
    return V === 45 ? (e.consume(V), i = 2, b) : V === 91 ? (e.consume(V), i = 5, u = 0, _) : xs(V) ? (e.consume(V), i = 4, r.interrupt ? t : K) : n(V);
  }
  function b(V) {
    return V === 45 ? (e.consume(V), r.interrupt ? t : K) : n(V);
  }
  function _(V) {
    const ae = "CDATA[";
    return V === ae.charCodeAt(u++) ? (e.consume(V), u === ae.length ? r.interrupt ? t : X : _) : n(V);
  }
  function E(V) {
    return xs(V) ? (e.consume(V), o = String.fromCharCode(V), k) : n(V);
  }
  function k(V) {
    if (V === null || V === 47 || V === 62 || Wn(V)) {
      const ae = V === 47, ge = o.toLowerCase();
      return !ae && !a && WA.includes(ge) ? (i = 1, r.interrupt ? t(V) : X(V)) : IG.includes(o.toLowerCase()) ? (i = 6, ae ? (e.consume(V), T) : r.interrupt ? t(V) : X(V)) : (i = 7, r.interrupt && !r.parser.lazy[r.now().line] ? n(V) : a ? R(V) : N(V));
    }
    return V === 45 || Wi(V) ? (e.consume(V), o += String.fromCharCode(V), k) : n(V);
  }
  function T(V) {
    return V === 62 ? (e.consume(V), r.interrupt ? t : X) : n(V);
  }
  function R(V) {
    return ln(V) ? (e.consume(V), R) : W(V);
  }
  function N(V) {
    return V === 47 ? (e.consume(V), W) : V === 58 || V === 95 || xs(V) ? (e.consume(V), O) : ln(V) ? (e.consume(V), N) : W(V);
  }
  function O(V) {
    return V === 45 || V === 46 || V === 58 || V === 95 || Wi(V) ? (e.consume(V), O) : P(V);
  }
  function P(V) {
    return V === 61 ? (e.consume(V), z) : ln(V) ? (e.consume(V), P) : N(V);
  }
  function z(V) {
    return V === null || V === 60 || V === 61 || V === 62 || V === 96 ? n(V) : V === 34 || V === 39 ? (e.consume(V), c = V, q) : ln(V) ? (e.consume(V), z) : G(V);
  }
  function q(V) {
    return V === c ? (e.consume(V), c = null, Y) : V === null || Mt(V) ? n(V) : (e.consume(V), q);
  }
  function G(V) {
    return V === null || V === 34 || V === 39 || V === 47 || V === 60 || V === 61 || V === 62 || V === 96 || Wn(V) ? P(V) : (e.consume(V), G);
  }
  function Y(V) {
    return V === 47 || V === 62 || ln(V) ? N(V) : n(V);
  }
  function W(V) {
    return V === 62 ? (e.consume(V), F) : n(V);
  }
  function F(V) {
    return V === null || Mt(V) ? X(V) : ln(V) ? (e.consume(V), F) : n(V);
  }
  function X(V) {
    return V === 45 && i === 2 ? (e.consume(V), Q) : V === 60 && i === 1 ? (e.consume(V), oe) : V === 62 && i === 4 ? (e.consume(V), re) : V === 63 && i === 3 ? (e.consume(V), K) : V === 93 && i === 5 ? (e.consume(V), ce) : Mt(V) && (i === 6 || i === 7) ? (e.exit("htmlFlowData"), e.check(BG, de, me)(V)) : V === null || Mt(V) ? (e.exit("htmlFlowData"), me(V)) : (e.consume(V), X);
  }
  function me(V) {
    return e.check(qG, J, de)(V);
  }
  function J(V) {
    return e.enter("lineEnding"), e.consume(V), e.exit("lineEnding"), le;
  }
  function le(V) {
    return V === null || Mt(V) ? me(V) : (e.enter("htmlFlowData"), X(V));
  }
  function Q(V) {
    return V === 45 ? (e.consume(V), K) : X(V);
  }
  function oe(V) {
    return V === 47 ? (e.consume(V), o = "", fe) : X(V);
  }
  function fe(V) {
    if (V === 62) {
      const ae = o.toLowerCase();
      return WA.includes(ae) ? (e.consume(V), re) : X(V);
    }
    return xs(V) && o.length < 8 ? (e.consume(V), o += String.fromCharCode(V), fe) : X(V);
  }
  function ce(V) {
    return V === 93 ? (e.consume(V), K) : X(V);
  }
  function K(V) {
    return V === 62 ? (e.consume(V), re) : V === 45 && i === 2 ? (e.consume(V), K) : X(V);
  }
  function re(V) {
    return V === null || Mt(V) ? (e.exit("htmlFlowData"), de(V)) : (e.consume(V), re);
  }
  function de(V) {
    return e.exit("htmlFlow"), t(V);
  }
}
function UG(e, t, n) {
  const r = this;
  return i;
  function i(o) {
    return Mt(o) ? (e.enter("lineEnding"), e.consume(o), e.exit("lineEnding"), a) : n(o);
  }
  function a(o) {
    return r.parser.lazy[r.now().line] ? n(o) : t(o);
  }
}
function VG(e, t, n) {
  return r;
  function r(i) {
    return e.enter("lineEnding"), e.consume(i), e.exit("lineEnding"), e.attempt(yy, t, n);
  }
}
const HG = {
  name: "htmlText",
  tokenize: GG
};
function GG(e, t, n) {
  const r = this;
  let i, a, o;
  return u;
  function u(K) {
    return e.enter("htmlText"), e.enter("htmlTextData"), e.consume(K), c;
  }
  function c(K) {
    return K === 33 ? (e.consume(K), f) : K === 47 ? (e.consume(K), P) : K === 63 ? (e.consume(K), N) : xs(K) ? (e.consume(K), G) : n(K);
  }
  function f(K) {
    return K === 45 ? (e.consume(K), p) : K === 91 ? (e.consume(K), a = 0, _) : xs(K) ? (e.consume(K), R) : n(K);
  }
  function p(K) {
    return K === 45 ? (e.consume(K), b) : n(K);
  }
  function g(K) {
    return K === null ? n(K) : K === 45 ? (e.consume(K), x) : Mt(K) ? (o = g, oe(K)) : (e.consume(K), g);
  }
  function x(K) {
    return K === 45 ? (e.consume(K), b) : g(K);
  }
  function b(K) {
    return K === 62 ? Q(K) : K === 45 ? x(K) : g(K);
  }
  function _(K) {
    const re = "CDATA[";
    return K === re.charCodeAt(a++) ? (e.consume(K), a === re.length ? E : _) : n(K);
  }
  function E(K) {
    return K === null ? n(K) : K === 93 ? (e.consume(K), k) : Mt(K) ? (o = E, oe(K)) : (e.consume(K), E);
  }
  function k(K) {
    return K === 93 ? (e.consume(K), T) : E(K);
  }
  function T(K) {
    return K === 62 ? Q(K) : K === 93 ? (e.consume(K), T) : E(K);
  }
  function R(K) {
    return K === null || K === 62 ? Q(K) : Mt(K) ? (o = R, oe(K)) : (e.consume(K), R);
  }
  function N(K) {
    return K === null ? n(K) : K === 63 ? (e.consume(K), O) : Mt(K) ? (o = N, oe(K)) : (e.consume(K), N);
  }
  function O(K) {
    return K === 62 ? Q(K) : N(K);
  }
  function P(K) {
    return xs(K) ? (e.consume(K), z) : n(K);
  }
  function z(K) {
    return K === 45 || Wi(K) ? (e.consume(K), z) : q(K);
  }
  function q(K) {
    return Mt(K) ? (o = q, oe(K)) : ln(K) ? (e.consume(K), q) : Q(K);
  }
  function G(K) {
    return K === 45 || Wi(K) ? (e.consume(K), G) : K === 47 || K === 62 || Wn(K) ? Y(K) : n(K);
  }
  function Y(K) {
    return K === 47 ? (e.consume(K), Q) : K === 58 || K === 95 || xs(K) ? (e.consume(K), W) : Mt(K) ? (o = Y, oe(K)) : ln(K) ? (e.consume(K), Y) : Q(K);
  }
  function W(K) {
    return K === 45 || K === 46 || K === 58 || K === 95 || Wi(K) ? (e.consume(K), W) : F(K);
  }
  function F(K) {
    return K === 61 ? (e.consume(K), X) : Mt(K) ? (o = F, oe(K)) : ln(K) ? (e.consume(K), F) : Y(K);
  }
  function X(K) {
    return K === null || K === 60 || K === 61 || K === 62 || K === 96 ? n(K) : K === 34 || K === 39 ? (e.consume(K), i = K, me) : Mt(K) ? (o = X, oe(K)) : ln(K) ? (e.consume(K), X) : (e.consume(K), J);
  }
  function me(K) {
    return K === i ? (e.consume(K), i = void 0, le) : K === null ? n(K) : Mt(K) ? (o = me, oe(K)) : (e.consume(K), me);
  }
  function J(K) {
    return K === null || K === 34 || K === 39 || K === 60 || K === 61 || K === 96 ? n(K) : K === 47 || K === 62 || Wn(K) ? Y(K) : (e.consume(K), J);
  }
  function le(K) {
    return K === 47 || K === 62 || Wn(K) ? Y(K) : n(K);
  }
  function Q(K) {
    return K === 62 ? (e.consume(K), e.exit("htmlTextData"), e.exit("htmlText"), t) : n(K);
  }
  function oe(K) {
    return e.exit("htmlTextData"), e.enter("lineEnding"), e.consume(K), e.exit("lineEnding"), fe;
  }
  function fe(K) {
    return ln(K) ? gn(e, ce, "linePrefix", r.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(K) : ce(K);
  }
  function ce(K) {
    return e.enter("htmlTextData"), o(K);
  }
}
const tk = {
  name: "labelEnd",
  resolveAll: ZG,
  resolveTo: XG,
  tokenize: QG
}, KG = {
  tokenize: JG
}, YG = {
  tokenize: eK
}, WG = {
  tokenize: tK
};
function ZG(e) {
  let t = -1;
  const n = [];
  for (; ++t < e.length; ) {
    const r = e[t][1];
    if (n.push(e[t]), r.type === "labelImage" || r.type === "labelLink" || r.type === "labelEnd") {
      const i = r.type === "labelImage" ? 4 : 2;
      r.type = "data", t += i;
    }
  }
  return e.length !== n.length && Aa(e, 0, e.length, n), e;
}
function XG(e, t) {
  let n = e.length, r = 0, i, a, o, u;
  for (; n--; )
    if (i = e[n][1], a) {
      if (i.type === "link" || i.type === "labelLink" && i._inactive)
        break;
      e[n][0] === "enter" && i.type === "labelLink" && (i._inactive = !0);
    } else if (o) {
      if (e[n][0] === "enter" && (i.type === "labelImage" || i.type === "labelLink") && !i._balanced && (a = n, i.type !== "labelLink")) {
        r = 2;
        break;
      }
    } else i.type === "labelEnd" && (o = n);
  const c = {
    type: e[a][1].type === "labelLink" ? "link" : "image",
    start: {
      ...e[a][1].start
    },
    end: {
      ...e[e.length - 1][1].end
    }
  }, f = {
    type: "label",
    start: {
      ...e[a][1].start
    },
    end: {
      ...e[o][1].end
    }
  }, p = {
    type: "labelText",
    start: {
      ...e[a + r + 2][1].end
    },
    end: {
      ...e[o - 2][1].start
    }
  };
  return u = [["enter", c, t], ["enter", f, t]], u = Ya(u, e.slice(a + 1, a + r + 3)), u = Ya(u, [["enter", p, t]]), u = Ya(u, ib(t.parser.constructs.insideSpan.null, e.slice(a + r + 4, o - 3), t)), u = Ya(u, [["exit", p, t], e[o - 2], e[o - 1], ["exit", f, t]]), u = Ya(u, e.slice(o + 1)), u = Ya(u, [["exit", c, t]]), Aa(e, a, e.length, u), e;
}
function QG(e, t, n) {
  const r = this;
  let i = r.events.length, a, o;
  for (; i--; )
    if ((r.events[i][1].type === "labelImage" || r.events[i][1].type === "labelLink") && !r.events[i][1]._balanced) {
      a = r.events[i][1];
      break;
    }
  return u;
  function u(x) {
    return a ? a._inactive ? g(x) : (o = r.parser.defined.includes(Vo(r.sliceSerialize({
      start: a.end,
      end: r.now()
    }))), e.enter("labelEnd"), e.enter("labelMarker"), e.consume(x), e.exit("labelMarker"), e.exit("labelEnd"), c) : n(x);
  }
  function c(x) {
    return x === 40 ? e.attempt(KG, p, o ? p : g)(x) : x === 91 ? e.attempt(YG, p, o ? f : g)(x) : o ? p(x) : g(x);
  }
  function f(x) {
    return e.attempt(WG, p, g)(x);
  }
  function p(x) {
    return t(x);
  }
  function g(x) {
    return a._balanced = !0, n(x);
  }
}
function JG(e, t, n) {
  return r;
  function r(g) {
    return e.enter("resource"), e.enter("resourceMarker"), e.consume(g), e.exit("resourceMarker"), i;
  }
  function i(g) {
    return Wn(g) ? j0(e, a)(g) : a(g);
  }
  function a(g) {
    return g === 41 ? p(g) : lz(e, o, u, "resourceDestination", "resourceDestinationLiteral", "resourceDestinationLiteralMarker", "resourceDestinationRaw", "resourceDestinationString", 32)(g);
  }
  function o(g) {
    return Wn(g) ? j0(e, c)(g) : p(g);
  }
  function u(g) {
    return n(g);
  }
  function c(g) {
    return g === 34 || g === 39 || g === 40 ? cz(e, f, n, "resourceTitle", "resourceTitleMarker", "resourceTitleString")(g) : p(g);
  }
  function f(g) {
    return Wn(g) ? j0(e, p)(g) : p(g);
  }
  function p(g) {
    return g === 41 ? (e.enter("resourceMarker"), e.consume(g), e.exit("resourceMarker"), e.exit("resource"), t) : n(g);
  }
}
function eK(e, t, n) {
  const r = this;
  return i;
  function i(u) {
    return uz.call(r, e, a, o, "reference", "referenceMarker", "referenceString")(u);
  }
  function a(u) {
    return r.parser.defined.includes(Vo(r.sliceSerialize(r.events[r.events.length - 1][1]).slice(1, -1))) ? t(u) : n(u);
  }
  function o(u) {
    return n(u);
  }
}
function tK(e, t, n) {
  return r;
  function r(a) {
    return e.enter("reference"), e.enter("referenceMarker"), e.consume(a), e.exit("referenceMarker"), i;
  }
  function i(a) {
    return a === 93 ? (e.enter("referenceMarker"), e.consume(a), e.exit("referenceMarker"), e.exit("reference"), t) : n(a);
  }
}
const nK = {
  name: "labelStartImage",
  resolveAll: tk.resolveAll,
  tokenize: rK
};
function rK(e, t, n) {
  const r = this;
  return i;
  function i(u) {
    return e.enter("labelImage"), e.enter("labelImageMarker"), e.consume(u), e.exit("labelImageMarker"), a;
  }
  function a(u) {
    return u === 91 ? (e.enter("labelMarker"), e.consume(u), e.exit("labelMarker"), e.exit("labelImage"), o) : n(u);
  }
  function o(u) {
    return u === 94 && "_hiddenFootnoteSupport" in r.parser.constructs ? n(u) : t(u);
  }
}
const iK = {
  name: "labelStartLink",
  resolveAll: tk.resolveAll,
  tokenize: sK
};
function sK(e, t, n) {
  const r = this;
  return i;
  function i(o) {
    return e.enter("labelLink"), e.enter("labelMarker"), e.consume(o), e.exit("labelMarker"), e.exit("labelLink"), a;
  }
  function a(o) {
    return o === 94 && "_hiddenFootnoteSupport" in r.parser.constructs ? n(o) : t(o);
  }
}
const ew = {
  name: "lineEnding",
  tokenize: aK
};
function aK(e, t) {
  return n;
  function n(r) {
    return e.enter("lineEnding"), e.consume(r), e.exit("lineEnding"), gn(e, t, "linePrefix");
  }
}
const J1 = {
  name: "thematicBreak",
  tokenize: oK
};
function oK(e, t, n) {
  let r = 0, i;
  return a;
  function a(f) {
    return e.enter("thematicBreak"), o(f);
  }
  function o(f) {
    return i = f, u(f);
  }
  function u(f) {
    return f === i ? (e.enter("thematicBreakSequence"), c(f)) : r >= 3 && (f === null || Mt(f)) ? (e.exit("thematicBreak"), t(f)) : n(f);
  }
  function c(f) {
    return f === i ? (e.consume(f), r++, c) : (e.exit("thematicBreakSequence"), ln(f) ? gn(e, u, "whitespace")(f) : u(f));
  }
}
const Ys = {
  continuation: {
    tokenize: fK
  },
  exit: hK,
  name: "list",
  tokenize: cK
}, lK = {
  partial: !0,
  tokenize: pK
}, uK = {
  partial: !0,
  tokenize: dK
};
function cK(e, t, n) {
  const r = this, i = r.events[r.events.length - 1];
  let a = i && i[1].type === "linePrefix" ? i[2].sliceSerialize(i[1], !0).length : 0, o = 0;
  return u;
  function u(b) {
    const _ = r.containerState.type || (b === 42 || b === 43 || b === 45 ? "listUnordered" : "listOrdered");
    if (_ === "listUnordered" ? !r.containerState.marker || b === r.containerState.marker : _E(b)) {
      if (r.containerState.type || (r.containerState.type = _, e.enter(_, {
        _container: !0
      })), _ === "listUnordered")
        return e.enter("listItemPrefix"), b === 42 || b === 45 ? e.check(J1, n, f)(b) : f(b);
      if (!r.interrupt || b === 49)
        return e.enter("listItemPrefix"), e.enter("listItemValue"), c(b);
    }
    return n(b);
  }
  function c(b) {
    return _E(b) && ++o < 10 ? (e.consume(b), c) : (!r.interrupt || o < 2) && (r.containerState.marker ? b === r.containerState.marker : b === 41 || b === 46) ? (e.exit("listItemValue"), f(b)) : n(b);
  }
  function f(b) {
    return e.enter("listItemMarker"), e.consume(b), e.exit("listItemMarker"), r.containerState.marker = r.containerState.marker || b, e.check(
      yy,
      // Cant be empty when interrupting.
      r.interrupt ? n : p,
      e.attempt(lK, x, g)
    );
  }
  function p(b) {
    return r.containerState.initialBlankLine = !0, a++, x(b);
  }
  function g(b) {
    return ln(b) ? (e.enter("listItemPrefixWhitespace"), e.consume(b), e.exit("listItemPrefixWhitespace"), x) : n(b);
  }
  function x(b) {
    return r.containerState.size = a + r.sliceSerialize(e.exit("listItemPrefix"), !0).length, t(b);
  }
}
function fK(e, t, n) {
  const r = this;
  return r.containerState._closeFlow = void 0, e.check(yy, i, a);
  function i(u) {
    return r.containerState.furtherBlankLines = r.containerState.furtherBlankLines || r.containerState.initialBlankLine, gn(e, t, "listItemIndent", r.containerState.size + 1)(u);
  }
  function a(u) {
    return r.containerState.furtherBlankLines || !ln(u) ? (r.containerState.furtherBlankLines = void 0, r.containerState.initialBlankLine = void 0, o(u)) : (r.containerState.furtherBlankLines = void 0, r.containerState.initialBlankLine = void 0, e.attempt(uK, t, o)(u));
  }
  function o(u) {
    return r.containerState._closeFlow = !0, r.interrupt = void 0, gn(e, e.attempt(Ys, t, n), "linePrefix", r.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(u);
  }
}
function dK(e, t, n) {
  const r = this;
  return gn(e, i, "listItemIndent", r.containerState.size + 1);
  function i(a) {
    const o = r.events[r.events.length - 1];
    return o && o[1].type === "listItemIndent" && o[2].sliceSerialize(o[1], !0).length === r.containerState.size ? t(a) : n(a);
  }
}
function hK(e) {
  e.exit(this.containerState.type);
}
function pK(e, t, n) {
  const r = this;
  return gn(e, i, "listItemPrefixWhitespace", r.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 5);
  function i(a) {
    const o = r.events[r.events.length - 1];
    return !ln(a) && o && o[1].type === "listItemPrefixWhitespace" ? t(a) : n(a);
  }
}
const ZA = {
  name: "setextUnderline",
  resolveTo: mK,
  tokenize: gK
};
function mK(e, t) {
  let n = e.length, r, i, a;
  for (; n--; )
    if (e[n][0] === "enter") {
      if (e[n][1].type === "content") {
        r = n;
        break;
      }
      e[n][1].type === "paragraph" && (i = n);
    } else
      e[n][1].type === "content" && e.splice(n, 1), !a && e[n][1].type === "definition" && (a = n);
  const o = {
    type: "setextHeading",
    start: {
      ...e[r][1].start
    },
    end: {
      ...e[e.length - 1][1].end
    }
  };
  return e[i][1].type = "setextHeadingText", a ? (e.splice(i, 0, ["enter", o, t]), e.splice(a + 1, 0, ["exit", e[r][1], t]), e[r][1].end = {
    ...e[a][1].end
  }) : e[r][1] = o, e.push(["exit", o, t]), e;
}
function gK(e, t, n) {
  const r = this;
  let i;
  return a;
  function a(f) {
    let p = r.events.length, g;
    for (; p--; )
      if (r.events[p][1].type !== "lineEnding" && r.events[p][1].type !== "linePrefix" && r.events[p][1].type !== "content") {
        g = r.events[p][1].type === "paragraph";
        break;
      }
    return !r.parser.lazy[r.now().line] && (r.interrupt || g) ? (e.enter("setextHeadingLine"), i = f, o(f)) : n(f);
  }
  function o(f) {
    return e.enter("setextHeadingLineSequence"), u(f);
  }
  function u(f) {
    return f === i ? (e.consume(f), u) : (e.exit("setextHeadingLineSequence"), ln(f) ? gn(e, c, "lineSuffix")(f) : c(f));
  }
  function c(f) {
    return f === null || Mt(f) ? (e.exit("setextHeadingLine"), t(f)) : n(f);
  }
}
const yK = {
  tokenize: vK
};
function vK(e) {
  const t = this, n = e.attempt(
    // Try to parse a blank line.
    yy,
    r,
    // Try to parse initial flow (essentially, only code).
    e.attempt(this.parser.constructs.flowInitial, i, gn(e, e.attempt(this.parser.constructs.flow, i, e.attempt(SG, i)), "linePrefix"))
  );
  return n;
  function r(a) {
    if (a === null) {
      e.consume(a);
      return;
    }
    return e.enter("lineEndingBlank"), e.consume(a), e.exit("lineEndingBlank"), t.currentConstruct = void 0, n;
  }
  function i(a) {
    if (a === null) {
      e.consume(a);
      return;
    }
    return e.enter("lineEnding"), e.consume(a), e.exit("lineEnding"), t.currentConstruct = void 0, n;
  }
}
const xK = {
  resolveAll: dz()
}, bK = fz("string"), wK = fz("text");
function fz(e) {
  return {
    resolveAll: dz(e === "text" ? _K : void 0),
    tokenize: t
  };
  function t(n) {
    const r = this, i = this.parser.constructs[e], a = n.attempt(i, o, u);
    return o;
    function o(p) {
      return f(p) ? a(p) : u(p);
    }
    function u(p) {
      if (p === null) {
        n.consume(p);
        return;
      }
      return n.enter("data"), n.consume(p), c;
    }
    function c(p) {
      return f(p) ? (n.exit("data"), a(p)) : (n.consume(p), c);
    }
    function f(p) {
      if (p === null)
        return !0;
      const g = i[p];
      let x = -1;
      if (g)
        for (; ++x < g.length; ) {
          const b = g[x];
          if (!b.previous || b.previous.call(r, r.previous))
            return !0;
        }
      return !1;
    }
  }
}
function dz(e) {
  return t;
  function t(n, r) {
    let i = -1, a;
    for (; ++i <= n.length; )
      a === void 0 ? n[i] && n[i][1].type === "data" && (a = i, i++) : (!n[i] || n[i][1].type !== "data") && (i !== a + 2 && (n[a][1].end = n[i - 1][1].end, n.splice(a + 2, i - a - 2), i = a + 2), a = void 0);
    return e ? e(n, r) : n;
  }
}
function _K(e, t) {
  let n = 0;
  for (; ++n <= e.length; )
    if ((n === e.length || e[n][1].type === "lineEnding") && e[n - 1][1].type === "data") {
      const r = e[n - 1][1], i = t.sliceStream(r);
      let a = i.length, o = -1, u = 0, c;
      for (; a--; ) {
        const f = i[a];
        if (typeof f == "string") {
          for (o = f.length; f.charCodeAt(o - 1) === 32; )
            u++, o--;
          if (o) break;
          o = -1;
        } else if (f === -2)
          c = !0, u++;
        else if (f !== -1) {
          a++;
          break;
        }
      }
      if (t._contentTypeTextTrailing && n === e.length && (u = 0), u) {
        const f = {
          type: n === e.length || c || u < 2 ? "lineSuffix" : "hardBreakTrailing",
          start: {
            _bufferIndex: a ? o : r.start._bufferIndex + o,
            _index: r.start._index + a,
            line: r.end.line,
            column: r.end.column - u,
            offset: r.end.offset - u
          },
          end: {
            ...r.end
          }
        };
        r.end = {
          ...f.start
        }, r.start.offset === r.end.offset ? Object.assign(r, f) : (e.splice(n, 0, ["enter", f, t], ["exit", f, t]), n += 2);
      }
      n++;
    }
  return e;
}
const SK = {
  42: Ys,
  43: Ys,
  45: Ys,
  48: Ys,
  49: Ys,
  50: Ys,
  51: Ys,
  52: Ys,
  53: Ys,
  54: Ys,
  55: Ys,
  56: Ys,
  57: Ys,
  62: iz
}, CK = {
  91: AG
}, EK = {
  [-2]: J2,
  [-1]: J2,
  32: J2
}, kK = {
  35: DG,
  42: J1,
  45: [ZA, J1],
  60: LG,
  61: ZA,
  95: J1,
  96: YA,
  126: YA
}, TK = {
  38: az,
  92: sz
}, AK = {
  [-5]: ew,
  [-4]: ew,
  [-3]: ew,
  33: nK,
  38: az,
  42: SE,
  60: [iG, HG],
  91: iK,
  92: [MG, sz],
  93: tk,
  95: SE,
  96: yG
}, jK = {
  null: [SE, xK]
}, NK = {
  null: [42, 95]
}, RK = {
  null: []
}, MK = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  attentionMarkers: NK,
  contentInitial: CK,
  disable: RK,
  document: SK,
  flow: kK,
  flowInitial: EK,
  insideSpan: jK,
  string: TK,
  text: AK
}, Symbol.toStringTag, { value: "Module" }));
function OK(e, t, n) {
  let r = {
    _bufferIndex: -1,
    _index: 0,
    line: n && n.line || 1,
    column: n && n.column || 1,
    offset: n && n.offset || 0
  };
  const i = {}, a = [];
  let o = [], u = [];
  const c = {
    attempt: q(P),
    check: q(z),
    consume: R,
    enter: N,
    exit: O,
    interrupt: q(z, {
      interrupt: !0
    })
  }, f = {
    code: null,
    containerState: {},
    defineSkip: E,
    events: [],
    now: _,
    parser: e,
    previous: null,
    sliceSerialize: x,
    sliceStream: b,
    write: g
  };
  let p = t.tokenize.call(f, c);
  return t.resolveAll && a.push(t), f;
  function g(F) {
    return o = Ya(o, F), k(), o[o.length - 1] !== null ? [] : (G(t, 0), f.events = ib(a, f.events, f), f.events);
  }
  function x(F, X) {
    return zK(b(F), X);
  }
  function b(F) {
    return DK(o, F);
  }
  function _() {
    const {
      _bufferIndex: F,
      _index: X,
      line: me,
      column: J,
      offset: le
    } = r;
    return {
      _bufferIndex: F,
      _index: X,
      line: me,
      column: J,
      offset: le
    };
  }
  function E(F) {
    i[F.line] = F.column, W();
  }
  function k() {
    let F;
    for (; r._index < o.length; ) {
      const X = o[r._index];
      if (typeof X == "string")
        for (F = r._index, r._bufferIndex < 0 && (r._bufferIndex = 0); r._index === F && r._bufferIndex < X.length; )
          T(X.charCodeAt(r._bufferIndex));
      else
        T(X);
    }
  }
  function T(F) {
    p = p(F);
  }
  function R(F) {
    Mt(F) ? (r.line++, r.column = 1, r.offset += F === -3 ? 2 : 1, W()) : F !== -1 && (r.column++, r.offset++), r._bufferIndex < 0 ? r._index++ : (r._bufferIndex++, r._bufferIndex === // Points w/ non-negative `_bufferIndex` reference
    // strings.
    /** @type {string} */
    o[r._index].length && (r._bufferIndex = -1, r._index++)), f.previous = F;
  }
  function N(F, X) {
    const me = X || {};
    return me.type = F, me.start = _(), f.events.push(["enter", me, f]), u.push(me), me;
  }
  function O(F) {
    const X = u.pop();
    return X.end = _(), f.events.push(["exit", X, f]), X;
  }
  function P(F, X) {
    G(F, X.from);
  }
  function z(F, X) {
    X.restore();
  }
  function q(F, X) {
    return me;
    function me(J, le, Q) {
      let oe, fe, ce, K;
      return Array.isArray(J) ? (
        /* c8 ignore next 1 */
        de(J)
      ) : "tokenize" in J ? (
        // Looks like a construct.
        de([
          /** @type {Construct} */
          J
        ])
      ) : re(J);
      function re(we) {
        return Re;
        function Re(Ie) {
          const Me = Ie !== null && we[Ie], dt = Ie !== null && we.null, ut = [
            // To do: add more extension tests.
            /* c8 ignore next 2 */
            ...Array.isArray(Me) ? Me : Me ? [Me] : [],
            ...Array.isArray(dt) ? dt : dt ? [dt] : []
          ];
          return de(ut)(Ie);
        }
      }
      function de(we) {
        return oe = we, fe = 0, we.length === 0 ? Q : V(we[fe]);
      }
      function V(we) {
        return Re;
        function Re(Ie) {
          return K = Y(), ce = we, we.partial || (f.currentConstruct = we), we.name && f.parser.constructs.disable.null.includes(we.name) ? ge() : we.tokenize.call(
            // If we do have fields, create an object w/ `context` as its
            // prototype.
            // This allows a live binding, which is needed for `interrupt`.
            X ? Object.assign(Object.create(f), X) : f,
            c,
            ae,
            ge
          )(Ie);
        }
      }
      function ae(we) {
        return F(ce, K), le;
      }
      function ge(we) {
        return K.restore(), ++fe < oe.length ? V(oe[fe]) : Q;
      }
    }
  }
  function G(F, X) {
    F.resolveAll && !a.includes(F) && a.push(F), F.resolve && Aa(f.events, X, f.events.length - X, F.resolve(f.events.slice(X), f)), F.resolveTo && (f.events = F.resolveTo(f.events, f));
  }
  function Y() {
    const F = _(), X = f.previous, me = f.currentConstruct, J = f.events.length, le = Array.from(u);
    return {
      from: J,
      restore: Q
    };
    function Q() {
      r = F, f.previous = X, f.currentConstruct = me, f.events.length = J, u = le, W();
    }
  }
  function W() {
    r.line in i && r.column < 2 && (r.column = i[r.line], r.offset += i[r.line] - 1);
  }
}
function DK(e, t) {
  const n = t.start._index, r = t.start._bufferIndex, i = t.end._index, a = t.end._bufferIndex;
  let o;
  if (n === i)
    o = [e[n].slice(r, a)];
  else {
    if (o = e.slice(n, i), r > -1) {
      const u = o[0];
      typeof u == "string" ? o[0] = u.slice(r) : o.shift();
    }
    a > 0 && o.push(e[i].slice(0, a));
  }
  return o;
}
function zK(e, t) {
  let n = -1;
  const r = [];
  let i;
  for (; ++n < e.length; ) {
    const a = e[n];
    let o;
    if (typeof a == "string")
      o = a;
    else switch (a) {
      case -5: {
        o = "\r";
        break;
      }
      case -4: {
        o = `
`;
        break;
      }
      case -3: {
        o = `\r
`;
        break;
      }
      case -2: {
        o = t ? " " : "	";
        break;
      }
      case -1: {
        if (!t && i) continue;
        o = " ";
        break;
      }
      default:
        o = String.fromCharCode(a);
    }
    i = a === -2, r.push(o);
  }
  return r.join("");
}
function PK(e) {
  const r = {
    constructs: (
      /** @type {FullNormalizedExtension} */
      nz([MK, ...(e || {}).extensions || []])
    ),
    content: i(XH),
    defined: [],
    document: i(JH),
    flow: i(yK),
    lazy: {},
    string: i(bK),
    text: i(wK)
  };
  return r;
  function i(a) {
    return o;
    function o(u) {
      return OK(r, a, u);
    }
  }
}
function IK(e) {
  for (; !oz(e); )
    ;
  return e;
}
const XA = /[\0\t\n\r]/g;
function LK() {
  let e = 1, t = "", n = !0, r;
  return i;
  function i(a, o, u) {
    const c = [];
    let f, p, g, x, b;
    for (a = t + (typeof a == "string" ? a.toString() : new TextDecoder(o || void 0).decode(a)), g = 0, t = "", n && (a.charCodeAt(0) === 65279 && g++, n = void 0); g < a.length; ) {
      if (XA.lastIndex = g, f = XA.exec(a), x = f && f.index !== void 0 ? f.index : a.length, b = a.charCodeAt(x), !f) {
        t = a.slice(g);
        break;
      }
      if (b === 10 && g === x && r)
        c.push(-3), r = void 0;
      else
        switch (r && (c.push(-5), r = void 0), g < x && (c.push(a.slice(g, x)), e += x - g), b) {
          case 0: {
            c.push(65533), e++;
            break;
          }
          case 9: {
            for (p = Math.ceil(e / 4) * 4, c.push(-2); e++ < p; ) c.push(-1);
            break;
          }
          case 10: {
            c.push(-4), e = 1;
            break;
          }
          default:
            r = !0, e = 1;
        }
      g = x + 1;
    }
    return u && (r && c.push(-5), t && c.push(t), c.push(null)), c;
  }
}
const BK = /\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;
function qK(e) {
  return e.replace(BK, $K);
}
function $K(e, t, n) {
  if (t)
    return t;
  if (n.charCodeAt(0) === 35) {
    const i = n.charCodeAt(1), a = i === 120 || i === 88;
    return rz(n.slice(a ? 2 : 1), a ? 16 : 10);
  }
  return ek(n) || e;
}
const hz = {}.hasOwnProperty;
function FK(e, t, n) {
  return typeof t != "string" && (n = t, t = void 0), UK(n)(IK(PK(n).document().write(LK()(e, t, !0))));
}
function UK(e) {
  const t = {
    transforms: [],
    canContainEols: ["emphasis", "fragment", "heading", "paragraph", "strong"],
    enter: {
      autolink: a(An),
      autolinkProtocol: Y,
      autolinkEmail: Y,
      atxHeading: a(ft),
      blockQuote: a(dt),
      characterEscape: Y,
      characterReference: Y,
      codeFenced: a(ut),
      codeFencedFenceInfo: o,
      codeFencedFenceMeta: o,
      codeIndented: a(ut, o),
      codeText: a(Je, o),
      codeTextData: Y,
      data: Y,
      codeFlowValue: Y,
      definition: a(ct),
      definitionDestinationString: o,
      definitionLabelString: o,
      definitionTitleString: o,
      emphasis: a(mt),
      hardBreakEscape: a(At),
      hardBreakTrailing: a(At),
      htmlFlow: a(xt, o),
      htmlFlowData: Y,
      htmlText: a(xt, o),
      htmlTextData: Y,
      image: a(qn),
      label: o,
      link: a(An),
      listItem: a(Yt),
      listItemValue: x,
      listOrdered: a(jn, g),
      listUnordered: a(jn),
      paragraph: a(Nn),
      reference: V,
      referenceString: o,
      resourceDestinationString: o,
      resourceTitleString: o,
      setextHeading: a(ft),
      strong: a(rn),
      thematicBreak: a($n)
    },
    exit: {
      atxHeading: c(),
      atxHeadingSequence: P,
      autolink: c(),
      autolinkEmail: Me,
      autolinkProtocol: Ie,
      blockQuote: c(),
      characterEscapeValue: W,
      characterReferenceMarkerHexadecimal: ge,
      characterReferenceMarkerNumeric: ge,
      characterReferenceValue: we,
      characterReference: Re,
      codeFenced: c(k),
      codeFencedFence: E,
      codeFencedFenceInfo: b,
      codeFencedFenceMeta: _,
      codeFlowValue: W,
      codeIndented: c(T),
      codeText: c(le),
      codeTextData: W,
      data: W,
      definition: c(),
      definitionDestinationString: O,
      definitionLabelString: R,
      definitionTitleString: N,
      emphasis: c(),
      hardBreakEscape: c(X),
      hardBreakTrailing: c(X),
      htmlFlow: c(me),
      htmlFlowData: W,
      htmlText: c(J),
      htmlTextData: W,
      image: c(oe),
      label: ce,
      labelText: fe,
      lineEnding: F,
      link: c(Q),
      listItem: c(),
      listOrdered: c(),
      listUnordered: c(),
      paragraph: c(),
      referenceString: ae,
      resourceDestinationString: K,
      resourceTitleString: re,
      resource: de,
      setextHeading: c(G),
      setextHeadingLineSequence: q,
      setextHeadingText: z,
      strong: c(),
      thematicBreak: c()
    }
  };
  pz(t, (e || {}).mdastExtensions || []);
  const n = {};
  return r;
  function r(Le) {
    let We = {
      type: "root",
      children: []
    };
    const at = {
      stack: [We],
      tokenStack: [],
      config: t,
      enter: u,
      exit: f,
      buffer: o,
      resume: p,
      data: n
    }, Ct = [];
    let Rt = -1;
    for (; ++Rt < Le.length; )
      if (Le[Rt][1].type === "listOrdered" || Le[Rt][1].type === "listUnordered")
        if (Le[Rt][0] === "enter")
          Ct.push(Rt);
        else {
          const In = Ct.pop();
          Rt = i(Le, In, Rt);
        }
    for (Rt = -1; ++Rt < Le.length; ) {
      const In = t[Le[Rt][0]];
      hz.call(In, Le[Rt][1].type) && In[Le[Rt][1].type].call(Object.assign({
        sliceSerialize: Le[Rt][2].sliceSerialize
      }, at), Le[Rt][1]);
    }
    if (at.tokenStack.length > 0) {
      const In = at.tokenStack[at.tokenStack.length - 1];
      (In[1] || QA).call(at, void 0, In[0]);
    }
    for (We.position = {
      start: Kc(Le.length > 0 ? Le[0][1].start : {
        line: 1,
        column: 1,
        offset: 0
      }),
      end: Kc(Le.length > 0 ? Le[Le.length - 2][1].end : {
        line: 1,
        column: 1,
        offset: 0
      })
    }, Rt = -1; ++Rt < t.transforms.length; )
      We = t.transforms[Rt](We) || We;
    return We;
  }
  function i(Le, We, at) {
    let Ct = We - 1, Rt = -1, In = !1, Rn, bt, $t, Ln;
    for (; ++Ct <= at; ) {
      const nt = Le[Ct];
      switch (nt[1].type) {
        case "listUnordered":
        case "listOrdered":
        case "blockQuote": {
          nt[0] === "enter" ? Rt++ : Rt--, Ln = void 0;
          break;
        }
        case "lineEndingBlank": {
          nt[0] === "enter" && (Rn && !Ln && !Rt && !$t && ($t = Ct), Ln = void 0);
          break;
        }
        case "linePrefix":
        case "listItemValue":
        case "listItemMarker":
        case "listItemPrefix":
        case "listItemPrefixWhitespace":
          break;
        default:
          Ln = void 0;
      }
      if (!Rt && nt[0] === "enter" && nt[1].type === "listItemPrefix" || Rt === -1 && nt[0] === "exit" && (nt[1].type === "listUnordered" || nt[1].type === "listOrdered")) {
        if (Rn) {
          let Br = Ct;
          for (bt = void 0; Br--; ) {
            const mr = Le[Br];
            if (mr[1].type === "lineEnding" || mr[1].type === "lineEndingBlank") {
              if (mr[0] === "exit") continue;
              bt && (Le[bt][1].type = "lineEndingBlank", In = !0), mr[1].type = "lineEnding", bt = Br;
            } else if (!(mr[1].type === "linePrefix" || mr[1].type === "blockQuotePrefix" || mr[1].type === "blockQuotePrefixWhitespace" || mr[1].type === "blockQuoteMarker" || mr[1].type === "listItemIndent")) break;
          }
          $t && (!bt || $t < bt) && (Rn._spread = !0), Rn.end = Object.assign({}, bt ? Le[bt][1].start : nt[1].end), Le.splice(bt || Ct, 0, ["exit", Rn, nt[2]]), Ct++, at++;
        }
        if (nt[1].type === "listItemPrefix") {
          const Br = {
            type: "listItem",
            _spread: !1,
            start: Object.assign({}, nt[1].start),
            // @ts-expect-error: well add `end` in a second.
            end: void 0
          };
          Rn = Br, Le.splice(Ct, 0, ["enter", Br, nt[2]]), Ct++, at++, $t = void 0, Ln = !0;
        }
      }
    }
    return Le[We][1]._spread = In, at;
  }
  function a(Le, We) {
    return at;
    function at(Ct) {
      u.call(this, Le(Ct), Ct), We && We.call(this, Ct);
    }
  }
  function o() {
    this.stack.push({
      type: "fragment",
      children: []
    });
  }
  function u(Le, We, at) {
    this.stack[this.stack.length - 1].children.push(Le), this.stack.push(Le), this.tokenStack.push([We, at || void 0]), Le.position = {
      start: Kc(We.start),
      // @ts-expect-error: `end` will be patched later.
      end: void 0
    };
  }
  function c(Le) {
    return We;
    function We(at) {
      Le && Le.call(this, at), f.call(this, at);
    }
  }
  function f(Le, We) {
    const at = this.stack.pop(), Ct = this.tokenStack.pop();
    if (Ct)
      Ct[0].type !== Le.type && (We ? We.call(this, Le, Ct[0]) : (Ct[1] || QA).call(this, Le, Ct[0]));
    else throw new Error("Cannot close `" + Le.type + "` (" + A0({
      start: Le.start,
      end: Le.end
    }) + "): its not open");
    at.position.end = Kc(Le.end);
  }
  function p() {
    return J5(this.stack.pop());
  }
  function g() {
    this.data.expectingFirstListItemValue = !0;
  }
  function x(Le) {
    if (this.data.expectingFirstListItemValue) {
      const We = this.stack[this.stack.length - 2];
      We.start = Number.parseInt(this.sliceSerialize(Le), 10), this.data.expectingFirstListItemValue = void 0;
    }
  }
  function b() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.lang = Le;
  }
  function _() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.meta = Le;
  }
  function E() {
    this.data.flowCodeInside || (this.buffer(), this.data.flowCodeInside = !0);
  }
  function k() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.value = Le.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g, ""), this.data.flowCodeInside = void 0;
  }
  function T() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.value = Le.replace(/(\r?\n|\r)$/g, "");
  }
  function R(Le) {
    const We = this.resume(), at = this.stack[this.stack.length - 1];
    at.label = We, at.identifier = Vo(this.sliceSerialize(Le)).toLowerCase();
  }
  function N() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.title = Le;
  }
  function O() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.url = Le;
  }
  function P(Le) {
    const We = this.stack[this.stack.length - 1];
    if (!We.depth) {
      const at = this.sliceSerialize(Le).length;
      We.depth = at;
    }
  }
  function z() {
    this.data.setextHeadingSlurpLineEnding = !0;
  }
  function q(Le) {
    const We = this.stack[this.stack.length - 1];
    We.depth = this.sliceSerialize(Le).codePointAt(0) === 61 ? 1 : 2;
  }
  function G() {
    this.data.setextHeadingSlurpLineEnding = void 0;
  }
  function Y(Le) {
    const at = this.stack[this.stack.length - 1].children;
    let Ct = at[at.length - 1];
    (!Ct || Ct.type !== "text") && (Ct = bn(), Ct.position = {
      start: Kc(Le.start),
      // @ts-expect-error: well add `end` later.
      end: void 0
    }, at.push(Ct)), this.stack.push(Ct);
  }
  function W(Le) {
    const We = this.stack.pop();
    We.value += this.sliceSerialize(Le), We.position.end = Kc(Le.end);
  }
  function F(Le) {
    const We = this.stack[this.stack.length - 1];
    if (this.data.atHardBreak) {
      const at = We.children[We.children.length - 1];
      at.position.end = Kc(Le.end), this.data.atHardBreak = void 0;
      return;
    }
    !this.data.setextHeadingSlurpLineEnding && t.canContainEols.includes(We.type) && (Y.call(this, Le), W.call(this, Le));
  }
  function X() {
    this.data.atHardBreak = !0;
  }
  function me() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.value = Le;
  }
  function J() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.value = Le;
  }
  function le() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.value = Le;
  }
  function Q() {
    const Le = this.stack[this.stack.length - 1];
    if (this.data.inReference) {
      const We = this.data.referenceType || "shortcut";
      Le.type += "Reference", Le.referenceType = We, delete Le.url, delete Le.title;
    } else
      delete Le.identifier, delete Le.label;
    this.data.referenceType = void 0;
  }
  function oe() {
    const Le = this.stack[this.stack.length - 1];
    if (this.data.inReference) {
      const We = this.data.referenceType || "shortcut";
      Le.type += "Reference", Le.referenceType = We, delete Le.url, delete Le.title;
    } else
      delete Le.identifier, delete Le.label;
    this.data.referenceType = void 0;
  }
  function fe(Le) {
    const We = this.sliceSerialize(Le), at = this.stack[this.stack.length - 2];
    at.label = qK(We), at.identifier = Vo(We).toLowerCase();
  }
  function ce() {
    const Le = this.stack[this.stack.length - 1], We = this.resume(), at = this.stack[this.stack.length - 1];
    if (this.data.inReference = !0, at.type === "link") {
      const Ct = Le.children;
      at.children = Ct;
    } else
      at.alt = We;
  }
  function K() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.url = Le;
  }
  function re() {
    const Le = this.resume(), We = this.stack[this.stack.length - 1];
    We.title = Le;
  }
  function de() {
    this.data.inReference = void 0;
  }
  function V() {
    this.data.referenceType = "collapsed";
  }
  function ae(Le) {
    const We = this.resume(), at = this.stack[this.stack.length - 1];
    at.label = We, at.identifier = Vo(this.sliceSerialize(Le)).toLowerCase(), this.data.referenceType = "full";
  }
  function ge(Le) {
    this.data.characterReferenceType = Le.type;
  }
  function we(Le) {
    const We = this.sliceSerialize(Le), at = this.data.characterReferenceType;
    let Ct;
    at ? (Ct = rz(We, at === "characterReferenceMarkerNumeric" ? 10 : 16), this.data.characterReferenceType = void 0) : Ct = ek(We);
    const Rt = this.stack[this.stack.length - 1];
    Rt.value += Ct;
  }
  function Re(Le) {
    const We = this.stack.pop();
    We.position.end = Kc(Le.end);
  }
  function Ie(Le) {
    W.call(this, Le);
    const We = this.stack[this.stack.length - 1];
    We.url = this.sliceSerialize(Le);
  }
  function Me(Le) {
    W.call(this, Le);
    const We = this.stack[this.stack.length - 1];
    We.url = "mailto:" + this.sliceSerialize(Le);
  }
  function dt() {
    return {
      type: "blockquote",
      children: []
    };
  }
  function ut() {
    return {
      type: "code",
      lang: null,
      meta: null,
      value: ""
    };
  }
  function Je() {
    return {
      type: "inlineCode",
      value: ""
    };
  }
  function ct() {
    return {
      type: "definition",
      identifier: "",
      label: null,
      title: null,
      url: ""
    };
  }
  function mt() {
    return {
      type: "emphasis",
      children: []
    };
  }
  function ft() {
    return {
      type: "heading",
      // @ts-expect-error `depth` will be set later.
      depth: 0,
      children: []
    };
  }
  function At() {
    return {
      type: "break"
    };
  }
  function xt() {
    return {
      type: "html",
      value: ""
    };
  }
  function qn() {
    return {
      type: "image",
      title: null,
      url: "",
      alt: null
    };
  }
  function An() {
    return {
      type: "link",
      title: null,
      url: "",
      children: []
    };
  }
  function jn(Le) {
    return {
      type: "list",
      ordered: Le.type === "listOrdered",
      start: null,
      spread: Le._spread,
      children: []
    };
  }
  function Yt(Le) {
    return {
      type: "listItem",
      spread: Le._spread,
      checked: null,
      children: []
    };
  }
  function Nn() {
    return {
      type: "paragraph",
      children: []
    };
  }
  function rn() {
    return {
      type: "strong",
      children: []
    };
  }
  function bn() {
    return {
      type: "text",
      value: ""
    };
  }
  function $n() {
    return {
      type: "thematicBreak"
    };
  }
}
function Kc(e) {
  return {
    line: e.line,
    column: e.column,
    offset: e.offset
  };
}
function pz(e, t) {
  let n = -1;
  for (; ++n < t.length; ) {
    const r = t[n];
    Array.isArray(r) ? pz(e, r) : VK(e, r);
  }
}
function VK(e, t) {
  let n;
  for (n in t)
    if (hz.call(t, n))
      switch (n) {
        case "canContainEols": {
          const r = t[n];
          r && e[n].push(...r);
          break;
        }
        case "transforms": {
          const r = t[n];
          r && e[n].push(...r);
          break;
        }
        case "enter":
        case "exit": {
          const r = t[n];
          r && Object.assign(e[n], r);
          break;
        }
      }
}
function QA(e, t) {
  throw e ? new Error("Cannot close `" + e.type + "` (" + A0({
    start: e.start,
    end: e.end
  }) + "): a different token (`" + t.type + "`, " + A0({
    start: t.start,
    end: t.end
  }) + ") is open") : new Error("Cannot close document, a token (`" + t.type + "`, " + A0({
    start: t.start,
    end: t.end
  }) + ") is still open");
}
function HK(e) {
  const t = this;
  t.parser = n;
  function n(r) {
    return FK(r, {
      ...t.data("settings"),
      ...e,
      // Note: these options are not in the readme.
      // The goal is for them to be set by plugins on `data` instead of being
      // passed by users.
      extensions: t.data("micromarkExtensions") || [],
      mdastExtensions: t.data("fromMarkdownExtensions") || []
    });
  }
}
function GK(e, t) {
  const n = {
    type: "element",
    tagName: "blockquote",
    properties: {},
    children: e.wrap(e.all(t), !0)
  };
  return e.patch(t, n), e.applyData(t, n);
}
function KK(e, t) {
  const n = { type: "element", tagName: "br", properties: {}, children: [] };
  return e.patch(t, n), [e.applyData(t, n), { type: "text", value: `
` }];
}
function YK(e, t) {
  const n = t.value ? t.value + `
` : "", r = {}, i = t.lang ? t.lang.split(/\s+/) : [];
  i.length > 0 && (r.className = ["language-" + i[0]]);
  let a = {
    type: "element",
    tagName: "code",
    properties: r,
    children: [{ type: "text", value: n }]
  };
  return t.meta && (a.data = { meta: t.meta }), e.patch(t, a), a = e.applyData(t, a), a = { type: "element", tagName: "pre", properties: {}, children: [a] }, e.patch(t, a), a;
}
function WK(e, t) {
  const n = {
    type: "element",
    tagName: "del",
    properties: {},
    children: e.all(t)
  };
  return e.patch(t, n), e.applyData(t, n);
}
function ZK(e, t) {
  const n = {
    type: "element",
    tagName: "em",
    properties: {},
    children: e.all(t)
  };
  return e.patch(t, n), e.applyData(t, n);
}
function XK(e, t) {
  const n = typeof e.options.clobberPrefix == "string" ? e.options.clobberPrefix : "user-content-", r = String(t.identifier).toUpperCase(), i = vm(r.toLowerCase()), a = e.footnoteOrder.indexOf(r);
  let o, u = e.footnoteCounts.get(r);
  u === void 0 ? (u = 0, e.footnoteOrder.push(r), o = e.footnoteOrder.length) : o = a + 1, u += 1, e.footnoteCounts.set(r, u);
  const c = {
    type: "element",
    tagName: "a",
    properties: {
      href: "#" + n + "fn-" + i,
      id: n + "fnref-" + i + (u > 1 ? "-" + u : ""),
      dataFootnoteRef: !0,
      ariaDescribedBy: ["footnote-label"]
    },
    children: [{ type: "text", value: String(o) }]
  };
  e.patch(t, c);
  const f = {
    type: "element",
    tagName: "sup",
    properties: {},
    children: [c]
  };
  return e.patch(t, f), e.applyData(t, f);
}
function QK(e, t) {
  const n = {
    type: "element",
    tagName: "h" + t.depth,
    properties: {},
    children: e.all(t)
  };
  return e.patch(t, n), e.applyData(t, n);
}
function JK(e, t) {
  if (e.options.allowDangerousHtml) {
    const n = { type: "raw", value: t.value };
    return e.patch(t, n), e.applyData(t, n);
  }
}
function mz(e, t) {
  const n = t.referenceType;
  let r = "]";
  if (n === "collapsed" ? r += "[]" : n === "full" && (r += "[" + (t.label || t.identifier) + "]"), t.type === "imageReference")
    return [{ type: "text", value: "![" + t.alt + r }];
  const i = e.all(t), a = i[0];
  a && a.type === "text" ? a.value = "[" + a.value : i.unshift({ type: "text", value: "[" });
  const o = i[i.length - 1];
  return o && o.type === "text" ? o.value += r : i.push({ type: "text", value: r }), i;
}
function eY(e, t) {
  const n = String(t.identifier).toUpperCase(), r = e.definitionById.get(n);
  if (!r)
    return mz(e, t);
  const i = { src: vm(r.url || ""), alt: t.alt };
  r.title !== null && r.title !== void 0 && (i.title = r.title);
  const a = { type: "element", tagName: "img", properties: i, children: [] };
  return e.patch(t, a), e.applyData(t, a);
}
function tY(e, t) {
  const n = { src: vm(t.url) };
  t.alt !== null && t.alt !== void 0 && (n.alt = t.alt), t.title !== null && t.title !== void 0 && (n.title = t.title);
  const r = { type: "element", tagName: "img", properties: n, children: [] };
  return e.patch(t, r), e.applyData(t, r);
}
function nY(e, t) {
  const n = { type: "text", value: t.value.replace(/\r?\n|\r/g, " ") };
  e.patch(t, n);
  const r = {
    type: "element",
    tagName: "code",
    properties: {},
    children: [n]
  };
  return e.patch(t, r), e.applyData(t, r);
}
function rY(e, t) {
  const n = String(t.identifier).toUpperCase(), r = e.definitionById.get(n);
  if (!r)
    return mz(e, t);
  const i = { href: vm(r.url || "") };
  r.title !== null && r.title !== void 0 && (i.title = r.title);
  const a = {
    type: "element",
    tagName: "a",
    properties: i,
    children: e.all(t)
  };
  return e.patch(t, a), e.applyData(t, a);
}
function iY(e, t) {
  const n = { href: vm(t.url) };
  t.title !== null && t.title !== void 0 && (n.title = t.title);
  const r = {
    type: "element",
    tagName: "a",
    properties: n,
    children: e.all(t)
  };
  return e.patch(t, r), e.applyData(t, r);
}
function sY(e, t, n) {
  const r = e.all(t), i = n ? aY(n) : gz(t), a = {}, o = [];
  if (typeof t.checked == "boolean") {
    const p = r[0];
    let g;
    p && p.type === "element" && p.tagName === "p" ? g = p : (g = { type: "element", tagName: "p", properties: {}, children: [] }, r.unshift(g)), g.children.length > 0 && g.children.unshift({ type: "text", value: " " }), g.children.unshift({
      type: "element",
      tagName: "input",
      properties: { type: "checkbox", checked: t.checked, disabled: !0 },
      children: []
    }), a.className = ["task-list-item"];
  }
  let u = -1;
  for (; ++u < r.length; ) {
    const p = r[u];
    (i || u !== 0 || p.type !== "element" || p.tagName !== "p") && o.push({ type: "text", value: `
` }), p.type === "element" && p.tagName === "p" && !i ? o.push(...p.children) : o.push(p);
  }
  const c = r[r.length - 1];
  c && (i || c.type !== "element" || c.tagName !== "p") && o.push({ type: "text", value: `
` });
  const f = { type: "element", tagName: "li", properties: a, children: o };
  return e.patch(t, f), e.applyData(t, f);
}
function aY(e) {
  let t = !1;
  if (e.type === "list") {
    t = e.spread || !1;
    const n = e.children;
    let r = -1;
    for (; !t && ++r < n.length; )
      t = gz(n[r]);
  }
  return t;
}
function gz(e) {
  const t = e.spread;
  return t ?? e.children.length > 1;
}
function oY(e, t) {
  const n = {}, r = e.all(t);
  let i = -1;
  for (typeof t.start == "number" && t.start !== 1 && (n.start = t.start); ++i < r.length; ) {
    const o = r[i];
    if (o.type === "element" && o.tagName === "li" && o.properties && Array.isArray(o.properties.className) && o.properties.className.includes("task-list-item")) {
      n.className = ["contains-task-list"];
      break;
    }
  }
  const a = {
    type: "element",
    tagName: t.ordered ? "ol" : "ul",
    properties: n,
    children: e.wrap(r, !0)
  };
  return e.patch(t, a), e.applyData(t, a);
}
function lY(e, t) {
  const n = {
    type: "element",
    tagName: "p",
    properties: {},
    children: e.all(t)
  };
  return e.patch(t, n), e.applyData(t, n);
}
function uY(e, t) {
  const n = { type: "root", children: e.wrap(e.all(t)) };
  return e.patch(t, n), e.applyData(t, n);
}
function cY(e, t) {
  const n = {
    type: "element",
    tagName: "strong",
    properties: {},
    children: e.all(t)
  };
  return e.patch(t, n), e.applyData(t, n);
}
function fY(e, t) {
  const n = e.all(t), r = n.shift(), i = [];
  if (r) {
    const o = {
      type: "element",
      tagName: "thead",
      properties: {},
      children: e.wrap([r], !0)
    };
    e.patch(t.children[0], o), i.push(o);
  }
  if (n.length > 0) {
    const o = {
      type: "element",
      tagName: "tbody",
      properties: {},
      children: e.wrap(n, !0)
    }, u = W5(t.children[1]), c = WD(t.children[t.children.length - 1]);
    u && c && (o.position = { start: u, end: c }), i.push(o);
  }
  const a = {
    type: "element",
    tagName: "table",
    properties: {},
    children: e.wrap(i, !0)
  };
  return e.patch(t, a), e.applyData(t, a);
}
function dY(e, t, n) {
  const r = n ? n.children : void 0, a = (r ? r.indexOf(t) : 1) === 0 ? "th" : "td", o = n && n.type === "table" ? n.align : void 0, u = o ? o.length : t.children.length;
  let c = -1;
  const f = [];
  for (; ++c < u; ) {
    const g = t.children[c], x = {}, b = o ? o[c] : void 0;
    b && (x.align = b);
    let _ = { type: "element", tagName: a, properties: x, children: [] };
    g && (_.children = e.all(g), e.patch(g, _), _ = e.applyData(g, _)), f.push(_);
  }
  const p = {
    type: "element",
    tagName: "tr",
    properties: {},
    children: e.wrap(f, !0)
  };
  return e.patch(t, p), e.applyData(t, p);
}
function hY(e, t) {
  const n = {
    type: "element",
    tagName: "td",
    // Assume body cell.
    properties: {},
    children: e.all(t)
  };
  return e.patch(t, n), e.applyData(t, n);
}
const JA = 9, e6 = 32;
function pY(e) {
  const t = String(e), n = /\r?\n|\r/g;
  let r = n.exec(t), i = 0;
  const a = [];
  for (; r; )
    a.push(
      t6(t.slice(i, r.index), i > 0, !0),
      r[0]
    ), i = r.index + r[0].length, r = n.exec(t);
  return a.push(t6(t.slice(i), i > 0, !1)), a.join("");
}
function t6(e, t, n) {
  let r = 0, i = e.length;
  if (t) {
    let a = e.codePointAt(r);
    for (; a === JA || a === e6; )
      r++, a = e.codePointAt(r);
  }
  if (n) {
    let a = e.codePointAt(i - 1);
    for (; a === JA || a === e6; )
      i--, a = e.codePointAt(i - 1);
  }
  return i > r ? e.slice(r, i) : "";
}
function mY(e, t) {
  const n = { type: "text", value: pY(String(t.value)) };
  return e.patch(t, n), e.applyData(t, n);
}
function gY(e, t) {
  const n = {
    type: "element",
    tagName: "hr",
    properties: {},
    children: []
  };
  return e.patch(t, n), e.applyData(t, n);
}
const yY = {
  blockquote: GK,
  break: KK,
  code: YK,
  delete: WK,
  emphasis: ZK,
  footnoteReference: XK,
  heading: QK,
  html: JK,
  imageReference: eY,
  image: tY,
  inlineCode: nY,
  linkReference: rY,
  link: iY,
  listItem: sY,
  list: oY,
  paragraph: lY,
  // @ts-expect-error: root is different, but hard to type.
  root: uY,
  strong: cY,
  table: fY,
  tableCell: hY,
  tableRow: dY,
  text: mY,
  thematicBreak: gY,
  toml: C1,
  yaml: C1,
  definition: C1,
  footnoteDefinition: C1
};
function C1() {
}
const yz = -1, sb = 0, N0 = 1, xx = 2, nk = 3, rk = 4, ik = 5, sk = 6, vz = 7, xz = 8, n6 = typeof self == "object" ? self : globalThis, vY = (e, t) => {
  const n = (i, a) => (e.set(a, i), i), r = (i) => {
    if (e.has(i))
      return e.get(i);
    const [a, o] = t[i];
    switch (a) {
      case sb:
      case yz:
        return n(o, i);
      case N0: {
        const u = n([], i);
        for (const c of o)
          u.push(r(c));
        return u;
      }
      case xx: {
        const u = n({}, i);
        for (const [c, f] of o)
          u[r(c)] = r(f);
        return u;
      }
      case nk:
        return n(new Date(o), i);
      case rk: {
        const { source: u, flags: c } = o;
        return n(new RegExp(u, c), i);
      }
      case ik: {
        const u = n(/* @__PURE__ */ new Map(), i);
        for (const [c, f] of o)
          u.set(r(c), r(f));
        return u;
      }
      case sk: {
        const u = n(/* @__PURE__ */ new Set(), i);
        for (const c of o)
          u.add(r(c));
        return u;
      }
      case vz: {
        const { name: u, message: c } = o;
        return n(new n6[u](c), i);
      }
      case xz:
        return n(BigInt(o), i);
      case "BigInt":
        return n(Object(BigInt(o)), i);
      case "ArrayBuffer":
        return n(new Uint8Array(o).buffer, o);
      case "DataView": {
        const { buffer: u } = new Uint8Array(o);
        return n(new DataView(u), o);
      }
    }
    return n(new n6[a](o), i);
  };
  return r;
}, r6 = (e) => vY(/* @__PURE__ */ new Map(), e)(0), jp = "", { toString: xY } = {}, { keys: bY } = Object, f0 = (e) => {
  const t = typeof e;
  if (t !== "object" || !e)
    return [sb, t];
  const n = xY.call(e).slice(8, -1);
  switch (n) {
    case "Array":
      return [N0, jp];
    case "Object":
      return [xx, jp];
    case "Date":
      return [nk, jp];
    case "RegExp":
      return [rk, jp];
    case "Map":
      return [ik, jp];
    case "Set":
      return [sk, jp];
    case "DataView":
      return [N0, n];
  }
  return n.includes("Array") ? [N0, n] : n.includes("Error") ? [vz, n] : [xx, n];
}, E1 = ([e, t]) => e === sb && (t === "function" || t === "symbol"), wY = (e, t, n, r) => {
  const i = (o, u) => {
    const c = r.push(o) - 1;
    return n.set(u, c), c;
  }, a = (o) => {
    if (n.has(o))
      return n.get(o);
    let [u, c] = f0(o);
    switch (u) {
      case sb: {
        let p = o;
        switch (c) {
          case "bigint":
            u = xz, p = o.toString();
            break;
          case "function":
          case "symbol":
            if (e)
              throw new TypeError("unable to serialize " + c);
            p = null;
            break;
          case "undefined":
            return i([yz], o);
        }
        return i([u, p], o);
      }
      case N0: {
        if (c) {
          let x = o;
          return c === "DataView" ? x = new Uint8Array(o.buffer) : c === "ArrayBuffer" && (x = new Uint8Array(o)), i([c, [...x]], o);
        }
        const p = [], g = i([u, p], o);
        for (const x of o)
          p.push(a(x));
        return g;
      }
      case xx: {
        if (c)
          switch (c) {
            case "BigInt":
              return i([c, o.toString()], o);
            case "Boolean":
            case "Number":
            case "String":
              return i([c, o.valueOf()], o);
          }
        if (t && "toJSON" in o)
          return a(o.toJSON());
        const p = [], g = i([u, p], o);
        for (const x of bY(o))
          (e || !E1(f0(o[x]))) && p.push([a(x), a(o[x])]);
        return g;
      }
      case nk:
        return i([u, o.toISOString()], o);
      case rk: {
        const { source: p, flags: g } = o;
        return i([u, { source: p, flags: g }], o);
      }
      case ik: {
        const p = [], g = i([u, p], o);
        for (const [x, b] of o)
          (e || !(E1(f0(x)) || E1(f0(b)))) && p.push([a(x), a(b)]);
        return g;
      }
      case sk: {
        const p = [], g = i([u, p], o);
        for (const x of o)
          (e || !E1(f0(x))) && p.push(a(x));
        return g;
      }
    }
    const { message: f } = o;
    return i([u, { name: c, message: f }], o);
  };
  return a;
}, i6 = (e, { json: t, lossy: n } = {}) => {
  const r = [];
  return wY(!(t || n), !!t, /* @__PURE__ */ new Map(), r)(e), r;
}, bx = typeof structuredClone == "function" ? (
  /* c8 ignore start */
  (e, t) => t && ("json" in t || "lossy" in t) ? r6(i6(e, t)) : structuredClone(e)
) : (e, t) => r6(i6(e, t));
function _Y(e, t) {
  const n = [{ type: "text", value: "" }];
  return t > 1 && n.push({
    type: "element",
    tagName: "sup",
    properties: {},
    children: [{ type: "text", value: String(t) }]
  }), n;
}
function SY(e, t) {
  return "Back to reference " + (e + 1) + (t > 1 ? "-" + t : "");
}
function CY(e) {
  const t = typeof e.options.clobberPrefix == "string" ? e.options.clobberPrefix : "user-content-", n = e.options.footnoteBackContent || _Y, r = e.options.footnoteBackLabel || SY, i = e.options.footnoteLabel || "Footnotes", a = e.options.footnoteLabelTagName || "h2", o = e.options.footnoteLabelProperties || {
    className: ["sr-only"]
  }, u = [];
  let c = -1;
  for (; ++c < e.footnoteOrder.length; ) {
    const f = e.footnoteById.get(
      e.footnoteOrder[c]
    );
    if (!f)
      continue;
    const p = e.all(f), g = String(f.identifier).toUpperCase(), x = vm(g.toLowerCase());
    let b = 0;
    const _ = [], E = e.footnoteCounts.get(g);
    for (; E !== void 0 && ++b <= E; ) {
      _.length > 0 && _.push({ type: "text", value: " " });
      let R = typeof n == "string" ? n : n(c, b);
      typeof R == "string" && (R = { type: "text", value: R }), _.push({
        type: "element",
        tagName: "a",
        properties: {
          href: "#" + t + "fnref-" + x + (b > 1 ? "-" + b : ""),
          dataFootnoteBackref: "",
          ariaLabel: typeof r == "string" ? r : r(c, b),
          className: ["data-footnote-backref"]
        },
        children: Array.isArray(R) ? R : [R]
      });
    }
    const k = p[p.length - 1];
    if (k && k.type === "element" && k.tagName === "p") {
      const R = k.children[k.children.length - 1];
      R && R.type === "text" ? R.value += " " : k.children.push({ type: "text", value: " " }), k.children.push(..._);
    } else
      p.push(..._);
    const T = {
      type: "element",
      tagName: "li",
      properties: { id: t + "fn-" + x },
      children: e.wrap(p, !0)
    };
    e.patch(f, T), u.push(T);
  }
  if (u.length !== 0)
    return {
      type: "element",
      tagName: "section",
      properties: { dataFootnotes: !0, className: ["footnotes"] },
      children: [
        {
          type: "element",
          tagName: a,
          properties: {
            ...bx(o),
            id: "footnote-label"
          },
          children: [{ type: "text", value: i }]
        },
        { type: "text", value: `
` },
        {
          type: "element",
          tagName: "ol",
          properties: {},
          children: e.wrap(u, !0)
        },
        { type: "text", value: `
` }
      ]
    };
}
const ab = (
  // Note: overloads in JSDoc cant yet use different `@template`s.
  /**
   * @type {(
   *   (<Condition extends string>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &
   *   (<Condition extends Props>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &
   *   (<Condition extends TestFunction>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &
   *   ((test?: null | undefined) => (node?: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &
   *   ((test?: Test) => Check)
   * )}
   */
  /**
   * @param {Test} [test]
   * @returns {Check}
   */
  (function(e) {
    if (e == null)
      return AY;
    if (typeof e == "function")
      return ob(e);
    if (typeof e == "object")
      return Array.isArray(e) ? EY(e) : (
        // Cast because `ReadonlyArray` goes into the above but `isArray`
        // narrows to `Array`.
        kY(
          /** @type {Props} */
          e
        )
      );
    if (typeof e == "string")
      return TY(e);
    throw new Error("Expected function, string, or object as test");
  })
);
function EY(e) {
  const t = [];
  let n = -1;
  for (; ++n < e.length; )
    t[n] = ab(e[n]);
  return ob(r);
  function r(...i) {
    let a = -1;
    for (; ++a < t.length; )
      if (t[a].apply(this, i)) return !0;
    return !1;
  }
}
function kY(e) {
  const t = (
    /** @type {Record<string, unknown>} */
    e
  );
  return ob(n);
  function n(r) {
    const i = (
      /** @type {Record<string, unknown>} */
      /** @type {unknown} */
      r
    );
    let a;
    for (a in e)
      if (i[a] !== t[a]) return !1;
    return !0;
  }
}
function TY(e) {
  return ob(t);
  function t(n) {
    return n && n.type === e;
  }
}
function ob(e) {
  return t;
  function t(n, r, i) {
    return !!(jY(n) && e.call(
      this,
      n,
      typeof r == "number" ? r : void 0,
      i || void 0
    ));
  }
}
function AY() {
  return !0;
}
function jY(e) {
  return e !== null && typeof e == "object" && "type" in e;
}
const bz = [], NY = !0, CE = !1, RY = "skip";
function wz(e, t, n, r) {
  let i;
  typeof t == "function" && typeof n != "function" ? (r = n, n = t) : i = t;
  const a = ab(i), o = r ? -1 : 1;
  u(e, void 0, [])();
  function u(c, f, p) {
    const g = (
      /** @type {Record<string, unknown>} */
      c && typeof c == "object" ? c : {}
    );
    if (typeof g.type == "string") {
      const b = (
        // `hast`
        typeof g.tagName == "string" ? g.tagName : (
          // `xast`
          typeof g.name == "string" ? g.name : void 0
        )
      );
      Object.defineProperty(x, "name", {
        value: "node (" + (c.type + (b ? "<" + b + ">" : "")) + ")"
      });
    }
    return x;
    function x() {
      let b = bz, _, E, k;
      if ((!t || a(c, f, p[p.length - 1] || void 0)) && (b = MY(n(c, p)), b[0] === CE))
        return b;
      if ("children" in c && c.children) {
        const T = (
          /** @type {UnistParent} */
          c
        );
        if (T.children && b[0] !== RY)
          for (E = (r ? T.children.length : -1) + o, k = p.concat(T); E > -1 && E < T.children.length; ) {
            const R = T.children[E];
            if (_ = u(R, E, k)(), _[0] === CE)
              return _;
            E = typeof _[1] == "number" ? _[1] : E + o;
          }
      }
      return b;
    }
  }
}
function MY(e) {
  return Array.isArray(e) ? e : typeof e == "number" ? [NY, e] : e == null ? bz : [e];
}
function ak(e, t, n, r) {
  let i, a, o;
  typeof t == "function" && typeof n != "function" ? (a = void 0, o = t, i = n) : (a = t, o = n, i = r), wz(e, a, u, i);
  function u(c, f) {
    const p = f[f.length - 1], g = p ? p.children.indexOf(c) : void 0;
    return o(c, g, p);
  }
}
const EE = {}.hasOwnProperty, OY = {};
function DY(e, t) {
  const n = t || OY, r = /* @__PURE__ */ new Map(), i = /* @__PURE__ */ new Map(), a = /* @__PURE__ */ new Map(), o = { ...yY, ...n.handlers }, u = {
    all: f,
    applyData: PY,
    definitionById: r,
    footnoteById: i,
    footnoteCounts: a,
    footnoteOrder: [],
    handlers: o,
    one: c,
    options: n,
    patch: zY,
    wrap: LY
  };
  return ak(e, function(p) {
    if (p.type === "definition" || p.type === "footnoteDefinition") {
      const g = p.type === "definition" ? r : i, x = String(p.identifier).toUpperCase();
      g.has(x) || g.set(x, p);
    }
  }), u;
  function c(p, g) {
    const x = p.type, b = u.handlers[x];
    if (EE.call(u.handlers, x) && b)
      return b(u, p, g);
    if (u.options.passThrough && u.options.passThrough.includes(x)) {
      if ("children" in p) {
        const { children: E, ...k } = p, T = bx(k);
        return T.children = u.all(p), T;
      }
      return bx(p);
    }
    return (u.options.unknownHandler || IY)(u, p, g);
  }
  function f(p) {
    const g = [];
    if ("children" in p) {
      const x = p.children;
      let b = -1;
      for (; ++b < x.length; ) {
        const _ = u.one(x[b], p);
        if (_) {
          if (b && x[b - 1].type === "break" && (!Array.isArray(_) && _.type === "text" && (_.value = s6(_.value)), !Array.isArray(_) && _.type === "element")) {
            const E = _.children[0];
            E && E.type === "text" && (E.value = s6(E.value));
          }
          Array.isArray(_) ? g.push(..._) : g.push(_);
        }
      }
    }
    return g;
  }
}
function zY(e, t) {
  e.position && (t.position = SH(e));
}
function PY(e, t) {
  let n = t;
  if (e && e.data) {
    const r = e.data.hName, i = e.data.hChildren, a = e.data.hProperties;
    if (typeof r == "string")
      if (n.type === "element")
        n.tagName = r;
      else {
        const o = "children" in n ? n.children : [n];
        n = { type: "element", tagName: r, properties: {}, children: o };
      }
    n.type === "element" && a && Object.assign(n.properties, bx(a)), "children" in n && n.children && i !== null && i !== void 0 && (n.children = i);
  }
  return n;
}
function IY(e, t) {
  const n = t.data || {}, r = "value" in t && !(EE.call(n, "hProperties") || EE.call(n, "hChildren")) ? { type: "text", value: t.value } : {
    type: "element",
    tagName: "div",
    properties: {},
    children: e.all(t)
  };
  return e.patch(t, r), e.applyData(t, r);
}
function LY(e, t) {
  const n = [];
  let r = -1;
  for (t && n.push({ type: "text", value: `
` }); ++r < e.length; )
    r && n.push({ type: "text", value: `
` }), n.push(e[r]);
  return t && e.length > 0 && n.push({ type: "text", value: `
` }), n;
}
function s6(e) {
  let t = 0, n = e.charCodeAt(t);
  for (; n === 9 || n === 32; )
    t++, n = e.charCodeAt(t);
  return e.slice(t);
}
function a6(e, t) {
  const n = DY(e, t), r = n.one(e, void 0), i = CY(n), a = Array.isArray(r) ? { type: "root", children: r } : r || { type: "root", children: [] };
  return i && a.children.push({ type: "text", value: `
` }, i), a;
}
function BY(e, t) {
  return e && "run" in e ? async function(n, r) {
    const i = (
      /** @type {HastRoot} */
      a6(n, { file: r, ...t })
    );
    await e.run(i, r);
  } : function(n, r) {
    return (
      /** @type {HastRoot} */
      a6(n, { file: r, ...e || t })
    );
  };
}
function o6(e) {
  if (e)
    throw e;
}
var tw, l6;
function qY() {
  if (l6) return tw;
  l6 = 1;
  var e = Object.prototype.hasOwnProperty, t = Object.prototype.toString, n = Object.defineProperty, r = Object.getOwnPropertyDescriptor, i = function(f) {
    return typeof Array.isArray == "function" ? Array.isArray(f) : t.call(f) === "[object Array]";
  }, a = function(f) {
    if (!f || t.call(f) !== "[object Object]")
      return !1;
    var p = e.call(f, "constructor"), g = f.constructor && f.constructor.prototype && e.call(f.constructor.prototype, "isPrototypeOf");
    if (f.constructor && !p && !g)
      return !1;
    var x;
    for (x in f)
      ;
    return typeof x > "u" || e.call(f, x);
  }, o = function(f, p) {
    n && p.name === "__proto__" ? n(f, p.name, {
      enumerable: !0,
      configurable: !0,
      value: p.newValue,
      writable: !0
    }) : f[p.name] = p.newValue;
  }, u = function(f, p) {
    if (p === "__proto__")
      if (e.call(f, p)) {
        if (r)
          return r(f, p).value;
      } else return;
    return f[p];
  };
  return tw = function c() {
    var f, p, g, x, b, _, E = arguments[0], k = 1, T = arguments.length, R = !1;
    for (typeof E == "boolean" && (R = E, E = arguments[1] || {}, k = 2), (E == null || typeof E != "object" && typeof E != "function") && (E = {}); k < T; ++k)
      if (f = arguments[k], f != null)
        for (p in f)
          g = u(E, p), x = u(f, p), E !== x && (R && x && (a(x) || (b = i(x))) ? (b ? (b = !1, _ = g && i(g) ? g : []) : _ = g && a(g) ? g : {}, o(E, { name: p, newValue: c(R, _, x) })) : typeof x < "u" && o(E, { name: p, newValue: x }));
    return E;
  }, tw;
}
var $Y = /* @__PURE__ */ qY();
const nw = /* @__PURE__ */ uf($Y);
function kE(e) {
  if (typeof e != "object" || e === null)
    return !1;
  const t = Object.getPrototypeOf(e);
  return (t === null || t === Object.prototype || Object.getPrototypeOf(t) === null) && !(Symbol.toStringTag in e) && !(Symbol.iterator in e);
}
function FY() {
  const e = [], t = { run: n, use: r };
  return t;
  function n(...i) {
    let a = -1;
    const o = i.pop();
    if (typeof o != "function")
      throw new TypeError("Expected function as last argument, not " + o);
    u(null, ...i);
    function u(c, ...f) {
      const p = e[++a];
      let g = -1;
      if (c) {
        o(c);
        return;
      }
      for (; ++g < i.length; )
        (f[g] === null || f[g] === void 0) && (f[g] = i[g]);
      i = f, p ? UY(p, u)(...f) : o(null, ...f);
    }
  }
  function r(i) {
    if (typeof i != "function")
      throw new TypeError(
        "Expected `middelware` to be a function, not " + i
      );
    return e.push(i), t;
  }
}
function UY(e, t) {
  let n;
  return r;
  function r(...o) {
    const u = e.length > o.length;
    let c;
    u && o.push(i);
    try {
      c = e.apply(this, o);
    } catch (f) {
      const p = (
        /** @type {Error} */
        f
      );
      if (u && n)
        throw p;
      return i(p);
    }
    u || (c && c.then && typeof c.then == "function" ? c.then(a, i) : c instanceof Error ? i(c) : a(c));
  }
  function i(o, ...u) {
    n || (n = !0, t(o, ...u));
  }
  function a(o) {
    i(null, o);
  }
}
const zl = { basename: VY, dirname: HY, extname: GY, join: KY, sep: "/" };
function VY(e, t) {
  if (t !== void 0 && typeof t != "string")
    throw new TypeError('"ext" argument must be a string');
  vy(e);
  let n = 0, r = -1, i = e.length, a;
  if (t === void 0 || t.length === 0 || t.length > e.length) {
    for (; i--; )
      if (e.codePointAt(i) === 47) {
        if (a) {
          n = i + 1;
          break;
        }
      } else r < 0 && (a = !0, r = i + 1);
    return r < 0 ? "" : e.slice(n, r);
  }
  if (t === e)
    return "";
  let o = -1, u = t.length - 1;
  for (; i--; )
    if (e.codePointAt(i) === 47) {
      if (a) {
        n = i + 1;
        break;
      }
    } else
      o < 0 && (a = !0, o = i + 1), u > -1 && (e.codePointAt(i) === t.codePointAt(u--) ? u < 0 && (r = i) : (u = -1, r = o));
  return n === r ? r = o : r < 0 && (r = e.length), e.slice(n, r);
}
function HY(e) {
  if (vy(e), e.length === 0)
    return ".";
  let t = -1, n = e.length, r;
  for (; --n; )
    if (e.codePointAt(n) === 47) {
      if (r) {
        t = n;
        break;
      }
    } else r || (r = !0);
  return t < 0 ? e.codePointAt(0) === 47 ? "/" : "." : t === 1 && e.codePointAt(0) === 47 ? "//" : e.slice(0, t);
}
function GY(e) {
  vy(e);
  let t = e.length, n = -1, r = 0, i = -1, a = 0, o;
  for (; t--; ) {
    const u = e.codePointAt(t);
    if (u === 47) {
      if (o) {
        r = t + 1;
        break;
      }
      continue;
    }
    n < 0 && (o = !0, n = t + 1), u === 46 ? i < 0 ? i = t : a !== 1 && (a = 1) : i > -1 && (a = -1);
  }
  return i < 0 || n < 0 || // We saw a non-dot character immediately before the dot.
  a === 0 || // The (right-most) trimmed path component is exactly `..`.
  a === 1 && i === n - 1 && i === r + 1 ? "" : e.slice(i, n);
}
function KY(...e) {
  let t = -1, n;
  for (; ++t < e.length; )
    vy(e[t]), e[t] && (n = n === void 0 ? e[t] : n + "/" + e[t]);
  return n === void 0 ? "." : YY(n);
}
function YY(e) {
  vy(e);
  const t = e.codePointAt(0) === 47;
  let n = WY(e, !t);
  return n.length === 0 && !t && (n = "."), n.length > 0 && e.codePointAt(e.length - 1) === 47 && (n += "/"), t ? "/" + n : n;
}
function WY(e, t) {
  let n = "", r = 0, i = -1, a = 0, o = -1, u, c;
  for (; ++o <= e.length; ) {
    if (o < e.length)
      u = e.codePointAt(o);
    else {
      if (u === 47)
        break;
      u = 47;
    }
    if (u === 47) {
      if (!(i === o - 1 || a === 1)) if (i !== o - 1 && a === 2) {
        if (n.length < 2 || r !== 2 || n.codePointAt(n.length - 1) !== 46 || n.codePointAt(n.length - 2) !== 46) {
          if (n.length > 2) {
            if (c = n.lastIndexOf("/"), c !== n.length - 1) {
              c < 0 ? (n = "", r = 0) : (n = n.slice(0, c), r = n.length - 1 - n.lastIndexOf("/")), i = o, a = 0;
              continue;
            }
          } else if (n.length > 0) {
            n = "", r = 0, i = o, a = 0;
            continue;
          }
        }
        t && (n = n.length > 0 ? n + "/.." : "..", r = 2);
      } else
        n.length > 0 ? n += "/" + e.slice(i + 1, o) : n = e.slice(i + 1, o), r = o - i - 1;
      i = o, a = 0;
    } else u === 46 && a > -1 ? a++ : a = -1;
  }
  return n;
}
function vy(e) {
  if (typeof e != "string")
    throw new TypeError(
      "Path must be a string. Received " + JSON.stringify(e)
    );
}
const ZY = { cwd: XY };
function XY() {
  return "/";
}
function TE(e) {
  return !!(e !== null && typeof e == "object" && "href" in e && e.href && "protocol" in e && e.protocol && // @ts-expect-error: indexing is fine.
  e.auth === void 0);
}
function QY(e) {
  if (typeof e == "string")
    e = new URL(e);
  else if (!TE(e)) {
    const t = new TypeError(
      'The "path" argument must be of type string or an instance of URL. Received `' + e + "`"
    );
    throw t.code = "ERR_INVALID_ARG_TYPE", t;
  }
  if (e.protocol !== "file:") {
    const t = new TypeError("The URL must be of scheme file");
    throw t.code = "ERR_INVALID_URL_SCHEME", t;
  }
  return JY(e);
}
function JY(e) {
  if (e.hostname !== "") {
    const r = new TypeError(
      'File URL host must be "localhost" or empty on darwin'
    );
    throw r.code = "ERR_INVALID_FILE_URL_HOST", r;
  }
  const t = e.pathname;
  let n = -1;
  for (; ++n < t.length; )
    if (t.codePointAt(n) === 37 && t.codePointAt(n + 1) === 50) {
      const r = t.codePointAt(n + 2);
      if (r === 70 || r === 102) {
        const i = new TypeError(
          "File URL path must not include encoded / characters"
        );
        throw i.code = "ERR_INVALID_FILE_URL_PATH", i;
      }
    }
  return decodeURIComponent(t);
}
const rw = (
  /** @type {const} */
  [
    "history",
    "path",
    "basename",
    "stem",
    "extname",
    "dirname"
  ]
);
class _z {
  /**
   * Create a new virtual file.
   *
   * `options` is treated as:
   *
   * *   `string` or `Uint8Array`  `{value: options}`
   * *   `URL`  `{path: options}`
   * *   `VFile`  shallow copies its data over to the new file
   * *   `object`  all fields are shallow copied over to the new file
   *
   * Path related fields are set in the following order (least specific to
   * most specific): `history`, `path`, `basename`, `stem`, `extname`,
   * `dirname`.
   *
   * You cannot set `dirname` or `extname` without setting either `history`,
   * `path`, `basename`, or `stem` too.
   *
   * @param {Compatible | null | undefined} [value]
   *   File value.
   * @returns
   *   New instance.
   */
  constructor(t) {
    let n;
    t ? TE(t) ? n = { path: t } : typeof t == "string" || eW(t) ? n = { value: t } : n = t : n = {}, this.cwd = "cwd" in n ? "" : ZY.cwd(), this.data = {}, this.history = [], this.messages = [];
    let r = -1;
    for (; ++r < rw.length; ) {
      const a = rw[r];
      a in n && n[a] !== void 0 && n[a] !== null && (this[a] = a === "history" ? [...n[a]] : n[a]);
    }
    let i;
    for (i in n)
      rw.includes(i) || (this[i] = n[i]);
  }
  /**
   * Get the basename (including extname) (example: `'index.min.js'`).
   *
   * @returns {string | undefined}
   *   Basename.
   */
  get basename() {
    return typeof this.path == "string" ? zl.basename(this.path) : void 0;
  }
  /**
   * Set basename (including extname) (`'index.min.js'`).
   *
   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\'`
   * on windows).
   * Cannot be nullified (use `file.path = file.dirname` instead).
   *
   * @param {string} basename
   *   Basename.
   * @returns {undefined}
   *   Nothing.
   */
  set basename(t) {
    sw(t, "basename"), iw(t, "basename"), this.path = zl.join(this.dirname || "", t);
  }
  /**
   * Get the parent path (example: `'~'`).
   *
   * @returns {string | undefined}
   *   Dirname.
   */
  get dirname() {
    return typeof this.path == "string" ? zl.dirname(this.path) : void 0;
  }
  /**
   * Set the parent path (example: `'~'`).
   *
   * Cannot be set if theres no `path` yet.
   *
   * @param {string | undefined} dirname
   *   Dirname.
   * @returns {undefined}
   *   Nothing.
   */
  set dirname(t) {
    u6(this.basename, "dirname"), this.path = zl.join(t || "", this.basename);
  }
  /**
   * Get the extname (including dot) (example: `'.js'`).
   *
   * @returns {string | undefined}
   *   Extname.
   */
  get extname() {
    return typeof this.path == "string" ? zl.extname(this.path) : void 0;
  }
  /**
   * Set the extname (including dot) (example: `'.js'`).
   *
   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\'`
   * on windows).
   * Cannot be set if theres no `path` yet.
   *
   * @param {string | undefined} extname
   *   Extname.
   * @returns {undefined}
   *   Nothing.
   */
  set extname(t) {
    if (iw(t, "extname"), u6(this.dirname, "extname"), t) {
      if (t.codePointAt(0) !== 46)
        throw new Error("`extname` must start with `.`");
      if (t.includes(".", 1))
        throw new Error("`extname` cannot contain multiple dots");
    }
    this.path = zl.join(this.dirname, this.stem + (t || ""));
  }
  /**
   * Get the full path (example: `'~/index.min.js'`).
   *
   * @returns {string}
   *   Path.
   */
  get path() {
    return this.history[this.history.length - 1];
  }
  /**
   * Set the full path (example: `'~/index.min.js'`).
   *
   * Cannot be nullified.
   * You can set a file URL (a `URL` object with a `file:` protocol) which will
   * be turned into a path with `url.fileURLToPath`.
   *
   * @param {URL | string} path
   *   Path.
   * @returns {undefined}
   *   Nothing.
   */
  set path(t) {
    TE(t) && (t = QY(t)), sw(t, "path"), this.path !== t && this.history.push(t);
  }
  /**
   * Get the stem (basename w/o extname) (example: `'index.min'`).
   *
   * @returns {string | undefined}
   *   Stem.
   */
  get stem() {
    return typeof this.path == "string" ? zl.basename(this.path, this.extname) : void 0;
  }
  /**
   * Set the stem (basename w/o extname) (example: `'index.min'`).
   *
   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\'`
   * on windows).
   * Cannot be nullified (use `file.path = file.dirname` instead).
   *
   * @param {string} stem
   *   Stem.
   * @returns {undefined}
   *   Nothing.
   */
  set stem(t) {
    sw(t, "stem"), iw(t, "stem"), this.path = zl.join(this.dirname || "", t + (this.extname || ""));
  }
  // Normal prototypal methods.
  /**
   * Create a fatal message for `reason` associated with the file.
   *
   * The `fatal` field of the message is set to `true` (error; file not usable)
   * and the `file` field is set to the current file path.
   * The message is added to the `messages` field on `file`.
   *
   * >  **Note**: also has obsolete signatures.
   *
   * @overload
   * @param {string} reason
   * @param {MessageOptions | null | undefined} [options]
   * @returns {never}
   *
   * @overload
   * @param {string} reason
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {string} reason
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {string} reason
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {string | null | undefined} [origin]
   * @returns {never}
   *
   * @param {Error | VFileMessage | string} causeOrReason
   *   Reason for message, should use markdown.
   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]
   *   Configuration (optional).
   * @param {string | null | undefined} [origin]
   *   Place in code where the message originates (example:
   *   `'my-package:my-rule'` or `'my-rule'`).
   * @returns {never}
   *   Never.
   * @throws {VFileMessage}
   *   Message.
   */
  fail(t, n, r) {
    const i = this.message(t, n, r);
    throw i.fatal = !0, i;
  }
  /**
   * Create an info message for `reason` associated with the file.
   *
   * The `fatal` field of the message is set to `undefined` (info; change
   * likely not needed) and the `file` field is set to the current file path.
   * The message is added to the `messages` field on `file`.
   *
   * >  **Note**: also has obsolete signatures.
   *
   * @overload
   * @param {string} reason
   * @param {MessageOptions | null | undefined} [options]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @param {Error | VFileMessage | string} causeOrReason
   *   Reason for message, should use markdown.
   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]
   *   Configuration (optional).
   * @param {string | null | undefined} [origin]
   *   Place in code where the message originates (example:
   *   `'my-package:my-rule'` or `'my-rule'`).
   * @returns {VFileMessage}
   *   Message.
   */
  info(t, n, r) {
    const i = this.message(t, n, r);
    return i.fatal = void 0, i;
  }
  /**
   * Create a message for `reason` associated with the file.
   *
   * The `fatal` field of the message is set to `false` (warning; change may be
   * needed) and the `file` field is set to the current file path.
   * The message is added to the `messages` field on `file`.
   *
   * >  **Note**: also has obsolete signatures.
   *
   * @overload
   * @param {string} reason
   * @param {MessageOptions | null | undefined} [options]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {string} reason
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Node | NodeLike | null | undefined} parent
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {Point | Position | null | undefined} place
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @overload
   * @param {Error | VFileMessage} cause
   * @param {string | null | undefined} [origin]
   * @returns {VFileMessage}
   *
   * @param {Error | VFileMessage | string} causeOrReason
   *   Reason for message, should use markdown.
   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]
   *   Configuration (optional).
   * @param {string | null | undefined} [origin]
   *   Place in code where the message originates (example:
   *   `'my-package:my-rule'` or `'my-rule'`).
   * @returns {VFileMessage}
   *   Message.
   */
  message(t, n, r) {
    const i = new Xi(
      // @ts-expect-error: the overloads are fine.
      t,
      n,
      r
    );
    return this.path && (i.name = this.path + ":" + i.name, i.file = this.path), i.fatal = !1, this.messages.push(i), i;
  }
  /**
   * Serialize the file.
   *
   * > **Note**: which encodings are supported depends on the engine.
   * > For info on Node.js, see:
   * > <https://nodejs.org/api/util.html#whatwg-supported-encodings>.
   *
   * @param {string | null | undefined} [encoding='utf8']
   *   Character encoding to understand `value` as when its a `Uint8Array`
   *   (default: `'utf-8'`).
   * @returns {string}
   *   Serialized file.
   */
  toString(t) {
    return this.value === void 0 ? "" : typeof this.value == "string" ? this.value : new TextDecoder(t || void 0).decode(this.value);
  }
}
function iw(e, t) {
  if (e && e.includes(zl.sep))
    throw new Error(
      "`" + t + "` cannot be a path: did not expect `" + zl.sep + "`"
    );
}
function sw(e, t) {
  if (!e)
    throw new Error("`" + t + "` cannot be empty");
}
function u6(e, t) {
  if (!e)
    throw new Error("Setting `" + t + "` requires `path` to be set too");
}
function eW(e) {
  return !!(e && typeof e == "object" && "byteLength" in e && "byteOffset" in e);
}
const tW = (
  /**
   * @type {new <Parameters extends Array<unknown>, Result>(property: string | symbol) => (...parameters: Parameters) => Result}
   */
  /** @type {unknown} */
  /**
   * @this {Function}
   * @param {string | symbol} property
   * @returns {(...parameters: Array<unknown>) => unknown}
   */
  (function(e) {
    const r = (
      /** @type {Record<string | symbol, Function>} */
      // Prototypes do exist.
      // type-coverage:ignore-next-line
      this.constructor.prototype
    ), i = r[e], a = function() {
      return i.apply(a, arguments);
    };
    return Object.setPrototypeOf(a, r), a;
  })
), nW = {}.hasOwnProperty;
class ok extends tW {
  /**
   * Create a processor.
   */
  constructor() {
    super("copy"), this.Compiler = void 0, this.Parser = void 0, this.attachers = [], this.compiler = void 0, this.freezeIndex = -1, this.frozen = void 0, this.namespace = {}, this.parser = void 0, this.transformers = FY();
  }
  /**
   * Copy a processor.
   *
   * @deprecated
   *   This is a private internal method and should not be used.
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *   New *unfrozen* processor ({@linkcode Processor}) that is
   *   configured to work the same as its ancestor.
   *   When the descendant processor is configured in the future it does not
   *   affect the ancestral processor.
   */
  copy() {
    const t = (
      /** @type {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>} */
      new ok()
    );
    let n = -1;
    for (; ++n < this.attachers.length; ) {
      const r = this.attachers[n];
      t.use(...r);
    }
    return t.data(nw(!0, {}, this.namespace)), t;
  }
  /**
   * Configure the processor with info available to all plugins.
   * Information is stored in an object.
   *
   * Typically, options can be given to a specific plugin, but sometimes it
   * makes sense to have information shared with several plugins.
   * For example, a list of HTML elements that are self-closing, which is
   * needed during all phases.
   *
   * > **Note**: setting information cannot occur on *frozen* processors.
   * > Call the processor first to create a new unfrozen processor.
   *
   * > **Note**: to register custom data in TypeScript, augment the
   * > {@linkcode Data} interface.
   *
   * @example
   *   This example show how to get and set info:
   *
   *   ```js
   *   import {unified} from 'unified'
   *
   *   const processor = unified().data('alpha', 'bravo')
   *
   *   processor.data('alpha') // => 'bravo'
   *
   *   processor.data() // => {alpha: 'bravo'}
   *
   *   processor.data({charlie: 'delta'})
   *
   *   processor.data() // => {charlie: 'delta'}
   *   ```
   *
   * @template {keyof Data} Key
   *
   * @overload
   * @returns {Data}
   *
   * @overload
   * @param {Data} dataset
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *
   * @overload
   * @param {Key} key
   * @returns {Data[Key]}
   *
   * @overload
   * @param {Key} key
   * @param {Data[Key]} value
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *
   * @param {Data | Key} [key]
   *   Key to get or set, or entire dataset to set, or nothing to get the
   *   entire dataset (optional).
   * @param {Data[Key]} [value]
   *   Value to set (optional).
   * @returns {unknown}
   *   The current processor when setting, the value at `key` when getting, or
   *   the entire dataset when getting without key.
   */
  data(t, n) {
    return typeof t == "string" ? arguments.length === 2 ? (lw("data", this.frozen), this.namespace[t] = n, this) : nW.call(this.namespace, t) && this.namespace[t] || void 0 : t ? (lw("data", this.frozen), this.namespace = t, this) : this.namespace;
  }
  /**
   * Freeze a processor.
   *
   * Frozen processors are meant to be extended and not to be configured
   * directly.
   *
   * When a processor is frozen it cannot be unfrozen.
   * New processors working the same way can be created by calling the
   * processor.
   *
   * Its possible to freeze processors explicitly by calling `.freeze()`.
   * Processors freeze automatically when `.parse()`, `.run()`, `.runSync()`,
   * `.stringify()`, `.process()`, or `.processSync()` are called.
   *
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *   The current processor.
   */
  freeze() {
    if (this.frozen)
      return this;
    const t = (
      /** @type {Processor} */
      /** @type {unknown} */
      this
    );
    for (; ++this.freezeIndex < this.attachers.length; ) {
      const [n, ...r] = this.attachers[this.freezeIndex];
      if (r[0] === !1)
        continue;
      r[0] === !0 && (r[0] = void 0);
      const i = n.call(t, ...r);
      typeof i == "function" && this.transformers.use(i);
    }
    return this.frozen = !0, this.freezeIndex = Number.POSITIVE_INFINITY, this;
  }
  /**
   * Parse text to a syntax tree.
   *
   * > **Note**: `parse` freezes the processor if not already *frozen*.
   *
   * > **Note**: `parse` performs the parse phase, not the run phase or other
   * > phases.
   *
   * @param {Compatible | undefined} [file]
   *   file to parse (optional); typically `string` or `VFile`; any value
   *   accepted as `x` in `new VFile(x)`.
   * @returns {ParseTree extends undefined ? Node : ParseTree}
   *   Syntax tree representing `file`.
   */
  parse(t) {
    this.freeze();
    const n = k1(t), r = this.parser || this.Parser;
    return aw("parse", r), r(String(n), n);
  }
  /**
   * Process the given file as configured on the processor.
   *
   * > **Note**: `process` freezes the processor if not already *frozen*.
   *
   * > **Note**: `process` performs the parse, run, and stringify phases.
   *
   * @overload
   * @param {Compatible | undefined} file
   * @param {ProcessCallback<VFileWithOutput<CompileResult>>} done
   * @returns {undefined}
   *
   * @overload
   * @param {Compatible | undefined} [file]
   * @returns {Promise<VFileWithOutput<CompileResult>>}
   *
   * @param {Compatible | undefined} [file]
   *   File (optional); typically `string` or `VFile`]; any value accepted as
   *   `x` in `new VFile(x)`.
   * @param {ProcessCallback<VFileWithOutput<CompileResult>> | undefined} [done]
   *   Callback (optional).
   * @returns {Promise<VFile> | undefined}
   *   Nothing if `done` is given.
   *   Otherwise a promise, rejected with a fatal error or resolved with the
   *   processed file.
   *
   *   The parsed, transformed, and compiled value is available at
   *   `file.value` (see note).
   *
   *   > **Note**: unified typically compiles by serializing: most
   *   > compilers return `string` (or `Uint8Array`).
   *   > Some compilers, such as the one configured with
   *   > [`rehype-react`][rehype-react], return other values (in this case, a
   *   > React tree).
   *   > If youre using a compiler that doesnt serialize, expect different
   *   > result values.
   *   >
   *   > To register custom results in TypeScript, add them to
   *   > {@linkcode CompileResultMap}.
   *
   *   [rehype-react]: https://github.com/rehypejs/rehype-react
   */
  process(t, n) {
    const r = this;
    return this.freeze(), aw("process", this.parser || this.Parser), ow("process", this.compiler || this.Compiler), n ? i(void 0, n) : new Promise(i);
    function i(a, o) {
      const u = k1(t), c = (
        /** @type {HeadTree extends undefined ? Node : HeadTree} */
        /** @type {unknown} */
        r.parse(u)
      );
      r.run(c, u, function(p, g, x) {
        if (p || !g || !x)
          return f(p);
        const b = (
          /** @type {CompileTree extends undefined ? Node : CompileTree} */
          /** @type {unknown} */
          g
        ), _ = r.stringify(b, x);
        sW(_) ? x.value = _ : x.result = _, f(
          p,
          /** @type {VFileWithOutput<CompileResult>} */
          x
        );
      });
      function f(p, g) {
        p || !g ? o(p) : a ? a(g) : n(void 0, g);
      }
    }
  }
  /**
   * Process the given file as configured on the processor.
   *
   * An error is thrown if asynchronous transforms are configured.
   *
   * > **Note**: `processSync` freezes the processor if not already *frozen*.
   *
   * > **Note**: `processSync` performs the parse, run, and stringify phases.
   *
   * @param {Compatible | undefined} [file]
   *   File (optional); typically `string` or `VFile`; any value accepted as
   *   `x` in `new VFile(x)`.
   * @returns {VFileWithOutput<CompileResult>}
   *   The processed file.
   *
   *   The parsed, transformed, and compiled value is available at
   *   `file.value` (see note).
   *
   *   > **Note**: unified typically compiles by serializing: most
   *   > compilers return `string` (or `Uint8Array`).
   *   > Some compilers, such as the one configured with
   *   > [`rehype-react`][rehype-react], return other values (in this case, a
   *   > React tree).
   *   > If youre using a compiler that doesnt serialize, expect different
   *   > result values.
   *   >
   *   > To register custom results in TypeScript, add them to
   *   > {@linkcode CompileResultMap}.
   *
   *   [rehype-react]: https://github.com/rehypejs/rehype-react
   */
  processSync(t) {
    let n = !1, r;
    return this.freeze(), aw("processSync", this.parser || this.Parser), ow("processSync", this.compiler || this.Compiler), this.process(t, i), f6("processSync", "process", n), r;
    function i(a, o) {
      n = !0, o6(a), r = o;
    }
  }
  /**
   * Run *transformers* on a syntax tree.
   *
   * > **Note**: `run` freezes the processor if not already *frozen*.
   *
   * > **Note**: `run` performs the run phase, not other phases.
   *
   * @overload
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done
   * @returns {undefined}
   *
   * @overload
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   * @param {Compatible | undefined} file
   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done
   * @returns {undefined}
   *
   * @overload
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   * @param {Compatible | undefined} [file]
   * @returns {Promise<TailTree extends undefined ? Node : TailTree>}
   *
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   *   Tree to transform and inspect.
   * @param {(
   *   RunCallback<TailTree extends undefined ? Node : TailTree> |
   *   Compatible
   * )} [file]
   *   File associated with `node` (optional); any value accepted as `x` in
   *   `new VFile(x)`.
   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} [done]
   *   Callback (optional).
   * @returns {Promise<TailTree extends undefined ? Node : TailTree> | undefined}
   *   Nothing if `done` is given.
   *   Otherwise, a promise rejected with a fatal error or resolved with the
   *   transformed tree.
   */
  run(t, n, r) {
    c6(t), this.freeze();
    const i = this.transformers;
    return !r && typeof n == "function" && (r = n, n = void 0), r ? a(void 0, r) : new Promise(a);
    function a(o, u) {
      const c = k1(n);
      i.run(t, c, f);
      function f(p, g, x) {
        const b = (
          /** @type {TailTree extends undefined ? Node : TailTree} */
          g || t
        );
        p ? u(p) : o ? o(b) : r(void 0, b, x);
      }
    }
  }
  /**
   * Run *transformers* on a syntax tree.
   *
   * An error is thrown if asynchronous transforms are configured.
   *
   * > **Note**: `runSync` freezes the processor if not already *frozen*.
   *
   * > **Note**: `runSync` performs the run phase, not other phases.
   *
   * @param {HeadTree extends undefined ? Node : HeadTree} tree
   *   Tree to transform and inspect.
   * @param {Compatible | undefined} [file]
   *   File associated with `node` (optional); any value accepted as `x` in
   *   `new VFile(x)`.
   * @returns {TailTree extends undefined ? Node : TailTree}
   *   Transformed tree.
   */
  runSync(t, n) {
    let r = !1, i;
    return this.run(t, n, a), f6("runSync", "run", r), i;
    function a(o, u) {
      o6(o), i = u, r = !0;
    }
  }
  /**
   * Compile a syntax tree.
   *
   * > **Note**: `stringify` freezes the processor if not already *frozen*.
   *
   * > **Note**: `stringify` performs the stringify phase, not the run phase
   * > or other phases.
   *
   * @param {CompileTree extends undefined ? Node : CompileTree} tree
   *   Tree to compile.
   * @param {Compatible | undefined} [file]
   *   File associated with `node` (optional); any value accepted as `x` in
   *   `new VFile(x)`.
   * @returns {CompileResult extends undefined ? Value : CompileResult}
   *   Textual representation of the tree (see note).
   *
   *   > **Note**: unified typically compiles by serializing: most compilers
   *   > return `string` (or `Uint8Array`).
   *   > Some compilers, such as the one configured with
   *   > [`rehype-react`][rehype-react], return other values (in this case, a
   *   > React tree).
   *   > If youre using a compiler that doesnt serialize, expect different
   *   > result values.
   *   >
   *   > To register custom results in TypeScript, add them to
   *   > {@linkcode CompileResultMap}.
   *
   *   [rehype-react]: https://github.com/rehypejs/rehype-react
   */
  stringify(t, n) {
    this.freeze();
    const r = k1(n), i = this.compiler || this.Compiler;
    return ow("stringify", i), c6(t), i(t, r);
  }
  /**
   * Configure the processor to use a plugin, a list of usable values, or a
   * preset.
   *
   * If the processor is already using a plugin, the previous plugin
   * configuration is changed based on the options that are passed in.
   * In other words, the plugin is not added a second time.
   *
   * > **Note**: `use` cannot be called on *frozen* processors.
   * > Call the processor first to create a new unfrozen processor.
   *
   * @example
   *   There are many ways to pass plugins to `.use()`.
   *   This example gives an overview:
   *
   *   ```js
   *   import {unified} from 'unified'
   *
   *   unified()
   *     // Plugin with options:
   *     .use(pluginA, {x: true, y: true})
   *     // Passing the same plugin again merges configuration (to `{x: true, y: false, z: true}`):
   *     .use(pluginA, {y: false, z: true})
   *     // Plugins:
   *     .use([pluginB, pluginC])
   *     // Two plugins, the second with options:
   *     .use([pluginD, [pluginE, {}]])
   *     // Preset with plugins and settings:
   *     .use({plugins: [pluginF, [pluginG, {}]], settings: {position: false}})
   *     // Settings only:
   *     .use({settings: {position: false}})
   *   ```
   *
   * @template {Array<unknown>} [Parameters=[]]
   * @template {Node | string | undefined} [Input=undefined]
   * @template [Output=Input]
   *
   * @overload
   * @param {Preset | null | undefined} [preset]
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *
   * @overload
   * @param {PluggableList} list
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *
   * @overload
   * @param {Plugin<Parameters, Input, Output>} plugin
   * @param {...(Parameters | [boolean])} parameters
   * @returns {UsePlugin<ParseTree, HeadTree, TailTree, CompileTree, CompileResult, Input, Output>}
   *
   * @param {PluggableList | Plugin | Preset | null | undefined} value
   *   Usable value.
   * @param {...unknown} parameters
   *   Parameters, when a plugin is given as a usable value.
   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}
   *   Current processor.
   */
  use(t, ...n) {
    const r = this.attachers, i = this.namespace;
    if (lw("use", this.frozen), t != null) if (typeof t == "function")
      c(t, n);
    else if (typeof t == "object")
      Array.isArray(t) ? u(t) : o(t);
    else
      throw new TypeError("Expected usable value, not `" + t + "`");
    return this;
    function a(f) {
      if (typeof f == "function")
        c(f, []);
      else if (typeof f == "object")
        if (Array.isArray(f)) {
          const [p, ...g] = (
            /** @type {PluginTuple<Array<unknown>>} */
            f
          );
          c(p, g);
        } else
          o(f);
      else
        throw new TypeError("Expected usable value, not `" + f + "`");
    }
    function o(f) {
      if (!("plugins" in f) && !("settings" in f))
        throw new Error(
          "Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither"
        );
      u(f.plugins), f.settings && (i.settings = nw(!0, i.settings, f.settings));
    }
    function u(f) {
      let p = -1;
      if (f != null) if (Array.isArray(f))
        for (; ++p < f.length; ) {
          const g = f[p];
          a(g);
        }
      else
        throw new TypeError("Expected a list of plugins, not `" + f + "`");
    }
    function c(f, p) {
      let g = -1, x = -1;
      for (; ++g < r.length; )
        if (r[g][0] === f) {
          x = g;
          break;
        }
      if (x === -1)
        r.push([f, ...p]);
      else if (p.length > 0) {
        let [b, ..._] = p;
        const E = r[x][1];
        kE(E) && kE(b) && (b = nw(!0, E, b)), r[x] = [f, b, ..._];
      }
    }
  }
}
const rW = new ok().freeze();
function aw(e, t) {
  if (typeof t != "function")
    throw new TypeError("Cannot `" + e + "` without `parser`");
}
function ow(e, t) {
  if (typeof t != "function")
    throw new TypeError("Cannot `" + e + "` without `compiler`");
}
function lw(e, t) {
  if (t)
    throw new Error(
      "Cannot call `" + e + "` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`."
    );
}
function c6(e) {
  if (!kE(e) || typeof e.type != "string")
    throw new TypeError("Expected node, got `" + e + "`");
}
function f6(e, t, n) {
  if (!n)
    throw new Error(
      "`" + e + "` finished async. Use `" + t + "` instead"
    );
}
function k1(e) {
  return iW(e) ? e : new _z(e);
}
function iW(e) {
  return !!(e && typeof e == "object" && "message" in e && "messages" in e);
}
function sW(e) {
  return typeof e == "string" || aW(e);
}
function aW(e) {
  return !!(e && typeof e == "object" && "byteLength" in e && "byteOffset" in e);
}
const d6 = [], h6 = { allowDangerousHtml: !0 }, oW = /^(https?|ircs?|mailto|xmpp)$/i, lW = [
  { from: "astPlugins", id: "remove-buggy-html-in-markdown-parser" },
  { from: "allowDangerousHtml", id: "remove-buggy-html-in-markdown-parser" },
  {
    from: "allowNode",
    id: "replace-allownode-allowedtypes-and-disallowedtypes",
    to: "allowElement"
  },
  {
    from: "allowedTypes",
    id: "replace-allownode-allowedtypes-and-disallowedtypes",
    to: "allowedElements"
  },
  { from: "className", id: "remove-classname" },
  {
    from: "disallowedTypes",
    id: "replace-allownode-allowedtypes-and-disallowedtypes",
    to: "disallowedElements"
  },
  { from: "escapeHtml", id: "remove-buggy-html-in-markdown-parser" },
  { from: "includeElementIndex", id: "#remove-includeelementindex" },
  {
    from: "includeNodeIndex",
    id: "change-includenodeindex-to-includeelementindex"
  },
  { from: "linkTarget", id: "remove-linktarget" },
  { from: "plugins", id: "change-plugins-to-remarkplugins", to: "remarkPlugins" },
  { from: "rawSourcePos", id: "#remove-rawsourcepos" },
  { from: "renderers", id: "change-renderers-to-components", to: "components" },
  { from: "source", id: "change-source-to-children", to: "children" },
  { from: "sourcePos", id: "#remove-sourcepos" },
  { from: "transformImageUri", id: "#add-urltransform", to: "urlTransform" },
  { from: "transformLinkUri", id: "#add-urltransform", to: "urlTransform" }
];
function uW(e) {
  const t = cW(e), n = fW(e);
  return dW(t.runSync(t.parse(n), n), e);
}
function cW(e) {
  const t = e.rehypePlugins || d6, n = e.remarkPlugins || d6, r = e.remarkRehypeOptions ? { ...e.remarkRehypeOptions, ...h6 } : h6;
  return rW().use(HK).use(n).use(BY, r).use(t);
}
function fW(e) {
  const t = e.children || "", n = new _z();
  return typeof t == "string" && (n.value = t), n;
}
function dW(e, t) {
  const n = t.allowedElements, r = t.allowElement, i = t.components, a = t.disallowedElements, o = t.skipHtml, u = t.unwrapDisallowed, c = t.urlTransform || hW;
  for (const p of lW)
    ;
  return ak(e, f), AH(e, {
    Fragment: h.Fragment,
    components: i,
    ignoreInvalidStyle: !0,
    jsx: h.jsx,
    jsxs: h.jsxs,
    passKeys: !0,
    passNode: !0
  });
  function f(p, g, x) {
    if (p.type === "raw" && x && typeof g == "number")
      return o ? x.children.splice(g, 1) : x.children[g] = { type: "text", value: p.value }, g;
    if (p.type === "element") {
      let b;
      for (b in Q2)
        if (Object.hasOwn(Q2, b) && Object.hasOwn(p.properties, b)) {
          const _ = p.properties[b], E = Q2[b];
          (E === null || E.includes(p.tagName)) && (p.properties[b] = c(String(_ || ""), b, p));
        }
    }
    if (p.type === "element") {
      let b = n ? !n.includes(p.tagName) : a ? a.includes(p.tagName) : !1;
      if (!b && r && typeof g == "number" && (b = !r(p, g, x)), b && x && typeof g == "number")
        return u && p.children ? x.children.splice(g, 1, ...p.children) : x.children.splice(g, 1), g;
    }
  }
}
function hW(e) {
  const t = e.indexOf(":"), n = e.indexOf("?"), r = e.indexOf("#"), i = e.indexOf("/");
  return (
    // If there is no protocol, its relative.
    t === -1 || // If the first colon is after a `?`, `#`, or `/`, its not a protocol.
    i !== -1 && t > i || n !== -1 && t > n || r !== -1 && t > r || // It is a protocol, it should be allowed.
    oW.test(e.slice(0, t)) ? e : ""
  );
}
function p6(e, t) {
  const n = String(e);
  if (typeof t != "string")
    throw new TypeError("Expected character");
  let r = 0, i = n.indexOf(t);
  for (; i !== -1; )
    r++, i = n.indexOf(t, i + t.length);
  return r;
}
function pW(e) {
  if (typeof e != "string")
    throw new TypeError("Expected a string");
  return e.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&").replace(/-/g, "\\x2d");
}
function mW(e, t, n) {
  const i = ab((n || {}).ignore || []), a = gW(t);
  let o = -1;
  for (; ++o < a.length; )
    wz(e, "text", u);
  function u(f, p) {
    let g = -1, x;
    for (; ++g < p.length; ) {
      const b = p[g], _ = x ? x.children : void 0;
      if (i(
        b,
        _ ? _.indexOf(b) : void 0,
        x
      ))
        return;
      x = b;
    }
    if (x)
      return c(f, p);
  }
  function c(f, p) {
    const g = p[p.length - 1], x = a[o][0], b = a[o][1];
    let _ = 0;
    const k = g.children.indexOf(f);
    let T = !1, R = [];
    x.lastIndex = 0;
    let N = x.exec(f.value);
    for (; N; ) {
      const O = N.index, P = {
        index: N.index,
        input: N.input,
        stack: [...p, f]
      };
      let z = b(...N, P);
      if (typeof z == "string" && (z = z.length > 0 ? { type: "text", value: z } : void 0), z === !1 ? x.lastIndex = O + 1 : (_ !== O && R.push({
        type: "text",
        value: f.value.slice(_, O)
      }), Array.isArray(z) ? R.push(...z) : z && R.push(z), _ = O + N[0].length, T = !0), !x.global)
        break;
      N = x.exec(f.value);
    }
    return T ? (_ < f.value.length && R.push({ type: "text", value: f.value.slice(_) }), g.children.splice(k, 1, ...R)) : R = [f], k + R.length;
  }
}
function gW(e) {
  const t = [];
  if (!Array.isArray(e))
    throw new TypeError("Expected find and replace tuple or list of tuples");
  const n = !e[0] || Array.isArray(e[0]) ? e : [e];
  let r = -1;
  for (; ++r < n.length; ) {
    const i = n[r];
    t.push([yW(i[0]), vW(i[1])]);
  }
  return t;
}
function yW(e) {
  return typeof e == "string" ? new RegExp(pW(e), "g") : e;
}
function vW(e) {
  return typeof e == "function" ? e : function() {
    return e;
  };
}
const uw = "phrasing", cw = ["autolink", "link", "image", "label"];
function xW() {
  return {
    transforms: [kW],
    enter: {
      literalAutolink: wW,
      literalAutolinkEmail: fw,
      literalAutolinkHttp: fw,
      literalAutolinkWww: fw
    },
    exit: {
      literalAutolink: EW,
      literalAutolinkEmail: CW,
      literalAutolinkHttp: _W,
      literalAutolinkWww: SW
    }
  };
}
function bW() {
  return {
    unsafe: [
      {
        character: "@",
        before: "[+\\-.\\w]",
        after: "[\\-.\\w]",
        inConstruct: uw,
        notInConstruct: cw
      },
      {
        character: ".",
        before: "[Ww]",
        after: "[\\-.\\w]",
        inConstruct: uw,
        notInConstruct: cw
      },
      {
        character: ":",
        before: "[ps]",
        after: "\\/",
        inConstruct: uw,
        notInConstruct: cw
      }
    ]
  };
}
function wW(e) {
  this.enter({ type: "link", title: null, url: "", children: [] }, e);
}
function fw(e) {
  this.config.enter.autolinkProtocol.call(this, e);
}
function _W(e) {
  this.config.exit.autolinkProtocol.call(this, e);
}
function SW(e) {
  this.config.exit.data.call(this, e);
  const t = this.stack[this.stack.length - 1];
  t.url = "http://" + this.sliceSerialize(e);
}
function CW(e) {
  this.config.exit.autolinkEmail.call(this, e);
}
function EW(e) {
  this.exit(e);
}
function kW(e) {
  mW(
    e,
    [
      [/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi, TW],
      [new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)", "gu"), AW]
    ],
    { ignore: ["link", "linkReference"] }
  );
}
function TW(e, t, n, r, i) {
  let a = "";
  if (!Sz(i) || (/^w/i.test(t) && (n = t + n, t = "", a = "http://"), !jW(n)))
    return !1;
  const o = NW(n + r);
  if (!o[0]) return !1;
  const u = {
    type: "link",
    title: null,
    url: a + t + o[0],
    children: [{ type: "text", value: t + o[0] }]
  };
  return o[1] ? [u, { type: "text", value: o[1] }] : u;
}
function AW(e, t, n, r) {
  return (
    // Not an expected previous character.
    !Sz(r, !0) || // Label ends in not allowed character.
    /[-\d_]$/.test(n) ? !1 : {
      type: "link",
      title: null,
      url: "mailto:" + t + "@" + n,
      children: [{ type: "text", value: t + "@" + n }]
    }
  );
}
function jW(e) {
  const t = e.split(".");
  return !(t.length < 2 || t[t.length - 1] && (/_/.test(t[t.length - 1]) || !/[a-zA-Z\d]/.test(t[t.length - 1])) || t[t.length - 2] && (/_/.test(t[t.length - 2]) || !/[a-zA-Z\d]/.test(t[t.length - 2])));
}
function NW(e) {
  const t = /[!"&'),.:;<>?\]}]+$/.exec(e);
  if (!t)
    return [e, void 0];
  e = e.slice(0, t.index);
  let n = t[0], r = n.indexOf(")");
  const i = p6(e, "(");
  let a = p6(e, ")");
  for (; r !== -1 && i > a; )
    e += n.slice(0, r + 1), n = n.slice(r + 1), r = n.indexOf(")"), a++;
  return [e, n];
}
function Sz(e, t) {
  const n = e.input.charCodeAt(e.index - 1);
  return (e.index === 0 || Xd(n) || rb(n)) && // If its an email, the previous character should not be a slash.
  (!t || n !== 47);
}
Cz.peek = BW;
function RW() {
  this.buffer();
}
function MW(e) {
  this.enter({ type: "footnoteReference", identifier: "", label: "" }, e);
}
function OW() {
  this.buffer();
}
function DW(e) {
  this.enter(
    { type: "footnoteDefinition", identifier: "", label: "", children: [] },
    e
  );
}
function zW(e) {
  const t = this.resume(), n = this.stack[this.stack.length - 1];
  n.identifier = Vo(
    this.sliceSerialize(e)
  ).toLowerCase(), n.label = t;
}
function PW(e) {
  this.exit(e);
}
function IW(e) {
  const t = this.resume(), n = this.stack[this.stack.length - 1];
  n.identifier = Vo(
    this.sliceSerialize(e)
  ).toLowerCase(), n.label = t;
}
function LW(e) {
  this.exit(e);
}
function BW() {
  return "[";
}
function Cz(e, t, n, r) {
  const i = n.createTracker(r);
  let a = i.move("[^");
  const o = n.enter("footnoteReference"), u = n.enter("reference");
  return a += i.move(
    n.safe(n.associationId(e), { after: "]", before: a })
  ), u(), o(), a += i.move("]"), a;
}
function qW() {
  return {
    enter: {
      gfmFootnoteCallString: RW,
      gfmFootnoteCall: MW,
      gfmFootnoteDefinitionLabelString: OW,
      gfmFootnoteDefinition: DW
    },
    exit: {
      gfmFootnoteCallString: zW,
      gfmFootnoteCall: PW,
      gfmFootnoteDefinitionLabelString: IW,
      gfmFootnoteDefinition: LW
    }
  };
}
function $W(e) {
  let t = !1;
  return e && e.firstLineBlank && (t = !0), {
    handlers: { footnoteDefinition: n, footnoteReference: Cz },
    // This is on by default already.
    unsafe: [{ character: "[", inConstruct: ["label", "phrasing", "reference"] }]
  };
  function n(r, i, a, o) {
    const u = a.createTracker(o);
    let c = u.move("[^");
    const f = a.enter("footnoteDefinition"), p = a.enter("label");
    return c += u.move(
      a.safe(a.associationId(r), { before: c, after: "]" })
    ), p(), c += u.move("]:"), r.children && r.children.length > 0 && (u.shift(4), c += u.move(
      (t ? `
` : " ") + a.indentLines(
        a.containerFlow(r, u.current()),
        t ? Ez : FW
      )
    )), f(), c;
  }
}
function FW(e, t, n) {
  return t === 0 ? e : Ez(e, t, n);
}
function Ez(e, t, n) {
  return (n ? "" : "    ") + e;
}
const UW = [
  "autolink",
  "destinationLiteral",
  "destinationRaw",
  "reference",
  "titleQuote",
  "titleApostrophe"
];
kz.peek = YW;
function VW() {
  return {
    canContainEols: ["delete"],
    enter: { strikethrough: GW },
    exit: { strikethrough: KW }
  };
}
function HW() {
  return {
    unsafe: [
      {
        character: "~",
        inConstruct: "phrasing",
        notInConstruct: UW
      }
    ],
    handlers: { delete: kz }
  };
}
function GW(e) {
  this.enter({ type: "delete", children: [] }, e);
}
function KW(e) {
  this.exit(e);
}
function kz(e, t, n, r) {
  const i = n.createTracker(r), a = n.enter("strikethrough");
  let o = i.move("~~");
  return o += n.containerPhrasing(e, {
    ...i.current(),
    before: o,
    after: "~"
  }), o += i.move("~~"), a(), o;
}
function YW() {
  return "~";
}
function WW(e) {
  return e.length;
}
function ZW(e, t) {
  const n = t || {}, r = (n.align || []).concat(), i = n.stringLength || WW, a = [], o = [], u = [], c = [];
  let f = 0, p = -1;
  for (; ++p < e.length; ) {
    const E = [], k = [];
    let T = -1;
    for (e[p].length > f && (f = e[p].length); ++T < e[p].length; ) {
      const R = XW(e[p][T]);
      if (n.alignDelimiters !== !1) {
        const N = i(R);
        k[T] = N, (c[T] === void 0 || N > c[T]) && (c[T] = N);
      }
      E.push(R);
    }
    o[p] = E, u[p] = k;
  }
  let g = -1;
  if (typeof r == "object" && "length" in r)
    for (; ++g < f; )
      a[g] = m6(r[g]);
  else {
    const E = m6(r);
    for (; ++g < f; )
      a[g] = E;
  }
  g = -1;
  const x = [], b = [];
  for (; ++g < f; ) {
    const E = a[g];
    let k = "", T = "";
    E === 99 ? (k = ":", T = ":") : E === 108 ? k = ":" : E === 114 && (T = ":");
    let R = n.alignDelimiters === !1 ? 1 : Math.max(
      1,
      c[g] - k.length - T.length
    );
    const N = k + "-".repeat(R) + T;
    n.alignDelimiters !== !1 && (R = k.length + R + T.length, R > c[g] && (c[g] = R), b[g] = R), x[g] = N;
  }
  o.splice(1, 0, x), u.splice(1, 0, b), p = -1;
  const _ = [];
  for (; ++p < o.length; ) {
    const E = o[p], k = u[p];
    g = -1;
    const T = [];
    for (; ++g < f; ) {
      const R = E[g] || "";
      let N = "", O = "";
      if (n.alignDelimiters !== !1) {
        const P = c[g] - (k[g] || 0), z = a[g];
        z === 114 ? N = " ".repeat(P) : z === 99 ? P % 2 ? (N = " ".repeat(P / 2 + 0.5), O = " ".repeat(P / 2 - 0.5)) : (N = " ".repeat(P / 2), O = N) : O = " ".repeat(P);
      }
      n.delimiterStart !== !1 && !g && T.push("|"), n.padding !== !1 && // Dont add the opening space if were not aligning and the cell is
      // empty: there will be a closing space.
      !(n.alignDelimiters === !1 && R === "") && (n.delimiterStart !== !1 || g) && T.push(" "), n.alignDelimiters !== !1 && T.push(N), T.push(R), n.alignDelimiters !== !1 && T.push(O), n.padding !== !1 && T.push(" "), (n.delimiterEnd !== !1 || g !== f - 1) && T.push("|");
    }
    _.push(
      n.delimiterEnd === !1 ? T.join("").replace(/ +$/, "") : T.join("")
    );
  }
  return _.join(`
`);
}
function XW(e) {
  return e == null ? "" : String(e);
}
function m6(e) {
  const t = typeof e == "string" ? e.codePointAt(0) : 0;
  return t === 67 || t === 99 ? 99 : t === 76 || t === 108 ? 108 : t === 82 || t === 114 ? 114 : 0;
}
function QW(e, t, n, r) {
  const i = n.enter("blockquote"), a = n.createTracker(r);
  a.move("> "), a.shift(2);
  const o = n.indentLines(
    n.containerFlow(e, a.current()),
    JW
  );
  return i(), o;
}
function JW(e, t, n) {
  return ">" + (n ? "" : " ") + e;
}
function eZ(e, t) {
  return g6(e, t.inConstruct, !0) && !g6(e, t.notInConstruct, !1);
}
function g6(e, t, n) {
  if (typeof t == "string" && (t = [t]), !t || t.length === 0)
    return n;
  let r = -1;
  for (; ++r < t.length; )
    if (e.includes(t[r]))
      return !0;
  return !1;
}
function y6(e, t, n, r) {
  let i = -1;
  for (; ++i < n.unsafe.length; )
    if (n.unsafe[i].character === `
` && eZ(n.stack, n.unsafe[i]))
      return /[ \t]/.test(r.before) ? "" : " ";
  return `\\
`;
}
function tZ(e, t) {
  const n = String(e);
  let r = n.indexOf(t), i = r, a = 0, o = 0;
  if (typeof t != "string")
    throw new TypeError("Expected substring");
  for (; r !== -1; )
    r === i ? ++a > o && (o = a) : a = 1, i = r + t.length, r = n.indexOf(t, i);
  return o;
}
function nZ(e, t) {
  return !!(t.options.fences === !1 && e.value && // If theres no info
  !e.lang && // And theres a non-whitespace character
  /[^ \r\n]/.test(e.value) && // And the value doesnt start or end in a blank
  !/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value));
}
function rZ(e) {
  const t = e.options.fence || "`";
  if (t !== "`" && t !== "~")
    throw new Error(
      "Cannot serialize code with `" + t + "` for `options.fence`, expected `` ` `` or `~`"
    );
  return t;
}
function iZ(e, t, n, r) {
  const i = rZ(n), a = e.value || "", o = i === "`" ? "GraveAccent" : "Tilde";
  if (nZ(e, n)) {
    const g = n.enter("codeIndented"), x = n.indentLines(a, sZ);
    return g(), x;
  }
  const u = n.createTracker(r), c = i.repeat(Math.max(tZ(a, i) + 1, 3)), f = n.enter("codeFenced");
  let p = u.move(c);
  if (e.lang) {
    const g = n.enter(`codeFencedLang${o}`);
    p += u.move(
      n.safe(e.lang, {
        before: p,
        after: " ",
        encode: ["`"],
        ...u.current()
      })
    ), g();
  }
  if (e.lang && e.meta) {
    const g = n.enter(`codeFencedMeta${o}`);
    p += u.move(" "), p += u.move(
      n.safe(e.meta, {
        before: p,
        after: `
`,
        encode: ["`"],
        ...u.current()
      })
    ), g();
  }
  return p += u.move(`
`), a && (p += u.move(a + `
`)), p += u.move(c), f(), p;
}
function sZ(e, t, n) {
  return (n ? "" : "    ") + e;
}
function lk(e) {
  const t = e.options.quote || '"';
  if (t !== '"' && t !== "'")
    throw new Error(
      "Cannot serialize title with `" + t + "` for `options.quote`, expected `\"`, or `'`"
    );
  return t;
}
function aZ(e, t, n, r) {
  const i = lk(n), a = i === '"' ? "Quote" : "Apostrophe", o = n.enter("definition");
  let u = n.enter("label");
  const c = n.createTracker(r);
  let f = c.move("[");
  return f += c.move(
    n.safe(n.associationId(e), {
      before: f,
      after: "]",
      ...c.current()
    })
  ), f += c.move("]: "), u(), // If theres no url, or
  !e.url || // If there are control characters or whitespace.
  /[\0- \u007F]/.test(e.url) ? (u = n.enter("destinationLiteral"), f += c.move("<"), f += c.move(
    n.safe(e.url, { before: f, after: ">", ...c.current() })
  ), f += c.move(">")) : (u = n.enter("destinationRaw"), f += c.move(
    n.safe(e.url, {
      before: f,
      after: e.title ? " " : `
`,
      ...c.current()
    })
  )), u(), e.title && (u = n.enter(`title${a}`), f += c.move(" " + i), f += c.move(
    n.safe(e.title, {
      before: f,
      after: i,
      ...c.current()
    })
  ), f += c.move(i), u()), o(), f;
}
function oZ(e) {
  const t = e.options.emphasis || "*";
  if (t !== "*" && t !== "_")
    throw new Error(
      "Cannot serialize emphasis with `" + t + "` for `options.emphasis`, expected `*`, or `_`"
    );
  return t;
}
function H0(e) {
  return "&#x" + e.toString(16).toUpperCase() + ";";
}
function wx(e, t, n) {
  const r = rm(e), i = rm(t);
  return r === void 0 ? i === void 0 ? (
    // Letter inside:
    // we have to encode *both* letters for `_` as it is looser.
    // it already forms for `*` (and GFMs `~`).
    n === "_" ? { inside: !0, outside: !0 } : { inside: !1, outside: !1 }
  ) : i === 1 ? (
    // Whitespace inside: encode both (letter, whitespace).
    { inside: !0, outside: !0 }
  ) : (
    // Punctuation inside: encode outer (letter)
    { inside: !1, outside: !0 }
  ) : r === 1 ? i === void 0 ? (
    // Letter inside: already forms.
    { inside: !1, outside: !1 }
  ) : i === 1 ? (
    // Whitespace inside: encode both (whitespace).
    { inside: !0, outside: !0 }
  ) : (
    // Punctuation inside: already forms.
    { inside: !1, outside: !1 }
  ) : i === void 0 ? (
    // Letter inside: already forms.
    { inside: !1, outside: !1 }
  ) : i === 1 ? (
    // Whitespace inside: encode inner (whitespace).
    { inside: !0, outside: !1 }
  ) : (
    // Punctuation inside: already forms.
    { inside: !1, outside: !1 }
  );
}
Tz.peek = lZ;
function Tz(e, t, n, r) {
  const i = oZ(n), a = n.enter("emphasis"), o = n.createTracker(r), u = o.move(i);
  let c = o.move(
    n.containerPhrasing(e, {
      after: i,
      before: u,
      ...o.current()
    })
  );
  const f = c.charCodeAt(0), p = wx(
    r.before.charCodeAt(r.before.length - 1),
    f,
    i
  );
  p.inside && (c = H0(f) + c.slice(1));
  const g = c.charCodeAt(c.length - 1), x = wx(r.after.charCodeAt(0), g, i);
  x.inside && (c = c.slice(0, -1) + H0(g));
  const b = o.move(i);
  return a(), n.attentionEncodeSurroundingInfo = {
    after: x.outside,
    before: p.outside
  }, u + c + b;
}
function lZ(e, t, n) {
  return n.options.emphasis || "*";
}
function uZ(e, t) {
  let n = !1;
  return ak(e, function(r) {
    if ("value" in r && /\r?\n|\r/.test(r.value) || r.type === "break")
      return n = !0, CE;
  }), !!((!e.depth || e.depth < 3) && J5(e) && (t.options.setext || n));
}
function cZ(e, t, n, r) {
  const i = Math.max(Math.min(6, e.depth || 1), 1), a = n.createTracker(r);
  if (uZ(e, n)) {
    const p = n.enter("headingSetext"), g = n.enter("phrasing"), x = n.containerPhrasing(e, {
      ...a.current(),
      before: `
`,
      after: `
`
    });
    return g(), p(), x + `
` + (i === 1 ? "=" : "-").repeat(
      // The whole size
      x.length - // Minus the position of the character after the last EOL (or
      // 0 if there is none)
      (Math.max(x.lastIndexOf("\r"), x.lastIndexOf(`
`)) + 1)
    );
  }
  const o = "#".repeat(i), u = n.enter("headingAtx"), c = n.enter("phrasing");
  a.move(o + " ");
  let f = n.containerPhrasing(e, {
    before: "# ",
    after: `
`,
    ...a.current()
  });
  return /^[\t ]/.test(f) && (f = H0(f.charCodeAt(0)) + f.slice(1)), f = f ? o + " " + f : o, n.options.closeAtx && (f += " " + o), c(), u(), f;
}
Az.peek = fZ;
function Az(e) {
  return e.value || "";
}
function fZ() {
  return "<";
}
jz.peek = dZ;
function jz(e, t, n, r) {
  const i = lk(n), a = i === '"' ? "Quote" : "Apostrophe", o = n.enter("image");
  let u = n.enter("label");
  const c = n.createTracker(r);
  let f = c.move("![");
  return f += c.move(
    n.safe(e.alt, { before: f, after: "]", ...c.current() })
  ), f += c.move("]("), u(), // If theres no url but there is a title
  !e.url && e.title || // If there are control characters or whitespace.
  /[\0- \u007F]/.test(e.url) ? (u = n.enter("destinationLiteral"), f += c.move("<"), f += c.move(
    n.safe(e.url, { before: f, after: ">", ...c.current() })
  ), f += c.move(">")) : (u = n.enter("destinationRaw"), f += c.move(
    n.safe(e.url, {
      before: f,
      after: e.title ? " " : ")",
      ...c.current()
    })
  )), u(), e.title && (u = n.enter(`title${a}`), f += c.move(" " + i), f += c.move(
    n.safe(e.title, {
      before: f,
      after: i,
      ...c.current()
    })
  ), f += c.move(i), u()), f += c.move(")"), o(), f;
}
function dZ() {
  return "!";
}
Nz.peek = hZ;
function Nz(e, t, n, r) {
  const i = e.referenceType, a = n.enter("imageReference");
  let o = n.enter("label");
  const u = n.createTracker(r);
  let c = u.move("![");
  const f = n.safe(e.alt, {
    before: c,
    after: "]",
    ...u.current()
  });
  c += u.move(f + "]["), o();
  const p = n.stack;
  n.stack = [], o = n.enter("reference");
  const g = n.safe(n.associationId(e), {
    before: c,
    after: "]",
    ...u.current()
  });
  return o(), n.stack = p, a(), i === "full" || !f || f !== g ? c += u.move(g + "]") : i === "shortcut" ? c = c.slice(0, -1) : c += u.move("]"), c;
}
function hZ() {
  return "!";
}
Rz.peek = pZ;
function Rz(e, t, n) {
  let r = e.value || "", i = "`", a = -1;
  for (; new RegExp("(^|[^`])" + i + "([^`]|$)").test(r); )
    i += "`";
  for (/[^ \r\n]/.test(r) && (/^[ \r\n]/.test(r) && /[ \r\n]$/.test(r) || /^`|`$/.test(r)) && (r = " " + r + " "); ++a < n.unsafe.length; ) {
    const o = n.unsafe[a], u = n.compilePattern(o);
    let c;
    if (o.atBreak)
      for (; c = u.exec(r); ) {
        let f = c.index;
        r.charCodeAt(f) === 10 && r.charCodeAt(f - 1) === 13 && f--, r = r.slice(0, f) + " " + r.slice(c.index + 1);
      }
  }
  return i + r + i;
}
function pZ() {
  return "`";
}
function Mz(e, t) {
  const n = J5(e);
  return !!(!t.options.resourceLink && // If theres a url
  e.url && // And theres a no title
  !e.title && // And the content of `node` is a single text node
  e.children && e.children.length === 1 && e.children[0].type === "text" && // And if the url is the same as the content
  (n === e.url || "mailto:" + n === e.url) && // And that starts w/ a protocol
  /^[a-z][a-z+.-]+:/i.test(e.url) && // And that doesnt contain ASCII control codes (character escapes and
  // references dont work), space, or angle brackets
  !/[\0- <>\u007F]/.test(e.url));
}
Oz.peek = mZ;
function Oz(e, t, n, r) {
  const i = lk(n), a = i === '"' ? "Quote" : "Apostrophe", o = n.createTracker(r);
  let u, c;
  if (Mz(e, n)) {
    const p = n.stack;
    n.stack = [], u = n.enter("autolink");
    let g = o.move("<");
    return g += o.move(
      n.containerPhrasing(e, {
        before: g,
        after: ">",
        ...o.current()
      })
    ), g += o.move(">"), u(), n.stack = p, g;
  }
  u = n.enter("link"), c = n.enter("label");
  let f = o.move("[");
  return f += o.move(
    n.containerPhrasing(e, {
      before: f,
      after: "](",
      ...o.current()
    })
  ), f += o.move("]("), c(), // If theres no url but there is a title
  !e.url && e.title || // If there are control characters or whitespace.
  /[\0- \u007F]/.test(e.url) ? (c = n.enter("destinationLiteral"), f += o.move("<"), f += o.move(
    n.safe(e.url, { before: f, after: ">", ...o.current() })
  ), f += o.move(">")) : (c = n.enter("destinationRaw"), f += o.move(
    n.safe(e.url, {
      before: f,
      after: e.title ? " " : ")",
      ...o.current()
    })
  )), c(), e.title && (c = n.enter(`title${a}`), f += o.move(" " + i), f += o.move(
    n.safe(e.title, {
      before: f,
      after: i,
      ...o.current()
    })
  ), f += o.move(i), c()), f += o.move(")"), u(), f;
}
function mZ(e, t, n) {
  return Mz(e, n) ? "<" : "[";
}
Dz.peek = gZ;
function Dz(e, t, n, r) {
  const i = e.referenceType, a = n.enter("linkReference");
  let o = n.enter("label");
  const u = n.createTracker(r);
  let c = u.move("[");
  const f = n.containerPhrasing(e, {
    before: c,
    after: "]",
    ...u.current()
  });
  c += u.move(f + "]["), o();
  const p = n.stack;
  n.stack = [], o = n.enter("reference");
  const g = n.safe(n.associationId(e), {
    before: c,
    after: "]",
    ...u.current()
  });
  return o(), n.stack = p, a(), i === "full" || !f || f !== g ? c += u.move(g + "]") : i === "shortcut" ? c = c.slice(0, -1) : c += u.move("]"), c;
}
function gZ() {
  return "[";
}
function uk(e) {
  const t = e.options.bullet || "*";
  if (t !== "*" && t !== "+" && t !== "-")
    throw new Error(
      "Cannot serialize items with `" + t + "` for `options.bullet`, expected `*`, `+`, or `-`"
    );
  return t;
}
function yZ(e) {
  const t = uk(e), n = e.options.bulletOther;
  if (!n)
    return t === "*" ? "-" : "*";
  if (n !== "*" && n !== "+" && n !== "-")
    throw new Error(
      "Cannot serialize items with `" + n + "` for `options.bulletOther`, expected `*`, `+`, or `-`"
    );
  if (n === t)
    throw new Error(
      "Expected `bullet` (`" + t + "`) and `bulletOther` (`" + n + "`) to be different"
    );
  return n;
}
function vZ(e) {
  const t = e.options.bulletOrdered || ".";
  if (t !== "." && t !== ")")
    throw new Error(
      "Cannot serialize items with `" + t + "` for `options.bulletOrdered`, expected `.` or `)`"
    );
  return t;
}
function zz(e) {
  const t = e.options.rule || "*";
  if (t !== "*" && t !== "-" && t !== "_")
    throw new Error(
      "Cannot serialize rules with `" + t + "` for `options.rule`, expected `*`, `-`, or `_`"
    );
  return t;
}
function xZ(e, t, n, r) {
  const i = n.enter("list"), a = n.bulletCurrent;
  let o = e.ordered ? vZ(n) : uk(n);
  const u = e.ordered ? o === "." ? ")" : "." : yZ(n);
  let c = t && n.bulletLastUsed ? o === n.bulletLastUsed : !1;
  if (!e.ordered) {
    const p = e.children ? e.children[0] : void 0;
    if (
      // Bullet could be used as a thematic break marker:
      (o === "*" || o === "-") && // Empty first list item:
      p && (!p.children || !p.children[0]) && // Directly in two other list items:
      n.stack[n.stack.length - 1] === "list" && n.stack[n.stack.length - 2] === "listItem" && n.stack[n.stack.length - 3] === "list" && n.stack[n.stack.length - 4] === "listItem" && // That are each the first child.
      n.indexStack[n.indexStack.length - 1] === 0 && n.indexStack[n.indexStack.length - 2] === 0 && n.indexStack[n.indexStack.length - 3] === 0 && (c = !0), zz(n) === o && p
    ) {
      let g = -1;
      for (; ++g < e.children.length; ) {
        const x = e.children[g];
        if (x && x.type === "listItem" && x.children && x.children[0] && x.children[0].type === "thematicBreak") {
          c = !0;
          break;
        }
      }
    }
  }
  c && (o = u), n.bulletCurrent = o;
  const f = n.containerFlow(e, r);
  return n.bulletLastUsed = o, n.bulletCurrent = a, i(), f;
}
function bZ(e) {
  const t = e.options.listItemIndent || "one";
  if (t !== "tab" && t !== "one" && t !== "mixed")
    throw new Error(
      "Cannot serialize items with `" + t + "` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`"
    );
  return t;
}
function wZ(e, t, n, r) {
  const i = bZ(n);
  let a = n.bulletCurrent || uk(n);
  t && t.type === "list" && t.ordered && (a = (typeof t.start == "number" && t.start > -1 ? t.start : 1) + (n.options.incrementListMarker === !1 ? 0 : t.children.indexOf(e)) + a);
  let o = a.length + 1;
  (i === "tab" || i === "mixed" && (t && t.type === "list" && t.spread || e.spread)) && (o = Math.ceil(o / 4) * 4);
  const u = n.createTracker(r);
  u.move(a + " ".repeat(o - a.length)), u.shift(o);
  const c = n.enter("listItem"), f = n.indentLines(
    n.containerFlow(e, u.current()),
    p
  );
  return c(), f;
  function p(g, x, b) {
    return x ? (b ? "" : " ".repeat(o)) + g : (b ? a : a + " ".repeat(o - a.length)) + g;
  }
}
function _Z(e, t, n, r) {
  const i = n.enter("paragraph"), a = n.enter("phrasing"), o = n.containerPhrasing(e, r);
  return a(), i(), o;
}
const SZ = (
  /** @type {(node?: unknown) => node is Exclude<PhrasingContent, Html>} */
  ab([
    "break",
    "delete",
    "emphasis",
    // To do: next major: removed since footnotes were added to GFM.
    "footnote",
    "footnoteReference",
    "image",
    "imageReference",
    "inlineCode",
    // Enabled by `mdast-util-math`:
    "inlineMath",
    "link",
    "linkReference",
    // Enabled by `mdast-util-mdx`:
    "mdxJsxTextElement",
    // Enabled by `mdast-util-mdx`:
    "mdxTextExpression",
    "strong",
    "text",
    // Enabled by `mdast-util-directive`:
    "textDirective"
  ])
);
function CZ(e, t, n, r) {
  return (e.children.some(function(o) {
    return SZ(o);
  }) ? n.containerPhrasing : n.containerFlow).call(n, e, r);
}
function EZ(e) {
  const t = e.options.strong || "*";
  if (t !== "*" && t !== "_")
    throw new Error(
      "Cannot serialize strong with `" + t + "` for `options.strong`, expected `*`, or `_`"
    );
  return t;
}
Pz.peek = kZ;
function Pz(e, t, n, r) {
  const i = EZ(n), a = n.enter("strong"), o = n.createTracker(r), u = o.move(i + i);
  let c = o.move(
    n.containerPhrasing(e, {
      after: i,
      before: u,
      ...o.current()
    })
  );
  const f = c.charCodeAt(0), p = wx(
    r.before.charCodeAt(r.before.length - 1),
    f,
    i
  );
  p.inside && (c = H0(f) + c.slice(1));
  const g = c.charCodeAt(c.length - 1), x = wx(r.after.charCodeAt(0), g, i);
  x.inside && (c = c.slice(0, -1) + H0(g));
  const b = o.move(i + i);
  return a(), n.attentionEncodeSurroundingInfo = {
    after: x.outside,
    before: p.outside
  }, u + c + b;
}
function kZ(e, t, n) {
  return n.options.strong || "*";
}
function TZ(e, t, n, r) {
  return n.safe(e.value, r);
}
function AZ(e) {
  const t = e.options.ruleRepetition || 3;
  if (t < 3)
    throw new Error(
      "Cannot serialize rules with repetition `" + t + "` for `options.ruleRepetition`, expected `3` or more"
    );
  return t;
}
function jZ(e, t, n) {
  const r = (zz(n) + (n.options.ruleSpaces ? " " : "")).repeat(AZ(n));
  return n.options.ruleSpaces ? r.slice(0, -1) : r;
}
const Iz = {
  blockquote: QW,
  break: y6,
  code: iZ,
  definition: aZ,
  emphasis: Tz,
  hardBreak: y6,
  heading: cZ,
  html: Az,
  image: jz,
  imageReference: Nz,
  inlineCode: Rz,
  link: Oz,
  linkReference: Dz,
  list: xZ,
  listItem: wZ,
  paragraph: _Z,
  root: CZ,
  strong: Pz,
  text: TZ,
  thematicBreak: jZ
};
function NZ() {
  return {
    enter: {
      table: RZ,
      tableData: v6,
      tableHeader: v6,
      tableRow: OZ
    },
    exit: {
      codeText: DZ,
      table: MZ,
      tableData: dw,
      tableHeader: dw,
      tableRow: dw
    }
  };
}
function RZ(e) {
  const t = e._align;
  this.enter(
    {
      type: "table",
      align: t.map(function(n) {
        return n === "none" ? null : n;
      }),
      children: []
    },
    e
  ), this.data.inTable = !0;
}
function MZ(e) {
  this.exit(e), this.data.inTable = void 0;
}
function OZ(e) {
  this.enter({ type: "tableRow", children: [] }, e);
}
function dw(e) {
  this.exit(e);
}
function v6(e) {
  this.enter({ type: "tableCell", children: [] }, e);
}
function DZ(e) {
  let t = this.resume();
  this.data.inTable && (t = t.replace(/\\([\\|])/g, zZ));
  const n = this.stack[this.stack.length - 1];
  n.value = t, this.exit(e);
}
function zZ(e, t) {
  return t === "|" ? t : e;
}
function PZ(e) {
  const t = e || {}, n = t.tableCellPadding, r = t.tablePipeAlign, i = t.stringLength, a = n ? " " : "|";
  return {
    unsafe: [
      { character: "\r", inConstruct: "tableCell" },
      { character: `
`, inConstruct: "tableCell" },
      // A pipe, when followed by a tab or space (padding), or a dash or colon
      // (unpadded delimiter row), could result in a table.
      { atBreak: !0, character: "|", after: "[	 :-]" },
      // A pipe in a cell must be encoded.
      { character: "|", inConstruct: "tableCell" },
      // A colon must be followed by a dash, in which case it could start a
      // delimiter row.
      { atBreak: !0, character: ":", after: "-" },
      // A delimiter row can also start with a dash, when followed by more
      // dashes, a colon, or a pipe.
      // This is a stricter version than the built in check for lists, thematic
      // breaks, and setex heading underlines though:
      // <https://github.com/syntax-tree/mdast-util-to-markdown/blob/51a2038/lib/unsafe.js#L57>
      { atBreak: !0, character: "-", after: "[:|-]" }
    ],
    handlers: {
      inlineCode: x,
      table: o,
      tableCell: c,
      tableRow: u
    }
  };
  function o(b, _, E, k) {
    return f(p(b, E, k), b.align);
  }
  function u(b, _, E, k) {
    const T = g(b, E, k), R = f([T]);
    return R.slice(0, R.indexOf(`
`));
  }
  function c(b, _, E, k) {
    const T = E.enter("tableCell"), R = E.enter("phrasing"), N = E.containerPhrasing(b, {
      ...k,
      before: a,
      after: a
    });
    return R(), T(), N;
  }
  function f(b, _) {
    return ZW(b, {
      align: _,
      // @ts-expect-error: `markdown-table` types should support `null`.
      alignDelimiters: r,
      // @ts-expect-error: `markdown-table` types should support `null`.
      padding: n,
      // @ts-expect-error: `markdown-table` types should support `null`.
      stringLength: i
    });
  }
  function p(b, _, E) {
    const k = b.children;
    let T = -1;
    const R = [], N = _.enter("table");
    for (; ++T < k.length; )
      R[T] = g(k[T], _, E);
    return N(), R;
  }
  function g(b, _, E) {
    const k = b.children;
    let T = -1;
    const R = [], N = _.enter("tableRow");
    for (; ++T < k.length; )
      R[T] = c(k[T], b, _, E);
    return N(), R;
  }
  function x(b, _, E) {
    let k = Iz.inlineCode(b, _, E);
    return E.stack.includes("tableCell") && (k = k.replace(/\|/g, "\\$&")), k;
  }
}
function IZ() {
  return {
    exit: {
      taskListCheckValueChecked: x6,
      taskListCheckValueUnchecked: x6,
      paragraph: BZ
    }
  };
}
function LZ() {
  return {
    unsafe: [{ atBreak: !0, character: "-", after: "[:|-]" }],
    handlers: { listItem: qZ }
  };
}
function x6(e) {
  const t = this.stack[this.stack.length - 2];
  t.checked = e.type === "taskListCheckValueChecked";
}
function BZ(e) {
  const t = this.stack[this.stack.length - 2];
  if (t && t.type === "listItem" && typeof t.checked == "boolean") {
    const n = this.stack[this.stack.length - 1], r = n.children[0];
    if (r && r.type === "text") {
      const i = t.children;
      let a = -1, o;
      for (; ++a < i.length; ) {
        const u = i[a];
        if (u.type === "paragraph") {
          o = u;
          break;
        }
      }
      o === n && (r.value = r.value.slice(1), r.value.length === 0 ? n.children.shift() : n.position && r.position && typeof r.position.start.offset == "number" && (r.position.start.column++, r.position.start.offset++, n.position.start = Object.assign({}, r.position.start)));
    }
  }
  this.exit(e);
}
function qZ(e, t, n, r) {
  const i = e.children[0], a = typeof e.checked == "boolean" && i && i.type === "paragraph", o = "[" + (e.checked ? "x" : " ") + "] ", u = n.createTracker(r);
  a && u.move(o);
  let c = Iz.listItem(e, t, n, {
    ...r,
    ...u.current()
  });
  return a && (c = c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/, f)), c;
  function f(p) {
    return p + o;
  }
}
function $Z() {
  return [
    xW(),
    qW(),
    VW(),
    NZ(),
    IZ()
  ];
}
function FZ(e) {
  return {
    extensions: [
      bW(),
      $W(e),
      HW(),
      PZ(e),
      LZ()
    ]
  };
}
const UZ = {
  tokenize: WZ,
  partial: !0
}, Lz = {
  tokenize: ZZ,
  partial: !0
}, Bz = {
  tokenize: XZ,
  partial: !0
}, qz = {
  tokenize: QZ,
  partial: !0
}, VZ = {
  tokenize: JZ,
  partial: !0
}, $z = {
  name: "wwwAutolink",
  tokenize: KZ,
  previous: Uz
}, Fz = {
  name: "protocolAutolink",
  tokenize: YZ,
  previous: Vz
}, Fu = {
  name: "emailAutolink",
  tokenize: GZ,
  previous: Hz
}, Kl = {};
function HZ() {
  return {
    text: Kl
  };
}
let jd = 48;
for (; jd < 123; )
  Kl[jd] = Fu, jd++, jd === 58 ? jd = 65 : jd === 91 && (jd = 97);
Kl[43] = Fu;
Kl[45] = Fu;
Kl[46] = Fu;
Kl[95] = Fu;
Kl[72] = [Fu, Fz];
Kl[104] = [Fu, Fz];
Kl[87] = [Fu, $z];
Kl[119] = [Fu, $z];
function GZ(e, t, n) {
  const r = this;
  let i, a;
  return o;
  function o(g) {
    return !AE(g) || !Hz.call(r, r.previous) || ck(r.events) ? n(g) : (e.enter("literalAutolink"), e.enter("literalAutolinkEmail"), u(g));
  }
  function u(g) {
    return AE(g) ? (e.consume(g), u) : g === 64 ? (e.consume(g), c) : n(g);
  }
  function c(g) {
    return g === 46 ? e.check(VZ, p, f)(g) : g === 45 || g === 95 || Wi(g) ? (a = !0, e.consume(g), c) : p(g);
  }
  function f(g) {
    return e.consume(g), i = !0, c;
  }
  function p(g) {
    return a && i && xs(r.previous) ? (e.exit("literalAutolinkEmail"), e.exit("literalAutolink"), t(g)) : n(g);
  }
}
function KZ(e, t, n) {
  const r = this;
  return i;
  function i(o) {
    return o !== 87 && o !== 119 || !Uz.call(r, r.previous) || ck(r.events) ? n(o) : (e.enter("literalAutolink"), e.enter("literalAutolinkWww"), e.check(UZ, e.attempt(Lz, e.attempt(Bz, a), n), n)(o));
  }
  function a(o) {
    return e.exit("literalAutolinkWww"), e.exit("literalAutolink"), t(o);
  }
}
function YZ(e, t, n) {
  const r = this;
  let i = "", a = !1;
  return o;
  function o(g) {
    return (g === 72 || g === 104) && Vz.call(r, r.previous) && !ck(r.events) ? (e.enter("literalAutolink"), e.enter("literalAutolinkHttp"), i += String.fromCodePoint(g), e.consume(g), u) : n(g);
  }
  function u(g) {
    if (xs(g) && i.length < 5)
      return i += String.fromCodePoint(g), e.consume(g), u;
    if (g === 58) {
      const x = i.toLowerCase();
      if (x === "http" || x === "https")
        return e.consume(g), c;
    }
    return n(g);
  }
  function c(g) {
    return g === 47 ? (e.consume(g), a ? f : (a = !0, c)) : n(g);
  }
  function f(g) {
    return g === null || vx(g) || Wn(g) || Xd(g) || rb(g) ? n(g) : e.attempt(Lz, e.attempt(Bz, p), n)(g);
  }
  function p(g) {
    return e.exit("literalAutolinkHttp"), e.exit("literalAutolink"), t(g);
  }
}
function WZ(e, t, n) {
  let r = 0;
  return i;
  function i(o) {
    return (o === 87 || o === 119) && r < 3 ? (r++, e.consume(o), i) : o === 46 && r === 3 ? (e.consume(o), a) : n(o);
  }
  function a(o) {
    return o === null ? n(o) : t(o);
  }
}
function ZZ(e, t, n) {
  let r, i, a;
  return o;
  function o(f) {
    return f === 46 || f === 95 ? e.check(qz, c, u)(f) : f === null || Wn(f) || Xd(f) || f !== 45 && rb(f) ? c(f) : (a = !0, e.consume(f), o);
  }
  function u(f) {
    return f === 95 ? r = !0 : (i = r, r = void 0), e.consume(f), o;
  }
  function c(f) {
    return i || r || !a ? n(f) : t(f);
  }
}
function XZ(e, t) {
  let n = 0, r = 0;
  return i;
  function i(o) {
    return o === 40 ? (n++, e.consume(o), i) : o === 41 && r < n ? a(o) : o === 33 || o === 34 || o === 38 || o === 39 || o === 41 || o === 42 || o === 44 || o === 46 || o === 58 || o === 59 || o === 60 || o === 63 || o === 93 || o === 95 || o === 126 ? e.check(qz, t, a)(o) : o === null || Wn(o) || Xd(o) ? t(o) : (e.consume(o), i);
  }
  function a(o) {
    return o === 41 && r++, e.consume(o), i;
  }
}
function QZ(e, t, n) {
  return r;
  function r(u) {
    return u === 33 || u === 34 || u === 39 || u === 41 || u === 42 || u === 44 || u === 46 || u === 58 || u === 59 || u === 63 || u === 95 || u === 126 ? (e.consume(u), r) : u === 38 ? (e.consume(u), a) : u === 93 ? (e.consume(u), i) : (
      // `<` is an end.
      u === 60 || // So is whitespace.
      u === null || Wn(u) || Xd(u) ? t(u) : n(u)
    );
  }
  function i(u) {
    return u === null || u === 40 || u === 91 || Wn(u) || Xd(u) ? t(u) : r(u);
  }
  function a(u) {
    return xs(u) ? o(u) : n(u);
  }
  function o(u) {
    return u === 59 ? (e.consume(u), r) : xs(u) ? (e.consume(u), o) : n(u);
  }
}
function JZ(e, t, n) {
  return r;
  function r(a) {
    return e.consume(a), i;
  }
  function i(a) {
    return Wi(a) ? n(a) : t(a);
  }
}
function Uz(e) {
  return e === null || e === 40 || e === 42 || e === 95 || e === 91 || e === 93 || e === 126 || Wn(e);
}
function Vz(e) {
  return !xs(e);
}
function Hz(e) {
  return !(e === 47 || AE(e));
}
function AE(e) {
  return e === 43 || e === 45 || e === 46 || e === 95 || Wi(e);
}
function ck(e) {
  let t = e.length, n = !1;
  for (; t--; ) {
    const r = e[t][1];
    if ((r.type === "labelLink" || r.type === "labelImage") && !r._balanced) {
      n = !0;
      break;
    }
    if (r._gfmAutolinkLiteralWalkedInto) {
      n = !1;
      break;
    }
  }
  return e.length > 0 && !n && (e[e.length - 1][1]._gfmAutolinkLiteralWalkedInto = !0), n;
}
const eX = {
  tokenize: lX,
  partial: !0
};
function tX() {
  return {
    document: {
      91: {
        name: "gfmFootnoteDefinition",
        tokenize: sX,
        continuation: {
          tokenize: aX
        },
        exit: oX
      }
    },
    text: {
      91: {
        name: "gfmFootnoteCall",
        tokenize: iX
      },
      93: {
        name: "gfmPotentialFootnoteCall",
        add: "after",
        tokenize: nX,
        resolveTo: rX
      }
    }
  };
}
function nX(e, t, n) {
  const r = this;
  let i = r.events.length;
  const a = r.parser.gfmFootnotes || (r.parser.gfmFootnotes = []);
  let o;
  for (; i--; ) {
    const c = r.events[i][1];
    if (c.type === "labelImage") {
      o = c;
      break;
    }
    if (c.type === "gfmFootnoteCall" || c.type === "labelLink" || c.type === "label" || c.type === "image" || c.type === "link")
      break;
  }
  return u;
  function u(c) {
    if (!o || !o._balanced)
      return n(c);
    const f = Vo(r.sliceSerialize({
      start: o.end,
      end: r.now()
    }));
    return f.codePointAt(0) !== 94 || !a.includes(f.slice(1)) ? n(c) : (e.enter("gfmFootnoteCallLabelMarker"), e.consume(c), e.exit("gfmFootnoteCallLabelMarker"), t(c));
  }
}
function rX(e, t) {
  let n = e.length;
  for (; n-- && !(e[n][1].type === "labelImage" && e[n][0] === "enter"); )
    ;
  e[n + 1][1].type = "data", e[n + 3][1].type = "gfmFootnoteCallLabelMarker";
  const r = {
    type: "gfmFootnoteCall",
    start: Object.assign({}, e[n + 3][1].start),
    end: Object.assign({}, e[e.length - 1][1].end)
  }, i = {
    type: "gfmFootnoteCallMarker",
    start: Object.assign({}, e[n + 3][1].end),
    end: Object.assign({}, e[n + 3][1].end)
  };
  i.end.column++, i.end.offset++, i.end._bufferIndex++;
  const a = {
    type: "gfmFootnoteCallString",
    start: Object.assign({}, i.end),
    end: Object.assign({}, e[e.length - 1][1].start)
  }, o = {
    type: "chunkString",
    contentType: "string",
    start: Object.assign({}, a.start),
    end: Object.assign({}, a.end)
  }, u = [
    // Take the `labelImageMarker` (now `data`, the `!`)
    e[n + 1],
    e[n + 2],
    ["enter", r, t],
    // The `[`
    e[n + 3],
    e[n + 4],
    // The `^`.
    ["enter", i, t],
    ["exit", i, t],
    // Everything in between.
    ["enter", a, t],
    ["enter", o, t],
    ["exit", o, t],
    ["exit", a, t],
    // The ending (`]`, properly parsed and labelled).
    e[e.length - 2],
    e[e.length - 1],
    ["exit", r, t]
  ];
  return e.splice(n, e.length - n + 1, ...u), e;
}
function iX(e, t, n) {
  const r = this, i = r.parser.gfmFootnotes || (r.parser.gfmFootnotes = []);
  let a = 0, o;
  return u;
  function u(g) {
    return e.enter("gfmFootnoteCall"), e.enter("gfmFootnoteCallLabelMarker"), e.consume(g), e.exit("gfmFootnoteCallLabelMarker"), c;
  }
  function c(g) {
    return g !== 94 ? n(g) : (e.enter("gfmFootnoteCallMarker"), e.consume(g), e.exit("gfmFootnoteCallMarker"), e.enter("gfmFootnoteCallString"), e.enter("chunkString").contentType = "string", f);
  }
  function f(g) {
    if (
      // Too long.
      a > 999 || // Closing brace with nothing.
      g === 93 && !o || // Space or tab is not supported by GFM for some reason.
      // `\n` and `[` not being supported makes sense.
      g === null || g === 91 || Wn(g)
    )
      return n(g);
    if (g === 93) {
      e.exit("chunkString");
      const x = e.exit("gfmFootnoteCallString");
      return i.includes(Vo(r.sliceSerialize(x))) ? (e.enter("gfmFootnoteCallLabelMarker"), e.consume(g), e.exit("gfmFootnoteCallLabelMarker"), e.exit("gfmFootnoteCall"), t) : n(g);
    }
    return Wn(g) || (o = !0), a++, e.consume(g), g === 92 ? p : f;
  }
  function p(g) {
    return g === 91 || g === 92 || g === 93 ? (e.consume(g), a++, f) : f(g);
  }
}
function sX(e, t, n) {
  const r = this, i = r.parser.gfmFootnotes || (r.parser.gfmFootnotes = []);
  let a, o = 0, u;
  return c;
  function c(_) {
    return e.enter("gfmFootnoteDefinition")._container = !0, e.enter("gfmFootnoteDefinitionLabel"), e.enter("gfmFootnoteDefinitionLabelMarker"), e.consume(_), e.exit("gfmFootnoteDefinitionLabelMarker"), f;
  }
  function f(_) {
    return _ === 94 ? (e.enter("gfmFootnoteDefinitionMarker"), e.consume(_), e.exit("gfmFootnoteDefinitionMarker"), e.enter("gfmFootnoteDefinitionLabelString"), e.enter("chunkString").contentType = "string", p) : n(_);
  }
  function p(_) {
    if (
      // Too long.
      o > 999 || // Closing brace with nothing.
      _ === 93 && !u || // Space or tab is not supported by GFM for some reason.
      // `\n` and `[` not being supported makes sense.
      _ === null || _ === 91 || Wn(_)
    )
      return n(_);
    if (_ === 93) {
      e.exit("chunkString");
      const E = e.exit("gfmFootnoteDefinitionLabelString");
      return a = Vo(r.sliceSerialize(E)), e.enter("gfmFootnoteDefinitionLabelMarker"), e.consume(_), e.exit("gfmFootnoteDefinitionLabelMarker"), e.exit("gfmFootnoteDefinitionLabel"), x;
    }
    return Wn(_) || (u = !0), o++, e.consume(_), _ === 92 ? g : p;
  }
  function g(_) {
    return _ === 91 || _ === 92 || _ === 93 ? (e.consume(_), o++, p) : p(_);
  }
  function x(_) {
    return _ === 58 ? (e.enter("definitionMarker"), e.consume(_), e.exit("definitionMarker"), i.includes(a) || i.push(a), gn(e, b, "gfmFootnoteDefinitionWhitespace")) : n(_);
  }
  function b(_) {
    return t(_);
  }
}
function aX(e, t, n) {
  return e.check(yy, t, e.attempt(eX, t, n));
}
function oX(e) {
  e.exit("gfmFootnoteDefinition");
}
function lX(e, t, n) {
  const r = this;
  return gn(e, i, "gfmFootnoteDefinitionIndent", 5);
  function i(a) {
    const o = r.events[r.events.length - 1];
    return o && o[1].type === "gfmFootnoteDefinitionIndent" && o[2].sliceSerialize(o[1], !0).length === 4 ? t(a) : n(a);
  }
}
function uX(e) {
  let n = (e || {}).singleTilde;
  const r = {
    name: "strikethrough",
    tokenize: a,
    resolveAll: i
  };
  return n == null && (n = !0), {
    text: {
      126: r
    },
    insideSpan: {
      null: [r]
    },
    attentionMarkers: {
      null: [126]
    }
  };
  function i(o, u) {
    let c = -1;
    for (; ++c < o.length; )
      if (o[c][0] === "enter" && o[c][1].type === "strikethroughSequenceTemporary" && o[c][1]._close) {
        let f = c;
        for (; f--; )
          if (o[f][0] === "exit" && o[f][1].type === "strikethroughSequenceTemporary" && o[f][1]._open && // If the sizes are the same:
          o[c][1].end.offset - o[c][1].start.offset === o[f][1].end.offset - o[f][1].start.offset) {
            o[c][1].type = "strikethroughSequence", o[f][1].type = "strikethroughSequence";
            const p = {
              type: "strikethrough",
              start: Object.assign({}, o[f][1].start),
              end: Object.assign({}, o[c][1].end)
            }, g = {
              type: "strikethroughText",
              start: Object.assign({}, o[f][1].end),
              end: Object.assign({}, o[c][1].start)
            }, x = [["enter", p, u], ["enter", o[f][1], u], ["exit", o[f][1], u], ["enter", g, u]], b = u.parser.constructs.insideSpan.null;
            b && Aa(x, x.length, 0, ib(b, o.slice(f + 1, c), u)), Aa(x, x.length, 0, [["exit", g, u], ["enter", o[c][1], u], ["exit", o[c][1], u], ["exit", p, u]]), Aa(o, f - 1, c - f + 3, x), c = f + x.length - 2;
            break;
          }
      }
    for (c = -1; ++c < o.length; )
      o[c][1].type === "strikethroughSequenceTemporary" && (o[c][1].type = "data");
    return o;
  }
  function a(o, u, c) {
    const f = this.previous, p = this.events;
    let g = 0;
    return x;
    function x(_) {
      return f === 126 && p[p.length - 1][1].type !== "characterEscape" ? c(_) : (o.enter("strikethroughSequenceTemporary"), b(_));
    }
    function b(_) {
      const E = rm(f);
      if (_ === 126)
        return g > 1 ? c(_) : (o.consume(_), g++, b);
      if (g < 2 && !n) return c(_);
      const k = o.exit("strikethroughSequenceTemporary"), T = rm(_);
      return k._open = !T || T === 2 && !!E, k._close = !E || E === 2 && !!T, u(_);
    }
  }
}
class cX {
  /**
   * Create a new edit map.
   */
  constructor() {
    this.map = [];
  }
  /**
   * Create an edit: a remove and/or add at a certain place.
   *
   * @param {number} index
   * @param {number} remove
   * @param {Array<Event>} add
   * @returns {undefined}
   */
  add(t, n, r) {
    fX(this, t, n, r);
  }
  // To do: add this when moving to `micromark`.
  // /**
  //  * Create an edit: but insert `add` before existing additions.
  //  *
  //  * @param {number} index
  //  * @param {number} remove
  //  * @param {Array<Event>} add
  //  * @returns {undefined}
  //  */
  // addBefore(index, remove, add) {
  //   addImplementation(this, index, remove, add, true)
  // }
  /**
   * Done, change the events.
   *
   * @param {Array<Event>} events
   * @returns {undefined}
   */
  consume(t) {
    if (this.map.sort(function(a, o) {
      return a[0] - o[0];
    }), this.map.length === 0)
      return;
    let n = this.map.length;
    const r = [];
    for (; n > 0; )
      n -= 1, r.push(t.slice(this.map[n][0] + this.map[n][1]), this.map[n][2]), t.length = this.map[n][0];
    r.push(t.slice()), t.length = 0;
    let i = r.pop();
    for (; i; ) {
      for (const a of i)
        t.push(a);
      i = r.pop();
    }
    this.map.length = 0;
  }
}
function fX(e, t, n, r) {
  let i = 0;
  if (!(n === 0 && r.length === 0)) {
    for (; i < e.map.length; ) {
      if (e.map[i][0] === t) {
        e.map[i][1] += n, e.map[i][2].push(...r);
        return;
      }
      i += 1;
    }
    e.map.push([t, n, r]);
  }
}
function dX(e, t) {
  let n = !1;
  const r = [];
  for (; t < e.length; ) {
    const i = e[t];
    if (n) {
      if (i[0] === "enter")
        i[1].type === "tableContent" && r.push(e[t + 1][1].type === "tableDelimiterMarker" ? "left" : "none");
      else if (i[1].type === "tableContent") {
        if (e[t - 1][1].type === "tableDelimiterMarker") {
          const a = r.length - 1;
          r[a] = r[a] === "left" ? "center" : "right";
        }
      } else if (i[1].type === "tableDelimiterRow")
        break;
    } else i[0] === "enter" && i[1].type === "tableDelimiterRow" && (n = !0);
    t += 1;
  }
  return r;
}
function hX() {
  return {
    flow: {
      null: {
        name: "table",
        tokenize: pX,
        resolveAll: mX
      }
    }
  };
}
function pX(e, t, n) {
  const r = this;
  let i = 0, a = 0, o;
  return u;
  function u(W) {
    let F = r.events.length - 1;
    for (; F > -1; ) {
      const J = r.events[F][1].type;
      if (J === "lineEnding" || // Note: markdown-rs uses `whitespace` instead of `linePrefix`
      J === "linePrefix") F--;
      else break;
    }
    const X = F > -1 ? r.events[F][1].type : null, me = X === "tableHead" || X === "tableRow" ? z : c;
    return me === z && r.parser.lazy[r.now().line] ? n(W) : me(W);
  }
  function c(W) {
    return e.enter("tableHead"), e.enter("tableRow"), f(W);
  }
  function f(W) {
    return W === 124 || (o = !0, a += 1), p(W);
  }
  function p(W) {
    return W === null ? n(W) : Mt(W) ? a > 1 ? (a = 0, r.interrupt = !0, e.exit("tableRow"), e.enter("lineEnding"), e.consume(W), e.exit("lineEnding"), b) : n(W) : ln(W) ? gn(e, p, "whitespace")(W) : (a += 1, o && (o = !1, i += 1), W === 124 ? (e.enter("tableCellDivider"), e.consume(W), e.exit("tableCellDivider"), o = !0, p) : (e.enter("data"), g(W)));
  }
  function g(W) {
    return W === null || W === 124 || Wn(W) ? (e.exit("data"), p(W)) : (e.consume(W), W === 92 ? x : g);
  }
  function x(W) {
    return W === 92 || W === 124 ? (e.consume(W), g) : g(W);
  }
  function b(W) {
    return r.interrupt = !1, r.parser.lazy[r.now().line] ? n(W) : (e.enter("tableDelimiterRow"), o = !1, ln(W) ? gn(e, _, "linePrefix", r.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 4)(W) : _(W));
  }
  function _(W) {
    return W === 45 || W === 58 ? k(W) : W === 124 ? (o = !0, e.enter("tableCellDivider"), e.consume(W), e.exit("tableCellDivider"), E) : P(W);
  }
  function E(W) {
    return ln(W) ? gn(e, k, "whitespace")(W) : k(W);
  }
  function k(W) {
    return W === 58 ? (a += 1, o = !0, e.enter("tableDelimiterMarker"), e.consume(W), e.exit("tableDelimiterMarker"), T) : W === 45 ? (a += 1, T(W)) : W === null || Mt(W) ? O(W) : P(W);
  }
  function T(W) {
    return W === 45 ? (e.enter("tableDelimiterFiller"), R(W)) : P(W);
  }
  function R(W) {
    return W === 45 ? (e.consume(W), R) : W === 58 ? (o = !0, e.exit("tableDelimiterFiller"), e.enter("tableDelimiterMarker"), e.consume(W), e.exit("tableDelimiterMarker"), N) : (e.exit("tableDelimiterFiller"), N(W));
  }
  function N(W) {
    return ln(W) ? gn(e, O, "whitespace")(W) : O(W);
  }
  function O(W) {
    return W === 124 ? _(W) : W === null || Mt(W) ? !o || i !== a ? P(W) : (e.exit("tableDelimiterRow"), e.exit("tableHead"), t(W)) : P(W);
  }
  function P(W) {
    return n(W);
  }
  function z(W) {
    return e.enter("tableRow"), q(W);
  }
  function q(W) {
    return W === 124 ? (e.enter("tableCellDivider"), e.consume(W), e.exit("tableCellDivider"), q) : W === null || Mt(W) ? (e.exit("tableRow"), t(W)) : ln(W) ? gn(e, q, "whitespace")(W) : (e.enter("data"), G(W));
  }
  function G(W) {
    return W === null || W === 124 || Wn(W) ? (e.exit("data"), q(W)) : (e.consume(W), W === 92 ? Y : G);
  }
  function Y(W) {
    return W === 92 || W === 124 ? (e.consume(W), G) : G(W);
  }
}
function mX(e, t) {
  let n = -1, r = !0, i = 0, a = [0, 0, 0, 0], o = [0, 0, 0, 0], u = !1, c = 0, f, p, g;
  const x = new cX();
  for (; ++n < e.length; ) {
    const b = e[n], _ = b[1];
    b[0] === "enter" ? _.type === "tableHead" ? (u = !1, c !== 0 && (b6(x, t, c, f, p), p = void 0, c = 0), f = {
      type: "table",
      start: Object.assign({}, _.start),
      // Note: correct end is set later.
      end: Object.assign({}, _.end)
    }, x.add(n, 0, [["enter", f, t]])) : _.type === "tableRow" || _.type === "tableDelimiterRow" ? (r = !0, g = void 0, a = [0, 0, 0, 0], o = [0, n + 1, 0, 0], u && (u = !1, p = {
      type: "tableBody",
      start: Object.assign({}, _.start),
      // Note: correct end is set later.
      end: Object.assign({}, _.end)
    }, x.add(n, 0, [["enter", p, t]])), i = _.type === "tableDelimiterRow" ? 2 : p ? 3 : 1) : i && (_.type === "data" || _.type === "tableDelimiterMarker" || _.type === "tableDelimiterFiller") ? (r = !1, o[2] === 0 && (a[1] !== 0 && (o[0] = o[1], g = T1(x, t, a, i, void 0, g), a = [0, 0, 0, 0]), o[2] = n)) : _.type === "tableCellDivider" && (r ? r = !1 : (a[1] !== 0 && (o[0] = o[1], g = T1(x, t, a, i, void 0, g)), a = o, o = [a[1], n, 0, 0])) : _.type === "tableHead" ? (u = !0, c = n) : _.type === "tableRow" || _.type === "tableDelimiterRow" ? (c = n, a[1] !== 0 ? (o[0] = o[1], g = T1(x, t, a, i, n, g)) : o[1] !== 0 && (g = T1(x, t, o, i, n, g)), i = 0) : i && (_.type === "data" || _.type === "tableDelimiterMarker" || _.type === "tableDelimiterFiller") && (o[3] = n);
  }
  for (c !== 0 && b6(x, t, c, f, p), x.consume(t.events), n = -1; ++n < t.events.length; ) {
    const b = t.events[n];
    b[0] === "enter" && b[1].type === "table" && (b[1]._align = dX(t.events, n));
  }
  return e;
}
function T1(e, t, n, r, i, a) {
  const o = r === 1 ? "tableHeader" : r === 2 ? "tableDelimiter" : "tableData", u = "tableContent";
  n[0] !== 0 && (a.end = Object.assign({}, Pp(t.events, n[0])), e.add(n[0], 0, [["exit", a, t]]));
  const c = Pp(t.events, n[1]);
  if (a = {
    type: o,
    start: Object.assign({}, c),
    // Note: correct end is set later.
    end: Object.assign({}, c)
  }, e.add(n[1], 0, [["enter", a, t]]), n[2] !== 0) {
    const f = Pp(t.events, n[2]), p = Pp(t.events, n[3]), g = {
      type: u,
      start: Object.assign({}, f),
      end: Object.assign({}, p)
    };
    if (e.add(n[2], 0, [["enter", g, t]]), r !== 2) {
      const x = t.events[n[2]], b = t.events[n[3]];
      if (x[1].end = Object.assign({}, b[1].end), x[1].type = "chunkText", x[1].contentType = "text", n[3] > n[2] + 1) {
        const _ = n[2] + 1, E = n[3] - n[2] - 1;
        e.add(_, E, []);
      }
    }
    e.add(n[3] + 1, 0, [["exit", g, t]]);
  }
  return i !== void 0 && (a.end = Object.assign({}, Pp(t.events, i)), e.add(i, 0, [["exit", a, t]]), a = void 0), a;
}
function b6(e, t, n, r, i) {
  const a = [], o = Pp(t.events, n);
  i && (i.end = Object.assign({}, o), a.push(["exit", i, t])), r.end = Object.assign({}, o), a.push(["exit", r, t]), e.add(n + 1, 0, a);
}
function Pp(e, t) {
  const n = e[t], r = n[0] === "enter" ? "start" : "end";
  return n[1][r];
}
const gX = {
  name: "tasklistCheck",
  tokenize: vX
};
function yX() {
  return {
    text: {
      91: gX
    }
  };
}
function vX(e, t, n) {
  const r = this;
  return i;
  function i(c) {
    return (
      // Exit if theres stuff before.
      r.previous !== null || // Exit if not in the first content that is the first child of a list
      // item.
      !r._gfmTasklistFirstContentOfListItem ? n(c) : (e.enter("taskListCheck"), e.enter("taskListCheckMarker"), e.consume(c), e.exit("taskListCheckMarker"), a)
    );
  }
  function a(c) {
    return Wn(c) ? (e.enter("taskListCheckValueUnchecked"), e.consume(c), e.exit("taskListCheckValueUnchecked"), o) : c === 88 || c === 120 ? (e.enter("taskListCheckValueChecked"), e.consume(c), e.exit("taskListCheckValueChecked"), o) : n(c);
  }
  function o(c) {
    return c === 93 ? (e.enter("taskListCheckMarker"), e.consume(c), e.exit("taskListCheckMarker"), e.exit("taskListCheck"), u) : n(c);
  }
  function u(c) {
    return Mt(c) ? t(c) : ln(c) ? e.check({
      tokenize: xX
    }, t, n)(c) : n(c);
  }
}
function xX(e, t, n) {
  return gn(e, r, "whitespace");
  function r(i) {
    return i === null ? n(i) : t(i);
  }
}
function bX(e) {
  return nz([
    HZ(),
    tX(),
    uX(e),
    hX(),
    yX()
  ]);
}
const wX = {};
function _X(e) {
  const t = (
    /** @type {Processor<Root>} */
    this
  ), n = e || wX, r = t.data(), i = r.micromarkExtensions || (r.micromarkExtensions = []), a = r.fromMarkdownExtensions || (r.fromMarkdownExtensions = []), o = r.toMarkdownExtensions || (r.toMarkdownExtensions = []);
  i.push(bX(n)), a.push($Z()), o.push(FZ(n));
}
const SX = "Engram_project";
function CX() {
  var e, t;
  try {
    if (typeof window.getRequestHeaders == "function")
      return window.getRequestHeaders();
    const n = (t = (e = window.SillyTavern) == null ? void 0 : e.getContext) == null ? void 0 : t.call(e);
    if (n != null && n.getRequestHeaders)
      return n.getRequestHeaders();
  } catch (n) {
    console.warn("[Engram] ", n);
  }
  return {
    "Content-Type": "application/json"
  };
}
async function EX() {
  try {
    const e = CX(), t = await fetch("/api/extensions/update", {
      method: "POST",
      headers: {
        ...e,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        extensionName: SX,
        global: !1
        // Engram 
      })
    });
    if (!t.ok)
      return { success: !1, message: await t.text() || t.statusText };
    const n = await t.json();
    return n.isUpToDate ? { success: !0, message: "", isUpToDate: !0 } : {
      success: !0,
      message: `: ${n.shortCommitHash || "latest"}`,
      isUpToDate: !1
    };
  } catch (e) {
    return console.error("[Engram] :", e), { success: !1, message: String(e) };
  }
}
const kX = ({ isOpen: e, onClose: t }) => {
  const [n, r] = B.useState(!0), [i, a] = B.useState(null), [o, u] = B.useState(null), [c, f] = B.useState(!1), [p, g] = B.useState(!1), [x, b] = B.useState(!1), [_, E] = B.useState(null), k = Pl.getCurrentVersion();
  B.useEffect(() => {
    e && (T(), E(null));
  }, [e]);
  const T = async () => {
    r(!0);
    try {
      const [P, z, q] = await Promise.all([
        Pl.getLatestVersion(),
        Pl.getChangelog(),
        Pl.hasUpdate()
      ]);
      a(P), u(z), f(q);
    } catch (P) {
      console.error("[Engram] ", P);
    } finally {
      r(!1);
    }
  }, R = async () => {
    g(!0);
    try {
      const P = i || k;
      console.debug("[Engram] Marking update as read:", P), await Pl.markAsRead(P), t();
    } finally {
      g(!1);
    }
  }, N = async () => {
    b(!0), E(null);
    try {
      const P = await EX();
      P.success && !P.isUpToDate ? (E(" 2 ..."), Zt.success("", "Engram "), i && await Pl.markAsRead(i), setTimeout(() => {
        window.location.reload();
      }, 2e3)) : P.isUpToDate ? (E(""), f(!1)) : (E(`: ${P.message}`), Zt.error(`: ${P.message}`, "Engram "));
    } catch (P) {
      E(`: ${String(P)}`), Zt.error(`: ${String(P)}`, "Engram ");
    } finally {
      b(!1);
    }
  }, O = () => {
    Pl.clearCache(), T();
  };
  return e ? /* @__PURE__ */ h.jsxs("div", { className: "fixed inset-0 z-[100] flex items-center justify-center p-4", children: [
    /* @__PURE__ */ h.jsx(
      "div",
      {
        className: "absolute inset-0 bg-black/60 backdrop-blur-sm",
        onClick: t
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "relative bg-card border border-border rounded-xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between px-5 py-4 border-b border-border/50", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ h.jsx("div", { className: "w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center", children: /* @__PURE__ */ h.jsx(k0, { size: 16, className: "text-primary" }) }),
          /* @__PURE__ */ h.jsxs("div", { children: [
            /* @__PURE__ */ h.jsx("h2", { className: "text-base font-semibold text-foreground", children: "" }),
            /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
              ": v",
              k
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ h.jsx(
            "button",
            {
              onClick: O,
              className: "p-2 rounded-lg hover:bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",
              title: "",
              children: /* @__PURE__ */ h.jsx(Or, { size: 16, className: n ? "animate-spin" : "" })
            }
          ),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              onClick: t,
              className: "p-2 rounded-lg hover:bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",
              children: /* @__PURE__ */ h.jsx(gm, { size: 16 })
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto p-5", children: n ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center py-12 text-muted-foreground", children: [
        /* @__PURE__ */ h.jsx(Or, { size: 24, className: "animate-spin mb-3" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "..." })
      ] }) : /* @__PURE__ */ h.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ h.jsx("div", { className: `
                                p-4 rounded-lg border
                                ${c ? "bg-primary/5 border-primary/20" : "bg-green-500/5 border-green-500/20"}
                            `, children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
          c ? /* @__PURE__ */ h.jsx(k0, { size: 20, className: "text-primary" }) : /* @__PURE__ */ h.jsx(M5, { size: 20, className: "text-green-500" }),
          /* @__PURE__ */ h.jsxs("div", { className: "flex-1", children: [
            /* @__PURE__ */ h.jsx("p", { className: "font-medium text-foreground", children: c ? `: v${i}` : "" }),
            /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mt-0.5", children: c ? "" : "" })
          ] })
        ] }) }),
        _ && /* @__PURE__ */ h.jsx("div", { className: `
                                    p-3 rounded-lg text-sm
                                    ${_.includes("") ? "bg-green-500/10 text-green-600 border border-green-500/20" : _.includes("") || _.includes("") ? "bg-red-500/10 text-red-600 border border-red-500/20" : "bg-muted/30 text-muted-foreground"}
                                `, children: _ }),
        o && /* @__PURE__ */ h.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider", children: "" }),
          /* @__PURE__ */ h.jsx("div", { className: "bg-muted/20 rounded-lg p-4 max-h-64 overflow-y-auto engram-changelog-content text-sm", children: /* @__PURE__ */ h.jsx(uW, { remarkPlugins: [_X], children: o }) })
        ] }),
        !o && !n && /* @__PURE__ */ h.jsx("div", { className: "text-center py-8 text-muted-foreground", children: /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "" }) })
      ] }) }),
      /* @__PURE__ */ h.jsxs("div", { className: "px-5 py-4 border-t border-border/50 flex justify-end gap-3", children: [
        /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: t,
            className: "px-4 py-2 text-sm text-muted-foreground hover:text-foreground transition-colors",
            children: ""
          }
        ),
        c && /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: R,
            disabled: p || x,
            className: "px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors disabled:opacity-50",
            children: ""
          }
        ),
        /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: N,
            disabled: x || p,
            className: `px-4 py-2 text-sm rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2 ${c ? "bg-primary text-primary-foreground hover:bg-primary/90" : "border border-border text-muted-foreground hover:text-foreground hover:border-muted-foreground"}`,
            children: x ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
              /* @__PURE__ */ h.jsx($u, { size: 14, className: "animate-spin" }),
              "..."
            ] }) : c ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
              /* @__PURE__ */ h.jsx(k0, { size: 14 }),
              ""
            ] }) : /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
              /* @__PURE__ */ h.jsx(Or, { size: 14 }),
              ""
            ] })
          }
        )
      ] })
    ] })
  ] }) : null;
}, TX = ({ children: e, activeTab: t, setActiveTab: n, onClose: r }) => {
  const [i, a] = B.useState(!1), [o, u] = B.useState(!1), [c, f] = B.useState(!1);
  B.useEffect(() => {
    (async () => {
      try {
        const b = await Pl.hasUnreadUpdate();
        f(b);
      } catch (b) {
        console.debug("[Engram] ", b);
      }
    })();
  }, []);
  const p = () => {
    u(!0);
  }, g = () => {
    u(!1), f(!1);
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "flex absolute inset-0 w-full h-full bg-background text-foreground overflow-hidden font-sans selection:bg-primary/30 selection:text-primary animate-in fade-in duration-300", id: "engram-layout-root", children: [
    /* @__PURE__ */ h.jsx(S$, {}),
    /* @__PURE__ */ h.jsx(
      kX,
      {
        isOpen: o,
        onClose: g
      }
    ),
    /* @__PURE__ */ h.jsx(
      RA,
      {
        activeTab: t,
        onNavigate: n,
        isMobile: !1,
        onShowUpdateNotice: p,
        hasUnreadUpdate: c
      }
    ),
    /* @__PURE__ */ h.jsx(
      RA,
      {
        activeTab: t,
        onNavigate: n,
        isMobile: !0,
        isOpen: i,
        onClose: () => a(!1),
        onShowUpdateNotice: p,
        hasUnreadUpdate: c
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-1 flex-col overflow-hidden", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col flex-shrink-0 border-b border-border bg-sidebar/95 backdrop-blur z-50 transition-all duration-300", children: [
        /* @__PURE__ */ h.jsx(
          XV,
          {
            onToggleSidebar: () => a(!i),
            isMobile: !1,
            onClose: r,
            onNavigate: (x) => n(x.replace("/", ""))
          }
        ),
        /* @__PURE__ */ h.jsx("div", { id: "engram-header-extension", className: "z-40 flex-shrink-0 bg-transparent transition-all empty:hidden" })
      ] }),
      /* @__PURE__ */ h.jsx("main", { className: "flex-1 flex flex-col relative w-full overflow-hidden bg-background", children: /* @__PURE__ */ h.jsx(
        "div",
        {
          className: "flex-1 overflow-y-auto overflow-x-hidden pt-0 px-4 pb-4 md:px-8 md:pb-8 lg:px-12 lg:pb-12 scroll-smooth engram-page-enter",
          children: /* @__PURE__ */ h.jsx("div", { className: "max-w-6xl mx-auto min-h-full pb-20", children: e })
        },
        t
      ) })
    ] }),
    "  "
  ] });
}, Dl = {
  primary: "#FFFFFF",
  grid: "#111111"
}, AX = ({ onComplete: e }) => {
  const t = B.useRef(null), n = B.useRef(null), r = B.useRef(null), i = B.useRef(null), [a, o] = B.useState(!1);
  B.useEffect(() => {
    if (window.gsap) {
      o(!0);
      return;
    }
    const c = document.createElement("script");
    c.src = "https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js", c.async = !0, c.onload = () => o(!0), document.body.appendChild(c);
  }, []);
  const u = () => {
    var b;
    if (!a || !n.current) return;
    const c = window.gsap, f = n.current, p = f.getTotalLength();
    c.set(f, {
      strokeDasharray: p,
      strokeDashoffset: p,
      stroke: Dl.primary,
      fillOpacity: 0,
      opacity: 1,
      strokeWidth: 2
    });
    const g = (b = r.current) == null ? void 0 : b.querySelectorAll("path");
    g && c.set(g, { opacity: 0, y: 10 }), c.set(i.current, { scale: 1, opacity: 1 }), c.set(t.current, { opacity: 1 });
    const x = c.timeline({
      onComplete: () => {
        c.to(t.current, {
          opacity: 0,
          duration: 0.8,
          ease: "power2.out",
          onComplete: e
        });
      }
    });
    x.to(f, {
      strokeDashoffset: 0,
      duration: 2.5,
      ease: "power2.inOut"
    }), g && x.to(g, {
      opacity: 1,
      y: 0,
      duration: 1.2,
      stagger: 0.08,
      ease: "power3.out"
    }, "-=0.8"), x.to({}, { duration: 1 });
  };
  return B.useEffect(() => {
    if (a) {
      const c = setTimeout(u, 800);
      return () => clearTimeout(c);
    }
  }, [a]), /* @__PURE__ */ h.jsxs(
    "div",
    {
      ref: t,
      className: "fixed inset-0 z-[200] flex flex-col items-center justify-center bg-black overflow-hidden",
      style: { touchAction: "none" },
      children: [
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute inset-0 pointer-events-none",
            style: {
              backgroundImage: `
                        linear-gradient(to right, ${Dl.grid} 1px, transparent 1px),
                        linear-gradient(to bottom, ${Dl.grid} 1px, transparent 1px)
                    `,
              backgroundSize: "40px 40px",
              opacity: 0.3
            }
          }
        ),
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute inset-0 pointer-events-none",
            style: { background: "radial-gradient(circle at center, transparent 0%, black 100%)", opacity: 0.9 }
          }
        ),
        /* @__PURE__ */ h.jsxs("div", { className: "z-10 relative flex flex-col items-center justify-center w-full h-full p-4", children: [
          /* @__PURE__ */ h.jsx("div", { className: "w-full max-w-[600px] md:max-w-[800px] aspect-[4/3]", children: /* @__PURE__ */ h.jsx(
            "svg",
            {
              version: "1.1",
              xmlns: "http://www.w3.org/2000/svg",
              viewBox: "250 0 550 600",
              className: "w-full h-full overflow-visible",
              children: /* @__PURE__ */ h.jsxs("g", { ref: i, className: "origin-center", children: [
                /* @__PURE__ */ h.jsx(
                  "path",
                  {
                    ref: n,
                    fill: "none",
                    stroke: Dl.primary,
                    strokeWidth: "2",
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    d: "M463.360840,364.455627 C437.246704,381.338409 406.466644,366.209045 404.026672,335.650848 C402.910156,321.667206 412.549713,306.544678 426.813293,300.633850 C430.474335,299.116699 431.826355,297.290924 431.760071,293.302460 C431.519287,278.808716 431.584564,264.307892 431.718292,249.811417 C431.748169,246.574463 430.886292,244.713684 427.681274,243.389038 C412.366425,237.059357 404.237366,225.144638 404.208862,208.867447 C404.179871,192.298615 412.621979,180.486938 428.224701,174.293686 C430.850494,173.251419 431.710938,171.751862 431.696136,169.060089 C431.613586,154.062912 431.568054,139.064117 431.723419,124.068092 C431.759430,120.590492 430.119568,119.052467 427.243103,117.790627 C413.349915,111.695946 405.841095,101.009903 404.195740,85.916542 C402.099884,66.690948 418.566650,47.364159 437.884277,46.682220 C456.888519,46.011345 468.064789,52.989845 476.252197,70.840332 C477.174438,72.851059 478.313995,73.541710 480.422974,73.516098 C499.569031,73.283493 518.722961,73.393646 537.862915,73.456795 C545.529785,73.482086 549.225952,71.767975 552.791809,64.663139 C559.898376,50.503635 576.618042,43.921410 592.447876,47.234680 C608.699890,50.636322 619.276489,62.116261 621.438904,78.701805 C623.839478,97.113228 612.679382,114.371338 595.357910,119.034004 C577.219604,123.916542 558.125427,115.204048 550.887390,98.365906 C549.251465,94.560234 547.316284,93.116508 543.150696,93.160004 C522.989380,93.370483 502.824707,93.284561 482.661285,93.261726 C479.716156,93.258385 477.395905,93.379341 475.956635,96.902077 C474.571899,100.291283 475.702576,102.070137 477.892181,104.225159 C501.524139,127.483910 525.127991,150.771423 548.653259,174.137985 C550.803162,176.273376 552.520325,176.380997 555.207153,175.171799 C569.642334,168.675354 583.205750,171.177368 594.759277,181.252563 C606.783813,191.738449 610.379395,205.504944 605.248840,220.725037 C600.321167,235.343246 589.568848,243.345337 574.305420,245.467117 C567.655396,246.391541 561.334045,245.373352 555.347839,242.591797 C552.373169,241.209595 550.274536,241.303284 547.832886,243.728531 C524.197693,267.205322 500.499634,290.619415 476.704651,313.934174 C474.165771,316.421844 475.106598,318.487793 476.015411,321.059723 C476.869354,323.476318 478.159149,324.356232 480.796143,324.332367 C501.456360,324.145294 522.118530,324.019531 542.778870,324.122131 C546.987793,324.143005 549.216675,322.931549 551.044983,318.871887 C558.230042,302.918091 576.073181,294.652069 593.497131,298.684143 C610.451355,302.607544 622.335205,317.668091 622.119812,334.958160 C621.900024,352.608002 609.316650,367.564362 591.822144,370.969543 C574.585754,374.324463 557.004028,364.861755 550.521484,348.456757 C549.268677,345.286346 547.631836,344.200745 544.294861,344.220337 C523.465576,344.342865 502.634888,344.322540 481.805359,344.218109 C478.697174,344.202545 476.993927,345.152252 475.888916,348.205902 C473.513214,354.771179 469.417969,360.183167 463.360840,364.455627 M472.733368,188.880936 C473.545441,190.333145 474.799072,191.702774 475.088898,193.252655 C476.058929,198.439468 479.434326,198.919983 483.888489,198.861130 C499.042145,198.660889 514.201233,198.707901 529.355957,198.872879 C532.819580,198.910583 534.700989,197.913788 536.177185,194.588806 C537.657104,191.255417 536.060120,189.735016 534.097900,187.805573 C510.706268,164.804840 487.354065,141.764008 463.949341,118.776604 C462.445251,117.299316 461.277863,114.441566 458.282349,116.423027 C455.343719,118.366882 451.028107,118.406143 451.180542,123.994591 C451.584534,138.807007 451.429443,153.638779 451.250458,168.459885 C451.208984,171.894135 452.474548,173.487930 455.559784,174.673798 C462.566864,177.367126 468.343140,181.758774 472.733368,188.880936 M457.308807,300.958954 C460.540070,302.823181 462.218414,300.310028 464.063263,298.488586 C487.164032,275.681519 510.248199,252.857559 533.326538,230.027756 C535.300171,228.075378 537.458679,226.516449 535.970032,222.843750 C534.495117,219.205124 532.067688,218.878906 528.898010,218.890778 C513.414001,218.948746 497.929138,219.002151 482.445862,218.887329 C478.998230,218.861771 477.090668,219.941055 475.670502,223.284790 C471.742218,232.533905 465.159332,239.474701 455.665497,243.103836 C452.239746,244.413376 451.216278,246.302231 451.253540,249.781387 C451.406891,264.098541 451.489380,278.421356 451.223358,292.735107 C451.142975,297.059998 452.224640,299.783386 457.308807,300.958954 z"
                  }
                ),
                /* @__PURE__ */ h.jsxs("g", { ref: r, children: [
                  /* @__PURE__ */ h.jsx("path", { fill: Dl.primary, d: "M732.215698,483.876190 C732.750061,488.775055 731.110779,490.523590 726.372742,490.479736 C713.642639,490.361908 713.645874,490.566711 713.641113,477.834442 C713.638428,470.668732 713.788818,463.497284 713.552246,456.338928 C713.318970,449.278015 710.633911,445.451111 705.788818,444.403778 C698.667542,442.864441 692.689270,447.076904 692.324463,454.647736 C691.851685,464.458313 691.862549,474.305084 692.048706,484.128967 C692.137085,488.792786 690.778625,490.578705 685.827454,490.500549 C672.843933,490.295532 672.845886,490.510315 672.820435,477.502625 C672.805786,470.003754 672.887146,462.502136 672.708618,455.006927 C672.557556,448.666412 669.519653,444.981689 664.341858,444.320343 C658.234436,443.540314 653.997803,446.541077 652.162415,452.864807 C651.503052,455.136719 651.331299,457.435608 651.335754,459.781158 C651.352234,468.446747 651.306274,477.112488 651.338745,485.777985 C651.348389,488.341766 651.062439,490.138977 647.717529,490.447815 C632.733521,491.831421 632.748596,491.913239 632.764404,477.031830 C632.778870,463.366852 632.738831,449.701782 632.731445,436.036774 C632.727478,428.732941 632.735718,428.732544 640.257812,428.707031 C641.591003,428.702484 642.924194,428.695312 644.257324,428.701721 C647.429321,428.717010 651.058289,427.916016 650.925598,433.229431 C655.308960,431.486603 658.595154,429.192383 662.595154,428.377930 C670.453491,426.777832 677.619019,428.117981 683.735718,433.181641 C686.512207,435.480164 688.239807,435.373474 690.953918,433.250153 C697.176208,428.382202 704.485840,426.832367 712.194946,428.080414 C725.100098,430.169739 731.944641,439.074829 732.175659,453.896454 C732.328857,463.726379 732.212036,473.560547 732.215698,483.876190 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Dl.primary, d: "M487.575867,485.935303 C487.614716,484.616028 487.614716,483.640503 487.614716,481.796417 C479.116760,488.238525 470.153107,489.257660 460.718079,486.787720 C454.401794,485.134186 449.163879,481.675842 445.200134,476.457642 C436.960876,465.610748 437.295532,448.722229 445.889771,438.315796 C455.451538,426.737823 470.295227,425.042450 488.444458,433.733826 C487.913239,428.612457 491.194366,428.604004 494.772766,428.684540 C508.272736,428.988373 506.179840,426.849945 506.294434,440.421967 C506.411133,454.245575 506.366882,468.071228 506.299957,481.895538 C506.205750,501.359833 494.742065,512.847900 475.259460,513.370544 C465.272614,513.638489 455.717651,512.255005 446.682343,507.725311 C443.034790,505.896667 441.336151,503.847290 444.229065,500.105438 C444.329590,499.975464 444.390869,499.814941 444.469086,499.667908 C448.861603,491.411743 448.894196,491.340729 457.207886,495.157196 C463.352356,497.977905 469.817169,498.376801 476.285126,497.456818 C482.543640,496.566620 486.238434,492.476532 487.575867,485.935303 M469.264740,471.577881 C471.084900,471.642700 472.915710,471.865356 474.723328,471.743805 C481.074341,471.316620 486.258820,466.628052 487.489288,460.346558 C488.669373,454.322296 485.713593,448.118378 480.288971,445.234039 C472.426056,441.053253 462.868591,443.867035 459.399658,451.384033 C455.705688,459.388580 459.382996,467.492737 469.264740,471.577881 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Dl.primary, d: "M350.790619,410.644409 C354.007477,410.561554 355.147522,411.945587 355.144592,414.620361 C355.128937,428.846375 356.152588,426.165161 344.558044,426.338898 C335.900940,426.468628 327.237854,426.493591 318.582581,426.315826 C314.804382,426.238220 313.157715,427.376373 313.262451,431.424896 C313.571655,443.375275 312.019470,441.570435 323.204529,441.691742 C330.530579,441.771271 337.860626,441.831665 345.183899,441.671692 C348.853607,441.591553 350.203705,443.056824 350.190338,446.675842 C350.143219,459.433014 350.725433,457.207275 340.024445,457.368561 C332.865692,457.476471 325.700195,457.536346 318.545349,457.339996 C314.731018,457.235291 313.250702,458.478516 313.234222,462.478668 C313.185364,474.308960 313.038177,474.321259 324.813477,474.130890 C334.298523,473.977539 343.772430,475.169159 353.264343,474.338776 C354.864075,474.198792 356.466827,474.576569 356.702301,476.439850 C357.203217,480.403656 357.364838,484.405273 356.646729,488.365631 C356.297211,490.293060 354.652405,490.369568 353.118927,490.370575 C334.801880,490.382568 316.484711,490.350647 298.167847,490.412506 C295.104187,490.422852 294.024323,488.921082 294.024200,486.130402 C294.023224,462.484924 294.047699,438.839325 293.967896,415.194092 C293.954620,411.261261 296.028046,410.593658 299.359711,410.610138 C316.344330,410.694275 333.329620,410.638672 350.790619,410.644409 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Dl.primary, d: "M620.003906,453.402435 C620.062195,464.023071 619.882812,474.188721 620.189575,484.339661 C620.338318,489.262421 618.431458,490.973572 613.757507,490.452362 C611.783386,490.232208 609.754700,490.291412 607.767883,490.444916 C604.889648,490.667267 602.478821,490.168823 601.296570,486.513000 C594.831909,490.991821 587.888184,491.843719 580.600464,491.328247 C565.916626,490.289642 557.201233,476.053131 563.502625,463.374390 C565.502930,459.349640 568.872803,457.136932 572.794861,455.506927 C578.118103,453.294647 583.702881,452.709900 589.425354,452.731232 C592.879822,452.744110 596.387085,453.235260 599.791443,452.317169 C599.855774,446.843750 597.260681,443.903503 591.552673,443.177338 C585.446533,442.400513 579.495911,443.228607 574.179382,446.386688 C570.948853,448.305603 569.535645,447.214966 568.011658,444.340485 C563.043945,434.970917 563.058899,434.663818 573.199219,430.800537 C582.143921,427.392792 591.347961,426.734100 600.678101,428.904358 C613.358643,431.853943 619.173157,440.405762 620.003906,453.402435 M582.869263,466.083313 C579.496887,469.605530 579.013306,473.431427 581.947998,475.906952 C585.513611,478.914764 589.714966,478.291107 593.721985,477.031647 C597.412354,475.871704 599.990784,473.365112 600.658081,469.369629 C601.070496,466.900665 600.409729,465.044220 597.411255,465.098297 C592.800171,465.181488 588.157471,464.530182 582.869263,466.083313 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Dl.primary, d: "M410.915314,457.280090 C410.311127,447.930115 406.925934,444.198608 399.452026,444.194855 C391.667114,444.190948 386.727997,448.953094 386.409271,457.536652 C386.075653,466.521088 386.068634,475.532593 386.350006,484.518738 C386.494904,489.147247 384.896912,490.532959 380.337830,490.481964 C367.440552,490.337616 367.627808,490.513641 367.533173,477.713593 C367.426025,463.226135 368.160004,448.728760 367.168365,434.251617 C366.898468,430.311462 368.239288,428.249725 372.529694,428.668640 C374.840057,428.894196 377.203857,428.868896 379.519684,428.673553 C383.194244,428.363556 385.817352,429.188293 385.487488,434.182526 C390.858826,430.844635 395.856995,428.304504 401.601257,427.794434 C418.292908,426.312286 429.386810,436.518799 429.975342,454.379517 C430.315308,464.696716 429.971527,475.035126 430.046204,485.363190 C430.071198,488.817627 428.985992,490.534210 425.145325,490.442291 C408.307220,490.039520 411.204895,492.848450 410.942963,476.734924 C410.840088,470.406036 410.927368,464.074036 410.915314,457.280090 z" }),
                  /* @__PURE__ */ h.jsx("path", { fill: Dl.primary, d: "M556.799500,444.921539 C554.214233,445.227783 552.026184,445.174683 549.913574,445.548401 C542.544189,446.852142 538.560974,452.210632 538.387756,461.266998 C538.231995,469.411011 538.239258,477.561676 538.377136,485.705963 C538.433838,489.055634 537.355591,490.537964 533.812988,490.447296 C516.656677,490.008148 519.942505,492.939087 519.712585,476.823181 C519.510925,462.693848 519.801025,448.557343 519.590698,434.428253 C519.527222,430.165985 520.732788,428.169983 525.216187,428.665833 C527.350830,428.901917 529.549255,428.854156 531.692566,428.654297 C535.487610,428.300446 537.940002,429.350586 537.432373,434.447845 C542.475464,431.817810 546.689819,428.862549 551.859985,428.147003 C557.409912,427.378845 558.504028,428.019318 558.285950,433.612213 C558.141113,437.327057 559.514648,441.236115 556.799500,444.921539 z" })
                ] })
              ] })
            }
          ) }),
          /* @__PURE__ */ h.jsx("p", { className: "mt-6 md:mt-8 text-white/30 text-xs md:text-sm tracking-widest uppercase", children: "Where memories leave their trace" })
        ] })
      ]
    }
  );
}, xm = ({ title: e, breadcrumbs: t = [], subtitle: n, actions: r, className: i = "" }) => /* @__PURE__ */ h.jsxs("div", { className: `mb-8 px-4 md:px-0 flex justify-between items-start animate-in fade-in slide-in-from-bottom-2 duration-500 ${i}`, children: [
  /* @__PURE__ */ h.jsxs("div", { children: [
    /* @__PURE__ */ h.jsxs("h1", { className: "text-3xl font-light tracking-tight text-foreground flex items-center gap-2", children: [
      t.map((a, o) => /* @__PURE__ */ h.jsxs(dy.Fragment, { children: [
        /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground/60 hover:text-foreground/80 transition-colors text-xl", children: a }),
        /* @__PURE__ */ h.jsx(ih, { size: 20, className: "text-muted-foreground/30 px-0.5" })
      ] }, o)),
      /* @__PURE__ */ h.jsx("span", { className: "drop-shadow-[0_0_15px_rgba(255,255,255,0.2)] text-foreground", children: e })
    ] }),
    n && /* @__PURE__ */ h.jsx("p", { className: "mt-2 text-muted-foreground text-sm font-light", children: n })
  ] }),
  r && /* @__PURE__ */ h.jsx("div", { className: "flex gap-2", children: r })
] }), ui = ({
  checked: e,
  onChange: t,
  disabled: n = !1,
  className: r = "",
  id: i
}) => {
  const a = (o) => {
    n || (o.stopPropagation(), t(!e));
  };
  return /* @__PURE__ */ h.jsx(
    "button",
    {
      type: "button",
      role: "switch",
      id: i,
      "aria-checked": e,
      onClick: a,
      disabled: n,
      className: `
                relative inline-flex h-3.5 w-9 shrink-0 cursor-pointer items-center rounded-full border
                transition-all duration-[var(--duration-normal)] ease-[var(--ease-out)]
                focus:outline-none active:scale-95
                ${e ? "bg-primary/20 border-primary/50 shadow-[0_0_10px_rgba(var(--primary),0.2)]" : "bg-black/20 border-border shadow-inner"}
                ${n ? "opacity-50 cursor-not-allowed" : ""}
                ${r}
            `,
      children: /* @__PURE__ */ h.jsx(
        "span",
        {
          className: `
                    pointer-events-none inline-block h-2.5 w-2.5 transform rounded-full shadow-sm ring-0
                    transition-all duration-[var(--duration-normal)] ease-[var(--ease-spring)]
                    ${e ? "bg-primary shadow-[0_0_8px_rgba(var(--primary),0.8)] border border-primary-foreground/20" : "bg-muted-foreground border border-transparent opacity-60"}
                `,
          style: { transform: e ? "translateX(24px)" : "translateX(2px)" }
        }
      )
    }
  );
}, jX = {
  none: "",
  sm: "my-2",
  md: "my-4",
  lg: "my-6"
}, ci = ({
  orientation: e = "horizontal",
  length: t = 100,
  className: n = "",
  responsive: r = !1,
  spacing: i = "none"
}) => {
  const a = jX[i];
  return r ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
    /* @__PURE__ */ h.jsx(
      "div",
      {
        className: `hidden lg:block absolute left-0 top-1/2 -translate-y-1/2 border-l border-border ${n}`,
        style: { height: `${t}%` }
      }
    ),
    /* @__PURE__ */ h.jsx(
      "div",
      {
        className: `lg:hidden border-t border-border/30 mx-auto ${a} ${n}`,
        style: { width: `${t}%` }
      }
    )
  ] }) : e === "vertical" ? /* @__PURE__ */ h.jsx(
    "div",
    {
      className: `border-l border-border/30 mx-auto ${n}`,
      style: { height: `${t}%` }
    }
  ) : /* @__PURE__ */ h.jsx(
    "div",
    {
      className: `border-t border-border/30 ${a} ${n}`,
      style: { width: `${t}%` }
    }
  );
};
var Md = /* @__PURE__ */ ((e) => (e.Character = "char", e.Location = "loc", e.Item = "item", e.Concept = "concept", e.Unknown = "unknown", e))(Md || {});
const d0 = {
  last_summarized_floor: 0,
  token_usage_accumulated: 0,
  last_compressed_at: 0,
  active_summary_order: 9e3,
  last_extracted_floor: 0
}, hw = "scope_state", w6 = "character_name";
class Gz {
  constructor() {
    yt(this, "currentChatId", null);
    yt(this, "currentDb", null);
  }
  /**
   * 
   *  ST  chatId
   */
  getCurrentDb() {
    const t = fi();
    return t ? (t !== this.currentChatId && (this.currentChatId = t, this.currentDb = Fl(t), console.debug(`[ChatManager] Switched to database: Engram_${t}`)), this.currentDb) : (console.warn("[ChatManager] No chat_id available"), null);
  }
  /**
   *  chatId
   */
  getCurrentChatId() {
    return fi();
  }
  /**
   * 
   */
  getCharacterName() {
    var t;
    return ((t = tm()) == null ? void 0 : t.name) || "Unknown";
  }
  /**
   * 
   */
  async getState() {
    const t = this.getCurrentDb();
    if (!t) return d0;
    try {
      const n = await t.meta.get(hw);
      return n != null && n.value ? { ...d0, ...n.value } : d0;
    } catch (n) {
      return console.error("[ChatManager] Failed to get state:", n), d0;
    }
  }
  /**
   * 
   */
  async updateState(t) {
    const n = this.getCurrentDb();
    if (n)
      try {
        const i = { ...await this.getState(), ...t };
        await n.meta.put({ key: hw, value: i });
      } catch (r) {
        console.error("[ChatManager] Failed to update state:", r);
      }
  }
  /**
   *  UI 
   */
  async saveCharacterName() {
    const t = this.getCurrentDb();
    if (!t) return;
    const n = this.getCharacterName();
    await t.meta.put({ key: w6, value: n });
  }
  /**
   * 
   */
  async getSavedCharacterName() {
    const t = this.getCurrentDb();
    if (!t) return "Unknown";
    const n = await t.meta.get(w6);
    return (n == null ? void 0 : n.value) || "Unknown";
  }
  /**
   * Debug/Dev only
   */
  async resetState() {
    const t = this.getCurrentDb();
    t && await t.meta.put({ key: hw, value: d0 });
  }
}
const Vd = new Gz(), _6 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ChatManager: Gz,
  chatManager: Vd
}, Symbol.toStringTag, { value: "Module" }));
function S6() {
  return typeof crypto < "u" && typeof crypto.randomUUID == "function" ? crypto.randomUUID() : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (e) => {
    const t = Math.random() * 16 | 0;
    return (e === "x" ? t : t & 3 | 8).toString(16);
  });
}
function Ks() {
  const e = fi();
  return e ? Fl(e) : null;
}
function C6() {
  const e = fi();
  return e ? tf(e) : null;
}
const Zi = dD((e, t) => ({
  currentChatId: null,
  lastSummarizedFloor: 0,
  isProcessing: !1,
  recentEvents: [],
  // V0.6 
  currentScope: null,
  resolveScope: async (n, r) => {
    e({ currentChatId: n, currentScope: { id: 1 } });
    const i = await Vd.getState();
    return e({ lastSummarizedFloor: i.last_summarized_floor }), { id: 1 };
  },
  initChat: async () => {
    const n = fi();
    if (!n)
      return console.warn("[MemoryStore] No chat_id available"), null;
    if (n !== t().currentChatId) {
      console.debug(`[MemoryStore] Switching to chat: ${n}`);
      const r = await Vd.getState();
      e({
        currentChatId: n,
        currentScope: { id: 1 },
        // 
        lastSummarizedFloor: r.last_summarized_floor,
        recentEvents: []
      });
    }
    return Fl(n);
  },
  saveEvent: async (n) => {
    const r = Ks();
    if (!r)
      throw new Error("[MemoryStore] No current chat");
    const i = {
      ...n,
      id: S6(),
      timestamp: Date.now(),
      is_embedded: n.is_embedded ?? !1,
      // V0.7: 
      is_archived: n.is_archived ?? !1
      // V0.7: 
    };
    return await r.events.add(i), e((a) => ({
      recentEvents: [...a.recentEvents, i].slice(-10)
    })), i;
  },
  getEventSummaries: async (n) => {
    const r = C6();
    if (!r) return "";
    try {
      const i = await r.events.toArray();
      if (i.length === 0) return "";
      const a = n ? new Set(n) : null, o = i.filter(
        (c) => c.level >= 1 || // 
        !c.is_archived || // 
        (a == null ? void 0 : a.has(c.id))
        //  RAG 
      );
      return o.length === 0 ? "" : (o.sort((c, f) => {
        var _, E, k, T;
        const p = ((_ = c.source_range) == null ? void 0 : _.start_index) ?? 0, g = ((E = f.source_range) == null ? void 0 : E.start_index) ?? 0;
        if (p !== g) return p - g;
        const x = ((k = c.source_range) == null ? void 0 : k.end_index) ?? 0, b = ((T = f.source_range) == null ? void 0 : T.end_index) ?? 0;
        return x !== b ? x - b : c.timestamp - f.timestamp;
      }), `<summary>
${o.map((c) => c.summary).join(`

`)}
</summary>`);
    } catch (i) {
      return console.error("[MemoryStore] Failed to get event summaries:", i), "";
    }
  },
  countEventTokens: async () => {
    const n = Ks();
    if (!n) return { totalTokens: 0, eventCount: 0, activeEventCount: 0 };
    try {
      const r = await n.events.toArray();
      if (r.length === 0) return { totalTokens: 0, eventCount: 0, activeEventCount: 0 };
      const i = r.filter((u) => !u.is_archived), a = i.map((u) => u.summary).join(`

`);
      return {
        totalTokens: await Yr.countTokens(a),
        eventCount: r.length,
        activeEventCount: i.length
        // 
      };
    } catch (r) {
      return console.error("[MemoryStore] Failed to count event tokens:", r), { totalTokens: 0, eventCount: 0, activeEventCount: 0 };
    }
  },
  setLastSummarizedFloor: async (n) => {
    await Vd.updateState({ last_summarized_floor: n }), e({ lastSummarizedFloor: n });
  },
  setProcessing: (n) => e({ isProcessing: n }),
  reset: () => e({
    currentChatId: null,
    currentScope: null,
    lastSummarizedFloor: 0,
    isProcessing: !1,
    recentEvents: []
  }),
  // ==================== Trim  ====================
  /**
   * 
   */
  archiveEvents: async (n) => {
    if (n.length === 0) return;
    const r = Ks();
    if (r)
      try {
        await r.events.where("id").anyOf(n).modify({ is_archived: !0 }), console.log(`[MemoryStore] Archived ${n.length} events`);
      } catch (i) {
        console.error("[MemoryStore] Failed to archive events:", i);
      }
  },
  /**
   * 
   */
  markEventsAsEmbedded: async (n) => {
    if (n.length === 0) return;
    const r = Ks();
    if (r)
      try {
        await r.events.where("id").anyOf(n).modify({ is_embedded: !0 }), console.log(`[MemoryStore] Marked ${n.length} events as embedded`);
      } catch (i) {
        console.error("[MemoryStore] Failed to mark events as embedded:", i);
      }
  },
  getEventsToMerge: async (n = 3) => {
    const r = Ks();
    if (!r) return [];
    try {
      const i = await r.events.orderBy("timestamp").toArray();
      return i.length <= n ? [] : i.slice(0, i.length - n);
    } catch (i) {
      return console.error("[MemoryStore] Failed to get events to merge:", i), [];
    }
  },
  deleteEvents: async (n) => {
    if (n.length === 0) return;
    const r = Ks();
    if (r)
      try {
        await r.events.bulkDelete(n), console.log(`[MemoryStore] Deleted ${n.length} events`);
      } catch (i) {
        throw console.error("[MemoryStore] Failed to delete events:", i), i;
      }
  },
  /**
   * 
   */
  updateEvent: async (n, r) => {
    if (!n) return;
    const i = Ks();
    if (i)
      try {
        const { id: a, timestamp: o, ...u } = r;
        await i.events.update(n, u), console.log(`[MemoryStore] Updated event: ${n}`, u);
      } catch (a) {
        throw console.error("[MemoryStore] Failed to update event:", a), a;
      }
  },
  getAllEvents: async () => {
    const n = Ks();
    if (!n) return [];
    try {
      return await n.events.orderBy("timestamp").toArray();
    } catch (r) {
      return console.error("[MemoryStore] Failed to get all events:", r), [];
    }
  },
  // ==================== V0.9  ====================
  getAllEntities: async () => {
    const n = Ks();
    if (!n) return [];
    try {
      return await n.entities.toArray();
    } catch (r) {
      return console.error("[MemoryStore] Failed to get all entities:", r), [];
    }
  },
  saveEntity: async (n) => {
    const r = Ks();
    if (!r)
      throw new Error("[MemoryStore] No current chat");
    const i = {
      ...n,
      id: S6(),
      last_updated_at: Date.now(),
      aliases: n.aliases || [],
      profile: n.profile || {}
    };
    return await r.entities.add(i), console.log(`[MemoryStore] Saved entity: ${i.name}`), i;
  },
  updateEntity: async (n, r) => {
    if (!n) return;
    const i = Ks();
    if (i)
      try {
        const { id: a, ...o } = r;
        await i.entities.update(n, {
          ...o,
          last_updated_at: Date.now()
        }), console.log(`[MemoryStore] Updated entity: ${n}`);
      } catch (a) {
        throw console.error("[MemoryStore] Failed to update entity:", a), a;
      }
  },
  deleteEntity: async (n) => {
    if (!n) return;
    const r = Ks();
    if (r)
      try {
        await r.entities.delete(n), console.log(`[MemoryStore] Deleted entity: ${n}`);
      } catch (i) {
        throw console.error("[MemoryStore] Failed to delete entity:", i), i;
      }
  },
  findEntityByName: async (n) => {
    const r = Ks();
    if (!r) return null;
    try {
      const i = await r.entities.where("name").equals(n).first();
      return i || await r.entities.where("aliases").equals(n).first() || null;
    } catch (i) {
      return console.error("[MemoryStore] Failed to find entity by name:", i), null;
    }
  },
  /**
   * V0.9.2:  ()
   *  is_archived=true 
   */
  getArchivedEventSummaries: async () => {
    const n = C6();
    if (!n) return "";
    try {
      const i = (await n.events.toArray()).filter((o) => o.is_archived === !0);
      return i.length === 0 ? "" : (i.sort((o, u) => {
        var p, g;
        const c = ((p = o.source_range) == null ? void 0 : p.start_index) ?? 0, f = ((g = u.source_range) == null ? void 0 : g.start_index) ?? 0;
        return c !== f ? c - f : o.timestamp - u.timestamp;
      }), `<archived_summary>
${i.map((o) => o.summary).join(`

`)}
</archived_summary>`);
    } catch (r) {
      return console.error("[MemoryStore] Failed to get archived event summaries:", r), "";
    }
  },
  // ====================  ====================
  clearChatDatabase: async () => {
    const n = Ks();
    if (n)
      try {
        await n.transaction("rw", n.events, n.entities, n.meta, async () => {
          await n.events.clear(), await n.entities.clear(), await n.meta.clear();
        }), e({
          lastSummarizedFloor: 0,
          recentEvents: []
        }), console.info("[MemoryStore] Database cleared successfully");
      } catch (r) {
        throw console.error("[MemoryStore] Failed to clear database:", r), r;
      }
  },
  deleteChatDatabase: async () => {
    const n = t().currentChatId;
    if (n)
      try {
        await qD(n), t().reset(), console.info("[MemoryStore] Database deleted successfully");
      } catch (r) {
        throw console.error("[MemoryStore] Failed to delete database:", r), r;
      }
  }
})), Kz = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  useMemoryStore: Zi
}, Symbol.toStringTag, { value: "Module" })), jE = [
  { value: "input", label: "", description: " LLM " },
  { value: "output", label: "", description: " LLM /" },
  { value: "both", label: "", description: "" }
], im = [
  {
    id: "remove-think",
    name: "",
    pattern: "<think(?:\\s+[^>]*)?>[\\s\\S]*?<\\/think\\s*>",
    replacement: "",
    enabled: !0,
    flags: "gi",
    scope: "both",
    description: " LLM  <think>...</think> "
  },
  {
    id: "remove-headless-think",
    name: "",
    pattern: "[\\s\\S]*?<\\/think\\s*>",
    replacement: "",
    enabled: !0,
    flags: "gi",
    scope: "both",
    description: " </think> "
  },
  {
    id: "remove-update-variable",
    name: " UpdateVariable",
    pattern: "<UpdateVariable(?:\\s+[^>]*)?>[\\s\\S]*?<\\/UpdateVariable\\s*>",
    replacement: "",
    enabled: !0,
    flags: "gi",
    scope: "both",
    description: " MVU "
  },
  {
    id: "remove-status-placeholder",
    name: " StatusPlaceHolder",
    pattern: "<StatusPlaceHolderImpl(?:\\s+[^>]*)?\\s*\\/>",
    replacement: "",
    enabled: !0,
    flags: "gi",
    scope: "both",
    description: ""
  }
];
class lb {
  constructor(t) {
    yt(this, "rules", []);
    this.rules = t || [...im];
  }
  /**
   * 
   * @param text 
   * @param scope 
   */
  process(t, n) {
    let r = t;
    for (const i of this.rules)
      if (i.enabled && !(n && i.scope !== n && i.scope !== "both"))
        try {
          const a = new RegExp(i.pattern, i.flags);
          r = r.replace(a, i.replacement);
        } catch (a) {
          console.warn(`[RegexProcessor]  "${i.name}" :`, a);
        }
    return r;
  }
  /**
   * 
   */
  processWithRule(t, n) {
    try {
      const r = new RegExp(n.pattern, n.flags);
      return t.replace(r, n.replacement);
    } catch (r) {
      return console.warn("[RegexProcessor] :", r), t;
    }
  }
  /**
   * 
   */
  validatePattern(t, n) {
    try {
      return new RegExp(t, n), { valid: !0 };
    } catch (r) {
      return {
        valid: !1,
        error: r instanceof Error ? r.message : ""
      };
    }
  }
  /**
   * 
   */
  getRules() {
    return [...this.rules];
  }
  /**
   * 
   */
  setRules(t) {
    this.rules = [...t];
  }
  /**
   * 
   */
  addRule(t) {
    this.rules.push(t);
  }
  /**
   * 
   */
  updateRule(t, n) {
    const r = this.rules.findIndex((i) => i.id === t);
    r >= 0 && (this.rules[r] = { ...this.rules[r], ...n });
  }
  /**
   * 
   */
  deleteRule(t) {
    this.rules = this.rules.filter((n) => n.id !== t);
  }
  /**
   * /
   */
  toggleRule(t) {
    const n = this.rules.find((r) => r.id === t);
    n && (n.enabled = !n.enabled);
  }
  /**
   * 
   */
  resetToDefaults() {
    this.rules = [...im];
  }
  /**
   * 
   */
  getEnabledCount() {
    return this.rules.filter((t) => t.enabled).length;
  }
  // ========== V0.8:  ==========
  /**
   * 
   * @param text 
   * @param tagName  ( 'output', 'query')
   * @returns  null
   */
  captureTag(t, n) {
    var r;
    try {
      const i = new RegExp(`<${n}(?:\\s+[^>]*)?>([\\s\\S]*?)<\\/${n}\\s*>`, "i"), a = t.match(i);
      return ((r = a == null ? void 0 : a[1]) == null ? void 0 : r.trim()) || null;
    } catch (i) {
      return console.warn(`[RegexProcessor] : ${n}`, i), null;
    }
  }
  /**
   * 
   * @param text 
   * @param tagName 
   */
  removeTag(t, n) {
    try {
      const r = new RegExp(`<${n}(?:\\s+[^>]*)?>[\\s\\S]*?<\\/${n}\\s*>`, "gi");
      return t.replace(r, "").trim();
    } catch (r) {
      return console.warn(`[RegexProcessor] : ${n}`, r), t;
    }
  }
  /**
   * 
   * @param text 
   * @param tagNames 
   * @returns 
   */
  captureTags(t, n) {
    const r = {};
    for (const i of n)
      r[i] = this.captureTag(t, i);
    return r;
  }
}
const Bl = new lb(), fk = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DEFAULT_REGEX_RULES: im,
  REGEX_SCOPE_OPTIONS: jE,
  RegexProcessor: lb,
  regexProcessor: Bl
}, Symbol.toStringTag, { value: "Module" })), oi = class oi {
  /**
   *  Engram 
   */
  static async init() {
    var t, n;
    if (!this.isInitialized)
      try {
        const r = (n = (t = window.SillyTavern) == null ? void 0 : t.getContext) == null ? void 0 : n.call(t);
        if (!(r != null && r.registerMacro)) {
          pe.warn("MacroService", "SillyTavern registerMacro API ");
          return;
        }
        r.registerMacro(
          "engramSummaries",
          () => oi.cachedSummaries,
          "Engram:  ( IndexedDB)"
        ), r.registerMacro(
          "worldbookContext",
          () => oi.cachedWorldbookContext,
          "Engram: "
        ), r.registerMacro(
          "userInput",
          () => oi.cachedUserInput,
          "Engram: "
        ), r.registerMacro(
          "chatHistory",
          () => oi.getChatHistory(),
          "Engram:  ()"
        ), r.registerMacro(
          "context",
          () => oi.cachedCharDescription,
          "Engram: "
        ), r.registerMacro(
          "engramGraph",
          () => oi.cachedGraphData,
          "Engram:  JSON ()"
        ), r.registerMacro(
          "engramArchivedSummaries",
          () => oi.cachedArchivedSummaries,
          "Engram:  ()"
        ), r.registerMacro(
          "userPersona",
          () => oi.cachedUserPersona,
          "Engram:  ( Persona Description)"
        ), this.isInitialized = !0, pe.success("MacroService", "", {
          macros: ["{{engramSummaries}}", "{{worldbookContext}}", "{{userInput}}", "{{chatHistory}}", "{{context}}", "{{engramGraph}}", "{{engramArchivedSummaries}}", "{{userPersona}}"]
        }), await this.refreshCache();
        const i = r.eventSource;
        i && i.on("chat_id_changed", () => {
          this.refreshCache().catch((a) => pe.warn("MacroService", "", a));
        });
      } catch (r) {
        pe.error("MacroService", "", r);
      }
  }
  /**
   * 
   */
  static setUserInput(t) {
    this.cachedUserInput = t;
  }
  /**
   *  ()
   * @param recalledIds RAG  ID 
   */
  static async refreshCache(t) {
    await Promise.all([
      this.refreshEngramCache(t),
      this.refreshWorldbookCache()
    ]), this.refreshUserPersona(), this.refreshCustomMacros();
  }
  /**
   *  Engram  DB  ()
   *  Pipeline 
   */
  static async refreshEngramCache(t) {
    try {
      const n = Zi.getState();
      this.cachedSummaries = await n.getEventSummaries(t), await this.refreshArchivedSummaries(), pe.debug("MacroService", "Engram DB ", {
        summariesLength: this.cachedSummaries.length,
        recalledCount: (t == null ? void 0 : t.length) ?? 0
      });
    } catch (n) {
      pe.warn("MacroService", " Engram DB ", n);
    }
  }
  /**
   *  ()
   * 
   */
  static async refreshWorldbookCache() {
    try {
      const t = await Yr.getActivatedWorldInfo(), n = await this.processEJSMacros([t]);
      this.cachedWorldbookContext = n[0] || "", this.refreshCharDescription(), pe.debug("MacroService", "", {
        worldbookLength: this.cachedWorldbookContext.length
      });
    } catch (t) {
      pe.debug("MacroService", "", t), this.cachedWorldbookContext = "";
    }
  }
  /**
   * V0.9: 
   *  EventNode JSON embedding 
   */
  static async refreshGraphCache() {
    try {
      const t = Zi.getState(), n = await t.getAllEvents(), r = await t.getAllEntities(), i = n.map((o) => ({
        id: o.id,
        summary: o.summary,
        structured_kv: o.structured_kv,
        significance_score: o.significance_score,
        level: o.level,
        source_range: o.source_range
      })), a = r.map((o) => ({
        id: o.id,
        name: o.name,
        type: o.type,
        aliases: o.aliases || [],
        description: o.description
      }));
      this.cachedGraphData = JSON.stringify({
        events: i,
        existingEntities: a
      }, null, 2), pe.debug("MacroService", "", {
        eventCount: n.length,
        entityCount: r.length
      });
    } catch (t) {
      pe.warn("MacroService", "", t), this.cachedGraphData = JSON.stringify({ events: [], existingEntities: [] });
    }
  }
  /**
   * V0.8.5:  RAG 
   * 
   * @param nodes RAG 
   */
  static async refreshCacheWithNodes(t) {
    try {
      this.cachedSummaries = t.map((n) => n.summary).join(`

---

`);
      try {
        const n = await Yr.getActivatedWorldInfo(), r = await this.processEJSMacros([n]);
        this.cachedWorldbookContext = r[0] || "";
      } catch (n) {
        pe.debug("MacroService", "", n), this.cachedWorldbookContext = "";
      }
      this.refreshCharDescription(), pe.debug("MacroService", "RAG ", {
        summariesLength: this.cachedSummaries.length,
        nodeCount: t.length
      });
    } catch (n) {
      pe.warn("MacroService", " RAG ", n);
    }
  }
  /**
   *  ST-Prompt-Template ()  EJS 
   * V0.8.6:  window.EjsTemplate API ( test/.js)
   */
  static async processEJSMacros(t) {
    if (t.length === 0) return t;
    if (!window.EjsTemplate || typeof window.EjsTemplate.evalTemplate != "function")
      return pe.debug("MacroService", "ST-Prompt-Template  EJS "), t;
    try {
      const n = await window.EjsTemplate.prepareContext();
      if (typeof window.Mvu < "u" && window.Mvu.getMvuData)
        try {
          const i = window.Mvu.getMvuData({ type: "message", message_id: "latest" });
          i && i.stat_data && (n.mvu = i.stat_data);
        } catch (i) {
          pe.warn("MacroService", " MVU ", i);
        }
      return await Promise.all(t.map(async (i) => {
        try {
          return await window.EjsTemplate.evalTemplate(i, n);
        } catch (a) {
          return pe.warn("MacroService", "EJS ", a), i;
        }
      }));
    } catch (n) {
      return pe.warn("MacroService", "EJS ", n), t;
    }
  }
  /**
   * 
   * @param floorRange  [start, end] (1-based, inclusive)
   *  limit 
   */
  static getChatHistory(t) {
    var n, r;
    try {
      const i = (r = (n = window.SillyTavern) == null ? void 0 : n.getContext) == null ? void 0 : r.call(n), a = window.TavernHelper;
      if (i != null && i.chat && Array.isArray(i.chat)) {
        let o = [];
        if (t) {
          const [u, c] = t;
          o = i.chat.slice(u - 1, c), pe.debug("MacroService", "getChatHistory (Range)", { range: t, count: o.length });
        } else {
          const u = this.getDynamicChatHistoryLimit();
          o = i.chat.slice(-u), pe.debug("MacroService", "getChatHistory (Recent)", { limit: u, count: o.length });
        }
        return o.length === 0 ? "" : o.map((u, c) => {
          let f = u.mes || u.content || u.message || "";
          const p = f, g = !!a, x = typeof (a == null ? void 0 : a.formatAsTavernRegexedString) == "function";
          if (c === 0 && pe.debug("MacroService", "TavernHelper ", {
            hasTavernHelper: g,
            hasFormatFunc: x,
            availableMethods: a ? Object.keys(a).slice(0, 10) : []
          }), g && x)
            try {
              const _ = f;
              f = a.formatAsTavernRegexedString(f, "ai_output", { isPrompt: !0 });
              const E = _ !== f;
              c === 0 && pe.debug("MacroService", "TavernHelper ", {
                didChange: E,
                prevLength: _.length,
                afterLength: f.length
              }), !f && _ && (pe.warn("MacroService", "TavernHelper stripped content empty!", { prev: _, content: f }), f = _);
            } catch (_) {
              pe.warn("MacroService", "", _);
            }
          else c === 0 && pe.warn("MacroService", "TavernHelper.formatAsTavernRegexedString ", {
            hasTavernHelper: g,
            hasFormatFunc: x
          });
          const b = f;
          return f = Bl.process(f, "both"), !f && b && pe.warn("MacroService", "RegexProcessor stripped content empty!", { preRegex: b, content: f }), (c === 0 || c === o.length - 1) && pe.debug("MacroService", "Message processed", {
            index: c,
            original: p.substring(0, 50),
            step1_tavern: b.substring(0, 50),
            step2_regex: f.substring(0, 50)
          }), f;
        }).join(`

`);
      }
      return pe.warn("MacroService", "Context chat is empty or invalid"), "";
    } catch (i) {
      return pe.debug("MacroService", "", i), "";
    }
  }
  /**
   * 
   */
  static refreshCharDescription() {
    var t, n;
    try {
      const r = (n = (t = window.SillyTavern) == null ? void 0 : t.getContext) == null ? void 0 : n.call(t);
      if (r != null && r.characters && r.characterId >= 0) {
        const i = r.characters[r.characterId];
        this.cachedCharDescription = (i == null ? void 0 : i.description) || "";
      }
    } catch (r) {
      pe.debug("MacroService", "", r);
    }
  }
  /**
   * V0.9.2:  chatHistory 
   * : floorInterval - bufferSize
   *  {{chatHistory}} 
   */
  static getDynamicChatHistoryLimit() {
    try {
      const t = tt.get("summarizerConfig"), n = (t == null ? void 0 : t.floorInterval) ?? 20, r = (t == null ? void 0 : t.bufferSize) ?? 3, i = Math.max(1, n - r);
      return pe.debug("MacroService", " chatHistory limit", { floorInterval: n, bufferSize: r, limit: i }), i;
    } catch (t) {
      return pe.warn("MacroService", " limit  17", t), 17;
    }
  }
  /**
   * V0.9.2: 
   *  is_archived=true 
   */
  static async refreshArchivedSummaries() {
    try {
      const t = Zi.getState();
      this.cachedArchivedSummaries = await t.getArchivedEventSummaries(), pe.debug("MacroService", "", {
        length: this.cachedArchivedSummaries.length
      });
    } catch (t) {
      pe.warn("MacroService", "", t), this.cachedArchivedSummaries = "";
    }
  }
  /**
   * V0.9.2: 
   *  power_user.persona_description 
   */
  static refreshUserPersona() {
    try {
      const t = window.power_user;
      this.cachedUserPersona = (t == null ? void 0 : t.persona_description) || "", pe.debug("MacroService", "", {
        length: this.cachedUserPersona.length
      });
    } catch (t) {
      pe.debug("MacroService", "", t), this.cachedUserPersona = "";
    }
  }
  /**
   * V0.9.2: 
   *  apiSettings.customMacros 
   */
  static refreshCustomMacros() {
    var t, n;
    try {
      const r = (n = (t = window.SillyTavern) == null ? void 0 : t.getContext) == null ? void 0 : n.call(t);
      if (!(r != null && r.registerMacro)) {
        pe.debug("MacroService", " registerMacro ");
        return;
      }
      const i = tt.get("apiSettings"), a = (i == null ? void 0 : i.customMacros) || [];
      this.cachedCustomMacros.clear();
      for (const o of a) {
        if (!o.enabled || !o.name) continue;
        this.cachedCustomMacros.set(o.name, o.content);
        const u = o.name;
        r.registerMacro(
          u,
          () => this.cachedCustomMacros.get(u) ?? "",
          `Engram : {{${u}}}`
        );
      }
      pe.debug("MacroService", "", {
        count: this.cachedCustomMacros.size,
        names: Array.from(this.cachedCustomMacros.keys())
      });
    } catch (r) {
      pe.warn("MacroService", "", r);
    }
  }
};
yt(oi, "isInitialized", !1), // ---  ---
yt(oi, "cachedSummaries", ""), yt(oi, "cachedWorldbookContext", ""), yt(oi, "cachedUserInput", ""), yt(oi, "cachedCharDescription", ""), // V0.9: 
yt(oi, "cachedGraphData", ""), // V0.9.2: 
yt(oi, "cachedArchivedSummaries", ""), yt(oi, "cachedUserPersona", ""), // V0.9.2: 
yt(oi, "cachedCustomMacros", /* @__PURE__ */ new Map());
let Za = oi;
const Yz = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  MacroService: Za
}, Symbol.toStringTag, { value: "Module" })), NX = [
  // 
  { pattern: /\n{3,}/g, replacement: `

`, description: "" },
  // 
  { pattern: /^[ \t]+|[ \t]+$/gm, replacement: "", description: "" },
  //  Markdown 
  { pattern: /```\w*\n?/g, replacement: "", description: "Markdown" },
  // 
  { pattern: /[""]/g, replacement: '"', description: "" },
  { pattern: /['']/g, replacement: "'", description: "" }
];
class Wz {
  constructor(t) {
    yt(this, "rules");
    this.rules = t || NX;
  }
  /**
   *  LLM 
   * @param text 
   * @returns 
   */
  clean(t) {
    let n = t;
    for (const r of this.rules)
      n = n.replace(r.pattern, r.replacement);
    return n.trim();
  }
  /**
   * 
   * @param summary 
   * @param metadata 
   */
  formatAsWorldEntry(t, n) {
    let i = `  [${`${n.floorRange[0]}-${n.floorRange[1]}`}]
`;
    return i += t, i;
  }
  /**
   * 
   * @param text 
   */
  extractPlainText(t) {
    return t.replace(/```[\s\S]*?```/g, "").replace(/\[([^\]]+)\]\([^)]+\)/g, "$1").replace(/[*_~`#]/g, "").replace(/\n{2,}/g, `
`).trim();
  }
  /**
   * 
   * @param text 
   * @param maxLength 
   * @param suffix 
   */
  truncate(t, n, r = "...") {
    return t.length <= n ? t : t.slice(0, n - r.length) + r;
  }
  /**
   * 
   */
  addRule(t) {
    this.rules.push(t);
  }
  /**
   * 
   */
  getRules() {
    return [...this.rules];
  }
}
const Zz = new Wz();
function E6() {
  try {
    return window.TavernHelper || null;
  } catch {
    return null;
  }
}
function RX() {
  var e, t, n, r;
  try {
    const i = (t = (e = window.SillyTavern) == null ? void 0 : e.getContext) == null ? void 0 : t.call(e);
    return ((r = (n = i == null ? void 0 : i.extensionSettings) == null ? void 0 : n.connectionManager) == null ? void 0 : r.profiles) || [];
  } catch {
    return [];
  }
}
class Xz {
  /**
   *  LLM 
   * @param request 
   */
  async generate(t) {
    var r, i, a, o;
    const n = E6();
    if (!(n != null && n.generateRaw) && !(n != null && n.generate))
      return {
        success: !1,
        content: "",
        error: "TavernHelper "
      };
    try {
      let u;
      const c = tt.getSettings();
      let f;
      t.presetId && (f = (i = (r = c.apiSettings) == null ? void 0 : r.llmPresets) == null ? void 0 : i.find((N) => N.id === t.presetId)), !f && ((a = c.apiSettings) != null && a.selectedPresetId) && (f = (o = c.apiSettings.llmPresets) == null ? void 0 : o.find((N) => N.id === c.apiSettings.selectedPresetId));
      let p;
      if (f && f.source !== "tavern") {
        if (p = {}, pe.info("LLMAdapter", `: ${f.name} (${f.source})`), f.parameters && (p = {
          ...p,
          //  ST API 
          temperature: f.parameters.temperature,
          max_tokens: f.parameters.maxTokens,
          // ST API  max_tokens
          top_p: f.parameters.topP,
          frequency_penalty: f.parameters.frequencyPenalty,
          presence_penalty: f.parameters.presencePenalty
          //  rep_pen  frequency_penalty 
          // rep_pen: preset.parameters.frequencyPenalty,
        }), f.source === "custom" && f.custom)
          p.apiurl = f.custom.apiUrl, p.key = f.custom.apiKey, p.model = f.custom.model, p.source = f.custom.apiSource || "openai";
        else if (f.source === "tavern_profile" && f.tavernProfileId) {
          const O = RX().find((P) => P.id === f.tavernProfileId);
          O ? (pe.info("LLMAdapter", ` Profile: ${O.name}`), p.model = O.model, p.source = O.api, O["api-url"] ? p.apiurl = O["api-url"] : O.request_url ? p.apiurl = O.request_url : O.openai_url && (p.apiurl = O.openai_url), O.key ? p.key = O.key : O.request_apikey ? p.key = O.request_apikey : O.openai_key && (p.key = O.openai_key)) : (pe.warn("LLMAdapter", ` ID  ${f.tavernProfileId} `), p = void 0);
        }
      }
      const g = t.systemPrompt ? `${t.systemPrompt}

${t.userPrompt}` : t.userPrompt, x = {
        prompt: g,
        // 
        body: {
          messages: [
            { role: "system", content: t.systemPrompt },
            { role: "user", content: t.userPrompt }
          ]
        },
        // 
        is_engram: !0
        //  ()
      }, { EventBus: b, TavernEventType: _ } = await Promise.resolve().then(() => bD);
      await b.emit(_.GENERATION_AFTER_COMMANDS, "engram", {}, !1), await b.emit(_.GENERATE_AFTER_DATA, x);
      const E = typeof x.prompt == "string" ? x.prompt : g;
      let k = t.systemPrompt, T = t.userPrompt;
      E !== g && (k = "", T = E);
      const { regexProcessor: R } = await Promise.resolve().then(() => fk);
      if (T = R.process(T, "input"), n.generateRaw) {
        const N = [];
        k && N.push({ role: "system", content: k }), N.push({ role: "user", content: T }), u = await n.generateRaw({
          ordered_prompts: N,
          custom_api: p
          // V0.8.6 Fix
        });
      } else if (n.generate)
        u = await n.generate({
          user_input: T,
          system_prompt: k,
          should_stream: !1,
          max_chat_history: 0,
          custom_api: p
          // V0.8.6 Fix
        });
      else
        throw new Error(" API");
      return {
        success: !0,
        content: u || ""
      };
    } catch (u) {
      const c = u instanceof Error ? u.message : String(u);
      return console.error("[Engram] LLMAdapter :", u), {
        success: !1,
        content: "",
        error: c
      };
    }
  }
  /**
   *  LLM API 
   */
  isAvailable() {
    const t = E6();
    return !!(t != null && t.generate || t != null && t.generateRaw);
  }
  /**
   *  Token 
   * @param text 
   */
  estimateTokens(t) {
    return Math.ceil(t.length / 3);
  }
}
const Qd = new Xz();
class dk {
  /**
   * Clean and parse JSON from a string.
   * @param input Raw string from LLM
   * @returns Parsed object or null if failed
   */
  static parse(t) {
    const n = Bl.process(t, "output"), r = this.extractJsonBlock(n);
    if (!r)
      return console.warn("[RobustJsonParser] No JSON block found."), null;
    try {
      return JSON.parse(r);
    } catch {
      const a = this.simpleRepair(r);
      try {
        return JSON.parse(a);
      } catch (o) {
        return console.error("[RobustJsonParser] Parse failed:", o), console.debug("[RobustJsonParser] Failed string:", r), null;
      }
    }
  }
  /**
   * Extracts the likely JSON part from a string.
   * Prioritizes ```json ... ``` blocks, then looks for outer { ... }.
   */
  static extractJsonBlock(t) {
    const n = t.match(/```(?:json)?\s*([\s\S]*?)```/i);
    if (n && n[1])
      return n[1].trim();
    const r = t.indexOf("{"), i = t.lastIndexOf("}");
    return r !== -1 && i !== -1 && i > r ? t.substring(r, i + 1) : null;
  }
  /**
   * Simple JSON repair logic
   * Fixes common LLM JSON errors:
   * - Trailing commas
   * - Unquoted keys (simple cases)
   * - Single quotes
   */
  static simpleRepair(t) {
    let n = t;
    return n = n.replace(/,\s*([}\]])/g, "$1"), n;
  }
}
class MX {
  /**
   *  Pipeline
   * V0.6:  JSON Extractor LLM
   */
  async run(t) {
    const n = Zi.getState(), r = Date.now();
    try {
      if (console.log("[Pipeline] Starting..."), n.setProcessing(!0), !await n.initChat())
        return { success: !1, error: "No chat context available" };
      console.log(`[Pipeline] Chat database initialized (${Date.now() - r}ms)`);
      const a = dk.parse(t.jsonContent);
      if (!a || !a.events || a.events.length === 0)
        return console.warn("[Pipeline] No events found in JSON"), { success: !1, error: "No events in JSON content" };
      console.log(`[Pipeline] Parsed ${a.events.length} events from JSON (${Date.now() - r}ms)`);
      const o = [];
      for (const c of a.events) {
        const f = c.meta, p = [];
        f.time_anchor && p.push(f.time_anchor), f.location && p.push(f.location), f.role && f.role.length > 0 && p.push(f.role.join(", "));
        const g = p.length > 0 ? `(${p.join(" | ")}) ` : "", x = f.event ? `${f.event}:
` : "", b = [];
        f.logic && f.logic.length > 0 && b.push(`[: ${f.logic.join(", ")}]`), f.causality && b.push(`[: ${f.causality}]`);
        const _ = b.length > 0 ? `
${b.join(" ")}` : "";
        let E = c.summary;
        console.log(`[Pipeline] Processing event: ${f.event || "Unknown"}, Summary length: ${E == null ? void 0 : E.length}`), (!E || E.trim() === "") && (console.warn("[Pipeline] Event summary is empty! Using fallback.", c), E = `[Summary Missing] ${f.event || ""}`);
        const k = `${x}${g}${E}${_}`, T = await n.saveEvent({
          summary: k,
          structured_kv: {
            time_anchor: f.time_anchor || "",
            role: f.role || [],
            location: f.location || "",
            event: f.event || "",
            logic: f.logic || [],
            causality: f.causality || ""
          },
          significance_score: c.significance_score,
          level: 0,
          is_embedded: !1,
          // V0.7: 
          is_archived: !1,
          // V0.7: 
          source_range: {
            start_index: t.sourceRange.start,
            end_index: t.sourceRange.end
          }
        });
        o.push(T);
      }
      console.log(`[Pipeline] Saved ${o.length} events to DB (${Date.now() - r}ms)`), await n.setLastSummarizedFloor(t.sourceRange.end);
      const { MacroService: u } = await Promise.resolve().then(() => Yz);
      return await u.refreshEngramCache(), console.log(`[Pipeline] Macro cache refreshed (Fast) (${Date.now() - r}ms)`), console.log(`[Pipeline] Completed successfully in ${Date.now() - r}ms`), { success: !0, events: o };
    } catch (i) {
      return console.error("[Pipeline] Failed:", i), { success: !1, error: String(i) };
    } finally {
      n.setProcessing(!1);
    }
  }
}
const Qz = new MX();
async function k6() {
  const { Logger: e } = await Promise.resolve().then(() => F5);
  await e.init(), e.info("STBridge", "Engram ...");
  const { SettingsManager: t } = await Promise.resolve().then(() => H5);
  t.initSettings(), e.info("STBridge", "SettingsManager initialized");
  const n = t.getRegexRules();
  if (n && n.length > 0) {
    const { regexProcessor: i } = await Promise.resolve().then(() => fk);
    i.setRules(n), e.info("STBridge", `Loaded ${n.length} regex rules`);
  }
  try {
    const { checkTavernIntegration: i } = await Promise.resolve().then(() => bD), a = await i();
    e.info("TavernAPI", "", a);
  } catch (i) {
    e.warn("TavernAPI", "", { error: String(i) });
  }
  try {
    const { summarizerService: i } = await Promise.resolve().then(() => FX);
    i.start();
    const a = i.getStatus();
    e.info("Summarizer", "", a);
  } catch (i) {
    e.warn("Summarizer", "", { error: String(i) });
  }
  OX();
  const { ThemeManager: r } = await Promise.resolve().then(() => X1);
  r.init();
  try {
    const { injector: i } = await Promise.resolve().then(() => zne);
    i.init(), e.info("Injector", "Service initialized");
  } catch (i) {
    e.warn("Injector", "Failed to initialize Injector", { error: String(i) });
  }
  try {
    const { MacroService: i } = await Promise.resolve().then(() => Yz);
    await i.init();
  } catch (i) {
    e.warn("MacroService", "Failed to initialize MacroService", { error: String(i) });
  }
  try {
    const { initQuickPanelButton: i } = await Promise.resolve().then(() => Qne);
    i(), e.info("QuickPanelButton", "QR ");
  } catch (i) {
    e.warn("QuickPanelButton", "Failed to initialize QuickPanelButton", { error: String(i) });
  }
  IX();
  try {
    const { CharacterDeleteService: i } = await Promise.resolve().then(() => ire);
    i.init(), e.info("STBridge", "CharacterDeleteService initialized");
  } catch (i) {
    e.warn("STBridge", "Failed to initialize CharacterDeleteService", { error: String(i) });
  }
  try {
    const { setupKeyboardShortcuts: i } = await Promise.resolve().then(() => ore), { toggleQuickPanel: a, openCommandPalette: o } = await Promise.resolve().then(() => jP);
    i({
      toggleMainPanel: G0,
      toggleQuickPanel: a,
      openCommandPalette: o
    }), e.info("STBridge", "Keyboard shortcuts initialized");
  } catch (i) {
    e.warn("STBridge", "Failed to initialize keyboard shortcuts", { error: String(i) });
  }
  e.success("STBridge", "Engram  - Where memories leave their trace.");
}
const Jz = '<svg viewBox="0 0 400 592" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M103.875908,522.166260 C75.225380,521.276611 55.289425,503.229828 52.249313,475.852142 C49.879883,454.514191 63.027035,433.000366 83.930901,424.858398 C88.449257,423.098541 89.857674,420.860199 89.801926,416.150269 C89.555420,395.322357 89.621246,374.489380 89.762306,353.659515 C89.787170,349.987000 88.728760,348.057556 85.120293,346.642609 C64.672897,338.625031 52.338894,320.951630 52.085896,299.869415 C51.832878,278.785156 63.730618,260.903198 84.118019,252.449951 C88.288918,250.720566 89.867378,248.680847 89.807304,244.052597 C89.539139,223.391968 89.589142,202.724701 89.796356,182.062561 C89.836380,178.071609 88.518524,176.326385 84.841705,174.787247 C57.730556,163.438416 45.530682,135.966721 55.436111,109.194000 C62.627293,89.757439 81.922821,76.710289 103.282494,76.841476 C124.355003,76.970901 143.082275,89.740875 149.993118,109.121849 C151.315979,112.831749 153.184799,113.869263 156.863403,113.853104 C186.192612,113.724319 215.522736,113.698357 244.851929,113.811600 C248.773117,113.826736 250.677307,112.652130 252.052902,108.765602 C259.013885,89.098465 278.589447,76.365829 300.503601,76.811897 C322.171844,77.252960 341.040283,91.132324 347.255371,111.201912 C356.569763,141.279358 340.344788,170.373184 309.893127,176.623123 C283.359375,182.068970 260.376740,167.450562 251.980011,145.670181 C250.492157,141.810806 248.818085,140.240295 244.552948,140.266785 C215.390915,140.447968 186.227219,140.357330 157.064072,140.375076 C154.628784,140.376556 151.855545,139.805771 151.141357,143.359161 C150.400787,147.043839 146.628937,150.064713 151.136917,154.478546 C184.592346,187.235229 217.778336,220.267349 250.982285,253.280014 C253.021469,255.307434 254.527191,255.254166 257.033264,254.047714 C276.199188,244.820953 294.752930,247.045853 310.978485,259.993408 C328.011017,273.584869 333.936798,292.106659 327.764038,313.282837 C321.779785,333.812378 307.254517,345.637268 286.367889,349.037231 C276.405396,350.658997 266.352570,349.443024 257.275055,344.363342 C254.265045,342.678986 252.301132,343.049744 249.903275,345.441406 C230.205368,365.088531 210.395386,384.623230 190.631638,404.204376 C177.732651,416.984222 164.859726,429.790344 151.962982,442.572388 C148.257980,446.244415 148.113403,452.901764 151.629196,456.671387 C152.707138,457.827148 154.029282,457.681976 155.328629,457.681946 C185.658203,457.681458 215.987854,457.631042 246.317261,457.695557 C249.355972,457.702026 250.687012,456.399414 251.717636,453.698944 C259.314423,433.793579 278.324493,420.868317 299.341309,421.146240 C320.526215,421.426361 339.575745,434.206421 346.686249,452.909271 C354.337341,473.034058 348.794159,495.642761 332.699371,509.956390 C307.061371,532.757202 263.380280,521.715210 251.978027,489.436371 C250.838303,486.209961 249.371201,484.953583 245.964813,484.962799 C216.302094,485.043304 186.639008,484.985840 156.976028,484.969330 C154.436981,484.967896 152.081528,484.923981 150.916916,488.054077 C142.892441,509.621246 126.842339,520.325989 103.875908,522.166260 M141.430466,266.110352 C145.394760,270.906738 148.503693,276.196198 150.388428,282.139069 C151.211502,284.734314 152.692291,285.770782 155.494156,285.760895 C179.139755,285.677429 202.787949,285.547394 226.430206,285.843811 C232.373352,285.918304 231.388184,281.058533 233.335602,278.254700 C235.007233,275.847992 233.916855,274.189880 232.000244,272.304352 C199.956863,240.780380 167.866821,209.301468 136.133682,177.467056 C131.183243,172.500824 127.483856,170.729507 121.013550,174.621368 C117.660522,176.638214 116.183739,178.155136 116.217278,182.042480 C116.398239,203.022598 116.444160,224.006012 116.243645,244.985474 C116.204666,249.064667 117.676285,250.918961 121.328865,252.228989 C128.972488,254.970444 135.505173,259.524170 141.430466,266.110352 M116.349434,377.499908 C116.351860,390.663696 116.870338,403.855377 116.161102,416.980713 C115.742699,424.723846 121.926743,423.801880 125.649162,426.262665 C129.080231,428.530792 130.798965,425.706268 132.741440,423.784821 C165.551407,391.329803 198.234940,358.745361 231.274231,326.525696 C235.764252,322.147095 232.377243,319.155212 231.599960,315.493317 C230.884583,312.123138 228.193359,312.382568 225.670288,312.382812 C202.675171,312.384949 179.679749,312.445435 156.685303,312.323212 C153.331955,312.305389 151.624329,313.386505 150.456299,316.584381 C145.119888,331.194611 135.004120,341.287384 120.496223,346.769958 C117.238434,348.001068 116.190170,349.706024 116.267418,353.006317 C116.450615,360.833862 116.340004,368.668243 116.349434,377.499908z"/></svg>';
function OX() {
  const e = document.querySelector("#top-settings-holder"), t = document.querySelector("#WI-SP-button");
  if (!e) {
    console.warn("[Engram] #top-settings-holder not found, fallback to floating orb"), DX();
    return;
  }
  const n = document.createElement("div");
  n.id = "engram-drawer", n.className = "drawer";
  const r = document.createElement("div");
  r.className = "drawer-toggle drawer-header";
  const i = document.createElement("div");
  i.id = "engram-drawer-icon", i.className = "drawer-icon fa-fw closedIcon", i.title = "Engram - ", i.setAttribute("data-i18n", "[title]Engram - Memory OS"), i.innerHTML = Jz, i.addEventListener("click", G0), r.appendChild(i), n.appendChild(r), t ? (e.insertBefore(n, t), console.log("[Engram] Top bar button injected before WI-SP-button")) : (e.appendChild(n), console.log("[Engram] Top bar button injected at end (WI-SP-button not found)"));
}
function DX() {
  const e = document.createElement("div");
  e.className = "fixed bottom-5 right-5 w-12 h-12 rounded-full cursor-pointer z-[9999] flex items-center justify-center transition-transform duration-200 bg-gradient-to-br from-orange-500 to-pink-500 shadow-[0_0_20px_rgba(249,115,22,0.5)] hover:scale-110 hover:shadow-[0_0_30px_rgba(249,115,22,0.7)] text-white", e.title = "Engram - ", e.innerHTML = Jz, e.addEventListener("click", G0), document.body.appendChild(e);
}
let _x = null;
function zX(e) {
  _x = e, _x = e;
}
let NE = null, T6 = null;
function PX(e) {
  NE = e;
}
function IX() {
  if (!NE) {
    console.warn("[Engram] Global renderer not ready");
    return;
  }
  const e = "engram-global-overlay";
  let t = document.getElementById(e);
  t || (t = document.createElement("div"), t.id = e, t.className = "pointer-events-none fixed inset-0 z-[11000]", document.body.appendChild(t)), T6 || (T6 = NE(t, () => {
  }), console.log("[Engram] Global overlay mounted"));
}
let pw = !1, h0 = null, ex = null;
function G0() {
  pw && h0 ? (ex && (ex.unmount(), ex = null), h0.remove(), h0 = null, pw = !1) : (h0 = LX(), document.body.appendChild(h0), pw = !0);
}
function LX() {
  var t;
  const e = document.createElement("div");
  return e.className = "fixed inset-0 w-full h-full z-[10000] flex flex-col bg-background text-foreground overflow-hidden", e.style.backgroundColor = "var(--background)", e.style.color = "var(--foreground)", e.style.height = "100dvh", e.style.width = "100vw", e.style.top = "0", e.style.left = "0", e.id = "engram-panel-root", _x ? ex = _x(e, G0) : (e.innerHTML = `
            <div class="flex items-center justify-between p-4 border-b border-slate-400/20">
                <h2 class="m-0 text-lg text-slate-200 flex items-center gap-2"> Engram</h2>
                <button class="bg-transparent border-none text-slate-400 text-2xl cursor-pointer p-1 hover:text-slate-200">&times;</button>
            </div>
            <div class="flex-1 overflow-auto p-5">
                <p style="color: #94a3b8;">React </p>
            </div>
        `, (t = e.querySelector("button")) == null || t.addEventListener("click", G0)), e;
}
async function BX(e, t) {
  try {
    const r = await new Function("path", "return import(path)")("/scripts/chats.js");
    r && typeof r.hideChatMessageRange == "function" ? (await r.hideChatMessageRange(e, t, !1), console.log(`[Engram] Hidden messages range: ${e}-${t}`)) : console.warn("[Engram] hideChatMessageRange not found in chats.js");
  } catch (n) {
    console.error("[Engram] Failed to hide messages:", n);
  }
}
async function qX(e, t = "text", n = "") {
  return window.callPopup ? window.callPopup(e, t, n) : (console.warn("[Engram] callPopup not available"), Promise.resolve(t === "confirm" ? !0 : null));
}
const eP = {
  enabled: !0,
  triggerMode: "auto",
  floorInterval: 25,
  // V0.9.5: 20-30 
  worldbookMode: "chat",
  previewEnabled: !0,
  promptTemplateId: null,
  llmPresetId: null,
  bufferSize: 10,
  // V0.9.5:  10 
  autoHide: !1
}, Np = "engram";
function A6() {
  var e, t;
  try {
    return ((t = (e = window.SillyTavern) == null ? void 0 : e.getContext) == null ? void 0 : t.call(e)) || null;
  } catch {
    return null;
  }
}
function j6() {
  var e, t;
  try {
    const n = (t = (e = window.SillyTavern) == null ? void 0 : e.getContext) == null ? void 0 : t.call(e);
    return n != null && n.chat_metadata ? n.chat_metadata : window.chat_metadata || null;
  } catch {
    return null;
  }
}
function $X() {
  var e;
  try {
    (e = window.saveChatDebounced) == null || e.call(window);
  } catch {
    console.warn("[Engram] saveChatDebounced ");
  }
}
class hk {
  constructor(t, n, r) {
    yt(this, "config");
    yt(this, "textProcessor");
    yt(this, "llmAdapter");
    yt(this, "currentChatId", null);
    yt(this, "isRunning", !1);
    yt(this, "isSummarizing", !1);
    yt(this, "cancelRequested", !1);
    // 
    yt(this, "unsubscribeMessage", null);
    yt(this, "unsubscribeChat", null);
    yt(this, "summaryHistory", []);
    // 
    yt(this, "_lastSummarizedFloor", 0);
    const i = tt.get("summarizerConfig");
    this.config = { ...eP, ...i, ...t }, this.textProcessor = n || Zz, this.llmAdapter = r || Qd;
  }
  // ====================  ====================
  // getInfoFromChatMetadata  saveToChatMetadata 
  //  WorldBookStateService
  /**
   * 
   */
  getFromChatMetadata(t) {
    const n = j6();
    if (n)
      return n.extensions || (n.extensions = {}), n.extensions[Np] || (n.extensions[Np] = {}), n.extensions[Np][t];
  }
  /**
   * 
   */
  saveToChatMetadata(t, n) {
    const r = j6();
    r && (r.extensions || (r.extensions = {}), r.extensions[Np] || (r.extensions[Np] = {}), r.extensions[Np][t] = n, this.log("debug", ` chat_metadata: ${t} = ${n}`), $X());
  }
  /**
   * 
   * V0.5:  memoryStore 
   * V0.8:  chatManager.getState() 
   */
  async getLastSummarizedFloor() {
    if (this._lastSummarizedFloor > 0) return this._lastSummarizedFloor;
    try {
      const { chatManager: t } = await Promise.resolve().then(() => _6), n = await t.getState();
      return this._lastSummarizedFloor = n.last_summarized_floor, this.log("debug", " DB  lastSummarizedFloor", { value: this._lastSummarizedFloor }), this._lastSummarizedFloor;
    } catch (t) {
      return this.log("warn", " lastSummarizedFloor  0", t), 0;
    }
  }
  /**
   * 
   * V0.5:  memoryStore (IndexedDB)
   */
  async setLastSummarizedFloor(t) {
    this._lastSummarizedFloor = t, await Zi.getState().setLastSummarizedFloor(t);
  }
  // ====================  ====================
  /**
   * 
   */
  getCurrentFloor() {
    const t = A6();
    return t != null && t.chat ? t.chat.length : 0;
  }
  /**
   *  ID
   */
  getCurrentChatId() {
    const t = A6();
    return (t == null ? void 0 : t.chatId) || null;
  }
  // ====================  ====================
  /**
   * 
   * V0.5:  EventWatcher 
   */
  start() {
    if (this.isRunning) {
      this.log("warn", "");
      return;
    }
    this.initializeForCurrentChat(), G2.start(), this.config.triggerMode === "auto" && (this.unsubscribeMessage = G2.on(
      "onMessageReceived",
      this.handleMessageReceived.bind(this)
    ), this.log("debug", " EventWatcher ")), this.unsubscribeChat = G2.on(
      "onChatChanged",
      this.handleChatChanged.bind(this)
    ), this.log("debug", " EventWatcher "), this.isRunning = !0;
    const t = this.getStatus();
    this.log("info", "", t);
  }
  /**
   *  ( 0)
   */
  async resetProgress() {
    await this.setLastSummarizedFloor(0), this.log("info", "");
  }
  /**
   * 
   */
  stop() {
    this.unsubscribeMessage && (this.unsubscribeMessage(), this.unsubscribeMessage = null), this.unsubscribeChat && (this.unsubscribeChat(), this.unsubscribeChat = null), this.isRunning = !1, this.log("info", "");
  }
  /**
   * 
   */
  async initializeForCurrentChat() {
    const t = this.getCurrentChatId(), n = this.getCurrentFloor();
    this.currentChatId = t, this.summaryHistory = [], this._lastSummarizedFloor = 0;
    const r = await this.getLastSummarizedFloor();
    this.log("info", "", {
      chatId: t,
      currentFloor: n,
      lastSummarizedFloor: r,
      pendingFloors: n - r
    });
  }
  // ====================  ====================
  /**
   * 
   * V0.9.1:  Summary 
   */
  async handleMessageReceived() {
    const t = this.getCurrentFloor(), n = await this.getLastSummarizedFloor(), r = t - n;
    this.log("debug", "", {
      currentFloor: t,
      lastSummarized: n,
      pendingFloors: r,
      triggerAt: this.config.floorInterval
    }), await this.checkEntityExtraction(t), r >= this.config.floorInterval && (this.log("info", "", {
      pendingFloors: r,
      interval: this.config.floorInterval
    }), await this.triggerSummary());
  }
  /**
   * V0.9.1: 
   *  Summary 
   */
  async checkEntityExtraction(t) {
    try {
      const { entityBuilder: n } = await Promise.resolve().then(() => Cne), { chatManager: r } = await Promise.resolve().then(() => _6);
      if (n.shouldTriggerOnFloor(t)) {
        this.log("info", "", { floor: t });
        const u = [((await r.getState()).last_extracted_floor || 0) + 1, t];
        this.log("debug", "", { range: u }), n.extractByRange(u, !1).catch((c) => {
          this.log("warn", "", { error: c });
        });
      }
    } catch (n) {
      this.log("warn", "", { error: n });
    }
  }
  /**
   * 
   */
  handleChatChanged() {
    const t = this.getCurrentChatId();
    this.log("info", "", {
      from: this.currentChatId,
      to: t
    }), this.initializeForCurrentChat();
  }
  // ====================  ====================
  /**
   * /
   */
  async triggerSummary(t = !1) {
    var f, p, g;
    if (this.isSummarizing)
      return this.log("warn", ""), null;
    if (!this.config.enabled && !t)
      return this.log("debug", ""), null;
    const n = this.getCurrentFloor(), r = await this.getLastSummarizedFloor();
    this.isSummarizing = !0, this.cancelRequested = !1, this.log("info", "", {
      floorRange: [r + 1, n],
      manual: t
    });
    let i;
    const a = new Promise((x, b) => {
      i = () => b(new Error("SummaryCancelled"));
    }), o = Zt.running("...", "Engram", () => {
      var x, b, _, E;
      this.cancelRequested = !0, this.log("info", "");
      try {
        (E = (_ = (b = (x = window.SillyTavern) == null ? void 0 : x.getContext) == null ? void 0 : b.call(x)) == null ? void 0 : _.stopGeneration) == null || E.call(_), this.log("info", " stopGeneration");
      } catch (k) {
        this.log("warn", " stopGeneration ", k);
      }
      Zt.warning("...", "Engram"), i();
    });
    let u = null, c = Date.now();
    try {
      const { WorldBookSlotService: x } = await Promise.resolve().then(() => lre);
      await x.init();
      const b = this._lastSummarizedFloor + 1, _ = this.config.bufferSize || 0, E = n - _;
      if (b > E)
        return t && Zt.info(" ()", "Engram"), null;
      const k = this.config.floorInterval || 10, T = b + k - 1, R = Math.min(E, T);
      if (b > R)
        return null;
      const N = [b, R];
      this.log("info", "", { startFloor: b, endFloor: R, currentFloor: n, buffer: _ });
      const P = yD().slice(b - 1, R);
      if (this.log("info", "", {
        range: N,
        msgCount: P.length,
        firstMsg: (((f = P[0]) == null ? void 0 : f.mes) || "").substring(0, 20)
      }), P.length === 0)
        return this.log("warn", "", { floorRange: N }), null;
      const z = {
        messages: P.map((de) => {
          const V = de.mes || de.content || de.message || "";
          return V || console.warn("[Engram] Message content is empty/undefined:", de), {
            role: de.is_user ? "user" : "assistant",
            content: V,
            name: de.name
          };
        }),
        floorRange: N,
        templateId: this.config.promptTemplateId || void 0
      }, q = Za.getChatHistory(z.floorRange);
      this.log("debug", "", {
        range: z.floorRange,
        length: q.length
      });
      let G = "";
      try {
        const de = await Yr.getActivatedWorldInfo(void 0, {
          floorRange: z.floorRange
        });
        de && (G = `
` + de + `

`, this.log("debug", "", { length: de.length }));
      } catch (de) {
        this.log("warn", "", { error: String(de) });
      }
      const Y = tt.getEnabledPromptTemplate("summary"), W = nb("summary"), F = (Y == null ? void 0 : Y.systemPrompt) || (W == null ? void 0 : W.systemPrompt) || "", X = (Y == null ? void 0 : Y.userPromptTemplate) || (W == null ? void 0 : W.userPromptTemplate) || "";
      let me = "";
      try {
        me = await Yr.getEngramSummariesContent(), me && this.log("debug", " Engram ", { length: me.length });
      } catch (de) {
        this.log("warn", " Engram ", { error: String(de) });
      }
      const J = X.replace("{{worldbookContext}}", G).replace("{{chatHistory}}", q).replace("{{context}}", G).replace("{{engramSummaries}}", me);
      this.log("debug", "", {
        source: Y ? "APIPresets" : "fallback",
        templateName: (Y == null ? void 0 : Y.name) || "default"
      }), u = Xs.logSend({
        type: "summarize",
        systemPrompt: F,
        userPrompt: J,
        floorRange: z.floorRange,
        model: Qx(),
        character: (p = tm()) == null ? void 0 : p.name
      }), c = Date.now();
      const le = await Promise.race([
        this.llmAdapter.generate({
          systemPrompt: F,
          userPrompt: J
        }),
        a
      ]);
      if (Xs.logReceive(u, {
        response: "content" in le ? le.content : void 0,
        status: le.success ? "success" : "error",
        error: le.error,
        duration: Date.now() - c
      }), !le.success)
        return this.log("error", "LLM ", { error: le.error }), Zt.error(`: ${le.error}`, "Engram "), null;
      if (this.cancelRequested)
        return this.log("info", ""), Zt.info("", "Engram"), null;
      const Q = this.textProcessor.clean(le.content), oe = Bl.process(Q, "output"), fe = await Yr.countTokens(oe), ce = {
        id: Date.now().toString(),
        content: oe,
        sourceFloors: z.floorRange,
        timestamp: Date.now(),
        tokenCount: fe,
        writtenToWorldbook: !1
      };
      if (this.config.previewEnabled) {
        this.log("info", "", { result: ce });
        try {
          const de = await wD.requestRevision(
            "",
            `: ${z.floorRange[0]} - ${z.floorRange[1]}  | Token: ${fe}`,
            ce.content
          );
          ce.content = de, ce.tokenCount = await Yr.countTokens(de), this.log("info", "");
        } catch {
          return this.log("warn", ""), Zt.info("", ""), null;
        }
      }
      const K = fi(), re = tm();
      if (K && re)
        try {
          const de = await Qz.run({
            jsonContent: ce.content,
            //  JSON
            sourceRange: {
              start: z.floorRange[0],
              end: z.floorRange[1]
            }
          });
          de.success ? this.log("info", "Pipeline ", {
            eventsCount: ((g = de.events) == null ? void 0 : g.length) || 0
          }) : this.log("warn", "Pipeline ", { error: de.error });
        } catch (de) {
          this.log("error", "Pipeline ", { error: String(de) });
        }
      if (ce.writtenToWorldbook = !0, await this.setLastSummarizedFloor(z.floorRange[1]), this.summaryHistory.push(ce), Zt.success(` ${z.floorRange[0]}-${z.floorRange[1]} `, "Engram", {
        action: { goto: "memory" }
        // V0.9.10: 
      }), this.config.autoHide) {
        const de = z.floorRange[0] - 1, V = z.floorRange[1] - 1;
        this.log("info", "", { startIndex: de, endIndex: V }), BX(de, V).catch((ae) => {
          this.log("error", "", ae);
        });
      }
      return ce;
    } catch (x) {
      const b = x instanceof Error ? x.message : String(x);
      return b === "SummaryCancelled" ? (this.log("info", " (Promise Race)"), u && Xs.logReceive(u, {
        status: "cancelled",
        error: "",
        duration: Date.now() - c
      }), Zt.info("", "Engram"), null) : (this.log("error", "", { error: b }), Zt.error(`: ${b}`, "Engram "), null);
    } finally {
      Zt.remove(o), this.isSummarizing = !1;
    }
  }
  // ====================  ====================
  /**
   * 
   */
  getStatus() {
    const t = this.getCurrentFloor(), n = this._lastSummarizedFloor;
    return {
      running: this.isRunning,
      currentFloor: t,
      lastSummarizedFloor: n,
      pendingFloors: Math.max(0, t - n),
      historyCount: this.summaryHistory.length,
      isSummarizing: this.isSummarizing
    };
  }
  /**
   * 
   */
  refreshStatus() {
    return this.initializeForCurrentChat(), this.getStatus();
  }
  /**
   * 
   */
  getConfig() {
    return { ...this.config };
  }
  /**
   * 
   */
  updateConfig(t) {
    this.config = { ...this.config, ...t }, tt.set("summarizerConfig", this.config), this.log("debug", "", this.config);
  }
  /**
   * 
   */
  getHistory() {
    return [...this.summaryHistory];
  }
  /**
   * 
   */
  async resetBaseFloor() {
    const t = this.getCurrentFloor();
    await this.setLastSummarizedFloor(t), this.log("info", "", { currentFloor: t });
  }
  // ====================  ====================
  /**
   * 
   */
  async log(t, n, r) {
    try {
      const { Logger: i } = await Promise.resolve().then(() => F5);
      i[t]("Summarizer", n, r);
    } catch {
      console.log(`[Summarizer] ${t}: ${n}`, r);
    }
  }
}
const Bo = new hk(), FX = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  SummarizerService: hk,
  summarizerService: Bo
}, Symbol.toStringTag, { value: "Module" }));
function Ze(e, t, n) {
  function r(u, c) {
    if (u._zod || Object.defineProperty(u, "_zod", {
      value: {
        def: c,
        constr: o,
        traits: /* @__PURE__ */ new Set()
      },
      enumerable: !1
    }), u._zod.traits.has(e))
      return;
    u._zod.traits.add(e), t(u, c);
    const f = o.prototype, p = Object.keys(f);
    for (let g = 0; g < p.length; g++) {
      const x = p[g];
      x in u || (u[x] = f[x].bind(u));
    }
  }
  const i = (n == null ? void 0 : n.Parent) ?? Object;
  class a extends i {
  }
  Object.defineProperty(a, "name", { value: e });
  function o(u) {
    var c;
    const f = n != null && n.Parent ? new a() : this;
    r(f, u), (c = f._zod).deferred ?? (c.deferred = []);
    for (const p of f._zod.deferred)
      p();
    return f;
  }
  return Object.defineProperty(o, "init", { value: r }), Object.defineProperty(o, Symbol.hasInstance, {
    value: (u) => {
      var c, f;
      return n != null && n.Parent && u instanceof n.Parent ? !0 : (f = (c = u == null ? void 0 : u._zod) == null ? void 0 : c.traits) == null ? void 0 : f.has(e);
    }
  }), Object.defineProperty(o, "name", { value: e }), o;
}
class Wp extends Error {
  constructor() {
    super("Encountered Promise during synchronous parse. Use .parseAsync() instead.");
  }
}
class tP extends Error {
  constructor(t) {
    super(`Encountered unidirectional transform during encode: ${t}`), this.name = "ZodEncodeError";
  }
}
const nP = {};
function af(e) {
  return nP;
}
function rP(e) {
  const t = Object.values(e).filter((r) => typeof r == "number");
  return Object.entries(e).filter(([r, i]) => t.indexOf(+r) === -1).map(([r, i]) => i);
}
function RE(e, t) {
  return typeof t == "bigint" ? t.toString() : t;
}
function pk(e) {
  return {
    get value() {
      {
        const t = e();
        return Object.defineProperty(this, "value", { value: t }), t;
      }
    }
  };
}
function mk(e) {
  return e == null;
}
function gk(e) {
  const t = e.startsWith("^") ? 1 : 0, n = e.endsWith("$") ? e.length - 1 : e.length;
  return e.slice(t, n);
}
const N6 = Symbol("evaluating");
function Pn(e, t, n) {
  let r;
  Object.defineProperty(e, t, {
    get() {
      if (r !== N6)
        return r === void 0 && (r = N6, r = n()), r;
    },
    set(i) {
      Object.defineProperty(e, t, {
        value: i
        // configurable: true,
      });
    },
    configurable: !0
  });
}
function oh(e, t, n) {
  Object.defineProperty(e, t, {
    value: n,
    writable: !0,
    enumerable: !0,
    configurable: !0
  });
}
function ff(...e) {
  const t = {};
  for (const n of e) {
    const r = Object.getOwnPropertyDescriptors(n);
    Object.assign(t, r);
  }
  return Object.defineProperties({}, t);
}
function R6(e) {
  return JSON.stringify(e);
}
function UX(e) {
  return e.toLowerCase().trim().replace(/[^\w\s-]/g, "").replace(/[\s_-]+/g, "-").replace(/^-+|-+$/g, "");
}
const iP = "captureStackTrace" in Error ? Error.captureStackTrace : (...e) => {
};
function Sx(e) {
  return typeof e == "object" && e !== null && !Array.isArray(e);
}
const VX = pk(() => {
  var e;
  if (typeof navigator < "u" && ((e = navigator == null ? void 0 : navigator.userAgent) != null && e.includes("Cloudflare")))
    return !1;
  try {
    const t = Function;
    return new t(""), !0;
  } catch {
    return !1;
  }
});
function sm(e) {
  if (Sx(e) === !1)
    return !1;
  const t = e.constructor;
  if (t === void 0 || typeof t != "function")
    return !0;
  const n = t.prototype;
  return !(Sx(n) === !1 || Object.prototype.hasOwnProperty.call(n, "isPrototypeOf") === !1);
}
function sP(e) {
  return sm(e) ? { ...e } : Array.isArray(e) ? [...e] : e;
}
const HX = /* @__PURE__ */ new Set(["string", "number", "symbol"]);
function ub(e) {
  return e.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function df(e, t, n) {
  const r = new e._zod.constr(t ?? e._zod.def);
  return (!t || n != null && n.parent) && (r._zod.parent = e), r;
}
function qt(e) {
  const t = e;
  if (!t)
    return {};
  if (typeof t == "string")
    return { error: () => t };
  if ((t == null ? void 0 : t.message) !== void 0) {
    if ((t == null ? void 0 : t.error) !== void 0)
      throw new Error("Cannot specify both `message` and `error` params");
    t.error = t.message;
  }
  return delete t.message, typeof t.error == "string" ? { ...t, error: () => t.error } : t;
}
function GX(e) {
  return Object.keys(e).filter((t) => e[t]._zod.optin === "optional" && e[t]._zod.optout === "optional");
}
function KX(e, t) {
  const n = e._zod.def, r = n.checks;
  if (r && r.length > 0)
    throw new Error(".pick() cannot be used on object schemas containing refinements");
  const a = ff(e._zod.def, {
    get shape() {
      const o = {};
      for (const u in t) {
        if (!(u in n.shape))
          throw new Error(`Unrecognized key: "${u}"`);
        t[u] && (o[u] = n.shape[u]);
      }
      return oh(this, "shape", o), o;
    },
    checks: []
  });
  return df(e, a);
}
function YX(e, t) {
  const n = e._zod.def, r = n.checks;
  if (r && r.length > 0)
    throw new Error(".omit() cannot be used on object schemas containing refinements");
  const a = ff(e._zod.def, {
    get shape() {
      const o = { ...e._zod.def.shape };
      for (const u in t) {
        if (!(u in n.shape))
          throw new Error(`Unrecognized key: "${u}"`);
        t[u] && delete o[u];
      }
      return oh(this, "shape", o), o;
    },
    checks: []
  });
  return df(e, a);
}
function WX(e, t) {
  if (!sm(t))
    throw new Error("Invalid input to extend: expected a plain object");
  const n = e._zod.def.checks;
  if (n && n.length > 0) {
    const a = e._zod.def.shape;
    for (const o in t)
      if (Object.getOwnPropertyDescriptor(a, o) !== void 0)
        throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.");
  }
  const i = ff(e._zod.def, {
    get shape() {
      const a = { ...e._zod.def.shape, ...t };
      return oh(this, "shape", a), a;
    }
  });
  return df(e, i);
}
function ZX(e, t) {
  if (!sm(t))
    throw new Error("Invalid input to safeExtend: expected a plain object");
  const n = ff(e._zod.def, {
    get shape() {
      const r = { ...e._zod.def.shape, ...t };
      return oh(this, "shape", r), r;
    }
  });
  return df(e, n);
}
function XX(e, t) {
  const n = ff(e._zod.def, {
    get shape() {
      const r = { ...e._zod.def.shape, ...t._zod.def.shape };
      return oh(this, "shape", r), r;
    },
    get catchall() {
      return t._zod.def.catchall;
    },
    checks: []
    // delete existing checks
  });
  return df(e, n);
}
function QX(e, t, n) {
  const i = t._zod.def.checks;
  if (i && i.length > 0)
    throw new Error(".partial() cannot be used on object schemas containing refinements");
  const o = ff(t._zod.def, {
    get shape() {
      const u = t._zod.def.shape, c = { ...u };
      if (n)
        for (const f in n) {
          if (!(f in u))
            throw new Error(`Unrecognized key: "${f}"`);
          n[f] && (c[f] = e ? new e({
            type: "optional",
            innerType: u[f]
          }) : u[f]);
        }
      else
        for (const f in u)
          c[f] = e ? new e({
            type: "optional",
            innerType: u[f]
          }) : u[f];
      return oh(this, "shape", c), c;
    },
    checks: []
  });
  return df(t, o);
}
function JX(e, t, n) {
  const r = ff(t._zod.def, {
    get shape() {
      const i = t._zod.def.shape, a = { ...i };
      if (n)
        for (const o in n) {
          if (!(o in a))
            throw new Error(`Unrecognized key: "${o}"`);
          n[o] && (a[o] = new e({
            type: "nonoptional",
            innerType: i[o]
          }));
        }
      else
        for (const o in i)
          a[o] = new e({
            type: "nonoptional",
            innerType: i[o]
          });
      return oh(this, "shape", a), a;
    }
  });
  return df(t, r);
}
function Lp(e, t = 0) {
  var n;
  if (e.aborted === !0)
    return !0;
  for (let r = t; r < e.issues.length; r++)
    if (((n = e.issues[r]) == null ? void 0 : n.continue) !== !0)
      return !0;
  return !1;
}
function Bp(e, t) {
  return t.map((n) => {
    var r;
    return (r = n).path ?? (r.path = []), n.path.unshift(e), n;
  });
}
function A1(e) {
  return typeof e == "string" ? e : e == null ? void 0 : e.message;
}
function of(e, t, n) {
  var i, a, o, u, c, f;
  const r = { ...e, path: e.path ?? [] };
  if (!e.message) {
    const p = A1((o = (a = (i = e.inst) == null ? void 0 : i._zod.def) == null ? void 0 : a.error) == null ? void 0 : o.call(a, e)) ?? A1((u = t == null ? void 0 : t.error) == null ? void 0 : u.call(t, e)) ?? A1((c = n.customError) == null ? void 0 : c.call(n, e)) ?? A1((f = n.localeError) == null ? void 0 : f.call(n, e)) ?? "Invalid input";
    r.message = p;
  }
  return delete r.inst, delete r.continue, t != null && t.reportInput || delete r.input, r;
}
function yk(e) {
  return Array.isArray(e) ? "array" : typeof e == "string" ? "string" : "unknown";
}
function K0(...e) {
  const [t, n, r] = e;
  return typeof t == "string" ? {
    message: t,
    code: "custom",
    input: n,
    inst: r
  } : { ...t };
}
const aP = (e, t) => {
  e.name = "$ZodError", Object.defineProperty(e, "_zod", {
    value: e._zod,
    enumerable: !1
  }), Object.defineProperty(e, "issues", {
    value: t,
    enumerable: !1
  }), e.message = JSON.stringify(t, RE, 2), Object.defineProperty(e, "toString", {
    value: () => e.message,
    enumerable: !1
  });
}, oP = Ze("$ZodError", aP), lP = Ze("$ZodError", aP, { Parent: Error });
function eQ(e, t = (n) => n.message) {
  const n = {}, r = [];
  for (const i of e.issues)
    i.path.length > 0 ? (n[i.path[0]] = n[i.path[0]] || [], n[i.path[0]].push(t(i))) : r.push(t(i));
  return { formErrors: r, fieldErrors: n };
}
function tQ(e, t = (n) => n.message) {
  const n = { _errors: [] }, r = (i) => {
    for (const a of i.issues)
      if (a.code === "invalid_union" && a.errors.length)
        a.errors.map((o) => r({ issues: o }));
      else if (a.code === "invalid_key")
        r({ issues: a.issues });
      else if (a.code === "invalid_element")
        r({ issues: a.issues });
      else if (a.path.length === 0)
        n._errors.push(t(a));
      else {
        let o = n, u = 0;
        for (; u < a.path.length; ) {
          const c = a.path[u];
          u === a.path.length - 1 ? (o[c] = o[c] || { _errors: [] }, o[c]._errors.push(t(a))) : o[c] = o[c] || { _errors: [] }, o = o[c], u++;
        }
      }
  };
  return r(e), n;
}
const vk = (e) => (t, n, r, i) => {
  const a = r ? Object.assign(r, { async: !1 }) : { async: !1 }, o = t._zod.run({ value: n, issues: [] }, a);
  if (o instanceof Promise)
    throw new Wp();
  if (o.issues.length) {
    const u = new ((i == null ? void 0 : i.Err) ?? e)(o.issues.map((c) => of(c, a, af())));
    throw iP(u, i == null ? void 0 : i.callee), u;
  }
  return o.value;
}, xk = (e) => async (t, n, r, i) => {
  const a = r ? Object.assign(r, { async: !0 }) : { async: !0 };
  let o = t._zod.run({ value: n, issues: [] }, a);
  if (o instanceof Promise && (o = await o), o.issues.length) {
    const u = new ((i == null ? void 0 : i.Err) ?? e)(o.issues.map((c) => of(c, a, af())));
    throw iP(u, i == null ? void 0 : i.callee), u;
  }
  return o.value;
}, cb = (e) => (t, n, r) => {
  const i = r ? { ...r, async: !1 } : { async: !1 }, a = t._zod.run({ value: n, issues: [] }, i);
  if (a instanceof Promise)
    throw new Wp();
  return a.issues.length ? {
    success: !1,
    error: new (e ?? oP)(a.issues.map((o) => of(o, i, af())))
  } : { success: !0, data: a.value };
}, nQ = /* @__PURE__ */ cb(lP), fb = (e) => async (t, n, r) => {
  const i = r ? Object.assign(r, { async: !0 }) : { async: !0 };
  let a = t._zod.run({ value: n, issues: [] }, i);
  return a instanceof Promise && (a = await a), a.issues.length ? {
    success: !1,
    error: new e(a.issues.map((o) => of(o, i, af())))
  } : { success: !0, data: a.value };
}, rQ = /* @__PURE__ */ fb(lP), iQ = (e) => (t, n, r) => {
  const i = r ? Object.assign(r, { direction: "backward" }) : { direction: "backward" };
  return vk(e)(t, n, i);
}, sQ = (e) => (t, n, r) => vk(e)(t, n, r), aQ = (e) => async (t, n, r) => {
  const i = r ? Object.assign(r, { direction: "backward" }) : { direction: "backward" };
  return xk(e)(t, n, i);
}, oQ = (e) => async (t, n, r) => xk(e)(t, n, r), lQ = (e) => (t, n, r) => {
  const i = r ? Object.assign(r, { direction: "backward" }) : { direction: "backward" };
  return cb(e)(t, n, i);
}, uQ = (e) => (t, n, r) => cb(e)(t, n, r), cQ = (e) => async (t, n, r) => {
  const i = r ? Object.assign(r, { direction: "backward" }) : { direction: "backward" };
  return fb(e)(t, n, i);
}, fQ = (e) => async (t, n, r) => fb(e)(t, n, r), dQ = /^[cC][^\s-]{8,}$/, hQ = /^[0-9a-z]+$/, pQ = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/, mQ = /^[0-9a-vA-V]{20}$/, gQ = /^[A-Za-z0-9]{27}$/, yQ = /^[a-zA-Z0-9_-]{21}$/, vQ = /^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/, xQ = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/, M6 = (e) => e ? new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`) : /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/, bQ = /^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/, wQ = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
function _Q() {
  return new RegExp(wQ, "u");
}
const SQ = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, CQ = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/, EQ = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/, kQ = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, TQ = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/, uP = /^[A-Za-z0-9_-]*$/, AQ = /^\+[1-9]\d{6,14}$/, cP = "(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))", jQ = /* @__PURE__ */ new RegExp(`^${cP}$`);
function fP(e) {
  const t = "(?:[01]\\d|2[0-3]):[0-5]\\d";
  return typeof e.precision == "number" ? e.precision === -1 ? `${t}` : e.precision === 0 ? `${t}:[0-5]\\d` : `${t}:[0-5]\\d\\.\\d{${e.precision}}` : `${t}(?::[0-5]\\d(?:\\.\\d+)?)?`;
}
function NQ(e) {
  return new RegExp(`^${fP(e)}$`);
}
function RQ(e) {
  const t = fP({ precision: e.precision }), n = ["Z"];
  e.local && n.push(""), e.offset && n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");
  const r = `${t}(?:${n.join("|")})`;
  return new RegExp(`^${cP}T(?:${r})$`);
}
const MQ = (e) => {
  const t = e ? `[\\s\\S]{${(e == null ? void 0 : e.minimum) ?? 0},${(e == null ? void 0 : e.maximum) ?? ""}}` : "[\\s\\S]*";
  return new RegExp(`^${t}$`);
}, OQ = /^-?\d+(?:\.\d+)?$/, DQ = /^[^A-Z]*$/, zQ = /^[^a-z]*$/, Yl = /* @__PURE__ */ Ze("$ZodCheck", (e, t) => {
  var n;
  e._zod ?? (e._zod = {}), e._zod.def = t, (n = e._zod).onattach ?? (n.onattach = []);
}), PQ = /* @__PURE__ */ Ze("$ZodCheckMaxLength", (e, t) => {
  var n;
  Yl.init(e, t), (n = e._zod.def).when ?? (n.when = (r) => {
    const i = r.value;
    return !mk(i) && i.length !== void 0;
  }), e._zod.onattach.push((r) => {
    const i = r._zod.bag.maximum ?? Number.POSITIVE_INFINITY;
    t.maximum < i && (r._zod.bag.maximum = t.maximum);
  }), e._zod.check = (r) => {
    const i = r.value;
    if (i.length <= t.maximum)
      return;
    const o = yk(i);
    r.issues.push({
      origin: o,
      code: "too_big",
      maximum: t.maximum,
      inclusive: !0,
      input: i,
      inst: e,
      continue: !t.abort
    });
  };
}), IQ = /* @__PURE__ */ Ze("$ZodCheckMinLength", (e, t) => {
  var n;
  Yl.init(e, t), (n = e._zod.def).when ?? (n.when = (r) => {
    const i = r.value;
    return !mk(i) && i.length !== void 0;
  }), e._zod.onattach.push((r) => {
    const i = r._zod.bag.minimum ?? Number.NEGATIVE_INFINITY;
    t.minimum > i && (r._zod.bag.minimum = t.minimum);
  }), e._zod.check = (r) => {
    const i = r.value;
    if (i.length >= t.minimum)
      return;
    const o = yk(i);
    r.issues.push({
      origin: o,
      code: "too_small",
      minimum: t.minimum,
      inclusive: !0,
      input: i,
      inst: e,
      continue: !t.abort
    });
  };
}), LQ = /* @__PURE__ */ Ze("$ZodCheckLengthEquals", (e, t) => {
  var n;
  Yl.init(e, t), (n = e._zod.def).when ?? (n.when = (r) => {
    const i = r.value;
    return !mk(i) && i.length !== void 0;
  }), e._zod.onattach.push((r) => {
    const i = r._zod.bag;
    i.minimum = t.length, i.maximum = t.length, i.length = t.length;
  }), e._zod.check = (r) => {
    const i = r.value, a = i.length;
    if (a === t.length)
      return;
    const o = yk(i), u = a > t.length;
    r.issues.push({
      origin: o,
      ...u ? { code: "too_big", maximum: t.length } : { code: "too_small", minimum: t.length },
      inclusive: !0,
      exact: !0,
      input: r.value,
      inst: e,
      continue: !t.abort
    });
  };
}), db = /* @__PURE__ */ Ze("$ZodCheckStringFormat", (e, t) => {
  var n, r;
  Yl.init(e, t), e._zod.onattach.push((i) => {
    const a = i._zod.bag;
    a.format = t.format, t.pattern && (a.patterns ?? (a.patterns = /* @__PURE__ */ new Set()), a.patterns.add(t.pattern));
  }), t.pattern ? (n = e._zod).check ?? (n.check = (i) => {
    t.pattern.lastIndex = 0, !t.pattern.test(i.value) && i.issues.push({
      origin: "string",
      code: "invalid_format",
      format: t.format,
      input: i.value,
      ...t.pattern ? { pattern: t.pattern.toString() } : {},
      inst: e,
      continue: !t.abort
    });
  }) : (r = e._zod).check ?? (r.check = () => {
  });
}), BQ = /* @__PURE__ */ Ze("$ZodCheckRegex", (e, t) => {
  db.init(e, t), e._zod.check = (n) => {
    t.pattern.lastIndex = 0, !t.pattern.test(n.value) && n.issues.push({
      origin: "string",
      code: "invalid_format",
      format: "regex",
      input: n.value,
      pattern: t.pattern.toString(),
      inst: e,
      continue: !t.abort
    });
  };
}), qQ = /* @__PURE__ */ Ze("$ZodCheckLowerCase", (e, t) => {
  t.pattern ?? (t.pattern = DQ), db.init(e, t);
}), $Q = /* @__PURE__ */ Ze("$ZodCheckUpperCase", (e, t) => {
  t.pattern ?? (t.pattern = zQ), db.init(e, t);
}), FQ = /* @__PURE__ */ Ze("$ZodCheckIncludes", (e, t) => {
  Yl.init(e, t);
  const n = ub(t.includes), r = new RegExp(typeof t.position == "number" ? `^.{${t.position}}${n}` : n);
  t.pattern = r, e._zod.onattach.push((i) => {
    const a = i._zod.bag;
    a.patterns ?? (a.patterns = /* @__PURE__ */ new Set()), a.patterns.add(r);
  }), e._zod.check = (i) => {
    i.value.includes(t.includes, t.position) || i.issues.push({
      origin: "string",
      code: "invalid_format",
      format: "includes",
      includes: t.includes,
      input: i.value,
      inst: e,
      continue: !t.abort
    });
  };
}), UQ = /* @__PURE__ */ Ze("$ZodCheckStartsWith", (e, t) => {
  Yl.init(e, t);
  const n = new RegExp(`^${ub(t.prefix)}.*`);
  t.pattern ?? (t.pattern = n), e._zod.onattach.push((r) => {
    const i = r._zod.bag;
    i.patterns ?? (i.patterns = /* @__PURE__ */ new Set()), i.patterns.add(n);
  }), e._zod.check = (r) => {
    r.value.startsWith(t.prefix) || r.issues.push({
      origin: "string",
      code: "invalid_format",
      format: "starts_with",
      prefix: t.prefix,
      input: r.value,
      inst: e,
      continue: !t.abort
    });
  };
}), VQ = /* @__PURE__ */ Ze("$ZodCheckEndsWith", (e, t) => {
  Yl.init(e, t);
  const n = new RegExp(`.*${ub(t.suffix)}$`);
  t.pattern ?? (t.pattern = n), e._zod.onattach.push((r) => {
    const i = r._zod.bag;
    i.patterns ?? (i.patterns = /* @__PURE__ */ new Set()), i.patterns.add(n);
  }), e._zod.check = (r) => {
    r.value.endsWith(t.suffix) || r.issues.push({
      origin: "string",
      code: "invalid_format",
      format: "ends_with",
      suffix: t.suffix,
      input: r.value,
      inst: e,
      continue: !t.abort
    });
  };
}), HQ = /* @__PURE__ */ Ze("$ZodCheckOverwrite", (e, t) => {
  Yl.init(e, t), e._zod.check = (n) => {
    n.value = t.tx(n.value);
  };
});
class GQ {
  constructor(t = []) {
    this.content = [], this.indent = 0, this && (this.args = t);
  }
  indented(t) {
    this.indent += 1, t(this), this.indent -= 1;
  }
  write(t) {
    if (typeof t == "function") {
      t(this, { execution: "sync" }), t(this, { execution: "async" });
      return;
    }
    const r = t.split(`
`).filter((o) => o), i = Math.min(...r.map((o) => o.length - o.trimStart().length)), a = r.map((o) => o.slice(i)).map((o) => " ".repeat(this.indent * 2) + o);
    for (const o of a)
      this.content.push(o);
  }
  compile() {
    const t = Function, n = this == null ? void 0 : this.args, i = [...((this == null ? void 0 : this.content) ?? [""]).map((a) => `  ${a}`)];
    return new t(...n, i.join(`
`));
  }
}
const KQ = {
  major: 4,
  minor: 3,
  patch: 5
}, Ir = /* @__PURE__ */ Ze("$ZodType", (e, t) => {
  var i;
  var n;
  e ?? (e = {}), e._zod.def = t, e._zod.bag = e._zod.bag || {}, e._zod.version = KQ;
  const r = [...e._zod.def.checks ?? []];
  e._zod.traits.has("$ZodCheck") && r.unshift(e);
  for (const a of r)
    for (const o of a._zod.onattach)
      o(e);
  if (r.length === 0)
    (n = e._zod).deferred ?? (n.deferred = []), (i = e._zod.deferred) == null || i.push(() => {
      e._zod.run = e._zod.parse;
    });
  else {
    const a = (u, c, f) => {
      let p = Lp(u), g;
      for (const x of c) {
        if (x._zod.def.when) {
          if (!x._zod.def.when(u))
            continue;
        } else if (p)
          continue;
        const b = u.issues.length, _ = x._zod.check(u);
        if (_ instanceof Promise && (f == null ? void 0 : f.async) === !1)
          throw new Wp();
        if (g || _ instanceof Promise)
          g = (g ?? Promise.resolve()).then(async () => {
            await _, u.issues.length !== b && (p || (p = Lp(u, b)));
          });
        else {
          if (u.issues.length === b)
            continue;
          p || (p = Lp(u, b));
        }
      }
      return g ? g.then(() => u) : u;
    }, o = (u, c, f) => {
      if (Lp(u))
        return u.aborted = !0, u;
      const p = a(c, r, f);
      if (p instanceof Promise) {
        if (f.async === !1)
          throw new Wp();
        return p.then((g) => e._zod.parse(g, f));
      }
      return e._zod.parse(p, f);
    };
    e._zod.run = (u, c) => {
      if (c.skipChecks)
        return e._zod.parse(u, c);
      if (c.direction === "backward") {
        const p = e._zod.parse({ value: u.value, issues: [] }, { ...c, skipChecks: !0 });
        return p instanceof Promise ? p.then((g) => o(g, u, c)) : o(p, u, c);
      }
      const f = e._zod.parse(u, c);
      if (f instanceof Promise) {
        if (c.async === !1)
          throw new Wp();
        return f.then((p) => a(p, r, c));
      }
      return a(f, r, c);
    };
  }
  Pn(e, "~standard", () => ({
    validate: (a) => {
      var o;
      try {
        const u = nQ(e, a);
        return u.success ? { value: u.data } : { issues: (o = u.error) == null ? void 0 : o.issues };
      } catch {
        return rQ(e, a).then((c) => {
          var f;
          return c.success ? { value: c.data } : { issues: (f = c.error) == null ? void 0 : f.issues };
        });
      }
    },
    vendor: "zod",
    version: 1
  }));
}), bk = /* @__PURE__ */ Ze("$ZodString", (e, t) => {
  var n;
  Ir.init(e, t), e._zod.pattern = [...((n = e == null ? void 0 : e._zod.bag) == null ? void 0 : n.patterns) ?? []].pop() ?? MQ(e._zod.bag), e._zod.parse = (r, i) => {
    if (t.coerce)
      try {
        r.value = String(r.value);
      } catch {
      }
    return typeof r.value == "string" || r.issues.push({
      expected: "string",
      code: "invalid_type",
      input: r.value,
      inst: e
    }), r;
  };
}), dr = /* @__PURE__ */ Ze("$ZodStringFormat", (e, t) => {
  db.init(e, t), bk.init(e, t);
}), YQ = /* @__PURE__ */ Ze("$ZodGUID", (e, t) => {
  t.pattern ?? (t.pattern = xQ), dr.init(e, t);
}), WQ = /* @__PURE__ */ Ze("$ZodUUID", (e, t) => {
  if (t.version) {
    const r = {
      v1: 1,
      v2: 2,
      v3: 3,
      v4: 4,
      v5: 5,
      v6: 6,
      v7: 7,
      v8: 8
    }[t.version];
    if (r === void 0)
      throw new Error(`Invalid UUID version: "${t.version}"`);
    t.pattern ?? (t.pattern = M6(r));
  } else
    t.pattern ?? (t.pattern = M6());
  dr.init(e, t);
}), ZQ = /* @__PURE__ */ Ze("$ZodEmail", (e, t) => {
  t.pattern ?? (t.pattern = bQ), dr.init(e, t);
}), XQ = /* @__PURE__ */ Ze("$ZodURL", (e, t) => {
  dr.init(e, t), e._zod.check = (n) => {
    try {
      const r = n.value.trim(), i = new URL(r);
      t.hostname && (t.hostname.lastIndex = 0, t.hostname.test(i.hostname) || n.issues.push({
        code: "invalid_format",
        format: "url",
        note: "Invalid hostname",
        pattern: t.hostname.source,
        input: n.value,
        inst: e,
        continue: !t.abort
      })), t.protocol && (t.protocol.lastIndex = 0, t.protocol.test(i.protocol.endsWith(":") ? i.protocol.slice(0, -1) : i.protocol) || n.issues.push({
        code: "invalid_format",
        format: "url",
        note: "Invalid protocol",
        pattern: t.protocol.source,
        input: n.value,
        inst: e,
        continue: !t.abort
      })), t.normalize ? n.value = i.href : n.value = r;
      return;
    } catch {
      n.issues.push({
        code: "invalid_format",
        format: "url",
        input: n.value,
        inst: e,
        continue: !t.abort
      });
    }
  };
}), QQ = /* @__PURE__ */ Ze("$ZodEmoji", (e, t) => {
  t.pattern ?? (t.pattern = _Q()), dr.init(e, t);
}), JQ = /* @__PURE__ */ Ze("$ZodNanoID", (e, t) => {
  t.pattern ?? (t.pattern = yQ), dr.init(e, t);
}), eJ = /* @__PURE__ */ Ze("$ZodCUID", (e, t) => {
  t.pattern ?? (t.pattern = dQ), dr.init(e, t);
}), tJ = /* @__PURE__ */ Ze("$ZodCUID2", (e, t) => {
  t.pattern ?? (t.pattern = hQ), dr.init(e, t);
}), nJ = /* @__PURE__ */ Ze("$ZodULID", (e, t) => {
  t.pattern ?? (t.pattern = pQ), dr.init(e, t);
}), rJ = /* @__PURE__ */ Ze("$ZodXID", (e, t) => {
  t.pattern ?? (t.pattern = mQ), dr.init(e, t);
}), iJ = /* @__PURE__ */ Ze("$ZodKSUID", (e, t) => {
  t.pattern ?? (t.pattern = gQ), dr.init(e, t);
}), sJ = /* @__PURE__ */ Ze("$ZodISODateTime", (e, t) => {
  t.pattern ?? (t.pattern = RQ(t)), dr.init(e, t);
}), aJ = /* @__PURE__ */ Ze("$ZodISODate", (e, t) => {
  t.pattern ?? (t.pattern = jQ), dr.init(e, t);
}), oJ = /* @__PURE__ */ Ze("$ZodISOTime", (e, t) => {
  t.pattern ?? (t.pattern = NQ(t)), dr.init(e, t);
}), lJ = /* @__PURE__ */ Ze("$ZodISODuration", (e, t) => {
  t.pattern ?? (t.pattern = vQ), dr.init(e, t);
}), uJ = /* @__PURE__ */ Ze("$ZodIPv4", (e, t) => {
  t.pattern ?? (t.pattern = SQ), dr.init(e, t), e._zod.bag.format = "ipv4";
}), cJ = /* @__PURE__ */ Ze("$ZodIPv6", (e, t) => {
  t.pattern ?? (t.pattern = CQ), dr.init(e, t), e._zod.bag.format = "ipv6", e._zod.check = (n) => {
    try {
      new URL(`http://[${n.value}]`);
    } catch {
      n.issues.push({
        code: "invalid_format",
        format: "ipv6",
        input: n.value,
        inst: e,
        continue: !t.abort
      });
    }
  };
}), fJ = /* @__PURE__ */ Ze("$ZodCIDRv4", (e, t) => {
  t.pattern ?? (t.pattern = EQ), dr.init(e, t);
}), dJ = /* @__PURE__ */ Ze("$ZodCIDRv6", (e, t) => {
  t.pattern ?? (t.pattern = kQ), dr.init(e, t), e._zod.check = (n) => {
    const r = n.value.split("/");
    try {
      if (r.length !== 2)
        throw new Error();
      const [i, a] = r;
      if (!a)
        throw new Error();
      const o = Number(a);
      if (`${o}` !== a)
        throw new Error();
      if (o < 0 || o > 128)
        throw new Error();
      new URL(`http://[${i}]`);
    } catch {
      n.issues.push({
        code: "invalid_format",
        format: "cidrv6",
        input: n.value,
        inst: e,
        continue: !t.abort
      });
    }
  };
});
function dP(e) {
  if (e === "")
    return !0;
  if (e.length % 4 !== 0)
    return !1;
  try {
    return atob(e), !0;
  } catch {
    return !1;
  }
}
const hJ = /* @__PURE__ */ Ze("$ZodBase64", (e, t) => {
  t.pattern ?? (t.pattern = TQ), dr.init(e, t), e._zod.bag.contentEncoding = "base64", e._zod.check = (n) => {
    dP(n.value) || n.issues.push({
      code: "invalid_format",
      format: "base64",
      input: n.value,
      inst: e,
      continue: !t.abort
    });
  };
});
function pJ(e) {
  if (!uP.test(e))
    return !1;
  const t = e.replace(/[-_]/g, (r) => r === "-" ? "+" : "/"), n = t.padEnd(Math.ceil(t.length / 4) * 4, "=");
  return dP(n);
}
const mJ = /* @__PURE__ */ Ze("$ZodBase64URL", (e, t) => {
  t.pattern ?? (t.pattern = uP), dr.init(e, t), e._zod.bag.contentEncoding = "base64url", e._zod.check = (n) => {
    pJ(n.value) || n.issues.push({
      code: "invalid_format",
      format: "base64url",
      input: n.value,
      inst: e,
      continue: !t.abort
    });
  };
}), gJ = /* @__PURE__ */ Ze("$ZodE164", (e, t) => {
  t.pattern ?? (t.pattern = AQ), dr.init(e, t);
});
function yJ(e, t = null) {
  try {
    const n = e.split(".");
    if (n.length !== 3)
      return !1;
    const [r] = n;
    if (!r)
      return !1;
    const i = JSON.parse(atob(r));
    return !("typ" in i && (i == null ? void 0 : i.typ) !== "JWT" || !i.alg || t && (!("alg" in i) || i.alg !== t));
  } catch {
    return !1;
  }
}
const vJ = /* @__PURE__ */ Ze("$ZodJWT", (e, t) => {
  dr.init(e, t), e._zod.check = (n) => {
    yJ(n.value, t.alg) || n.issues.push({
      code: "invalid_format",
      format: "jwt",
      input: n.value,
      inst: e,
      continue: !t.abort
    });
  };
}), xJ = /* @__PURE__ */ Ze("$ZodAny", (e, t) => {
  Ir.init(e, t), e._zod.parse = (n) => n;
}), bJ = /* @__PURE__ */ Ze("$ZodUnknown", (e, t) => {
  Ir.init(e, t), e._zod.parse = (n) => n;
}), wJ = /* @__PURE__ */ Ze("$ZodNever", (e, t) => {
  Ir.init(e, t), e._zod.parse = (n, r) => (n.issues.push({
    expected: "never",
    code: "invalid_type",
    input: n.value,
    inst: e
  }), n);
});
function O6(e, t, n) {
  e.issues.length && t.issues.push(...Bp(n, e.issues)), t.value[n] = e.value;
}
const _J = /* @__PURE__ */ Ze("$ZodArray", (e, t) => {
  Ir.init(e, t), e._zod.parse = (n, r) => {
    const i = n.value;
    if (!Array.isArray(i))
      return n.issues.push({
        expected: "array",
        code: "invalid_type",
        input: i,
        inst: e
      }), n;
    n.value = Array(i.length);
    const a = [];
    for (let o = 0; o < i.length; o++) {
      const u = i[o], c = t.element._zod.run({
        value: u,
        issues: []
      }, r);
      c instanceof Promise ? a.push(c.then((f) => O6(f, n, o))) : O6(c, n, o);
    }
    return a.length ? Promise.all(a).then(() => n) : n;
  };
});
function Cx(e, t, n, r, i) {
  if (e.issues.length) {
    if (i && !(n in r))
      return;
    t.issues.push(...Bp(n, e.issues));
  }
  e.value === void 0 ? n in r && (t.value[n] = void 0) : t.value[n] = e.value;
}
function hP(e) {
  var r, i, a, o;
  const t = Object.keys(e.shape);
  for (const u of t)
    if (!((o = (a = (i = (r = e.shape) == null ? void 0 : r[u]) == null ? void 0 : i._zod) == null ? void 0 : a.traits) != null && o.has("$ZodType")))
      throw new Error(`Invalid element at key "${u}": expected a Zod schema`);
  const n = GX(e.shape);
  return {
    ...e,
    keys: t,
    keySet: new Set(t),
    numKeys: t.length,
    optionalKeys: new Set(n)
  };
}
function pP(e, t, n, r, i, a) {
  const o = [], u = i.keySet, c = i.catchall._zod, f = c.def.type, p = c.optout === "optional";
  for (const g in t) {
    if (u.has(g))
      continue;
    if (f === "never") {
      o.push(g);
      continue;
    }
    const x = c.run({ value: t[g], issues: [] }, r);
    x instanceof Promise ? e.push(x.then((b) => Cx(b, n, g, t, p))) : Cx(x, n, g, t, p);
  }
  return o.length && n.issues.push({
    code: "unrecognized_keys",
    keys: o,
    input: t,
    inst: a
  }), e.length ? Promise.all(e).then(() => n) : n;
}
const SJ = /* @__PURE__ */ Ze("$ZodObject", (e, t) => {
  Ir.init(e, t);
  const n = Object.getOwnPropertyDescriptor(t, "shape");
  if (!(n != null && n.get)) {
    const u = t.shape;
    Object.defineProperty(t, "shape", {
      get: () => {
        const c = { ...u };
        return Object.defineProperty(t, "shape", {
          value: c
        }), c;
      }
    });
  }
  const r = pk(() => hP(t));
  Pn(e._zod, "propValues", () => {
    const u = t.shape, c = {};
    for (const f in u) {
      const p = u[f]._zod;
      if (p.values) {
        c[f] ?? (c[f] = /* @__PURE__ */ new Set());
        for (const g of p.values)
          c[f].add(g);
      }
    }
    return c;
  });
  const i = Sx, a = t.catchall;
  let o;
  e._zod.parse = (u, c) => {
    o ?? (o = r.value);
    const f = u.value;
    if (!i(f))
      return u.issues.push({
        expected: "object",
        code: "invalid_type",
        input: f,
        inst: e
      }), u;
    u.value = {};
    const p = [], g = o.shape;
    for (const x of o.keys) {
      const b = g[x], _ = b._zod.optout === "optional", E = b._zod.run({ value: f[x], issues: [] }, c);
      E instanceof Promise ? p.push(E.then((k) => Cx(k, u, x, f, _))) : Cx(E, u, x, f, _);
    }
    return a ? pP(p, f, u, c, r.value, e) : p.length ? Promise.all(p).then(() => u) : u;
  };
}), CJ = /* @__PURE__ */ Ze("$ZodObjectJIT", (e, t) => {
  SJ.init(e, t);
  const n = e._zod.parse, r = pk(() => hP(t)), i = (x) => {
    var N;
    const b = new GQ(["shape", "payload", "ctx"]), _ = r.value, E = (O) => {
      const P = R6(O);
      return `shape[${P}]._zod.run({ value: input[${P}], issues: [] }, ctx)`;
    };
    b.write("const input = payload.value;");
    const k = /* @__PURE__ */ Object.create(null);
    let T = 0;
    for (const O of _.keys)
      k[O] = `key_${T++}`;
    b.write("const newResult = {};");
    for (const O of _.keys) {
      const P = k[O], z = R6(O), q = x[O], G = ((N = q == null ? void 0 : q._zod) == null ? void 0 : N.optout) === "optional";
      b.write(`const ${P} = ${E(O)};`), G ? b.write(`
        if (${P}.issues.length) {
          if (${z} in input) {
            payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${z}, ...iss.path] : [${z}]
            })));
          }
        }
        
        if (${P}.value === undefined) {
          if (${z} in input) {
            newResult[${z}] = undefined;
          }
        } else {
          newResult[${z}] = ${P}.value;
        }
        
      `) : b.write(`
        if (${P}.issues.length) {
          payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${z}, ...iss.path] : [${z}]
          })));
        }
        
        if (${P}.value === undefined) {
          if (${z} in input) {
            newResult[${z}] = undefined;
          }
        } else {
          newResult[${z}] = ${P}.value;
        }
        
      `);
    }
    b.write("payload.value = newResult;"), b.write("return payload;");
    const R = b.compile();
    return (O, P) => R(x, O, P);
  };
  let a;
  const o = Sx, u = !nP.jitless, f = u && VX.value, p = t.catchall;
  let g;
  e._zod.parse = (x, b) => {
    g ?? (g = r.value);
    const _ = x.value;
    return o(_) ? u && f && (b == null ? void 0 : b.async) === !1 && b.jitless !== !0 ? (a || (a = i(t.shape)), x = a(x, b), p ? pP([], _, x, b, g, e) : x) : n(x, b) : (x.issues.push({
      expected: "object",
      code: "invalid_type",
      input: _,
      inst: e
    }), x);
  };
});
function D6(e, t, n, r) {
  for (const a of e)
    if (a.issues.length === 0)
      return t.value = a.value, t;
  const i = e.filter((a) => !Lp(a));
  return i.length === 1 ? (t.value = i[0].value, i[0]) : (t.issues.push({
    code: "invalid_union",
    input: t.value,
    inst: n,
    errors: e.map((a) => a.issues.map((o) => of(o, r, af())))
  }), t);
}
const EJ = /* @__PURE__ */ Ze("$ZodUnion", (e, t) => {
  Ir.init(e, t), Pn(e._zod, "optin", () => t.options.some((i) => i._zod.optin === "optional") ? "optional" : void 0), Pn(e._zod, "optout", () => t.options.some((i) => i._zod.optout === "optional") ? "optional" : void 0), Pn(e._zod, "values", () => {
    if (t.options.every((i) => i._zod.values))
      return new Set(t.options.flatMap((i) => Array.from(i._zod.values)));
  }), Pn(e._zod, "pattern", () => {
    if (t.options.every((i) => i._zod.pattern)) {
      const i = t.options.map((a) => a._zod.pattern);
      return new RegExp(`^(${i.map((a) => gk(a.source)).join("|")})$`);
    }
  });
  const n = t.options.length === 1, r = t.options[0]._zod.run;
  e._zod.parse = (i, a) => {
    if (n)
      return r(i, a);
    let o = !1;
    const u = [];
    for (const c of t.options) {
      const f = c._zod.run({
        value: i.value,
        issues: []
      }, a);
      if (f instanceof Promise)
        u.push(f), o = !0;
      else {
        if (f.issues.length === 0)
          return f;
        u.push(f);
      }
    }
    return o ? Promise.all(u).then((c) => D6(c, i, e, a)) : D6(u, i, e, a);
  };
}), kJ = /* @__PURE__ */ Ze("$ZodIntersection", (e, t) => {
  Ir.init(e, t), e._zod.parse = (n, r) => {
    const i = n.value, a = t.left._zod.run({ value: i, issues: [] }, r), o = t.right._zod.run({ value: i, issues: [] }, r);
    return a instanceof Promise || o instanceof Promise ? Promise.all([a, o]).then(([c, f]) => z6(n, c, f)) : z6(n, a, o);
  };
});
function ME(e, t) {
  if (e === t)
    return { valid: !0, data: e };
  if (e instanceof Date && t instanceof Date && +e == +t)
    return { valid: !0, data: e };
  if (sm(e) && sm(t)) {
    const n = Object.keys(t), r = Object.keys(e).filter((a) => n.indexOf(a) !== -1), i = { ...e, ...t };
    for (const a of r) {
      const o = ME(e[a], t[a]);
      if (!o.valid)
        return {
          valid: !1,
          mergeErrorPath: [a, ...o.mergeErrorPath]
        };
      i[a] = o.data;
    }
    return { valid: !0, data: i };
  }
  if (Array.isArray(e) && Array.isArray(t)) {
    if (e.length !== t.length)
      return { valid: !1, mergeErrorPath: [] };
    const n = [];
    for (let r = 0; r < e.length; r++) {
      const i = e[r], a = t[r], o = ME(i, a);
      if (!o.valid)
        return {
          valid: !1,
          mergeErrorPath: [r, ...o.mergeErrorPath]
        };
      n.push(o.data);
    }
    return { valid: !0, data: n };
  }
  return { valid: !1, mergeErrorPath: [] };
}
function z6(e, t, n) {
  const r = /* @__PURE__ */ new Map();
  let i;
  for (const u of t.issues)
    if (u.code === "unrecognized_keys") {
      i ?? (i = u);
      for (const c of u.keys)
        r.has(c) || r.set(c, {}), r.get(c).l = !0;
    } else
      e.issues.push(u);
  for (const u of n.issues)
    if (u.code === "unrecognized_keys")
      for (const c of u.keys)
        r.has(c) || r.set(c, {}), r.get(c).r = !0;
    else
      e.issues.push(u);
  const a = [...r].filter(([, u]) => u.l && u.r).map(([u]) => u);
  if (a.length && i && e.issues.push({ ...i, keys: a }), Lp(e))
    return e;
  const o = ME(t.value, n.value);
  if (!o.valid)
    throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);
  return e.value = o.data, e;
}
const TJ = /* @__PURE__ */ Ze("$ZodRecord", (e, t) => {
  Ir.init(e, t), e._zod.parse = (n, r) => {
    const i = n.value;
    if (!sm(i))
      return n.issues.push({
        expected: "record",
        code: "invalid_type",
        input: i,
        inst: e
      }), n;
    const a = [], o = t.keyType._zod.values;
    if (o) {
      n.value = {};
      const u = /* @__PURE__ */ new Set();
      for (const f of o)
        if (typeof f == "string" || typeof f == "number" || typeof f == "symbol") {
          u.add(typeof f == "number" ? f.toString() : f);
          const p = t.valueType._zod.run({ value: i[f], issues: [] }, r);
          p instanceof Promise ? a.push(p.then((g) => {
            g.issues.length && n.issues.push(...Bp(f, g.issues)), n.value[f] = g.value;
          })) : (p.issues.length && n.issues.push(...Bp(f, p.issues)), n.value[f] = p.value);
        }
      let c;
      for (const f in i)
        u.has(f) || (c = c ?? [], c.push(f));
      c && c.length > 0 && n.issues.push({
        code: "unrecognized_keys",
        input: i,
        inst: e,
        keys: c
      });
    } else {
      n.value = {};
      for (const u of Reflect.ownKeys(i)) {
        if (u === "__proto__")
          continue;
        let c = t.keyType._zod.run({ value: u, issues: [] }, r);
        if (c instanceof Promise)
          throw new Error("Async schemas not supported in object keys currently");
        if (typeof u == "string" && OQ.test(u) && c.issues.length && c.issues.some((g) => g.code === "invalid_type" && g.expected === "number")) {
          const g = t.keyType._zod.run({ value: Number(u), issues: [] }, r);
          if (g instanceof Promise)
            throw new Error("Async schemas not supported in object keys currently");
          g.issues.length === 0 && (c = g);
        }
        if (c.issues.length) {
          t.mode === "loose" ? n.value[u] = i[u] : n.issues.push({
            code: "invalid_key",
            origin: "record",
            issues: c.issues.map((g) => of(g, r, af())),
            input: u,
            path: [u],
            inst: e
          });
          continue;
        }
        const p = t.valueType._zod.run({ value: i[u], issues: [] }, r);
        p instanceof Promise ? a.push(p.then((g) => {
          g.issues.length && n.issues.push(...Bp(u, g.issues)), n.value[c.value] = g.value;
        })) : (p.issues.length && n.issues.push(...Bp(u, p.issues)), n.value[c.value] = p.value);
      }
    }
    return a.length ? Promise.all(a).then(() => n) : n;
  };
}), AJ = /* @__PURE__ */ Ze("$ZodEnum", (e, t) => {
  Ir.init(e, t);
  const n = rP(t.entries), r = new Set(n);
  e._zod.values = r, e._zod.pattern = new RegExp(`^(${n.filter((i) => HX.has(typeof i)).map((i) => typeof i == "string" ? ub(i) : i.toString()).join("|")})$`), e._zod.parse = (i, a) => {
    const o = i.value;
    return r.has(o) || i.issues.push({
      code: "invalid_value",
      values: n,
      input: o,
      inst: e
    }), i;
  };
}), jJ = /* @__PURE__ */ Ze("$ZodTransform", (e, t) => {
  Ir.init(e, t), e._zod.parse = (n, r) => {
    if (r.direction === "backward")
      throw new tP(e.constructor.name);
    const i = t.transform(n.value, n);
    if (r.async)
      return (i instanceof Promise ? i : Promise.resolve(i)).then((o) => (n.value = o, n));
    if (i instanceof Promise)
      throw new Wp();
    return n.value = i, n;
  };
});
function P6(e, t) {
  return e.issues.length && t === void 0 ? { issues: [], value: void 0 } : e;
}
const mP = /* @__PURE__ */ Ze("$ZodOptional", (e, t) => {
  Ir.init(e, t), e._zod.optin = "optional", e._zod.optout = "optional", Pn(e._zod, "values", () => t.innerType._zod.values ? /* @__PURE__ */ new Set([...t.innerType._zod.values, void 0]) : void 0), Pn(e._zod, "pattern", () => {
    const n = t.innerType._zod.pattern;
    return n ? new RegExp(`^(${gk(n.source)})?$`) : void 0;
  }), e._zod.parse = (n, r) => {
    if (t.innerType._zod.optin === "optional") {
      const i = t.innerType._zod.run(n, r);
      return i instanceof Promise ? i.then((a) => P6(a, n.value)) : P6(i, n.value);
    }
    return n.value === void 0 ? n : t.innerType._zod.run(n, r);
  };
}), NJ = /* @__PURE__ */ Ze("$ZodExactOptional", (e, t) => {
  mP.init(e, t), Pn(e._zod, "values", () => t.innerType._zod.values), Pn(e._zod, "pattern", () => t.innerType._zod.pattern), e._zod.parse = (n, r) => t.innerType._zod.run(n, r);
}), RJ = /* @__PURE__ */ Ze("$ZodNullable", (e, t) => {
  Ir.init(e, t), Pn(e._zod, "optin", () => t.innerType._zod.optin), Pn(e._zod, "optout", () => t.innerType._zod.optout), Pn(e._zod, "pattern", () => {
    const n = t.innerType._zod.pattern;
    return n ? new RegExp(`^(${gk(n.source)}|null)$`) : void 0;
  }), Pn(e._zod, "values", () => t.innerType._zod.values ? /* @__PURE__ */ new Set([...t.innerType._zod.values, null]) : void 0), e._zod.parse = (n, r) => n.value === null ? n : t.innerType._zod.run(n, r);
}), MJ = /* @__PURE__ */ Ze("$ZodDefault", (e, t) => {
  Ir.init(e, t), e._zod.optin = "optional", Pn(e._zod, "values", () => t.innerType._zod.values), e._zod.parse = (n, r) => {
    if (r.direction === "backward")
      return t.innerType._zod.run(n, r);
    if (n.value === void 0)
      return n.value = t.defaultValue, n;
    const i = t.innerType._zod.run(n, r);
    return i instanceof Promise ? i.then((a) => I6(a, t)) : I6(i, t);
  };
});
function I6(e, t) {
  return e.value === void 0 && (e.value = t.defaultValue), e;
}
const OJ = /* @__PURE__ */ Ze("$ZodPrefault", (e, t) => {
  Ir.init(e, t), e._zod.optin = "optional", Pn(e._zod, "values", () => t.innerType._zod.values), e._zod.parse = (n, r) => (r.direction === "backward" || n.value === void 0 && (n.value = t.defaultValue), t.innerType._zod.run(n, r));
}), DJ = /* @__PURE__ */ Ze("$ZodNonOptional", (e, t) => {
  Ir.init(e, t), Pn(e._zod, "values", () => {
    const n = t.innerType._zod.values;
    return n ? new Set([...n].filter((r) => r !== void 0)) : void 0;
  }), e._zod.parse = (n, r) => {
    const i = t.innerType._zod.run(n, r);
    return i instanceof Promise ? i.then((a) => L6(a, e)) : L6(i, e);
  };
});
function L6(e, t) {
  return !e.issues.length && e.value === void 0 && e.issues.push({
    code: "invalid_type",
    expected: "nonoptional",
    input: e.value,
    inst: t
  }), e;
}
const zJ = /* @__PURE__ */ Ze("$ZodCatch", (e, t) => {
  Ir.init(e, t), Pn(e._zod, "optin", () => t.innerType._zod.optin), Pn(e._zod, "optout", () => t.innerType._zod.optout), Pn(e._zod, "values", () => t.innerType._zod.values), e._zod.parse = (n, r) => {
    if (r.direction === "backward")
      return t.innerType._zod.run(n, r);
    const i = t.innerType._zod.run(n, r);
    return i instanceof Promise ? i.then((a) => (n.value = a.value, a.issues.length && (n.value = t.catchValue({
      ...n,
      error: {
        issues: a.issues.map((o) => of(o, r, af()))
      },
      input: n.value
    }), n.issues = []), n)) : (n.value = i.value, i.issues.length && (n.value = t.catchValue({
      ...n,
      error: {
        issues: i.issues.map((a) => of(a, r, af()))
      },
      input: n.value
    }), n.issues = []), n);
  };
}), PJ = /* @__PURE__ */ Ze("$ZodPipe", (e, t) => {
  Ir.init(e, t), Pn(e._zod, "values", () => t.in._zod.values), Pn(e._zod, "optin", () => t.in._zod.optin), Pn(e._zod, "optout", () => t.out._zod.optout), Pn(e._zod, "propValues", () => t.in._zod.propValues), e._zod.parse = (n, r) => {
    if (r.direction === "backward") {
      const a = t.out._zod.run(n, r);
      return a instanceof Promise ? a.then((o) => j1(o, t.in, r)) : j1(a, t.in, r);
    }
    const i = t.in._zod.run(n, r);
    return i instanceof Promise ? i.then((a) => j1(a, t.out, r)) : j1(i, t.out, r);
  };
});
function j1(e, t, n) {
  return e.issues.length ? (e.aborted = !0, e) : t._zod.run({ value: e.value, issues: e.issues }, n);
}
const IJ = /* @__PURE__ */ Ze("$ZodReadonly", (e, t) => {
  Ir.init(e, t), Pn(e._zod, "propValues", () => t.innerType._zod.propValues), Pn(e._zod, "values", () => t.innerType._zod.values), Pn(e._zod, "optin", () => {
    var n, r;
    return (r = (n = t.innerType) == null ? void 0 : n._zod) == null ? void 0 : r.optin;
  }), Pn(e._zod, "optout", () => {
    var n, r;
    return (r = (n = t.innerType) == null ? void 0 : n._zod) == null ? void 0 : r.optout;
  }), e._zod.parse = (n, r) => {
    if (r.direction === "backward")
      return t.innerType._zod.run(n, r);
    const i = t.innerType._zod.run(n, r);
    return i instanceof Promise ? i.then(B6) : B6(i);
  };
});
function B6(e) {
  return e.value = Object.freeze(e.value), e;
}
const LJ = /* @__PURE__ */ Ze("$ZodCustom", (e, t) => {
  Yl.init(e, t), Ir.init(e, t), e._zod.parse = (n, r) => n, e._zod.check = (n) => {
    const r = n.value, i = t.fn(r);
    if (i instanceof Promise)
      return i.then((a) => q6(a, n, r, e));
    q6(i, n, r, e);
  };
});
function q6(e, t, n, r) {
  if (!e) {
    const i = {
      code: "custom",
      input: n,
      inst: r,
      // incorporates params.error into issue reporting
      path: [...r._zod.def.path ?? []],
      // incorporates params.error into issue reporting
      continue: !r._zod.def.abort
      // params: inst._zod.def.params,
    };
    r._zod.def.params && (i.params = r._zod.def.params), t.issues.push(K0(i));
  }
}
var $6;
class BJ {
  constructor() {
    this._map = /* @__PURE__ */ new WeakMap(), this._idmap = /* @__PURE__ */ new Map();
  }
  add(t, ...n) {
    const r = n[0];
    return this._map.set(t, r), r && typeof r == "object" && "id" in r && this._idmap.set(r.id, t), this;
  }
  clear() {
    return this._map = /* @__PURE__ */ new WeakMap(), this._idmap = /* @__PURE__ */ new Map(), this;
  }
  remove(t) {
    const n = this._map.get(t);
    return n && typeof n == "object" && "id" in n && this._idmap.delete(n.id), this._map.delete(t), this;
  }
  get(t) {
    const n = t._zod.parent;
    if (n) {
      const r = { ...this.get(n) ?? {} };
      delete r.id;
      const i = { ...r, ...this._map.get(t) };
      return Object.keys(i).length ? i : void 0;
    }
    return this._map.get(t);
  }
  has(t) {
    return this._map.has(t);
  }
}
function qJ() {
  return new BJ();
}
($6 = globalThis).__zod_globalRegistry ?? ($6.__zod_globalRegistry = qJ());
const b0 = globalThis.__zod_globalRegistry;
// @__NO_SIDE_EFFECTS__
function $J(e, t) {
  return new e({
    type: "string",
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function FJ(e, t) {
  return new e({
    type: "string",
    format: "email",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function F6(e, t) {
  return new e({
    type: "string",
    format: "guid",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function UJ(e, t) {
  return new e({
    type: "string",
    format: "uuid",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function VJ(e, t) {
  return new e({
    type: "string",
    format: "uuid",
    check: "string_format",
    abort: !1,
    version: "v4",
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function HJ(e, t) {
  return new e({
    type: "string",
    format: "uuid",
    check: "string_format",
    abort: !1,
    version: "v6",
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function GJ(e, t) {
  return new e({
    type: "string",
    format: "uuid",
    check: "string_format",
    abort: !1,
    version: "v7",
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function KJ(e, t) {
  return new e({
    type: "string",
    format: "url",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function YJ(e, t) {
  return new e({
    type: "string",
    format: "emoji",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function WJ(e, t) {
  return new e({
    type: "string",
    format: "nanoid",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function ZJ(e, t) {
  return new e({
    type: "string",
    format: "cuid",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function XJ(e, t) {
  return new e({
    type: "string",
    format: "cuid2",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function QJ(e, t) {
  return new e({
    type: "string",
    format: "ulid",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function JJ(e, t) {
  return new e({
    type: "string",
    format: "xid",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function eee(e, t) {
  return new e({
    type: "string",
    format: "ksuid",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function tee(e, t) {
  return new e({
    type: "string",
    format: "ipv4",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function nee(e, t) {
  return new e({
    type: "string",
    format: "ipv6",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function ree(e, t) {
  return new e({
    type: "string",
    format: "cidrv4",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function iee(e, t) {
  return new e({
    type: "string",
    format: "cidrv6",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function see(e, t) {
  return new e({
    type: "string",
    format: "base64",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function aee(e, t) {
  return new e({
    type: "string",
    format: "base64url",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function oee(e, t) {
  return new e({
    type: "string",
    format: "e164",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function lee(e, t) {
  return new e({
    type: "string",
    format: "jwt",
    check: "string_format",
    abort: !1,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function uee(e, t) {
  return new e({
    type: "string",
    format: "datetime",
    check: "string_format",
    offset: !1,
    local: !1,
    precision: null,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function cee(e, t) {
  return new e({
    type: "string",
    format: "date",
    check: "string_format",
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function fee(e, t) {
  return new e({
    type: "string",
    format: "time",
    check: "string_format",
    precision: null,
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function dee(e, t) {
  return new e({
    type: "string",
    format: "duration",
    check: "string_format",
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function hee(e) {
  return new e({
    type: "any"
  });
}
// @__NO_SIDE_EFFECTS__
function pee(e) {
  return new e({
    type: "unknown"
  });
}
// @__NO_SIDE_EFFECTS__
function mee(e, t) {
  return new e({
    type: "never",
    ...qt(t)
  });
}
// @__NO_SIDE_EFFECTS__
function gP(e, t) {
  return new PQ({
    check: "max_length",
    ...qt(t),
    maximum: e
  });
}
// @__NO_SIDE_EFFECTS__
function Ex(e, t) {
  return new IQ({
    check: "min_length",
    ...qt(t),
    minimum: e
  });
}
// @__NO_SIDE_EFFECTS__
function yP(e, t) {
  return new LQ({
    check: "length_equals",
    ...qt(t),
    length: e
  });
}
// @__NO_SIDE_EFFECTS__
function gee(e, t) {
  return new BQ({
    check: "string_format",
    format: "regex",
    ...qt(t),
    pattern: e
  });
}
// @__NO_SIDE_EFFECTS__
function yee(e) {
  return new qQ({
    check: "string_format",
    format: "lowercase",
    ...qt(e)
  });
}
// @__NO_SIDE_EFFECTS__
function vee(e) {
  return new $Q({
    check: "string_format",
    format: "uppercase",
    ...qt(e)
  });
}
// @__NO_SIDE_EFFECTS__
function xee(e, t) {
  return new FQ({
    check: "string_format",
    format: "includes",
    ...qt(t),
    includes: e
  });
}
// @__NO_SIDE_EFFECTS__
function bee(e, t) {
  return new UQ({
    check: "string_format",
    format: "starts_with",
    ...qt(t),
    prefix: e
  });
}
// @__NO_SIDE_EFFECTS__
function wee(e, t) {
  return new VQ({
    check: "string_format",
    format: "ends_with",
    ...qt(t),
    suffix: e
  });
}
// @__NO_SIDE_EFFECTS__
function bm(e) {
  return new HQ({
    check: "overwrite",
    tx: e
  });
}
// @__NO_SIDE_EFFECTS__
function _ee(e) {
  return /* @__PURE__ */ bm((t) => t.normalize(e));
}
// @__NO_SIDE_EFFECTS__
function See() {
  return /* @__PURE__ */ bm((e) => e.trim());
}
// @__NO_SIDE_EFFECTS__
function Cee() {
  return /* @__PURE__ */ bm((e) => e.toLowerCase());
}
// @__NO_SIDE_EFFECTS__
function Eee() {
  return /* @__PURE__ */ bm((e) => e.toUpperCase());
}
// @__NO_SIDE_EFFECTS__
function kee() {
  return /* @__PURE__ */ bm((e) => UX(e));
}
// @__NO_SIDE_EFFECTS__
function Tee(e, t, n) {
  return new e({
    type: "array",
    element: t,
    // get element() {
    //   return element;
    // },
    ...qt(n)
  });
}
// @__NO_SIDE_EFFECTS__
function Aee(e, t, n) {
  return new e({
    type: "custom",
    check: "custom",
    fn: t,
    ...qt(n)
  });
}
// @__NO_SIDE_EFFECTS__
function jee(e) {
  const t = /* @__PURE__ */ Nee((n) => (n.addIssue = (r) => {
    if (typeof r == "string")
      n.issues.push(K0(r, n.value, t._zod.def));
    else {
      const i = r;
      i.fatal && (i.continue = !1), i.code ?? (i.code = "custom"), i.input ?? (i.input = n.value), i.inst ?? (i.inst = t), i.continue ?? (i.continue = !t._zod.def.abort), n.issues.push(K0(i));
    }
  }, e(n.value, n)));
  return t;
}
// @__NO_SIDE_EFFECTS__
function Nee(e, t) {
  const n = new Yl({
    check: "custom",
    ...qt(t)
  });
  return n._zod.check = e, n;
}
function vP(e) {
  let t = (e == null ? void 0 : e.target) ?? "draft-2020-12";
  return t === "draft-4" && (t = "draft-04"), t === "draft-7" && (t = "draft-07"), {
    processors: e.processors ?? {},
    metadataRegistry: (e == null ? void 0 : e.metadata) ?? b0,
    target: t,
    unrepresentable: (e == null ? void 0 : e.unrepresentable) ?? "throw",
    override: (e == null ? void 0 : e.override) ?? (() => {
    }),
    io: (e == null ? void 0 : e.io) ?? "output",
    counter: 0,
    seen: /* @__PURE__ */ new Map(),
    cycles: (e == null ? void 0 : e.cycles) ?? "ref",
    reused: (e == null ? void 0 : e.reused) ?? "inline",
    external: (e == null ? void 0 : e.external) ?? void 0
  };
}
function Wr(e, t, n = { path: [], schemaPath: [] }) {
  var p, g;
  var r;
  const i = e._zod.def, a = t.seen.get(e);
  if (a)
    return a.count++, n.schemaPath.includes(e) && (a.cycle = n.path), a.schema;
  const o = { schema: {}, count: 1, cycle: void 0, path: n.path };
  t.seen.set(e, o);
  const u = (g = (p = e._zod).toJSONSchema) == null ? void 0 : g.call(p);
  if (u)
    o.schema = u;
  else {
    const x = {
      ...n,
      schemaPath: [...n.schemaPath, e],
      path: n.path
    };
    if (e._zod.processJSONSchema)
      e._zod.processJSONSchema(t, o.schema, x);
    else {
      const _ = o.schema, E = t.processors[i.type];
      if (!E)
        throw new Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);
      E(e, t, _, x);
    }
    const b = e._zod.parent;
    b && (o.ref || (o.ref = b), Wr(b, t, x), t.seen.get(b).isParent = !0);
  }
  const c = t.metadataRegistry.get(e);
  return c && Object.assign(o.schema, c), t.io === "input" && vs(e) && (delete o.schema.examples, delete o.schema.default), t.io === "input" && o.schema._prefault && ((r = o.schema).default ?? (r.default = o.schema._prefault)), delete o.schema._prefault, t.seen.get(e).schema;
}
function xP(e, t) {
  var o, u, c, f;
  const n = e.seen.get(t);
  if (!n)
    throw new Error("Unprocessed schema. This is a bug in Zod.");
  const r = /* @__PURE__ */ new Map();
  for (const p of e.seen.entries()) {
    const g = (o = e.metadataRegistry.get(p[0])) == null ? void 0 : o.id;
    if (g) {
      const x = r.get(g);
      if (x && x !== p[0])
        throw new Error(`Duplicate schema id "${g}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);
      r.set(g, p[0]);
    }
  }
  const i = (p) => {
    var E;
    const g = e.target === "draft-2020-12" ? "$defs" : "definitions";
    if (e.external) {
      const k = (E = e.external.registry.get(p[0])) == null ? void 0 : E.id, T = e.external.uri ?? ((N) => N);
      if (k)
        return { ref: T(k) };
      const R = p[1].defId ?? p[1].schema.id ?? `schema${e.counter++}`;
      return p[1].defId = R, { defId: R, ref: `${T("__shared")}#/${g}/${R}` };
    }
    if (p[1] === n)
      return { ref: "#" };
    const b = `#/${g}/`, _ = p[1].schema.id ?? `__schema${e.counter++}`;
    return { defId: _, ref: b + _ };
  }, a = (p) => {
    if (p[1].schema.$ref)
      return;
    const g = p[1], { ref: x, defId: b } = i(p);
    g.def = { ...g.schema }, b && (g.defId = b);
    const _ = g.schema;
    for (const E in _)
      delete _[E];
    _.$ref = x;
  };
  if (e.cycles === "throw")
    for (const p of e.seen.entries()) {
      const g = p[1];
      if (g.cycle)
        throw new Error(`Cycle detected: #/${(u = g.cycle) == null ? void 0 : u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);
    }
  for (const p of e.seen.entries()) {
    const g = p[1];
    if (t === p[0]) {
      a(p);
      continue;
    }
    if (e.external) {
      const b = (c = e.external.registry.get(p[0])) == null ? void 0 : c.id;
      if (t !== p[0] && b) {
        a(p);
        continue;
      }
    }
    if ((f = e.metadataRegistry.get(p[0])) == null ? void 0 : f.id) {
      a(p);
      continue;
    }
    if (g.cycle) {
      a(p);
      continue;
    }
    if (g.count > 1 && e.reused === "ref") {
      a(p);
      continue;
    }
  }
}
function bP(e, t) {
  var o, u, c;
  const n = e.seen.get(t);
  if (!n)
    throw new Error("Unprocessed schema. This is a bug in Zod.");
  const r = (f) => {
    const p = e.seen.get(f);
    if (p.ref === null)
      return;
    const g = p.def ?? p.schema, x = { ...g }, b = p.ref;
    if (p.ref = null, b) {
      r(b);
      const E = e.seen.get(b), k = E.schema;
      if (k.$ref && (e.target === "draft-07" || e.target === "draft-04" || e.target === "openapi-3.0") ? (g.allOf = g.allOf ?? [], g.allOf.push(k)) : Object.assign(g, k), Object.assign(g, x), f._zod.parent === b)
        for (const R in g)
          R === "$ref" || R === "allOf" || R in x || delete g[R];
      if (k.$ref)
        for (const R in g)
          R === "$ref" || R === "allOf" || R in E.def && JSON.stringify(g[R]) === JSON.stringify(E.def[R]) && delete g[R];
    }
    const _ = f._zod.parent;
    if (_ && _ !== b) {
      r(_);
      const E = e.seen.get(_);
      if (E != null && E.schema.$ref && (g.$ref = E.schema.$ref, E.def))
        for (const k in g)
          k === "$ref" || k === "allOf" || k in E.def && JSON.stringify(g[k]) === JSON.stringify(E.def[k]) && delete g[k];
    }
    e.override({
      zodSchema: f,
      jsonSchema: g,
      path: p.path ?? []
    });
  };
  for (const f of [...e.seen.entries()].reverse())
    r(f[0]);
  const i = {};
  if (e.target === "draft-2020-12" ? i.$schema = "https://json-schema.org/draft/2020-12/schema" : e.target === "draft-07" ? i.$schema = "http://json-schema.org/draft-07/schema#" : e.target === "draft-04" && (i.$schema = "http://json-schema.org/draft-04/schema#"), (o = e.external) != null && o.uri) {
    const f = (u = e.external.registry.get(t)) == null ? void 0 : u.id;
    if (!f)
      throw new Error("Schema is missing an `id` property");
    i.$id = e.external.uri(f);
  }
  Object.assign(i, n.def ?? n.schema);
  const a = ((c = e.external) == null ? void 0 : c.defs) ?? {};
  for (const f of e.seen.entries()) {
    const p = f[1];
    p.def && p.defId && (a[p.defId] = p.def);
  }
  e.external || Object.keys(a).length > 0 && (e.target === "draft-2020-12" ? i.$defs = a : i.definitions = a);
  try {
    const f = JSON.parse(JSON.stringify(i));
    return Object.defineProperty(f, "~standard", {
      value: {
        ...t["~standard"],
        jsonSchema: {
          input: kx(t, "input", e.processors),
          output: kx(t, "output", e.processors)
        }
      },
      enumerable: !1,
      writable: !1
    }), f;
  } catch {
    throw new Error("Error converting schema to JSON.");
  }
}
function vs(e, t) {
  const n = t ?? { seen: /* @__PURE__ */ new Set() };
  if (n.seen.has(e))
    return !1;
  n.seen.add(e);
  const r = e._zod.def;
  if (r.type === "transform")
    return !0;
  if (r.type === "array")
    return vs(r.element, n);
  if (r.type === "set")
    return vs(r.valueType, n);
  if (r.type === "lazy")
    return vs(r.getter(), n);
  if (r.type === "promise" || r.type === "optional" || r.type === "nonoptional" || r.type === "nullable" || r.type === "readonly" || r.type === "default" || r.type === "prefault")
    return vs(r.innerType, n);
  if (r.type === "intersection")
    return vs(r.left, n) || vs(r.right, n);
  if (r.type === "record" || r.type === "map")
    return vs(r.keyType, n) || vs(r.valueType, n);
  if (r.type === "pipe")
    return vs(r.in, n) || vs(r.out, n);
  if (r.type === "object") {
    for (const i in r.shape)
      if (vs(r.shape[i], n))
        return !0;
    return !1;
  }
  if (r.type === "union") {
    for (const i of r.options)
      if (vs(i, n))
        return !0;
    return !1;
  }
  if (r.type === "tuple") {
    for (const i of r.items)
      if (vs(i, n))
        return !0;
    return !!(r.rest && vs(r.rest, n));
  }
  return !1;
}
const Ree = (e, t = {}) => (n) => {
  const r = vP({ ...n, processors: t });
  return Wr(e, r), xP(r, e), bP(r, e);
}, kx = (e, t, n = {}) => (r) => {
  const { libraryOptions: i, target: a } = r ?? {}, o = vP({ ...i ?? {}, target: a, io: t, processors: n });
  return Wr(e, o), xP(o, e), bP(o, e);
}, Mee = {
  guid: "uuid",
  url: "uri",
  datetime: "date-time",
  json_string: "json-string",
  regex: ""
  // do not set
}, Oee = (e, t, n, r) => {
  const i = n;
  i.type = "string";
  const { minimum: a, maximum: o, format: u, patterns: c, contentEncoding: f } = e._zod.bag;
  if (typeof a == "number" && (i.minLength = a), typeof o == "number" && (i.maxLength = o), u && (i.format = Mee[u] ?? u, i.format === "" && delete i.format, u === "time" && delete i.format), f && (i.contentEncoding = f), c && c.size > 0) {
    const p = [...c];
    p.length === 1 ? i.pattern = p[0].source : p.length > 1 && (i.allOf = [
      ...p.map((g) => ({
        ...t.target === "draft-07" || t.target === "draft-04" || t.target === "openapi-3.0" ? { type: "string" } : {},
        pattern: g.source
      }))
    ]);
  }
}, Dee = (e, t, n, r) => {
  n.not = {};
}, zee = (e, t, n, r) => {
}, Pee = (e, t, n, r) => {
}, Iee = (e, t, n, r) => {
  const i = e._zod.def, a = rP(i.entries);
  a.every((o) => typeof o == "number") && (n.type = "number"), a.every((o) => typeof o == "string") && (n.type = "string"), n.enum = a;
}, Lee = (e, t, n, r) => {
  if (t.unrepresentable === "throw")
    throw new Error("Custom types cannot be represented in JSON Schema");
}, Bee = (e, t, n, r) => {
  if (t.unrepresentable === "throw")
    throw new Error("Transforms cannot be represented in JSON Schema");
}, qee = (e, t, n, r) => {
  const i = n, a = e._zod.def, { minimum: o, maximum: u } = e._zod.bag;
  typeof o == "number" && (i.minItems = o), typeof u == "number" && (i.maxItems = u), i.type = "array", i.items = Wr(a.element, t, { ...r, path: [...r.path, "items"] });
}, $ee = (e, t, n, r) => {
  var f;
  const i = n, a = e._zod.def;
  i.type = "object", i.properties = {};
  const o = a.shape;
  for (const p in o)
    i.properties[p] = Wr(o[p], t, {
      ...r,
      path: [...r.path, "properties", p]
    });
  const u = new Set(Object.keys(o)), c = new Set([...u].filter((p) => {
    const g = a.shape[p]._zod;
    return t.io === "input" ? g.optin === void 0 : g.optout === void 0;
  }));
  c.size > 0 && (i.required = Array.from(c)), ((f = a.catchall) == null ? void 0 : f._zod.def.type) === "never" ? i.additionalProperties = !1 : a.catchall ? a.catchall && (i.additionalProperties = Wr(a.catchall, t, {
    ...r,
    path: [...r.path, "additionalProperties"]
  })) : t.io === "output" && (i.additionalProperties = !1);
}, Fee = (e, t, n, r) => {
  const i = e._zod.def, a = i.inclusive === !1, o = i.options.map((u, c) => Wr(u, t, {
    ...r,
    path: [...r.path, a ? "oneOf" : "anyOf", c]
  }));
  a ? n.oneOf = o : n.anyOf = o;
}, Uee = (e, t, n, r) => {
  const i = e._zod.def, a = Wr(i.left, t, {
    ...r,
    path: [...r.path, "allOf", 0]
  }), o = Wr(i.right, t, {
    ...r,
    path: [...r.path, "allOf", 1]
  }), u = (f) => "allOf" in f && Object.keys(f).length === 1, c = [
    ...u(a) ? a.allOf : [a],
    ...u(o) ? o.allOf : [o]
  ];
  n.allOf = c;
}, Vee = (e, t, n, r) => {
  const i = n, a = e._zod.def;
  i.type = "object";
  const o = a.keyType, u = o._zod.bag, c = u == null ? void 0 : u.patterns;
  if (a.mode === "loose" && c && c.size > 0) {
    const p = Wr(a.valueType, t, {
      ...r,
      path: [...r.path, "patternProperties", "*"]
    });
    i.patternProperties = {};
    for (const g of c)
      i.patternProperties[g.source] = p;
  } else
    (t.target === "draft-07" || t.target === "draft-2020-12") && (i.propertyNames = Wr(a.keyType, t, {
      ...r,
      path: [...r.path, "propertyNames"]
    })), i.additionalProperties = Wr(a.valueType, t, {
      ...r,
      path: [...r.path, "additionalProperties"]
    });
  const f = o._zod.values;
  if (f) {
    const p = [...f].filter((g) => typeof g == "string" || typeof g == "number");
    p.length > 0 && (i.required = p);
  }
}, Hee = (e, t, n, r) => {
  const i = e._zod.def, a = Wr(i.innerType, t, r), o = t.seen.get(e);
  t.target === "openapi-3.0" ? (o.ref = i.innerType, n.nullable = !0) : n.anyOf = [a, { type: "null" }];
}, Gee = (e, t, n, r) => {
  const i = e._zod.def;
  Wr(i.innerType, t, r);
  const a = t.seen.get(e);
  a.ref = i.innerType;
}, Kee = (e, t, n, r) => {
  const i = e._zod.def;
  Wr(i.innerType, t, r);
  const a = t.seen.get(e);
  a.ref = i.innerType, n.default = JSON.parse(JSON.stringify(i.defaultValue));
}, Yee = (e, t, n, r) => {
  const i = e._zod.def;
  Wr(i.innerType, t, r);
  const a = t.seen.get(e);
  a.ref = i.innerType, t.io === "input" && (n._prefault = JSON.parse(JSON.stringify(i.defaultValue)));
}, Wee = (e, t, n, r) => {
  const i = e._zod.def;
  Wr(i.innerType, t, r);
  const a = t.seen.get(e);
  a.ref = i.innerType;
  let o;
  try {
    o = i.catchValue(void 0);
  } catch {
    throw new Error("Dynamic catch values are not supported in JSON Schema");
  }
  n.default = o;
}, Zee = (e, t, n, r) => {
  const i = e._zod.def, a = t.io === "input" ? i.in._zod.def.type === "transform" ? i.out : i.in : i.out;
  Wr(a, t, r);
  const o = t.seen.get(e);
  o.ref = a;
}, Xee = (e, t, n, r) => {
  const i = e._zod.def;
  Wr(i.innerType, t, r);
  const a = t.seen.get(e);
  a.ref = i.innerType, n.readOnly = !0;
}, wP = (e, t, n, r) => {
  const i = e._zod.def;
  Wr(i.innerType, t, r);
  const a = t.seen.get(e);
  a.ref = i.innerType;
}, Qee = /* @__PURE__ */ Ze("ZodISODateTime", (e, t) => {
  sJ.init(e, t), Sr.init(e, t);
});
function Jee(e) {
  return /* @__PURE__ */ uee(Qee, e);
}
const ete = /* @__PURE__ */ Ze("ZodISODate", (e, t) => {
  aJ.init(e, t), Sr.init(e, t);
});
function tte(e) {
  return /* @__PURE__ */ cee(ete, e);
}
const nte = /* @__PURE__ */ Ze("ZodISOTime", (e, t) => {
  oJ.init(e, t), Sr.init(e, t);
});
function rte(e) {
  return /* @__PURE__ */ fee(nte, e);
}
const ite = /* @__PURE__ */ Ze("ZodISODuration", (e, t) => {
  lJ.init(e, t), Sr.init(e, t);
});
function ste(e) {
  return /* @__PURE__ */ dee(ite, e);
}
const ate = (e, t) => {
  oP.init(e, t), e.name = "ZodError", Object.defineProperties(e, {
    format: {
      value: (n) => tQ(e, n)
      // enumerable: false,
    },
    flatten: {
      value: (n) => eQ(e, n)
      // enumerable: false,
    },
    addIssue: {
      value: (n) => {
        e.issues.push(n), e.message = JSON.stringify(e.issues, RE, 2);
      }
      // enumerable: false,
    },
    addIssues: {
      value: (n) => {
        e.issues.push(...n), e.message = JSON.stringify(e.issues, RE, 2);
      }
      // enumerable: false,
    },
    isEmpty: {
      get() {
        return e.issues.length === 0;
      }
      // enumerable: false,
    }
  });
}, to = Ze("ZodError", ate, {
  Parent: Error
}), ote = /* @__PURE__ */ vk(to), lte = /* @__PURE__ */ xk(to), ute = /* @__PURE__ */ cb(to), cte = /* @__PURE__ */ fb(to), fte = /* @__PURE__ */ iQ(to), dte = /* @__PURE__ */ sQ(to), hte = /* @__PURE__ */ aQ(to), pte = /* @__PURE__ */ oQ(to), mte = /* @__PURE__ */ lQ(to), gte = /* @__PURE__ */ uQ(to), yte = /* @__PURE__ */ cQ(to), vte = /* @__PURE__ */ fQ(to), Lr = /* @__PURE__ */ Ze("ZodType", (e, t) => (Ir.init(e, t), Object.assign(e["~standard"], {
  jsonSchema: {
    input: kx(e, "input"),
    output: kx(e, "output")
  }
}), e.toJSONSchema = Ree(e, {}), e.def = t, e.type = t.type, Object.defineProperty(e, "_def", { value: t }), e.check = (...n) => e.clone(ff(t, {
  checks: [
    ...t.checks ?? [],
    ...n.map((r) => typeof r == "function" ? { _zod: { check: r, def: { check: "custom" }, onattach: [] } } : r)
  ]
}), {
  parent: !0
}), e.with = e.check, e.clone = (n, r) => df(e, n, r), e.brand = () => e, e.register = ((n, r) => (n.add(e, r), e)), e.parse = (n, r) => ote(e, n, r, { callee: e.parse }), e.safeParse = (n, r) => ute(e, n, r), e.parseAsync = async (n, r) => lte(e, n, r, { callee: e.parseAsync }), e.safeParseAsync = async (n, r) => cte(e, n, r), e.spa = e.safeParseAsync, e.encode = (n, r) => fte(e, n, r), e.decode = (n, r) => dte(e, n, r), e.encodeAsync = async (n, r) => hte(e, n, r), e.decodeAsync = async (n, r) => pte(e, n, r), e.safeEncode = (n, r) => mte(e, n, r), e.safeDecode = (n, r) => gte(e, n, r), e.safeEncodeAsync = async (n, r) => yte(e, n, r), e.safeDecodeAsync = async (n, r) => vte(e, n, r), e.refine = (n, r) => e.check(dne(n, r)), e.superRefine = (n) => e.check(hne(n)), e.overwrite = (n) => e.check(/* @__PURE__ */ bm(n)), e.optional = () => V6(e), e.exactOptional = () => Jte(e), e.nullable = () => H6(e), e.nullish = () => V6(H6(e)), e.nonoptional = (n) => sne(e, n), e.array = () => R0(e), e.or = (n) => Hte([e, n]), e.and = (n) => Kte(e, n), e.transform = (n) => G6(e, Xte(n)), e.default = (n) => nne(e, n), e.prefault = (n) => ine(e, n), e.catch = (n) => one(e, n), e.pipe = (n) => G6(e, n), e.readonly = () => cne(e), e.describe = (n) => {
  const r = e.clone();
  return b0.add(r, { description: n }), r;
}, Object.defineProperty(e, "description", {
  get() {
    var n;
    return (n = b0.get(e)) == null ? void 0 : n.description;
  },
  configurable: !0
}), e.meta = (...n) => {
  if (n.length === 0)
    return b0.get(e);
  const r = e.clone();
  return b0.add(r, n[0]), r;
}, e.isOptional = () => e.safeParse(void 0).success, e.isNullable = () => e.safeParse(null).success, e.apply = (n) => n(e), e)), _P = /* @__PURE__ */ Ze("_ZodString", (e, t) => {
  bk.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (r, i, a) => Oee(e, r, i);
  const n = e._zod.bag;
  e.format = n.format ?? null, e.minLength = n.minimum ?? null, e.maxLength = n.maximum ?? null, e.regex = (...r) => e.check(/* @__PURE__ */ gee(...r)), e.includes = (...r) => e.check(/* @__PURE__ */ xee(...r)), e.startsWith = (...r) => e.check(/* @__PURE__ */ bee(...r)), e.endsWith = (...r) => e.check(/* @__PURE__ */ wee(...r)), e.min = (...r) => e.check(/* @__PURE__ */ Ex(...r)), e.max = (...r) => e.check(/* @__PURE__ */ gP(...r)), e.length = (...r) => e.check(/* @__PURE__ */ yP(...r)), e.nonempty = (...r) => e.check(/* @__PURE__ */ Ex(1, ...r)), e.lowercase = (r) => e.check(/* @__PURE__ */ yee(r)), e.uppercase = (r) => e.check(/* @__PURE__ */ vee(r)), e.trim = () => e.check(/* @__PURE__ */ See()), e.normalize = (...r) => e.check(/* @__PURE__ */ _ee(...r)), e.toLowerCase = () => e.check(/* @__PURE__ */ Cee()), e.toUpperCase = () => e.check(/* @__PURE__ */ Eee()), e.slugify = () => e.check(/* @__PURE__ */ kee());
}), xte = /* @__PURE__ */ Ze("ZodString", (e, t) => {
  bk.init(e, t), _P.init(e, t), e.email = (n) => e.check(/* @__PURE__ */ FJ(bte, n)), e.url = (n) => e.check(/* @__PURE__ */ KJ(wte, n)), e.jwt = (n) => e.check(/* @__PURE__ */ lee(Pte, n)), e.emoji = (n) => e.check(/* @__PURE__ */ YJ(_te, n)), e.guid = (n) => e.check(/* @__PURE__ */ F6(U6, n)), e.uuid = (n) => e.check(/* @__PURE__ */ UJ(N1, n)), e.uuidv4 = (n) => e.check(/* @__PURE__ */ VJ(N1, n)), e.uuidv6 = (n) => e.check(/* @__PURE__ */ HJ(N1, n)), e.uuidv7 = (n) => e.check(/* @__PURE__ */ GJ(N1, n)), e.nanoid = (n) => e.check(/* @__PURE__ */ WJ(Ste, n)), e.guid = (n) => e.check(/* @__PURE__ */ F6(U6, n)), e.cuid = (n) => e.check(/* @__PURE__ */ ZJ(Cte, n)), e.cuid2 = (n) => e.check(/* @__PURE__ */ XJ(Ete, n)), e.ulid = (n) => e.check(/* @__PURE__ */ QJ(kte, n)), e.base64 = (n) => e.check(/* @__PURE__ */ see(Ote, n)), e.base64url = (n) => e.check(/* @__PURE__ */ aee(Dte, n)), e.xid = (n) => e.check(/* @__PURE__ */ JJ(Tte, n)), e.ksuid = (n) => e.check(/* @__PURE__ */ eee(Ate, n)), e.ipv4 = (n) => e.check(/* @__PURE__ */ tee(jte, n)), e.ipv6 = (n) => e.check(/* @__PURE__ */ nee(Nte, n)), e.cidrv4 = (n) => e.check(/* @__PURE__ */ ree(Rte, n)), e.cidrv6 = (n) => e.check(/* @__PURE__ */ iee(Mte, n)), e.e164 = (n) => e.check(/* @__PURE__ */ oee(zte, n)), e.datetime = (n) => e.check(Jee(n)), e.date = (n) => e.check(tte(n)), e.time = (n) => e.check(rte(n)), e.duration = (n) => e.check(ste(n));
});
function Zp(e) {
  return /* @__PURE__ */ $J(xte, e);
}
const Sr = /* @__PURE__ */ Ze("ZodStringFormat", (e, t) => {
  dr.init(e, t), _P.init(e, t);
}), bte = /* @__PURE__ */ Ze("ZodEmail", (e, t) => {
  ZQ.init(e, t), Sr.init(e, t);
}), U6 = /* @__PURE__ */ Ze("ZodGUID", (e, t) => {
  YQ.init(e, t), Sr.init(e, t);
}), N1 = /* @__PURE__ */ Ze("ZodUUID", (e, t) => {
  WQ.init(e, t), Sr.init(e, t);
}), wte = /* @__PURE__ */ Ze("ZodURL", (e, t) => {
  XQ.init(e, t), Sr.init(e, t);
}), _te = /* @__PURE__ */ Ze("ZodEmoji", (e, t) => {
  QQ.init(e, t), Sr.init(e, t);
}), Ste = /* @__PURE__ */ Ze("ZodNanoID", (e, t) => {
  JQ.init(e, t), Sr.init(e, t);
}), Cte = /* @__PURE__ */ Ze("ZodCUID", (e, t) => {
  eJ.init(e, t), Sr.init(e, t);
}), Ete = /* @__PURE__ */ Ze("ZodCUID2", (e, t) => {
  tJ.init(e, t), Sr.init(e, t);
}), kte = /* @__PURE__ */ Ze("ZodULID", (e, t) => {
  nJ.init(e, t), Sr.init(e, t);
}), Tte = /* @__PURE__ */ Ze("ZodXID", (e, t) => {
  rJ.init(e, t), Sr.init(e, t);
}), Ate = /* @__PURE__ */ Ze("ZodKSUID", (e, t) => {
  iJ.init(e, t), Sr.init(e, t);
}), jte = /* @__PURE__ */ Ze("ZodIPv4", (e, t) => {
  uJ.init(e, t), Sr.init(e, t);
}), Nte = /* @__PURE__ */ Ze("ZodIPv6", (e, t) => {
  cJ.init(e, t), Sr.init(e, t);
}), Rte = /* @__PURE__ */ Ze("ZodCIDRv4", (e, t) => {
  fJ.init(e, t), Sr.init(e, t);
}), Mte = /* @__PURE__ */ Ze("ZodCIDRv6", (e, t) => {
  dJ.init(e, t), Sr.init(e, t);
}), Ote = /* @__PURE__ */ Ze("ZodBase64", (e, t) => {
  hJ.init(e, t), Sr.init(e, t);
}), Dte = /* @__PURE__ */ Ze("ZodBase64URL", (e, t) => {
  mJ.init(e, t), Sr.init(e, t);
}), zte = /* @__PURE__ */ Ze("ZodE164", (e, t) => {
  gJ.init(e, t), Sr.init(e, t);
}), Pte = /* @__PURE__ */ Ze("ZodJWT", (e, t) => {
  vJ.init(e, t), Sr.init(e, t);
}), Ite = /* @__PURE__ */ Ze("ZodAny", (e, t) => {
  xJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => zee();
});
function Lte() {
  return /* @__PURE__ */ hee(Ite);
}
const Bte = /* @__PURE__ */ Ze("ZodUnknown", (e, t) => {
  bJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Pee();
});
function OE() {
  return /* @__PURE__ */ pee(Bte);
}
const qte = /* @__PURE__ */ Ze("ZodNever", (e, t) => {
  wJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Dee(e, n, r);
});
function $te(e) {
  return /* @__PURE__ */ mee(qte, e);
}
const Fte = /* @__PURE__ */ Ze("ZodArray", (e, t) => {
  _J.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => qee(e, n, r, i), e.element = t.element, e.min = (n, r) => e.check(/* @__PURE__ */ Ex(n, r)), e.nonempty = (n) => e.check(/* @__PURE__ */ Ex(1, n)), e.max = (n, r) => e.check(/* @__PURE__ */ gP(n, r)), e.length = (n, r) => e.check(/* @__PURE__ */ yP(n, r)), e.unwrap = () => e.element;
});
function R0(e, t) {
  return /* @__PURE__ */ Tee(Fte, e, t);
}
const Ute = /* @__PURE__ */ Ze("ZodObject", (e, t) => {
  CJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => $ee(e, n, r, i), Pn(e, "shape", () => t.shape), e.keyof = () => wk(Object.keys(e._zod.def.shape)), e.catchall = (n) => e.clone({ ...e._zod.def, catchall: n }), e.passthrough = () => e.clone({ ...e._zod.def, catchall: OE() }), e.loose = () => e.clone({ ...e._zod.def, catchall: OE() }), e.strict = () => e.clone({ ...e._zod.def, catchall: $te() }), e.strip = () => e.clone({ ...e._zod.def, catchall: void 0 }), e.extend = (n) => WX(e, n), e.safeExtend = (n) => ZX(e, n), e.merge = (n) => XX(e, n), e.pick = (n) => KX(e, n), e.omit = (n) => YX(e, n), e.partial = (...n) => QX(SP, e, n[0]), e.required = (...n) => JX(CP, e, n[0]);
});
function Tx(e, t) {
  const n = {
    type: "object",
    shape: e ?? {},
    ...qt(t)
  };
  return new Ute(n);
}
const Vte = /* @__PURE__ */ Ze("ZodUnion", (e, t) => {
  EJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Fee(e, n, r, i), e.options = t.options;
});
function Hte(e, t) {
  return new Vte({
    type: "union",
    options: e,
    ...qt(t)
  });
}
const Gte = /* @__PURE__ */ Ze("ZodIntersection", (e, t) => {
  kJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Uee(e, n, r, i);
});
function Kte(e, t) {
  return new Gte({
    type: "intersection",
    left: e,
    right: t
  });
}
const Yte = /* @__PURE__ */ Ze("ZodRecord", (e, t) => {
  TJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Vee(e, n, r, i), e.keyType = t.keyType, e.valueType = t.valueType;
});
function Wte(e, t, n) {
  return new Yte({
    type: "record",
    keyType: e,
    valueType: t,
    ...qt(n)
  });
}
const DE = /* @__PURE__ */ Ze("ZodEnum", (e, t) => {
  AJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (r, i, a) => Iee(e, r, i), e.enum = t.entries, e.options = Object.values(t.entries);
  const n = new Set(Object.keys(t.entries));
  e.extract = (r, i) => {
    const a = {};
    for (const o of r)
      if (n.has(o))
        a[o] = t.entries[o];
      else
        throw new Error(`Key ${o} not found in enum`);
    return new DE({
      ...t,
      checks: [],
      ...qt(i),
      entries: a
    });
  }, e.exclude = (r, i) => {
    const a = { ...t.entries };
    for (const o of r)
      if (n.has(o))
        delete a[o];
      else
        throw new Error(`Key ${o} not found in enum`);
    return new DE({
      ...t,
      checks: [],
      ...qt(i),
      entries: a
    });
  };
});
function wk(e, t) {
  const n = Array.isArray(e) ? Object.fromEntries(e.map((r) => [r, r])) : e;
  return new DE({
    type: "enum",
    entries: n,
    ...qt(t)
  });
}
const Zte = /* @__PURE__ */ Ze("ZodTransform", (e, t) => {
  jJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Bee(e, n), e._zod.parse = (n, r) => {
    if (r.direction === "backward")
      throw new tP(e.constructor.name);
    n.addIssue = (a) => {
      if (typeof a == "string")
        n.issues.push(K0(a, n.value, t));
      else {
        const o = a;
        o.fatal && (o.continue = !1), o.code ?? (o.code = "custom"), o.input ?? (o.input = n.value), o.inst ?? (o.inst = e), n.issues.push(K0(o));
      }
    };
    const i = t.transform(n.value, n);
    return i instanceof Promise ? i.then((a) => (n.value = a, n)) : (n.value = i, n);
  };
});
function Xte(e) {
  return new Zte({
    type: "transform",
    transform: e
  });
}
const SP = /* @__PURE__ */ Ze("ZodOptional", (e, t) => {
  mP.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => wP(e, n, r, i), e.unwrap = () => e._zod.def.innerType;
});
function V6(e) {
  return new SP({
    type: "optional",
    innerType: e
  });
}
const Qte = /* @__PURE__ */ Ze("ZodExactOptional", (e, t) => {
  NJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => wP(e, n, r, i), e.unwrap = () => e._zod.def.innerType;
});
function Jte(e) {
  return new Qte({
    type: "optional",
    innerType: e
  });
}
const ene = /* @__PURE__ */ Ze("ZodNullable", (e, t) => {
  RJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Hee(e, n, r, i), e.unwrap = () => e._zod.def.innerType;
});
function H6(e) {
  return new ene({
    type: "nullable",
    innerType: e
  });
}
const tne = /* @__PURE__ */ Ze("ZodDefault", (e, t) => {
  MJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Kee(e, n, r, i), e.unwrap = () => e._zod.def.innerType, e.removeDefault = e.unwrap;
});
function nne(e, t) {
  return new tne({
    type: "default",
    innerType: e,
    get defaultValue() {
      return typeof t == "function" ? t() : sP(t);
    }
  });
}
const rne = /* @__PURE__ */ Ze("ZodPrefault", (e, t) => {
  OJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Yee(e, n, r, i), e.unwrap = () => e._zod.def.innerType;
});
function ine(e, t) {
  return new rne({
    type: "prefault",
    innerType: e,
    get defaultValue() {
      return typeof t == "function" ? t() : sP(t);
    }
  });
}
const CP = /* @__PURE__ */ Ze("ZodNonOptional", (e, t) => {
  DJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Gee(e, n, r, i), e.unwrap = () => e._zod.def.innerType;
});
function sne(e, t) {
  return new CP({
    type: "nonoptional",
    innerType: e,
    ...qt(t)
  });
}
const ane = /* @__PURE__ */ Ze("ZodCatch", (e, t) => {
  zJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Wee(e, n, r, i), e.unwrap = () => e._zod.def.innerType, e.removeCatch = e.unwrap;
});
function one(e, t) {
  return new ane({
    type: "catch",
    innerType: e,
    catchValue: typeof t == "function" ? t : () => t
  });
}
const lne = /* @__PURE__ */ Ze("ZodPipe", (e, t) => {
  PJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Zee(e, n, r, i), e.in = t.in, e.out = t.out;
});
function G6(e, t) {
  return new lne({
    type: "pipe",
    in: e,
    out: t
    // ...util.normalizeParams(params),
  });
}
const une = /* @__PURE__ */ Ze("ZodReadonly", (e, t) => {
  IJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Xee(e, n, r, i), e.unwrap = () => e._zod.def.innerType;
});
function cne(e) {
  return new une({
    type: "readonly",
    innerType: e
  });
}
const fne = /* @__PURE__ */ Ze("ZodCustom", (e, t) => {
  LJ.init(e, t), Lr.init(e, t), e._zod.processJSONSchema = (n, r, i) => Lee(e, n);
});
function dne(e, t = {}) {
  return /* @__PURE__ */ Aee(fne, e, t);
}
function hne(e) {
  return /* @__PURE__ */ jee(e);
}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */
var pne = /* @__PURE__ */ (function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var a in i) i.hasOwnProperty(a) && (r[a] = i[a]);
    }, e(t, n);
  };
  return function(t, n) {
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
})(), mne = Object.prototype.hasOwnProperty;
function gne(e, t) {
  return mne.call(e, t);
}
function yne(e) {
  if (Array.isArray(e)) {
    for (var t = new Array(e.length), n = 0; n < t.length; n++)
      t[n] = "" + n;
    return t;
  }
  if (Object.keys)
    return Object.keys(e);
  var r = [];
  for (var i in e)
    gne(e, i) && r.push(i);
  return r;
}
function am(e) {
  switch (typeof e) {
    case "object":
      return JSON.parse(JSON.stringify(e));
    //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5
    case "undefined":
      return null;
    //this is how JSON.stringify behaves for array items
    default:
      return e;
  }
}
function zE(e) {
  for (var t = 0, n = e.length, r; t < n; ) {
    if (r = e.charCodeAt(t), r >= 48 && r <= 57) {
      t++;
      continue;
    }
    return !1;
  }
  return !0;
}
function vne(e) {
  return e.replace(/~1/g, "/").replace(/~0/g, "~");
}
function PE(e) {
  if (e === void 0)
    return !0;
  if (e) {
    if (Array.isArray(e)) {
      for (var t = 0, n = e.length; t < n; t++)
        if (PE(e[t]))
          return !0;
    } else if (typeof e == "object") {
      for (var r = yne(e), i = r.length, a = 0; a < i; a++)
        if (PE(e[r[a]]))
          return !0;
    }
  }
  return !1;
}
function K6(e, t) {
  var n = [e];
  for (var r in t) {
    var i = typeof t[r] == "object" ? JSON.stringify(t[r], null, 2) : t[r];
    typeof i < "u" && n.push(r + ": " + i);
  }
  return n.join(`
`);
}
var xne = (
  /** @class */
  (function(e) {
    pne(t, e);
    function t(n, r, i, a, o) {
      var u = this.constructor, c = e.call(this, K6(n, { name: r, index: i, operation: a, tree: o })) || this;
      return c.name = r, c.index = i, c.operation = a, c.tree = o, Object.setPrototypeOf(c, u.prototype), c.message = K6(n, { name: r, index: i, operation: a, tree: o }), c;
    }
    return t;
  })(Error)
), Hr = xne, qp = {
  add: function(e, t, n) {
    return e[t] = this.value, { newDocument: n };
  },
  remove: function(e, t, n) {
    var r = e[t];
    return delete e[t], { newDocument: n, removed: r };
  },
  replace: function(e, t, n) {
    var r = e[t];
    return e[t] = this.value, { newDocument: n, removed: r };
  },
  move: function(e, t, n) {
    var r = IE(n, this.path);
    r && (r = am(r));
    var i = M0(n, { op: "remove", path: this.from }).removed;
    return M0(n, { op: "add", path: this.path, value: i }), { newDocument: n, removed: r };
  },
  copy: function(e, t, n) {
    var r = IE(n, this.from);
    return M0(n, { op: "add", path: this.path, value: am(r) }), { newDocument: n };
  },
  test: function(e, t, n) {
    return { newDocument: n, test: Ax(e[t], this.value) };
  },
  _get: function(e, t, n) {
    return this.value = e[t], { newDocument: n };
  }
}, bne = {
  add: function(e, t, n) {
    return zE(t) ? e.splice(t, 0, this.value) : e[t] = this.value, { newDocument: n, index: t };
  },
  remove: function(e, t, n) {
    var r = e.splice(t, 1);
    return { newDocument: n, removed: r[0] };
  },
  replace: function(e, t, n) {
    var r = e[t];
    return e[t] = this.value, { newDocument: n, removed: r };
  },
  move: qp.move,
  copy: qp.copy,
  test: qp.test,
  _get: qp._get
};
function IE(e, t) {
  if (t == "")
    return e;
  var n = { op: "_get", path: t };
  return M0(e, n), n.value;
}
function M0(e, t, n, r, i, a) {
  if (n === void 0 && (n = !1), r === void 0 && (r = !0), i === void 0 && (i = !0), a === void 0 && (a = 0), n && (typeof n == "function" ? n(t, 0, e, t.path) : LE(t, 0)), t.path === "") {
    var o = { newDocument: e };
    if (t.op === "add")
      return o.newDocument = t.value, o;
    if (t.op === "replace")
      return o.newDocument = t.value, o.removed = e, o;
    if (t.op === "move" || t.op === "copy")
      return o.newDocument = IE(e, t.from), t.op === "move" && (o.removed = e), o;
    if (t.op === "test") {
      if (o.test = Ax(e, t.value), o.test === !1)
        throw new Hr("Test operation failed", "TEST_OPERATION_FAILED", a, t, e);
      return o.newDocument = e, o;
    } else {
      if (t.op === "remove")
        return o.removed = e, o.newDocument = null, o;
      if (t.op === "_get")
        return t.value = e, o;
      if (n)
        throw new Hr("Operation `op` property is not one of operations defined in RFC-6902", "OPERATION_OP_INVALID", a, t, e);
      return o;
    }
  } else {
    r || (e = am(e));
    var u = t.path || "", c = u.split("/"), f = e, p = 1, g = c.length, x = void 0, b = void 0, _ = void 0;
    for (typeof n == "function" ? _ = n : _ = LE; ; ) {
      if (b = c[p], b && b.indexOf("~") != -1 && (b = vne(b)), i && (b == "__proto__" || b == "prototype" && p > 0 && c[p - 1] == "constructor"))
        throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");
      if (n && x === void 0 && (f[b] === void 0 ? x = c.slice(0, p).join("/") : p == g - 1 && (x = t.path), x !== void 0 && _(t, 0, e, x)), p++, Array.isArray(f)) {
        if (b === "-")
          b = f.length;
        else {
          if (n && !zE(b))
            throw new Hr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index", "OPERATION_PATH_ILLEGAL_ARRAY_INDEX", a, t, e);
          zE(b) && (b = ~~b);
        }
        if (p >= g) {
          if (n && t.op === "add" && b > f.length)
            throw new Hr("The specified index MUST NOT be greater than the number of elements in the array", "OPERATION_VALUE_OUT_OF_BOUNDS", a, t, e);
          var o = bne[t.op].call(t, f, b, e);
          if (o.test === !1)
            throw new Hr("Test operation failed", "TEST_OPERATION_FAILED", a, t, e);
          return o;
        }
      } else if (p >= g) {
        var o = qp[t.op].call(t, f, b, e);
        if (o.test === !1)
          throw new Hr("Test operation failed", "TEST_OPERATION_FAILED", a, t, e);
        return o;
      }
      if (f = f[b], n && p < g && (!f || typeof f != "object"))
        throw new Hr("Cannot perform operation at the desired path", "OPERATION_PATH_UNRESOLVABLE", a, t, e);
    }
  }
}
function EP(e, t, n, r, i) {
  if (r === void 0 && (r = !0), i === void 0 && (i = !0), n && !Array.isArray(t))
    throw new Hr("Patch sequence must be an array", "SEQUENCE_NOT_AN_ARRAY");
  r || (e = am(e));
  for (var a = new Array(t.length), o = 0, u = t.length; o < u; o++)
    a[o] = M0(e, t[o], n, !0, i, o), e = a[o].newDocument;
  return a.newDocument = e, a;
}
function LE(e, t, n, r) {
  if (typeof e != "object" || e === null || Array.isArray(e))
    throw new Hr("Operation is not an object", "OPERATION_NOT_AN_OBJECT", t, e, n);
  if (qp[e.op]) {
    if (typeof e.path != "string")
      throw new Hr("Operation `path` property is not a string", "OPERATION_PATH_INVALID", t, e, n);
    if (e.path.indexOf("/") !== 0 && e.path.length > 0)
      throw new Hr('Operation `path` property must start with "/"', "OPERATION_PATH_INVALID", t, e, n);
    if ((e.op === "move" || e.op === "copy") && typeof e.from != "string")
      throw new Hr("Operation `from` property is not present (applicable in `move` and `copy` operations)", "OPERATION_FROM_REQUIRED", t, e, n);
    if ((e.op === "add" || e.op === "replace" || e.op === "test") && e.value === void 0)
      throw new Hr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)", "OPERATION_VALUE_REQUIRED", t, e, n);
    if ((e.op === "add" || e.op === "replace" || e.op === "test") && PE(e.value))
      throw new Hr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)", "OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED", t, e, n);
    if (n) {
      if (e.op == "add") {
        var i = e.path.split("/").length, a = r.split("/").length;
        if (i !== a + 1 && i !== a)
          throw new Hr("Cannot perform an `add` operation at the desired path", "OPERATION_PATH_CANNOT_ADD", t, e, n);
      } else if (e.op === "replace" || e.op === "remove" || e.op === "_get") {
        if (e.path !== r)
          throw new Hr("Cannot perform the operation at a path that does not exist", "OPERATION_PATH_UNRESOLVABLE", t, e, n);
      } else if (e.op === "move" || e.op === "copy") {
        var o = { op: "_get", path: e.from, value: void 0 }, u = kP([o], n);
        if (u && u.name === "OPERATION_PATH_UNRESOLVABLE")
          throw new Hr("Cannot perform the operation from a path that does not exist", "OPERATION_FROM_UNRESOLVABLE", t, e, n);
      }
    }
  } else throw new Hr("Operation `op` property is not one of operations defined in RFC-6902", "OPERATION_OP_INVALID", t, e, n);
}
function kP(e, t, n) {
  try {
    if (!Array.isArray(e))
      throw new Hr("Patch sequence must be an array", "SEQUENCE_NOT_AN_ARRAY");
    if (t)
      EP(am(t), am(e), n || !0);
    else {
      n = n || LE;
      for (var r = 0; r < e.length; r++)
        n(e[r], r, t, void 0);
    }
  } catch (i) {
    if (i instanceof Hr)
      return i;
    throw i;
  }
}
function Ax(e, t) {
  if (e === t)
    return !0;
  if (e && t && typeof e == "object" && typeof t == "object") {
    var n = Array.isArray(e), r = Array.isArray(t), i, a, o;
    if (n && r) {
      if (a = e.length, a != t.length)
        return !1;
      for (i = a; i-- !== 0; )
        if (!Ax(e[i], t[i]))
          return !1;
      return !0;
    }
    if (n != r)
      return !1;
    var u = Object.keys(e);
    if (a = u.length, a !== Object.keys(t).length)
      return !1;
    for (i = a; i-- !== 0; )
      if (!t.hasOwnProperty(u[i]))
        return !1;
    for (i = a; i-- !== 0; )
      if (o = u[i], !Ax(e[o], t[o]))
        return !1;
    return !0;
  }
  return e !== e && t !== t;
}
const wne = Tx({
  op: wk(["add", "remove", "replace", "move", "copy", "test"]),
  path: Zp(),
  value: Lte().optional(),
  from: Zp().optional()
}), _ne = Tx({
  name: Zp(),
  type: wk(["char", "loc", "item", "concept", "unknown"]),
  aliases: R0(Zp()).optional(),
  profile: Wte(Zp(), OE()).optional()
}), Sne = Tx({
  entities: R0(_ne).optional(),
  patches: R0(Tx({
    name: Zp(),
    ops: R0(wne)
  })).optional()
});
class _k {
  constructor(t) {
    yt(this, "config");
    yt(this, "isExtracting", !1);
    this.config = { ...MD, ...t };
  }
  /**
   * 
   */
  updateConfig(t) {
    this.config = { ...this.config, ...t };
  }
  /**
   * 
   */
  getConfig() {
    return { ...this.config };
  }
  /**
   * 
   * V0.9.1:  SummarizerService 
   */
  shouldTriggerOnFloor(t) {
    return !this.config.enabled || this.config.trigger !== "floor" ? !1 : t > 0 && t % this.config.floorInterval === 0;
  }
  /**
   * 
   * V0.9.1:  chatHistory  engramGraph
   *
   * @param chatHistory 
   * @param floor 
   * @param manual 
   */
  async extractFromChat(t, n, r = !1) {
    var i, a;
    if (this.isExtracting)
      return pe.warn(qe.MEMORY_ENTITY, ""), null;
    this.isExtracting = !0, pe.info(qe.MEMORY_ENTITY, ` ( ${n})`);
    try {
      const u = await Zi.getState().getAllEntities(), c = u.map((N) => ({
        name: N.name,
        type: N.type,
        aliases: N.aliases || []
      })), p = (((i = tt.get("apiSettings")) == null ? void 0 : i.promptTemplates) || []).find((N) => N.category === "entity_extraction" && N.enabled), g = (p == null ? void 0 : p.systemPrompt) || TD, b = ((p == null ? void 0 : p.userPromptTemplate) || `

****:
{{chatHistory}}

****:
{{existingEntities}}

---
 JSON `).replace("{{chatHistory}}", t).replace("{{existingEntities}}", JSON.stringify(c, null, 2)).replace("{{worldbookContext}}", Za.cachedWorldbookContext || ""), _ = Xs.logSend({
        type: "entity_extraction",
        systemPrompt: g,
        userPrompt: b,
        floorRange: [n, n],
        // 
        model: Qx(),
        character: (a = tm()) == null ? void 0 : a.name
      }), E = Date.now(), k = await Qd.generate({
        systemPrompt: g,
        userPrompt: b
      });
      if (Xs.logReceive(_, {
        response: k.content,
        status: k.success ? "success" : "error",
        error: k.error,
        duration: Date.now() - E
      }), !k.success || !k.content)
        return pe.error(qe.MEMORY_ENTITY, "LLM ", { error: k.error }), r && Zt.error("LLM ", "Engram"), { success: !1, newEntities: [], updatedEntities: [], error: k.error };
      const T = dk.parse(k.content);
      if (!T)
        return pe.error(qe.MEMORY_ENTITY, "JSON "), r && Zt.error("", "Engram"), { success: !1, newEntities: [], updatedEntities: [], error: "JSON parse failed" };
      const R = await this.saveEntities(T, u);
      return await Vd.updateState({ last_extracted_floor: n }), pe.success(qe.MEMORY_ENTITY, "", {
        floor: n,
        newCount: R.newEntities.length,
        updatedCount: R.updatedEntities.length,
        duration: Date.now() - E
      }), r && Zt.success(
        ` ${R.newEntities.length} `,
        "Engram"
      ), R;
    } catch (o) {
      const u = o instanceof Error ? o.message : String(o);
      return pe.error(qe.MEMORY_ENTITY, "", { error: u }), r && Zt.error(`: ${u}`, "Engram "), { success: !1, newEntities: [], updatedEntities: [], error: u };
    } finally {
      this.isExtracting = !1;
    }
  }
  /**
   * 
   * V0.9.9:  MacroService 
   */
  async extractByRange(t, n = !1) {
    const r = Za.getChatHistory(t);
    return r ? this.extractFromChat(r, t[1], n) : (pe.warn(qe.MEMORY_ENTITY, "", { range: t }), null);
  }
  /**
   * 
   */
  async extractManual() {
    const t = Za.getChatHistory(), r = (await Vd.getState()).last_summarized_floor || 0;
    return this.extractFromChat(t, r, !0);
  }
  /**
   * 
   * V0.9.4:  profile 
   */
  /**
   *  (V0.9.9: Support JSON Patch & Zod Validation)
   */
  async saveEntities(t, n) {
    const r = Zi.getState(), i = [], a = [];
    let o;
    try {
      o = Sne.parse(t);
    } catch (u) {
      const c = u instanceof Error ? u.message : String(u);
      return { success: !1, newEntities: [], updatedEntities: [], error: `Zod Validation Failed: ${c}` };
    }
    if (o.entities)
      for (const u of o.entities) {
        if (this.resolveEntity(u.name, u.aliases || [], n)) {
          pe.warn(qe.MEMORY_ENTITY, "Skipping duplicate creation for existing entity", { name: u.name });
          continue;
        }
        const f = {
          char: Md.Character,
          loc: Md.Location,
          item: Md.Item,
          concept: Md.Concept,
          unknown: Md.Unknown
        }, p = this.profileToYaml(u.name, u.type, u.profile || {}), g = await r.saveEntity({
          name: u.name,
          type: f[u.type] || Md.Unknown,
          description: p,
          aliases: u.aliases || [],
          profile: u.profile || {}
        });
        i.push(g);
      }
    if (o.patches)
      for (const u of o.patches) {
        const c = n.find((f) => f.name === u.name || f.id === u.name);
        if (!c) {
          pe.warn(qe.MEMORY_ENTITY, "Patch target not found", { name: u.name });
          continue;
        }
        try {
          const f = JSON.parse(JSON.stringify(c)), p = u.ops, g = kP(p, f);
          if (g)
            throw new Error(`Invalid patch: ${g.message}`);
          EP(f, p);
          const x = this.profileToYaml(f.name, f.type, f.profile || {}), b = {
            profile: f.profile,
            aliases: f.aliases,
            description: x,
            // Update other fields if patched
            name: f.name,
            type: f.type
          };
          await r.updateEntity(c.id, b), a.push({ ...c, ...b });
        } catch (f) {
          pe.error(qe.MEMORY_ENTITY, `Failed to apply patch for ${u.name}`, { error: f });
        }
      }
    return {
      success: !0,
      newEntities: i,
      updatedEntities: a
    };
  }
  /**
   *  profile  YAML  (For Model)
   * V0.9.4: 
   */
  profileToYaml(t, n, r) {
    const i = [`${t} (${n})`];
    for (const [a, o] of Object.entries(r))
      if (a === "relations" && Array.isArray(o)) {
        i.push(":");
        for (const u of o) {
          const c = u.description ? ` - ${u.description}` : "";
          i.push(`  - ${u.target}: ${u.type}${c}`);
        }
      } else typeof o == "string" ? i.push(`${a}: ${o}`) : Array.isArray(o) && i.push(`${a}: ${o.join(", ")}`);
    return i.join(`
`);
  }
  /**
   * 
   */
  resolveEntity(t, n, r) {
    const i = r.find((o) => o.name === t);
    if (i) return i;
    const a = r.find((o) => {
      var u;
      return (u = o.aliases) == null ? void 0 : u.includes(t);
    });
    if (a) return a;
    for (const o of n) {
      const u = r.find(
        (c) => {
          var f;
          return c.name === o || ((f = c.aliases) == null ? void 0 : f.includes(o));
        }
      );
      if (u) return u;
    }
    return null;
  }
  /**
   *  (UI )
   * V0.9.1: 
   */
  async getStatus() {
    const n = await Zi.getState().getAllEntities(), r = await Vd.getState();
    return {
      enabled: this.config.enabled,
      trigger: this.config.trigger,
      floorInterval: this.config.floorInterval,
      lastExtractedFloor: r.last_extracted_floor,
      entityCount: n.length,
      isExtracting: this.isExtracting
    };
  }
}
const Du = new _k(), Cne = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  EntityBuilder: _k,
  entityBuilder: Du
}, Symbol.toStringTag, { value: "Module" })), mw = {
  openai: "https://api.openai.com/v1/embeddings",
  ollama: "http://localhost:11434/api/embeddings",
  vllm: "http://localhost:8000/v1/embeddings",
  cohere: "https://api.cohere.ai/v1/embed",
  jina: "https://api.jina.ai/v1/embeddings",
  voyage: "https://api.voyageai.com/v1/embeddings"
}, Ene = 5;
class kne {
  constructor() {
    yt(this, "config", null);
    yt(this, "concurrency", Ene);
    yt(this, "stopSignal", !1);
  }
  /**
   * 
   */
  setConfig(t) {
    this.config = t;
  }
  /**
   * 
   */
  setConcurrency(t) {
    this.concurrency = Math.max(1, Math.min(20, t));
  }
  /**
   * 
   */
  stop() {
    this.stopSignal = !0;
  }
  /**
   * 
   */
  reset() {
    this.stopSignal = !1;
  }
  // ====================  ====================
  /**
   * 
   */
  async embed(t) {
    if (!this.config)
      throw new Error("EmbeddingService: config not set");
    const n = await this.embedBatch([{ id: "single", text: t }]);
    if (n[0].error)
      throw new Error(n[0].error);
    return n[0].embedding;
  }
  /**
   *  ()
   */
  async embedBatch(t, n) {
    if (!this.config)
      throw new Error("EmbeddingService: config not set");
    this.stopSignal = !1;
    const r = new Array(t.length);
    let i = 0, a = 0;
    const o = async (u) => {
      if (u >= t.length || this.stopSignal) return;
      const c = t[u];
      try {
        const f = await this.callEmbeddingAPI(c.text);
        r[u] = { id: c.id, embedding: f };
      } catch (f) {
        a++, r[u] = { id: c.id, embedding: [], error: f.message }, pe.warn(qe.RAG_EMBED, `: ${c.id}`, { error: f.message });
      } finally {
        i++, n == null || n(i, t.length, a);
      }
    };
    for (let u = 0; u < t.length && !this.stopSignal; u += this.concurrency) {
      const c = Array.from(
        { length: Math.min(this.concurrency, t.length - u) },
        (f, p) => o(u + p)
      );
      await Promise.all(c);
    }
    return r;
  }
  /**
   *  API
   */
  async callEmbeddingAPI(t) {
    const n = this.config;
    switch (n.source) {
      case "openai":
      case "custom":
      case "vllm":
      case "jina":
      case "voyage":
        return this.callOpenAICompatible(t, n);
      case "ollama":
        return this.callOllama(t, n);
      case "cohere":
        return this.callCohere(t, n);
      case "transformers":
        return this.callTransformers(t, n);
      default:
        throw new Error(`Unsupported vector source: ${n.source}`);
    }
  }
  /**
   * OpenAI  API 
   */
  async callOpenAICompatible(t, n) {
    let r = n.apiUrl || mw[n.source] || "";
    if (r && (r = r.replace(/\/+$/, "")), n.autoSuffix !== !1 && n.source !== "ollama" && (r.includes("/embeddings") || (r = `${r}/v1/embeddings`)), !r)
      throw new Error("API endpoint not configured");
    const i = {
      "Content-Type": "application/json"
    };
    n.apiKey && (i.Authorization = `Bearer ${n.apiKey}`);
    const a = {
      model: n.model || "text-embedding-3-small",
      input: t
    };
    n.dimensions && (a.dimensions = n.dimensions);
    try {
      const o = await fetch(r, {
        method: "POST",
        headers: i,
        body: JSON.stringify(a)
      });
      if (!o.ok) {
        const c = await o.text();
        throw new Error(`API error ${o.status} at ${r}: ${c}`);
      }
      const u = await o.json();
      if (!u.data || u.data.length === 0)
        throw new Error("No embedding data returned");
      return u.data[0].embedding;
    } catch (o) {
      throw o.message.includes("at http") ? o : new Error(`Request to ${r} failed: ${o.message}`);
    }
  }
  /**
   * Ollama API 
   */
  async callOllama(t, n) {
    const r = n.apiUrl || mw.ollama, i = r.includes("/api/embed") && !r.includes("/api/embeddings"), a = {
      model: n.model || "nomic-embed-text"
    };
    i ? a.input = t : a.prompt = t;
    const o = await fetch(r, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(a)
    });
    if (!o.ok) {
      const c = await o.text();
      throw new Error(`Ollama error ${o.status}: ${c}`);
    }
    const u = await o.json();
    if (u.embedding)
      return u.embedding;
    if (u.embeddings && u.embeddings.length > 0)
      return u.embeddings[0];
    throw new Error(`No embedding data returned in Ollama response. Keys: ${Object.keys(u).join(", ")}`);
  }
  /**
   * Cohere API 
   */
  async callCohere(t, n) {
    const r = mw.cohere, i = await fetch(r, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${n.apiKey}`
      },
      body: JSON.stringify({
        model: n.model || "embed-multilingual-v3.0",
        texts: [t],
        input_type: "search_document"
      })
    });
    if (!i.ok) {
      const o = await i.text();
      throw new Error(`Cohere error ${i.status}: ${o}`);
    }
    const a = await i.json();
    if (!a.embeddings || a.embeddings.length === 0)
      throw new Error("No embedding data returned");
    return a.embeddings[0];
  }
  /**
   *  Transformers  ()
   */
  async callTransformers(t, n) {
    throw new Error("Transformers embedding not yet implemented");
  }
  // ==================== EventNode  ====================
  /**
   *  EventNode 
   * @param onProgress 
   * @returns 
   */
  async embedUnprocessedEvents(t) {
    const n = fi();
    if (!n)
      throw new Error("No current chat");
    const r = Fl(n), i = await r.events.filter((f) => !f.is_embedded && !f.embedding).toArray();
    if (i.length === 0)
      return { success: 0, failed: 0 };
    pe.info(qe.RAG_EMBED, ` ${i.length} `);
    const a = i.map((f) => ({
      id: f.id,
      text: f.summary
    })), o = await this.embedBatch(a, t);
    let u = 0, c = 0;
    for (const f of o) {
      if (f.error || f.embedding.length === 0) {
        c++;
        continue;
      }
      await r.events.update(f.id, {
        embedding: f.embedding,
        is_embedded: !0
      }), u++;
    }
    return pe.info(qe.RAG_EMBED, `: ${u} , ${c} `), { success: u, failed: c };
  }
  /**
   * 
   */
  async embedEvents(t, n) {
    if (t.length === 0)
      return { success: 0, failed: 0 };
    const r = fi();
    if (!r) throw new Error("No current chat");
    const i = Fl(r), a = t.map((f) => ({
      id: f.id,
      text: f.summary
    })), o = await this.embedBatch(a, n);
    let u = 0, c = 0;
    for (const f of o) {
      if (f.error || f.embedding.length === 0) {
        c++;
        continue;
      }
      await i.events.update(f.id, {
        embedding: f.embedding,
        is_embedded: !0
      }), u++;
    }
    return { success: u, failed: c };
  }
  /**
   *  EventNode 
   */
  async embedEvent(t) {
    const n = await this.embed(t.summary), r = fi();
    if (r) {
      const i = tf(r);
      i && await i.events.update(t.id, {
        embedding: n,
        is_embedded: !0
      });
    }
    return n;
  }
  /**
   *  ()
   */
  async reembedAllEvents(t) {
    const n = fi();
    if (!n)
      throw new Error("No current chat");
    const r = Fl(n), i = await r.events.toArray();
    if (i.length === 0)
      return { success: 0, failed: 0 };
    pe.info(qe.RAG_EMBED, ` ${i.length} `);
    for (const a of i)
      await r.events.update(a.id, {
        embedding: void 0,
        is_embedded: !1
      });
    return this.embedUnprocessedEvents(t);
  }
  // ====================  ====================
  /**
   * 
   */
  cosineSimilarity(t, n) {
    if (!t || !n || t.length !== n.length) return 0;
    let r = 0, i = 0, a = 0;
    for (let u = 0; u < t.length; u++)
      r += t[u] * n[u], i += t[u] * t[u], a += n[u] * n[u];
    const o = Math.sqrt(i) * Math.sqrt(a);
    return o === 0 ? 0 : r / o;
  }
  /**
   * 
   */
  async getEmbeddingStats() {
    const t = fi();
    if (!t)
      return { total: 0, embedded: 0, pending: 0 };
    const n = tf(t);
    if (!n)
      return { total: 0, embedded: 0, pending: 0 };
    const r = await n.events.toArray(), i = r.filter((a) => a.is_embedded).length;
    return {
      total: r.length,
      embedded: i,
      pending: r.length - i
    };
  }
}
const Gr = new kne(), Ld = class Ld {
  constructor() {
  }
  static getInstance() {
    return Ld.instance || (Ld.instance = new Ld()), Ld.instance;
  }
  /**
   *  Rerank 
   */
  getConfig() {
    const t = tt.get("apiSettings");
    return (t == null ? void 0 : t.rerankConfig) || null;
  }
  /**
   *  Rerank 
   */
  isEnabled() {
    const t = this.getConfig();
    return !!(t != null && t.enabled && t.url && t.model);
  }
  /**
   *  Rerank API 
   *
   * @param query 
   * @param documents 
   * @returns 
   */
  async rerank(t, n) {
    var i;
    const r = this.getConfig();
    if (!(r != null && r.enabled))
      return pe.debug(qe.RAG_RERANK, "Rerank "), n.map((a, o) => ({ index: o, relevance_score: 0 }));
    if (!r.url || !r.model)
      return pe.warn(qe.RAG_RERANK, "Rerank ", { url: r.url, model: r.model }), n.map((a, o) => ({ index: o, relevance_score: 0 }));
    if (n.length === 0)
      return [];
    try {
      let a = r.url.replace(/\/+$/, "");
      r.autoSuffix !== !1 && !a.endsWith("/rerank") && (a = `${a}/rerank`), pe.debug(qe.RAG_RERANK, " Rerank API", {
        endpoint: a,
        model: r.model,
        queryLength: t.length,
        documentCount: n.length
      });
      const o = await fetch(a, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          ...r.apiKey && {
            Authorization: `Bearer ${r.apiKey}`
          }
        },
        body: JSON.stringify({
          model: r.model,
          query: t,
          documents: n,
          top_n: r.topN || 5
        })
      });
      if (!o.ok) {
        const f = await o.text();
        throw new Error(`Rerank API  (${o.status}): ${f}`);
      }
      const u = await o.json(), c = u.results || u.data || [];
      return pe.info(qe.RAG_RERANK, "Rerank ", {
        resultCount: c.length,
        topScore: (i = c[0]) == null ? void 0 : i.relevance_score
      }), c.sort((f, p) => p.relevance_score - f.relevance_score);
    } catch (a) {
      const o = a instanceof Error ? a.message : "";
      return pe.error(qe.RAG_RERANK, "Rerank ", { error: o }), n.map((u, c) => ({ index: c, relevance_score: 0 }));
    }
  }
  /**
   *  (alpha)
   * 0 = 1 =  Rerank 
   */
  getHybridAlpha() {
    const t = this.getConfig();
    return (t == null ? void 0 : t.hybridAlpha) ?? 0.5;
  }
};
yt(Ld, "instance");
let BE = Ld;
const gw = BE.getInstance();
function Tne(e, t, n) {
  return e == null && t == null ? 0 : e == null ? t ?? 0 : t == null ? e : (1 - n) * e + n * t;
}
function qE(e, t) {
  var r;
  const n = e.map((i) => ({
    ...i,
    hybridScore: Tne(
      i.embeddingScore,
      i.rerankScore,
      t
    )
  }));
  return n.sort((i, a) => (a.hybridScore ?? 0) - (i.hybridScore ?? 0)), pe.debug(qe.RAG_RETRIEVE, "", {
    candidateCount: n.length,
    topScore: (r = n[0]) == null ? void 0 : r.hybridScore,
    alpha: t
  }), n;
}
function Ane(e, t, n, r) {
  for (const a of t) {
    const o = n[a.index];
    if (o && e.has(o.id)) {
      const u = e.get(o.id);
      u.rerankScore = a.relevance_score;
    }
  }
  const i = Array.from(e.values());
  return qE(i, r);
}
function jne(e, t, n) {
  if (!n.enabled)
    return e;
  const r = e.map((i) => {
    const a = t.getStickyPenalty(i.id, n), u = (i.hybridScore ?? i.embeddingScore ?? 0) * (1 - a);
    return {
      ...i,
      hybridScore: u,
      stickyPenalty: a,
      isSticky: a > 0
    };
  });
  return r.sort((i, a) => (a.hybridScore ?? 0) - (i.hybridScore ?? 0)), pe.debug(qe.RAG_RETRIEVE, "", {
    totalCandidates: e.length,
    stickyCount: r.filter((i) => i.isSticky).length,
    maxPenalty: Math.max(...r.map((i) => i.stickyPenalty ?? 0))
  }), r;
}
class Nne {
  constructor() {
    yt(this, "logs", []);
    yt(this, "maxLogs", 50);
    yt(this, "subscribers", /* @__PURE__ */ new Set());
  }
  /**
   * 
   */
  log(t) {
    const n = {
      id: `recall-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`,
      timestamp: Date.now(),
      ...t
    };
    this.logs.unshift(n), this.logs.length > this.maxLogs && (this.logs = this.logs.slice(0, this.maxLogs)), pe.debug("RecallLogService", "", {
      query: t.query.substring(0, 50),
      resultCount: t.results.length
    }), this.notifySubscribers();
  }
  /**
   * 
   */
  getLogs() {
    return [...this.logs];
  }
  /**
   * 
   */
  clear() {
    this.logs = [], this.notifySubscribers();
  }
  /**
   * 
   */
  subscribe(t) {
    return this.subscribers.add(t), () => this.subscribers.delete(t);
  }
  /**
   * 
   */
  notifySubscribers() {
    const t = this.getLogs();
    this.subscribers.forEach((n) => n(t));
  }
  /**
   *  JSON 
   */
  exportLogs() {
    const { VERSION: t } = require("@/constants"), n = {
      version: t,
      exportedAt: Date.now(),
      logs: this.getLogs()
    }, r = new Blob([JSON.stringify(n, null, 2)], { type: "application/json" }), i = URL.createObjectURL(r), a = document.createElement("a");
    a.href = i, a.download = `engram_debug_log_${(/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-")}.json`, document.body.appendChild(a), a.click(), document.body.removeChild(a), URL.revokeObjectURL(i);
  }
}
const tx = new Nne();
class Rne {
  constructor() {
    yt(this, "shortTermMemory", /* @__PURE__ */ new Map());
    yt(this, "currentRound", 0);
    yt(this, "config", Jx);
    pe.debug(qe.RAG_CACHE, "");
  }
  /**
   * 
   */
  setConfig(t) {
    this.config = t;
  }
  /**
   * 
   */
  getConfig() {
    return this.config;
  }
  /**
   * 
   */
  nextRound() {
    this.currentRound++, pe.debug(qe.RAG_CACHE, ` ${this.currentRound} `);
  }
  /**
   * 
   */
  getCurrentRound() {
    return this.currentRound;
  }
  /**
   * 
   *
   * @param candidates 
   * @returns 
   */
  process(t) {
    if (!this.config.enabled)
      return t.slice(0, this.config.workingLimit).map((a) => ({
        id: a.id,
        strength: a.score,
        baseScore: a.score,
        firstRound: this.currentRound,
        lastRound: this.currentRound,
        recallCount: 1,
        tier: "working"
      }));
    const n = new Set(t.map((a) => a.id)), r = new Map(t.map((a) => [a.id, a]));
    this.shouldSoftReset(t) && (pe.info(qe.RAG_CACHE, " softReset"), this.softReset());
    for (const [a, o] of this.shortTermMemory)
      n.has(a) ? (r.get(a), o.strength = this.reinforce(o.strength), o.lastRound = this.currentRound, o.recallCount++, pe.debug(qe.RAG_CACHE, `: ${a}, strength=${o.strength.toFixed(3)}`)) : o.strength = this.decay(o.strength);
    for (const a of t)
      if (!this.shortTermMemory.has(a.id)) {
        const o = {
          id: a.id,
          strength: a.score,
          baseScore: a.score,
          firstRound: this.currentRound,
          lastRound: this.currentRound,
          recallCount: 1,
          tier: "shortTerm"
        };
        this.shortTermMemory.set(a.id, o), pe.debug(qe.RAG_CACHE, `: ${a.id}, score=${a.score.toFixed(3)}`);
      }
    this.evict(), this.enforceShortTermLimit();
    const i = this.selectWorkingMemory();
    return pe.info(qe.RAG_CACHE, "", {
      round: this.currentRound,
      shortTermSize: this.shortTermMemory.size,
      workingSize: i.length
    }), i;
  }
  /**
   * 
   */
  reinforce(t) {
    const n = this.config.reinforceFactor;
    return Math.min(1, t + n * (1 - t));
  }
  /**
   * 
   */
  decay(t) {
    return Math.max(0, t - this.config.decayRate);
  }
  /**
   * 
   */
  evict() {
    const t = this.config.evictionThreshold, n = [];
    for (const [r, i] of this.shortTermMemory)
      i.strength < t && n.push(r);
    for (const r of n)
      this.shortTermMemory.delete(r), pe.debug(qe.RAG_CACHE, `: ${r}`);
    n.length > 0 && pe.debug(qe.RAG_CACHE, ` ${n.length} `);
  }
  /**
   * 
   */
  enforceShortTermLimit() {
    const t = this.config.shortTermLimit;
    if (this.shortTermMemory.size <= t) return;
    const r = Array.from(this.shortTermMemory.values()).sort((i, a) => i.strength - a.strength).slice(0, this.shortTermMemory.size - t);
    for (const i of r)
      this.shortTermMemory.delete(i.id);
    pe.debug(qe.RAG_CACHE, ` ${r.length} `);
  }
  /**
   * 
   */
  selectWorkingMemory() {
    const t = this.config.workingLimit, n = Array.from(this.shortTermMemory.values()).sort((r, i) => i.strength - r.strength).slice(0, t);
    for (const r of n)
      r.tier = "working";
    return n;
  }
  /**
   *  softReset
   */
  shouldSoftReset(t) {
    if (this.shortTermMemory.size === 0 || t.length === 0) return !1;
    const n = new Set(t.map((f) => f.id));
    let r = 0, i = 0, a = 0;
    for (const [f, p] of this.shortTermMemory)
      if (n.has(f)) {
        r++, i += p.baseScore;
        const g = t.find((x) => x.id === f);
        g && (a += g.score);
      }
    if (r === 0)
      return !0;
    const o = i / r;
    return a / r / o < this.config.contextSwitchThreshold;
  }
  /**
   * 
   */
  softReset() {
    this.shortTermMemory.clear(), pe.info(qe.RAG_CACHE, "softReset: ");
  }
  /**
   * 
   */
  hardReset() {
    this.shortTermMemory.clear(), this.currentRound = 0, pe.info(qe.RAG_CACHE, "hardReset: ");
  }
  /**
   * /UI
   */
  getShortTermSnapshot() {
    return Array.from(this.shortTermMemory.values()).sort((t, n) => n.strength - t.strength);
  }
  /**
   * 
   */
  getStats() {
    const t = Array.from(this.shortTermMemory.values()), n = t.length > 0 ? t.reduce((r, i) => r + i.strength, 0) / t.length : 0;
    return {
      size: this.shortTermMemory.size,
      currentRound: this.currentRound,
      avgStrength: n
    };
  }
}
const R1 = new Rne();
class Mne {
  /**
   * 
   */
  getRecallConfig() {
    const t = tt.get("apiSettings");
    return (t == null ? void 0 : t.recallConfig) || eb;
  }
  /**
   * 
   * 
   */
  async hasVectorizedNodes() {
    const t = fi();
    if (!t) return !1;
    const n = tf(t);
    return n ? await n.events.filter((i) => !!i.embedding && i.embedding.length > 0).limit(1).count() > 0 : !1;
  }
  /**
   * 
   */
  getVectorConfig() {
    const t = tt.get("apiSettings");
    return t == null ? void 0 : t.vectorConfig;
  }
  /**
   *  Rerank 
   */
  getRerankConfig() {
    const t = tt.get("apiSettings");
    return (t == null ? void 0 : t.rerankConfig) || null;
  }
  /**
   * 
   *
   * @param userInput 
   * @param unifiedQueries  ()
   * @returns 
   */
  async search(t, n) {
    var a, o, u;
    const r = this.getRecallConfig(), i = this.getVectorConfig();
    if (r.useEmbedding && i && Gr.setConfig(i), kp.nextRound(), !r.enabled) {
      pe.debug(qe.RAG_RETRIEVE, "");
      const c = ((a = r.embedding) == null ? void 0 : a.topK) || 20;
      return this.rollingSearch(c);
    }
    if (r.useBruteForce) {
      pe.debug(qe.RAG_RETRIEVE, " ()");
      const c = ((o = r.embedding) == null ? void 0 : o.topK) || 20;
      return this.rollingSearch(c);
    }
    return r.useEmbedding ? this.hybridSearch(t, n, r) : this.rollingSearch(((u = r.embedding) == null ? void 0 : u.topK) || 20);
  }
  /**
   * Embedding + Rerank
   */
  async hybridSearch(t, n, r) {
    const i = Date.now(), a = Date.now(), o = await this.doEmbeddingSearch(
      t,
      n,
      r
    ), u = Date.now() - a;
    if (o.length === 0)
      return pe.debug(qe.RAG_RETRIEVE, "Embedding "), { entries: [], nodes: [] };
    let c = o, f = 0;
    if (r.useRerank && gw.isEnabled()) {
      const E = Date.now(), k = (n == null ? void 0 : n[0]) || t, T = o.map((P) => P.summary), R = await gw.rerank(k, T);
      f = Date.now() - E;
      const N = new Map(o.map((P) => [P.id, P])), O = gw.getHybridAlpha();
      c = Ane(
        N,
        R,
        o,
        O
      ), pe.info(qe.RAG_RETRIEVE, "", {
        embeddingCount: o.length,
        rerankCount: R.length,
        finalCount: c.length,
        embeddingTime: u,
        rerankTime: f
      });
    } else
      c = qE(o, 0);
    const p = r.brainRecall || Jx, g = r.sticky || ED;
    if (p.enabled) {
      R1.setConfig(p), R1.nextRound();
      const E = c.map((R) => ({
        id: R.id,
        score: R.hybridScore || R.embeddingScore || 0
      })), k = R1.process(E), T = new Map(c.map((R) => [R.id, R]));
      c = k.filter((R) => T.has(R.id)).map((R) => ({
        ...T.get(R.id),
        hybridScore: R.strength
        //  strength 
      })), pe.info(qe.RAG_RETRIEVE, "", {
        inputCount: E.length,
        outputCount: c.length,
        round: R1.getCurrentRound()
      });
    } else g.enabled && (c = jne(c, kp, g), pe.debug(qe.RAG_RETRIEVE, "", {
      candidatesWithPenalty: c.filter((E) => (E.stickyPenalty || 0) > 0).length
    }), kp.nextRound());
    const x = Date.now() - i;
    if (tx.log({
      query: t,
      preprocessedQuery: n == null ? void 0 : n[0],
      mode: "hybrid",
      results: c.map((E) => {
        var k, T, R, N;
        return {
          eventId: E.id,
          summary: E.summary,
          category: ((T = (k = E.node) == null ? void 0 : k.structured_kv) == null ? void 0 : T.event) || "unknown",
          embeddingScore: E.embeddingScore || 0,
          rerankScore: E.rerankScore,
          hybridScore: E.hybridScore,
          isTopK: !0,
          isReranked: E.rerankScore != null,
          sourceFloor: (N = (R = E.node) == null ? void 0 : R.source_range) == null ? void 0 : N.start_index
        };
      }),
      stats: {
        totalCandidates: o.length,
        topKCount: o.length,
        rerankCount: c.length,
        latencyMs: x
      }
    }), !p.enabled && g.enabled) {
      const E = c.map((k) => k.id);
      kp.markRecalledBatch(E), kp.cleanup(10);
    }
    const b = c.filter((E) => E.node).map((E) => E.node), _ = c.map((E) => E.summary);
    return pe.info(qe.RAG_RETRIEVE, "", {
      useEmbedding: r.useEmbedding,
      useRerank: r.useRerank,
      totalTime: x,
      resultCount: b.length,
      stickyRound: kp.getCurrentRound()
    }), { entries: _, nodes: b };
  }
  /**
   *  Embedding  ()
   */
  async embeddingOnlySearch(t, n, r) {
    const i = await this.doEmbeddingSearch(t, n, r), a = qE(i, 0), o = a.filter((c) => c.node).map((c) => c.node);
    return { entries: a.map((c) => c.summary), nodes: o };
  }
  /**
   *  Embedding 
   */
  async doEmbeddingSearch(t, n, r) {
    var p, g, x;
    const i = fi();
    if (!i)
      return [];
    const a = tf(i);
    if (!a)
      return [];
    const o = await a.events.filter((b) => !!b.embedding && b.embedding.length > 0).toArray();
    if (o.length === 0)
      return pe.debug(qe.RAG_RETRIEVE, ""), [];
    const u = n && n.length > 0 ? n : [t];
    pe.debug(qe.RAG_RETRIEVE, "", {
      queryCount: u.length,
      eventCount: o.length
    });
    const c = /* @__PURE__ */ new Map();
    for (const b of u)
      try {
        const _ = await Gr.embed(b);
        for (const E of o) {
          if (!E.embedding) continue;
          const k = Gr.cosineSimilarity(
            _,
            E.embedding
          ), T = ((p = r.embedding) == null ? void 0 : p.minScoreThreshold) ?? 0.3;
          if (k < T) continue;
          const R = c.get(E.id);
          (!R || k > (R.embeddingScore || 0)) && c.set(E.id, {
            id: E.id,
            summary: E.summary,
            embeddingScore: k,
            node: E
          });
        }
      } catch (_) {
        pe.error(qe.RAG_RETRIEVE, `Query : ${b}`, {
          message: (_ == null ? void 0 : _.message) || _,
          stack: _ == null ? void 0 : _.stack
        });
      }
    this.getVectorConfig();
    const f = Array.from(c.values()).sort((b, _) => (_.embeddingScore || 0) - (b.embeddingScore || 0)).slice(0, ((g = r == null ? void 0 : r.embedding) == null ? void 0 : g.topK) || 20);
    return pe.debug(qe.RAG_RETRIEVE, "Embedding ", {
      totalMatched: c.size,
      topK: f.length,
      topScore: (x = f[0]) == null ? void 0 : x.embeddingScore
    }), f;
  }
  /**
   *  ()
   * 
   */
  async rollingSearch(t) {
    const n = fi();
    if (!n)
      return { entries: [], nodes: [] };
    const r = tf(n);
    if (!r)
      return { entries: [], nodes: [] };
    const i = await r.events.filter((c) => c.level === 0).reverse().limit(t).toArray(), a = await r.events.filter((c) => c.level === 1).reverse().first(), o = [...i];
    return a && o.unshift(a), { entries: o.map((c) => c.summary), nodes: o };
  }
  /**
   * @deprecated  search() 
   */
  async vectorSearch(t, n) {
    return this.search(t);
  }
}
const Y6 = new Mne(), Y0 = {
  enabled: !1,
  templateId: "query_enhance",
  autoTrigger: !0,
  preview: !0
  // 
};
function W6(e) {
  var t, n;
  try {
    const r = (n = (t = window.SillyTavern) == null ? void 0 : t.getContext) == null ? void 0 : n.call(t);
    return r != null && r.substituteParams ? r.substituteParams(e) : (pe.warn(qe.PREPROCESS, "substituteParams "), e);
  } catch (r) {
    return pe.warn(qe.PREPROCESS, "substituteParams ", r), e;
  }
}
async function One() {
  var e, t;
  try {
    const n = (t = (e = window.SillyTavern) == null ? void 0 : e.getContext) == null ? void 0 : t.call(e);
    n != null && n.stopGeneration && (n.stopGeneration(), pe.info(qe.PREPROCESS, " stopGeneration"));
  } catch (n) {
    pe.warn(qe.PREPROCESS, " stopGeneration ", n);
  }
}
function Z6() {
  try {
    const e = tm();
    return e == null ? void 0 : e.name;
  } catch {
  }
}
function X6() {
  try {
    return Qx();
  } catch {
  }
}
const Bd = class Bd {
  constructor() {
    yt(this, "cancelRequested", !1);
  }
  // ... (rest of class)
  static getInstance() {
    return Bd.instance || (Bd.instance = new Bd()), Bd.instance;
  }
  /**
   * 
   */
  requestStopGeneration() {
    One();
  }
  /**
   * 
   * @param userInput 
   * @returns 
   */
  async process(t) {
    var a;
    const n = Date.now(), r = this.getConfig();
    if (!r.enabled)
      return {
        success: !0,
        output: null,
        query: null,
        rawOutput: "",
        processingTime: 0
      };
    pe.info(qe.PREPROCESS, "", { inputLength: t.length }), this.cancelRequested = !1;
    const i = Zt.running("...", "Engram", () => {
      this.cancelRequested = !0, pe.debug(qe.PREPROCESS, ""), this.requestStopGeneration(), Zt.warning("...", "Engram");
    });
    try {
      const o = tt.getPromptTemplateById(r.templateId);
      if (pe.debug(qe.PREPROCESS, "", {
        templateId: r.templateId,
        found: !!o,
        templateName: o == null ? void 0 : o.name
      }), !o) {
        const _ = ` ${r.templateId}  API `;
        return pe.warn(qe.PREPROCESS, _), {
          success: !1,
          output: null,
          query: null,
          rawOutput: "",
          processingTime: Date.now() - n,
          error: _
        };
      }
      if (this.cancelRequested)
        return {
          success: !1,
          output: null,
          query: null,
          rawOutput: "",
          processingTime: Date.now() - n,
          error: ""
        };
      let u = o.systemPrompt.replace(/\{\{input\}\}/gi, t), c = o.userPromptTemplate.replace(/\{\{input\}\}/gi, t);
      u = W6(u), c = W6(c), pe.debug(qe.PREPROCESS, "", {
        systemPromptLength: u.length,
        userPromptLength: c.length
      });
      const f = Xs.logSend({
        type: "query",
        systemPrompt: u,
        userPrompt: c,
        model: X6() || "Unknown",
        character: Z6() || "System"
      }), p = await Qd.generate({
        systemPrompt: u,
        userPrompt: c
      });
      if (Xs.logReceive(f, {
        response: p.content,
        status: p.success ? "success" : "error",
        error: p.error,
        duration: Date.now() - n
      }), this.cancelRequested)
        return pe.debug(qe.PREPROCESS, ""), {
          success: !1,
          output: null,
          query: null,
          rawOutput: "",
          processingTime: Date.now() - n,
          error: ""
        };
      if (!p.success || !p.content) {
        const _ = p.error || "LLM ";
        return pe.error(qe.PREPROCESS, "LLM ", { error: _ }), {
          success: !1,
          output: null,
          query: null,
          rawOutput: "",
          processingTime: Date.now() - n,
          error: _
        };
      }
      const g = Bl.process(p.content, "output"), x = Bl.captureTags(g, ["output", "query"]);
      if (r.preview && x.output) {
        pe.debug(qe.PREPROCESS, "");
        try {
          const _ = async () => {
            const k = Xs.logSend({
              type: "query",
              systemPrompt: u,
              userPrompt: c,
              model: X6() || "Unknown",
              character: Z6() || "System"
            }), T = await Qd.generate({
              systemPrompt: u,
              userPrompt: c
            });
            if (Xs.logReceive(k, {
              response: T.content,
              status: T.success ? "success" : "error",
              error: T.error,
              duration: 0
            }), !T.success || !T.content)
              throw new Error(T.error || "LLM ");
            const R = Bl.process(T.content, "output");
            return Bl.captureTags(R, ["output", "query"]).output || R;
          }, E = await new Promise((k) => {
            Ta.emit(Wa.ENGRAM_REQUEST_REVISION, {
              title: "",
              content: x.output,
              description: "",
              onConfirm: (T) => k(T),
              onCancel: () => k(null),
              // V0.9.2:  Roll 
              onReroll: _
            });
          });
          if (E !== null)
            x.output = E, pe.debug(qe.PREPROCESS, "");
          else
            return pe.debug(qe.PREPROCESS, ""), {
              success: !1,
              output: null,
              query: null,
              rawOutput: "",
              processingTime: Date.now() - n,
              error: ""
            };
        } catch (_) {
          pe.warn(qe.PREPROCESS, "", _);
        }
      }
      const b = Date.now() - n;
      return pe.success(qe.PREPROCESS, "", {
        outputLength: ((a = x.output) == null ? void 0 : a.length) || 0,
        processingTime: b
      }), Zt.success("", "Engram"), {
        success: !0,
        output: x.output,
        query: x.query,
        rawOutput: g,
        processingTime: b
      };
    } catch (o) {
      const u = o instanceof Error ? o.message : "";
      return pe.error(qe.PREPROCESS, "", { error: u }), Zt.error(`: ${u}`, "Engram"), {
        success: !1,
        output: null,
        query: null,
        rawOutput: "",
        processingTime: Date.now() - n,
        error: u
      };
    } finally {
      Zt.remove(i);
    }
  }
  /**
   * 
   */
  getConfig() {
    return tt.get("preprocessingConfig") || Y0;
  }
  /**
   * 
   */
  saveConfig(t) {
    pe.debug(qe.PREPROCESS, "", t), tt.set("preprocessingConfig", t);
  }
  /**
   * /
   */
  toggle() {
    const t = this.getConfig();
    return t.enabled = !t.enabled, this.saveConfig(t), pe.info(qe.PREPROCESS, t.enabled ? "" : ""), t.enabled;
  }
};
yt(Bd, "instance");
let $E = Bd;
const Hd = $E.getInstance();
class TP {
  constructor() {
    yt(this, "isInitialized", !1);
    yt(this, "isProcessing", !1);
    // 
    yt(this, "cacheInvalid", !1);
  }
  // V0.9.5:  true
  /**
   * Initialize the Injector
   */
  init() {
    this.isInitialized || (pe.info(qe.RAG_INJECT, " V0.8 ..."), console.log("[Injector] Starting initialization..."), Ta.on(
      Wa.GENERATION_AFTER_COMMANDS,
      async (t, n, r) => {
        console.log("[Injector]  GENERATION_AFTER_COMMANDS triggered", { type: t, dryRun: r }), pe.debug(qe.RAG_INJECT, " GENERATION_AFTER_COMMANDS", { type: t }), await this.handleGenerationAfterCommands(t, n, r);
      }
    ), Ta.on(Wa.CHAT_CHANGED, () => {
      pe.debug(qe.RAG_INJECT, " CHAT_CHANGED "), this.isProcessing = !1, this.cacheInvalid = !1, Za.refreshCache().catch((t) => {
        pe.warn(qe.RAG_INJECT, "", t);
      });
    }), Ta.on(Wa.MESSAGE_EDITED, (...t) => {
      var a;
      const n = t[0], r = eo(), i = (a = r == null ? void 0 : r.chat) == null ? void 0 : a[n];
      i != null && i.is_user && (this.cacheInvalid = !0, pe.info(qe.RAG_INJECT, "", { msgIndex: n }));
    }), this.isInitialized = !0, pe.success(qe.RAG_INJECT, "V0.8 Injector "), console.log("[Injector]  V0.8 Initialized - Listening for GENERATION_AFTER_COMMANDS"));
  }
  /**
   *  GENERATION_AFTER_COMMANDS 
   *  async  await
   */
  async handleGenerationAfterCommands(t, n, r) {
    try {
      if (r) {
        pe.debug(qe.RAG_INJECT, "dryRun ");
        return;
      }
      if (t === "quiet" || t === "impersonate") {
        pe.debug(qe.RAG_INJECT, ` ${t} `);
        return;
      }
      if (t === "regenerate" || t === "swipe") {
        if (!this.cacheInvalid) {
          pe.debug(qe.RAG_INJECT, `${t} `);
          return;
        }
        pe.info(qe.RAG_INJECT, `${t} `);
      }
      if (n._engram_processed) {
        pe.debug(qe.RAG_INJECT, "");
        return;
      }
      if (this.isProcessing) {
        pe.debug(qe.RAG_INJECT, "");
        return;
      }
      if (!fi()) {
        pe.warn(qe.RAG_INJECT, " ID");
        return;
      }
      const a = eo();
      if (!a || !a.chat || a.chat.length === 0) {
        pe.warn(qe.RAG_INJECT, "");
        return;
      }
      const o = a.chat, u = o.length - 1, c = o[u];
      let f = "", p = "chat";
      if (c && c.is_user)
        f = c.mes;
      else {
        const k = document.getElementById("send_textarea");
        if (k && k.value && k.value.trim().length > 0)
          f = k.value, p = "textarea", pe.info(qe.RAG_INJECT, " Textarea  (Strategy 2)", {
            preview: f.substring(0, 50)
          });
        else {
          pe.debug(qe.RAG_INJECT, "", {
            index: u,
            isUser: c == null ? void 0 : c.is_user
          });
          return;
        }
      }
      if (!f || f.trim().length === 0) {
        pe.debug(qe.RAG_INJECT, "");
        return;
      }
      let g, x, b;
      try {
        if (g = tt.get("apiSettings"), x = (g == null ? void 0 : g.recallConfig) || eb, !Hd)
          throw new Error("Preprocessor service is undefined");
        b = Hd.getConfig();
      } catch (k) {
        throw pe.error(qe.RAG_INJECT, "", k), k;
      }
      if (pe.info(qe.RAG_INJECT, "", {
        inputLength: f.length,
        recall: x.enabled,
        preprocess: x.usePreprocessing && b.enabled
      }), x.usePreprocessing && b.enabled && !b.autoTrigger && (pe.debug(qe.RAG_INJECT, " autoTrigger "), !x.enabled))
        return;
      this.isProcessing = !0, this.cacheInvalid = !1, n._engram_processed = !0, c && (c._engram_processed = !0);
      let _ = f, E = [];
      try {
        if (x.usePreprocessing && b.enabled && b.autoTrigger)
          try {
            Za.setUserInput(f), await Za.refreshCache();
            const k = await Hd.process(f);
            if (k.success && k.output) {
              pe.success(qe.RAG_INJECT, "", {
                outputLength: k.output.length
              });
              const T = tt.getPromptTemplateById(b.templateId), R = (T == null ? void 0 : T.injectionMode) || "replace";
              R === "append" ? _ = `${f}

${k.output}` : R === "prepend" ? _ = `${k.output}

${f}` : _ = k.output, k.query && E.push(k.query);
            } else
              pe.warn(qe.RAG_INJECT, "");
          } catch (k) {
            pe.warn(qe.RAG_INJECT, " ", k);
          }
        if (x.enabled)
          try {
            if (!await Y6.hasVectorizedNodes())
              pe.debug(qe.RAG_INJECT, " RAG");
            else {
              pe.debug(qe.RAG_INJECT, " RAG ");
              const T = await Y6.search(
                f,
                E.length > 0 ? E : void 0
              );
              T.nodes.length > 0 ? (pe.success(qe.RAG_INJECT, "RAG ", {
                nodeCount: T.nodes.length
              }), await Za.refreshCacheWithNodes(T.nodes)) : pe.debug(qe.RAG_INJECT, "RAG ");
            }
          } catch (k) {
            pe.error(qe.RAG_INJECT, "RAG ", k);
          }
        if (_ = Bl.process(_, "output"), _ !== f) {
          if (p === "chat") {
            c.mes = _;
            try {
              const k = a.eventSource, T = a.event_types;
              k && (T != null && T.MESSAGE_UPDATED) && (k.emit(T.MESSAGE_UPDATED, u), pe.debug(qe.RAG_INJECT, " MESSAGE_UPDATED "));
            } catch (k) {
              pe.warn(qe.RAG_INJECT, " MESSAGE_UPDATED ", k);
            }
            try {
              const k = document.getElementById("send_textarea");
              k && k.value === f && (k.value = "", k.dispatchEvent(new Event("input", { bubbles: !0 })));
            } catch {
            }
          } else if (p === "textarea") {
            pe.debug(qe.RAG_INJECT, " Textarea");
            try {
              const k = document.getElementById("send_textarea");
              k && (k.value = _, k.dispatchEvent(new Event("input", { bubbles: !0 }))), n && (n.prompt = _);
            } catch (k) {
              pe.warn(qe.RAG_INJECT, " Textarea ", k);
            }
          }
        }
      } finally {
        setTimeout(() => {
          this.isProcessing = !1;
        }, 1e3);
      }
    } catch (i) {
      this.isProcessing = !1, pe.error(qe.RAG_INJECT, "handleGenerationAfterCommands ", {
        message: (i == null ? void 0 : i.message) || i,
        stack: i == null ? void 0 : i.stack
      }), console.error("[Injector] Error:", i);
    }
  }
}
const Dne = new TP(), zne = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Injector: TP,
  injector: Dne
}, Symbol.toStringTag, { value: "Module" })), W0 = {
  keepRecentCount: 3,
  previewEnabled: !0
};
class Sk {
  constructor(t) {
    yt(this, "config");
    yt(this, "isTrimming", !1);
    this.config = { ...W0, ...t };
  }
  /**
   * 
   */
  updateConfig(t) {
    this.config = { ...this.config, ...t };
  }
  /**
   * 
   */
  async canTrim() {
    const n = await Zi.getState().getAllEvents(), r = Math.max(0, n.length - this.config.keepRecentCount);
    return {
      canTrim: r >= 2,
      //  2 
      eventCount: n.length,
      pendingCount: r
    };
  }
  /**
   * 
   *  1 
   */
  async trim(t = !1) {
    if (this.isTrimming)
      return pe.warn(qe.MEMORY_TRIM, ""), null;
    const n = Zi.getState(), r = await n.getEventsToMerge(this.config.keepRecentCount);
    if (r.length < 2)
      return t && Zt.info(" ( 2 )", "Engram"), null;
    this.isTrimming = !0, pe.info(qe.MEMORY_TRIM, "", { eventCount: r.length });
    try {
      const i = this.formatEventsForTrim(r), a = await Qd.generate({
        systemPrompt: kD,
        userPrompt: `

${i}`
      });
      if (!a.success || !a.content)
        return pe.error(qe.MEMORY_TRIM, "LLM ", { error: a.error }), Zt.error("LLM ", "Engram"), null;
      const o = dk.parse(a.content);
      if (!o || !o.events || o.events.length === 0)
        return pe.error(qe.MEMORY_TRIM, "JSON "), Zt.error("", "Engram"), null;
      let u = o.events.map((b) => b.summary).join(`

`);
      if (this.config.previewEnabled)
        try {
          u = await wD.requestRevision(
            "",
            ` ${r.length} `,
            u
          );
        } catch {
          return pe.warn(qe.MEMORY_TRIM, ""), Zt.info("", ""), null;
        }
      const c = o.events[0], f = await n.saveEvent({
        summary: u,
        structured_kv: {
          time_anchor: c.meta.time_anchor || "",
          role: this.mergeArrays(r.map((b) => b.structured_kv.role)),
          location: c.meta.location || "",
          event: "",
          logic: this.mergeArrays(r.map((b) => b.structured_kv.logic)),
          causality: "Chain"
        },
        significance_score: Math.max(...r.map((b) => b.significance_score)),
        level: 1,
        // 
        is_embedded: !1,
        //  ( Trim )
        is_archived: !1,
        // 
        source_range: {
          start_index: Math.min(...r.map((b) => {
            var _;
            return ((_ = b.source_range) == null ? void 0 : _.start_index) ?? 0;
          })),
          end_index: Math.max(...r.map((b) => {
            var _;
            return ((_ = b.source_range) == null ? void 0 : _.end_index) ?? 0;
          }))
        }
      }), p = r.map((b) => b.id), g = tt.get("apiSettings"), x = g == null ? void 0 : g.embeddingConfig;
      if (x != null && x.enabled && x.trigger === "with_trim") {
        pe.info(qe.MEMORY_TRIM, "", { count: r.length });
        try {
          await Gr.embedEvents(r), await n.markEventsAsEmbedded(p);
        } catch (b) {
          pe.error(qe.MEMORY_TRIM, "", { error: b }), Zt.warning("", "Engram");
        }
      }
      return await n.archiveEvents(p), await Za.refreshCache(), pe.success(qe.MEMORY_TRIM, "", {
        merged: r.length,
        newEventId: f.id
      }), Zt.success(
        ` ${r.length}  1 `,
        "Engram"
      ), {
        newEvent: f,
        deletedCount: 0,
        // V0.7: 
        sourceEventIds: p
      };
    } catch (i) {
      const a = i instanceof Error ? i.message : String(i);
      return pe.error(qe.MEMORY_TRIM, "", { error: a }), Zt.error(`: ${a}`, "Engram "), null;
    } finally {
      this.isTrimming = !1;
    }
  }
  /**
   *  ()
   */
  formatEventsForTrim(t) {
    return t.map((n) => {
      const r = n.structured_kv;
      return `${n.summary}
Role: [${r.role.join(", ")}]
Loc: ${r.location}
Event: ${r.event}
Logic: [${r.logic.join(", ")}]
Causality: ${r.causality}
Significance: ${n.significance_score}`;
    }).join(`

---

`);
  }
  /**
   * 
   */
  mergeArrays(t) {
    const n = /* @__PURE__ */ new Set();
    for (const r of t)
      for (const i of r)
        n.add(i);
    return Array.from(n);
  }
  /**
   * 
   */
  getConfig() {
    return { ...this.config };
  }
  /**
   *  (UI )
   */
  async getStatus() {
    var E;
    const { useMemoryStore: t } = await Promise.resolve().then(() => Kz), n = t.getState(), { totalTokens: r, eventCount: i } = await n.countEventTokens();
    let a = !1, o = 0, u = 0;
    const f = ((E = tt.getSummarizerSettings()) == null ? void 0 : E.trimConfig) || this.config, p = f.trigger || "token", g = f.tokenLimit || 10240, x = f.countLimit || 5;
    p === "token" ? (o = r, u = g) : (o = i, u = x), a = o >= u;
    const b = f.keepRecentCount || 3, _ = Math.max(0, i - b);
    return {
      triggered: a,
      triggerType: p,
      currentValue: o,
      threshold: u,
      pendingEntryCount: _,
      isTrimming: this.isTrimming
    };
  }
}
const O0 = new Sk(), yw = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DEFAULT_TRIM_CONFIG: W0,
  EventTrimmer: Sk,
  eventTrimmer: O0
}, Symbol.toStringTag, { value: "Module" })), ju = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DEFAULT_REGEX_RULES: im,
  DEFAULT_SUMMARIZER_CONFIG: eP,
  DEFAULT_TRIM_CONFIG: W0,
  EntityBuilder: _k,
  EventTrimmer: Sk,
  LLMAdapter: Xz,
  RegexProcessor: lb,
  SummarizerService: hk,
  TextProcessor: Wz,
  entityBuilder: Du,
  eventTrimmer: O0,
  llmAdapter: Qd,
  regexProcessor: Bl,
  summarizerService: Bo,
  textProcessor: Zz
}, Symbol.toStringTag, { value: "Module" }));
function Pne(e = 2e3) {
  const [t, n] = B.useState(!0), [r, i] = B.useState({
    isConnected: !1,
    characterName: "Unknown",
    currentFloor: 0,
    lastSummarizedFloor: 0,
    pendingFloors: 0,
    floorInterval: 10,
    isSummarizing: !1
  }), [a, o] = B.useState({
    eventCount: 0,
    entityCount: 0,
    entityByType: {},
    archivedCount: 0,
    activeCount: 0,
    estimatedTokens: 0
  }), [u, c] = B.useState({
    summarizer: !0,
    entity: !1,
    embedding: !1,
    recall: !0,
    preprocessing: !1
  }), f = Zi((b) => b.getAllEvents), p = Zi((b) => b.getAllEntities), g = B.useCallback(async () => {
    try {
      const b = eo(), _ = Bo.getStatus(), E = tt.get("summarizerConfig") || {};
      i({
        isConnected: !!b,
        characterName: (b == null ? void 0 : b.name2) || "Unknown",
        currentFloor: _.currentFloor,
        lastSummarizedFloor: _.lastSummarizedFloor,
        pendingFloors: _.pendingFloors,
        floorInterval: E.floorInterval || 10,
        isSummarizing: _.isSummarizing
      });
      const k = await f(), T = await p(), R = {};
      T.forEach((W) => {
        R[W.type] = (R[W.type] || 0) + 1;
      });
      const N = k.filter((W) => W.is_archived), O = k.reduce((W, F) => {
        var X;
        return W + Math.ceil((((X = F.summary) == null ? void 0 : X.length) || 0) / 4);
      }, 0);
      o({
        eventCount: k.length,
        entityCount: T.length,
        entityByType: R,
        archivedCount: N.length,
        activeCount: k.length - N.length,
        estimatedTokens: O
      });
      const P = tt.get("apiSettings"), z = P == null ? void 0 : P.entityExtractConfig, q = P == null ? void 0 : P.embeddingConfig, G = P == null ? void 0 : P.recallConfig, Y = tt.get("preprocessingConfig");
      c({
        summarizer: E.enabled !== !1,
        entity: (z == null ? void 0 : z.enabled) || !1,
        embedding: (q == null ? void 0 : q.enabled) || !1,
        recall: (G == null ? void 0 : G.enabled) !== !1,
        preprocessing: (Y == null ? void 0 : Y.enabled) || !1
      }), n(!1);
    } catch (b) {
      console.error("[useDashboardData] Error refreshing data:", b), n(!1);
    }
  }, [f, p]), x = B.useCallback((b) => {
    const _ = tt.get("apiSettings") || {}, E = tt.get("summarizerConfig") || {};
    switch (b) {
      case "summarizer":
        const k = !u.summarizer;
        tt.set("summarizerConfig", {
          ...E,
          enabled: k
        }), Bo.updateConfig({ enabled: k });
        break;
      case "entity":
        const T = (_ == null ? void 0 : _.entityExtractConfig) || {};
        tt.set("apiSettings", {
          ..._,
          entityExtractConfig: {
            ...T,
            enabled: !u.entity
          }
        });
        break;
      case "embedding":
        const R = (_ == null ? void 0 : _.embeddingConfig) || {};
        tt.set("apiSettings", {
          ..._,
          embeddingConfig: {
            ...R,
            enabled: !u.embedding
          }
        });
        break;
      case "recall":
        const N = (_ == null ? void 0 : _.recallConfig) || {};
        tt.set("apiSettings", {
          ..._,
          recallConfig: {
            ...N,
            enabled: !u.recall
          }
        });
        break;
      case "preprocessing":
        const O = tt.get("preprocessingConfig") || Y0, P = !u.preprocessing;
        tt.set("preprocessingConfig", {
          ...O,
          enabled: P
        }), Promise.resolve().then(() => MV).then(({ getDefaultAPISettings: z }) => {
          const G = tt.get("apiSettings") || z(), Y = G.recallConfig || {};
          tt.set("apiSettings", {
            ...G,
            recallConfig: {
              ...Y,
              usePreprocessing: P
            }
          });
        });
        break;
    }
    g();
  }, [u, g]);
  return B.useEffect(() => {
    g();
    const b = setInterval(g, e);
    return () => clearInterval(b);
  }, [g, e]), {
    system: r,
    memory: a,
    features: u,
    isLoading: t,
    toggleFeature: x,
    refresh: g
  };
}
const Ine = (e) => {
  switch (e) {
    case 0:
      return "text-muted-foreground";
    case 1:
      return "text-primary";
    case 2:
      return "text-green-400";
    case 3:
      return "text-yellow-400";
    case 4:
      return "text-red-400";
    default:
      return "text-primary";
  }
}, Lne = [
  { key: "summarizer", label: "", desc: "", icon: hy },
  { key: "entity", label: "", desc: "/", icon: iD },
  { key: "embedding", label: "", desc: "", icon: ta },
  { key: "recall", label: "RAG ", desc: "", icon: ta },
  { key: "preprocessing", label: "", desc: "Query /", icon: oD }
], Bne = px.filter((e) => e.id !== "dashboard"), Q6 = ({ onNavigate: e }) => {
  const [t, n] = B.useState([]), [r, i] = B.useState(0), { system: a, memory: o, features: u, toggleFeature: c } = Pne(2e3);
  B.useEffect(() => (n(pe.getLogs().slice(0, 4)), pe.subscribe((_) => {
    n((E) => [_, ...E].slice(0, 4));
  })), []), B.useEffect(() => {
    const b = setInterval(() => i((_) => _ + 1), 1e3);
    return () => clearInterval(b);
  }, []);
  const f = (b) => {
    const _ = Math.floor(b / 3600), E = Math.floor(b % 3600 / 60), k = b % 60;
    return `${_.toString().padStart(2, "0")}:${E.toString().padStart(2, "0")}:${k.toString().padStart(2, "0")}`;
  }, p = (b) => e == null ? void 0 : e(b), g = a.floorInterval > 0 ? Math.min(100, a.pendingFloors / a.floorInterval * 100) : 0, x = o.eventCount > 0 ? Math.round(o.archivedCount / o.eventCount * 100) : 0;
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ h.jsx(
      xm,
      {
        title: "",
        subtitle: "",
        className: "mb-6"
      }
    ),
    /* @__PURE__ */ h.jsx(ci, { className: "mb-6" }),
    /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto no-scrollbar", children: /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 engram-stagger-children", children: [
      /* @__PURE__ */ h.jsxs("section", { className: "space-y-8", children: [
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
          /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-1", children: "" }),
              /* @__PURE__ */ h.jsxs("div", { className: `flex items-center gap-2 text-lg font-medium ${a.isConnected ? "text-green-500" : "text-muted-foreground"}`, children: [
                a.isConnected ? /* @__PURE__ */ h.jsx(Kx, { size: 18 }) : /* @__PURE__ */ h.jsx(rf, { size: 18 }),
                a.isConnected ? a.characterName : ""
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-1", children: "" }),
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ h.jsx("span", { className: "text-3xl font-light text-amber-500 font-mono", children: a.pendingFloors }),
                /* @__PURE__ */ h.jsxs("span", { className: "text-muted-foreground", children: [
                  "/ ",
                  a.floorInterval
                ] }),
                a.isSummarizing && /* @__PURE__ */ h.jsx($u, { size: 14, className: "animate-spin text-primary ml-1" })
              ] }),
              /* @__PURE__ */ h.jsx("div", { className: "mt-2 h-1 bg-border rounded-full overflow-hidden", children: /* @__PURE__ */ h.jsx(
                "div",
                {
                  className: `h-full transition-all duration-300 ${g >= 80 ? "bg-amber-500" : "bg-primary"}`,
                  style: { width: `${g}%` }
                }
              ) })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsx(ci, { length: 100, spacing: "md" }),
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
          /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/70 uppercase tracking-wider block mb-1", children: "" }),
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-baseline gap-2", children: [
                /* @__PURE__ */ h.jsx("span", { className: "text-xl font-mono text-foreground/80", children: o.eventCount }),
                /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground", children: [
                  "~",
                  o.estimatedTokens.toLocaleString(),
                  " tok"
                ] })
              ] }),
              /* @__PURE__ */ h.jsxs("div", { className: "mt-2 flex items-center gap-2 text-[10px] text-muted-foreground", children: [
                /* @__PURE__ */ h.jsxs("span", { children: [
                  " ",
                  o.activeCount
                ] }),
                /* @__PURE__ */ h.jsx("div", { className: "flex-1 h-1 bg-border rounded-full overflow-hidden", children: /* @__PURE__ */ h.jsx("div", { className: "h-full bg-primary", style: { width: `${100 - x}%` } }) }),
                /* @__PURE__ */ h.jsxs("span", { children: [
                  " ",
                  o.archivedCount
                ] })
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/70 uppercase tracking-wider block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-xl font-mono text-foreground/80", children: o.entityCount }),
              o.entityCount > 0 && /* @__PURE__ */ h.jsx("div", { className: "flex gap-2 mt-2", children: Object.entries(o.entityByType).slice(0, 3).map(([b, _]) => /* @__PURE__ */ h.jsxs("span", { className: "text-[10px] text-muted-foreground", children: [
                b,
                ": ",
                _
              ] }, b)) })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsx(ci, { length: 30, spacing: "md" }),
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/60 uppercase tracking-wider block mb-1", children: "" }),
          /* @__PURE__ */ h.jsx("div", { className: "text-sm font-mono text-primary/80", children: f(r) })
        ] }),
        /* @__PURE__ */ h.jsx(ci, { length: 100 }),
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
          /* @__PURE__ */ h.jsx("div", { className: "grid grid-cols-5 gap-3", children: Bne.map(({ id: b, label: _, icon: E, path: k }) => /* @__PURE__ */ h.jsxs(
            "button",
            {
              onClick: () => p(k.replace("/", "")),
              className: "flex flex-col items-center gap-2 p-3 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent/50 transition-all duration-[var(--duration-fast)] group hover:translate-y-[-2px] active:scale-95",
              children: [
                /* @__PURE__ */ h.jsx(E, { size: 20, className: "text-primary transition-transform duration-[var(--duration-fast)] group-hover:scale-110" }),
                /* @__PURE__ */ h.jsx("span", { className: "text-xs", children: _ })
              ]
            },
            b
          )) })
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs("section", { className: "space-y-6 lg:pl-8 relative", children: [
        /* @__PURE__ */ h.jsx(ci, { responsive: !0, length: 30 }),
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
          /* @__PURE__ */ h.jsx("div", { className: "space-y-4", children: Lne.map(({ key: b, label: _, desc: E, icon: k }) => {
            const T = u[b];
            return /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 min-w-0 flex-1", children: [
                /* @__PURE__ */ h.jsx("div", { className: `p-1.5 rounded-lg ${T ? "bg-primary/10 text-primary" : "bg-muted text-muted-foreground"}`, children: /* @__PURE__ */ h.jsx(k, { size: 14 }) }),
                /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
                  /* @__PURE__ */ h.jsx("span", { className: `text-sm ${T ? "text-foreground" : "text-muted-foreground"}`, children: _ }),
                  /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground truncate", children: E })
                ] })
              ] }),
              /* @__PURE__ */ h.jsx(ui, { checked: T, onChange: () => c(b) })
            ] }, b);
          }) })
        ] }),
        /* @__PURE__ */ h.jsx(ci, { length: 100, spacing: "md" }),
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mb-4", children: [
            /* @__PURE__ */ h.jsx("h2", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider", children: "" }),
            /* @__PURE__ */ h.jsxs(
              "button",
              {
                onClick: () => p("devlog"),
                className: "text-[10px] text-primary hover:underline flex items-center gap-0.5",
                children: [
                  " ",
                  /* @__PURE__ */ h.jsx(ih, { size: 12 })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ h.jsx("div", { className: "font-mono text-[11px] space-y-1.5", children: t.length === 0 ? /* @__PURE__ */ h.jsx("div", { className: "text-muted-foreground text-center py-4 italic", children: "" }) : t.map((b) => /* @__PURE__ */ h.jsxs("div", { className: `flex gap-2 opacity-80 ${Ine(b.level)}`, children: [
            /* @__PURE__ */ h.jsxs("span", { className: "text-muted-foreground shrink-0", children: [
              "[",
              new Date(b.timestamp).toLocaleTimeString([], { hour12: !1 }),
              "]"
            ] }),
            /* @__PURE__ */ h.jsx("span", { className: "text-foreground truncate", children: b.message })
          ] }, b.id)) })
        ] })
      ] })
    ] }) })
  ] });
}, qne = B.lazy(() => Promise.resolve().then(() => Ere).then((e) => ({ default: e.DevLog }))), $ne = B.lazy(() => Promise.resolve().then(() => Ple).then((e) => ({ default: e.APIPresets }))), Fne = B.lazy(() => Promise.resolve().then(() => $le).then((e) => ({ default: e.Settings }))), Une = B.lazy(() => Promise.resolve().then(() => pve).then((e) => ({ default: e.MemoryStream }))), Vne = B.lazy(() => Promise.resolve().then(() => Mve).then((e) => ({ default: e.ProcessingView }))), Hne = B.lazy(() => Promise.resolve().then(() => Dve).then((e) => ({ default: e.DocsView }))), Gne = () => /* @__PURE__ */ h.jsx("div", { className: "flex items-center justify-center h-full", children: /* @__PURE__ */ h.jsx("div", { className: "animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full" }) }), Kne = ({ onClose: e }) => {
  const [t, n] = B.useState("dashboard"), [r, i] = B.useState(!1), [a, o] = B.useState(!1), u = (p) => {
    const g = p.replace(/^\//, "");
    console.debug("[Engram] Navigating to:", g), n(g);
  };
  B.useEffect(() => {
    const p = setTimeout(() => {
      const g = tt.get("hasSeenWelcome");
      console.debug("[Engram] hasSeenWelcome:", g), g || i(!0), o(!0);
    }, 1e3);
    return () => clearTimeout(p);
  }, []), B.useEffect(() => {
    const p = $5.on("UI_NAVIGATE_REQUEST", (g) => {
      console.debug("[Engram] :", g), u(g);
    });
    return () => p.unsubscribe();
  }, []), B.useEffect(() => {
    const g = setTimeout(async () => {
      try {
        if (await Pl.hasUnreadUpdate()) {
          const b = await Pl.getLatestVersion();
          Zt.info(
            ` v${b}`,
            "Engram ",
            { action: { goto: "settings" } }
            // 
          );
        }
      } catch (x) {
        console.debug("[Engram] ", x);
      }
    }, 3e3);
    return () => clearTimeout(g);
  }, []);
  const c = () => {
    tt.set("hasSeenWelcome", !0), console.debug("[Engram] hasSeenWelcome saved"), i(!1);
  };
  if (!a)
    return null;
  const f = () => {
    const [p, g] = t.split(":");
    switch (p) {
      case "dashboard":
        return /* @__PURE__ */ h.jsx(Q6, { onNavigate: n });
      case "presets":
        return /* @__PURE__ */ h.jsx($ne, { initialTab: g });
      case "devlog":
        return /* @__PURE__ */ h.jsx(qne, { initialTab: g });
      case "settings":
        return /* @__PURE__ */ h.jsx(Fne, {});
      case "memory":
        return /* @__PURE__ */ h.jsx(Une, {});
      case "processing":
        return /* @__PURE__ */ h.jsx(Vne, { onNavigate: n });
      case "docs":
        return /* @__PURE__ */ h.jsx(Hne, { initialTab: g });
      // V0.9.11
      default:
        return /* @__PURE__ */ h.jsx(Q6, {});
    }
  };
  return (
    /*  */
    /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
      r && /* @__PURE__ */ h.jsx(AX, { onComplete: c }),
      /* @__PURE__ */ h.jsx(TX, { activeTab: t, setActiveTab: u, onClose: e, children: /* @__PURE__ */ h.jsx(B.Suspense, { fallback: /* @__PURE__ */ h.jsx(Gne, {}), children: f() }) })
    ] })
  );
}, Yne = () => {
  const [e, t] = B.useState(!1), [n, r] = B.useState(null), [i, a] = B.useState(""), [o, u] = B.useState(!1);
  B.useEffect(() => {
    const g = Ta.on(
      Wa.ENGRAM_REQUEST_REVISION,
      (x) => {
        const b = x;
        r(b), a(b.content), t(!0);
      }
    );
    return () => {
      g();
    };
  }, []);
  const c = () => {
    n && (n.onConfirm(i), t(!1), r(null));
  }, f = () => {
    n && n.onCancel(), t(!1), r(null);
  }, p = async () => {
    if (n != null && n.onReroll) {
      u(!0);
      try {
        const g = await n.onReroll();
        a(g);
      } catch (g) {
        console.error("[RevisionModal] Reroll failed:", g);
      } finally {
        u(!1);
      }
    }
  };
  return e ? L5.createPortal(
    /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: "fixed inset-0 z-[11000] flex items-center justify-center p-4",
        style: { height: "100dvh", width: "100vw" },
        children: [
          /* @__PURE__ */ h.jsx(
            "div",
            {
              className: "absolute inset-0 bg-background/80 backdrop-blur-sm animate-in fade-in duration-200",
              onClick: f
            }
          ),
          /* @__PURE__ */ h.jsxs("div", { className: "relative w-full max-w-2xl bg-popover border border-border rounded-lg shadow-2xl flex flex-col max-h-[85vh] animate-in zoom-in-95 slide-in-from-bottom-2 duration-200", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-start justify-between p-5 border-b border-border", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
                /* @__PURE__ */ h.jsx("h3", { className: "text-lg font-medium text-foreground tracking-tight", children: (n == null ? void 0 : n.title) || "" }),
                (n == null ? void 0 : n.description) && /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: n.description })
              ] }),
              /* @__PURE__ */ h.jsx(
                "button",
                {
                  onClick: f,
                  className: "p-2 -m-2 text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-all duration-[var(--duration-fast)] hover:rotate-90",
                  "aria-label": "",
                  children: /* @__PURE__ */ h.jsx(gm, { size: 18 })
                }
              )
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex-1 p-5 overflow-hidden flex flex-col gap-4", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-start gap-3 p-3 bg-primary/10 border border-primary/20 rounded-md", children: [
                /* @__PURE__ */ h.jsx(oE, { size: 16, className: "text-primary shrink-0 mt-0.5" }),
                /* @__PURE__ */ h.jsx("p", { className: "text-sm text-foreground/80 leading-relaxed", children: "" })
              ] }),
              /* @__PURE__ */ h.jsx(
                "textarea",
                {
                  value: i,
                  onChange: (g) => a(g.target.value),
                  className: "flex-1 w-full min-h-[200px] p-4 bg-muted border border-border rounded-md font-mono text-sm text-foreground leading-relaxed placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring resize-none",
                  spellCheck: !1,
                  placeholder: "..."
                }
              ),
              /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground text-right font-mono", children: [
                i.length,
                " "
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between px-5 py-4 border-t border-border bg-muted/30", children: [
              /* @__PURE__ */ h.jsx("div", { children: (n == null ? void 0 : n.onReroll) && /* @__PURE__ */ h.jsxs(
                "button",
                {
                  onClick: p,
                  disabled: o,
                  className: "group inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-all duration-[var(--duration-fast)] hover:scale-[1.02] active:scale-95 disabled:opacity-50",
                  children: [
                    o ? /* @__PURE__ */ h.jsx($u, { size: 16, className: "animate-spin" }) : /* @__PURE__ */ h.jsx(Or, { size: 16, className: "transition-transform duration-[var(--duration-slow)] group-hover:rotate-180" }),
                    ""
                  ]
                }
              ) }),
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
                /* @__PURE__ */ h.jsx(
                  "button",
                  {
                    onClick: f,
                    disabled: o,
                    className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-all duration-[var(--duration-fast)] hover:scale-[1.02] active:scale-95 disabled:opacity-50",
                    children: ""
                  }
                ),
                /* @__PURE__ */ h.jsxs(
                  "button",
                  {
                    onClick: c,
                    disabled: o,
                    className: "inline-flex items-center gap-2 px-4 py-2 text-sm bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-all duration-[var(--duration-fast)] hover:scale-[1.02] hover:shadow-[0_0_15px_var(--primary)] active:scale-95 disabled:opacity-50 shadow-sm",
                    children: [
                      /* @__PURE__ */ h.jsx(Gx, { size: 16 }),
                      ""
                    ]
                  }
                )
              ] })
            ] })
          ] })
        ]
      }
    ),
    document.body
  ) : null;
}, Wne = ({
  isOpen: e,
  onClose: t,
  title: n,
  children: r,
  initialPosition: i,
  width: a = 320,
  minWidth: o = 280,
  maxWidth: u = 600,
  minHeight: c = 150,
  resizable: f = !0
}) => {
  const p = B.useRef(null), [g, x] = B.useState(i || { x: 100, y: 100 }), [b, _] = B.useState({ width: a, height: "auto" }), [E, k] = B.useState(!1), [T, R] = B.useState(!1), N = B.useRef({ x: 0, y: 0 }), O = B.useRef({ width: 0, height: 0, x: 0, y: 0 });
  B.useEffect(() => {
    e && !i && x({
      x: Math.max(50, (window.innerWidth - a) / 2),
      y: Math.max(50, window.innerHeight - 450)
    });
  }, [e, i, a]);
  const P = B.useCallback((Y) => {
    if (!p.current) return;
    const W = p.current.getBoundingClientRect();
    N.current = {
      x: Y.clientX - W.left,
      y: Y.clientY - W.top
    }, k(!0);
  }, []), z = B.useCallback((Y) => {
    if (E) {
      const W = Math.max(0, Math.min(window.innerWidth - (typeof b.width == "number" ? b.width : 300), Y.clientX - N.current.x)), F = Math.max(0, Math.min(window.innerHeight - 100, Y.clientY - N.current.y));
      x({ x: W, y: F });
    } else if (T && p.current) {
      const W = Y.clientX - O.current.x, F = Y.clientY - O.current.y, X = Math.max(o, Math.min(u, O.current.width + W)), me = Math.max(c, O.current.height + F);
      _({ width: X, height: me });
    }
  }, [E, T, b.width, o, u, c]), q = B.useCallback(() => {
    k(!1), R(!1);
  }, []), G = B.useCallback((Y) => {
    if (Y.preventDefault(), Y.stopPropagation(), !p.current) return;
    const W = p.current.getBoundingClientRect();
    O.current = {
      width: W.width,
      height: W.height,
      x: Y.clientX,
      y: Y.clientY
    }, R(!0);
  }, []);
  return B.useEffect(() => {
    if (E || T)
      return window.addEventListener("mousemove", z), window.addEventListener("mouseup", q), () => {
        window.removeEventListener("mousemove", z), window.removeEventListener("mouseup", q);
      };
  }, [E, T, z, q]), e ? L5.createPortal(
    /* @__PURE__ */ h.jsxs(
      "div",
      {
        ref: p,
        className: "fixed z-[11000] flex flex-col rounded-lg shadow-2xl border border-border overflow-hidden engram-animate-scale-in",
        style: {
          left: g.x,
          top: g.y,
          width: b.width,
          height: b.height === "auto" ? "auto" : b.height,
          minHeight: c,
          backgroundColor: "var(--popover, #1a1a2e)",
          backdropFilter: "blur(20px)",
          WebkitBackdropFilter: "blur(20px)"
        },
        children: [
          /* @__PURE__ */ h.jsxs(
            "div",
            {
              className: "flex items-center justify-between px-3 py-2 border-b border-border select-none",
              onMouseDown: P,
              style: {
                cursor: E ? "grabbing" : "grab",
                backgroundColor: "var(--surface, rgba(255,255,255,0.05))"
              },
              children: [
                /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ h.jsx(eD, { size: 14, className: "text-muted-foreground" }),
                  /* @__PURE__ */ h.jsx("span", { className: "text-sm font-medium text-foreground", children: n })
                ] }),
                /* @__PURE__ */ h.jsx(
                  "button",
                  {
                    onClick: t,
                    className: "p-1 text-muted-foreground hover:text-foreground rounded transition-all duration-[var(--duration-fast)] hover:rotate-90 hover:bg-accent",
                    style: { backgroundColor: "transparent" },
                    "aria-label": "",
                    onMouseDown: (Y) => Y.stopPropagation(),
                    children: /* @__PURE__ */ h.jsx(gm, { size: 14 })
                  }
                )
              ]
            }
          ),
          /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-auto p-3", children: r }),
          f && /* @__PURE__ */ h.jsx(
            "div",
            {
              className: "absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",
              onMouseDown: G,
              style: {
                background: "linear-gradient(135deg, transparent 50%, var(--border, #333) 50%)"
              }
            }
          )
        ]
      }
    ),
    document.body
  ) : null;
};
function Zne({ isOpen: e, onClose: t }) {
  var g, x, b, _;
  const [n, r] = B.useState(
    Hd.getConfig() || Y0
  ), [i, a] = B.useState(
    ((g = tt.get("apiSettings")) == null ? void 0 : g.recallConfig) || {}
  ), [o, u] = B.useState(
    ((x = tt.get("apiSettings")) == null ? void 0 : x.promptTemplates) || []
  ), c = B.useMemo(() => o.filter((E) => E.category === "preprocessing").map((E) => ({
    id: E.id,
    name: E.name,
    description: E.userPromptTemplate.slice(0, 30).replace(/\n/g, " ") + "...",
    icon: oD
  })), [o]);
  B.useEffect(() => {
    if (!e) return;
    const E = () => {
      const T = Hd.getConfig() || Y0;
      r((N) => JSON.stringify(N) !== JSON.stringify(T) ? T : N);
      const R = tt.get("apiSettings");
      if (R) {
        const N = R.recallConfig || {};
        a((P) => JSON.stringify(P) !== JSON.stringify(N) ? N : P);
        const O = R.promptTemplates || [];
        O.length !== o.length && u(O);
      }
    };
    E();
    const k = setInterval(E, 1e3);
    return () => clearInterval(k);
  }, [e, o.length]);
  const f = B.useCallback(() => {
    const E = (i == null ? void 0 : i.usePreprocessing) ?? !1, k = !E;
    pe.debug("QuickPanel", "", { from: E, to: k });
    const T = tt.get("apiSettings");
    if (T && T.recallConfig) {
      const N = { ...T.recallConfig, usePreprocessing: k };
      tt.set("apiSettings", {
        ...T,
        recallConfig: N
      });
    }
    const R = { ...n, enabled: k };
    r(R), tt.set("preprocessingConfig", R);
  }, [n, i]), p = B.useCallback((E) => {
    pe.debug("QuickPanel", "", { templateId: E });
    const k = { ...n, templateId: E, enabled: !0 };
    r(k), tt.set("preprocessingConfig", k);
    const T = tt.get("apiSettings");
    if (T && T.recallConfig && !T.recallConfig.usePreprocessing) {
      const R = { ...T.recallConfig, usePreprocessing: !0 };
      tt.set("apiSettings", {
        ...T,
        recallConfig: R
      });
    }
  }, [n]);
  return !n.templateId || c.some((E) => E.id === n.templateId), /* @__PURE__ */ h.jsx(
    Wne,
    {
      isOpen: e,
      onClose: t,
      title: "Engram ",
      width: 300,
      children: /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
        /* @__PURE__ */ h.jsxs(
          "div",
          {
            className: "flex items-center justify-between p-2 rounded-md",
            style: {
              backgroundColor: "var(--surface, rgba(255,255,255,0.05))",
              border: "1px solid var(--border, rgba(255,255,255,0.1))"
            },
            children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ h.jsx(ta, { size: 14, style: { color: "var(--primary, #ef7357)" } }),
                /* @__PURE__ */ h.jsx("span", { className: "text-sm font-medium", children: "" })
              ] }),
              /* @__PURE__ */ h.jsx(
                ui,
                {
                  checked: (i == null ? void 0 : i.usePreprocessing) ?? n.enabled,
                  onChange: f
                }
              )
            ]
          }
        ),
        ((i == null ? void 0 : i.usePreprocessing) ?? n.enabled) && /* @__PURE__ */ h.jsxs(
          "div",
          {
            className: "flex items-center justify-between p-2 rounded-md",
            style: {
              backgroundColor: "var(--surface, rgba(255,255,255,0.05))",
              border: "1px solid var(--border, rgba(255,255,255,0.1))"
            },
            children: [
              /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-2 pl-2", children: /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground", children: "" }) }),
              /* @__PURE__ */ h.jsx(
                ui,
                {
                  checked: n.preview,
                  onChange: () => {
                    const E = { ...n, preview: !n.preview };
                    r(E), Promise.resolve().then(() => H5).then(({ SettingsManager: k }) => {
                      k.set("preprocessingConfig", E);
                    });
                  }
                }
              )
            ]
          }
        ),
        ((i == null ? void 0 : i.usePreprocessing) ?? n.enabled) && /* @__PURE__ */ h.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ h.jsx("div", { className: "text-xs px-1", style: { color: "var(--muted-foreground, #888)" }, children: "" }),
          c.length === 0 ? /* @__PURE__ */ h.jsxs(
            "div",
            {
              className: "flex items-start gap-2 p-2 rounded-md text-xs mt-2",
              style: {
                backgroundColor: "rgba(var(--primary-rgb, 239,115,87), 0.1)",
                border: "1px solid rgba(var(--primary-rgb, 239,115,87), 0.3)",
                color: "var(--muted-foreground, #888)"
              },
              children: [
                /* @__PURE__ */ h.jsx(rf, { size: 14, style: { color: "var(--primary, #ef7357)", flexShrink: 0, marginTop: 2 } }),
                /* @__PURE__ */ h.jsx("span", { children: " API    'preprocessing' " })
              ]
            }
          ) : /* @__PURE__ */ h.jsx("div", { className: "space-y-1", children: c.map((E) => {
            const k = E.icon, T = n.templateId === E.id;
            return /* @__PURE__ */ h.jsxs(
              "button",
              {
                onClick: () => p(E.id),
                className: "w-full flex items-center gap-3 p-2 rounded-md transition-all text-left",
                style: {
                  backgroundColor: T ? "rgba(var(--primary-rgb, 239,115,87), 0.15)" : "var(--surface, rgba(255,255,255,0.05))",
                  border: T ? "1px solid var(--primary, #ef7357)" : "1px solid var(--border, rgba(255,255,255,0.1))",
                  color: "var(--foreground, #fff)"
                },
                children: [
                  /* @__PURE__ */ h.jsx(
                    k,
                    {
                      size: 16,
                      style: {
                        color: T ? "var(--primary, #ef7357)" : "var(--muted-foreground, #888)"
                      }
                    }
                  ),
                  /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
                    /* @__PURE__ */ h.jsx("div", { className: "text-sm font-medium truncate", children: E.name }),
                    /* @__PURE__ */ h.jsx(
                      "div",
                      {
                        className: "text-xs truncate",
                        style: { color: "var(--muted-foreground, #888)" },
                        children: E.description
                      }
                    )
                  ] })
                ]
              },
              E.id
            );
          }) })
        ] }),
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "text-xs text-center pt-2",
            style: {
              borderTop: "1px solid var(--border, rgba(255,255,255,0.1))",
              color: "var(--muted-foreground, #888)"
            },
            children: (i == null ? void 0 : i.usePreprocessing) ?? n.enabled ? (b = c.find((E) => E.id === n.templateId)) != null && b.name ? `  ${(_ = c.find((E) => E.id === n.templateId)) == null ? void 0 : _.name}` : "  " : ""
          }
        )
      ] })
    }
  );
}
let FE = !1, UE = null;
function AP(e) {
  UE = e;
}
function VE() {
  if (FE)
    return pe.debug("QuickPanelButton", ""), !0;
  const e = document.querySelector("#send_form");
  if (!e)
    return pe.warn("QuickPanelButton", "#send_form "), !1;
  window.getComputedStyle(e).position === "static" && (e.style.position = "relative");
  const n = document.createElement("div");
  n.id = "engram-quick-panel-trigger", n.className = "fa-solid fa-brain", n.title = "Engram ", n.style.cssText = `
        position: absolute;
        top: 0.5em;
        left: 0.5em;
        width: 1.5em;
        height: 1.5em;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9em;
        cursor: pointer;
        color: var(--SmartThemeBodyColor, #ccc);
        opacity: 0.6;
        transition: all 0.2s ease;
        z-index: 1000;
    `;
  const r = window.getComputedStyle(e).paddingLeft, i = parseFloat(r) < 30 ? "30px" : r;
  return e.style.paddingLeft = i, n.addEventListener("mouseenter", () => {
    n.style.opacity = "1", n.style.color = "var(--SmartThemeEmColor, #fff)";
  }), n.addEventListener("mouseleave", () => {
    n.style.opacity = "0.7", n.style.color = "var(--SmartThemeBodyColor, #ccc)";
  }), n.addEventListener("click", (a) => {
    a.preventDefault(), a.stopPropagation(), pe.debug("QuickPanelButton", ""), UE ? UE() : pe.warn("QuickPanelButton", "");
  }), e.appendChild(n), FE = !0, pe.info("QuickPanelButton", " ()"), !0;
}
function Xne() {
  if (VE())
    return;
  const e = new MutationObserver((t, n) => {
    VE() && n.disconnect();
  });
  e.observe(document.body, {
    childList: !0,
    subtree: !0
  }), setTimeout(() => {
    e.disconnect(), FE || pe.warn("QuickPanelButton", " #send_form ");
  }, 1e4);
}
const Qne = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  initQuickPanelButton: Xne,
  injectQuickPanelButton: VE,
  setQuickPanelCallback: AP
}, Symbol.toStringTag, { value: "Module" }));
let nx = !1, om = null, HE = null;
function Jne() {
  om && (nx = !nx, om(nx));
}
function ere() {
  HE && HE();
}
function tre(e) {
  HE = e;
}
zX((e, t) => {
  const n = YO.createRoot(e);
  return n.render(dy.createElement(Kne, { onClose: t })), n;
});
function nre() {
  const [e, t] = B.useState(nx);
  return B.useEffect(() => (om = t, () => {
    om = null;
  }), []), /* @__PURE__ */ h.jsxs("div", { className: "pointer-events-auto", children: [
    /* @__PURE__ */ h.jsx(Yne, {}),
    /* @__PURE__ */ h.jsx(
      Zne,
      {
        isOpen: e,
        onClose: () => t(!1)
      }
    )
  ] });
}
PX((e) => {
  const t = YO.createRoot(e);
  return t.render(/* @__PURE__ */ h.jsx(nre, {})), t;
});
AP(() => {
  om && om(!0);
});
document.readyState === "loading" ? document.addEventListener("DOMContentLoaded", k6) : k6();
const jP = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  openCommandPalette: ere,
  setCommandPaletteCallback: tre,
  toggleQuickPanel: Jne
}, Symbol.toStringTag, { value: "Module" })), Rp = "__ENGRAM_STATE__", M1 = {
  lastSummarizedFloor: 0,
  totalSummaries: 0,
  totalTokens: 0,
  updatedAt: Date.now()
};
class GE {
  /**
   * 
   */
  static async loadState(t) {
    try {
      const n = await Yr.findEntryByKey(t, Rp);
      if (!n)
        return { ...M1 };
      try {
        const r = JSON.parse(n.content);
        return { ...M1, ...r };
      } catch (r) {
        return pe.warn("WorldBookStateService", "", r), { ...M1 };
      }
    } catch (n) {
      return pe.error("WorldBookStateService", "", n), { ...M1 };
    }
  }
  /**
   * 
   */
  static async saveState(t, n) {
    try {
      const i = {
        ...await this.loadState(t),
        ...n,
        updatedAt: Date.now()
      }, a = JSON.stringify(i, null, 2), u = (await Yr.getEntries(t)).filter(
        (c) => c.name === "Engram System State" || c.keys.includes(Rp)
      );
      if (u.length > 0) {
        u.sort((g, x) => {
          const b = g.keys.includes(Rp) ? 1 : 0;
          return (x.keys.includes(Rp) ? 1 : 0) - b;
        });
        const [c, ...f] = u;
        if (f.length > 0) {
          pe.warn("WorldBookStateService", ` ${f.length} ...`);
          for (const g of f)
            await Yr.deleteEntry(t, g.uid);
        }
        pe.debug("WorldBookStateService", "", { uid: c.uid, state: i });
        const p = {
          content: a,
          name: "Engram System State",
          enabled: !1,
          constant: !1,
          keys: [Rp],
          recursion: {
            prevent_incoming: !0,
            prevent_outgoing: !0
          },
          position: "before_character_definition",
          order: 0
        };
        return await Yr.updateEntry(t, c.uid, p);
      } else {
        pe.debug("WorldBookStateService", "", { state: i });
        const c = {
          name: "Engram System State",
          content: a,
          keys: [Rp],
          enabled: !1,
          constant: !1,
          position: "before_character_definition",
          role: "system",
          order: 0,
          recursion: {
            prevent_incoming: !0,
            prevent_outgoing: !0
          }
        };
        return await Yr.createEntry(t, c);
      }
    } catch (r) {
      return pe.error("WorldBookStateService", "", r), !1;
    }
  }
}
const rre = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  WorldBookStateService: GE
}, Symbol.toStringTag, { value: "Module" }));
class NP {
  static init() {
    if (!this.isInitialized)
      try {
        const t = eo();
        if (!(t != null && t.eventSource) || !(t != null && t.event_types)) {
          pe.warn(qe.DATA_CLEANUP, "");
          return;
        }
        t.event_types.CHARACTER_DELETED && (t.eventSource.on(t.event_types.CHARACTER_DELETED, this.onCharacterDeleted.bind(this)), pe.debug(qe.DATA_CLEANUP, " CHARACTER_DELETED ")), t.event_types.CHAT_DELETED && (t.eventSource.on(t.event_types.CHAT_DELETED, this.onChatDeleted.bind(this)), pe.debug(qe.DATA_CLEANUP, " CHAT_DELETED ")), t.event_types.GROUP_CHAT_DELETED && (t.eventSource.on(t.event_types.GROUP_CHAT_DELETED, this.onChatDeleted.bind(this)), pe.debug(qe.DATA_CLEANUP, " GROUP_CHAT_DELETED ")), this.isInitialized = !0;
      } catch (t) {
        pe.error(qe.DATA_CLEANUP, "", t);
      }
  }
  /**
   * 
   */
  static async onCharacterDeleted(t) {
    var a;
    const n = tt.getSettings().linkedDeletion;
    if (!(n != null && n.enabled) || !(n != null && n.deleteWorldbook)) return;
    pe.debug(qe.DATA_CLEANUP, "", t);
    const r = t.character, i = (r == null ? void 0 : r.name) || (r == null ? void 0 : r.avatar) || (r == null ? void 0 : r.ch_name) || ((a = r == null ? void 0 : r.data) == null ? void 0 : a.name);
    if (!i) {
      pe.warn(qe.DATA_CLEANUP, "");
      return;
    }
    await this.deleteEngramWorldbooks(i, "", n.showConfirmation);
  }
  /**
   * 
   * @param chatId  ID "CharName - 2024-1-1@12h30m" 
   */
  static async onChatDeleted(t) {
    const n = tt.getSettings().linkedDeletion;
    if (!(n != null && n.enabled)) return;
    pe.debug(qe.DATA_CLEANUP, "", { chatId: t });
    try {
      const { deleteDatabase: i, hasDbForChat: a } = await Promise.resolve().then(() => GV);
      a(t) && (await i(t), pe.info(qe.DATA_CLEANUP, ` IndexedDB: ${t}`), Zt.info(" Engram ", "Engram"));
    } catch (i) {
      pe.error(qe.DATA_CLEANUP, `: ${t}`, i);
    }
    if (!n.deleteChatWorldbook) return;
    const r = this.extractCharacterNameFromChatId(t);
    if (!r) {
      pe.debug(qe.DATA_CLEANUP, " chatId ");
      return;
    }
    await this.deleteEngramWorldbooks(r, "", n.showConfirmation);
  }
  /**
   *  chatId 
   */
  static extractCharacterNameFromChatId(t) {
    if (!t) return null;
    let n = t.match(/^(.+?)\s*-\s*\d{4}/);
    return n || (n = t.match(/^(.+?)_\d{4}/), n) ? n[1].trim() : null;
  }
  /**
   *  Engram 
   */
  static async deleteEngramWorldbooks(t, n, r) {
    const i = /* @__PURE__ */ new Set();
    i.add(`[Engram] ${t}`), i.add(`Engram_${t}`);
    const a = await Yr.getWorldbookNames(), o = new Set(a), u = Array.from(i).filter((p) => {
      if (!o.has(p)) return !1;
      const g = p.toLowerCase().includes("engram");
      return g || pe.debug(qe.DATA_CLEANUP, ` Engram : ${p}`), g;
    });
    if (u.length === 0) {
      pe.debug(qe.DATA_CLEANUP, ` "${t}"  Engram `);
      return;
    }
    if (pe.info(qe.DATA_CLEANUP, "", { books: u }), r) {
      const p = `
                <div style="font-size: 0.9em;">
                    <h3> Engram </h3>
                    <p>${n} <b>${t}</b> </p>
                    <p> Engram </p>
                    <ul style="max-height: 100px; overflow-y: auto; background: var(--black50a); padding: 5px; border-radius: 4px; list-style: none; margin: 10px 0;">
                        ${u.map((x) => `<li style="padding: 2px 0;"> ${x}</li>`).join("")}
                    </ul>
                    <p></p>
                    <small style="opacity: 0.7;"></small>
                </div>
            `;
      if (!await qX(p, "confirm")) {
        pe.info(qe.DATA_CLEANUP, "");
        return;
      }
    }
    let c = 0;
    const f = [];
    Zt.info(" Engram ...", "Engram");
    for (const p of u)
      try {
        await Yr.deleteWorldbook(p) ? (c++, pe.debug(qe.DATA_CLEANUP, `: ${p}`)) : f.push(p);
      } catch (g) {
        pe.error(qe.DATA_CLEANUP, ` ${p} `, g), f.push(p);
      }
    c > 0 && Zt.success(` ${c} `, "Engram"), f.length > 0 && Zt.warning(`: ${f.join(", ")}`, "Engram");
  }
}
yt(NP, "isInitialized", !1);
const ire = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  CharacterDeleteService: NP
}, Symbol.toStringTag, { value: "Module" })), Ws = "KeyboardManager";
class sre {
  constructor() {
    yt(this, "shortcuts", /* @__PURE__ */ new Map());
    yt(this, "isEnabled", !1);
    yt(this, "boundKeydownHandler");
    this.boundKeydownHandler = this.handleKeydown.bind(this), pe.debug(Ws, "");
  }
  /**
   * 
   */
  start() {
    var t;
    if (this.isEnabled) {
      pe.debug(Ws, "");
      return;
    }
    try {
      const n = (t = window.parent) == null ? void 0 : t.document;
      n && n !== document && (n.addEventListener("keydown", this.boundKeydownHandler, !0), pe.debug(Ws, ""));
    } catch (n) {
      pe.warn(Ws, "", n);
    }
    try {
      document.addEventListener("keydown", this.boundKeydownHandler, !0), pe.debug(Ws, "");
    } catch (n) {
      pe.warn(Ws, "", n);
    }
    this.isEnabled = !0, pe.info(Ws, "");
  }
  /**
   * 
   */
  stop() {
    var t;
    if (this.isEnabled) {
      try {
        const n = (t = window.parent) == null ? void 0 : t.document;
        n && n !== document && n.removeEventListener("keydown", this.boundKeydownHandler, !0);
      } catch {
      }
      try {
        document.removeEventListener("keydown", this.boundKeydownHandler, !0);
      } catch {
      }
      this.isEnabled = !1, pe.debug(Ws, "");
    }
  }
  /**
   * 
   */
  register(t) {
    const n = this.generateShortcutKey(t.key, {
      ctrl: t.ctrl,
      shift: t.shift,
      alt: t.alt
    });
    this.shortcuts.set(n, {
      key: t.key.toLowerCase(),
      ctrl: t.ctrl || !1,
      shift: t.shift || !1,
      alt: t.alt || !1,
      callback: t.callback,
      description: t.description
    }), pe.debug(Ws, `: ${n} - ${t.description}`);
  }
  /**
   * 
   */
  unregister(t, n = {}) {
    const r = this.generateShortcutKey(t, n);
    this.shortcuts.has(r) && (this.shortcuts.delete(r), pe.debug(Ws, `: ${r}`));
  }
  /**
   * 
   */
  getRegisteredShortcuts() {
    return Array.from(this.shortcuts.entries()).map(([t, n]) => ({
      key: t,
      description: n.description
    }));
  }
  /**
   * 
   */
  generateShortcutKey(t, n) {
    const r = [];
    return n.ctrl && r.push("ctrl"), n.shift && r.push("shift"), n.alt && r.push("alt"), r.push(t.toLowerCase()), r.join("+");
  }
  /**
   * 
   */
  handleKeydown(t) {
    if (this.isTyping(t.target))
      return;
    const n = this.generateShortcutKey(t.key, {
      ctrl: t.ctrlKey || t.metaKey,
      // macOS  Cmd 
      shift: t.shiftKey,
      alt: t.altKey
    }), r = this.shortcuts.get(n);
    if (r) {
      pe.debug(Ws, `: ${n}`), t.preventDefault(), t.stopPropagation();
      try {
        r.callback();
      } catch (i) {
        pe.error(Ws, `: ${n}`, i);
      }
    }
  }
  /**
   * 
   */
  isTyping(t) {
    if (!t) return !1;
    const n = t.tagName;
    if (n === "INPUT" || n === "TEXTAREA" || t.isContentEditable)
      return !0;
    const r = t.id;
    return r === "send_textarea" || r === "prompt-input";
  }
  /**
   * 
   */
  destroy() {
    this.stop(), this.shortcuts.clear(), pe.debug(Ws, "");
  }
}
const Ip = new sre();
function are(e) {
  Ip.register({
    key: "e",
    ctrl: !0,
    shift: !0,
    callback: e.toggleMainPanel,
    description: "Ctrl+Shift+E - "
  }), Ip.register({
    key: "q",
    ctrl: !0,
    callback: e.toggleQuickPanel,
    description: "Ctrl+Q - "
  }), Ip.register({
    key: "k",
    ctrl: !0,
    callback: e.openCommandPalette,
    description: "Ctrl+K - "
  }), Ip.start(), pe.info(Ws, "", Ip.getRegisteredShortcuts());
}
const ore = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  keyboardManager: Ip,
  setupKeyboardShortcuts: are
}, Symbol.toStringTag, { value: "Module" })), J6 = "engram_macro_slot", ej = "Engram Memory Context";
class RP {
  /**
   *  WorldBook 
   * 
   */
  static async init() {
    if (!this.isInitialized)
      try {
        const t = await Yr.getOrCreateWorldbook();
        if (!t) {
          pe.warn("WorldBookSlotService", "");
          return;
        }
        const n = await Yr.findEntryByKey(t, J6);
        if (n) {
          pe.debug("WorldBookSlotService", "", {
            uid: n.uid,
            name: n.name
          }), this.isInitialized = !0;
          return;
        }
        await Yr.createEntry(t, {
          name: ej,
          content: "{{engramSummaries}}",
          keys: [J6],
          constant: !0,
          enabled: !0,
          position: "at_depth",
          role: "system",
          depth: 999,
          order: 9e3
          //  order
        }) ? (pe.success("WorldBookSlotService", "", {
          worldbook: t,
          name: ej
        }), this.isInitialized = !0) : pe.error("WorldBookSlotService", "");
      } catch (t) {
        pe.error("WorldBookSlotService", "", t);
      }
  }
  /**
   * 
   */
  static isReady() {
    return this.isInitialized;
  }
  /**
   * 
   */
  static reset() {
    this.isInitialized = !1;
  }
}
yt(RP, "isInitialized", !1);
const lre = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  WorldBookSlotService: RP
}, Symbol.toStringTag, { value: "Module" }));
function ure(e) {
  return new Date(e).toTimeString().slice(0, 8);
}
const cre = {
  [Jn.DEBUG]: { text: "text-zinc-500", bg: "bg-zinc-500/10" },
  [Jn.INFO]: { text: "text-blue-400", bg: "bg-blue-500/10" },
  [Jn.SUCCESS]: { text: "text-emerald-400", bg: "bg-emerald-500/10" },
  [Jn.WARN]: { text: "text-amber-400", bg: "bg-amber-500/10" },
  [Jn.ERROR]: { text: "text-red-400", bg: "bg-red-500/10" }
}, fre = ({ entry: e }) => {
  const [t, n] = B.useState(!1), r = e.data !== void 0, i = mx[e.level], a = cre[e.level];
  return /* @__PURE__ */ h.jsxs("div", { className: "group", children: [
    /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: `
                    flex items-start gap-3 px-2 py-1 rounded-sm transition-colors
                    hover:bg-white/[0.02]
                    ${r ? "cursor-pointer" : ""}
                `,
        onClick: () => r && n(!t),
        children: [
          /* @__PURE__ */ h.jsx("span", { className: "flex items-center text-zinc-600 shrink-0 mt-0.5 w-3", children: r ? t ? /* @__PURE__ */ h.jsx(Zd, { size: 12 }) : /* @__PURE__ */ h.jsx(ih, { size: 12 }) : null }),
          /* @__PURE__ */ h.jsx("span", { className: "text-zinc-600 shrink-0 tabular-nums text-[11px]", children: ure(e.timestamp) }),
          /* @__PURE__ */ h.jsx("span", { className: `
                    shrink-0 text-[10px] font-medium px-1.5 py-0.5 rounded
                    ${a.text} ${a.bg}
                `, children: i.label }),
          /* @__PURE__ */ h.jsx("span", { className: "text-zinc-500 shrink-0 text-[11px]", children: e.module }),
          /* @__PURE__ */ h.jsx("span", { className: "text-zinc-300 text-[11px] break-words flex-1 leading-relaxed", children: e.message })
        ]
      }
    ),
    t && r && /* @__PURE__ */ h.jsx("div", { className: "ml-10 mr-2 mb-1 px-3 py-2 bg-zinc-900/50 border-l-2 border-zinc-700 rounded-r text-[10px]", children: /* @__PURE__ */ h.jsx("pre", { className: "m-0 text-zinc-400 whitespace-pre-wrap break-words font-mono", children: JSON.stringify(e.data, null, 2) }) })
  ] });
}, dre = {
  summarize: { label: "", color: "bg-blue-500/20 text-blue-400" },
  trim: { label: "", color: "bg-yellow-500/20 text-yellow-500" },
  vectorize: { label: "", color: "bg-purple-500/20 text-purple-400" },
  query: { label: "", color: "bg-green-500/20 text-green-400" },
  entity_extraction: { label: "", color: "bg-cyan-500/20 text-cyan-400" },
  other: { label: "", color: "bg-gray-500/20 text-gray-400" }
}, hre = ({ status: e }) => {
  switch (e) {
    case "pending":
      return /* @__PURE__ */ h.jsx($u, { size: 14, className: "animate-spin text-yellow-400" });
    case "success":
      return /* @__PURE__ */ h.jsx(M5, { size: 14, className: "text-green-400" });
    case "error":
      return /* @__PURE__ */ h.jsx(rf, { size: 14, className: "text-red-400" });
    case "cancelled":
      return /* @__PURE__ */ h.jsx(JO, { size: 14, className: "text-orange-400" });
  }
}, pre = (e) => new Date(e).toLocaleTimeString("zh-CN", {
  hour12: !1,
  hour: "2-digit",
  minute: "2-digit",
  second: "2-digit"
}), mre = (e) => e === void 0 ? "-" : e < 1e3 ? `${e}ms` : `${(e / 1e3).toFixed(1)}s`, gre = ({ sent: e, received: t }) => {
  const [n, r] = B.useState(!1), i = dre[e.type];
  return /* @__PURE__ */ h.jsxs("div", { className: "border border-border rounded-lg overflow-hidden bg-card", children: [
    /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: "flex items-center gap-2 px-3 py-2 bg-muted-20 cursor-pointer hover:bg-muted-30",
        onClick: () => r(!n),
        children: [
          n ? /* @__PURE__ */ h.jsx(Zd, { size: 14 }) : /* @__PURE__ */ h.jsx(ih, { size: 14 }),
          /* @__PURE__ */ h.jsx("span", { className: `px-2 py-0.5 rounded text-xs font-medium ${i.color}`, children: i.label }),
          e.model && /* @__PURE__ */ h.jsx("span", { className: "px-1.5 py-0.5 rounded text-[10px] font-medium bg-indigo-500/10 text-indigo-400 border border-indigo-500/20 truncate max-w-[150px]", title: `: ${e.model}`, children: e.model }),
          e.character && /* @__PURE__ */ h.jsx("span", { className: "px-1.5 py-0.5 rounded text-[10px] font-medium bg-orange-500/10 text-orange-400 border border-orange-500/20 truncate max-w-[120px]", title: `: ${e.character}`, children: e.character }),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground", children: pre(e.timestamp) }),
          /* @__PURE__ */ h.jsx(hre, { status: (t == null ? void 0 : t.status) || e.status }),
          e.floorRange && /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground", children: [
            " #",
            e.floorRange[0],
            "-",
            e.floorRange[1]
          ] }),
          /* @__PURE__ */ h.jsxs("span", { className: "ml-auto text-xs text-muted-foreground flex items-center gap-1", children: [
            /* @__PURE__ */ h.jsx(hx, { size: 12 }),
            mre((t == null ? void 0 : t.duration) || e.duration)
          ] })
        ]
      }
    ),
    n && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col md:flex-row", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex-1 border-r border-border p-3", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mb-2 text-sm font-medium text-blue-400", children: [
          /* @__PURE__ */ h.jsx(uU, { size: 14 }),
          "",
          e.tokensSent && /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground ml-auto", children: [
            "~",
            e.tokensSent,
            " tokens"
          ] })
        ] }),
        e.systemPrompt && /* @__PURE__ */ h.jsxs("div", { className: "mb-3", children: [
          /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground mb-1", children: "System" }),
          /* @__PURE__ */ h.jsx("div", { className: "text-sm p-2 bg-muted-20 rounded max-h-[500px] overflow-y-auto whitespace-pre-wrap", children: e.systemPrompt })
        ] }),
        e.userPrompt && /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground mb-1", children: "User" }),
          /* @__PURE__ */ h.jsx("div", { className: "text-sm p-2 bg-muted-20 rounded max-h-[500px] overflow-y-auto whitespace-pre-wrap", children: e.userPrompt })
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex-1 p-3", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mb-2 text-sm font-medium text-green-400", children: [
          /* @__PURE__ */ h.jsx(XO, { size: 14 }),
          "",
          (t == null ? void 0 : t.tokensReceived) && /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground ml-auto", children: [
            "~",
            t.tokensReceived,
            " tokens"
          ] })
        ] }),
        (t == null ? void 0 : t.status) === "error" && t.error && /* @__PURE__ */ h.jsx("div", { className: "p-2 bg-red-500/10 border border-red-500/30 rounded text-sm text-red-400", children: t.error }),
        (t == null ? void 0 : t.response) && /* @__PURE__ */ h.jsx("div", { className: "text-sm p-2 bg-muted-20 rounded max-h-[500px] overflow-y-auto whitespace-pre-wrap", children: t.response }),
        !t && e.status === "pending" && /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-sm text-muted-foreground", children: [
          /* @__PURE__ */ h.jsx($u, { size: 14, className: "animate-spin" }),
          "..."
        ] })
      ] })
    ] })
  ] });
}, yre = () => {
  const [e, t] = B.useState(Xs.getPaired());
  return B.useEffect(() => Xs.subscribe(() => {
    t(Xs.getPaired());
  }), []), /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between px-4 py-3 border-b border-border shrink-0", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ h.jsx(sf, { size: 16, className: "text-primary" }),
        /* @__PURE__ */ h.jsx("span", { className: "font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground", children: [
          "(",
          e.length,
          ")"
        ] })
      ] }),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "p-1.5 rounded-md hover:bg-destructive hover:text-destructive-foreground transition-colors text-muted-foreground",
          onClick: () => Xs.clear(),
          title: "",
          children: /* @__PURE__ */ h.jsx(Ja, { size: 14 })
        }
      )
    ] }),
    /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto p-4", children: e.length === 0 ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-full text-muted-foreground gap-3", children: [
      /* @__PURE__ */ h.jsx(XO, { size: 48, className: "opacity-30" }),
      /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "" }),
      /* @__PURE__ */ h.jsx("p", { className: "text-xs", children: "" })
    ] }) : /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-3", children: e.map(({ sent: n, received: r }) => /* @__PURE__ */ h.jsx(gre, { sent: n, received: r }, n.id)) }) })
  ] });
}, tj = 768, MP = (e) => new Date(e).toLocaleTimeString("zh-CN", {
  hour12: !1,
  hour: "2-digit",
  minute: "2-digit",
  second: "2-digit"
}), OP = (e) => e === void 0 ? "-" : e < 1e3 ? `${e}ms` : `${(e / 1e3).toFixed(1)}s`, vre = ({ entry: e, isSelected: t, onSelect: n }) => /* @__PURE__ */ h.jsxs(
  "div",
  {
    className: `
                px-3 py-2 cursor-pointer border-b border-border/30 transition-colors
                ${t ? "bg-primary/10 border-l-2 border-l-primary" : "hover:bg-muted/30"}
            `,
    onClick: n,
    children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mb-1", children: [
        /* @__PURE__ */ h.jsx("span", { className: `px-1.5 py-0.5 rounded text-[10px] font-medium ${e.mode === "hybrid" ? "bg-purple-500/20 text-purple-400" : "bg-blue-500/20 text-blue-400"}`, children: e.mode === "hybrid" ? "" : "Embed" }),
        /* @__PURE__ */ h.jsxs("span", { className: "text-[10px] text-muted-foreground", children: [
          e.stats.rerankCount,
          "/",
          e.stats.topKCount,
          " "
        ] }),
        /* @__PURE__ */ h.jsxs("span", { className: "text-[10px] text-muted-foreground ml-auto flex items-center gap-1", children: [
          /* @__PURE__ */ h.jsx(hx, { size: 10 }),
          MP(e.timestamp)
        ] })
      ] }),
      /* @__PURE__ */ h.jsx("p", { className: "text-sm text-foreground line-clamp-2", children: e.query }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mt-1 text-[10px] text-muted-foreground", children: [
        /* @__PURE__ */ h.jsx(sf, { size: 10 }),
        OP(e.stats.latencyMs)
      ] })
    ]
  }
), vw = ({ label: e, score: t, color: n }) => {
  const r = Math.min(100, t * 100);
  return /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-xs", children: [
    /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground w-16 shrink-0", children: e }),
    /* @__PURE__ */ h.jsx("div", { className: "flex-1 h-1.5 bg-muted/30 rounded-full overflow-hidden", children: /* @__PURE__ */ h.jsx(
      "div",
      {
        className: `h-full ${n} rounded-full transition-all duration-300`,
        style: { width: `${r}%` }
      }
    ) }),
    /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground w-14 text-right font-mono shrink-0", children: t.toFixed(3) })
  ] });
}, xre = ({ item: e }) => {
  const [t, n] = B.useState(!1);
  return /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: `
                border-b border-border/30 py-3 px-4 cursor-pointer
                hover:bg-muted/10 transition-colors
                ${e.isReranked ? "bg-purple-500/5" : e.isTopK ? "bg-blue-500/5" : ""}
            `,
      onClick: () => n(!t),
      children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mb-1.5", children: [
          e.isReranked && /* @__PURE__ */ h.jsx("span", { className: "px-1.5 py-0.5 text-[10px] bg-purple-500/20 text-purple-400 rounded", children: "Rerank" }),
          e.isTopK && !e.isReranked && /* @__PURE__ */ h.jsx("span", { className: "px-1.5 py-0.5 text-[10px] bg-blue-500/20 text-blue-400 rounded", children: "TopK" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground truncate max-w-[150px]", children: e.category }),
          e.sourceFloor && /* @__PURE__ */ h.jsxs("span", { className: "text-[10px] text-muted-foreground", children: [
            " #",
            e.sourceFloor
          ] }),
          /* @__PURE__ */ h.jsx(ih, { size: 12, className: `ml-auto text-muted-foreground transition-transform ${t ? "rotate-90" : ""}` })
        ] }),
        /* @__PURE__ */ h.jsx("p", { className: `text-sm text-foreground ${t ? "" : "line-clamp-2"}`, children: e.summary }),
        t && /* @__PURE__ */ h.jsxs("div", { className: "mt-3 space-y-1.5 pt-2 border-t border-border/20", children: [
          /* @__PURE__ */ h.jsx(vw, { label: "Embedding", score: e.embeddingScore, color: "bg-blue-500" }),
          e.rerankScore != null && /* @__PURE__ */ h.jsx(vw, { label: "Rerank", score: e.rerankScore, color: "bg-orange-500" }),
          e.hybridScore != null && /* @__PURE__ */ h.jsx(vw, { label: "Hybrid", score: e.hybridScore, color: "bg-purple-500" })
        ] })
      ]
    }
  );
}, nj = ({ entry: e, isFullScreen: t, onClose: n }) => {
  const [r, i] = B.useState("all"), [a, o] = B.useState("hybrid"), [u, c] = B.useState(""), f = B.useMemo(() => {
    if (!e) return [];
    let p = [...e.results];
    if (u.trim()) {
      const g = u.toLowerCase();
      p = p.filter((x) => x.summary.toLowerCase().includes(g));
    }
    return r === "topK" ? p = p.filter((g) => g.isTopK) : r === "reranked" && (p = p.filter((g) => g.isReranked)), p.sort((g, x) => {
      const b = (_) => {
        switch (a) {
          case "embedding":
            return _.embeddingScore;
          case "rerank":
            return _.rerankScore ?? 0;
          case "hybrid":
            return _.hybridScore ?? (_.rerankScore != null ? (_.embeddingScore + _.rerankScore) / 2 : _.embeddingScore);
        }
      };
      return b(x) - b(g);
    }), p;
  }, [e, r, a, u]);
  return e ? /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col h-full ${t ? "p-4" : ""}`, children: [
    t && n && /* @__PURE__ */ h.jsxs(
      "button",
      {
        onClick: n,
        className: "flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground mb-4",
        children: [
          /* @__PURE__ */ h.jsx(N5, { size: 16 }),
          ""
        ]
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "mb-4 pb-4 border-b border-border shrink-0", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mb-2", children: [
        /* @__PURE__ */ h.jsx("span", { className: `px-2 py-0.5 rounded text-xs font-medium ${e.mode === "hybrid" ? "bg-purple-500/20 text-purple-400" : "bg-blue-500/20 text-blue-400"}`, children: e.mode === "hybrid" ? "" : "" }),
        /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground", children: MP(e.timestamp) })
      ] }),
      /* @__PURE__ */ h.jsx("p", { className: "text-sm text-foreground mb-2", children: e.query }),
      e.preprocessedQuery && e.preprocessedQuery !== e.query && /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
        " : ",
        e.preprocessedQuery
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-4 mt-3 text-xs text-muted-foreground", children: [
        /* @__PURE__ */ h.jsxs("span", { children: [
          ": ",
          e.stats.totalCandidates
        ] }),
        /* @__PURE__ */ h.jsxs("span", { children: [
          "TopK: ",
          e.stats.topKCount
        ] }),
        /* @__PURE__ */ h.jsxs("span", { children: [
          "Rerank: ",
          e.stats.rerankCount
        ] }),
        /* @__PURE__ */ h.jsxs("span", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ h.jsx(sf, { size: 10 }),
          OP(e.stats.latencyMs)
        ] })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 flex-wrap mb-3 shrink-0", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1 text-xs", children: [
        /* @__PURE__ */ h.jsx(mF, { size: 12, className: "text-muted-foreground" }),
        ["all", "topK", "reranked"].map((p) => /* @__PURE__ */ h.jsx(
          "button",
          {
            className: `px-2 py-1 rounded transition-colors ${r === p ? "bg-primary/20 text-primary" : "text-muted-foreground hover:text-foreground"}`,
            onClick: () => i(p),
            children: p === "all" ? "" : p === "topK" ? "TopK" : "Reranked"
          },
          p
        ))
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "w-px h-4 bg-border" }),
      /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-1 text-xs", children: ["embedding", "rerank", "hybrid"].map((p) => /* @__PURE__ */ h.jsx(
        "button",
        {
          className: `px-2 py-1 rounded transition-colors ${a === p ? "bg-primary/20 text-primary" : "text-muted-foreground hover:text-foreground"}`,
          onClick: () => o(p),
          children: p.charAt(0).toUpperCase() + p.slice(1)
        },
        p
      )) }),
      /* @__PURE__ */ h.jsx("div", { className: "w-px h-4 bg-border" }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1.5 text-muted-foreground", children: [
        /* @__PURE__ */ h.jsx(ta, { size: 12 }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            placeholder: "...",
            value: u,
            onChange: (p) => c(p.target.value),
            className: "bg-transparent border-none outline-none text-xs text-foreground placeholder:text-muted-foreground w-24"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto -mx-4 md:mx-0", children: f.length === 0 ? /* @__PURE__ */ h.jsx("div", { className: "py-8 text-center text-muted-foreground text-sm", children: "" }) : f.map((p, g) => /* @__PURE__ */ h.jsx(xre, { item: p }, g)) }),
    /* @__PURE__ */ h.jsxs("div", { className: "text-[10px] text-muted-foreground py-2 border-t border-border mt-2 shrink-0", children: [
      " ",
      f.length,
      " / ",
      e.results.length,
      " "
    ] })
  ] }) : /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-full text-muted-foreground gap-3", children: [
    /* @__PURE__ */ h.jsx(I5, { size: 32, className: "opacity-30" }),
    /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "" })
  ] });
}, bre = () => {
  const [e, t] = B.useState(tx.getLogs()), [n, r] = B.useState(null), [i, a] = B.useState(window.innerWidth < tj), [o, u] = B.useState(!1);
  B.useEffect(() => {
    const g = () => {
      a(window.innerWidth < tj);
    };
    return window.addEventListener("resize", g), () => window.removeEventListener("resize", g);
  }, []), B.useEffect(() => tx.subscribe((x) => {
    t(x);
  }), []);
  const c = B.useMemo(() => e.find((g) => g.id === n) || null, [e, n]), f = (g) => {
    r(g), i && u(!0);
  }, p = () => {
    u(!1), i && r(null);
  };
  return i && o && c ? /* @__PURE__ */ h.jsx(
    nj,
    {
      entry: c,
      isFullScreen: !0,
      onClose: p
    }
  ) : /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between px-4 py-3 border-b border-border shrink-0", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ h.jsx(I5, { size: 16, className: "text-primary" }),
        /* @__PURE__ */ h.jsx("span", { className: "font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground", children: [
          "(",
          e.length,
          ")"
        ] })
      ] }),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "p-1.5 rounded-md hover:bg-destructive hover:text-destructive-foreground transition-colors text-muted-foreground",
          onClick: () => tx.clear(),
          title: "",
          children: /* @__PURE__ */ h.jsx(Ja, { size: 14 })
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex-1 flex min-h-0", children: [
      /* @__PURE__ */ h.jsx("div", { className: `
                    ${i ? "w-full" : "w-[30%] min-w-[240px]"}
                    overflow-y-auto
                    ${i ? "" : "border-r border-border/50"}
                `, children: e.length === 0 ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-full text-muted-foreground gap-3 p-4", children: [
        /* @__PURE__ */ h.jsx(py, { size: 32, className: "opacity-30" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs opacity-70", children: " RAG " })
      ] }) : e.map((g) => /* @__PURE__ */ h.jsx(
        vre,
        {
          entry: g,
          isSelected: g.id === n,
          onSelect: () => f(g.id)
        },
        g.id
      )) }),
      !i && /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto p-4", children: /* @__PURE__ */ h.jsx(nj, { entry: c }) })
    ] })
  ] });
}, DP = ({ tabs: e, activeTab: t, onChange: n, sticky: r = !0, top: i = 0, className: a = "", actions: o }) => /* @__PURE__ */ h.jsxs(
  "div",
  {
    className: `
            flex items-center justify-between gap-4 mb-6 border-b border-border
            ${r ? "glass-sticky sticky z-20 pt-4 pb-0 -mt-4 -mx-4 px-4 md:-mx-8 md:px-8 lg:-mx-12 lg:px-12" : "px-0"}
            ${a}
        `,
    style: r ? {
      top: i
    } : void 0,
    children: [
      /* @__PURE__ */ h.jsx("div", { className: "flex overflow-x-auto gap-2 pb-1 no-scrollbar", children: e.map((u) => /* @__PURE__ */ h.jsxs(
        "button",
        {
          onClick: () => n(u.id),
          className: `
                        group flex items-center gap-2 whitespace-nowrap px-4 py-1.5 text-sm relative
                        transition-colors duration-[var(--duration-fast)] ease-[var(--ease-out)]
                        ${t === u.id ? "text-foreground" : "text-muted-foreground hover:text-foreground"}
                    `,
          children: [
            u.icon && /* @__PURE__ */ h.jsx("span", { className: "w-4 h-4 transition-transform duration-[var(--duration-fast)] group-hover:scale-110", children: u.icon }),
            u.label,
            t === u.id && /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "absolute -bottom-[1px] left-0 right-0 h-[2px] bg-primary shadow-[0_0_8px_var(--primary)] z-10",
                style: {
                  animation: "scale-in var(--duration-fast, 150ms) var(--ease-spring, cubic-bezier(0.34, 1.56, 0.64, 1))"
                }
              }
            )
          ]
        },
        u.id
      )) }),
      o && /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-2 pb-1 shrink-0", children: o })
    ]
  }
), xy = (e) => {
  const [t, n] = B.useState(!1);
  B.useEffect(() => (n(!0), () => n(!1)), []);
  const r = document.getElementById("engram-header-extension");
  if (!t || !r)
    return null;
  const i = {
    ...e,
    sticky: !1,
    className: `!mb-0 !border-0 !bg-transparent px-4 md:px-8 lg:px-12 ${e.className || ""}`
  };
  return lD.createPortal(
    /* @__PURE__ */ h.jsx(DP, { ...i }),
    r
  );
}, wre = [
  { id: "runtime", label: "", icon: /* @__PURE__ */ h.jsx(Zx, { size: 14 }) },
  { id: "model", label: "", icon: /* @__PURE__ */ h.jsx(sf, { size: 14 }) },
  { id: "recall", label: "", icon: /* @__PURE__ */ h.jsx(I5, { size: 14 }) }
], _re = {
  runtime: { title: "", subtitle: "" },
  model: { title: "", subtitle: " LLM " },
  recall: { title: "", subtitle: " RAG " }
}, Sre = ["ALL", ...CD], Cre = ({ initialTab: e }) => {
  const [t, n] = B.useState(e || "runtime"), r = _re[t], [i, a] = B.useState([]), [o, u] = B.useState([]), [c, f] = B.useState(""), [p, g] = B.useState(-1), [x, b] = B.useState("ALL"), [_, E] = B.useState(!0), [k, T] = B.useState(!1), [R, N] = B.useState(!1), O = B.useRef(null);
  B.useEffect(() => {
    a(pe.getLogs());
    const q = pe.subscribe((G) => {
      a((Y) => [...Y, G]);
    });
    return () => q();
  }, []), B.useEffect(() => {
    let q = i;
    if (p !== -1 && (q = q.filter((G) => G.level >= p)), x !== "ALL" && (q = q.filter((G) => G.module.startsWith(x))), c.trim()) {
      const G = c.toLowerCase();
      q = q.filter(
        (Y) => Y.message.toLowerCase().includes(G) || Y.module.toLowerCase().includes(G)
      );
    }
    u(q);
  }, [i, p, x, c]), B.useEffect(() => {
    _ && O.current && O.current.scrollIntoView({ behavior: "smooth", block: "nearest" });
  }, [o, _]);
  const P = B.useCallback(async () => {
    await pe.clear(), a([]);
  }, []), z = B.useCallback(() => {
    const q = pe.exportToMarkdown(), G = pe.getExportFilename(), Y = new Blob([q], { type: "text/markdown" }), W = URL.createObjectURL(Y), F = document.createElement("a");
    F.href = W, F.download = G, F.click(), URL.revokeObjectURL(W), pe.success("DevLog", `: ${G}`);
  }, []);
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ h.jsx(
      xm,
      {
        breadcrumbs: [""],
        title: r.title,
        subtitle: r.subtitle,
        className: "mb-2"
      }
    ),
    /* @__PURE__ */ h.jsx(
      xy,
      {
        tabs: wre,
        activeTab: t,
        onChange: (q) => n(q)
      }
    ),
    t === "runtime" && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col flex-1 min-h-0", children: [
      /* @__PURE__ */ h.jsx("div", { className: "sticky top-0 z-10 bg-background/95 backdrop-blur-sm py-3 -mx-4 px-4 md:-mx-8 md:px-8 lg:-mx-12 lg:px-12 border-b border-border", children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 flex-wrap", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
          /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",
              onClick: () => T(!k),
              children: [
                p === -1 ? "" : mx[p].label,
                /* @__PURE__ */ h.jsx(Zd, { size: 12 })
              ]
            }
          ),
          k && /* @__PURE__ */ h.jsxs("div", { className: "absolute top-full left-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-20 min-w-[100px] py-1 flex flex-col", children: [
            /* @__PURE__ */ h.jsx(
              "button",
              {
                className: "block w-full text-left px-3 py-1.5 text-xs hover:bg-accent transition-colors",
                onClick: () => {
                  g(-1), T(!1);
                },
                children: ""
              }
            ),
            Object.entries(mx).map(([q, G]) => /* @__PURE__ */ h.jsxs(
              "button",
              {
                className: "block w-full text-left px-3 py-1.5 text-xs hover:bg-accent transition-colors",
                onClick: () => {
                  g(Number(q)), T(!1);
                },
                children: [
                  G.icon,
                  " ",
                  G.label
                ]
              },
              q
            ))
          ] })
        ] }),
        /* @__PURE__ */ h.jsx("div", { className: "w-px h-4 bg-border" }),
        /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
          /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",
              onClick: () => N(!R),
              children: [
                x,
                /* @__PURE__ */ h.jsx(Zd, { size: 12 })
              ]
            }
          ),
          R && /* @__PURE__ */ h.jsx("div", { className: "absolute top-full left-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-20 min-w-[120px] py-1 max-h-48 overflow-y-auto flex flex-col", children: Sre.map((q) => /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "block w-full text-left px-3 py-1.5 text-xs hover:bg-accent transition-colors",
              onClick: () => {
                b(q), N(!1);
              },
              children: q
            },
            q
          )) })
        ] }),
        /* @__PURE__ */ h.jsx("div", { className: "w-px h-4 bg-border" }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1.5 text-muted-foreground", children: [
          /* @__PURE__ */ h.jsx(ta, { size: 12 }),
          /* @__PURE__ */ h.jsx(
            "input",
            {
              type: "text",
              placeholder: "...",
              value: c,
              onChange: (q) => f(q.target.value),
              className: "bg-transparent border-none outline-none text-xs text-foreground placeholder:text-muted-foreground w-24 md:w-40"
            }
          )
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1 ml-auto", children: [
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: `p-1.5 rounded transition-colors ${_ ? "text-primary" : "text-muted-foreground hover:text-foreground"}`,
              onClick: () => E(!_),
              title: "",
              children: /* @__PURE__ */ h.jsx(N$, { size: 14 })
            }
          ),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "p-1.5 rounded text-muted-foreground hover:text-foreground transition-colors",
              onClick: P,
              title: "",
              children: /* @__PURE__ */ h.jsx(Ja, { size: 14 })
            }
          ),
          /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-1 px-2 py-1 text-xs text-muted-foreground hover:text-foreground transition-colors",
              onClick: z,
              children: [
                /* @__PURE__ */ h.jsx(k0, { size: 12 }),
                ""
              ]
            }
          )
        ] })
      ] }) }),
      /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto font-mono text-xs leading-relaxed py-2", children: o.length === 0 ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-full gap-3 text-muted-foreground", children: [
        /* @__PURE__ */ h.jsx(Zx, { size: 32, strokeWidth: 1, className: "opacity-30" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "" })
      ] }) : /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
        o.map((q) => /* @__PURE__ */ h.jsx(fre, { entry: q }, q.id)),
        /* @__PURE__ */ h.jsx("div", { ref: O })
      ] }) }),
      /* @__PURE__ */ h.jsxs("div", { className: "text-[10px] text-muted-foreground py-2 border-t border-border", children: [
        i.length,
        " ",
        o.length !== i.length && `  ${o.length} `
      ] })
    ] }),
    t === "model" && /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-hidden", children: /* @__PURE__ */ h.jsx(yre, {}) }),
    t === "recall" && /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-hidden", children: /* @__PURE__ */ h.jsx(bre, {}) })
  ] });
}, Ere = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DevLog: Cre
}, Symbol.toStringTag, { value: "Module" })), kre = {
  default: "text-muted-foreground bg-muted/50",
  primary: "text-primary bg-primary/10",
  blue: "text-blue-500 bg-blue-500/10",
  purple: "text-purple-500 bg-purple-500/10",
  orange: "text-orange-500 bg-orange-500/10",
  emerald: "text-emerald-500 bg-emerald-500/10"
}, Tre = ({
  icon: e,
  title: t,
  subtitle: n,
  meta: r,
  badges: i = [],
  selected: a = !1,
  disabled: o = !1,
  toggle: u,
  onClick: c,
  actions: f = [],
  className: p = "",
  compact: g = !1
}) => {
  const x = f.filter((_) => !_.hidden), b = !!u;
  return /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: `
                group relative flex items-center gap-3
                ${g ? "py-2 px-2" : "py-3 px-3"}
                rounded-lg cursor-pointer
                transition-all duration-[var(--duration-fast)] ease-[var(--ease-out)]
                hover:translate-y-[-1px] hover:shadow-sm
                ${a ? "bg-accent/60" : "hover:bg-muted/40"}
                ${o ? "opacity-50 pointer-events-none" : ""}
                ${p}
            `,
      onClick: c,
      children: [
        (e || b) && /* @__PURE__ */ h.jsx("div", { className: "flex-shrink-0", children: b ? /* @__PURE__ */ h.jsx(
          "button",
          {
            className: `
                                w-7 h-7 flex items-center justify-center rounded-md transition-colors
                                ${u.checked ? "text-primary" : "text-muted-foreground hover:text-foreground"}
                            `,
            onClick: (_) => {
              _.stopPropagation(), u.onChange(!u.checked);
            },
            children: /* @__PURE__ */ h.jsx(Wx, { size: 14 })
          }
        ) : /* @__PURE__ */ h.jsx("div", { className: `
                            w-7 h-7 flex items-center justify-center rounded-md transition-colors
                            ${a ? "text-primary" : "text-muted-foreground group-hover:text-foreground"}
                        `, children: e }) }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ h.jsx("span", { className: `
                        text-sm font-medium truncate transition-colors
                        ${a ? "text-foreground" : "text-muted-foreground group-hover:text-foreground"}
                        ${u && !u.checked ? "line-through opacity-60" : ""}
                    `, children: t }),
            i.map((_, E) => /* @__PURE__ */ h.jsx(
              "span",
              {
                className: `
                                text-[10px] px-1.5 py-0.5 rounded-sm font-medium flex-shrink-0
                                ${kre[_.color || "default"]}
                            `,
                children: _.text
              },
              E
            ))
          ] }),
          (n || r) && /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mt-0.5 text-[11px] text-muted-foreground/70", children: [
            n && /* @__PURE__ */ h.jsx("span", { className: "truncate", children: n }),
            r && /* @__PURE__ */ h.jsx("span", { className: "flex-shrink-0 font-mono", children: r })
          ] })
        ] }),
        a && !x.length && /* @__PURE__ */ h.jsx(Gx, { size: 14, className: "text-primary flex-shrink-0" }),
        x.length > 0 && /* @__PURE__ */ h.jsx("div", { className: `
                    flex items-center gap-0.5 flex-shrink-0
                    ${a ? "opacity-100" : "opacity-0 group-hover:opacity-100"}
                    transition-opacity
                `, children: x.map((_, E) => /* @__PURE__ */ h.jsx(
          "button",
          {
            className: `
                                p-1.5 rounded transition-colors
                                ${_.danger ? "text-muted-foreground hover:text-destructive hover:bg-destructive/10" : "text-muted-foreground hover:text-foreground hover:bg-muted"}
                            `,
            onClick: (k) => {
              k.stopPropagation(), _.onClick(k);
            },
            title: _.title,
            children: _.icon
          },
          E
        )) })
      ]
    }
  );
}, Are = ({
  preset: e,
  isSelected: t,
  onSelect: n,
  onEdit: r,
  onCopy: i,
  onDelete: a
}) => {
  var c;
  const o = e.source === "tavern" || e.source === "tavern_profile" ? fU : tF, u = e.source === "custom" ? ((c = e.custom) == null ? void 0 : c.model) || "" : "";
  return /* @__PURE__ */ h.jsx(
    Tre,
    {
      icon: /* @__PURE__ */ h.jsx(o, { size: 14 }),
      title: e.name,
      subtitle: u,
      meta: `T:${e.parameters.temperature}`,
      badges: e.isDefault ? [{ text: "DEFAULT", color: "primary" }] : [],
      selected: t,
      onClick: n,
      actions: [
        { icon: /* @__PURE__ */ h.jsx(WF, { size: 12 }), onClick: () => r(), title: "" },
        { icon: /* @__PURE__ */ h.jsx(O5, { size: 12 }), onClick: () => i(), title: "" },
        { icon: /* @__PURE__ */ h.jsx(Ja, { size: 12 }), onClick: () => a(), title: "", danger: !0, hidden: e.isDefault }
      ]
    }
  );
}, Qs = ({ title: e, description: t, children: n, className: r = "" }) => /* @__PURE__ */ h.jsxs("div", { className: `mb-8 ${r}`, children: [
  /* @__PURE__ */ h.jsxs("div", { className: "mb-4", children: [
    /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-primary", children: e }),
    t && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mt-1 break-words", children: t })
  ] }),
  /* @__PURE__ */ h.jsx("div", { className: "space-y-4", children: n })
] }), bs = ({
  label: e,
  description: t,
  error: n,
  required: r,
  className: i = "",
  value: a,
  onChange: o,
  placeholder: u,
  type: c = "text",
  disabled: f,
  readOnly: p,
  multiline: g,
  rows: x = 3
}) => {
  const b = {
    background: "transparent",
    backgroundColor: "transparent",
    border: "none",
    borderBottom: "1px solid var(--border)",
    borderRadius: 0,
    boxShadow: "none",
    outline: "none",
    padding: "8px 0",
    fontSize: "14px",
    width: "100%",
    color: "var(--foreground, inherit)"
  };
  return /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col gap-1 ${i}`, children: [
    /* @__PURE__ */ h.jsxs("label", { className: "text-xs text-muted-foreground flex items-center gap-1", children: [
      e,
      r && /* @__PURE__ */ h.jsx("span", { className: "text-destructive", children: "*" })
    ] }),
    g ? /* @__PURE__ */ h.jsx(
      "textarea",
      {
        value: a,
        onChange: (_) => o(_.target.value),
        placeholder: u,
        disabled: f,
        readOnly: p,
        rows: x,
        style: b,
        className: "font-mono resize-y min-h-[80px] placeholder:text-muted-foreground/40 disabled:opacity-50 focus:border-primary transition-colors"
      }
    ) : /* @__PURE__ */ h.jsx(
      "input",
      {
        type: c,
        value: a,
        onChange: (_) => o(_.target.value),
        placeholder: u,
        disabled: f,
        readOnly: p,
        style: b,
        className: "placeholder:text-muted-foreground/40 disabled:opacity-50 focus:border-primary transition-colors"
      }
    ),
    t && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-words", children: t }),
    n && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive", children: n })
  ] });
}, Rr = ({
  label: e,
  description: t,
  error: n,
  required: r,
  className: i = "",
  value: a,
  onChange: o,
  min: u,
  max: c,
  step: f = 1,
  showSlider: p = !0,
  suffix: g
}) => {
  const x = {
    background: "transparent",
    backgroundColor: "transparent",
    border: "none",
    borderRadius: 0,
    boxShadow: "none",
    outline: "none",
    padding: "0",
    fontSize: "12px",
    width: "auto",
    minWidth: "40px",
    textAlign: "right",
    fontFamily: "monospace",
    color: "var(--foreground, inherit)"
  }, b = u !== void 0 && c !== void 0 ? Math.min(100, Math.max(0, (a - u) / (c - u) * 100)) : 0;
  return /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col gap-2 ${i}`, children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between items-center", children: [
      /* @__PURE__ */ h.jsxs("label", { className: "text-xs text-muted-foreground flex items-center gap-1", children: [
        e,
        r && /* @__PURE__ */ h.jsx("span", { className: "text-destructive", children: "*" })
      ] }),
      /* @__PURE__ */ h.jsx(
        "input",
        {
          type: "number",
          min: u,
          max: c,
          step: f,
          value: a,
          onChange: (_) => o(Number(_.target.value)),
          style: x,
          className: "focus:text-primary transition-colors [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
        }
      )
    ] }),
    /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-3 pt-1", children: p && u !== void 0 && c !== void 0 && /* @__PURE__ */ h.jsxs("div", { className: "flex-1 relative h-4 flex items-center group cursor-pointer", children: [
      /* @__PURE__ */ h.jsx(
        "div",
        {
          className: "absolute inset-x-0 h-[1px]",
          style: { backgroundColor: "var(--border)" }
        }
      ),
      /* @__PURE__ */ h.jsx(
        "div",
        {
          className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
          style: { left: `${b}%`, transform: "translate(-50%, -50%)" }
        }
      ),
      /* @__PURE__ */ h.jsx(
        "input",
        {
          type: "range",
          min: u,
          max: c,
          step: f,
          value: a,
          onChange: (_) => o(Number(_.target.value)),
          className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
          style: { appearance: "none", WebkitAppearance: "none" }
        }
      )
    ] }) }),
    t && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-words", children: t }),
    n && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive", children: n })
  ] });
}, zu = ({
  label: e,
  description: t,
  error: n,
  required: r,
  className: i = "",
  value: a,
  onChange: o,
  options: u,
  placeholder: c = "...",
  disabled: f
}) => {
  const p = {
    background: "transparent",
    backgroundColor: "transparent",
    border: "none",
    borderBottom: "1px solid var(--border)",
    borderRadius: 0,
    boxShadow: "none",
    outline: "none",
    padding: "8px 24px 8px 0",
    fontSize: "14px",
    width: "100%",
    cursor: "pointer",
    color: "var(--foreground, inherit)",
    appearance: "none",
    WebkitAppearance: "none"
  };
  return /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col gap-1 ${i}`, children: [
    /* @__PURE__ */ h.jsxs("label", { className: "text-xs text-muted-foreground flex items-center gap-1", children: [
      e,
      r && /* @__PURE__ */ h.jsx("span", { className: "text-destructive", children: "*" })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
      /* @__PURE__ */ h.jsxs(
        "select",
        {
          value: a,
          onChange: (g) => o(g.target.value),
          disabled: f,
          style: p,
          className: "disabled:opacity-50 disabled:cursor-not-allowed focus:border-primary transition-colors",
          children: [
            /* @__PURE__ */ h.jsx("option", { value: "", disabled: !0, className: "bg-popover text-muted-foreground", children: c }),
            u.map((g) => /* @__PURE__ */ h.jsx("option", { value: g.value, className: "bg-popover text-foreground", children: g.label }, g.value))
          ]
        }
      ),
      /* @__PURE__ */ h.jsx(Zd, { size: 14, className: "absolute right-0 top-1/2 -translate-y-1/2 text-muted-foreground/50 pointer-events-none" })
    ] }),
    t && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-words", children: t }),
    n && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive", children: n })
  ] });
}, qo = ({
  label: e,
  description: t,
  error: n,
  className: r = "",
  checked: i,
  onChange: a,
  disabled: o,
  compact: u
}) => /* @__PURE__ */ h.jsxs("div", { className: `flex items-start justify-between gap-4 ${u ? "py-0" : "py-1"} ${r} ${o ? "opacity-50 pointer-events-none" : ""}`, children: [
  e && /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
    /* @__PURE__ */ h.jsx(
      "label",
      {
        className: "text-xs text-foreground cursor-pointer block truncate",
        onClick: () => !o && a(!i),
        children: e
      }
    ),
    t && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 mt-0.5 break-words", children: t }),
    n && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive mt-0.5", children: n })
  ] }),
  /* @__PURE__ */ h.jsx(
    ui,
    {
      checked: i,
      onChange: a,
      disabled: o
    }
  )
] }), zP = ({
  label: e,
  description: t,
  error: n,
  required: r,
  className: i = "",
  value: a,
  onChange: o,
  options: u,
  placeholder: c = "...",
  disabled: f,
  emptyText: p = ""
}) => {
  var O;
  const [g, x] = B.useState(!1), [b, _] = B.useState(""), E = B.useRef(null), k = B.useRef(null), T = u.filter(
    (P) => P.label.toLowerCase().includes(b.toLowerCase()) || P.value.toLowerCase().includes(b.toLowerCase())
  ), R = ((O = u.find((P) => P.value === a)) == null ? void 0 : O.label) || a || c;
  B.useEffect(() => {
    const P = (z) => {
      E.current && !E.current.contains(z.target) && (x(!1), _(""));
    };
    return document.addEventListener("mousedown", P), () => document.removeEventListener("mousedown", P);
  }, []), B.useEffect(() => {
    g && k.current && k.current.focus();
  }, [g]);
  const N = (P) => {
    o(P), x(!1), _("");
  };
  return /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col gap-1 ${i}`, ref: E, children: [
    /* @__PURE__ */ h.jsxs("label", { className: "text-xs text-muted-foreground flex items-center gap-1", children: [
      e,
      r && /* @__PURE__ */ h.jsx("span", { className: "text-destructive", children: "*" })
    ] }),
    /* @__PURE__ */ h.jsxs(
      "button",
      {
        type: "button",
        onClick: () => !f && x(!g),
        disabled: f,
        className: "relative w-full text-left py-2 pr-6 border-0 border-b border-border bg-transparent text-sm text-foreground cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed focus:border-primary transition-colors",
        children: [
          /* @__PURE__ */ h.jsx("span", { className: a ? "" : "text-muted-foreground", children: R }),
          /* @__PURE__ */ h.jsx(
            Zd,
            {
              size: 14,
              className: `absolute right-0 top-1/2 -translate-y-1/2 text-muted-foreground/50 transition-transform ${g ? "rotate-180" : ""}`
            }
          )
        ]
      }
    ),
    g && /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: "glass-panel absolute z-50 mt-1 w-full max-h-64 border border-border rounded-lg shadow-xl overflow-hidden flex flex-col animate-in fade-in slide-in-from-top-1 duration-150",
        style: { top: "100%", left: 0, right: 0 },
        children: [
          /* @__PURE__ */ h.jsxs("div", { className: "p-2 border-b border-border flex items-center gap-2", children: [
            /* @__PURE__ */ h.jsx(ta, { size: 14, className: "text-muted-foreground flex-shrink-0" }),
            /* @__PURE__ */ h.jsx(
              "input",
              {
                ref: k,
                type: "text",
                value: b,
                onChange: (P) => _(P.target.value),
                placeholder: "...",
                className: "flex-1 bg-transparent border-none outline-none text-sm text-foreground placeholder:text-muted-foreground/50"
              }
            ),
            b && /* @__PURE__ */ h.jsx(
              "button",
              {
                type: "button",
                onClick: () => _(""),
                className: "p-0.5 hover:bg-muted rounded",
                children: /* @__PURE__ */ h.jsx(gm, { size: 12, className: "text-muted-foreground" })
              }
            )
          ] }),
          /* @__PURE__ */ h.jsx("div", { className: "overflow-y-auto max-h-48", children: T.length > 0 ? T.map((P) => /* @__PURE__ */ h.jsx(
            "div",
            {
              onClick: () => N(P.value),
              className: `px-3 py-2 cursor-pointer text-sm truncate transition-colors ${P.value === a ? "bg-primary/15 text-primary" : "hover:bg-muted text-foreground"}`,
              title: P.label,
              children: P.label
            },
            P.value
          )) : /* @__PURE__ */ h.jsx("div", { className: "px-3 py-4 text-center text-sm text-muted-foreground", children: b ? "" : p }) }),
          u.length > 10 && /* @__PURE__ */ h.jsxs("div", { className: "px-3 py-1 border-t border-border text-xs text-muted-foreground/70", children: [
            T.length,
            " / ",
            u.length,
            " "
          ] })
        ]
      }
    ),
    t && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-words", children: t }),
    n && /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-destructive", children: n })
  ] });
};
class ql {
  // 10
  /**
   *  API 
   */
  static async fetchModels(t, n) {
    switch (t) {
      case "openai":
        return this.fetchOpenAIModels(n);
      case "ollama":
        return this.fetchOllamaModels(n);
      case "vllm":
        return this.fetchVLLMModels(n);
      case "cohere":
        return this.fetchCohereModels(n);
      case "jina":
      case "voyage":
        return this.getPresetModels(t);
      default:
        return pe.warn("ModelService", `Unknown API type: ${t}`), [];
    }
  }
  /**
   *  OpenAI  API 
   * : OpenAI, Azure,  OpenAI 
   */
  static async fetchOpenAIModels(t) {
    const { apiUrl: n, apiKey: r, timeout: i = this.DEFAULT_TIMEOUT } = t, o = `${n.replace(/\/+$/, "")}/models`;
    try {
      const u = new AbortController(), c = setTimeout(() => u.abort(), i), f = {
        "Content-Type": "application/json"
      };
      r && (f.Authorization = `Bearer ${r}`);
      const p = await fetch(o, {
        method: "GET",
        headers: f,
        signal: u.signal
      });
      if (clearTimeout(c), !p.ok)
        throw new Error(`HTTP ${p.status}: ${p.statusText}`);
      const g = await p.json(), x = (g.data || g || []).map((b) => ({
        id: b.id || b.model,
        name: b.name || b.id || b.model,
        owned_by: b.owned_by
      }));
      return pe.info("ModelService", `Fetched ${x.length} models from OpenAI API`), x.sort((b, _) => b.id.localeCompare(_.id));
    } catch (u) {
      throw u.name === "AbortError" ? pe.error("ModelService", "OpenAI API request timeout") : pe.error("ModelService", `OpenAI API error: ${u.message}`), u;
    }
  }
  /**
   *  Ollama 
   */
  static async fetchOllamaModels(t) {
    const { apiUrl: n, timeout: r = this.DEFAULT_TIMEOUT } = t, a = `${n.replace(/\/+$/, "")}/api/tags`;
    try {
      const o = new AbortController(), u = setTimeout(() => o.abort(), r), c = await fetch(a, {
        method: "GET",
        signal: o.signal
      });
      if (clearTimeout(u), !c.ok)
        throw new Error(`HTTP ${c.status}: ${c.statusText}`);
      const p = ((await c.json()).models || []).map((g) => ({
        id: g.name || g.model,
        name: g.name || g.model
      }));
      return pe.info("ModelService", `Fetched ${p.length} models from Ollama`), p;
    } catch (o) {
      throw pe.error("ModelService", `Ollama API error: ${o.message}`), o;
    }
  }
  /**
   *  vLLM 
   * vLLM  OpenAI  API
   */
  static async fetchVLLMModels(t) {
    return this.fetchOpenAIModels(t);
  }
  /**
   *  Cohere 
   */
  static async fetchCohereModels(t) {
    const { apiKey: n, timeout: r = this.DEFAULT_TIMEOUT } = t;
    if (!n)
      return pe.warn("ModelService", "Cohere API key required"), this.getPresetModels("cohere");
    try {
      const i = new AbortController(), a = setTimeout(() => i.abort(), r), o = await fetch("https://api.cohere.ai/v1/models", {
        method: "GET",
        headers: {
          Authorization: `Bearer ${n}`,
          "Content-Type": "application/json"
        },
        signal: i.signal
      });
      if (clearTimeout(a), !o.ok)
        throw new Error(`HTTP ${o.status}: ${o.statusText}`);
      const c = ((await o.json()).models || []).filter((f) => {
        var p;
        return (p = f.endpoints) == null ? void 0 : p.includes("embed");
      }).map((f) => ({
        id: f.name,
        name: f.name,
        contextLength: f.context_length
      }));
      return pe.info("ModelService", `Fetched ${c.length} embed models from Cohere`), c;
    } catch (i) {
      return pe.error("ModelService", `Cohere API error: ${i.message}`), this.getPresetModels("cohere");
    }
  }
  /**
   * 
   */
  static getPresetModels(t) {
    return {
      cohere: [
        { id: "embed-multilingual-v3.0", name: "Embed Multilingual v3.0" },
        { id: "embed-english-v3.0", name: "Embed English v3.0" },
        { id: "embed-multilingual-light-v3.0", name: "Embed Multilingual Light v3.0" },
        { id: "embed-english-light-v3.0", name: "Embed English Light v3.0" }
      ],
      jina: [
        { id: "jina-embeddings-v3", name: "Jina Embeddings v3" },
        { id: "jina-embeddings-v2-base-en", name: "Jina Embeddings v2 Base EN" },
        { id: "jina-embeddings-v2-base-zh", name: "Jina Embeddings v2 Base ZH" },
        { id: "jina-colbert-v2", name: "Jina ColBERT v2" }
      ],
      voyage: [
        { id: "voyage-3", name: "Voyage 3" },
        { id: "voyage-3-lite", name: "Voyage 3 Lite" },
        { id: "voyage-large-2", name: "Voyage Large 2" },
        { id: "voyage-code-2", name: "Voyage Code 2" },
        { id: "voyage-multilingual-2", name: "Voyage Multilingual 2" }
      ],
      openai: [
        { id: "text-embedding-3-large", name: "Text Embedding 3 Large" },
        { id: "text-embedding-3-small", name: "Text Embedding 3 Small" },
        { id: "text-embedding-ada-002", name: "Text Embedding Ada 002" }
      ]
    }[t] || [];
  }
  /**
   *  Rerank 
   */
  static getCommonRerankModels() {
    return [
      { id: "BAAI/bge-reranker-v2-m3", name: "BGE Reranker v2 m3" },
      { id: "BAAI/bge-reranker-large", name: "BGE Reranker Large" },
      { id: "BAAI/bge-reranker-base", name: "BGE Reranker Base" },
      { id: "cross-encoder/ms-marco-MiniLM-L-12-v2", name: "MS MARCO MiniLM L12" },
      { id: "Xenova/ms-marco-MiniLM-L-6-v2", name: "MS MARCO MiniLM L6 (ONNX)" },
      { id: "jinaai/jina-reranker-v2-base-multilingual", name: "Jina Reranker v2 Multilingual" }
    ];
  }
}
yt(ql, "DEFAULT_TIMEOUT", 1e4);
const jre = [
  { value: "openai", label: "OpenAI" },
  { value: "anthropic", label: "Anthropic" },
  { value: "ollama", label: "Ollama" },
  { value: "vllm", label: "vLLM" },
  { value: "azure", label: "Azure OpenAI" },
  { value: "custom", label: "" }
], Nre = [
  { value: "tavern", label: "" },
  { value: "tavern_profile", label: "" },
  { value: "custom", label: " API " }
];
function Rre() {
  var e, t, n, r;
  try {
    const i = (n = (t = (e = window.SillyTavern) == null ? void 0 : e.getContext) == null ? void 0 : t.call(e)) == null ? void 0 : n.extensionSettings;
    return ((r = i == null ? void 0 : i.connectionManager) == null ? void 0 : r.profiles) || [];
  } catch (i) {
    return console.warn("[Engram]  connection_profiles:", i), [];
  }
}
const rj = ({
  preset: e,
  onChange: t,
  isNew: n = !1
}) => {
  var P, z, q, G, Y, W;
  const [r, i] = B.useState([]), [a, o] = B.useState(!1), [u, c] = B.useState([]), [f, p] = B.useState(!1), [g, x] = B.useState(null), b = () => {
    o(!0);
    try {
      const F = Rre();
      i(F);
    } finally {
      o(!1);
    }
  }, _ = async () => {
    const { apiUrl: F, apiKey: X, apiSource: me } = e.custom || {};
    if (!F) {
      x(" API URL");
      return;
    }
    p(!0), x(null);
    try {
      let J = [];
      me === "ollama" ? J = await ql.fetchOllamaModels({ apiUrl: F }) : J = await ql.fetchOpenAIModels({ apiUrl: F, apiKey: X }), c(J), J.length === 0 && x("");
    } catch (J) {
      x(J.message || ""), c([]);
    } finally {
      p(!1);
    }
  };
  B.useEffect(() => {
    b();
  }, []);
  const E = (F) => {
    t({ ...e, ...F, updatedAt: Date.now() });
  }, k = (F, X) => {
    E({
      parameters: { ...e.parameters, [F]: X }
    });
  }, T = (F, X) => {
    var me, J, le, Q;
    E({
      custom: {
        apiUrl: ((me = e.custom) == null ? void 0 : me.apiUrl) || "",
        apiKey: ((J = e.custom) == null ? void 0 : J.apiKey) || "",
        model: ((le = e.custom) == null ? void 0 : le.model) || "",
        apiSource: ((Q = e.custom) == null ? void 0 : Q.apiSource) || "openai",
        [F]: X
      }
    });
  }, R = (F) => {
    const X = F;
    E({
      source: X,
      tavernProfileId: X === "tavern_profile" ? e.tavernProfileId : void 0
    }), X === "tavern_profile" && b();
  }, N = r.map((F) => ({
    value: F.id,
    label: `${F.name} (${F.api || "Unknown"} - ${F.model || "Unknown"})`
  })), O = r.find((F) => F.id === e.tavernProfileId);
  return /* @__PURE__ */ h.jsxs("div", { className: "", children: [
    /* @__PURE__ */ h.jsxs(Qs, { title: "", children: [
      /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "",
          value: e.name,
          onChange: (F) => E({ name: F }),
          placeholder: "",
          required: !0
        }
      ),
      /* @__PURE__ */ h.jsx(
        zu,
        {
          label: "",
          value: e.source,
          onChange: R,
          options: Nre,
          description: " API "
        }
      )
    ] }),
    e.source === "tavern_profile" && /* @__PURE__ */ h.jsxs(Qs, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-end gap-2", children: [
        /* @__PURE__ */ h.jsx(
          zu,
          {
            className: "flex-1 !mb-0",
            label: "",
            value: e.tavernProfileId || "",
            onChange: (F) => E({ tavernProfileId: F }),
            options: N,
            placeholder: a ? "..." : "",
            disabled: a || N.length === 0
          }
        ),
        /* @__PURE__ */ h.jsx(
          "button",
          {
            type: "button",
            className: "h-[42px] w-[42px] min-w-[42px] flex items-center justify-center border-none rounded-md bg-muted text-muted-foreground cursor-pointer transition-all hover:bg-accent hover:text-foreground",
            onClick: b,
            disabled: a,
            title: "",
            children: /* @__PURE__ */ h.jsx(Or, { size: 16, className: a ? "animate-spin" : "" })
          }
        )
      ] }),
      N.length === 0 && !a && /* @__PURE__ */ h.jsx("div", { className: "p-3 bg-muted/30 border border-dashed border-border rounded-lg text-muted-foreground text-sm text-center mt-3", children: "" }),
      O && /* @__PURE__ */ h.jsxs("div", { className: "mt-4 p-3 bg-card rounded-lg border border-border", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 py-1 text-sm border-b border-border last:border-0", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground min-w-[60px]", children: "API:" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-foreground font-mono", children: O.api || "-" })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 py-1 text-sm border-b border-border last:border-0", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground min-w-[60px]", children: ":" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-foreground font-mono", children: O.model || "-" })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 py-1 text-sm border-b border-border last:border-0", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground min-w-[60px]", children: ":" }),
          /* @__PURE__ */ h.jsx("span", { className: "text-foreground font-mono", children: O.preset || "-" })
        ] })
      ] })
    ] }),
    e.source === "custom" && /* @__PURE__ */ h.jsxs(Qs, { title: "API ", description: " API ", children: [
      /* @__PURE__ */ h.jsx(
        zu,
        {
          label: "API ",
          value: ((P = e.custom) == null ? void 0 : P.apiSource) || "openai",
          onChange: (F) => T("apiSource", F),
          options: jre
        }
      ),
      /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "API URL",
          type: "url",
          value: ((z = e.custom) == null ? void 0 : z.apiUrl) || "",
          onChange: (F) => T("apiUrl", F),
          placeholder: "https://api.openai.com/v1",
          required: !0
        }
      ),
      /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "API Key",
          type: "password",
          value: ((q = e.custom) == null ? void 0 : q.apiKey) || "",
          onChange: (F) => T("apiKey", F),
          placeholder: "sk-..."
        }
      ),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-end gap-2", children: [
          u.length > 0 ? /* @__PURE__ */ h.jsx(
            zu,
            {
              className: "flex-1 !mb-0",
              label: "",
              value: ((G = e.custom) == null ? void 0 : G.model) || "",
              onChange: (F) => T("model", F),
              options: u.map((F) => ({ value: F.id, label: F.name || F.id })),
              placeholder: ""
            }
          ) : /* @__PURE__ */ h.jsx(
            bs,
            {
              className: "flex-1 !mb-0",
              label: "",
              value: ((Y = e.custom) == null ? void 0 : Y.model) || "",
              onChange: (F) => T("model", F),
              placeholder: "gpt-4o-mini",
              required: !0
            }
          ),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              type: "button",
              className: "h-[42px] w-[42px] min-w-[42px] flex items-center justify-center border-none rounded-md bg-muted text-muted-foreground cursor-pointer transition-all hover:bg-accent hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",
              onClick: _,
              disabled: f || !((W = e.custom) != null && W.apiUrl),
              title: "",
              children: f ? /* @__PURE__ */ h.jsx($u, { size: 16, className: "animate-spin" }) : /* @__PURE__ */ h.jsx(Or, { size: 16 })
            }
          )
        ] }),
        g && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-destructive", children: g }),
        u.length > 0 && /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
          " ",
          u.length,
          " "
        ] })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs(Qs, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsx(
        Rr,
        {
          label: " (Temperature)",
          value: e.parameters.temperature,
          onChange: (F) => k("temperature", F),
          min: 0,
          max: 2,
          step: 0.1,
          description: ""
        }
      ),
      /* @__PURE__ */ h.jsx(
        Rr,
        {
          label: "Top-P",
          value: e.parameters.topP,
          onChange: (F) => k("topP", F),
          min: 0,
          max: 1,
          step: 0.05,
          description: " token "
        }
      ),
      /* @__PURE__ */ h.jsx(
        Rr,
        {
          label: " Tokens",
          value: e.parameters.maxTokens,
          onChange: (F) => k("maxTokens", F),
          min: 64,
          max: 16384,
          step: 64,
          showSlider: !1
        }
      ),
      /* @__PURE__ */ h.jsx(
        Rr,
        {
          label: "",
          value: e.parameters.frequencyPenalty,
          onChange: (F) => k("frequencyPenalty", F),
          min: -2,
          max: 2,
          step: 0.1,
          description: " token "
        }
      ),
      /* @__PURE__ */ h.jsx(
        Rr,
        {
          label: "",
          value: e.parameters.presencePenalty,
          onChange: (F) => k("presencePenalty", F),
          min: -2,
          max: 2,
          step: 0.1,
          description: ""
        }
      )
    ] })
  ] });
}, Mre = [
  { value: "custom", label: " (OpenAI )" },
  { value: "transformers", label: "Transformers ()" },
  { value: "openai", label: "OpenAI Embeddings" },
  { value: "ollama", label: "Ollama" },
  { value: "vllm", label: "vLLM" },
  { value: "cohere", label: "Cohere" },
  { value: "jina", label: "Jina AI" },
  { value: "voyage", label: "Voyage AI" }
], ij = {
  custom: "text-embedding-3-small",
  transformers: "Xenova/all-MiniLM-L6-v2",
  openai: "text-embedding-3-small",
  ollama: "nomic-embed-text",
  vllm: "BAAI/bge-m3",
  cohere: "embed-multilingual-v3.0",
  jina: "jina-embeddings-v3",
  voyage: "voyage-large-2"
}, sj = ["custom", "ollama", "vllm"], aj = ["custom", "openai", "cohere", "jina", "voyage"], Ore = ({
  config: e,
  onChange: t
}) => {
  var b;
  const n = (_) => {
    t({ ...e, ..._ });
  }, r = (_) => {
    n({
      source: _,
      model: ij[_],
      apiUrl: sj.includes(_) ? e.apiUrl : void 0,
      apiKey: aj.includes(_) ? e.apiKey : void 0
    });
  }, i = sj.includes(e.source), a = aj.includes(e.source), [o, u] = B.useState([]), [c, f] = B.useState(!1), [p, g] = B.useState(null), x = async () => {
    f(!0), g(null);
    try {
      let _ = [];
      const E = { apiUrl: e.apiUrl || "", apiKey: e.apiKey };
      switch (e.source) {
        case "custom":
          if (!e.apiUrl) {
            g(" API URL");
            return;
          }
          _ = await ql.fetchOpenAIModels(E);
          break;
        case "ollama":
          if (!e.apiUrl) {
            g(" API URL");
            return;
          }
          _ = await ql.fetchOllamaModels(E);
          break;
        case "vllm":
          if (!e.apiUrl) {
            g(" API URL");
            return;
          }
          _ = await ql.fetchVLLMModels(E);
          break;
        case "openai":
        case "cohere":
        case "jina":
        case "voyage":
          _ = ql.getPresetModels(e.source);
          break;
        default:
          _ = [];
      }
      u(_), _.length === 0 && g("");
    } catch (_) {
      g(_.message || ""), u([]);
    } finally {
      f(!1);
    }
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "", children: [
    /* @__PURE__ */ h.jsxs(Qs, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsx(
        zu,
        {
          label: "",
          value: e.source,
          onChange: (_) => r(_),
          options: Mre,
          description: ""
        }
      ),
      i && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: e.source === "ollama" ? "API Endpoint" : "API Base URL" }),
          e.source !== "ollama" && /* @__PURE__ */ h.jsxs("label", { className: "flex items-center gap-1.5 text-[10px] text-muted-foreground cursor-pointer select-none", children: [
            /* @__PURE__ */ h.jsx(
              "input",
              {
                type: "checkbox",
                checked: e.autoSuffix !== !1,
                onChange: (_) => n({ autoSuffix: _.target.checked }),
                className: "w-3 h-3 rounded border-border accent-primary cursor-pointer"
              }
            ),
            ""
          ] })
        ] }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "url",
            value: e.apiUrl || "",
            onChange: (_) => n({ apiUrl: _.target.value }),
            placeholder: e.source === "ollama" ? "http://localhost:11434/api/embeddings" : "http://localhost:8000",
            style: {
              background: "transparent",
              border: "none",
              borderBottom: "1px solid var(--border)",
              borderRadius: 0,
              padding: "8px 0",
              fontSize: "14px",
              width: "100%",
              color: "var(--foreground)",
              outline: "none"
            },
            className: "placeholder:text-muted-foreground/40 focus:border-primary transition-colors"
          }
        ),
        /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-all", children: e.source === "ollama" ? " /api/embeddings" : e.autoSuffix !== !1 && e.apiUrl ? ` URL: ${e.apiUrl.replace(/\/+$/, "")}/v1/embeddings` : " URL /v1/embeddings " })
      ] }),
      a && /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "API Key",
          type: "password",
          value: e.apiKey || "",
          onChange: (_) => n({ apiKey: _ }),
          placeholder: " API "
        }
      ),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-end gap-2", children: [
          o.length > 0 ? /* @__PURE__ */ h.jsx("div", { className: "flex-1 relative", children: /* @__PURE__ */ h.jsx(
            zP,
            {
              className: "!mb-0",
              label: "",
              value: e.model || "",
              onChange: (_) => n({ model: _ }),
              options: o.map((_) => ({ value: _.id, label: _.name || _.id })),
              placeholder: "",
              emptyText: ""
            }
          ) }) : /* @__PURE__ */ h.jsx(
            bs,
            {
              className: "flex-1 !mb-0",
              label: "",
              value: e.model || "",
              onChange: (_) => n({ model: _ }),
              placeholder: ij[e.source],
              description: ""
            }
          ),
          (i || a) && /* @__PURE__ */ h.jsx(
            "button",
            {
              type: "button",
              className: "h-[42px] w-[42px] min-w-[42px] flex items-center justify-center border-none rounded-md bg-muted text-muted-foreground cursor-pointer transition-all hover:bg-accent hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",
              onClick: x,
              disabled: c,
              title: "",
              children: c ? /* @__PURE__ */ h.jsx($u, { size: 16, className: "animate-spin" }) : /* @__PURE__ */ h.jsx(Or, { size: 16 })
            }
          )
        ] }),
        p && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-destructive", children: p }),
        o.length > 0 && /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
          " ",
          o.length,
          " "
        ] })
      ] })
    ] }),
    /* @__PURE__ */ h.jsx(Qs, { title: "", collapsible: !0, defaultCollapsed: !0, children: /* @__PURE__ */ h.jsx(
      bs,
      {
        label: "",
        value: ((b = e.dimensions) == null ? void 0 : b.toString()) || "",
        onChange: (_) => {
          const E = parseInt(_, 10);
          n({ dimensions: isNaN(E) ? void 0 : E });
        },
        placeholder: "",
        description: ""
      }
    ) })
  ] });
}, Dre = ({
  config: e,
  onChange: t
}) => {
  const n = (p) => {
    t({ ...e, ...p });
  }, [r, i] = B.useState([]), [a, o] = B.useState(!1), [u, c] = B.useState(null), f = async () => {
    if (!e.url) {
      c(" API URL");
      return;
    }
    o(!0), c(null);
    try {
      const p = await ql.fetchOpenAIModels({
        apiUrl: e.url,
        apiKey: e.apiKey
      });
      p.length > 0 ? i(p) : i(ql.getCommonRerankModels());
    } catch {
      i(ql.getCommonRerankModels());
    } finally {
      o(!1);
    }
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "", children: [
    /* @__PURE__ */ h.jsx(Qs, { title: "Rerank ", description: "", children: /* @__PURE__ */ h.jsx(
      qo,
      {
        label: " Rerank",
        checked: e.enabled,
        onChange: (p) => n({ enabled: p }),
        description: " Rerank "
      }
    ) }),
    e.enabled && /* @__PURE__ */ h.jsx(h.Fragment, { children: /* @__PURE__ */ h.jsxs(Qs, { title: "API ", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "API Base URL" }),
          /* @__PURE__ */ h.jsxs("label", { className: "flex items-center gap-1.5 text-[10px] text-muted-foreground cursor-pointer select-none", children: [
            /* @__PURE__ */ h.jsx(
              "input",
              {
                type: "checkbox",
                checked: e.autoSuffix !== !1,
                onChange: (p) => n({ autoSuffix: p.target.checked }),
                className: "w-3 h-3 rounded border-border accent-primary cursor-pointer"
              }
            ),
            ""
          ] })
        ] }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "url",
            value: e.url,
            onChange: (p) => n({ url: p.target.value }),
            placeholder: "http://localhost:8000",
            style: {
              background: "transparent",
              border: "none",
              borderBottom: "1px solid var(--border)",
              borderRadius: 0,
              padding: "8px 0",
              fontSize: "14px",
              width: "100%",
              color: "var(--foreground)",
              outline: "none"
            },
            className: "placeholder:text-muted-foreground/40 focus:border-primary transition-colors"
          }
        ),
        /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground/70 break-all", children: e.autoSuffix !== !1 && e.url ? ` URL: ${e.url.replace(/\/+$/, "")}/rerank` : " URL /rerank " })
      ] }),
      /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "API Key",
          type: "password",
          value: e.apiKey,
          onChange: (p) => n({ apiKey: p }),
          placeholder: " API "
        }
      ),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-end gap-2", children: [
          r.length > 0 ? /* @__PURE__ */ h.jsx("div", { className: "flex-1 relative", children: /* @__PURE__ */ h.jsx(
            zP,
            {
              className: "!mb-0",
              label: "",
              value: e.model,
              onChange: (p) => n({ model: p }),
              options: r.map((p) => ({ value: p.id, label: p.name || p.id })),
              placeholder: "",
              emptyText: ""
            }
          ) }) : /* @__PURE__ */ h.jsx(
            bs,
            {
              className: "flex-1 !mb-0",
              label: "",
              value: e.model,
              onChange: (p) => n({ model: p }),
              placeholder: "BAAI/bge-reranker-v2-m3",
              description: " Rerank ",
              required: !0
            }
          ),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              type: "button",
              className: "h-[42px] w-[42px] min-w-[42px] flex items-center justify-center border-none rounded-md bg-muted text-muted-foreground cursor-pointer transition-all hover:bg-accent hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",
              onClick: f,
              disabled: a,
              title: "",
              children: a ? /* @__PURE__ */ h.jsx($u, { size: 16, className: "animate-spin" }) : /* @__PURE__ */ h.jsx(Or, { size: 16 })
            }
          )
        ] }),
        u && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-destructive", children: u }),
        r.length > 0 && /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground", children: [
          " ",
          r.length,
          " "
        ] })
      ] })
    ] }) })
  ] });
};
function zre(e) {
  switch (e) {
    case "summary":
      return "text-blue-500 bg-blue-500/10 border border-blue-500/20";
    case "trim":
      return "text-orange-500 bg-orange-500/10 border border-orange-500/20";
    case "preprocessing":
      return "text-emerald-500 bg-emerald-500/10 border border-emerald-500/20";
    default:
      return "text-muted-foreground bg-muted border border-border";
  }
}
function Pre(e) {
  var t;
  return ((t = U0.find((n) => n.value === e)) == null ? void 0 : t.label) || e;
}
const Ire = ({
  template: e,
  isSelected: t = !1,
  onSelect: n,
  onCopy: r,
  onDelete: i,
  onToggleEnabled: a,
  onImport: o,
  onResetToDefault: u
}) => {
  const c = B.useRef(null), f = (b) => {
    b.stopPropagation();
    const _ = {
      version: "1.0",
      exportedAt: Date.now(),
      template: {
        name: e.name,
        category: e.category,
        boundPresetId: e.boundPresetId,
        systemPrompt: e.systemPrompt,
        userPromptTemplate: e.userPromptTemplate
      }
    }, E = new Blob([JSON.stringify(_, null, 2)], { type: "application/json" }), k = URL.createObjectURL(E), T = document.createElement("a");
    T.href = k, T.download = `engram_template_${e.name.replace(/\s+/g, "_")}.json`, T.click(), URL.revokeObjectURL(k);
  }, p = (b) => {
    var _;
    b.stopPropagation(), (_ = c.current) == null || _.click();
  }, g = (b) => {
    var k;
    const _ = (k = b.target.files) == null ? void 0 : k[0];
    if (!_ || !o) return;
    const E = new FileReader();
    E.onload = (T) => {
      var R;
      try {
        const N = JSON.parse((R = T.target) == null ? void 0 : R.result);
        if (N.version && N.template) {
          const O = Il(
            N.template.name,
            N.template.category,
            {
              enabled: e.enabled,
              // 
              isBuiltIn: e.isBuiltIn,
              // 
              boundPresetId: N.template.boundPresetId,
              systemPrompt: N.template.systemPrompt,
              userPromptTemplate: N.template.userPromptTemplate
            }
          );
          O.id = e.id, o(O);
        }
      } catch (N) {
        console.error(":", N);
      }
    }, E.readAsText(_), c.current && (c.current.value = "");
  }, x = e.category === "preprocessing";
  return /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: `
                group relative p-3 rounded-lg border cursor-pointer transition-all duration-200
                ${t ? "bg-accent/50 border-input" : "bg-transparent border-transparent hover:bg-muted/50 hover:border-border"}
                ${!e.enabled && !x && "opacity-50"}
            `,
      onClick: n,
      children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-start gap-3", children: [
          x ? (
            // ""
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "w-8 h-8 flex items-center justify-center rounded-lg bg-emerald-500/10 text-emerald-500 flex-shrink-0",
                title: " ()",
                children: /* @__PURE__ */ h.jsx(Gx, { size: 16 })
              }
            )
          ) : /* @__PURE__ */ h.jsx(
            "button",
            {
              className: `
                            w-8 h-8 flex items-center justify-center rounded-lg transition-colors flex-shrink-0
                            ${e.enabled ? "bg-primary/10 text-primary" : "bg-muted text-muted-foreground hover:bg-muted/80"}
                        `,
              onClick: (b) => {
                b.stopPropagation(), a == null || a(!e.enabled);
              },
              title: e.enabled ? "" : "",
              children: /* @__PURE__ */ h.jsx(Wx, { size: 16 })
            }
          ),
          /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-2", children: [
              /* @__PURE__ */ h.jsx("h4", { className: `text-sm font-medium truncate ${t ? "text-foreground" : "text-muted-foreground group-hover:text-foreground"} ${!e.enabled && "line-through"}`, children: e.name }),
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1.5 flex-shrink-0", children: [
                /* @__PURE__ */ h.jsx("span", { className: `text-[10px] px-1.5 py-0.5 rounded-sm font-medium ${zre(e.category)}`, children: Pre(e.category) }),
                e.isBuiltIn && /* @__PURE__ */ h.jsx("span", { className: "text-[10px] px-1.5 py-0.5 rounded-sm bg-muted text-muted-foreground", children: "BUILTIN" })
              ] })
            ] }),
            /* @__PURE__ */ h.jsx("div", { className: "mt-1 flex items-center justify-between text-[10px] text-muted-foreground/70 font-mono", children: /* @__PURE__ */ h.jsx("span", { className: "truncate max-w-[120px]", children: e.boundPresetId ? `BOUND: ${e.boundPresetId}` : "DEFAULT PRESET" }) })
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: `mt-2 flex justify-end gap-1 ${t || "opacity-0 group-hover:opacity-100"} transition-opacity`, children: [
          /* @__PURE__ */ h.jsx("button", { className: "p-1.5 hover:bg-muted rounded text-muted-foreground hover:text-foreground transition-colors", onClick: p, title: "Import", children: /* @__PURE__ */ h.jsx(aD, { size: 12 }) }),
          /* @__PURE__ */ h.jsx("button", { className: "p-1.5 hover:bg-muted rounded text-muted-foreground hover:text-foreground transition-colors", onClick: f, title: "Export", children: /* @__PURE__ */ h.jsx(k0, { size: 12 }) }),
          /* @__PURE__ */ h.jsx("button", { className: "p-1.5 hover:bg-muted rounded text-muted-foreground hover:text-foreground transition-colors", onClick: (b) => {
            b.stopPropagation(), r == null || r();
          }, title: "Copy", children: /* @__PURE__ */ h.jsx(O5, { size: 12 }) }),
          e.isBuiltIn && /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "p-1.5 hover:bg-amber-500/10 rounded text-muted-foreground hover:text-amber-500 transition-colors",
              onClick: (b) => {
                b.stopPropagation();
                let _ = V5(e.id);
                _ || (_ = nb(e.category)), _ && u && u({
                  ..._,
                  id: e.id,
                  enabled: e.enabled
                });
              },
              title: "",
              children: /* @__PURE__ */ h.jsx(rD, { size: 12 })
            }
          ),
          !e.isBuiltIn && /* @__PURE__ */ h.jsx("button", { className: "p-1.5 hover:bg-destructive/10 rounded text-muted-foreground hover:text-destructive transition-colors", onClick: (b) => {
            b.stopPropagation(), i == null || i();
          }, title: "Delete", children: /* @__PURE__ */ h.jsx(Ja, { size: 12 }) })
        ] }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            ref: c,
            type: "file",
            accept: ".json",
            onChange: g,
            className: "hidden"
          }
        )
      ]
    }
  );
}, Lre = ({
  templates: e,
  selectedId: t,
  onSelect: n,
  onAdd: r,
  onUpdate: i,
  onDelete: a
}) => {
  const o = () => {
    const g = Il(
      ` ${e.length + 1}`,
      "summary"
    );
    r(g), n(g);
  }, u = (g) => {
    const x = Il(
      `${g.name} ()`,
      g.category,
      {
        enabled: !1,
        // 
        boundPresetId: g.boundPresetId,
        systemPrompt: g.systemPrompt,
        userPromptTemplate: g.userPromptTemplate
      }
    );
    r(x);
  }, c = (g, x) => {
    x && e.filter((b) => b.category === g.category && b.id !== g.id && b.enabled).forEach((b) => i({ ...b, enabled: !1 })), i({ ...g, enabled: x });
  }, f = (g) => {
    i(g);
  }, p = U0.map((g) => ({
    ...g,
    templates: e.filter((x) => x.category === g.value)
  })).filter((g) => g.templates.length > 0);
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4 h-full", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-2", children: [
      /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-bold text-muted-foreground uppercase tracking-wider", children: "" }),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "text-muted-foreground hover:text-foreground transition-colors",
          onClick: o,
          children: /* @__PURE__ */ h.jsx(P5, { size: 16 })
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-6 overflow-y-auto flex-1 no-scrollbar", children: [
      p.map((g) => /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "text-[10px] items-center gap-2 text-muted-foreground font-medium px-1 uppercase tracking-wider flex", children: [
          g.label,
          /* @__PURE__ */ h.jsx("div", { className: "h-px bg-border flex-1" })
        ] }),
        /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-1", children: g.templates.map((x) => /* @__PURE__ */ h.jsx(
          Ire,
          {
            template: x,
            isSelected: t === x.id,
            onSelect: () => n(x),
            onCopy: () => u(x),
            onDelete: () => a(x),
            onToggleEnabled: (b) => c(x, b),
            onImport: f,
            onResetToDefault: (b) => i(b)
          },
          x.id
        )) })
      ] }, g.value)),
      e.length === 0 && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center py-12 text-muted-foreground gap-2 border border-dashed border-border rounded-lg", children: [
        /* @__PURE__ */ h.jsx(sh, { size: 24, className: "opacity-50" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs", children: "" })
      ] })
    ] })
  ] });
}, Bre = [
  // Context
  { name: "{{userInput}}", desc: "", category: "Context ()" },
  { name: "{{chatHistory}}", desc: "", category: "Context ()" },
  { name: "{{context}}", desc: " (Description/Persona...)", category: "Context ()" },
  { name: "{{worldbookContext}}", desc: "", category: "Context ()" },
  { name: "{{userPersona}}", desc: " (Persona Description)", category: "Context ()" },
  { name: "{{char}}", desc: "", category: "Context ()" },
  { name: "{{user}}", desc: "", category: "Context ()" },
  // Text Generation
  { name: "{{engramSummaries}}", desc: " (, /)", category: "Text Generation ()" },
  { name: "{{engramArchivedSummaries}}", desc: " ()", category: "Text Generation ()" },
  // Data Layer
  { name: "{{engramGraph}}", desc: " JSON (/)", category: "Data Layer ()" }
], qre = ({ macro: e }) => {
  const [t, n] = B.useState(!1), r = () => {
    navigator.clipboard.writeText(e.name), n(!0), setTimeout(() => n(!1), 2e3);
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-2 p-1.5 rounded hover:bg-muted/50 group transition-colors", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-0.5", children: [
      /* @__PURE__ */ h.jsx("code", { className: "text-[11px] text-primary font-mono font-medium", children: e.name }),
      /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground", children: e.desc })
    ] }),
    /* @__PURE__ */ h.jsx(
      "button",
      {
        onClick: r,
        className: "opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-muted rounded text-muted-foreground hover:text-foreground",
        title: "",
        children: t ? /* @__PURE__ */ h.jsx(Gx, { size: 12, className: "text-green-500" }) : /* @__PURE__ */ h.jsx(O5, { size: 12 })
      }
    )
  ] });
}, oj = ({
  template: e,
  llmPresets: t,
  defaultPresetId: n,
  onChange: r
}) => {
  var u, c;
  const i = [
    { value: "", label: "" + (n ? ` (${((u = t.find((f) => f.id === n)) == null ? void 0 : u.name) || n})` : "") },
    ...t.map((f) => ({ value: f.id, label: f.name }))
  ], a = (f) => {
    r({ ...e, ...f, updatedAt: Date.now() });
  }, o = Bre.reduce((f, p) => (f[p.category] || (f[p.category] = []), f[p.category].push(p), f), {});
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4", children: [
    /* @__PURE__ */ h.jsxs(Qs, { title: "", children: [
      /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "",
          value: e.name,
          onChange: (f) => a({ name: f }),
          placeholder: "",
          required: !0,
          disabled: e.isBuiltIn
        }
      ),
      /* @__PURE__ */ h.jsx(
        zu,
        {
          label: "",
          value: e.category,
          onChange: (f) => a({ category: f }),
          options: U0.map((f) => ({ value: f.value, label: f.label })),
          description: (c = U0.find((f) => f.value === e.category)) == null ? void 0 : c.description
        }
      ),
      /* @__PURE__ */ h.jsx(
        zu,
        {
          label: "",
          value: e.boundPresetId || "",
          onChange: (f) => a({ boundPresetId: f || null }),
          options: i,
          description: " LLM "
        }
      ),
      e.category === "preprocessing" && /* @__PURE__ */ h.jsx(
        zu,
        {
          label: "",
          value: e.injectionMode || "replace",
          onChange: (f) => a({ injectionMode: f }),
          options: [
            { value: "replace", label: " (Overwrite)" },
            { value: "append", label: " (Append)" },
            { value: "prepend", label: " (Prepend)" }
          ],
          description: ""
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs(Qs, { title: "", children: [
      /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "",
          value: e.systemPrompt,
          onChange: (f) => a({ systemPrompt: f }),
          placeholder: "...",
          multiline: !0,
          rows: 4
        }
      ),
      /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "",
          value: e.userPromptTemplate,
          onChange: (f) => a({ userPromptTemplate: f }),
          placeholder: "...",
          multiline: !0,
          rows: 6
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "px-3 py-3 bg-muted/20 rounded-md border border-border/50 space-y-3", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "text-[11px] font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-2", children: [
        /* @__PURE__ */ h.jsx("span", { children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "h-px bg-border flex-1" })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-4", children: Object.entries(o).map(([f, p]) => /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
        /* @__PURE__ */ h.jsx("div", { className: "text-[10px] text-primary/70 font-medium px-1 mb-0.5", children: f }),
        /* @__PURE__ */ h.jsx("div", { className: "grid grid-cols-1 gap-px bg-border/20 rounded overflow-hidden", children: p.map((g) => /* @__PURE__ */ h.jsx("div", { className: "bg-background/50", children: /* @__PURE__ */ h.jsx(qre, { macro: g }) }, g.name)) })
      ] }, f)) })
    ] })
  ] });
}, PP = B.createContext({});
function by(e) {
  const t = B.useRef(null);
  return t.current === null && (t.current = e()), t.current;
}
const Ck = typeof window < "u", IP = Ck ? B.useLayoutEffect : B.useEffect, Ek = /* @__PURE__ */ B.createContext(null);
function kk(e, t) {
  e.indexOf(t) === -1 && e.push(t);
}
function Tk(e, t) {
  const n = e.indexOf(t);
  n > -1 && e.splice(n, 1);
}
function $re([...e], t, n) {
  const r = t < 0 ? e.length + t : t;
  if (r >= 0 && r < e.length) {
    const i = n < 0 ? e.length + n : n, [a] = e.splice(t, 1);
    e.splice(i, 0, a);
  }
  return e;
}
const Iu = (e, t, n) => n > t ? t : n < e ? e : n, Lu = {}, LP = (e) => /^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);
function BP(e) {
  return typeof e == "object" && e !== null;
}
const qP = (e) => /^0[^.\s]+$/u.test(e);
// @__NO_SIDE_EFFECTS__
function Ak(e) {
  let t;
  return () => (t === void 0 && (t = e()), t);
}
const Qa = /* @__NO_SIDE_EFFECTS__ */ (e) => e, Fre = (e, t) => (n) => t(e(n)), wy = (...e) => e.reduce(Fre), Z0 = /* @__NO_SIDE_EFFECTS__ */ (e, t, n) => {
  const r = t - e;
  return r === 0 ? 1 : (n - e) / r;
};
class jk {
  constructor() {
    this.subscriptions = [];
  }
  add(t) {
    return kk(this.subscriptions, t), () => Tk(this.subscriptions, t);
  }
  notify(t, n, r) {
    const i = this.subscriptions.length;
    if (i)
      if (i === 1)
        this.subscriptions[0](t, n, r);
      else
        for (let a = 0; a < i; a++) {
          const o = this.subscriptions[a];
          o && o(t, n, r);
        }
  }
  getSize() {
    return this.subscriptions.length;
  }
  clear() {
    this.subscriptions.length = 0;
  }
}
const Ul = /* @__NO_SIDE_EFFECTS__ */ (e) => e * 1e3, Xa = /* @__NO_SIDE_EFFECTS__ */ (e) => e / 1e3;
function $P(e, t) {
  return t ? e * (1e3 / t) : 0;
}
const FP = (e, t, n) => (((1 - 3 * n + 3 * t) * e + (3 * n - 6 * t)) * e + 3 * t) * e, Ure = 1e-7, Vre = 12;
function Hre(e, t, n, r, i) {
  let a, o, u = 0;
  do
    o = t + (n - t) / 2, a = FP(o, r, i) - e, a > 0 ? n = o : t = o;
  while (Math.abs(a) > Ure && ++u < Vre);
  return o;
}
function _y(e, t, n, r) {
  if (e === t && n === r)
    return Qa;
  const i = (a) => Hre(a, 0, 1, e, n);
  return (a) => a === 0 || a === 1 ? a : FP(i(a), t, r);
}
const UP = (e) => (t) => t <= 0.5 ? e(2 * t) / 2 : (2 - e(2 * (1 - t))) / 2, VP = (e) => (t) => 1 - e(1 - t), HP = /* @__PURE__ */ _y(0.33, 1.53, 0.69, 0.99), Nk = /* @__PURE__ */ VP(HP), GP = /* @__PURE__ */ UP(Nk), KP = (e) => (e *= 2) < 1 ? 0.5 * Nk(e) : 0.5 * (2 - Math.pow(2, -10 * (e - 1))), Rk = (e) => 1 - Math.sin(Math.acos(e)), YP = VP(Rk), WP = UP(Rk), Gre = /* @__PURE__ */ _y(0.42, 0, 1, 1), Kre = /* @__PURE__ */ _y(0, 0, 0.58, 1), ZP = /* @__PURE__ */ _y(0.42, 0, 0.58, 1), Yre = (e) => Array.isArray(e) && typeof e[0] != "number", XP = (e) => Array.isArray(e) && typeof e[0] == "number", Wre = {
  linear: Qa,
  easeIn: Gre,
  easeInOut: ZP,
  easeOut: Kre,
  circIn: Rk,
  circInOut: WP,
  circOut: YP,
  backIn: Nk,
  backInOut: GP,
  backOut: HP,
  anticipate: KP
}, Zre = (e) => typeof e == "string", lj = (e) => {
  if (XP(e)) {
    const [t, n, r, i] = e;
    return _y(t, n, r, i);
  } else if (Zre(e))
    return Wre[e];
  return e;
}, O1 = [
  "setup",
  // Compute
  "read",
  // Read
  "resolveKeyframes",
  // Write/Read/Write/Read
  "preUpdate",
  // Compute
  "update",
  // Compute
  "preRender",
  // Compute
  "render",
  // Write
  "postRender"
  // Compute
];
function Xre(e, t) {
  let n = /* @__PURE__ */ new Set(), r = /* @__PURE__ */ new Set(), i = !1, a = !1;
  const o = /* @__PURE__ */ new WeakSet();
  let u = {
    delta: 0,
    timestamp: 0,
    isProcessing: !1
  };
  function c(p) {
    o.has(p) && (f.schedule(p), e()), p(u);
  }
  const f = {
    /**
     * Schedule a process to run on the next frame.
     */
    schedule: (p, g = !1, x = !1) => {
      const _ = x && i ? n : r;
      return g && o.add(p), _.has(p) || _.add(p), p;
    },
    /**
     * Cancel the provided callback from running on the next frame.
     */
    cancel: (p) => {
      r.delete(p), o.delete(p);
    },
    /**
     * Execute all schedule callbacks.
     */
    process: (p) => {
      if (u = p, i) {
        a = !0;
        return;
      }
      i = !0, [n, r] = [r, n], n.forEach(c), n.clear(), i = !1, a && (a = !1, f.process(p));
    }
  };
  return f;
}
const Qre = 40;
function QP(e, t) {
  let n = !1, r = !0;
  const i = {
    delta: 0,
    timestamp: 0,
    isProcessing: !1
  }, a = () => n = !0, o = O1.reduce((N, O) => (N[O] = Xre(a), N), {}), { setup: u, read: c, resolveKeyframes: f, preUpdate: p, update: g, preRender: x, render: b, postRender: _ } = o, E = () => {
    const N = Lu.useManualTiming ? i.timestamp : performance.now();
    n = !1, Lu.useManualTiming || (i.delta = r ? 1e3 / 60 : Math.max(Math.min(N - i.timestamp, Qre), 1)), i.timestamp = N, i.isProcessing = !0, u.process(i), c.process(i), f.process(i), p.process(i), g.process(i), x.process(i), b.process(i), _.process(i), i.isProcessing = !1, n && t && (r = !1, e(E));
  }, k = () => {
    n = !0, r = !0, i.isProcessing || e(E);
  };
  return { schedule: O1.reduce((N, O) => {
    const P = o[O];
    return N[O] = (z, q = !1, G = !1) => (n || k(), P.schedule(z, q, G)), N;
  }, {}), cancel: (N) => {
    for (let O = 0; O < O1.length; O++)
      o[O1[O]].cancel(N);
  }, state: i, steps: o };
}
const { schedule: sr, cancel: Bu, state: Ni, steps: xw } = /* @__PURE__ */ QP(typeof requestAnimationFrame < "u" ? requestAnimationFrame : Qa, !0);
let rx;
function Jre() {
  rx = void 0;
}
const Js = {
  now: () => (rx === void 0 && Js.set(Ni.isProcessing || Lu.useManualTiming ? Ni.timestamp : performance.now()), rx),
  set: (e) => {
    rx = e, queueMicrotask(Jre);
  }
}, JP = (e) => (t) => typeof t == "string" && t.startsWith(e), eI = /* @__PURE__ */ JP("--"), eie = /* @__PURE__ */ JP("var(--"), Mk = (e) => eie(e) ? tie.test(e.split("/*")[0].trim()) : !1, tie = /var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu, wm = {
  test: (e) => typeof e == "number",
  parse: parseFloat,
  transform: (e) => e
}, X0 = {
  ...wm,
  transform: (e) => Iu(0, 1, e)
}, D1 = {
  ...wm,
  default: 1
}, D0 = (e) => Math.round(e * 1e5) / 1e5, Ok = /-?(?:\d+(?:\.\d+)?|\.\d+)/gu;
function nie(e) {
  return e == null;
}
const rie = /^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu, Dk = (e, t) => (n) => !!(typeof n == "string" && rie.test(n) && n.startsWith(e) || t && !nie(n) && Object.prototype.hasOwnProperty.call(n, t)), tI = (e, t, n) => (r) => {
  if (typeof r != "string")
    return r;
  const [i, a, o, u] = r.match(Ok);
  return {
    [e]: parseFloat(i),
    [t]: parseFloat(a),
    [n]: parseFloat(o),
    alpha: u !== void 0 ? parseFloat(u) : 1
  };
}, iie = (e) => Iu(0, 255, e), bw = {
  ...wm,
  transform: (e) => Math.round(iie(e))
}, qd = {
  test: /* @__PURE__ */ Dk("rgb", "red"),
  parse: /* @__PURE__ */ tI("red", "green", "blue"),
  transform: ({ red: e, green: t, blue: n, alpha: r = 1 }) => "rgba(" + bw.transform(e) + ", " + bw.transform(t) + ", " + bw.transform(n) + ", " + D0(X0.transform(r)) + ")"
};
function sie(e) {
  let t = "", n = "", r = "", i = "";
  return e.length > 5 ? (t = e.substring(1, 3), n = e.substring(3, 5), r = e.substring(5, 7), i = e.substring(7, 9)) : (t = e.substring(1, 2), n = e.substring(2, 3), r = e.substring(3, 4), i = e.substring(4, 5), t += t, n += n, r += r, i += i), {
    red: parseInt(t, 16),
    green: parseInt(n, 16),
    blue: parseInt(r, 16),
    alpha: i ? parseInt(i, 16) / 255 : 1
  };
}
const KE = {
  test: /* @__PURE__ */ Dk("#"),
  parse: sie,
  transform: qd.transform
}, Sy = /* @__NO_SIDE_EFFECTS__ */ (e) => ({
  test: (t) => typeof t == "string" && t.endsWith(e) && t.split(" ").length === 1,
  parse: parseFloat,
  transform: (t) => `${t}${e}`
}), Zc = /* @__PURE__ */ Sy("deg"), Vl = /* @__PURE__ */ Sy("%"), It = /* @__PURE__ */ Sy("px"), aie = /* @__PURE__ */ Sy("vh"), oie = /* @__PURE__ */ Sy("vw"), uj = {
  ...Vl,
  parse: (e) => Vl.parse(e) / 100,
  transform: (e) => Vl.transform(e * 100)
}, $p = {
  test: /* @__PURE__ */ Dk("hsl", "hue"),
  parse: /* @__PURE__ */ tI("hue", "saturation", "lightness"),
  transform: ({ hue: e, saturation: t, lightness: n, alpha: r = 1 }) => "hsla(" + Math.round(e) + ", " + Vl.transform(D0(t)) + ", " + Vl.transform(D0(n)) + ", " + D0(X0.transform(r)) + ")"
}, Kr = {
  test: (e) => qd.test(e) || KE.test(e) || $p.test(e),
  parse: (e) => qd.test(e) ? qd.parse(e) : $p.test(e) ? $p.parse(e) : KE.parse(e),
  transform: (e) => typeof e == "string" ? e : e.hasOwnProperty("red") ? qd.transform(e) : $p.transform(e),
  getAnimatableNone: (e) => {
    const t = Kr.parse(e);
    return t.alpha = 0, Kr.transform(t);
  }
}, lie = /(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;
function uie(e) {
  var t, n;
  return isNaN(e) && typeof e == "string" && (((t = e.match(Ok)) == null ? void 0 : t.length) || 0) + (((n = e.match(lie)) == null ? void 0 : n.length) || 0) > 0;
}
const nI = "number", rI = "color", cie = "var", fie = "var(", cj = "${}", die = /var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;
function Q0(e) {
  const t = e.toString(), n = [], r = {
    color: [],
    number: [],
    var: []
  }, i = [];
  let a = 0;
  const u = t.replace(die, (c) => (Kr.test(c) ? (r.color.push(a), i.push(rI), n.push(Kr.parse(c))) : c.startsWith(fie) ? (r.var.push(a), i.push(cie), n.push(c)) : (r.number.push(a), i.push(nI), n.push(parseFloat(c))), ++a, cj)).split(cj);
  return { values: n, split: u, indexes: r, types: i };
}
function iI(e) {
  return Q0(e).values;
}
function sI(e) {
  const { split: t, types: n } = Q0(e), r = t.length;
  return (i) => {
    let a = "";
    for (let o = 0; o < r; o++)
      if (a += t[o], i[o] !== void 0) {
        const u = n[o];
        u === nI ? a += D0(i[o]) : u === rI ? a += Kr.transform(i[o]) : a += i[o];
      }
    return a;
  };
}
const hie = (e) => typeof e == "number" ? 0 : Kr.test(e) ? Kr.getAnimatableNone(e) : e;
function pie(e) {
  const t = iI(e);
  return sI(e)(t.map(hie));
}
const lf = {
  test: uie,
  parse: iI,
  createTransformer: sI,
  getAnimatableNone: pie
};
function ww(e, t, n) {
  return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? e + (t - e) * 6 * n : n < 1 / 2 ? t : n < 2 / 3 ? e + (t - e) * (2 / 3 - n) * 6 : e;
}
function mie({ hue: e, saturation: t, lightness: n, alpha: r }) {
  e /= 360, t /= 100, n /= 100;
  let i = 0, a = 0, o = 0;
  if (!t)
    i = a = o = n;
  else {
    const u = n < 0.5 ? n * (1 + t) : n + t - n * t, c = 2 * n - u;
    i = ww(c, u, e + 1 / 3), a = ww(c, u, e), o = ww(c, u, e - 1 / 3);
  }
  return {
    red: Math.round(i * 255),
    green: Math.round(a * 255),
    blue: Math.round(o * 255),
    alpha: r
  };
}
function jx(e, t) {
  return (n) => n > 0 ? t : e;
}
const cr = (e, t, n) => e + (t - e) * n, _w = (e, t, n) => {
  const r = e * e, i = n * (t * t - r) + r;
  return i < 0 ? 0 : Math.sqrt(i);
}, gie = [KE, qd, $p], yie = (e) => gie.find((t) => t.test(e));
function fj(e) {
  const t = yie(e);
  if (!t)
    return !1;
  let n = t.parse(e);
  return t === $p && (n = mie(n)), n;
}
const dj = (e, t) => {
  const n = fj(e), r = fj(t);
  if (!n || !r)
    return jx(e, t);
  const i = { ...n };
  return (a) => (i.red = _w(n.red, r.red, a), i.green = _w(n.green, r.green, a), i.blue = _w(n.blue, r.blue, a), i.alpha = cr(n.alpha, r.alpha, a), qd.transform(i));
}, YE = /* @__PURE__ */ new Set(["none", "hidden"]);
function vie(e, t) {
  return YE.has(e) ? (n) => n <= 0 ? e : t : (n) => n >= 1 ? t : e;
}
function xie(e, t) {
  return (n) => cr(e, t, n);
}
function zk(e) {
  return typeof e == "number" ? xie : typeof e == "string" ? Mk(e) ? jx : Kr.test(e) ? dj : _ie : Array.isArray(e) ? aI : typeof e == "object" ? Kr.test(e) ? dj : bie : jx;
}
function aI(e, t) {
  const n = [...e], r = n.length, i = e.map((a, o) => zk(a)(a, t[o]));
  return (a) => {
    for (let o = 0; o < r; o++)
      n[o] = i[o](a);
    return n;
  };
}
function bie(e, t) {
  const n = { ...e, ...t }, r = {};
  for (const i in n)
    e[i] !== void 0 && t[i] !== void 0 && (r[i] = zk(e[i])(e[i], t[i]));
  return (i) => {
    for (const a in r)
      n[a] = r[a](i);
    return n;
  };
}
function wie(e, t) {
  const n = [], r = { color: 0, var: 0, number: 0 };
  for (let i = 0; i < t.values.length; i++) {
    const a = t.types[i], o = e.indexes[a][r[a]], u = e.values[o] ?? 0;
    n[i] = u, r[a]++;
  }
  return n;
}
const _ie = (e, t) => {
  const n = lf.createTransformer(t), r = Q0(e), i = Q0(t);
  return r.indexes.var.length === i.indexes.var.length && r.indexes.color.length === i.indexes.color.length && r.indexes.number.length >= i.indexes.number.length ? YE.has(e) && !i.values.length || YE.has(t) && !r.values.length ? vie(e, t) : wy(aI(wie(r, i), i.values), n) : jx(e, t);
};
function oI(e, t, n) {
  return typeof e == "number" && typeof t == "number" && typeof n == "number" ? cr(e, t, n) : zk(e)(e, t);
}
const Sie = (e) => {
  const t = ({ timestamp: n }) => e(n);
  return {
    start: (n = !0) => sr.update(t, n),
    stop: () => Bu(t),
    /**
     * If we're processing this frame we can use the
     * framelocked timestamp to keep things in sync.
     */
    now: () => Ni.isProcessing ? Ni.timestamp : Js.now()
  };
}, lI = (e, t, n = 10) => {
  let r = "";
  const i = Math.max(Math.round(t / n), 2);
  for (let a = 0; a < i; a++)
    r += Math.round(e(a / (i - 1)) * 1e4) / 1e4 + ", ";
  return `linear(${r.substring(0, r.length - 2)})`;
}, Nx = 2e4;
function Pk(e) {
  let t = 0;
  const n = 50;
  let r = e.next(t);
  for (; !r.done && t < Nx; )
    t += n, r = e.next(t);
  return t >= Nx ? 1 / 0 : t;
}
function Cie(e, t = 100, n) {
  const r = n({ ...e, keyframes: [0, t] }), i = Math.min(Pk(r), Nx);
  return {
    type: "keyframes",
    ease: (a) => r.next(i * a).value / t,
    duration: /* @__PURE__ */ Xa(i)
  };
}
const Eie = 5;
function uI(e, t, n) {
  const r = Math.max(t - Eie, 0);
  return $P(n - e(r), t - r);
}
const Mr = {
  // Default spring physics
  stiffness: 100,
  damping: 10,
  mass: 1,
  velocity: 0,
  // Default duration/bounce-based options
  duration: 800,
  // in ms
  bounce: 0.3,
  visualDuration: 0.3,
  // in seconds
  // Rest thresholds
  restSpeed: {
    granular: 0.01,
    default: 2
  },
  restDelta: {
    granular: 5e-3,
    default: 0.5
  },
  // Limits
  minDuration: 0.01,
  // in seconds
  maxDuration: 10,
  // in seconds
  minDamping: 0.05,
  maxDamping: 1
}, Sw = 1e-3;
function kie({ duration: e = Mr.duration, bounce: t = Mr.bounce, velocity: n = Mr.velocity, mass: r = Mr.mass }) {
  let i, a, o = 1 - t;
  o = Iu(Mr.minDamping, Mr.maxDamping, o), e = Iu(Mr.minDuration, Mr.maxDuration, /* @__PURE__ */ Xa(e)), o < 1 ? (i = (f) => {
    const p = f * o, g = p * e, x = p - n, b = WE(f, o), _ = Math.exp(-g);
    return Sw - x / b * _;
  }, a = (f) => {
    const g = f * o * e, x = g * n + n, b = Math.pow(o, 2) * Math.pow(f, 2) * e, _ = Math.exp(-g), E = WE(Math.pow(f, 2), o);
    return (-i(f) + Sw > 0 ? -1 : 1) * ((x - b) * _) / E;
  }) : (i = (f) => {
    const p = Math.exp(-f * e), g = (f - n) * e + 1;
    return -Sw + p * g;
  }, a = (f) => {
    const p = Math.exp(-f * e), g = (n - f) * (e * e);
    return p * g;
  });
  const u = 5 / e, c = Aie(i, a, u);
  if (e = /* @__PURE__ */ Ul(e), isNaN(c))
    return {
      stiffness: Mr.stiffness,
      damping: Mr.damping,
      duration: e
    };
  {
    const f = Math.pow(c, 2) * r;
    return {
      stiffness: f,
      damping: o * 2 * Math.sqrt(r * f),
      duration: e
    };
  }
}
const Tie = 12;
function Aie(e, t, n) {
  let r = n;
  for (let i = 1; i < Tie; i++)
    r = r - e(r) / t(r);
  return r;
}
function WE(e, t) {
  return e * Math.sqrt(1 - t * t);
}
const jie = ["duration", "bounce"], Nie = ["stiffness", "damping", "mass"];
function hj(e, t) {
  return t.some((n) => e[n] !== void 0);
}
function Rie(e) {
  let t = {
    velocity: Mr.velocity,
    stiffness: Mr.stiffness,
    damping: Mr.damping,
    mass: Mr.mass,
    isResolvedFromDuration: !1,
    ...e
  };
  if (!hj(e, Nie) && hj(e, jie))
    if (e.visualDuration) {
      const n = e.visualDuration, r = 2 * Math.PI / (n * 1.2), i = r * r, a = 2 * Iu(0.05, 1, 1 - (e.bounce || 0)) * Math.sqrt(i);
      t = {
        ...t,
        mass: Mr.mass,
        stiffness: i,
        damping: a
      };
    } else {
      const n = kie(e);
      t = {
        ...t,
        ...n,
        mass: Mr.mass
      }, t.isResolvedFromDuration = !0;
    }
  return t;
}
function Rx(e = Mr.visualDuration, t = Mr.bounce) {
  const n = typeof e != "object" ? {
    visualDuration: e,
    keyframes: [0, 1],
    bounce: t
  } : e;
  let { restSpeed: r, restDelta: i } = n;
  const a = n.keyframes[0], o = n.keyframes[n.keyframes.length - 1], u = { done: !1, value: a }, { stiffness: c, damping: f, mass: p, duration: g, velocity: x, isResolvedFromDuration: b } = Rie({
    ...n,
    velocity: -/* @__PURE__ */ Xa(n.velocity || 0)
  }), _ = x || 0, E = f / (2 * Math.sqrt(c * p)), k = o - a, T = /* @__PURE__ */ Xa(Math.sqrt(c / p)), R = Math.abs(k) < 5;
  r || (r = R ? Mr.restSpeed.granular : Mr.restSpeed.default), i || (i = R ? Mr.restDelta.granular : Mr.restDelta.default);
  let N;
  if (E < 1) {
    const P = WE(T, E);
    N = (z) => {
      const q = Math.exp(-E * T * z);
      return o - q * ((_ + E * T * k) / P * Math.sin(P * z) + k * Math.cos(P * z));
    };
  } else if (E === 1)
    N = (P) => o - Math.exp(-T * P) * (k + (_ + T * k) * P);
  else {
    const P = T * Math.sqrt(E * E - 1);
    N = (z) => {
      const q = Math.exp(-E * T * z), G = Math.min(P * z, 300);
      return o - q * ((_ + E * T * k) * Math.sinh(G) + P * k * Math.cosh(G)) / P;
    };
  }
  const O = {
    calculatedDuration: b && g || null,
    next: (P) => {
      const z = N(P);
      if (b)
        u.done = P >= g;
      else {
        let q = P === 0 ? _ : 0;
        E < 1 && (q = P === 0 ? /* @__PURE__ */ Ul(_) : uI(N, P, z));
        const G = Math.abs(q) <= r, Y = Math.abs(o - z) <= i;
        u.done = G && Y;
      }
      return u.value = u.done ? o : z, u;
    },
    toString: () => {
      const P = Math.min(Pk(O), Nx), z = lI((q) => O.next(P * q).value, P, 30);
      return P + "ms " + z;
    },
    toTransition: () => {
    }
  };
  return O;
}
Rx.applyToOptions = (e) => {
  const t = Cie(e, 100, Rx);
  return e.ease = t.ease, e.duration = /* @__PURE__ */ Ul(t.duration), e.type = "keyframes", e;
};
function ZE({ keyframes: e, velocity: t = 0, power: n = 0.8, timeConstant: r = 325, bounceDamping: i = 10, bounceStiffness: a = 500, modifyTarget: o, min: u, max: c, restDelta: f = 0.5, restSpeed: p }) {
  const g = e[0], x = {
    done: !1,
    value: g
  }, b = (G) => u !== void 0 && G < u || c !== void 0 && G > c, _ = (G) => u === void 0 ? c : c === void 0 || Math.abs(u - G) < Math.abs(c - G) ? u : c;
  let E = n * t;
  const k = g + E, T = o === void 0 ? k : o(k);
  T !== k && (E = T - g);
  const R = (G) => -E * Math.exp(-G / r), N = (G) => T + R(G), O = (G) => {
    const Y = R(G), W = N(G);
    x.done = Math.abs(Y) <= f, x.value = x.done ? T : W;
  };
  let P, z;
  const q = (G) => {
    b(x.value) && (P = G, z = Rx({
      keyframes: [x.value, _(x.value)],
      velocity: uI(N, G, x.value),
      // TODO: This should be passing * 1000
      damping: i,
      stiffness: a,
      restDelta: f,
      restSpeed: p
    }));
  };
  return q(0), {
    calculatedDuration: null,
    next: (G) => {
      let Y = !1;
      return !z && P === void 0 && (Y = !0, O(G), q(G)), P !== void 0 && G >= P ? z.next(G - P) : (!Y && O(G), x);
    }
  };
}
function Mie(e, t, n) {
  const r = [], i = n || Lu.mix || oI, a = e.length - 1;
  for (let o = 0; o < a; o++) {
    let u = i(e[o], e[o + 1]);
    if (t) {
      const c = Array.isArray(t) ? t[o] || Qa : t;
      u = wy(c, u);
    }
    r.push(u);
  }
  return r;
}
function cI(e, t, { clamp: n = !0, ease: r, mixer: i } = {}) {
  const a = e.length;
  if (a === 1)
    return () => t[0];
  if (a === 2 && t[0] === t[1])
    return () => t[1];
  const o = e[0] === e[1];
  e[0] > e[a - 1] && (e = [...e].reverse(), t = [...t].reverse());
  const u = Mie(t, r, i), c = u.length, f = (p) => {
    if (o && p < e[0])
      return t[0];
    let g = 0;
    if (c > 1)
      for (; g < e.length - 2 && !(p < e[g + 1]); g++)
        ;
    const x = /* @__PURE__ */ Z0(e[g], e[g + 1], p);
    return u[g](x);
  };
  return n ? (p) => f(Iu(e[0], e[a - 1], p)) : f;
}
function Oie(e, t) {
  const n = e[e.length - 1];
  for (let r = 1; r <= t; r++) {
    const i = /* @__PURE__ */ Z0(0, t, r);
    e.push(cr(n, 1, i));
  }
}
function Die(e) {
  const t = [0];
  return Oie(t, e.length - 1), t;
}
function zie(e, t) {
  return e.map((n) => n * t);
}
function Pie(e, t) {
  return e.map(() => t || ZP).splice(0, e.length - 1);
}
function z0({ duration: e = 300, keyframes: t, times: n, ease: r = "easeInOut" }) {
  const i = Yre(r) ? r.map(lj) : lj(r), a = {
    done: !1,
    value: t[0]
  }, o = zie(
    // Only use the provided offsets if they're the correct length
    // TODO Maybe we should warn here if there's a length mismatch
    n && n.length === t.length ? n : Die(t),
    e
  ), u = cI(o, t, {
    ease: Array.isArray(i) ? i : Pie(t, i)
  });
  return {
    calculatedDuration: e,
    next: (c) => (a.value = u(c), a.done = c >= e, a)
  };
}
const Iie = (e) => e !== null;
function Ik(e, { repeat: t, repeatType: n = "loop" }, r, i = 1) {
  const a = e.filter(Iie), u = i < 0 || t && n !== "loop" && t % 2 === 1 ? 0 : a.length - 1;
  return !u || r === void 0 ? a[u] : r;
}
const Lie = {
  decay: ZE,
  inertia: ZE,
  tween: z0,
  keyframes: z0,
  spring: Rx
};
function fI(e) {
  typeof e.type == "string" && (e.type = Lie[e.type]);
}
class Lk {
  constructor() {
    this.updateFinished();
  }
  get finished() {
    return this._finished;
  }
  updateFinished() {
    this._finished = new Promise((t) => {
      this.resolve = t;
    });
  }
  notifyFinished() {
    this.resolve();
  }
  /**
   * Allows the animation to be awaited.
   *
   * @deprecated Use `finished` instead.
   */
  then(t, n) {
    return this.finished.then(t, n);
  }
}
const Bie = (e) => e / 100;
class Bk extends Lk {
  constructor(t) {
    super(), this.state = "idle", this.startTime = null, this.isStopped = !1, this.currentTime = 0, this.holdTime = null, this.playbackSpeed = 1, this.stop = () => {
      var r, i;
      const { motionValue: n } = this.options;
      n && n.updatedAt !== Js.now() && this.tick(Js.now()), this.isStopped = !0, this.state !== "idle" && (this.teardown(), (i = (r = this.options).onStop) == null || i.call(r));
    }, this.options = t, this.initAnimation(), this.play(), t.autoplay === !1 && this.pause();
  }
  initAnimation() {
    const { options: t } = this;
    fI(t);
    const { type: n = z0, repeat: r = 0, repeatDelay: i = 0, repeatType: a, velocity: o = 0 } = t;
    let { keyframes: u } = t;
    const c = n || z0;
    c !== z0 && typeof u[0] != "number" && (this.mixKeyframes = wy(Bie, oI(u[0], u[1])), u = [0, 100]);
    const f = c({ ...t, keyframes: u });
    a === "mirror" && (this.mirroredGenerator = c({
      ...t,
      keyframes: [...u].reverse(),
      velocity: -o
    })), f.calculatedDuration === null && (f.calculatedDuration = Pk(f));
    const { calculatedDuration: p } = f;
    this.calculatedDuration = p, this.resolvedDuration = p + i, this.totalDuration = this.resolvedDuration * (r + 1) - i, this.generator = f;
  }
  updateTime(t) {
    const n = Math.round(t - this.startTime) * this.playbackSpeed;
    this.holdTime !== null ? this.currentTime = this.holdTime : this.currentTime = n;
  }
  tick(t, n = !1) {
    const { generator: r, totalDuration: i, mixKeyframes: a, mirroredGenerator: o, resolvedDuration: u, calculatedDuration: c } = this;
    if (this.startTime === null)
      return r.next(0);
    const { delay: f = 0, keyframes: p, repeat: g, repeatType: x, repeatDelay: b, type: _, onUpdate: E, finalKeyframe: k } = this.options;
    this.speed > 0 ? this.startTime = Math.min(this.startTime, t) : this.speed < 0 && (this.startTime = Math.min(t - i / this.speed, this.startTime)), n ? this.currentTime = t : this.updateTime(t);
    const T = this.currentTime - f * (this.playbackSpeed >= 0 ? 1 : -1), R = this.playbackSpeed >= 0 ? T < 0 : T > i;
    this.currentTime = Math.max(T, 0), this.state === "finished" && this.holdTime === null && (this.currentTime = i);
    let N = this.currentTime, O = r;
    if (g) {
      const G = Math.min(this.currentTime, i) / u;
      let Y = Math.floor(G), W = G % 1;
      !W && G >= 1 && (W = 1), W === 1 && Y--, Y = Math.min(Y, g + 1), !!(Y % 2) && (x === "reverse" ? (W = 1 - W, b && (W -= b / u)) : x === "mirror" && (O = o)), N = Iu(0, 1, W) * u;
    }
    const P = R ? { done: !1, value: p[0] } : O.next(N);
    a && (P.value = a(P.value));
    let { done: z } = P;
    !R && c !== null && (z = this.playbackSpeed >= 0 ? this.currentTime >= i : this.currentTime <= 0);
    const q = this.holdTime === null && (this.state === "finished" || this.state === "running" && z);
    return q && _ !== ZE && (P.value = Ik(p, this.options, k, this.speed)), E && E(P.value), q && this.finish(), P;
  }
  /**
   * Allows the returned animation to be awaited or promise-chained. Currently
   * resolves when the animation finishes at all but in a future update could/should
   * reject if its cancels.
   */
  then(t, n) {
    return this.finished.then(t, n);
  }
  get duration() {
    return /* @__PURE__ */ Xa(this.calculatedDuration);
  }
  get iterationDuration() {
    const { delay: t = 0 } = this.options || {};
    return this.duration + /* @__PURE__ */ Xa(t);
  }
  get time() {
    return /* @__PURE__ */ Xa(this.currentTime);
  }
  set time(t) {
    var n;
    t = /* @__PURE__ */ Ul(t), this.currentTime = t, this.startTime === null || this.holdTime !== null || this.playbackSpeed === 0 ? this.holdTime = t : this.driver && (this.startTime = this.driver.now() - t / this.playbackSpeed), (n = this.driver) == null || n.start(!1);
  }
  get speed() {
    return this.playbackSpeed;
  }
  set speed(t) {
    this.updateTime(Js.now());
    const n = this.playbackSpeed !== t;
    this.playbackSpeed = t, n && (this.time = /* @__PURE__ */ Xa(this.currentTime));
  }
  play() {
    var i, a;
    if (this.isStopped)
      return;
    const { driver: t = Sie, startTime: n } = this.options;
    this.driver || (this.driver = t((o) => this.tick(o))), (a = (i = this.options).onPlay) == null || a.call(i);
    const r = this.driver.now();
    this.state === "finished" ? (this.updateFinished(), this.startTime = r) : this.holdTime !== null ? this.startTime = r - this.holdTime : this.startTime || (this.startTime = n ?? r), this.state === "finished" && this.speed < 0 && (this.startTime += this.calculatedDuration), this.holdTime = null, this.state = "running", this.driver.start();
  }
  pause() {
    this.state = "paused", this.updateTime(Js.now()), this.holdTime = this.currentTime;
  }
  complete() {
    this.state !== "running" && this.play(), this.state = "finished", this.holdTime = null;
  }
  finish() {
    var t, n;
    this.notifyFinished(), this.teardown(), this.state = "finished", (n = (t = this.options).onComplete) == null || n.call(t);
  }
  cancel() {
    var t, n;
    this.holdTime = null, this.startTime = 0, this.tick(0), this.teardown(), (n = (t = this.options).onCancel) == null || n.call(t);
  }
  teardown() {
    this.state = "idle", this.stopDriver(), this.startTime = this.holdTime = null;
  }
  stopDriver() {
    this.driver && (this.driver.stop(), this.driver = void 0);
  }
  sample(t) {
    return this.startTime = 0, this.tick(t, !0);
  }
  attachTimeline(t) {
    var n;
    return this.options.allowFlatten && (this.options.type = "keyframes", this.options.ease = "linear", this.initAnimation()), (n = this.driver) == null || n.stop(), t.observe(this);
  }
}
function qie(e) {
  for (let t = 1; t < e.length; t++)
    e[t] ?? (e[t] = e[t - 1]);
}
const $d = (e) => e * 180 / Math.PI, XE = (e) => {
  const t = $d(Math.atan2(e[1], e[0]));
  return QE(t);
}, $ie = {
  x: 4,
  y: 5,
  translateX: 4,
  translateY: 5,
  scaleX: 0,
  scaleY: 3,
  scale: (e) => (Math.abs(e[0]) + Math.abs(e[3])) / 2,
  rotate: XE,
  rotateZ: XE,
  skewX: (e) => $d(Math.atan(e[1])),
  skewY: (e) => $d(Math.atan(e[2])),
  skew: (e) => (Math.abs(e[1]) + Math.abs(e[2])) / 2
}, QE = (e) => (e = e % 360, e < 0 && (e += 360), e), pj = XE, mj = (e) => Math.sqrt(e[0] * e[0] + e[1] * e[1]), gj = (e) => Math.sqrt(e[4] * e[4] + e[5] * e[5]), Fie = {
  x: 12,
  y: 13,
  z: 14,
  translateX: 12,
  translateY: 13,
  translateZ: 14,
  scaleX: mj,
  scaleY: gj,
  scale: (e) => (mj(e) + gj(e)) / 2,
  rotateX: (e) => QE($d(Math.atan2(e[6], e[5]))),
  rotateY: (e) => QE($d(Math.atan2(-e[2], e[0]))),
  rotateZ: pj,
  rotate: pj,
  skewX: (e) => $d(Math.atan(e[4])),
  skewY: (e) => $d(Math.atan(e[1])),
  skew: (e) => (Math.abs(e[1]) + Math.abs(e[4])) / 2
};
function JE(e) {
  return e.includes("scale") ? 1 : 0;
}
function e5(e, t) {
  if (!e || e === "none")
    return JE(t);
  const n = e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);
  let r, i;
  if (n)
    r = Fie, i = n;
  else {
    const u = e.match(/^matrix\(([-\d.e\s,]+)\)$/u);
    r = $ie, i = u;
  }
  if (!i)
    return JE(t);
  const a = r[t], o = i[1].split(",").map(Vie);
  return typeof a == "function" ? a(o) : o[a];
}
const Uie = (e, t) => {
  const { transform: n = "none" } = getComputedStyle(e);
  return e5(n, t);
};
function Vie(e) {
  return parseFloat(e.trim());
}
const _m = [
  "transformPerspective",
  "x",
  "y",
  "z",
  "translateX",
  "translateY",
  "translateZ",
  "scale",
  "scaleX",
  "scaleY",
  "rotate",
  "rotateX",
  "rotateY",
  "rotateZ",
  "skew",
  "skewX",
  "skewY"
], Sm = new Set(_m), yj = (e) => e === wm || e === It, Hie = /* @__PURE__ */ new Set(["x", "y", "z"]), Gie = _m.filter((e) => !Hie.has(e));
function Kie(e) {
  const t = [];
  return Gie.forEach((n) => {
    const r = e.getValue(n);
    r !== void 0 && (t.push([n, r.get()]), r.set(n.startsWith("scale") ? 1 : 0));
  }), t;
}
const Gd = {
  // Dimensions
  width: ({ x: e }, { paddingLeft: t = "0", paddingRight: n = "0" }) => e.max - e.min - parseFloat(t) - parseFloat(n),
  height: ({ y: e }, { paddingTop: t = "0", paddingBottom: n = "0" }) => e.max - e.min - parseFloat(t) - parseFloat(n),
  top: (e, { top: t }) => parseFloat(t),
  left: (e, { left: t }) => parseFloat(t),
  bottom: ({ y: e }, { top: t }) => parseFloat(t) + (e.max - e.min),
  right: ({ x: e }, { left: t }) => parseFloat(t) + (e.max - e.min),
  // Transform
  x: (e, { transform: t }) => e5(t, "x"),
  y: (e, { transform: t }) => e5(t, "y")
};
Gd.translateX = Gd.x;
Gd.translateY = Gd.y;
const Kd = /* @__PURE__ */ new Set();
let t5 = !1, n5 = !1, r5 = !1;
function dI() {
  if (n5) {
    const e = Array.from(Kd).filter((r) => r.needsMeasurement), t = new Set(e.map((r) => r.element)), n = /* @__PURE__ */ new Map();
    t.forEach((r) => {
      const i = Kie(r);
      i.length && (n.set(r, i), r.render());
    }), e.forEach((r) => r.measureInitialState()), t.forEach((r) => {
      r.render();
      const i = n.get(r);
      i && i.forEach(([a, o]) => {
        var u;
        (u = r.getValue(a)) == null || u.set(o);
      });
    }), e.forEach((r) => r.measureEndState()), e.forEach((r) => {
      r.suspendedScrollY !== void 0 && window.scrollTo(0, r.suspendedScrollY);
    });
  }
  n5 = !1, t5 = !1, Kd.forEach((e) => e.complete(r5)), Kd.clear();
}
function hI() {
  Kd.forEach((e) => {
    e.readKeyframes(), e.needsMeasurement && (n5 = !0);
  });
}
function Yie() {
  r5 = !0, hI(), dI(), r5 = !1;
}
class qk {
  constructor(t, n, r, i, a, o = !1) {
    this.state = "pending", this.isAsync = !1, this.needsMeasurement = !1, this.unresolvedKeyframes = [...t], this.onComplete = n, this.name = r, this.motionValue = i, this.element = a, this.isAsync = o;
  }
  scheduleResolve() {
    this.state = "scheduled", this.isAsync ? (Kd.add(this), t5 || (t5 = !0, sr.read(hI), sr.resolveKeyframes(dI))) : (this.readKeyframes(), this.complete());
  }
  readKeyframes() {
    const { unresolvedKeyframes: t, name: n, element: r, motionValue: i } = this;
    if (t[0] === null) {
      const a = i == null ? void 0 : i.get(), o = t[t.length - 1];
      if (a !== void 0)
        t[0] = a;
      else if (r && n) {
        const u = r.readValue(n, o);
        u != null && (t[0] = u);
      }
      t[0] === void 0 && (t[0] = o), i && a === void 0 && i.set(t[0]);
    }
    qie(t);
  }
  setFinalKeyframe() {
  }
  measureInitialState() {
  }
  renderEndStyles() {
  }
  measureEndState() {
  }
  complete(t = !1) {
    this.state = "complete", this.onComplete(this.unresolvedKeyframes, this.finalKeyframe, t), Kd.delete(this);
  }
  cancel() {
    this.state === "scheduled" && (Kd.delete(this), this.state = "pending");
  }
  resume() {
    this.state === "pending" && this.scheduleResolve();
  }
}
const Wie = (e) => e.startsWith("--");
function Zie(e, t, n) {
  Wie(t) ? e.style.setProperty(t, n) : e.style[t] = n;
}
const Xie = /* @__PURE__ */ Ak(() => window.ScrollTimeline !== void 0), Qie = {};
function Jie(e, t) {
  const n = /* @__PURE__ */ Ak(e);
  return () => Qie[t] ?? n();
}
const pI = /* @__PURE__ */ Jie(() => {
  try {
    document.createElement("div").animate({ opacity: 0 }, { easing: "linear(0, 1)" });
  } catch {
    return !1;
  }
  return !0;
}, "linearEasing"), w0 = ([e, t, n, r]) => `cubic-bezier(${e}, ${t}, ${n}, ${r})`, vj = {
  linear: "linear",
  ease: "ease",
  easeIn: "ease-in",
  easeOut: "ease-out",
  easeInOut: "ease-in-out",
  circIn: /* @__PURE__ */ w0([0, 0.65, 0.55, 1]),
  circOut: /* @__PURE__ */ w0([0.55, 0, 1, 0.45]),
  backIn: /* @__PURE__ */ w0([0.31, 0.01, 0.66, -0.59]),
  backOut: /* @__PURE__ */ w0([0.33, 1.53, 0.69, 0.99])
};
function mI(e, t) {
  if (e)
    return typeof e == "function" ? pI() ? lI(e, t) : "ease-out" : XP(e) ? w0(e) : Array.isArray(e) ? e.map((n) => mI(n, t) || vj.easeOut) : vj[e];
}
function ese(e, t, n, { delay: r = 0, duration: i = 300, repeat: a = 0, repeatType: o = "loop", ease: u = "easeOut", times: c } = {}, f = void 0) {
  const p = {
    [t]: n
  };
  c && (p.offset = c);
  const g = mI(u, i);
  Array.isArray(g) && (p.easing = g);
  const x = {
    delay: r,
    duration: i,
    easing: Array.isArray(g) ? "linear" : g,
    fill: "both",
    iterations: a + 1,
    direction: o === "reverse" ? "alternate" : "normal"
  };
  return f && (x.pseudoElement = f), e.animate(p, x);
}
function gI(e) {
  return typeof e == "function" && "applyToOptions" in e;
}
function tse({ type: e, ...t }) {
  return gI(e) && pI() ? e.applyToOptions(t) : (t.duration ?? (t.duration = 300), t.ease ?? (t.ease = "easeOut"), t);
}
class nse extends Lk {
  constructor(t) {
    if (super(), this.finishedTime = null, this.isStopped = !1, !t)
      return;
    const { element: n, name: r, keyframes: i, pseudoElement: a, allowFlatten: o = !1, finalKeyframe: u, onComplete: c } = t;
    this.isPseudoElement = !!a, this.allowFlatten = o, this.options = t;
    const f = tse(t);
    this.animation = ese(n, r, i, f, a), f.autoplay === !1 && this.animation.pause(), this.animation.onfinish = () => {
      if (this.finishedTime = this.time, !a) {
        const p = Ik(i, this.options, u, this.speed);
        this.updateMotionValue ? this.updateMotionValue(p) : Zie(n, r, p), this.animation.cancel();
      }
      c == null || c(), this.notifyFinished();
    };
  }
  play() {
    this.isStopped || (this.animation.play(), this.state === "finished" && this.updateFinished());
  }
  pause() {
    this.animation.pause();
  }
  complete() {
    var t, n;
    (n = (t = this.animation).finish) == null || n.call(t);
  }
  cancel() {
    try {
      this.animation.cancel();
    } catch {
    }
  }
  stop() {
    if (this.isStopped)
      return;
    this.isStopped = !0;
    const { state: t } = this;
    t === "idle" || t === "finished" || (this.updateMotionValue ? this.updateMotionValue() : this.commitStyles(), this.isPseudoElement || this.cancel());
  }
  /**
   * WAAPI doesn't natively have any interruption capabilities.
   *
   * In this method, we commit styles back to the DOM before cancelling
   * the animation.
   *
   * This is designed to be overridden by NativeAnimationExtended, which
   * will create a renderless JS animation and sample it twice to calculate
   * its current value, "previous" value, and therefore allow
   * Motion to also correctly calculate velocity for any subsequent animation
   * while deferring the commit until the next animation frame.
   */
  commitStyles() {
    var t, n;
    this.isPseudoElement || (n = (t = this.animation).commitStyles) == null || n.call(t);
  }
  get duration() {
    var n, r;
    const t = ((r = (n = this.animation.effect) == null ? void 0 : n.getComputedTiming) == null ? void 0 : r.call(n).duration) || 0;
    return /* @__PURE__ */ Xa(Number(t));
  }
  get iterationDuration() {
    const { delay: t = 0 } = this.options || {};
    return this.duration + /* @__PURE__ */ Xa(t);
  }
  get time() {
    return /* @__PURE__ */ Xa(Number(this.animation.currentTime) || 0);
  }
  set time(t) {
    this.finishedTime = null, this.animation.currentTime = /* @__PURE__ */ Ul(t);
  }
  /**
   * The playback speed of the animation.
   * 1 = normal speed, 2 = double speed, 0.5 = half speed.
   */
  get speed() {
    return this.animation.playbackRate;
  }
  set speed(t) {
    t < 0 && (this.finishedTime = null), this.animation.playbackRate = t;
  }
  get state() {
    return this.finishedTime !== null ? "finished" : this.animation.playState;
  }
  get startTime() {
    return Number(this.animation.startTime);
  }
  set startTime(t) {
    this.animation.startTime = t;
  }
  /**
   * Attaches a timeline to the animation, for instance the `ScrollTimeline`.
   */
  attachTimeline({ timeline: t, observe: n }) {
    var r;
    return this.allowFlatten && ((r = this.animation.effect) == null || r.updateTiming({ easing: "linear" })), this.animation.onfinish = null, t && Xie() ? (this.animation.timeline = t, Qa) : n(this);
  }
}
const yI = {
  anticipate: KP,
  backInOut: GP,
  circInOut: WP
};
function rse(e) {
  return e in yI;
}
function ise(e) {
  typeof e.ease == "string" && rse(e.ease) && (e.ease = yI[e.ease]);
}
const xj = 10;
class sse extends nse {
  constructor(t) {
    ise(t), fI(t), super(t), t.startTime && (this.startTime = t.startTime), this.options = t;
  }
  /**
   * WAAPI doesn't natively have any interruption capabilities.
   *
   * Rather than read commited styles back out of the DOM, we can
   * create a renderless JS animation and sample it twice to calculate
   * its current value, "previous" value, and therefore allow
   * Motion to calculate velocity for any subsequent animation.
   */
  updateMotionValue(t) {
    const { motionValue: n, onUpdate: r, onComplete: i, element: a, ...o } = this.options;
    if (!n)
      return;
    if (t !== void 0) {
      n.set(t);
      return;
    }
    const u = new Bk({
      ...o,
      autoplay: !1
    }), c = /* @__PURE__ */ Ul(this.finishedTime ?? this.time);
    n.setWithVelocity(u.sample(c - xj).value, u.sample(c).value, xj), u.stop();
  }
}
const bj = (e, t) => t === "zIndex" ? !1 : !!(typeof e == "number" || Array.isArray(e) || typeof e == "string" && // It's animatable if we have a string
(lf.test(e) || e === "0") && // And it contains numbers and/or colors
!e.startsWith("url("));
function ase(e) {
  const t = e[0];
  if (e.length === 1)
    return !0;
  for (let n = 0; n < e.length; n++)
    if (e[n] !== t)
      return !0;
}
function ose(e, t, n, r) {
  const i = e[0];
  if (i === null)
    return !1;
  if (t === "display" || t === "visibility")
    return !0;
  const a = e[e.length - 1], o = bj(i, t), u = bj(a, t);
  return !o || !u ? !1 : ase(e) || (n === "spring" || gI(n)) && r;
}
function i5(e) {
  e.duration = 0, e.type = "keyframes";
}
const lse = /* @__PURE__ */ new Set([
  "opacity",
  "clipPath",
  "filter",
  "transform"
  // TODO: Could be re-enabled now we have support for linear() easing
  // "background-color"
]), use = /* @__PURE__ */ Ak(() => Object.hasOwnProperty.call(Element.prototype, "animate"));
function cse(e) {
  var p;
  const { motionValue: t, name: n, repeatDelay: r, repeatType: i, damping: a, type: o } = e;
  if (!(((p = t == null ? void 0 : t.owner) == null ? void 0 : p.current) instanceof HTMLElement))
    return !1;
  const { onUpdate: c, transformTemplate: f } = t.owner.getProps();
  return use() && n && lse.has(n) && (n !== "transform" || !f) && /**
   * If we're outputting values to onUpdate then we can't use WAAPI as there's
   * no way to read the value from WAAPI every frame.
   */
  !c && !r && i !== "mirror" && a !== 0 && o !== "inertia";
}
const fse = 40;
class dse extends Lk {
  constructor({ autoplay: t = !0, delay: n = 0, type: r = "keyframes", repeat: i = 0, repeatDelay: a = 0, repeatType: o = "loop", keyframes: u, name: c, motionValue: f, element: p, ...g }) {
    var _;
    super(), this.stop = () => {
      var E, k;
      this._animation && (this._animation.stop(), (E = this.stopTimeline) == null || E.call(this)), (k = this.keyframeResolver) == null || k.cancel();
    }, this.createdAt = Js.now();
    const x = {
      autoplay: t,
      delay: n,
      type: r,
      repeat: i,
      repeatDelay: a,
      repeatType: o,
      name: c,
      motionValue: f,
      element: p,
      ...g
    }, b = (p == null ? void 0 : p.KeyframeResolver) || qk;
    this.keyframeResolver = new b(u, (E, k, T) => this.onKeyframesResolved(E, k, x, !T), c, f, p), (_ = this.keyframeResolver) == null || _.scheduleResolve();
  }
  onKeyframesResolved(t, n, r, i) {
    this.keyframeResolver = void 0;
    const { name: a, type: o, velocity: u, delay: c, isHandoff: f, onUpdate: p } = r;
    this.resolvedAt = Js.now(), ose(t, a, o, u) || ((Lu.instantAnimations || !c) && (p == null || p(Ik(t, r, n))), t[0] = t[t.length - 1], i5(r), r.repeat = 0);
    const x = {
      startTime: i ? this.resolvedAt ? this.resolvedAt - this.createdAt > fse ? this.resolvedAt : this.createdAt : this.createdAt : void 0,
      finalKeyframe: n,
      ...r,
      keyframes: t
    }, b = !f && cse(x) ? new sse({
      ...x,
      element: x.motionValue.owner.current
    }) : new Bk(x);
    b.finished.then(() => this.notifyFinished()).catch(Qa), this.pendingTimeline && (this.stopTimeline = b.attachTimeline(this.pendingTimeline), this.pendingTimeline = void 0), this._animation = b;
  }
  get finished() {
    return this._animation ? this.animation.finished : this._finished;
  }
  then(t, n) {
    return this.finished.finally(t).then(() => {
    });
  }
  get animation() {
    var t;
    return this._animation || ((t = this.keyframeResolver) == null || t.resume(), Yie()), this._animation;
  }
  get duration() {
    return this.animation.duration;
  }
  get iterationDuration() {
    return this.animation.iterationDuration;
  }
  get time() {
    return this.animation.time;
  }
  set time(t) {
    this.animation.time = t;
  }
  get speed() {
    return this.animation.speed;
  }
  get state() {
    return this.animation.state;
  }
  set speed(t) {
    this.animation.speed = t;
  }
  get startTime() {
    return this.animation.startTime;
  }
  attachTimeline(t) {
    return this._animation ? this.stopTimeline = this.animation.attachTimeline(t) : this.pendingTimeline = t, () => this.stop();
  }
  play() {
    this.animation.play();
  }
  pause() {
    this.animation.pause();
  }
  complete() {
    this.animation.complete();
  }
  cancel() {
    var t;
    this._animation && this.animation.cancel(), (t = this.keyframeResolver) == null || t.cancel();
  }
}
const hse = (
  // eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive, as it can match a lot of words
  /^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u
);
function pse(e) {
  const t = hse.exec(e);
  if (!t)
    return [,];
  const [, n, r, i] = t;
  return [`--${n ?? r}`, i];
}
function vI(e, t, n = 1) {
  const [r, i] = pse(e);
  if (!r)
    return;
  const a = window.getComputedStyle(t).getPropertyValue(r);
  if (a) {
    const o = a.trim();
    return LP(o) ? parseFloat(o) : o;
  }
  return Mk(i) ? vI(i, t, n + 1) : i;
}
function $k(e, t) {
  return (e == null ? void 0 : e[t]) ?? (e == null ? void 0 : e.default) ?? e;
}
const xI = /* @__PURE__ */ new Set([
  "width",
  "height",
  "top",
  "left",
  "right",
  "bottom",
  ..._m
]), mse = {
  test: (e) => e === "auto",
  parse: (e) => e
}, bI = (e) => (t) => t.test(e), wI = [wm, It, Vl, Zc, oie, aie, mse], wj = (e) => wI.find(bI(e));
function gse(e) {
  return typeof e == "number" ? e === 0 : e !== null ? e === "none" || e === "0" || qP(e) : !0;
}
const yse = /* @__PURE__ */ new Set(["brightness", "contrast", "saturate", "opacity"]);
function vse(e) {
  const [t, n] = e.slice(0, -1).split("(");
  if (t === "drop-shadow")
    return e;
  const [r] = n.match(Ok) || [];
  if (!r)
    return e;
  const i = n.replace(r, "");
  let a = yse.has(t) ? 1 : 0;
  return r !== n && (a *= 100), t + "(" + a + i + ")";
}
const xse = /\b([a-z-]*)\(.*?\)/gu, s5 = {
  ...lf,
  getAnimatableNone: (e) => {
    const t = e.match(xse);
    return t ? t.map(vse).join(" ") : e;
  }
}, _j = {
  ...wm,
  transform: Math.round
}, bse = {
  rotate: Zc,
  rotateX: Zc,
  rotateY: Zc,
  rotateZ: Zc,
  scale: D1,
  scaleX: D1,
  scaleY: D1,
  scaleZ: D1,
  skew: Zc,
  skewX: Zc,
  skewY: Zc,
  distance: It,
  translateX: It,
  translateY: It,
  translateZ: It,
  x: It,
  y: It,
  z: It,
  perspective: It,
  transformPerspective: It,
  opacity: X0,
  originX: uj,
  originY: uj,
  originZ: It
}, Fk = {
  // Border props
  borderWidth: It,
  borderTopWidth: It,
  borderRightWidth: It,
  borderBottomWidth: It,
  borderLeftWidth: It,
  borderRadius: It,
  radius: It,
  borderTopLeftRadius: It,
  borderTopRightRadius: It,
  borderBottomRightRadius: It,
  borderBottomLeftRadius: It,
  // Positioning props
  width: It,
  maxWidth: It,
  height: It,
  maxHeight: It,
  top: It,
  right: It,
  bottom: It,
  left: It,
  // Spacing props
  padding: It,
  paddingTop: It,
  paddingRight: It,
  paddingBottom: It,
  paddingLeft: It,
  margin: It,
  marginTop: It,
  marginRight: It,
  marginBottom: It,
  marginLeft: It,
  // Misc
  backgroundPositionX: It,
  backgroundPositionY: It,
  ...bse,
  zIndex: _j,
  // SVG
  fillOpacity: X0,
  strokeOpacity: X0,
  numOctaves: _j
}, wse = {
  ...Fk,
  // Color props
  color: Kr,
  backgroundColor: Kr,
  outlineColor: Kr,
  fill: Kr,
  stroke: Kr,
  // Border props
  borderColor: Kr,
  borderTopColor: Kr,
  borderRightColor: Kr,
  borderBottomColor: Kr,
  borderLeftColor: Kr,
  filter: s5,
  WebkitFilter: s5
}, _I = (e) => wse[e];
function SI(e, t) {
  let n = _I(e);
  return n !== s5 && (n = lf), n.getAnimatableNone ? n.getAnimatableNone(t) : void 0;
}
const _se = /* @__PURE__ */ new Set(["auto", "none", "0"]);
function Sse(e, t, n) {
  let r = 0, i;
  for (; r < e.length && !i; ) {
    const a = e[r];
    typeof a == "string" && !_se.has(a) && Q0(a).values.length && (i = e[r]), r++;
  }
  if (i && n)
    for (const a of t)
      e[a] = SI(n, i);
}
class Cse extends qk {
  constructor(t, n, r, i, a) {
    super(t, n, r, i, a, !0);
  }
  readKeyframes() {
    const { unresolvedKeyframes: t, element: n, name: r } = this;
    if (!n || !n.current)
      return;
    super.readKeyframes();
    for (let c = 0; c < t.length; c++) {
      let f = t[c];
      if (typeof f == "string" && (f = f.trim(), Mk(f))) {
        const p = vI(f, n.current);
        p !== void 0 && (t[c] = p), c === t.length - 1 && (this.finalKeyframe = f);
      }
    }
    if (this.resolveNoneKeyframes(), !xI.has(r) || t.length !== 2)
      return;
    const [i, a] = t, o = wj(i), u = wj(a);
    if (o !== u)
      if (yj(o) && yj(u))
        for (let c = 0; c < t.length; c++) {
          const f = t[c];
          typeof f == "string" && (t[c] = parseFloat(f));
        }
      else Gd[r] && (this.needsMeasurement = !0);
  }
  resolveNoneKeyframes() {
    const { unresolvedKeyframes: t, name: n } = this, r = [];
    for (let i = 0; i < t.length; i++)
      (t[i] === null || gse(t[i])) && r.push(i);
    r.length && Sse(t, r, n);
  }
  measureInitialState() {
    const { element: t, unresolvedKeyframes: n, name: r } = this;
    if (!t || !t.current)
      return;
    r === "height" && (this.suspendedScrollY = window.pageYOffset), this.measuredOrigin = Gd[r](t.measureViewportBox(), window.getComputedStyle(t.current)), n[0] = this.measuredOrigin;
    const i = n[n.length - 1];
    i !== void 0 && t.getValue(r, i).jump(i, !1);
  }
  measureEndState() {
    var u;
    const { element: t, name: n, unresolvedKeyframes: r } = this;
    if (!t || !t.current)
      return;
    const i = t.getValue(n);
    i && i.jump(this.measuredOrigin, !1);
    const a = r.length - 1, o = r[a];
    r[a] = Gd[n](t.measureViewportBox(), window.getComputedStyle(t.current)), o !== null && this.finalKeyframe === void 0 && (this.finalKeyframe = o), (u = this.removedTransforms) != null && u.length && this.removedTransforms.forEach(([c, f]) => {
      t.getValue(c).set(f);
    }), this.resolveNoneKeyframes();
  }
}
function Ese(e, t, n) {
  if (e instanceof EventTarget)
    return [e];
  if (typeof e == "string") {
    let r = document;
    const i = (n == null ? void 0 : n[e]) ?? r.querySelectorAll(e);
    return i ? Array.from(i) : [];
  }
  return Array.from(e);
}
const CI = (e, t) => t && typeof e == "number" ? t.transform(e) : e;
function kse(e) {
  return BP(e) && "offsetHeight" in e;
}
const Sj = 30, Tse = (e) => !isNaN(parseFloat(e)), P0 = {
  current: void 0
};
class Ase {
  /**
   * @param init - The initiating value
   * @param config - Optional configuration options
   *
   * -  `transformer`: A function to transform incoming values with.
   */
  constructor(t, n = {}) {
    this.canTrackVelocity = null, this.events = {}, this.updateAndNotify = (r) => {
      var a;
      const i = Js.now();
      if (this.updatedAt !== i && this.setPrevFrameValue(), this.prev = this.current, this.setCurrent(r), this.current !== this.prev && ((a = this.events.change) == null || a.notify(this.current), this.dependents))
        for (const o of this.dependents)
          o.dirty();
    }, this.hasAnimated = !1, this.setCurrent(t), this.owner = n.owner;
  }
  setCurrent(t) {
    this.current = t, this.updatedAt = Js.now(), this.canTrackVelocity === null && t !== void 0 && (this.canTrackVelocity = Tse(this.current));
  }
  setPrevFrameValue(t = this.current) {
    this.prevFrameValue = t, this.prevUpdatedAt = this.updatedAt;
  }
  /**
   * Adds a function that will be notified when the `MotionValue` is updated.
   *
   * It returns a function that, when called, will cancel the subscription.
   *
   * When calling `onChange` inside a React component, it should be wrapped with the
   * `useEffect` hook. As it returns an unsubscribe function, this should be returned
   * from the `useEffect` function to ensure you don't add duplicate subscribers..
   *
   * ```jsx
   * export const MyComponent = () => {
   *   const x = useMotionValue(0)
   *   const y = useMotionValue(0)
   *   const opacity = useMotionValue(1)
   *
   *   useEffect(() => {
   *     function updateOpacity() {
   *       const maxXY = Math.max(x.get(), y.get())
   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])
   *       opacity.set(newOpacity)
   *     }
   *
   *     const unsubscribeX = x.on("change", updateOpacity)
   *     const unsubscribeY = y.on("change", updateOpacity)
   *
   *     return () => {
   *       unsubscribeX()
   *       unsubscribeY()
   *     }
   *   }, [])
   *
   *   return <motion.div style={{ x }} />
   * }
   * ```
   *
   * @param subscriber - A function that receives the latest value.
   * @returns A function that, when called, will cancel this subscription.
   *
   * @deprecated
   */
  onChange(t) {
    return this.on("change", t);
  }
  on(t, n) {
    this.events[t] || (this.events[t] = new jk());
    const r = this.events[t].add(n);
    return t === "change" ? () => {
      r(), sr.read(() => {
        this.events.change.getSize() || this.stop();
      });
    } : r;
  }
  clearListeners() {
    for (const t in this.events)
      this.events[t].clear();
  }
  /**
   * Attaches a passive effect to the `MotionValue`.
   */
  attach(t, n) {
    this.passiveEffect = t, this.stopPassiveEffect = n;
  }
  /**
   * Sets the state of the `MotionValue`.
   *
   * @remarks
   *
   * ```jsx
   * const x = useMotionValue(0)
   * x.set(10)
   * ```
   *
   * @param latest - Latest value to set.
   * @param render - Whether to notify render subscribers. Defaults to `true`
   *
   * @public
   */
  set(t) {
    this.passiveEffect ? this.passiveEffect(t, this.updateAndNotify) : this.updateAndNotify(t);
  }
  setWithVelocity(t, n, r) {
    this.set(n), this.prev = void 0, this.prevFrameValue = t, this.prevUpdatedAt = this.updatedAt - r;
  }
  /**
   * Set the state of the `MotionValue`, stopping any active animations,
   * effects, and resets velocity to `0`.
   */
  jump(t, n = !0) {
    this.updateAndNotify(t), this.prev = t, this.prevUpdatedAt = this.prevFrameValue = void 0, n && this.stop(), this.stopPassiveEffect && this.stopPassiveEffect();
  }
  dirty() {
    var t;
    (t = this.events.change) == null || t.notify(this.current);
  }
  addDependent(t) {
    this.dependents || (this.dependents = /* @__PURE__ */ new Set()), this.dependents.add(t);
  }
  removeDependent(t) {
    this.dependents && this.dependents.delete(t);
  }
  /**
   * Returns the latest state of `MotionValue`
   *
   * @returns - The latest state of `MotionValue`
   *
   * @public
   */
  get() {
    return P0.current && P0.current.push(this), this.current;
  }
  /**
   * @public
   */
  getPrevious() {
    return this.prev;
  }
  /**
   * Returns the latest velocity of `MotionValue`
   *
   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.
   *
   * @public
   */
  getVelocity() {
    const t = Js.now();
    if (!this.canTrackVelocity || this.prevFrameValue === void 0 || t - this.updatedAt > Sj)
      return 0;
    const n = Math.min(this.updatedAt - this.prevUpdatedAt, Sj);
    return $P(parseFloat(this.current) - parseFloat(this.prevFrameValue), n);
  }
  /**
   * Registers a new animation to control this `MotionValue`. Only one
   * animation can drive a `MotionValue` at one time.
   *
   * ```jsx
   * value.start()
   * ```
   *
   * @param animation - A function that starts the provided animation
   */
  start(t) {
    return this.stop(), new Promise((n) => {
      this.hasAnimated = !0, this.animation = t(n), this.events.animationStart && this.events.animationStart.notify();
    }).then(() => {
      this.events.animationComplete && this.events.animationComplete.notify(), this.clearAnimation();
    });
  }
  /**
   * Stop the currently active animation.
   *
   * @public
   */
  stop() {
    this.animation && (this.animation.stop(), this.events.animationCancel && this.events.animationCancel.notify()), this.clearAnimation();
  }
  /**
   * Returns `true` if this value is currently animating.
   *
   * @public
   */
  isAnimating() {
    return !!this.animation;
  }
  clearAnimation() {
    delete this.animation;
  }
  /**
   * Destroy and clean up subscribers to this `MotionValue`.
   *
   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically
   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually
   * created a `MotionValue` via the `motionValue` function.
   *
   * @public
   */
  destroy() {
    var t, n;
    (t = this.dependents) == null || t.clear(), (n = this.events.destroy) == null || n.notify(), this.clearListeners(), this.stop(), this.stopPassiveEffect && this.stopPassiveEffect();
  }
}
function Jd(e, t) {
  return new Ase(e, t);
}
const { schedule: Uk } = /* @__PURE__ */ QP(queueMicrotask, !1), Io = {
  x: !1,
  y: !1
};
function EI() {
  return Io.x || Io.y;
}
function jse(e) {
  return e === "x" || e === "y" ? Io[e] ? null : (Io[e] = !0, () => {
    Io[e] = !1;
  }) : Io.x || Io.y ? null : (Io.x = Io.y = !0, () => {
    Io.x = Io.y = !1;
  });
}
function kI(e, t) {
  const n = Ese(e), r = new AbortController(), i = {
    passive: !0,
    ...t,
    signal: r.signal
  };
  return [n, i, () => r.abort()];
}
function Cj(e) {
  return !(e.pointerType === "touch" || EI());
}
function Nse(e, t, n = {}) {
  const [r, i, a] = kI(e, n), o = (u) => {
    if (!Cj(u))
      return;
    const { target: c } = u, f = t(c, u);
    if (typeof f != "function" || !c)
      return;
    const p = (g) => {
      Cj(g) && (f(g), c.removeEventListener("pointerleave", p));
    };
    c.addEventListener("pointerleave", p, i);
  };
  return r.forEach((u) => {
    u.addEventListener("pointerenter", o, i);
  }), a;
}
const TI = (e, t) => t ? e === t ? !0 : TI(e, t.parentElement) : !1, Vk = (e) => e.pointerType === "mouse" ? typeof e.button != "number" || e.button <= 0 : e.isPrimary !== !1, Rse = /* @__PURE__ */ new Set([
  "BUTTON",
  "INPUT",
  "SELECT",
  "TEXTAREA",
  "A"
]);
function Mse(e) {
  return Rse.has(e.tagName) || e.tabIndex !== -1;
}
const ix = /* @__PURE__ */ new WeakSet();
function Ej(e) {
  return (t) => {
    t.key === "Enter" && e(t);
  };
}
function Cw(e, t) {
  e.dispatchEvent(new PointerEvent("pointer" + t, { isPrimary: !0, bubbles: !0 }));
}
const Ose = (e, t) => {
  const n = e.currentTarget;
  if (!n)
    return;
  const r = Ej(() => {
    if (ix.has(n))
      return;
    Cw(n, "down");
    const i = Ej(() => {
      Cw(n, "up");
    }), a = () => Cw(n, "cancel");
    n.addEventListener("keyup", i, t), n.addEventListener("blur", a, t);
  });
  n.addEventListener("keydown", r, t), n.addEventListener("blur", () => n.removeEventListener("keydown", r), t);
};
function kj(e) {
  return Vk(e) && !EI();
}
function Dse(e, t, n = {}) {
  const [r, i, a] = kI(e, n), o = (u) => {
    const c = u.currentTarget;
    if (!kj(u))
      return;
    ix.add(c);
    const f = t(c, u), p = (b, _) => {
      window.removeEventListener("pointerup", g), window.removeEventListener("pointercancel", x), ix.has(c) && ix.delete(c), kj(b) && typeof f == "function" && f(b, { success: _ });
    }, g = (b) => {
      p(b, c === window || c === document || n.useGlobalTarget || TI(c, b.target));
    }, x = (b) => {
      p(b, !1);
    };
    window.addEventListener("pointerup", g, i), window.addEventListener("pointercancel", x, i);
  };
  return r.forEach((u) => {
    (n.useGlobalTarget ? window : u).addEventListener("pointerdown", o, i), kse(u) && (u.addEventListener("focus", (f) => Ose(f, i)), !Mse(u) && !u.hasAttribute("tabindex") && (u.tabIndex = 0));
  }), a;
}
function AI(e) {
  return BP(e) && "ownerSVGElement" in e;
}
function zse(e) {
  return AI(e) && e.tagName === "svg";
}
function Pse(...e) {
  const t = !Array.isArray(e[0]), n = t ? 0 : -1, r = e[0 + n], i = e[1 + n], a = e[2 + n], o = e[3 + n], u = cI(i, a, o);
  return t ? u(r) : u;
}
const Ri = (e) => !!(e && e.getVelocity), Ise = [...wI, Kr, lf], Lse = (e) => Ise.find(bI(e)), Hk = B.createContext({
  transformPagePoint: (e) => e,
  isStatic: !1,
  reducedMotion: "never"
});
function Bse(e = !0) {
  const t = B.useContext(Ek);
  if (t === null)
    return [!0, null];
  const { isPresent: n, onExitComplete: r, register: i } = t, a = B.useId();
  B.useEffect(() => {
    if (e)
      return i(a);
  }, [e]);
  const o = B.useCallback(() => e && r && r(a), [a, r, e]);
  return !n && r ? [!1, o] : [!0];
}
const jI = B.createContext({ strict: !1 }), Tj = {
  animation: [
    "animate",
    "variants",
    "whileHover",
    "whileTap",
    "exit",
    "whileInView",
    "whileFocus",
    "whileDrag"
  ],
  exit: ["exit"],
  drag: ["drag", "dragControls"],
  focus: ["whileFocus"],
  hover: ["whileHover", "onHoverStart", "onHoverEnd"],
  tap: ["whileTap", "onTap", "onTapStart", "onTapCancel"],
  pan: ["onPan", "onPanStart", "onPanSessionStart", "onPanEnd"],
  inView: ["whileInView", "onViewportEnter", "onViewportLeave"],
  layout: ["layout", "layoutId"]
}, lm = {};
for (const e in Tj)
  lm[e] = {
    isEnabled: (t) => Tj[e].some((n) => !!t[n])
  };
function qse(e) {
  for (const t in e)
    lm[t] = {
      ...lm[t],
      ...e[t]
    };
}
const $se = /* @__PURE__ */ new Set([
  "animate",
  "exit",
  "variants",
  "initial",
  "style",
  "values",
  "variants",
  "transition",
  "transformTemplate",
  "custom",
  "inherit",
  "onBeforeLayoutMeasure",
  "onAnimationStart",
  "onAnimationComplete",
  "onUpdate",
  "onDragStart",
  "onDrag",
  "onDragEnd",
  "onMeasureDragConstraints",
  "onDirectionLock",
  "onDragTransitionEnd",
  "_dragX",
  "_dragY",
  "onHoverStart",
  "onHoverEnd",
  "onViewportEnter",
  "onViewportLeave",
  "globalTapTarget",
  "ignoreStrict",
  "viewport"
]);
function Mx(e) {
  return e.startsWith("while") || e.startsWith("drag") && e !== "draggable" || e.startsWith("layout") || e.startsWith("onTap") || e.startsWith("onPan") || e.startsWith("onLayout") || $se.has(e);
}
let NI = (e) => !Mx(e);
function Fse(e) {
  typeof e == "function" && (NI = (t) => t.startsWith("on") ? !Mx(t) : e(t));
}
try {
  Fse(require("@emotion/is-prop-valid").default);
} catch {
}
function Use(e, t, n) {
  const r = {};
  for (const i in e)
    i === "values" && typeof e.values == "object" || (NI(i) || n === !0 && Mx(i) || !t && !Mx(i) || // If trying to use native HTML drag events, forward drag listeners
    e.draggable && i.startsWith("onDrag")) && (r[i] = e[i]);
  return r;
}
const hb = /* @__PURE__ */ B.createContext({});
function pb(e) {
  return e !== null && typeof e == "object" && typeof e.start == "function";
}
function J0(e) {
  return typeof e == "string" || Array.isArray(e);
}
const Gk = [
  "animate",
  "whileInView",
  "whileFocus",
  "whileHover",
  "whileTap",
  "whileDrag",
  "exit"
], Kk = ["initial", ...Gk];
function mb(e) {
  return pb(e.animate) || Kk.some((t) => J0(e[t]));
}
function RI(e) {
  return !!(mb(e) || e.variants);
}
function Vse(e, t) {
  if (mb(e)) {
    const { initial: n, animate: r } = e;
    return {
      initial: n === !1 || J0(n) ? n : void 0,
      animate: J0(r) ? r : void 0
    };
  }
  return e.inherit !== !1 ? t : {};
}
function Hse(e) {
  const { initial: t, animate: n } = Vse(e, B.useContext(hb));
  return B.useMemo(() => ({ initial: t, animate: n }), [Aj(t), Aj(n)]);
}
function Aj(e) {
  return Array.isArray(e) ? e.join(" ") : e;
}
function jj(e, t) {
  return t.max === t.min ? 0 : e / (t.max - t.min) * 100;
}
const p0 = {
  correct: (e, t) => {
    if (!t.target)
      return e;
    if (typeof e == "string")
      if (It.test(e))
        e = parseFloat(e);
      else
        return e;
    const n = jj(e, t.target.x), r = jj(e, t.target.y);
    return `${n}% ${r}%`;
  }
}, Gse = {
  correct: (e, { treeScale: t, projectionDelta: n }) => {
    const r = e, i = lf.parse(e);
    if (i.length > 5)
      return r;
    const a = lf.createTransformer(e), o = typeof i[0] != "number" ? 1 : 0, u = n.x.scale * t.x, c = n.y.scale * t.y;
    i[0 + o] /= u, i[1 + o] /= c;
    const f = cr(u, c, 0.5);
    return typeof i[2 + o] == "number" && (i[2 + o] /= f), typeof i[3 + o] == "number" && (i[3 + o] /= f), a(i);
  }
}, a5 = {
  borderRadius: {
    ...p0,
    applyTo: [
      "borderTopLeftRadius",
      "borderTopRightRadius",
      "borderBottomLeftRadius",
      "borderBottomRightRadius"
    ]
  },
  borderTopLeftRadius: p0,
  borderTopRightRadius: p0,
  borderBottomLeftRadius: p0,
  borderBottomRightRadius: p0,
  boxShadow: Gse
};
function MI(e, { layout: t, layoutId: n }) {
  return Sm.has(e) || e.startsWith("origin") || (t || n !== void 0) && (!!a5[e] || e === "opacity");
}
const Kse = {
  x: "translateX",
  y: "translateY",
  z: "translateZ",
  transformPerspective: "perspective"
}, Yse = _m.length;
function Wse(e, t, n) {
  let r = "", i = !0;
  for (let a = 0; a < Yse; a++) {
    const o = _m[a], u = e[o];
    if (u === void 0)
      continue;
    let c = !0;
    if (typeof u == "number" ? c = u === (o.startsWith("scale") ? 1 : 0) : c = parseFloat(u) === 0, !c || n) {
      const f = CI(u, Fk[o]);
      if (!c) {
        i = !1;
        const p = Kse[o] || o;
        r += `${p}(${f}) `;
      }
      n && (t[o] = f);
    }
  }
  return r = r.trim(), n ? r = n(t, i ? "" : r) : i && (r = "none"), r;
}
function Yk(e, t, n) {
  const { style: r, vars: i, transformOrigin: a } = e;
  let o = !1, u = !1;
  for (const c in t) {
    const f = t[c];
    if (Sm.has(c)) {
      o = !0;
      continue;
    } else if (eI(c)) {
      i[c] = f;
      continue;
    } else {
      const p = CI(f, Fk[c]);
      c.startsWith("origin") ? (u = !0, a[c] = p) : r[c] = p;
    }
  }
  if (t.transform || (o || n ? r.transform = Wse(t, e.transform, n) : r.transform && (r.transform = "none")), u) {
    const { originX: c = "50%", originY: f = "50%", originZ: p = 0 } = a;
    r.transformOrigin = `${c} ${f} ${p}`;
  }
}
const Wk = () => ({
  style: {},
  transform: {},
  transformOrigin: {},
  vars: {}
});
function OI(e, t, n) {
  for (const r in t)
    !Ri(t[r]) && !MI(r, n) && (e[r] = t[r]);
}
function Zse({ transformTemplate: e }, t) {
  return B.useMemo(() => {
    const n = Wk();
    return Yk(n, t, e), Object.assign({}, n.vars, n.style);
  }, [t]);
}
function Xse(e, t) {
  const n = e.style || {}, r = {};
  return OI(r, n, e), Object.assign(r, Zse(e, t)), r;
}
function Qse(e, t) {
  const n = {}, r = Xse(e, t);
  return e.drag && e.dragListener !== !1 && (n.draggable = !1, r.userSelect = r.WebkitUserSelect = r.WebkitTouchCallout = "none", r.touchAction = e.drag === !0 ? "none" : `pan-${e.drag === "x" ? "y" : "x"}`), e.tabIndex === void 0 && (e.onTap || e.onTapStart || e.whileTap) && (n.tabIndex = 0), n.style = r, n;
}
const Jse = {
  offset: "stroke-dashoffset",
  array: "stroke-dasharray"
}, eae = {
  offset: "strokeDashoffset",
  array: "strokeDasharray"
};
function tae(e, t, n = 1, r = 0, i = !0) {
  e.pathLength = 1;
  const a = i ? Jse : eae;
  e[a.offset] = It.transform(-r);
  const o = It.transform(t), u = It.transform(n);
  e[a.array] = `${o} ${u}`;
}
function DI(e, {
  attrX: t,
  attrY: n,
  attrScale: r,
  pathLength: i,
  pathSpacing: a = 1,
  pathOffset: o = 0,
  // This is object creation, which we try to avoid per-frame.
  ...u
}, c, f, p) {
  if (Yk(e, u, f), c) {
    e.style.viewBox && (e.attrs.viewBox = e.style.viewBox);
    return;
  }
  e.attrs = e.style, e.style = {};
  const { attrs: g, style: x } = e;
  g.transform && (x.transform = g.transform, delete g.transform), (x.transform || g.transformOrigin) && (x.transformOrigin = g.transformOrigin ?? "50% 50%", delete g.transformOrigin), x.transform && (x.transformBox = (p == null ? void 0 : p.transformBox) ?? "fill-box", delete g.transformBox), t !== void 0 && (g.x = t), n !== void 0 && (g.y = n), r !== void 0 && (g.scale = r), i !== void 0 && tae(g, i, a, o, !1);
}
const zI = () => ({
  ...Wk(),
  attrs: {}
}), PI = (e) => typeof e == "string" && e.toLowerCase() === "svg";
function nae(e, t, n, r) {
  const i = B.useMemo(() => {
    const a = zI();
    return DI(a, t, PI(r), e.transformTemplate, e.style), {
      ...a.attrs,
      style: { ...a.style }
    };
  }, [t]);
  if (e.style) {
    const a = {};
    OI(a, e.style, e), i.style = { ...a, ...i.style };
  }
  return i;
}
const rae = [
  "animate",
  "circle",
  "defs",
  "desc",
  "ellipse",
  "g",
  "image",
  "line",
  "filter",
  "marker",
  "mask",
  "metadata",
  "path",
  "pattern",
  "polygon",
  "polyline",
  "rect",
  "stop",
  "switch",
  "symbol",
  "svg",
  "text",
  "tspan",
  "use",
  "view"
];
function Zk(e) {
  return (
    /**
     * If it's not a string, it's a custom React component. Currently we only support
     * HTML custom React components.
     */
    typeof e != "string" || /**
     * If it contains a dash, the element is a custom HTML webcomponent.
     */
    e.includes("-") ? !1 : (
      /**
       * If it's in our list of lowercase SVG tags, it's an SVG component
       */
      !!(rae.indexOf(e) > -1 || /**
       * If it contains a capital letter, it's an SVG component
       */
      /[A-Z]/u.test(e))
    )
  );
}
function iae(e, t, n, { latestValues: r }, i, a = !1) {
  const u = (Zk(e) ? nae : Qse)(t, r, i, e), c = Use(t, typeof e == "string", a), f = e !== B.Fragment ? { ...c, ...u, ref: n } : {}, { children: p } = t, g = B.useMemo(() => Ri(p) ? p.get() : p, [p]);
  return B.createElement(e, {
    ...f,
    children: g
  });
}
function Nj(e) {
  const t = [{}, {}];
  return e == null || e.values.forEach((n, r) => {
    t[0][r] = n.get(), t[1][r] = n.getVelocity();
  }), t;
}
function Xk(e, t, n, r) {
  if (typeof t == "function") {
    const [i, a] = Nj(r);
    t = t(n !== void 0 ? n : e.custom, i, a);
  }
  if (typeof t == "string" && (t = e.variants && e.variants[t]), typeof t == "function") {
    const [i, a] = Nj(r);
    t = t(n !== void 0 ? n : e.custom, i, a);
  }
  return t;
}
function sx(e) {
  return Ri(e) ? e.get() : e;
}
function sae({ scrapeMotionValuesFromProps: e, createRenderState: t }, n, r, i) {
  return {
    latestValues: aae(n, r, i, e),
    renderState: t()
  };
}
function aae(e, t, n, r) {
  const i = {}, a = r(e, {});
  for (const x in a)
    i[x] = sx(a[x]);
  let { initial: o, animate: u } = e;
  const c = mb(e), f = RI(e);
  t && f && !c && e.inherit !== !1 && (o === void 0 && (o = t.initial), u === void 0 && (u = t.animate));
  let p = n ? n.initial === !1 : !1;
  p = p || o === !1;
  const g = p ? u : o;
  if (g && typeof g != "boolean" && !pb(g)) {
    const x = Array.isArray(g) ? g : [g];
    for (let b = 0; b < x.length; b++) {
      const _ = Xk(e, x[b]);
      if (_) {
        const { transitionEnd: E, transition: k, ...T } = _;
        for (const R in T) {
          let N = T[R];
          if (Array.isArray(N)) {
            const O = p ? N.length - 1 : 0;
            N = N[O];
          }
          N !== null && (i[R] = N);
        }
        for (const R in E)
          i[R] = E[R];
      }
    }
  }
  return i;
}
const II = (e) => (t, n) => {
  const r = B.useContext(hb), i = B.useContext(Ek), a = () => sae(e, t, r, i);
  return n ? a() : by(a);
};
function Qk(e, t, n) {
  var a;
  const { style: r } = e, i = {};
  for (const o in r)
    (Ri(r[o]) || t.style && Ri(t.style[o]) || MI(o, e) || ((a = n == null ? void 0 : n.getValue(o)) == null ? void 0 : a.liveStyle) !== void 0) && (i[o] = r[o]);
  return i;
}
const oae = /* @__PURE__ */ II({
  scrapeMotionValuesFromProps: Qk,
  createRenderState: Wk
});
function LI(e, t, n) {
  const r = Qk(e, t, n);
  for (const i in e)
    if (Ri(e[i]) || Ri(t[i])) {
      const a = _m.indexOf(i) !== -1 ? "attr" + i.charAt(0).toUpperCase() + i.substring(1) : i;
      r[a] = e[i];
    }
  return r;
}
const lae = /* @__PURE__ */ II({
  scrapeMotionValuesFromProps: LI,
  createRenderState: zI
}), uae = Symbol.for("motionComponentSymbol");
function Fp(e) {
  return e && typeof e == "object" && Object.prototype.hasOwnProperty.call(e, "current");
}
function cae(e, t, n) {
  return B.useCallback(
    (r) => {
      r && e.onMount && e.onMount(r), t && (r ? t.mount(r) : t.unmount()), n && (typeof n == "function" ? n(r) : Fp(n) && (n.current = r));
    },
    /**
     * Include externalRef in dependencies to ensure the callback updates
     * when the ref changes, allowing proper ref forwarding.
     */
    [t]
  );
}
const Jk = (e) => e.replace(/([a-z])([A-Z])/gu, "$1-$2").toLowerCase(), fae = "framerAppearId", BI = "data-" + Jk(fae), qI = B.createContext({});
function dae(e, t, n, r, i) {
  var E, k;
  const { visualElement: a } = B.useContext(hb), o = B.useContext(jI), u = B.useContext(Ek), c = B.useContext(Hk).reducedMotion, f = B.useRef(null);
  r = r || o.renderer, !f.current && r && (f.current = r(e, {
    visualState: t,
    parent: a,
    props: n,
    presenceContext: u,
    blockInitialAnimation: u ? u.initial === !1 : !1,
    reducedMotionConfig: c
  }));
  const p = f.current, g = B.useContext(qI);
  p && !p.projection && i && (p.type === "html" || p.type === "svg") && hae(f.current, n, i, g);
  const x = B.useRef(!1);
  B.useInsertionEffect(() => {
    p && x.current && p.update(n, u);
  });
  const b = n[BI], _ = B.useRef(!!b && !((E = window.MotionHandoffIsComplete) != null && E.call(window, b)) && ((k = window.MotionHasOptimisedAnimation) == null ? void 0 : k.call(window, b)));
  return IP(() => {
    p && (x.current = !0, window.MotionIsMounted = !0, p.updateFeatures(), p.scheduleRenderMicrotask(), _.current && p.animationState && p.animationState.animateChanges());
  }), B.useEffect(() => {
    p && (!_.current && p.animationState && p.animationState.animateChanges(), _.current && (queueMicrotask(() => {
      var T;
      (T = window.MotionHandoffMarkAsComplete) == null || T.call(window, b);
    }), _.current = !1), p.enteringChildren = void 0);
  }), p;
}
function hae(e, t, n, r) {
  const { layoutId: i, layout: a, drag: o, dragConstraints: u, layoutScroll: c, layoutRoot: f, layoutCrossfade: p } = t;
  e.projection = new n(e.latestValues, t["data-framer-portal-id"] ? void 0 : $I(e.parent)), e.projection.setOptions({
    layoutId: i,
    layout: a,
    alwaysMeasureLayout: !!o || u && Fp(u),
    visualElement: e,
    /**
     * TODO: Update options in an effect. This could be tricky as it'll be too late
     * to update by the time layout animations run.
     * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,
     * ensuring it gets called if there's no potential layout animations.
     *
     */
    animationType: typeof a == "string" ? a : "both",
    initialPromotionConfig: r,
    crossfade: p,
    layoutScroll: c,
    layoutRoot: f
  });
}
function $I(e) {
  if (e)
    return e.options.allowProjection !== !1 ? e.projection : $I(e.parent);
}
function Ew(e, { forwardMotionProps: t = !1 } = {}, n, r) {
  n && qse(n);
  const i = Zk(e) ? lae : oae;
  function a(u, c) {
    let f;
    const p = {
      ...B.useContext(Hk),
      ...u,
      layoutId: pae(u)
    }, { isStatic: g } = p, x = Hse(u), b = i(u, g);
    if (!g && Ck) {
      mae();
      const _ = gae(p);
      f = _.MeasureLayout, x.visualElement = dae(e, b, p, r, _.ProjectionNode);
    }
    return h.jsxs(hb.Provider, { value: x, children: [f && x.visualElement ? h.jsx(f, { visualElement: x.visualElement, ...p }) : null, iae(e, u, cae(b, x.visualElement, c), b, g, t)] });
  }
  a.displayName = `motion.${typeof e == "string" ? e : `create(${e.displayName ?? e.name ?? ""})`}`;
  const o = B.forwardRef(a);
  return o[uae] = e, o;
}
function pae({ layoutId: e }) {
  const t = B.useContext(PP).id;
  return t && e !== void 0 ? t + "-" + e : e;
}
function mae(e, t) {
  B.useContext(jI).strict;
}
function gae(e) {
  const { drag: t, layout: n } = lm;
  if (!t && !n)
    return {};
  const r = { ...t, ...n };
  return {
    MeasureLayout: t != null && t.isEnabled(e) || n != null && n.isEnabled(e) ? r.MeasureLayout : void 0,
    ProjectionNode: r.ProjectionNode
  };
}
function yae(e, t) {
  if (typeof Proxy > "u")
    return Ew;
  const n = /* @__PURE__ */ new Map(), r = (a, o) => Ew(a, o, e, t), i = (a, o) => r(a, o);
  return new Proxy(i, {
    /**
     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.
     * The prop name is passed through as `key` and we can use that to generate a `motion`
     * DOM component with that name.
     */
    get: (a, o) => o === "create" ? r : (n.has(o) || n.set(o, Ew(o, void 0, e, t)), n.get(o))
  });
}
function FI({ top: e, left: t, right: n, bottom: r }) {
  return {
    x: { min: t, max: n },
    y: { min: e, max: r }
  };
}
function vae({ x: e, y: t }) {
  return { top: t.min, right: e.max, bottom: t.max, left: e.min };
}
function xae(e, t) {
  if (!t)
    return e;
  const n = t({ x: e.left, y: e.top }), r = t({ x: e.right, y: e.bottom });
  return {
    top: n.y,
    left: n.x,
    bottom: r.y,
    right: r.x
  };
}
function kw(e) {
  return e === void 0 || e === 1;
}
function o5({ scale: e, scaleX: t, scaleY: n }) {
  return !kw(e) || !kw(t) || !kw(n);
}
function Od(e) {
  return o5(e) || UI(e) || e.z || e.rotate || e.rotateX || e.rotateY || e.skewX || e.skewY;
}
function UI(e) {
  return Rj(e.x) || Rj(e.y);
}
function Rj(e) {
  return e && e !== "0%";
}
function Ox(e, t, n) {
  const r = e - n, i = t * r;
  return n + i;
}
function Mj(e, t, n, r, i) {
  return i !== void 0 && (e = Ox(e, i, r)), Ox(e, n, r) + t;
}
function l5(e, t = 0, n = 1, r, i) {
  e.min = Mj(e.min, t, n, r, i), e.max = Mj(e.max, t, n, r, i);
}
function VI(e, { x: t, y: n }) {
  l5(e.x, t.translate, t.scale, t.originPoint), l5(e.y, n.translate, n.scale, n.originPoint);
}
const Oj = 0.999999999999, Dj = 1.0000000000001;
function bae(e, t, n, r = !1) {
  const i = n.length;
  if (!i)
    return;
  t.x = t.y = 1;
  let a, o;
  for (let u = 0; u < i; u++) {
    a = n[u], o = a.projectionDelta;
    const { visualElement: c } = a.options;
    c && c.props.style && c.props.style.display === "contents" || (r && a.options.layoutScroll && a.scroll && a !== a.root && Vp(e, {
      x: -a.scroll.offset.x,
      y: -a.scroll.offset.y
    }), o && (t.x *= o.x.scale, t.y *= o.y.scale, VI(e, o)), r && Od(a.latestValues) && Vp(e, a.latestValues));
  }
  t.x < Dj && t.x > Oj && (t.x = 1), t.y < Dj && t.y > Oj && (t.y = 1);
}
function Up(e, t) {
  e.min = e.min + t, e.max = e.max + t;
}
function zj(e, t, n, r, i = 0.5) {
  const a = cr(e.min, e.max, i);
  l5(e, t, n, a, r);
}
function Vp(e, t) {
  zj(e.x, t.x, t.scaleX, t.scale, t.originX), zj(e.y, t.y, t.scaleY, t.scale, t.originY);
}
function HI(e, t) {
  return FI(xae(e.getBoundingClientRect(), t));
}
function wae(e, t, n) {
  const r = HI(e, n), { scroll: i } = t;
  return i && (Up(r.x, i.offset.x), Up(r.y, i.offset.y)), r;
}
const Pj = () => ({
  translate: 0,
  scale: 1,
  origin: 0,
  originPoint: 0
}), Hp = () => ({
  x: Pj(),
  y: Pj()
}), Ij = () => ({ min: 0, max: 0 }), li = () => ({
  x: Ij(),
  y: Ij()
}), u5 = { current: null }, GI = { current: !1 };
function _ae() {
  if (GI.current = !0, !!Ck)
    if (window.matchMedia) {
      const e = window.matchMedia("(prefers-reduced-motion)"), t = () => u5.current = e.matches;
      e.addEventListener("change", t), t();
    } else
      u5.current = !1;
}
const Sae = /* @__PURE__ */ new WeakMap();
function Cae(e, t, n) {
  for (const r in t) {
    const i = t[r], a = n[r];
    if (Ri(i))
      e.addValue(r, i);
    else if (Ri(a))
      e.addValue(r, Jd(i, { owner: e }));
    else if (a !== i)
      if (e.hasValue(r)) {
        const o = e.getValue(r);
        o.liveStyle === !0 ? o.jump(i) : o.hasAnimated || o.set(i);
      } else {
        const o = e.getStaticValue(r);
        e.addValue(r, Jd(o !== void 0 ? o : i, { owner: e }));
      }
  }
  for (const r in n)
    t[r] === void 0 && e.removeValue(r);
  return t;
}
const Lj = [
  "AnimationStart",
  "AnimationComplete",
  "Update",
  "BeforeLayoutMeasure",
  "LayoutMeasure",
  "LayoutAnimationStart",
  "LayoutAnimationComplete"
];
class Eae {
  /**
   * This method takes React props and returns found MotionValues. For example, HTML
   * MotionValues will be found within the style prop, whereas for Three.js within attribute arrays.
   *
   * This isn't an abstract method as it needs calling in the constructor, but it is
   * intended to be one.
   */
  scrapeMotionValuesFromProps(t, n, r) {
    return {};
  }
  constructor({ parent: t, props: n, presenceContext: r, reducedMotionConfig: i, blockInitialAnimation: a, visualState: o }, u = {}) {
    this.current = null, this.children = /* @__PURE__ */ new Set(), this.isVariantNode = !1, this.isControllingVariants = !1, this.shouldReduceMotion = null, this.values = /* @__PURE__ */ new Map(), this.KeyframeResolver = qk, this.features = {}, this.valueSubscriptions = /* @__PURE__ */ new Map(), this.prevMotionValues = {}, this.events = {}, this.propEventSubscriptions = {}, this.notifyUpdate = () => this.notify("Update", this.latestValues), this.render = () => {
      this.current && (this.triggerBuild(), this.renderInstance(this.current, this.renderState, this.props.style, this.projection));
    }, this.renderScheduledAt = 0, this.scheduleRender = () => {
      const x = Js.now();
      this.renderScheduledAt < x && (this.renderScheduledAt = x, sr.render(this.render, !1, !0));
    };
    const { latestValues: c, renderState: f } = o;
    this.latestValues = c, this.baseTarget = { ...c }, this.initialValues = n.initial ? { ...c } : {}, this.renderState = f, this.parent = t, this.props = n, this.presenceContext = r, this.depth = t ? t.depth + 1 : 0, this.reducedMotionConfig = i, this.options = u, this.blockInitialAnimation = !!a, this.isControllingVariants = mb(n), this.isVariantNode = RI(n), this.isVariantNode && (this.variantChildren = /* @__PURE__ */ new Set()), this.manuallyAnimateOnMount = !!(t && t.current);
    const { willChange: p, ...g } = this.scrapeMotionValuesFromProps(n, {}, this);
    for (const x in g) {
      const b = g[x];
      c[x] !== void 0 && Ri(b) && b.set(c[x]);
    }
  }
  mount(t) {
    var n;
    this.current = t, Sae.set(t, this), this.projection && !this.projection.instance && this.projection.mount(t), this.parent && this.isVariantNode && !this.isControllingVariants && (this.removeFromVariantTree = this.parent.addVariantChild(this)), this.values.forEach((r, i) => this.bindToMotionValue(i, r)), GI.current || _ae(), this.shouldReduceMotion = this.reducedMotionConfig === "never" ? !1 : this.reducedMotionConfig === "always" ? !0 : u5.current, (n = this.parent) == null || n.addChild(this), this.update(this.props, this.presenceContext);
  }
  unmount() {
    var t;
    this.projection && this.projection.unmount(), Bu(this.notifyUpdate), Bu(this.render), this.valueSubscriptions.forEach((n) => n()), this.valueSubscriptions.clear(), this.removeFromVariantTree && this.removeFromVariantTree(), (t = this.parent) == null || t.removeChild(this);
    for (const n in this.events)
      this.events[n].clear();
    for (const n in this.features) {
      const r = this.features[n];
      r && (r.unmount(), r.isMounted = !1);
    }
    this.current = null;
  }
  addChild(t) {
    this.children.add(t), this.enteringChildren ?? (this.enteringChildren = /* @__PURE__ */ new Set()), this.enteringChildren.add(t);
  }
  removeChild(t) {
    this.children.delete(t), this.enteringChildren && this.enteringChildren.delete(t);
  }
  bindToMotionValue(t, n) {
    this.valueSubscriptions.has(t) && this.valueSubscriptions.get(t)();
    const r = Sm.has(t);
    r && this.onBindTransform && this.onBindTransform();
    const i = n.on("change", (o) => {
      this.latestValues[t] = o, this.props.onUpdate && sr.preRender(this.notifyUpdate), r && this.projection && (this.projection.isTransformDirty = !0), this.scheduleRender();
    });
    let a;
    window.MotionCheckAppearSync && (a = window.MotionCheckAppearSync(this, t, n)), this.valueSubscriptions.set(t, () => {
      i(), a && a(), n.owner && n.stop();
    });
  }
  sortNodePosition(t) {
    return !this.current || !this.sortInstanceNodePosition || this.type !== t.type ? 0 : this.sortInstanceNodePosition(this.current, t.current);
  }
  updateFeatures() {
    let t = "animation";
    for (t in lm) {
      const n = lm[t];
      if (!n)
        continue;
      const { isEnabled: r, Feature: i } = n;
      if (!this.features[t] && i && r(this.props) && (this.features[t] = new i(this)), this.features[t]) {
        const a = this.features[t];
        a.isMounted ? a.update() : (a.mount(), a.isMounted = !0);
      }
    }
  }
  triggerBuild() {
    this.build(this.renderState, this.latestValues, this.props);
  }
  /**
   * Measure the current viewport box with or without transforms.
   * Only measures axis-aligned boxes, rotate and skew must be manually
   * removed with a re-render to work.
   */
  measureViewportBox() {
    return this.current ? this.measureInstanceViewportBox(this.current, this.props) : li();
  }
  getStaticValue(t) {
    return this.latestValues[t];
  }
  setStaticValue(t, n) {
    this.latestValues[t] = n;
  }
  /**
   * Update the provided props. Ensure any newly-added motion values are
   * added to our map, old ones removed, and listeners updated.
   */
  update(t, n) {
    (t.transformTemplate || this.props.transformTemplate) && this.scheduleRender(), this.prevProps = this.props, this.props = t, this.prevPresenceContext = this.presenceContext, this.presenceContext = n;
    for (let r = 0; r < Lj.length; r++) {
      const i = Lj[r];
      this.propEventSubscriptions[i] && (this.propEventSubscriptions[i](), delete this.propEventSubscriptions[i]);
      const a = "on" + i, o = t[a];
      o && (this.propEventSubscriptions[i] = this.on(i, o));
    }
    this.prevMotionValues = Cae(this, this.scrapeMotionValuesFromProps(t, this.prevProps, this), this.prevMotionValues), this.handleChildMotionValue && this.handleChildMotionValue();
  }
  getProps() {
    return this.props;
  }
  /**
   * Returns the variant definition with a given name.
   */
  getVariant(t) {
    return this.props.variants ? this.props.variants[t] : void 0;
  }
  /**
   * Returns the defined default transition on this component.
   */
  getDefaultTransition() {
    return this.props.transition;
  }
  getTransformPagePoint() {
    return this.props.transformPagePoint;
  }
  getClosestVariantNode() {
    return this.isVariantNode ? this : this.parent ? this.parent.getClosestVariantNode() : void 0;
  }
  /**
   * Add a child visual element to our set of children.
   */
  addVariantChild(t) {
    const n = this.getClosestVariantNode();
    if (n)
      return n.variantChildren && n.variantChildren.add(t), () => n.variantChildren.delete(t);
  }
  /**
   * Add a motion value and bind it to this visual element.
   */
  addValue(t, n) {
    const r = this.values.get(t);
    n !== r && (r && this.removeValue(t), this.bindToMotionValue(t, n), this.values.set(t, n), this.latestValues[t] = n.get());
  }
  /**
   * Remove a motion value and unbind any active subscriptions.
   */
  removeValue(t) {
    this.values.delete(t);
    const n = this.valueSubscriptions.get(t);
    n && (n(), this.valueSubscriptions.delete(t)), delete this.latestValues[t], this.removeValueFromRenderState(t, this.renderState);
  }
  /**
   * Check whether we have a motion value for this key
   */
  hasValue(t) {
    return this.values.has(t);
  }
  getValue(t, n) {
    if (this.props.values && this.props.values[t])
      return this.props.values[t];
    let r = this.values.get(t);
    return r === void 0 && n !== void 0 && (r = Jd(n === null ? void 0 : n, { owner: this }), this.addValue(t, r)), r;
  }
  /**
   * If we're trying to animate to a previously unencountered value,
   * we need to check for it in our state and as a last resort read it
   * directly from the instance (which might have performance implications).
   */
  readValue(t, n) {
    let r = this.latestValues[t] !== void 0 || !this.current ? this.latestValues[t] : this.getBaseTargetFromProps(this.props, t) ?? this.readValueFromInstance(this.current, t, this.options);
    return r != null && (typeof r == "string" && (LP(r) || qP(r)) ? r = parseFloat(r) : !Lse(r) && lf.test(n) && (r = SI(t, n)), this.setBaseTarget(t, Ri(r) ? r.get() : r)), Ri(r) ? r.get() : r;
  }
  /**
   * Set the base target to later animate back to. This is currently
   * only hydrated on creation and when we first read a value.
   */
  setBaseTarget(t, n) {
    this.baseTarget[t] = n;
  }
  /**
   * Find the base target for a value thats been removed from all animation
   * props.
   */
  getBaseTarget(t) {
    var a;
    const { initial: n } = this.props;
    let r;
    if (typeof n == "string" || typeof n == "object") {
      const o = Xk(this.props, n, (a = this.presenceContext) == null ? void 0 : a.custom);
      o && (r = o[t]);
    }
    if (n && r !== void 0)
      return r;
    const i = this.getBaseTargetFromProps(this.props, t);
    return i !== void 0 && !Ri(i) ? i : this.initialValues[t] !== void 0 && r === void 0 ? void 0 : this.baseTarget[t];
  }
  on(t, n) {
    return this.events[t] || (this.events[t] = new jk()), this.events[t].add(n);
  }
  notify(t, ...n) {
    this.events[t] && this.events[t].notify(...n);
  }
  scheduleRenderMicrotask() {
    Uk.render(this.render);
  }
}
class KI extends Eae {
  constructor() {
    super(...arguments), this.KeyframeResolver = Cse;
  }
  sortInstanceNodePosition(t, n) {
    return t.compareDocumentPosition(n) & 2 ? 1 : -1;
  }
  getBaseTargetFromProps(t, n) {
    return t.style ? t.style[n] : void 0;
  }
  removeValueFromRenderState(t, { vars: n, style: r }) {
    delete n[t], delete r[t];
  }
  handleChildMotionValue() {
    this.childSubscription && (this.childSubscription(), delete this.childSubscription);
    const { children: t } = this.props;
    Ri(t) && (this.childSubscription = t.on("change", (n) => {
      this.current && (this.current.textContent = `${n}`);
    }));
  }
}
function YI(e, { style: t, vars: n }, r, i) {
  const a = e.style;
  let o;
  for (o in t)
    a[o] = t[o];
  i == null || i.applyProjectionStyles(a, r);
  for (o in n)
    a.setProperty(o, n[o]);
}
function kae(e) {
  return window.getComputedStyle(e);
}
class Tae extends KI {
  constructor() {
    super(...arguments), this.type = "html", this.renderInstance = YI;
  }
  readValueFromInstance(t, n) {
    var r;
    if (Sm.has(n))
      return (r = this.projection) != null && r.isProjecting ? JE(n) : Uie(t, n);
    {
      const i = kae(t), a = (eI(n) ? i.getPropertyValue(n) : i[n]) || 0;
      return typeof a == "string" ? a.trim() : a;
    }
  }
  measureInstanceViewportBox(t, { transformPagePoint: n }) {
    return HI(t, n);
  }
  build(t, n, r) {
    Yk(t, n, r.transformTemplate);
  }
  scrapeMotionValuesFromProps(t, n, r) {
    return Qk(t, n, r);
  }
}
const WI = /* @__PURE__ */ new Set([
  "baseFrequency",
  "diffuseConstant",
  "kernelMatrix",
  "kernelUnitLength",
  "keySplines",
  "keyTimes",
  "limitingConeAngle",
  "markerHeight",
  "markerWidth",
  "numOctaves",
  "targetX",
  "targetY",
  "surfaceScale",
  "specularConstant",
  "specularExponent",
  "stdDeviation",
  "tableValues",
  "viewBox",
  "gradientTransform",
  "pathLength",
  "startOffset",
  "textLength",
  "lengthAdjust"
]);
function Aae(e, t, n, r) {
  YI(e, t, void 0, r);
  for (const i in t.attrs)
    e.setAttribute(WI.has(i) ? i : Jk(i), t.attrs[i]);
}
class jae extends KI {
  constructor() {
    super(...arguments), this.type = "svg", this.isSVGTag = !1, this.measureInstanceViewportBox = li;
  }
  getBaseTargetFromProps(t, n) {
    return t[n];
  }
  readValueFromInstance(t, n) {
    if (Sm.has(n)) {
      const r = _I(n);
      return r && r.default || 0;
    }
    return n = WI.has(n) ? n : Jk(n), t.getAttribute(n);
  }
  scrapeMotionValuesFromProps(t, n, r) {
    return LI(t, n, r);
  }
  build(t, n, r) {
    DI(t, n, this.isSVGTag, r.transformTemplate, r.style);
  }
  renderInstance(t, n, r, i) {
    Aae(t, n, r, i);
  }
  mount(t) {
    this.isSVGTag = PI(t.tagName), super.mount(t);
  }
}
const Nae = (e, t) => Zk(e) ? new jae(t) : new Tae(t, {
  allowProjection: e !== B.Fragment
});
function Xp(e, t, n) {
  const r = e.getProps();
  return Xk(r, t, n !== void 0 ? n : r.custom, e);
}
const c5 = (e) => Array.isArray(e);
function Rae(e, t, n) {
  e.hasValue(t) ? e.getValue(t).set(n) : e.addValue(t, Jd(n));
}
function Mae(e) {
  return c5(e) ? e[e.length - 1] || 0 : e;
}
function Oae(e, t) {
  const n = Xp(e, t);
  let { transitionEnd: r = {}, transition: i = {}, ...a } = n || {};
  a = { ...a, ...r };
  for (const o in a) {
    const u = Mae(a[o]);
    Rae(e, o, u);
  }
}
function Dae(e) {
  return !!(Ri(e) && e.add);
}
function f5(e, t) {
  const n = e.getValue("willChange");
  if (Dae(n))
    return n.add(t);
  if (!n && Lu.WillChange) {
    const r = new Lu.WillChange("auto");
    e.addValue("willChange", r), r.add(t);
  }
}
function ZI(e) {
  return e.props[BI];
}
const zae = (e) => e !== null;
function Pae(e, { repeat: t, repeatType: n = "loop" }, r) {
  const i = e.filter(zae), a = t && n !== "loop" && t % 2 === 1 ? 0 : i.length - 1;
  return i[a];
}
const Iae = {
  type: "spring",
  stiffness: 500,
  damping: 25,
  restSpeed: 10
}, Lae = (e) => ({
  type: "spring",
  stiffness: 550,
  damping: e === 0 ? 2 * Math.sqrt(550) : 30,
  restSpeed: 10
}), Bae = {
  type: "keyframes",
  duration: 0.8
}, qae = {
  type: "keyframes",
  ease: [0.25, 0.1, 0.35, 1],
  duration: 0.3
}, $ae = (e, { keyframes: t }) => t.length > 2 ? Bae : Sm.has(e) ? e.startsWith("scale") ? Lae(t[1]) : Iae : qae;
function Fae({ when: e, delay: t, delayChildren: n, staggerChildren: r, staggerDirection: i, repeat: a, repeatType: o, repeatDelay: u, from: c, elapsed: f, ...p }) {
  return !!Object.keys(p).length;
}
const eT = (e, t, n, r = {}, i, a) => (o) => {
  const u = $k(r, e) || {}, c = u.delay || r.delay || 0;
  let { elapsed: f = 0 } = r;
  f = f - /* @__PURE__ */ Ul(c);
  const p = {
    keyframes: Array.isArray(n) ? n : [null, n],
    ease: "easeOut",
    velocity: t.getVelocity(),
    ...u,
    delay: -f,
    onUpdate: (x) => {
      t.set(x), u.onUpdate && u.onUpdate(x);
    },
    onComplete: () => {
      o(), u.onComplete && u.onComplete();
    },
    name: e,
    motionValue: t,
    element: a ? void 0 : i
  };
  Fae(u) || Object.assign(p, $ae(e, p)), p.duration && (p.duration = /* @__PURE__ */ Ul(p.duration)), p.repeatDelay && (p.repeatDelay = /* @__PURE__ */ Ul(p.repeatDelay)), p.from !== void 0 && (p.keyframes[0] = p.from);
  let g = !1;
  if ((p.type === !1 || p.duration === 0 && !p.repeatDelay) && (i5(p), p.delay === 0 && (g = !0)), (Lu.instantAnimations || Lu.skipAnimations) && (g = !0, i5(p), p.delay = 0), p.allowFlatten = !u.type && !u.ease, g && !a && t.get() !== void 0) {
    const x = Pae(p.keyframes, u);
    if (x !== void 0) {
      sr.update(() => {
        p.onUpdate(x), p.onComplete();
      });
      return;
    }
  }
  return u.isSync ? new Bk(p) : new dse(p);
};
function Uae({ protectedKeys: e, needsAnimating: t }, n) {
  const r = e.hasOwnProperty(n) && t[n] !== !0;
  return t[n] = !1, r;
}
function XI(e, t, { delay: n = 0, transitionOverride: r, type: i } = {}) {
  let { transition: a = e.getDefaultTransition(), transitionEnd: o, ...u } = t;
  r && (a = r);
  const c = [], f = i && e.animationState && e.animationState.getState()[i];
  for (const p in u) {
    const g = e.getValue(p, e.latestValues[p] ?? null), x = u[p];
    if (x === void 0 || f && Uae(f, p))
      continue;
    const b = {
      delay: n,
      ...$k(a || {}, p)
    }, _ = g.get();
    if (_ !== void 0 && !g.isAnimating && !Array.isArray(x) && x === _ && !b.velocity)
      continue;
    let E = !1;
    if (window.MotionHandoffAnimation) {
      const T = ZI(e);
      if (T) {
        const R = window.MotionHandoffAnimation(T, p, sr);
        R !== null && (b.startTime = R, E = !0);
      }
    }
    f5(e, p), g.start(eT(p, g, x, e.shouldReduceMotion && xI.has(p) ? { type: !1 } : b, e, E));
    const k = g.animation;
    k && c.push(k);
  }
  return o && Promise.all(c).then(() => {
    sr.update(() => {
      o && Oae(e, o);
    });
  }), c;
}
function QI(e, t, n, r = 0, i = 1) {
  const a = Array.from(e).sort((f, p) => f.sortNodePosition(p)).indexOf(t), o = e.size, u = (o - 1) * r;
  return typeof n == "function" ? n(a, o) : i === 1 ? a * r : u - a * r;
}
function d5(e, t, n = {}) {
  var c;
  const r = Xp(e, t, n.type === "exit" ? (c = e.presenceContext) == null ? void 0 : c.custom : void 0);
  let { transition: i = e.getDefaultTransition() || {} } = r || {};
  n.transitionOverride && (i = n.transitionOverride);
  const a = r ? () => Promise.all(XI(e, r, n)) : () => Promise.resolve(), o = e.variantChildren && e.variantChildren.size ? (f = 0) => {
    const { delayChildren: p = 0, staggerChildren: g, staggerDirection: x } = i;
    return Vae(e, t, f, p, g, x, n);
  } : () => Promise.resolve(), { when: u } = i;
  if (u) {
    const [f, p] = u === "beforeChildren" ? [a, o] : [o, a];
    return f().then(() => p());
  } else
    return Promise.all([a(), o(n.delay)]);
}
function Vae(e, t, n = 0, r = 0, i = 0, a = 1, o) {
  const u = [];
  for (const c of e.variantChildren)
    c.notify("AnimationStart", t), u.push(d5(c, t, {
      ...o,
      delay: n + (typeof r == "function" ? 0 : r) + QI(e.variantChildren, c, r, i, a)
    }).then(() => c.notify("AnimationComplete", t)));
  return Promise.all(u);
}
function Hae(e, t, n = {}) {
  e.notify("AnimationStart", t);
  let r;
  if (Array.isArray(t)) {
    const i = t.map((a) => d5(e, a, n));
    r = Promise.all(i);
  } else if (typeof t == "string")
    r = d5(e, t, n);
  else {
    const i = typeof t == "function" ? Xp(e, t, n.custom) : t;
    r = Promise.all(XI(e, i, n));
  }
  return r.then(() => {
    e.notify("AnimationComplete", t);
  });
}
function JI(e, t) {
  if (!Array.isArray(t))
    return !1;
  const n = t.length;
  if (n !== e.length)
    return !1;
  for (let r = 0; r < n; r++)
    if (t[r] !== e[r])
      return !1;
  return !0;
}
const Gae = Kk.length;
function eL(e) {
  if (!e)
    return;
  if (!e.isControllingVariants) {
    const n = e.parent ? eL(e.parent) || {} : {};
    return e.props.initial !== void 0 && (n.initial = e.props.initial), n;
  }
  const t = {};
  for (let n = 0; n < Gae; n++) {
    const r = Kk[n], i = e.props[r];
    (J0(i) || i === !1) && (t[r] = i);
  }
  return t;
}
const Kae = [...Gk].reverse(), Yae = Gk.length;
function Wae(e) {
  return (t) => Promise.all(t.map(({ animation: n, options: r }) => Hae(e, n, r)));
}
function Zae(e) {
  let t = Wae(e), n = Bj(), r = !0;
  const i = (c) => (f, p) => {
    var x;
    const g = Xp(e, p, c === "exit" ? (x = e.presenceContext) == null ? void 0 : x.custom : void 0);
    if (g) {
      const { transition: b, transitionEnd: _, ...E } = g;
      f = { ...f, ...E, ..._ };
    }
    return f;
  };
  function a(c) {
    t = c(e);
  }
  function o(c) {
    const { props: f } = e, p = eL(e.parent) || {}, g = [], x = /* @__PURE__ */ new Set();
    let b = {}, _ = 1 / 0;
    for (let k = 0; k < Yae; k++) {
      const T = Kae[k], R = n[T], N = f[T] !== void 0 ? f[T] : p[T], O = J0(N), P = T === c ? R.isActive : null;
      P === !1 && (_ = k);
      let z = N === p[T] && N !== f[T] && O;
      if (z && r && e.manuallyAnimateOnMount && (z = !1), R.protectedKeys = { ...b }, // If it isn't active and hasn't *just* been set as inactive
      !R.isActive && P === null || // If we didn't and don't have any defined prop for this animation type
      !N && !R.prevProp || // Or if the prop doesn't define an animation
      pb(N) || typeof N == "boolean")
        continue;
      const q = Xae(R.prevProp, N);
      let G = q || // If we're making this variant active, we want to always make it active
      T === c && R.isActive && !z && O || // If we removed a higher-priority variant (i is in reverse order)
      k > _ && O, Y = !1;
      const W = Array.isArray(N) ? N : [N];
      let F = W.reduce(i(T), {});
      P === !1 && (F = {});
      const { prevResolvedValues: X = {} } = R, me = {
        ...X,
        ...F
      }, J = (oe) => {
        G = !0, x.has(oe) && (Y = !0, x.delete(oe)), R.needsAnimating[oe] = !0;
        const fe = e.getValue(oe);
        fe && (fe.liveStyle = !1);
      };
      for (const oe in me) {
        const fe = F[oe], ce = X[oe];
        if (b.hasOwnProperty(oe))
          continue;
        let K = !1;
        c5(fe) && c5(ce) ? K = !JI(fe, ce) : K = fe !== ce, K ? fe != null ? J(oe) : x.add(oe) : fe !== void 0 && x.has(oe) ? J(oe) : R.protectedKeys[oe] = !0;
      }
      R.prevProp = N, R.prevResolvedValues = F, R.isActive && (b = { ...b, ...F }), r && e.blockInitialAnimation && (G = !1);
      const le = z && q;
      G && (!le || Y) && g.push(...W.map((oe) => {
        const fe = { type: T };
        if (typeof oe == "string" && r && !le && e.manuallyAnimateOnMount && e.parent) {
          const { parent: ce } = e, K = Xp(ce, oe);
          if (ce.enteringChildren && K) {
            const { delayChildren: re } = K.transition || {};
            fe.delay = QI(ce.enteringChildren, e, re);
          }
        }
        return {
          animation: oe,
          options: fe
        };
      }));
    }
    if (x.size) {
      const k = {};
      if (typeof f.initial != "boolean") {
        const T = Xp(e, Array.isArray(f.initial) ? f.initial[0] : f.initial);
        T && T.transition && (k.transition = T.transition);
      }
      x.forEach((T) => {
        const R = e.getBaseTarget(T), N = e.getValue(T);
        N && (N.liveStyle = !0), k[T] = R ?? null;
      }), g.push({ animation: k });
    }
    let E = !!g.length;
    return r && (f.initial === !1 || f.initial === f.animate) && !e.manuallyAnimateOnMount && (E = !1), r = !1, E ? t(g) : Promise.resolve();
  }
  function u(c, f) {
    var g;
    if (n[c].isActive === f)
      return Promise.resolve();
    (g = e.variantChildren) == null || g.forEach((x) => {
      var b;
      return (b = x.animationState) == null ? void 0 : b.setActive(c, f);
    }), n[c].isActive = f;
    const p = o(c);
    for (const x in n)
      n[x].protectedKeys = {};
    return p;
  }
  return {
    animateChanges: o,
    setActive: u,
    setAnimateFunction: a,
    getState: () => n,
    reset: () => {
      n = Bj();
    }
  };
}
function Xae(e, t) {
  return typeof t == "string" ? t !== e : Array.isArray(t) ? !JI(t, e) : !1;
}
function Nd(e = !1) {
  return {
    isActive: e,
    protectedKeys: {},
    needsAnimating: {},
    prevResolvedValues: {}
  };
}
function Bj() {
  return {
    animate: Nd(!0),
    whileInView: Nd(),
    whileHover: Nd(),
    whileTap: Nd(),
    whileDrag: Nd(),
    whileFocus: Nd(),
    exit: Nd()
  };
}
class hf {
  constructor(t) {
    this.isMounted = !1, this.node = t;
  }
  update() {
  }
}
class Qae extends hf {
  /**
   * We dynamically generate the AnimationState manager as it contains a reference
   * to the underlying animation library. We only want to load that if we load this,
   * so people can optionally code split it out using the `m` component.
   */
  constructor(t) {
    super(t), t.animationState || (t.animationState = Zae(t));
  }
  updateAnimationControlsSubscription() {
    const { animate: t } = this.node.getProps();
    pb(t) && (this.unmountControls = t.subscribe(this.node));
  }
  /**
   * Subscribe any provided AnimationControls to the component's VisualElement
   */
  mount() {
    this.updateAnimationControlsSubscription();
  }
  update() {
    const { animate: t } = this.node.getProps(), { animate: n } = this.node.prevProps || {};
    t !== n && this.updateAnimationControlsSubscription();
  }
  unmount() {
    var t;
    this.node.animationState.reset(), (t = this.unmountControls) == null || t.call(this);
  }
}
let Jae = 0;
class eoe extends hf {
  constructor() {
    super(...arguments), this.id = Jae++;
  }
  update() {
    if (!this.node.presenceContext)
      return;
    const { isPresent: t, onExitComplete: n } = this.node.presenceContext, { isPresent: r } = this.node.prevPresenceContext || {};
    if (!this.node.animationState || t === r)
      return;
    const i = this.node.animationState.setActive("exit", !t);
    n && !t && i.then(() => {
      n(this.id);
    });
  }
  mount() {
    const { register: t, onExitComplete: n } = this.node.presenceContext || {};
    n && n(this.id), t && (this.unmount = t(this.id));
  }
  unmount() {
  }
}
const toe = {
  animation: {
    Feature: Qae
  },
  exit: {
    Feature: eoe
  }
};
function ey(e, t, n, r = { passive: !0 }) {
  return e.addEventListener(t, n, r), () => e.removeEventListener(t, n);
}
function Cy(e) {
  return {
    point: {
      x: e.pageX,
      y: e.pageY
    }
  };
}
const noe = (e) => (t) => Vk(t) && e(t, Cy(t));
function I0(e, t, n, r) {
  return ey(e, t, noe(n), r);
}
const tL = 1e-4, roe = 1 - tL, ioe = 1 + tL, nL = 0.01, soe = 0 - nL, aoe = 0 + nL;
function ws(e) {
  return e.max - e.min;
}
function ooe(e, t, n) {
  return Math.abs(e - t) <= n;
}
function qj(e, t, n, r = 0.5) {
  e.origin = r, e.originPoint = cr(t.min, t.max, e.origin), e.scale = ws(n) / ws(t), e.translate = cr(n.min, n.max, e.origin) - e.originPoint, (e.scale >= roe && e.scale <= ioe || isNaN(e.scale)) && (e.scale = 1), (e.translate >= soe && e.translate <= aoe || isNaN(e.translate)) && (e.translate = 0);
}
function L0(e, t, n, r) {
  qj(e.x, t.x, n.x, r ? r.originX : void 0), qj(e.y, t.y, n.y, r ? r.originY : void 0);
}
function $j(e, t, n) {
  e.min = n.min + t.min, e.max = e.min + ws(t);
}
function loe(e, t, n) {
  $j(e.x, t.x, n.x), $j(e.y, t.y, n.y);
}
function Fj(e, t, n) {
  e.min = t.min - n.min, e.max = e.min + ws(t);
}
function Dx(e, t, n) {
  Fj(e.x, t.x, n.x), Fj(e.y, t.y, n.y);
}
function Ka(e) {
  return [e("x"), e("y")];
}
const rL = ({ current: e }) => e ? e.ownerDocument.defaultView : null, Uj = (e, t) => Math.abs(e - t);
function uoe(e, t) {
  const n = Uj(e.x, t.x), r = Uj(e.y, t.y);
  return Math.sqrt(n ** 2 + r ** 2);
}
class iL {
  constructor(t, n, { transformPagePoint: r, contextWindow: i = window, dragSnapToOrigin: a = !1, distanceThreshold: o = 3 } = {}) {
    if (this.startEvent = null, this.lastMoveEvent = null, this.lastMoveEventInfo = null, this.handlers = {}, this.contextWindow = window, this.updatePoint = () => {
      if (!(this.lastMoveEvent && this.lastMoveEventInfo))
        return;
      const x = Aw(this.lastMoveEventInfo, this.history), b = this.startEvent !== null, _ = uoe(x.offset, { x: 0, y: 0 }) >= this.distanceThreshold;
      if (!b && !_)
        return;
      const { point: E } = x, { timestamp: k } = Ni;
      this.history.push({ ...E, timestamp: k });
      const { onStart: T, onMove: R } = this.handlers;
      b || (T && T(this.lastMoveEvent, x), this.startEvent = this.lastMoveEvent), R && R(this.lastMoveEvent, x);
    }, this.handlePointerMove = (x, b) => {
      this.lastMoveEvent = x, this.lastMoveEventInfo = Tw(b, this.transformPagePoint), sr.update(this.updatePoint, !0);
    }, this.handlePointerUp = (x, b) => {
      this.end();
      const { onEnd: _, onSessionEnd: E, resumeAnimation: k } = this.handlers;
      if (this.dragSnapToOrigin && k && k(), !(this.lastMoveEvent && this.lastMoveEventInfo))
        return;
      const T = Aw(x.type === "pointercancel" ? this.lastMoveEventInfo : Tw(b, this.transformPagePoint), this.history);
      this.startEvent && _ && _(x, T), E && E(x, T);
    }, !Vk(t))
      return;
    this.dragSnapToOrigin = a, this.handlers = n, this.transformPagePoint = r, this.distanceThreshold = o, this.contextWindow = i || window;
    const u = Cy(t), c = Tw(u, this.transformPagePoint), { point: f } = c, { timestamp: p } = Ni;
    this.history = [{ ...f, timestamp: p }];
    const { onSessionStart: g } = n;
    g && g(t, Aw(c, this.history)), this.removeListeners = wy(I0(this.contextWindow, "pointermove", this.handlePointerMove), I0(this.contextWindow, "pointerup", this.handlePointerUp), I0(this.contextWindow, "pointercancel", this.handlePointerUp));
  }
  updateHandlers(t) {
    this.handlers = t;
  }
  end() {
    this.removeListeners && this.removeListeners(), Bu(this.updatePoint);
  }
}
function Tw(e, t) {
  return t ? { point: t(e.point) } : e;
}
function Vj(e, t) {
  return { x: e.x - t.x, y: e.y - t.y };
}
function Aw({ point: e }, t) {
  return {
    point: e,
    delta: Vj(e, sL(t)),
    offset: Vj(e, coe(t)),
    velocity: foe(t, 0.1)
  };
}
function coe(e) {
  return e[0];
}
function sL(e) {
  return e[e.length - 1];
}
function foe(e, t) {
  if (e.length < 2)
    return { x: 0, y: 0 };
  let n = e.length - 1, r = null;
  const i = sL(e);
  for (; n >= 0 && (r = e[n], !(i.timestamp - r.timestamp > /* @__PURE__ */ Ul(t))); )
    n--;
  if (!r)
    return { x: 0, y: 0 };
  const a = /* @__PURE__ */ Xa(i.timestamp - r.timestamp);
  if (a === 0)
    return { x: 0, y: 0 };
  const o = {
    x: (i.x - r.x) / a,
    y: (i.y - r.y) / a
  };
  return o.x === 1 / 0 && (o.x = 0), o.y === 1 / 0 && (o.y = 0), o;
}
function doe(e, { min: t, max: n }, r) {
  return t !== void 0 && e < t ? e = r ? cr(t, e, r.min) : Math.max(e, t) : n !== void 0 && e > n && (e = r ? cr(n, e, r.max) : Math.min(e, n)), e;
}
function Hj(e, t, n) {
  return {
    min: t !== void 0 ? e.min + t : void 0,
    max: n !== void 0 ? e.max + n - (e.max - e.min) : void 0
  };
}
function hoe(e, { top: t, left: n, bottom: r, right: i }) {
  return {
    x: Hj(e.x, n, i),
    y: Hj(e.y, t, r)
  };
}
function Gj(e, t) {
  let n = t.min - e.min, r = t.max - e.max;
  return t.max - t.min < e.max - e.min && ([n, r] = [r, n]), { min: n, max: r };
}
function poe(e, t) {
  return {
    x: Gj(e.x, t.x),
    y: Gj(e.y, t.y)
  };
}
function moe(e, t) {
  let n = 0.5;
  const r = ws(e), i = ws(t);
  return i > r ? n = /* @__PURE__ */ Z0(t.min, t.max - r, e.min) : r > i && (n = /* @__PURE__ */ Z0(e.min, e.max - i, t.min)), Iu(0, 1, n);
}
function goe(e, t) {
  const n = {};
  return t.min !== void 0 && (n.min = t.min - e.min), t.max !== void 0 && (n.max = t.max - e.min), n;
}
const h5 = 0.35;
function yoe(e = h5) {
  return e === !1 ? e = 0 : e === !0 && (e = h5), {
    x: Kj(e, "left", "right"),
    y: Kj(e, "top", "bottom")
  };
}
function Kj(e, t, n) {
  return {
    min: Yj(e, t),
    max: Yj(e, n)
  };
}
function Yj(e, t) {
  return typeof e == "number" ? e : e[t] || 0;
}
const voe = /* @__PURE__ */ new WeakMap();
class xoe {
  constructor(t) {
    this.openDragLock = null, this.isDragging = !1, this.currentDirection = null, this.originPoint = { x: 0, y: 0 }, this.constraints = !1, this.hasMutatedConstraints = !1, this.elastic = li(), this.latestPointerEvent = null, this.latestPanInfo = null, this.visualElement = t;
  }
  start(t, { snapToCursor: n = !1, distanceThreshold: r } = {}) {
    const { presenceContext: i } = this.visualElement;
    if (i && i.isPresent === !1)
      return;
    const a = (g) => {
      const { dragSnapToOrigin: x } = this.getProps();
      x ? this.pauseAnimation() : this.stopAnimation(), n && this.snapToCursor(Cy(g).point);
    }, o = (g, x) => {
      const { drag: b, dragPropagation: _, onDragStart: E } = this.getProps();
      if (b && !_ && (this.openDragLock && this.openDragLock(), this.openDragLock = jse(b), !this.openDragLock))
        return;
      this.latestPointerEvent = g, this.latestPanInfo = x, this.isDragging = !0, this.currentDirection = null, this.resolveConstraints(), this.visualElement.projection && (this.visualElement.projection.isAnimationBlocked = !0, this.visualElement.projection.target = void 0), Ka((T) => {
        let R = this.getAxisMotionValue(T).get() || 0;
        if (Vl.test(R)) {
          const { projection: N } = this.visualElement;
          if (N && N.layout) {
            const O = N.layout.layoutBox[T];
            O && (R = ws(O) * (parseFloat(R) / 100));
          }
        }
        this.originPoint[T] = R;
      }), E && sr.postRender(() => E(g, x)), f5(this.visualElement, "transform");
      const { animationState: k } = this.visualElement;
      k && k.setActive("whileDrag", !0);
    }, u = (g, x) => {
      this.latestPointerEvent = g, this.latestPanInfo = x;
      const { dragPropagation: b, dragDirectionLock: _, onDirectionLock: E, onDrag: k } = this.getProps();
      if (!b && !this.openDragLock)
        return;
      const { offset: T } = x;
      if (_ && this.currentDirection === null) {
        this.currentDirection = boe(T), this.currentDirection !== null && E && E(this.currentDirection);
        return;
      }
      this.updateAxis("x", x.point, T), this.updateAxis("y", x.point, T), this.visualElement.render(), k && k(g, x);
    }, c = (g, x) => {
      this.latestPointerEvent = g, this.latestPanInfo = x, this.stop(g, x), this.latestPointerEvent = null, this.latestPanInfo = null;
    }, f = () => Ka((g) => {
      var x;
      return this.getAnimationState(g) === "paused" && ((x = this.getAxisMotionValue(g).animation) == null ? void 0 : x.play());
    }), { dragSnapToOrigin: p } = this.getProps();
    this.panSession = new iL(t, {
      onSessionStart: a,
      onStart: o,
      onMove: u,
      onSessionEnd: c,
      resumeAnimation: f
    }, {
      transformPagePoint: this.visualElement.getTransformPagePoint(),
      dragSnapToOrigin: p,
      distanceThreshold: r,
      contextWindow: rL(this.visualElement)
    });
  }
  /**
   * @internal
   */
  stop(t, n) {
    const r = t || this.latestPointerEvent, i = n || this.latestPanInfo, a = this.isDragging;
    if (this.cancel(), !a || !i || !r)
      return;
    const { velocity: o } = i;
    this.startAnimation(o);
    const { onDragEnd: u } = this.getProps();
    u && sr.postRender(() => u(r, i));
  }
  /**
   * @internal
   */
  cancel() {
    this.isDragging = !1;
    const { projection: t, animationState: n } = this.visualElement;
    t && (t.isAnimationBlocked = !1), this.panSession && this.panSession.end(), this.panSession = void 0;
    const { dragPropagation: r } = this.getProps();
    !r && this.openDragLock && (this.openDragLock(), this.openDragLock = null), n && n.setActive("whileDrag", !1);
  }
  updateAxis(t, n, r) {
    const { drag: i } = this.getProps();
    if (!r || !z1(t, i, this.currentDirection))
      return;
    const a = this.getAxisMotionValue(t);
    let o = this.originPoint[t] + r[t];
    this.constraints && this.constraints[t] && (o = doe(o, this.constraints[t], this.elastic[t])), a.set(o);
  }
  resolveConstraints() {
    var a;
    const { dragConstraints: t, dragElastic: n } = this.getProps(), r = this.visualElement.projection && !this.visualElement.projection.layout ? this.visualElement.projection.measure(!1) : (a = this.visualElement.projection) == null ? void 0 : a.layout, i = this.constraints;
    t && Fp(t) ? this.constraints || (this.constraints = this.resolveRefConstraints()) : t && r ? this.constraints = hoe(r.layoutBox, t) : this.constraints = !1, this.elastic = yoe(n), i !== this.constraints && r && this.constraints && !this.hasMutatedConstraints && Ka((o) => {
      this.constraints !== !1 && this.getAxisMotionValue(o) && (this.constraints[o] = goe(r.layoutBox[o], this.constraints[o]));
    });
  }
  resolveRefConstraints() {
    const { dragConstraints: t, onMeasureDragConstraints: n } = this.getProps();
    if (!t || !Fp(t))
      return !1;
    const r = t.current, { projection: i } = this.visualElement;
    if (!i || !i.layout)
      return !1;
    const a = wae(r, i.root, this.visualElement.getTransformPagePoint());
    let o = poe(i.layout.layoutBox, a);
    if (n) {
      const u = n(vae(o));
      this.hasMutatedConstraints = !!u, u && (o = FI(u));
    }
    return o;
  }
  startAnimation(t) {
    const { drag: n, dragMomentum: r, dragElastic: i, dragTransition: a, dragSnapToOrigin: o, onDragTransitionEnd: u } = this.getProps(), c = this.constraints || {}, f = Ka((p) => {
      if (!z1(p, n, this.currentDirection))
        return;
      let g = c && c[p] || {};
      o && (g = { min: 0, max: 0 });
      const x = i ? 200 : 1e6, b = i ? 40 : 1e7, _ = {
        type: "inertia",
        velocity: r ? t[p] : 0,
        bounceStiffness: x,
        bounceDamping: b,
        timeConstant: 750,
        restDelta: 1,
        restSpeed: 10,
        ...a,
        ...g
      };
      return this.startAxisValueAnimation(p, _);
    });
    return Promise.all(f).then(u);
  }
  startAxisValueAnimation(t, n) {
    const r = this.getAxisMotionValue(t);
    return f5(this.visualElement, t), r.start(eT(t, r, 0, n, this.visualElement, !1));
  }
  stopAnimation() {
    Ka((t) => this.getAxisMotionValue(t).stop());
  }
  pauseAnimation() {
    Ka((t) => {
      var n;
      return (n = this.getAxisMotionValue(t).animation) == null ? void 0 : n.pause();
    });
  }
  getAnimationState(t) {
    var n;
    return (n = this.getAxisMotionValue(t).animation) == null ? void 0 : n.state;
  }
  /**
   * Drag works differently depending on which props are provided.
   *
   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.
   * - Otherwise, we apply the delta to the x/y motion values.
   */
  getAxisMotionValue(t) {
    const n = `_drag${t.toUpperCase()}`, r = this.visualElement.getProps(), i = r[n];
    return i || this.visualElement.getValue(t, (r.initial ? r.initial[t] : void 0) || 0);
  }
  snapToCursor(t) {
    Ka((n) => {
      const { drag: r } = this.getProps();
      if (!z1(n, r, this.currentDirection))
        return;
      const { projection: i } = this.visualElement, a = this.getAxisMotionValue(n);
      if (i && i.layout) {
        const { min: o, max: u } = i.layout.layoutBox[n];
        a.set(t[n] - cr(o, u, 0.5));
      }
    });
  }
  /**
   * When the viewport resizes we want to check if the measured constraints
   * have changed and, if so, reposition the element within those new constraints
   * relative to where it was before the resize.
   */
  scalePositionWithinConstraints() {
    if (!this.visualElement.current)
      return;
    const { drag: t, dragConstraints: n } = this.getProps(), { projection: r } = this.visualElement;
    if (!Fp(n) || !r || !this.constraints)
      return;
    this.stopAnimation();
    const i = { x: 0, y: 0 };
    Ka((o) => {
      const u = this.getAxisMotionValue(o);
      if (u && this.constraints !== !1) {
        const c = u.get();
        i[o] = moe({ min: c, max: c }, this.constraints[o]);
      }
    });
    const { transformTemplate: a } = this.visualElement.getProps();
    this.visualElement.current.style.transform = a ? a({}, "") : "none", r.root && r.root.updateScroll(), r.updateLayout(), this.resolveConstraints(), Ka((o) => {
      if (!z1(o, t, null))
        return;
      const u = this.getAxisMotionValue(o), { min: c, max: f } = this.constraints[o];
      u.set(cr(c, f, i[o]));
    });
  }
  addListeners() {
    if (!this.visualElement.current)
      return;
    voe.set(this.visualElement, this);
    const t = this.visualElement.current, n = I0(t, "pointerdown", (c) => {
      const { drag: f, dragListener: p = !0 } = this.getProps();
      f && p && this.start(c);
    }), r = () => {
      const { dragConstraints: c } = this.getProps();
      Fp(c) && c.current && (this.constraints = this.resolveRefConstraints());
    }, { projection: i } = this.visualElement, a = i.addEventListener("measure", r);
    i && !i.layout && (i.root && i.root.updateScroll(), i.updateLayout()), sr.read(r);
    const o = ey(window, "resize", () => this.scalePositionWithinConstraints()), u = i.addEventListener("didUpdate", (({ delta: c, hasLayoutChanged: f }) => {
      this.isDragging && f && (Ka((p) => {
        const g = this.getAxisMotionValue(p);
        g && (this.originPoint[p] += c[p].translate, g.set(g.get() + c[p].translate));
      }), this.visualElement.render());
    }));
    return () => {
      o(), n(), a(), u && u();
    };
  }
  getProps() {
    const t = this.visualElement.getProps(), { drag: n = !1, dragDirectionLock: r = !1, dragPropagation: i = !1, dragConstraints: a = !1, dragElastic: o = h5, dragMomentum: u = !0 } = t;
    return {
      ...t,
      drag: n,
      dragDirectionLock: r,
      dragPropagation: i,
      dragConstraints: a,
      dragElastic: o,
      dragMomentum: u
    };
  }
}
function z1(e, t, n) {
  return (t === !0 || t === e) && (n === null || n === e);
}
function boe(e, t = 10) {
  let n = null;
  return Math.abs(e.y) > t ? n = "y" : Math.abs(e.x) > t && (n = "x"), n;
}
class woe extends hf {
  constructor(t) {
    super(t), this.removeGroupControls = Qa, this.removeListeners = Qa, this.controls = new xoe(t);
  }
  mount() {
    const { dragControls: t } = this.node.getProps();
    t && (this.removeGroupControls = t.subscribe(this.controls)), this.removeListeners = this.controls.addListeners() || Qa;
  }
  unmount() {
    this.removeGroupControls(), this.removeListeners();
  }
}
const Wj = (e) => (t, n) => {
  e && sr.postRender(() => e(t, n));
};
class _oe extends hf {
  constructor() {
    super(...arguments), this.removePointerDownListener = Qa;
  }
  onPointerDown(t) {
    this.session = new iL(t, this.createPanHandlers(), {
      transformPagePoint: this.node.getTransformPagePoint(),
      contextWindow: rL(this.node)
    });
  }
  createPanHandlers() {
    const { onPanSessionStart: t, onPanStart: n, onPan: r, onPanEnd: i } = this.node.getProps();
    return {
      onSessionStart: Wj(t),
      onStart: Wj(n),
      onMove: r,
      onEnd: (a, o) => {
        delete this.session, i && sr.postRender(() => i(a, o));
      }
    };
  }
  mount() {
    this.removePointerDownListener = I0(this.node.current, "pointerdown", (t) => this.onPointerDown(t));
  }
  update() {
    this.session && this.session.updateHandlers(this.createPanHandlers());
  }
  unmount() {
    this.removePointerDownListener(), this.session && this.session.end();
  }
}
const ax = {
  /**
   * Global flag as to whether the tree has animated since the last time
   * we resized the window
   */
  hasAnimatedSinceResize: !0,
  /**
   * We set this to true once, on the first update. Any nodes added to the tree beyond that
   * update will be given a `data-projection-id` attribute.
   */
  hasEverUpdated: !1
};
let jw = !1;
class Soe extends B.Component {
  /**
   * This only mounts projection nodes for components that
   * need measuring, we might want to do it for all components
   * in order to incorporate transforms
   */
  componentDidMount() {
    const { visualElement: t, layoutGroup: n, switchLayoutGroup: r, layoutId: i } = this.props, { projection: a } = t;
    a && (n.group && n.group.add(a), r && r.register && i && r.register(a), jw && a.root.didUpdate(), a.addEventListener("animationComplete", () => {
      this.safeToRemove();
    }), a.setOptions({
      ...a.options,
      onExitComplete: () => this.safeToRemove()
    })), ax.hasEverUpdated = !0;
  }
  getSnapshotBeforeUpdate(t) {
    const { layoutDependency: n, visualElement: r, drag: i, isPresent: a } = this.props, { projection: o } = r;
    return o && (o.isPresent = a, jw = !0, i || t.layoutDependency !== n || n === void 0 || t.isPresent !== a ? o.willUpdate() : this.safeToRemove(), t.isPresent !== a && (a ? o.promote() : o.relegate() || sr.postRender(() => {
      const u = o.getStack();
      (!u || !u.members.length) && this.safeToRemove();
    }))), null;
  }
  componentDidUpdate() {
    const { projection: t } = this.props.visualElement;
    t && (t.root.didUpdate(), Uk.postRender(() => {
      !t.currentAnimation && t.isLead() && this.safeToRemove();
    }));
  }
  componentWillUnmount() {
    const { visualElement: t, layoutGroup: n, switchLayoutGroup: r } = this.props, { projection: i } = t;
    jw = !0, i && (i.scheduleCheckAfterUnmount(), n && n.group && n.group.remove(i), r && r.deregister && r.deregister(i));
  }
  safeToRemove() {
    const { safeToRemove: t } = this.props;
    t && t();
  }
  render() {
    return null;
  }
}
function aL(e) {
  const [t, n] = Bse(), r = B.useContext(PP);
  return h.jsx(Soe, { ...e, layoutGroup: r, switchLayoutGroup: B.useContext(qI), isPresent: t, safeToRemove: n });
}
function Coe(e, t, n) {
  const r = Ri(e) ? e : Jd(e);
  return r.start(eT("", r, t, n)), r.animation;
}
const Eoe = (e, t) => e.depth - t.depth;
class koe {
  constructor() {
    this.children = [], this.isDirty = !1;
  }
  add(t) {
    kk(this.children, t), this.isDirty = !0;
  }
  remove(t) {
    Tk(this.children, t), this.isDirty = !0;
  }
  forEach(t) {
    this.isDirty && this.children.sort(Eoe), this.isDirty = !1, this.children.forEach(t);
  }
}
function Toe(e, t) {
  const n = Js.now(), r = ({ timestamp: i }) => {
    const a = i - n;
    a >= t && (Bu(r), e(a - t));
  };
  return sr.setup(r, !0), () => Bu(r);
}
const oL = ["TopLeft", "TopRight", "BottomLeft", "BottomRight"], Aoe = oL.length, Zj = (e) => typeof e == "string" ? parseFloat(e) : e, Xj = (e) => typeof e == "number" || It.test(e);
function joe(e, t, n, r, i, a) {
  i ? (e.opacity = cr(0, n.opacity ?? 1, Noe(r)), e.opacityExit = cr(t.opacity ?? 1, 0, Roe(r))) : a && (e.opacity = cr(t.opacity ?? 1, n.opacity ?? 1, r));
  for (let o = 0; o < Aoe; o++) {
    const u = `border${oL[o]}Radius`;
    let c = Qj(t, u), f = Qj(n, u);
    if (c === void 0 && f === void 0)
      continue;
    c || (c = 0), f || (f = 0), c === 0 || f === 0 || Xj(c) === Xj(f) ? (e[u] = Math.max(cr(Zj(c), Zj(f), r), 0), (Vl.test(f) || Vl.test(c)) && (e[u] += "%")) : e[u] = f;
  }
  (t.rotate || n.rotate) && (e.rotate = cr(t.rotate || 0, n.rotate || 0, r));
}
function Qj(e, t) {
  return e[t] !== void 0 ? e[t] : e.borderRadius;
}
const Noe = /* @__PURE__ */ lL(0, 0.5, YP), Roe = /* @__PURE__ */ lL(0.5, 0.95, Qa);
function lL(e, t, n) {
  return (r) => r < e ? 0 : r > t ? 1 : n(/* @__PURE__ */ Z0(e, t, r));
}
function Jj(e, t) {
  e.min = t.min, e.max = t.max;
}
function Po(e, t) {
  Jj(e.x, t.x), Jj(e.y, t.y);
}
function eN(e, t) {
  e.translate = t.translate, e.scale = t.scale, e.originPoint = t.originPoint, e.origin = t.origin;
}
function tN(e, t, n, r, i) {
  return e -= t, e = Ox(e, 1 / n, r), i !== void 0 && (e = Ox(e, 1 / i, r)), e;
}
function Moe(e, t = 0, n = 1, r = 0.5, i, a = e, o = e) {
  if (Vl.test(t) && (t = parseFloat(t), t = cr(o.min, o.max, t / 100) - o.min), typeof t != "number")
    return;
  let u = cr(a.min, a.max, r);
  e === a && (u -= t), e.min = tN(e.min, t, n, u, i), e.max = tN(e.max, t, n, u, i);
}
function nN(e, t, [n, r, i], a, o) {
  Moe(e, t[n], t[r], t[i], t.scale, a, o);
}
const Ooe = ["x", "scaleX", "originX"], Doe = ["y", "scaleY", "originY"];
function rN(e, t, n, r) {
  nN(e.x, t, Ooe, n ? n.x : void 0, r ? r.x : void 0), nN(e.y, t, Doe, n ? n.y : void 0, r ? r.y : void 0);
}
function iN(e) {
  return e.translate === 0 && e.scale === 1;
}
function uL(e) {
  return iN(e.x) && iN(e.y);
}
function sN(e, t) {
  return e.min === t.min && e.max === t.max;
}
function zoe(e, t) {
  return sN(e.x, t.x) && sN(e.y, t.y);
}
function aN(e, t) {
  return Math.round(e.min) === Math.round(t.min) && Math.round(e.max) === Math.round(t.max);
}
function cL(e, t) {
  return aN(e.x, t.x) && aN(e.y, t.y);
}
function oN(e) {
  return ws(e.x) / ws(e.y);
}
function lN(e, t) {
  return e.translate === t.translate && e.scale === t.scale && e.originPoint === t.originPoint;
}
class Poe {
  constructor() {
    this.members = [];
  }
  add(t) {
    kk(this.members, t), t.scheduleRender();
  }
  remove(t) {
    if (Tk(this.members, t), t === this.prevLead && (this.prevLead = void 0), t === this.lead) {
      const n = this.members[this.members.length - 1];
      n && this.promote(n);
    }
  }
  relegate(t) {
    const n = this.members.findIndex((i) => t === i);
    if (n === 0)
      return !1;
    let r;
    for (let i = n; i >= 0; i--) {
      const a = this.members[i];
      if (a.isPresent !== !1) {
        r = a;
        break;
      }
    }
    return r ? (this.promote(r), !0) : !1;
  }
  promote(t, n) {
    const r = this.lead;
    if (t !== r && (this.prevLead = r, this.lead = t, t.show(), r)) {
      r.instance && r.scheduleRender(), t.scheduleRender(), t.resumeFrom = r, n && (t.resumeFrom.preserveOpacity = !0), r.snapshot && (t.snapshot = r.snapshot, t.snapshot.latestValues = r.animationValues || r.latestValues), t.root && t.root.isUpdating && (t.isLayoutDirty = !0);
      const { crossfade: i } = t.options;
      i === !1 && r.hide();
    }
  }
  exitAnimationComplete() {
    this.members.forEach((t) => {
      const { options: n, resumingFrom: r } = t;
      n.onExitComplete && n.onExitComplete(), r && r.options.onExitComplete && r.options.onExitComplete();
    });
  }
  scheduleRender() {
    this.members.forEach((t) => {
      t.instance && t.scheduleRender(!1);
    });
  }
  /**
   * Clear any leads that have been removed this render to prevent them from being
   * used in future animations and to prevent memory leaks
   */
  removeLeadSnapshot() {
    this.lead && this.lead.snapshot && (this.lead.snapshot = void 0);
  }
}
function Ioe(e, t, n) {
  let r = "";
  const i = e.x.translate / t.x, a = e.y.translate / t.y, o = (n == null ? void 0 : n.z) || 0;
  if ((i || a || o) && (r = `translate3d(${i}px, ${a}px, ${o}px) `), (t.x !== 1 || t.y !== 1) && (r += `scale(${1 / t.x}, ${1 / t.y}) `), n) {
    const { transformPerspective: f, rotate: p, rotateX: g, rotateY: x, skewX: b, skewY: _ } = n;
    f && (r = `perspective(${f}px) ${r}`), p && (r += `rotate(${p}deg) `), g && (r += `rotateX(${g}deg) `), x && (r += `rotateY(${x}deg) `), b && (r += `skewX(${b}deg) `), _ && (r += `skewY(${_}deg) `);
  }
  const u = e.x.scale * t.x, c = e.y.scale * t.y;
  return (u !== 1 || c !== 1) && (r += `scale(${u}, ${c})`), r || "none";
}
const Nw = ["", "X", "Y", "Z"], Loe = 1e3;
let Boe = 0;
function Rw(e, t, n, r) {
  const { latestValues: i } = t;
  i[e] && (n[e] = i[e], t.setStaticValue(e, 0), r && (r[e] = 0));
}
function fL(e) {
  if (e.hasCheckedOptimisedAppear = !0, e.root === e)
    return;
  const { visualElement: t } = e.options;
  if (!t)
    return;
  const n = ZI(t);
  if (window.MotionHasOptimisedAnimation(n, "transform")) {
    const { layout: i, layoutId: a } = e.options;
    window.MotionCancelOptimisedAnimation(n, "transform", sr, !(i || a));
  }
  const { parent: r } = e;
  r && !r.hasCheckedOptimisedAppear && fL(r);
}
function dL({ attachResizeListener: e, defaultParent: t, measureScroll: n, checkIsScrollRoot: r, resetTransform: i }) {
  return class {
    constructor(o = {}, u = t == null ? void 0 : t()) {
      this.id = Boe++, this.animationId = 0, this.animationCommitId = 0, this.children = /* @__PURE__ */ new Set(), this.options = {}, this.isTreeAnimating = !1, this.isAnimationBlocked = !1, this.isLayoutDirty = !1, this.isProjectionDirty = !1, this.isSharedProjectionDirty = !1, this.isTransformDirty = !1, this.updateManuallyBlocked = !1, this.updateBlockedByResize = !1, this.isUpdating = !1, this.isSVG = !1, this.needsReset = !1, this.shouldResetTransform = !1, this.hasCheckedOptimisedAppear = !1, this.treeScale = { x: 1, y: 1 }, this.eventHandlers = /* @__PURE__ */ new Map(), this.hasTreeAnimated = !1, this.layoutVersion = 0, this.updateScheduled = !1, this.scheduleUpdate = () => this.update(), this.projectionUpdateScheduled = !1, this.checkUpdateFailed = () => {
        this.isUpdating && (this.isUpdating = !1, this.clearAllSnapshots());
      }, this.updateProjection = () => {
        this.projectionUpdateScheduled = !1, this.nodes.forEach(Foe), this.nodes.forEach(Goe), this.nodes.forEach(Koe), this.nodes.forEach(Uoe);
      }, this.resolvedRelativeTargetAt = 0, this.linkedParentVersion = 0, this.hasProjected = !1, this.isVisible = !0, this.animationProgress = 0, this.sharedNodes = /* @__PURE__ */ new Map(), this.latestValues = o, this.root = u ? u.root || u : this, this.path = u ? [...u.path, u] : [], this.parent = u, this.depth = u ? u.depth + 1 : 0;
      for (let c = 0; c < this.path.length; c++)
        this.path[c].shouldResetTransform = !0;
      this.root === this && (this.nodes = new koe());
    }
    addEventListener(o, u) {
      return this.eventHandlers.has(o) || this.eventHandlers.set(o, new jk()), this.eventHandlers.get(o).add(u);
    }
    notifyListeners(o, ...u) {
      const c = this.eventHandlers.get(o);
      c && c.notify(...u);
    }
    hasListeners(o) {
      return this.eventHandlers.has(o);
    }
    /**
     * Lifecycles
     */
    mount(o) {
      if (this.instance)
        return;
      this.isSVG = AI(o) && !zse(o), this.instance = o;
      const { layoutId: u, layout: c, visualElement: f } = this.options;
      if (f && !f.current && f.mount(o), this.root.nodes.add(this), this.parent && this.parent.children.add(this), this.root.hasTreeAnimated && (c || u) && (this.isLayoutDirty = !0), e) {
        let p, g = 0;
        const x = () => this.root.updateBlockedByResize = !1;
        sr.read(() => {
          g = window.innerWidth;
        }), e(o, () => {
          const b = window.innerWidth;
          b !== g && (g = b, this.root.updateBlockedByResize = !0, p && p(), p = Toe(x, 250), ax.hasAnimatedSinceResize && (ax.hasAnimatedSinceResize = !1, this.nodes.forEach(fN)));
        });
      }
      u && this.root.registerSharedNode(u, this), this.options.animate !== !1 && f && (u || c) && this.addEventListener("didUpdate", ({ delta: p, hasLayoutChanged: g, hasRelativeLayoutChanged: x, layout: b }) => {
        if (this.isTreeAnimationBlocked()) {
          this.target = void 0, this.relativeTarget = void 0;
          return;
        }
        const _ = this.options.transition || f.getDefaultTransition() || Qoe, { onLayoutAnimationStart: E, onLayoutAnimationComplete: k } = f.getProps(), T = !this.targetLayout || !cL(this.targetLayout, b), R = !g && x;
        if (this.options.layoutRoot || this.resumeFrom || R || g && (T || !this.currentAnimation)) {
          this.resumeFrom && (this.resumingFrom = this.resumeFrom, this.resumingFrom.resumingFrom = void 0);
          const N = {
            ...$k(_, "layout"),
            onPlay: E,
            onComplete: k
          };
          (f.shouldReduceMotion || this.options.layoutRoot) && (N.delay = 0, N.type = !1), this.startAnimation(N), this.setAnimationOrigin(p, R);
        } else
          g || fN(this), this.isLead() && this.options.onExitComplete && this.options.onExitComplete();
        this.targetLayout = b;
      });
    }
    unmount() {
      this.options.layoutId && this.willUpdate(), this.root.nodes.remove(this);
      const o = this.getStack();
      o && o.remove(this), this.parent && this.parent.children.delete(this), this.instance = void 0, this.eventHandlers.clear(), Bu(this.updateProjection);
    }
    // only on the root
    blockUpdate() {
      this.updateManuallyBlocked = !0;
    }
    unblockUpdate() {
      this.updateManuallyBlocked = !1;
    }
    isUpdateBlocked() {
      return this.updateManuallyBlocked || this.updateBlockedByResize;
    }
    isTreeAnimationBlocked() {
      return this.isAnimationBlocked || this.parent && this.parent.isTreeAnimationBlocked() || !1;
    }
    // Note: currently only running on root node
    startUpdate() {
      this.isUpdateBlocked() || (this.isUpdating = !0, this.nodes && this.nodes.forEach(Yoe), this.animationId++);
    }
    getTransformTemplate() {
      const { visualElement: o } = this.options;
      return o && o.getProps().transformTemplate;
    }
    willUpdate(o = !0) {
      if (this.root.hasTreeAnimated = !0, this.root.isUpdateBlocked()) {
        this.options.onExitComplete && this.options.onExitComplete();
        return;
      }
      if (window.MotionCancelOptimisedAnimation && !this.hasCheckedOptimisedAppear && fL(this), !this.root.isUpdating && this.root.startUpdate(), this.isLayoutDirty)
        return;
      this.isLayoutDirty = !0;
      for (let p = 0; p < this.path.length; p++) {
        const g = this.path[p];
        g.shouldResetTransform = !0, g.updateScroll("snapshot"), g.options.layoutRoot && g.willUpdate(!1);
      }
      const { layoutId: u, layout: c } = this.options;
      if (u === void 0 && !c)
        return;
      const f = this.getTransformTemplate();
      this.prevTransformTemplateValue = f ? f(this.latestValues, "") : void 0, this.updateSnapshot(), o && this.notifyListeners("willUpdate");
    }
    update() {
      if (this.updateScheduled = !1, this.isUpdateBlocked()) {
        this.unblockUpdate(), this.clearAllSnapshots(), this.nodes.forEach(uN);
        return;
      }
      if (this.animationId <= this.animationCommitId) {
        this.nodes.forEach(cN);
        return;
      }
      this.animationCommitId = this.animationId, this.isUpdating ? (this.isUpdating = !1, this.nodes.forEach(Hoe), this.nodes.forEach(qoe), this.nodes.forEach($oe)) : this.nodes.forEach(cN), this.clearAllSnapshots();
      const u = Js.now();
      Ni.delta = Iu(0, 1e3 / 60, u - Ni.timestamp), Ni.timestamp = u, Ni.isProcessing = !0, xw.update.process(Ni), xw.preRender.process(Ni), xw.render.process(Ni), Ni.isProcessing = !1;
    }
    didUpdate() {
      this.updateScheduled || (this.updateScheduled = !0, Uk.read(this.scheduleUpdate));
    }
    clearAllSnapshots() {
      this.nodes.forEach(Voe), this.sharedNodes.forEach(Woe);
    }
    scheduleUpdateProjection() {
      this.projectionUpdateScheduled || (this.projectionUpdateScheduled = !0, sr.preRender(this.updateProjection, !1, !0));
    }
    scheduleCheckAfterUnmount() {
      sr.postRender(() => {
        this.isLayoutDirty ? this.root.didUpdate() : this.root.checkUpdateFailed();
      });
    }
    /**
     * Update measurements
     */
    updateSnapshot() {
      this.snapshot || !this.instance || (this.snapshot = this.measure(), this.snapshot && !ws(this.snapshot.measuredBox.x) && !ws(this.snapshot.measuredBox.y) && (this.snapshot = void 0));
    }
    updateLayout() {
      if (!this.instance || (this.updateScroll(), !(this.options.alwaysMeasureLayout && this.isLead()) && !this.isLayoutDirty))
        return;
      if (this.resumeFrom && !this.resumeFrom.instance)
        for (let c = 0; c < this.path.length; c++)
          this.path[c].updateScroll();
      const o = this.layout;
      this.layout = this.measure(!1), this.layoutVersion++, this.layoutCorrected = li(), this.isLayoutDirty = !1, this.projectionDelta = void 0, this.notifyListeners("measure", this.layout.layoutBox);
      const { visualElement: u } = this.options;
      u && u.notify("LayoutMeasure", this.layout.layoutBox, o ? o.layoutBox : void 0);
    }
    updateScroll(o = "measure") {
      let u = !!(this.options.layoutScroll && this.instance);
      if (this.scroll && this.scroll.animationId === this.root.animationId && this.scroll.phase === o && (u = !1), u && this.instance) {
        const c = r(this.instance);
        this.scroll = {
          animationId: this.root.animationId,
          phase: o,
          isRoot: c,
          offset: n(this.instance),
          wasRoot: this.scroll ? this.scroll.isRoot : c
        };
      }
    }
    resetTransform() {
      if (!i)
        return;
      const o = this.isLayoutDirty || this.shouldResetTransform || this.options.alwaysMeasureLayout, u = this.projectionDelta && !uL(this.projectionDelta), c = this.getTransformTemplate(), f = c ? c(this.latestValues, "") : void 0, p = f !== this.prevTransformTemplateValue;
      o && this.instance && (u || Od(this.latestValues) || p) && (i(this.instance, f), this.shouldResetTransform = !1, this.scheduleRender());
    }
    measure(o = !0) {
      const u = this.measurePageBox();
      let c = this.removeElementScroll(u);
      return o && (c = this.removeTransform(c)), Joe(c), {
        animationId: this.root.animationId,
        measuredBox: u,
        layoutBox: c,
        latestValues: {},
        source: this.id
      };
    }
    measurePageBox() {
      var f;
      const { visualElement: o } = this.options;
      if (!o)
        return li();
      const u = o.measureViewportBox();
      if (!(((f = this.scroll) == null ? void 0 : f.wasRoot) || this.path.some(ele))) {
        const { scroll: p } = this.root;
        p && (Up(u.x, p.offset.x), Up(u.y, p.offset.y));
      }
      return u;
    }
    removeElementScroll(o) {
      var c;
      const u = li();
      if (Po(u, o), (c = this.scroll) != null && c.wasRoot)
        return u;
      for (let f = 0; f < this.path.length; f++) {
        const p = this.path[f], { scroll: g, options: x } = p;
        p !== this.root && g && x.layoutScroll && (g.wasRoot && Po(u, o), Up(u.x, g.offset.x), Up(u.y, g.offset.y));
      }
      return u;
    }
    applyTransform(o, u = !1) {
      const c = li();
      Po(c, o);
      for (let f = 0; f < this.path.length; f++) {
        const p = this.path[f];
        !u && p.options.layoutScroll && p.scroll && p !== p.root && Vp(c, {
          x: -p.scroll.offset.x,
          y: -p.scroll.offset.y
        }), Od(p.latestValues) && Vp(c, p.latestValues);
      }
      return Od(this.latestValues) && Vp(c, this.latestValues), c;
    }
    removeTransform(o) {
      const u = li();
      Po(u, o);
      for (let c = 0; c < this.path.length; c++) {
        const f = this.path[c];
        if (!f.instance || !Od(f.latestValues))
          continue;
        o5(f.latestValues) && f.updateSnapshot();
        const p = li(), g = f.measurePageBox();
        Po(p, g), rN(u, f.latestValues, f.snapshot ? f.snapshot.layoutBox : void 0, p);
      }
      return Od(this.latestValues) && rN(u, this.latestValues), u;
    }
    setTargetDelta(o) {
      this.targetDelta = o, this.root.scheduleUpdateProjection(), this.isProjectionDirty = !0;
    }
    setOptions(o) {
      this.options = {
        ...this.options,
        ...o,
        crossfade: o.crossfade !== void 0 ? o.crossfade : !0
      };
    }
    clearMeasurements() {
      this.scroll = void 0, this.layout = void 0, this.snapshot = void 0, this.prevTransformTemplateValue = void 0, this.targetDelta = void 0, this.target = void 0, this.isLayoutDirty = !1;
    }
    forceRelativeParentToResolveTarget() {
      this.relativeParent && this.relativeParent.resolvedRelativeTargetAt !== Ni.timestamp && this.relativeParent.resolveTargetDelta(!0);
    }
    resolveTargetDelta(o = !1) {
      var b;
      const u = this.getLead();
      this.isProjectionDirty || (this.isProjectionDirty = u.isProjectionDirty), this.isTransformDirty || (this.isTransformDirty = u.isTransformDirty), this.isSharedProjectionDirty || (this.isSharedProjectionDirty = u.isSharedProjectionDirty);
      const c = !!this.resumingFrom || this !== u;
      if (!(o || c && this.isSharedProjectionDirty || this.isProjectionDirty || (b = this.parent) != null && b.isProjectionDirty || this.attemptToResolveRelativeTarget || this.root.updateBlockedByResize))
        return;
      const { layout: p, layoutId: g } = this.options;
      if (!this.layout || !(p || g))
        return;
      this.resolvedRelativeTargetAt = Ni.timestamp;
      const x = this.getClosestProjectingParent();
      x && this.linkedParentVersion !== x.layoutVersion && !x.options.layoutRoot && this.removeRelativeTarget(), !this.targetDelta && !this.relativeTarget && (x && x.layout ? this.createRelativeTarget(x, this.layout.layoutBox, x.layout.layoutBox) : this.removeRelativeTarget()), !(!this.relativeTarget && !this.targetDelta) && (this.target || (this.target = li(), this.targetWithTransforms = li()), this.relativeTarget && this.relativeTargetOrigin && this.relativeParent && this.relativeParent.target ? (this.forceRelativeParentToResolveTarget(), loe(this.target, this.relativeTarget, this.relativeParent.target)) : this.targetDelta ? (this.resumingFrom ? this.target = this.applyTransform(this.layout.layoutBox) : Po(this.target, this.layout.layoutBox), VI(this.target, this.targetDelta)) : Po(this.target, this.layout.layoutBox), this.attemptToResolveRelativeTarget && (this.attemptToResolveRelativeTarget = !1, x && !!x.resumingFrom == !!this.resumingFrom && !x.options.layoutScroll && x.target && this.animationProgress !== 1 ? this.createRelativeTarget(x, this.target, x.target) : this.relativeParent = this.relativeTarget = void 0));
    }
    getClosestProjectingParent() {
      if (!(!this.parent || o5(this.parent.latestValues) || UI(this.parent.latestValues)))
        return this.parent.isProjecting() ? this.parent : this.parent.getClosestProjectingParent();
    }
    isProjecting() {
      return !!((this.relativeTarget || this.targetDelta || this.options.layoutRoot) && this.layout);
    }
    createRelativeTarget(o, u, c) {
      this.relativeParent = o, this.linkedParentVersion = o.layoutVersion, this.forceRelativeParentToResolveTarget(), this.relativeTarget = li(), this.relativeTargetOrigin = li(), Dx(this.relativeTargetOrigin, u, c), Po(this.relativeTarget, this.relativeTargetOrigin);
    }
    removeRelativeTarget() {
      this.relativeParent = this.relativeTarget = void 0;
    }
    calcProjection() {
      var _;
      const o = this.getLead(), u = !!this.resumingFrom || this !== o;
      let c = !0;
      if ((this.isProjectionDirty || (_ = this.parent) != null && _.isProjectionDirty) && (c = !1), u && (this.isSharedProjectionDirty || this.isTransformDirty) && (c = !1), this.resolvedRelativeTargetAt === Ni.timestamp && (c = !1), c)
        return;
      const { layout: f, layoutId: p } = this.options;
      if (this.isTreeAnimating = !!(this.parent && this.parent.isTreeAnimating || this.currentAnimation || this.pendingAnimation), this.isTreeAnimating || (this.targetDelta = this.relativeTarget = void 0), !this.layout || !(f || p))
        return;
      Po(this.layoutCorrected, this.layout.layoutBox);
      const g = this.treeScale.x, x = this.treeScale.y;
      bae(this.layoutCorrected, this.treeScale, this.path, u), o.layout && !o.target && (this.treeScale.x !== 1 || this.treeScale.y !== 1) && (o.target = o.layout.layoutBox, o.targetWithTransforms = li());
      const { target: b } = o;
      if (!b) {
        this.prevProjectionDelta && (this.createProjectionDeltas(), this.scheduleRender());
        return;
      }
      !this.projectionDelta || !this.prevProjectionDelta ? this.createProjectionDeltas() : (eN(this.prevProjectionDelta.x, this.projectionDelta.x), eN(this.prevProjectionDelta.y, this.projectionDelta.y)), L0(this.projectionDelta, this.layoutCorrected, b, this.latestValues), (this.treeScale.x !== g || this.treeScale.y !== x || !lN(this.projectionDelta.x, this.prevProjectionDelta.x) || !lN(this.projectionDelta.y, this.prevProjectionDelta.y)) && (this.hasProjected = !0, this.scheduleRender(), this.notifyListeners("projectionUpdate", b));
    }
    hide() {
      this.isVisible = !1;
    }
    show() {
      this.isVisible = !0;
    }
    scheduleRender(o = !0) {
      var u;
      if ((u = this.options.visualElement) == null || u.scheduleRender(), o) {
        const c = this.getStack();
        c && c.scheduleRender();
      }
      this.resumingFrom && !this.resumingFrom.instance && (this.resumingFrom = void 0);
    }
    createProjectionDeltas() {
      this.prevProjectionDelta = Hp(), this.projectionDelta = Hp(), this.projectionDeltaWithTransform = Hp();
    }
    setAnimationOrigin(o, u = !1) {
      const c = this.snapshot, f = c ? c.latestValues : {}, p = { ...this.latestValues }, g = Hp();
      (!this.relativeParent || !this.relativeParent.options.layoutRoot) && (this.relativeTarget = this.relativeTargetOrigin = void 0), this.attemptToResolveRelativeTarget = !u;
      const x = li(), b = c ? c.source : void 0, _ = this.layout ? this.layout.source : void 0, E = b !== _, k = this.getStack(), T = !k || k.members.length <= 1, R = !!(E && !T && this.options.crossfade === !0 && !this.path.some(Xoe));
      this.animationProgress = 0;
      let N;
      this.mixTargetDelta = (O) => {
        const P = O / 1e3;
        dN(g.x, o.x, P), dN(g.y, o.y, P), this.setTargetDelta(g), this.relativeTarget && this.relativeTargetOrigin && this.layout && this.relativeParent && this.relativeParent.layout && (Dx(x, this.layout.layoutBox, this.relativeParent.layout.layoutBox), Zoe(this.relativeTarget, this.relativeTargetOrigin, x, P), N && zoe(this.relativeTarget, N) && (this.isProjectionDirty = !1), N || (N = li()), Po(N, this.relativeTarget)), E && (this.animationValues = p, joe(p, f, this.latestValues, P, R, T)), this.root.scheduleUpdateProjection(), this.scheduleRender(), this.animationProgress = P;
      }, this.mixTargetDelta(this.options.layoutRoot ? 1e3 : 0);
    }
    startAnimation(o) {
      var u, c, f;
      this.notifyListeners("animationStart"), (u = this.currentAnimation) == null || u.stop(), (f = (c = this.resumingFrom) == null ? void 0 : c.currentAnimation) == null || f.stop(), this.pendingAnimation && (Bu(this.pendingAnimation), this.pendingAnimation = void 0), this.pendingAnimation = sr.update(() => {
        ax.hasAnimatedSinceResize = !0, this.motionValue || (this.motionValue = Jd(0)), this.currentAnimation = Coe(this.motionValue, [0, 1e3], {
          ...o,
          velocity: 0,
          isSync: !0,
          onUpdate: (p) => {
            this.mixTargetDelta(p), o.onUpdate && o.onUpdate(p);
          },
          onStop: () => {
          },
          onComplete: () => {
            o.onComplete && o.onComplete(), this.completeAnimation();
          }
        }), this.resumingFrom && (this.resumingFrom.currentAnimation = this.currentAnimation), this.pendingAnimation = void 0;
      });
    }
    completeAnimation() {
      this.resumingFrom && (this.resumingFrom.currentAnimation = void 0, this.resumingFrom.preserveOpacity = void 0);
      const o = this.getStack();
      o && o.exitAnimationComplete(), this.resumingFrom = this.currentAnimation = this.animationValues = void 0, this.notifyListeners("animationComplete");
    }
    finishAnimation() {
      this.currentAnimation && (this.mixTargetDelta && this.mixTargetDelta(Loe), this.currentAnimation.stop()), this.completeAnimation();
    }
    applyTransformsToTarget() {
      const o = this.getLead();
      let { targetWithTransforms: u, target: c, layout: f, latestValues: p } = o;
      if (!(!u || !c || !f)) {
        if (this !== o && this.layout && f && hL(this.options.animationType, this.layout.layoutBox, f.layoutBox)) {
          c = this.target || li();
          const g = ws(this.layout.layoutBox.x);
          c.x.min = o.target.x.min, c.x.max = c.x.min + g;
          const x = ws(this.layout.layoutBox.y);
          c.y.min = o.target.y.min, c.y.max = c.y.min + x;
        }
        Po(u, c), Vp(u, p), L0(this.projectionDeltaWithTransform, this.layoutCorrected, u, p);
      }
    }
    registerSharedNode(o, u) {
      this.sharedNodes.has(o) || this.sharedNodes.set(o, new Poe()), this.sharedNodes.get(o).add(u);
      const f = u.options.initialPromotionConfig;
      u.promote({
        transition: f ? f.transition : void 0,
        preserveFollowOpacity: f && f.shouldPreserveFollowOpacity ? f.shouldPreserveFollowOpacity(u) : void 0
      });
    }
    isLead() {
      const o = this.getStack();
      return o ? o.lead === this : !0;
    }
    getLead() {
      var u;
      const { layoutId: o } = this.options;
      return o ? ((u = this.getStack()) == null ? void 0 : u.lead) || this : this;
    }
    getPrevLead() {
      var u;
      const { layoutId: o } = this.options;
      return o ? (u = this.getStack()) == null ? void 0 : u.prevLead : void 0;
    }
    getStack() {
      const { layoutId: o } = this.options;
      if (o)
        return this.root.sharedNodes.get(o);
    }
    promote({ needsReset: o, transition: u, preserveFollowOpacity: c } = {}) {
      const f = this.getStack();
      f && f.promote(this, c), o && (this.projectionDelta = void 0, this.needsReset = !0), u && this.setOptions({ transition: u });
    }
    relegate() {
      const o = this.getStack();
      return o ? o.relegate(this) : !1;
    }
    resetSkewAndRotation() {
      const { visualElement: o } = this.options;
      if (!o)
        return;
      let u = !1;
      const { latestValues: c } = o;
      if ((c.z || c.rotate || c.rotateX || c.rotateY || c.rotateZ || c.skewX || c.skewY) && (u = !0), !u)
        return;
      const f = {};
      c.z && Rw("z", o, f, this.animationValues);
      for (let p = 0; p < Nw.length; p++)
        Rw(`rotate${Nw[p]}`, o, f, this.animationValues), Rw(`skew${Nw[p]}`, o, f, this.animationValues);
      o.render();
      for (const p in f)
        o.setStaticValue(p, f[p]), this.animationValues && (this.animationValues[p] = f[p]);
      o.scheduleRender();
    }
    applyProjectionStyles(o, u) {
      if (!this.instance || this.isSVG)
        return;
      if (!this.isVisible) {
        o.visibility = "hidden";
        return;
      }
      const c = this.getTransformTemplate();
      if (this.needsReset) {
        this.needsReset = !1, o.visibility = "", o.opacity = "", o.pointerEvents = sx(u == null ? void 0 : u.pointerEvents) || "", o.transform = c ? c(this.latestValues, "") : "none";
        return;
      }
      const f = this.getLead();
      if (!this.projectionDelta || !this.layout || !f.target) {
        this.options.layoutId && (o.opacity = this.latestValues.opacity !== void 0 ? this.latestValues.opacity : 1, o.pointerEvents = sx(u == null ? void 0 : u.pointerEvents) || ""), this.hasProjected && !Od(this.latestValues) && (o.transform = c ? c({}, "") : "none", this.hasProjected = !1);
        return;
      }
      o.visibility = "";
      const p = f.animationValues || f.latestValues;
      this.applyTransformsToTarget();
      let g = Ioe(this.projectionDeltaWithTransform, this.treeScale, p);
      c && (g = c(p, g)), o.transform = g;
      const { x, y: b } = this.projectionDelta;
      o.transformOrigin = `${x.origin * 100}% ${b.origin * 100}% 0`, f.animationValues ? o.opacity = f === this ? p.opacity ?? this.latestValues.opacity ?? 1 : this.preserveOpacity ? this.latestValues.opacity : p.opacityExit : o.opacity = f === this ? p.opacity !== void 0 ? p.opacity : "" : p.opacityExit !== void 0 ? p.opacityExit : 0;
      for (const _ in a5) {
        if (p[_] === void 0)
          continue;
        const { correct: E, applyTo: k, isCSSVariable: T } = a5[_], R = g === "none" ? p[_] : E(p[_], f);
        if (k) {
          const N = k.length;
          for (let O = 0; O < N; O++)
            o[k[O]] = R;
        } else
          T ? this.options.visualElement.renderState.vars[_] = R : o[_] = R;
      }
      this.options.layoutId && (o.pointerEvents = f === this ? sx(u == null ? void 0 : u.pointerEvents) || "" : "none");
    }
    clearSnapshot() {
      this.resumeFrom = this.snapshot = void 0;
    }
    // Only run on root
    resetTree() {
      this.root.nodes.forEach((o) => {
        var u;
        return (u = o.currentAnimation) == null ? void 0 : u.stop();
      }), this.root.nodes.forEach(uN), this.root.sharedNodes.clear();
    }
  };
}
function qoe(e) {
  e.updateLayout();
}
function $oe(e) {
  var n;
  const t = ((n = e.resumeFrom) == null ? void 0 : n.snapshot) || e.snapshot;
  if (e.isLead() && e.layout && t && e.hasListeners("didUpdate")) {
    const { layoutBox: r, measuredBox: i } = e.layout, { animationType: a } = e.options, o = t.source !== e.layout.source;
    a === "size" ? Ka((g) => {
      const x = o ? t.measuredBox[g] : t.layoutBox[g], b = ws(x);
      x.min = r[g].min, x.max = x.min + b;
    }) : hL(a, t.layoutBox, r) && Ka((g) => {
      const x = o ? t.measuredBox[g] : t.layoutBox[g], b = ws(r[g]);
      x.max = x.min + b, e.relativeTarget && !e.currentAnimation && (e.isProjectionDirty = !0, e.relativeTarget[g].max = e.relativeTarget[g].min + b);
    });
    const u = Hp();
    L0(u, r, t.layoutBox);
    const c = Hp();
    o ? L0(c, e.applyTransform(i, !0), t.measuredBox) : L0(c, r, t.layoutBox);
    const f = !uL(u);
    let p = !1;
    if (!e.resumeFrom) {
      const g = e.getClosestProjectingParent();
      if (g && !g.resumeFrom) {
        const { snapshot: x, layout: b } = g;
        if (x && b) {
          const _ = li();
          Dx(_, t.layoutBox, x.layoutBox);
          const E = li();
          Dx(E, r, b.layoutBox), cL(_, E) || (p = !0), g.options.layoutRoot && (e.relativeTarget = E, e.relativeTargetOrigin = _, e.relativeParent = g);
        }
      }
    }
    e.notifyListeners("didUpdate", {
      layout: r,
      snapshot: t,
      delta: c,
      layoutDelta: u,
      hasLayoutChanged: f,
      hasRelativeLayoutChanged: p
    });
  } else if (e.isLead()) {
    const { onExitComplete: r } = e.options;
    r && r();
  }
  e.options.transition = void 0;
}
function Foe(e) {
  e.parent && (e.isProjecting() || (e.isProjectionDirty = e.parent.isProjectionDirty), e.isSharedProjectionDirty || (e.isSharedProjectionDirty = !!(e.isProjectionDirty || e.parent.isProjectionDirty || e.parent.isSharedProjectionDirty)), e.isTransformDirty || (e.isTransformDirty = e.parent.isTransformDirty));
}
function Uoe(e) {
  e.isProjectionDirty = e.isSharedProjectionDirty = e.isTransformDirty = !1;
}
function Voe(e) {
  e.clearSnapshot();
}
function uN(e) {
  e.clearMeasurements();
}
function cN(e) {
  e.isLayoutDirty = !1;
}
function Hoe(e) {
  const { visualElement: t } = e.options;
  t && t.getProps().onBeforeLayoutMeasure && t.notify("BeforeLayoutMeasure"), e.resetTransform();
}
function fN(e) {
  e.finishAnimation(), e.targetDelta = e.relativeTarget = e.target = void 0, e.isProjectionDirty = !0;
}
function Goe(e) {
  e.resolveTargetDelta();
}
function Koe(e) {
  e.calcProjection();
}
function Yoe(e) {
  e.resetSkewAndRotation();
}
function Woe(e) {
  e.removeLeadSnapshot();
}
function dN(e, t, n) {
  e.translate = cr(t.translate, 0, n), e.scale = cr(t.scale, 1, n), e.origin = t.origin, e.originPoint = t.originPoint;
}
function hN(e, t, n, r) {
  e.min = cr(t.min, n.min, r), e.max = cr(t.max, n.max, r);
}
function Zoe(e, t, n, r) {
  hN(e.x, t.x, n.x, r), hN(e.y, t.y, n.y, r);
}
function Xoe(e) {
  return e.animationValues && e.animationValues.opacityExit !== void 0;
}
const Qoe = {
  duration: 0.45,
  ease: [0.4, 0, 0.1, 1]
}, pN = (e) => typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().includes(e), mN = pN("applewebkit/") && !pN("chrome/") ? Math.round : Qa;
function gN(e) {
  e.min = mN(e.min), e.max = mN(e.max);
}
function Joe(e) {
  gN(e.x), gN(e.y);
}
function hL(e, t, n) {
  return e === "position" || e === "preserve-aspect" && !ooe(oN(t), oN(n), 0.2);
}
function ele(e) {
  var t;
  return e !== e.root && ((t = e.scroll) == null ? void 0 : t.wasRoot);
}
const tle = dL({
  attachResizeListener: (e, t) => ey(e, "resize", t),
  measureScroll: () => ({
    x: document.documentElement.scrollLeft || document.body.scrollLeft,
    y: document.documentElement.scrollTop || document.body.scrollTop
  }),
  checkIsScrollRoot: () => !0
}), Mw = {
  current: void 0
}, pL = dL({
  measureScroll: (e) => ({
    x: e.scrollLeft,
    y: e.scrollTop
  }),
  defaultParent: () => {
    if (!Mw.current) {
      const e = new tle({});
      e.mount(window), e.setOptions({ layoutScroll: !0 }), Mw.current = e;
    }
    return Mw.current;
  },
  resetTransform: (e, t) => {
    e.style.transform = t !== void 0 ? t : "none";
  },
  checkIsScrollRoot: (e) => window.getComputedStyle(e).position === "fixed"
}), nle = {
  pan: {
    Feature: _oe
  },
  drag: {
    Feature: woe,
    ProjectionNode: pL,
    MeasureLayout: aL
  }
};
function yN(e, t, n) {
  const { props: r } = e;
  e.animationState && r.whileHover && e.animationState.setActive("whileHover", n === "Start");
  const i = "onHover" + n, a = r[i];
  a && sr.postRender(() => a(t, Cy(t)));
}
class rle extends hf {
  mount() {
    const { current: t } = this.node;
    t && (this.unmount = Nse(t, (n, r) => (yN(this.node, r, "Start"), (i) => yN(this.node, i, "End"))));
  }
  unmount() {
  }
}
class ile extends hf {
  constructor() {
    super(...arguments), this.isActive = !1;
  }
  onFocus() {
    let t = !1;
    try {
      t = this.node.current.matches(":focus-visible");
    } catch {
      t = !0;
    }
    !t || !this.node.animationState || (this.node.animationState.setActive("whileFocus", !0), this.isActive = !0);
  }
  onBlur() {
    !this.isActive || !this.node.animationState || (this.node.animationState.setActive("whileFocus", !1), this.isActive = !1);
  }
  mount() {
    this.unmount = wy(ey(this.node.current, "focus", () => this.onFocus()), ey(this.node.current, "blur", () => this.onBlur()));
  }
  unmount() {
  }
}
function vN(e, t, n) {
  const { props: r } = e;
  if (e.current instanceof HTMLButtonElement && e.current.disabled)
    return;
  e.animationState && r.whileTap && e.animationState.setActive("whileTap", n === "Start");
  const i = "onTap" + (n === "End" ? "" : n), a = r[i];
  a && sr.postRender(() => a(t, Cy(t)));
}
class sle extends hf {
  mount() {
    const { current: t } = this.node;
    t && (this.unmount = Dse(t, (n, r) => (vN(this.node, r, "Start"), (i, { success: a }) => vN(this.node, i, a ? "End" : "Cancel")), { useGlobalTarget: this.node.props.globalTapTarget }));
  }
  unmount() {
  }
}
const p5 = /* @__PURE__ */ new WeakMap(), Ow = /* @__PURE__ */ new WeakMap(), ale = (e) => {
  const t = p5.get(e.target);
  t && t(e);
}, ole = (e) => {
  e.forEach(ale);
};
function lle({ root: e, ...t }) {
  const n = e || document;
  Ow.has(n) || Ow.set(n, {});
  const r = Ow.get(n), i = JSON.stringify(t);
  return r[i] || (r[i] = new IntersectionObserver(ole, { root: e, ...t })), r[i];
}
function ule(e, t, n) {
  const r = lle(t);
  return p5.set(e, n), r.observe(e), () => {
    p5.delete(e), r.unobserve(e);
  };
}
const cle = {
  some: 0,
  all: 1
};
class fle extends hf {
  constructor() {
    super(...arguments), this.hasEnteredView = !1, this.isInView = !1;
  }
  startObserver() {
    this.unmount();
    const { viewport: t = {} } = this.node.getProps(), { root: n, margin: r, amount: i = "some", once: a } = t, o = {
      root: n ? n.current : void 0,
      rootMargin: r,
      threshold: typeof i == "number" ? i : cle[i]
    }, u = (c) => {
      const { isIntersecting: f } = c;
      if (this.isInView === f || (this.isInView = f, a && !f && this.hasEnteredView))
        return;
      f && (this.hasEnteredView = !0), this.node.animationState && this.node.animationState.setActive("whileInView", f);
      const { onViewportEnter: p, onViewportLeave: g } = this.node.getProps(), x = f ? p : g;
      x && x(c);
    };
    return ule(this.node.current, o, u);
  }
  mount() {
    this.startObserver();
  }
  update() {
    if (typeof IntersectionObserver > "u")
      return;
    const { props: t, prevProps: n } = this.node;
    ["amount", "margin", "root"].some(dle(t, n)) && this.startObserver();
  }
  unmount() {
  }
}
function dle({ viewport: e = {} }, { viewport: t = {} } = {}) {
  return (n) => e[n] !== t[n];
}
const hle = {
  inView: {
    Feature: fle
  },
  tap: {
    Feature: sle
  },
  focus: {
    Feature: ile
  },
  hover: {
    Feature: rle
  }
}, ple = {
  layout: {
    ProjectionNode: pL,
    MeasureLayout: aL
  }
}, mle = {
  ...toe,
  ...hle,
  ...nle,
  ...ple
}, mL = /* @__PURE__ */ yae(mle, Nae);
function gL(e) {
  const t = by(() => Jd(e)), { isStatic: n } = B.useContext(Hk);
  if (n) {
    const [, r] = B.useState(e);
    B.useEffect(() => t.on("change", r), []);
  }
  return t;
}
function yL(e, t) {
  const n = gL(t()), r = () => n.set(t());
  return r(), IP(() => {
    const i = () => sr.preRender(r, !1, !0), a = e.map((o) => o.on("change", i));
    return () => {
      a.forEach((o) => o()), Bu(r);
    };
  }), n;
}
function gle(e) {
  P0.current = [], e();
  const t = yL(P0.current, e);
  return P0.current = void 0, t;
}
function yle(e, t, n, r) {
  if (typeof e == "function")
    return gle(e);
  const i = typeof t == "function" ? t : Pse(t, n, r);
  return Array.isArray(e) ? xN(e, i) : xN([e], ([a]) => i(a));
}
function xN(e, t) {
  const n = by(() => []);
  return yL(e, () => {
    n.length = 0;
    const r = e.length;
    for (let i = 0; i < r; i++)
      n[i] = e[i].get();
    return t(n);
  });
}
const vL = B.createContext(null);
function vle(e, t, n, r) {
  if (!r)
    return e;
  const i = e.findIndex((p) => p.value === t);
  if (i === -1)
    return e;
  const a = r > 0 ? 1 : -1, o = e[i + a];
  if (!o)
    return e;
  const u = e[i], c = o.layout, f = cr(c.min, c.max, 0.5);
  return a === 1 && u.layout.max + n > f || a === -1 && u.layout.min + n < f ? $re(e, i, i + a) : e;
}
function xle({ children: e, as: t = "ul", axis: n = "y", onReorder: r, values: i, ...a }, o) {
  const u = by(() => mL[t]), c = [], f = B.useRef(!1), p = {
    axis: n,
    registerItem: (g, x) => {
      const b = c.findIndex((_) => g === _.value);
      b !== -1 ? c[b].layout = x[n] : c.push({ value: g, layout: x[n] }), c.sort(_le);
    },
    updateOrder: (g, x, b) => {
      if (f.current)
        return;
      const _ = vle(c, g, x, b);
      c !== _ && (f.current = !0, r(_.map(wle).filter((E) => i.indexOf(E) !== -1)));
    }
  };
  return B.useEffect(() => {
    f.current = !1;
  }), h.jsx(u, { ...a, ref: o, ignoreStrict: !0, children: h.jsx(vL.Provider, { value: p, children: e }) });
}
const ble = /* @__PURE__ */ B.forwardRef(xle);
function wle(e) {
  return e.value;
}
function _le(e, t) {
  return e.layout.min - t.layout.min;
}
function bN(e, t = 0) {
  return Ri(e) ? e : gL(t);
}
function Sle({ children: e, style: t = {}, value: n, as: r = "li", onDrag: i, layout: a = !0, ...o }, u) {
  const c = by(() => mL[r]), f = B.useContext(vL), p = {
    x: bN(t.x),
    y: bN(t.y)
  }, g = yle([p.x, p.y], ([E, k]) => E || k ? 1 : "unset"), { axis: x, registerItem: b, updateOrder: _ } = f;
  return h.jsx(c, { drag: x, ...o, dragSnapToOrigin: !0, style: { ...t, x: p.x, y: p.y, zIndex: g }, layout: a, onDrag: (E, k) => {
    const { velocity: T } = k;
    T[x] && _(n, p[x].get(), T[x]), i && i(E, k);
  }, onLayoutMeasure: (E) => b(n, E), ref: u, ignoreStrict: !0, children: e });
}
const Cle = /* @__PURE__ */ B.forwardRef(Sle), Ele = ({
  rules: e,
  selectedId: t,
  onSelect: n,
  onToggle: r,
  onDelete: i,
  onAdd: a,
  onReset: o,
  onReorder: u,
  enableNativeRegex: c,
  onToggleNativeRegex: f
}) => /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4", children: [
  /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-bold text-muted-foreground uppercase tracking-wider", children: "" }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex gap-2", children: [
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "text-[10px] text-muted-foreground hover:text-destructive transition-colors",
          onClick: o,
          children: ""
        }
      ),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "text-muted-foreground hover:text-foreground transition-colors",
          onClick: a,
          children: /* @__PURE__ */ h.jsx(nD, { size: 16 })
        }
      )
    ] })
  ] }),
  /* @__PURE__ */ h.jsx("div", { className: "bg-muted/10 border border-border/50 rounded-lg p-3 mb-2", children: /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
      /* @__PURE__ */ h.jsx("h4", { className: "text-sm font-medium", children: " Regex " }),
      /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mt-0.5 break-words", children: " SillyTavern  Regex " })
    ] }),
    /* @__PURE__ */ h.jsx(
      ui,
      {
        checked: c ?? !0,
        onChange: (p) => f == null ? void 0 : f(p)
      }
    )
  ] }) }),
  /* @__PURE__ */ h.jsx(ble, { axis: "y", values: e, onReorder: u, className: "flex flex-col gap-1", children: e.map((p) => /* @__PURE__ */ h.jsxs(
    Cle,
    {
      value: p,
      className: `
                            group p-3 rounded-lg transition-all duration-200 cursor-pointer border flex items-center gap-3
                            ${t === p.id ? "bg-accent/50 border-input" : "bg-transparent border-transparent hover:bg-muted/50 hover:border-border"}
                            ${!p.enabled && "opacity-50"}
                        `,
      onClick: () => n(p.id),
      children: [
        /* @__PURE__ */ h.jsx("div", { className: "cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground transition-colors", children: /* @__PURE__ */ h.jsx(eD, { size: 14 }) }),
        /* @__PURE__ */ h.jsx(
          "button",
          {
            className: `
                                w-8 h-8 flex items-center justify-center rounded-lg transition-colors
                                ${p.enabled ? t === p.id ? "bg-primary/20 text-primary" : "bg-muted text-primary" : "bg-muted text-muted-foreground"}
                            `,
            onClick: (g) => {
              g.stopPropagation(), r(p.id);
            },
            title: p.enabled ? "" : "",
            children: /* @__PURE__ */ h.jsx(Wx, { size: 14 })
          }
        ),
        /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ h.jsx("div", { className: "flex items-center justify-between", children: /* @__PURE__ */ h.jsx("h4", { className: `text-sm font-medium truncate ${t === p.id ? "text-foreground" : "text-muted-foreground group-hover:text-foreground"} ${!p.enabled && "opacity-50 line-through"}`, children: p.name }) }),
          /* @__PURE__ */ h.jsx("div", { className: "mt-0.5 flex items-center gap-2", children: /* @__PURE__ */ h.jsxs("code", { className: "text-[10px] bg-muted px-1 rounded text-muted-foreground font-mono truncate max-w-[120px]", children: [
            "/",
            p.pattern,
            "/",
            p.flags
          ] }) })
        ] }),
        /* @__PURE__ */ h.jsx("div", { className: `flex items-center ${t === p.id ? "opacity-100" : "opacity-0 group-hover:opacity-100"} transition-opacity`, children: /* @__PURE__ */ h.jsx(
          "button",
          {
            className: "p-1.5 hover:bg-destructive/10 rounded text-muted-foreground hover:text-destructive transition-colors",
            onClick: (g) => {
              g.stopPropagation(), i(p.id);
            },
            children: /* @__PURE__ */ h.jsx(Ja, { size: 12 })
          }
        ) })
      ]
    },
    p.id
  )) }),
  e.length === 0 && /* @__PURE__ */ h.jsx("div", { className: "text-center p-8 border border-dashed border-border rounded-lg", children: /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground", children: "" }) })
] }), kle = [
  { value: "g", label: "", description: "" },
  { value: "i", label: "", description: "" },
  { value: "m", label: "", description: "^$ " },
  { value: "s", label: "", description: ". " }
], wN = ({ rule: e, onChange: t }) => {
  var p;
  const [n, r] = B.useState(""), [i, a] = B.useState(""), [o, u] = B.useState({ valid: !0 }), c = new lb();
  B.useEffect(() => {
    const g = c.validatePattern(e.pattern, e.flags);
    u(g);
  }, [e.pattern, e.flags]), B.useEffect(() => {
    if (n && o.valid) {
      const g = c.processWithRule(n, e);
      a(g);
    } else
      a("");
  }, [n, e, o.valid]);
  const f = (g) => {
    const x = e.flags.split(""), b = x.indexOf(g);
    b >= 0 ? x.splice(b, 1) : x.push(g), t({ flags: x.join("") });
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-3", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            className: "w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",
            value: e.name,
            onChange: (g) => t({ name: g.target.value }),
            placeholder: ""
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            className: "w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",
            value: e.description || "",
            onChange: (g) => t({ description: g.target.value }),
            placeholder: ""
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "flex gap-2", children: jE.map((g) => /* @__PURE__ */ h.jsx(
          "button",
          {
            className: `flex-1 px-3 py-2 text-sm rounded-md border transition-colors ${e.scope === g.value ? "bg-primary-20 border-primary text-primary" : "bg-background border-border text-muted-foreground hover:bg-muted"}`,
            onClick: () => t({ scope: g.value }),
            title: g.description,
            children: g.label
          },
          g.value
        )) }),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground", children: (p = jE.find((g) => g.value === e.scope)) == null ? void 0 : p.description })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-3 p-4 bg-card border border-border rounded-lg", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
          o.valid ? /* @__PURE__ */ h.jsx(M5, { size: 14, className: "text-green-500" }) : /* @__PURE__ */ h.jsx(rf, { size: 14, className: "text-red-500" })
        ] }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            className: `w-full px-3 py-2 rounded-md border bg-background text-foreground font-mono text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 ${o.valid ? "border-input focus:ring-ring" : "border-red-500 focus:ring-red-500"}`,
            value: e.pattern,
            onChange: (g) => t({ pattern: g.target.value }),
            placeholder: "<think>[\\s\\S]*?</think>"
          }
        ),
        !o.valid && o.error && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-red-500", children: o.error })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "text",
            className: "w-full px-3 py-2 rounded-md border border-input bg-background text-foreground font-mono text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",
            value: e.replacement,
            onChange: (g) => t({ replacement: g.target.value }),
            placeholder: ""
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-sm font-medium text-foreground", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "flex flex-wrap gap-2", children: kle.map((g) => /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: `px-2 py-1 text-xs rounded-md border transition-colors ${e.flags.includes(g.value) ? "bg-primary-20 border-primary text-primary" : "bg-background border-border text-muted-foreground hover:bg-muted"}`,
            onClick: () => f(g.value),
            title: g.description,
            children: [
              g.label,
              " (",
              g.value,
              ")"
            ]
          },
          g.value
        )) })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-3 p-4 bg-muted-20 border border-border rounded-lg", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-sm font-medium text-foreground", children: [
        /* @__PURE__ */ h.jsx(em, { size: 14 }),
        ""
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "textarea",
          {
            className: "w-full min-h-[80px] px-3 py-2 rounded-md border border-input bg-background text-foreground text-sm resize-y focus:outline-none focus:ring-2 focus:ring-ring",
            value: n,
            onChange: (g) => r(g.target.value),
            placeholder: `
<think></think>
`
          }
        )
      ] }),
      n && o.valid && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1.5", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "min-h-[60px] px-3 py-2 rounded-md border border-border bg-background text-sm whitespace-pre-wrap", children: i || /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground italic", children: "" }) })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-start gap-2 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg text-sm text-blue-400", children: [
      /* @__PURE__ */ h.jsx(kF, { size: 16, className: "shrink-0 mt-0.5" }),
      /* @__PURE__ */ h.jsxs("div", { children: [
        /* @__PURE__ */ h.jsx("strong", { children: "" }),
        " LLM ",
        /* @__PURE__ */ h.jsx("strong", { children: "" }),
        " LLM  ",
        /* @__PURE__ */ h.jsx("code", { className: "bg-blue-500/20 px-1 rounded", children: "<think>" }),
        ""
      ] })
    ] })
  ] });
}, Tle = ({
  config: e,
  onChange: t,
  worldbookStructure: n = {},
  disabledEntries: r = {},
  onToggleWorldbook: i,
  onToggleEntry: a,
  onRefresh: o
}) => {
  const [u, c] = B.useState(/* @__PURE__ */ new Set()), [f, p] = B.useState(""), g = (T) => {
    t({
      ...e,
      [T]: !e[T]
    });
  }, x = (T) => {
    const R = new Set(u);
    R.has(T) ? R.delete(T) : R.add(T), c(R);
  }, b = (T) => {
    var R;
    return ((R = e.disabledWorldbooks) == null ? void 0 : R.includes(T)) || !1;
  }, _ = (T, R) => {
    var N;
    return ((N = r[T]) == null ? void 0 : N.includes(R)) || !1;
  }, k = Object.keys(n).sort().filter(
    (T) => T.toLowerCase().includes(f.toLowerCase()) || n[T].some(
      (R) => {
        var N, O;
        return ((N = R.names) == null ? void 0 : N.join(" ").toLowerCase().includes(f.toLowerCase())) || ((O = R.comment) == null ? void 0 : O.toLowerCase().includes(f.toLowerCase()));
      }
    )
  );
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-6", children: [
    /* @__PURE__ */ h.jsxs(Qs, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsx(
        qo,
        {
          label: "",
          description: "",
          checked: e.enabled,
          onChange: () => g("enabled")
        }
      ),
      /* @__PURE__ */ h.jsx(
        qo,
        {
          label: "",
          description: " / ",
          checked: e.includeGlobal,
          onChange: () => g("includeGlobal"),
          disabled: !e.enabled
        }
      ),
      /* @__PURE__ */ h.jsx(
        qo,
        {
          label: " EJS  (ST-Prompt-Template)",
          description: "[]  WorldInfo  EJS  ST-Prompt-Template",
          checked: e.enableEJS ?? !0,
          onChange: () => g("enableEJS"),
          disabled: !e.enabled
        }
      )
    ] }),
    e.enabled && /* @__PURE__ */ h.jsxs(Qs, { title: "", description: "", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mb-4 gap-4", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "relative flex-1", children: [
          /* @__PURE__ */ h.jsx(ta, { className: "absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground w-4 h-4" }),
          /* @__PURE__ */ h.jsx(
            "input",
            {
              type: "text",
              placeholder: "...",
              className: "w-full h-9 pl-9 pr-3 rounded-md border border-input bg-transparent text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",
              value: f,
              onChange: (T) => p(T.target.value)
            }
          )
        ] }),
        /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: o,
            className: "inline-flex items-center justify-center rounded-md w-9 h-9 hover:bg-accent hover:text-accent-foreground transition-colors",
            title: "",
            children: /* @__PURE__ */ h.jsx(Or, { size: 16 })
          }
        )
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-2", children: k.length === 0 ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center py-8 text-muted-foreground gap-2 border border-dashed rounded-lg", children: [
        /* @__PURE__ */ h.jsx(rf, { size: 24, className: "opacity-50" }),
        /* @__PURE__ */ h.jsx("span", { className: "text-sm", children: "" })
      ] }) : k.map((T) => {
        const R = b(T), N = n[T] || [], O = u.has(T), P = N.filter((z) => !_(T, z.uid)).length;
        return /* @__PURE__ */ h.jsxs("div", { className: `transition-all border-b border-border last:border-0 ${R ? "bg-muted/10 opacity-60 grayscale" : ""}`, children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between p-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 flex-1 overflow-hidden", children: [
              /* @__PURE__ */ h.jsx(
                "button",
                {
                  onClick: () => x(T),
                  className: "p-1 hover:bg-accent rounded-sm transition-colors",
                  children: O ? /* @__PURE__ */ h.jsx(Zd, { size: 16 }) : /* @__PURE__ */ h.jsx(ih, { size: 16 })
                }
              ),
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 min-w-0", children: [
                /* @__PURE__ */ h.jsx(ZO, { size: 16, className: R ? "text-muted-foreground" : "text-primary" }),
                /* @__PURE__ */ h.jsx("span", { className: `font-medium truncate ${R ? "text-muted-foreground line-through" : ""}`, children: T }),
                /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground px-2 py-0.5 bg-muted rounded-full whitespace-nowrap", children: [
                  P,
                  " / ",
                  N.length,
                  " "
                ] })
              ] })
            ] }),
            /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-4", children: /* @__PURE__ */ h.jsx(
              qo,
              {
                label: "",
                checked: !R,
                onChange: (z) => i == null ? void 0 : i(T, !z),
                compact: !0
              }
            ) })
          ] }),
          O && !R && /* @__PURE__ */ h.jsx("div", { className: "pl-4 pr-1 py-1 flex flex-col gap-0 animate-in slide-in-from-top-1 duration-200", children: N.length === 0 ? /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground text-center py-4", children: "" }) : N.map((z) => {
            const q = _(T, z.uid);
            return /* @__PURE__ */ h.jsxs("div", { className: `flex items-start justify-between py-2 -mx-2 px-2 rounded hover:bg-accent/40 transition-colors group ${q ? "bg-muted/10 opacity-60 grayscale" : ""}`, children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1 min-w-0 flex-1 pr-4", children: [
                /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 flex-wrap min-w-0", children: [
                  /* @__PURE__ */ h.jsx(
                    "div",
                    {
                      className: `w-1.5 h-1.5 rounded-full flex-shrink-0 ${z.constant ? "bg-primary" : "bg-emerald-500"}`,
                      title: z.constant ? " (Constant)" : " (Selective)"
                    }
                  ),
                  /* @__PURE__ */ h.jsx("span", { className: `text-sm font-medium truncate max-w-full ${q ? "text-muted-foreground line-through" : "text-foreground"}`, children: z.name || ` #${z.uid}` }),
                  (z.keys || []).length > 0 && /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-1 ml-auto md:ml-2 overflow-hidden max-w-full", children: [
                    z.keys.slice(0, 3).map((G, Y) => /* @__PURE__ */ h.jsx("span", { className: "text-[10px] px-1 py-0.5 rounded border border-border bg-muted/20 text-muted-foreground whitespace-nowrap overflow-hidden text-ellipsis max-w-[80px]", children: G }, Y)),
                    z.keys.length > 3 && /* @__PURE__ */ h.jsxs("span", { className: "text-[10px] text-muted-foreground", children: [
                      "+",
                      z.keys.length - 3
                    ] })
                  ] })
                ] }),
                (z.comment || z.content) && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/80 pl-3.5 break-words line-clamp-2", children: z.comment || z.content })
              ] }),
              /* @__PURE__ */ h.jsx("div", { className: "flex-shrink-0", children: /* @__PURE__ */ h.jsx(
                qo,
                {
                  label: "",
                  checked: !q,
                  onChange: (G) => a == null ? void 0 : a(T, z.uid, !G),
                  compact: !0
                }
              ) })
            ] }, z.uid);
          }) })
        ] }, T);
      }) })
    ] })
  ] });
}, Ale = ({
  macros: e,
  selectedId: t,
  onSelect: n,
  onAdd: r,
  onToggle: i,
  onDelete: a
}) => /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4 h-full", children: [
  /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-2", children: [
    /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-bold text-muted-foreground uppercase tracking-wider", children: "" }),
    /* @__PURE__ */ h.jsx(
      "button",
      {
        className: "text-muted-foreground hover:text-foreground transition-colors",
        onClick: r,
        title: "",
        children: /* @__PURE__ */ h.jsx(P5, { size: 16 })
      }
    )
  ] }),
  /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground bg-muted/30 rounded px-2 py-1.5 border border-border/50 leading-relaxed", children: [
    " ",
    /* @__PURE__ */ h.jsx("code", { className: "bg-muted px-1 rounded", children: "{{}}" }),
    " "
  ] }),
  /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1 overflow-y-auto flex-1 no-scrollbar", children: [
    e.map((o) => /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: `
                            group p-3 rounded-lg transition-all duration-200 cursor-pointer border flex items-center gap-3
                            ${t === o.id ? "bg-accent/50 border-input" : "bg-transparent border-transparent hover:bg-muted/50 hover:border-border"}
                            ${!o.enabled && "opacity-50"}
                        `,
        onClick: () => n(o),
        children: [
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: `
                                w-8 h-8 flex items-center justify-center rounded-lg transition-colors flex-shrink-0
                                ${o.enabled ? t === o.id ? "bg-primary/20 text-primary" : "bg-muted text-primary" : "bg-muted text-muted-foreground"}
                            `,
              onClick: (u) => {
                u.stopPropagation(), i(o.id);
              },
              title: o.enabled ? "" : "",
              children: /* @__PURE__ */ h.jsx(Wx, { size: 14 })
            }
          ),
          /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ h.jsx("code", { className: `text-sm font-medium truncate ${t === o.id ? "text-primary" : "text-foreground"}`, children: `{{${o.name}}}` }) }),
            /* @__PURE__ */ h.jsx("p", { className: "mt-0.5 text-[10px] text-muted-foreground truncate", children: o.content ? o.content.slice(0, 50) + (o.content.length > 50 ? "..." : "") : "()" })
          ] }),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: `p-1.5 hover:bg-destructive/10 rounded text-muted-foreground hover:text-destructive transition-colors ${t === o.id ? "opacity-100" : "opacity-0 group-hover:opacity-100"}`,
              onClick: (u) => {
                u.stopPropagation(), a(o.id);
              },
              title: "",
              children: /* @__PURE__ */ h.jsx(Ja, { size: 12 })
            }
          )
        ]
      },
      o.id
    )),
    e.length === 0 && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center py-12 text-muted-foreground gap-2 border border-dashed border-border rounded-lg", children: [
      /* @__PURE__ */ h.jsx(QO, { size: 24, className: "opacity-50" }),
      /* @__PURE__ */ h.jsx("p", { className: "text-xs", children: "" }),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          className: "text-xs text-primary hover:underline",
          onClick: r,
          children: ""
        }
      )
    ] })
  ] })
] }), _N = ({
  macro: e,
  onChange: t
}) => /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4", children: [
  /* @__PURE__ */ h.jsx(Qs, { title: "", children: /* @__PURE__ */ h.jsx(
    bs,
    {
      label: "",
      value: e.name,
      onChange: (n) => t({ name: n }),
      placeholder: "",
      required: !0,
      description: " {{}} "
    }
  ) }),
  /* @__PURE__ */ h.jsx(Qs, { title: "", children: /* @__PURE__ */ h.jsx(
    bs,
    {
      label: "",
      value: e.content,
      onChange: (n) => t({ content: n }),
      placeholder: "",
      multiline: !0,
      rows: 8
    }
  ) }),
  /* @__PURE__ */ h.jsxs("div", { className: "px-3 py-2 bg-muted/30 rounded border border-border", children: [
    /* @__PURE__ */ h.jsx("div", { className: "text-[10px] text-muted-foreground mb-2 font-medium uppercase tracking-wider", children: "" }),
    /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground leading-relaxed", children: [
      /* @__PURE__ */ h.jsxs("p", { children: [
        " ",
        /* @__PURE__ */ h.jsx("code", { className: "px-1 py-0.5 bg-muted rounded text-primary font-mono", children: `{{${e.name || ""}}}` }),
        " "
      ] }),
      /* @__PURE__ */ h.jsx("p", { className: "mt-1", children: " SillyTavern " })
    ] })
  ] })
] }), Dw = 768;
function xL() {
  const [e, t] = B.useState({
    isMobile: window.innerWidth < Dw,
    isDesktop: window.innerWidth >= Dw,
    windowWidth: window.innerWidth
  });
  return B.useEffect(() => {
    const n = () => {
      const r = window.innerWidth, i = r < Dw;
      t({
        isMobile: i,
        isDesktop: !i,
        windowWidth: r
      });
    };
    return window.addEventListener("resize", n), n(), () => window.removeEventListener("resize", n);
  }, []), e;
}
const _0 = ({
  title: e,
  onClose: t,
  children: n,
  actions: r
}) => /* @__PURE__ */ h.jsxs(
  "div",
  {
    className: "fixed inset-0 bg-background z-[200] flex flex-col animate-in slide-in-from-right-4 duration-200",
    style: { height: "100dvh", width: "100vw" },
    children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 px-4 py-3 border-b border-border shrink-0", children: [
        /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: t,
            className: "p-1 hover:bg-accent rounded",
            children: /* @__PURE__ */ h.jsx(N5, { size: 20 })
          }
        ),
        /* @__PURE__ */ h.jsx("h2", { className: "text-lg font-light flex-1", children: e }),
        r
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto p-4 no-scrollbar", children: n })
    ]
  }
), ox = ({
  list: e,
  detail: t,
  header: n,
  listWidth: r = "30%",
  mobileDetailOpen: i = !1,
  onMobileDetailClose: a,
  mobileDetailTitle: o = "",
  mobileDetailActions: u,
  className: c = "",
  style: f
}) => {
  const { isMobile: p } = xL();
  return p && i ? /* @__PURE__ */ h.jsx(
    _0,
    {
      title: o,
      onClose: a || (() => {
      }),
      actions: u,
      children: t
    }
  ) : /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col h-full overflow-hidden ${c}`, style: f, children: [
    n && /* @__PURE__ */ h.jsx("div", { className: "shrink-0 mb-4 px-1", children: n }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex-1 flex gap-6 min-h-0 overflow-hidden", children: [
      /* @__PURE__ */ h.jsx(
        "div",
        {
          className: `
                        flex flex-col overflow-y-auto no-scrollbar
                        ${p ? "w-full" : "border-r border-border/50 pr-4"}
                    `,
          style: {
            width: p ? "100%" : r,
            minWidth: p ? "auto" : "240px"
          },
          children: e
        }
      ),
      !p && /* @__PURE__ */ h.jsx("div", { className: "flex-1 flex flex-col overflow-y-auto no-scrollbar", children: t })
    ] })
  ] });
}, S0 = ({
  icon: e = HF,
  title: t,
  description: n,
  action: r,
  className: i = ""
}) => /* @__PURE__ */ h.jsxs("div", { className: `flex flex-col items-center justify-center p-8 text-muted-foreground gap-4 h-full min-h-[200px] animate-in fade-in duration-300 ${i}`, children: [
  /* @__PURE__ */ h.jsx("div", { className: "p-4 bg-muted/30 rounded-full", children: /* @__PURE__ */ h.jsx(e, { size: 48, className: "opacity-20 text-foreground" }) }),
  /* @__PURE__ */ h.jsxs("div", { className: "text-center space-y-1 max-w-[280px]", children: [
    /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-foreground", children: t }),
    n && /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/80 leading-relaxed", children: n })
  ] }),
  r && /* @__PURE__ */ h.jsx("div", { className: "mt-2", children: r })
] });
function jle(e, t) {
  const n = [];
  for (const i of e.filter((a) => a.isBuiltIn)) {
    let a = t.find((o) => o.id === i.id);
    a || (a = t.find(
      (o) => o.isBuiltIn && o.category === i.category && o.name === i.name
    )), a ? n.push({ ...a, id: i.id }) : n.push(i);
  }
  const r = t.filter((i) => !i.isBuiltIn);
  return n.push(...r), n;
}
function Nle() {
  const [e, t] = B.useState(nm), [n, r] = B.useState(null), [i, a] = B.useState(null), [o, u] = B.useState(!1);
  B.useEffect(() => {
    var N;
    const R = tt.get("apiSettings");
    if (R) {
      const O = nm();
      t({
        ...O,
        ...R,
        llmPresets: ((N = R.llmPresets) == null ? void 0 : N.length) > 0 ? R.llmPresets : O.llmPresets,
        promptTemplates: jle(
          O.promptTemplates,
          R.promptTemplates || []
        )
      });
    }
  }, []);
  const c = B.useCallback((R) => {
    t((N) => ({ ...N, selectedPresetId: R.id })), r(R);
  }, []), f = B.useCallback(() => {
    const R = U5(` ${e.llmPresets.length + 1}`);
    R.isDefault = !1, t((N) => ({
      ...N,
      llmPresets: [...N.llmPresets, R],
      selectedPresetId: R.id
    })), r(R), u(!0);
  }, [e.llmPresets.length]), p = B.useCallback((R) => {
    t((N) => ({
      ...N,
      llmPresets: N.llmPresets.map((O) => O.id === R.id ? R : O)
    })), r(R), u(!0);
  }, []), g = B.useCallback((R) => {
    const N = {
      ...R,
      id: `preset_${Date.now()}`,
      name: `${R.name} ()`,
      isDefault: !1,
      createdAt: Date.now(),
      updatedAt: Date.now()
    };
    t((O) => ({ ...O, llmPresets: [...O.llmPresets, N] })), u(!0);
  }, []), x = B.useCallback((R) => {
    R.isDefault || (t((N) => ({
      ...N,
      llmPresets: N.llmPresets.filter((O) => O.id !== R.id),
      selectedPresetId: N.selectedPresetId === R.id ? null : N.selectedPresetId
    })), r((N) => (N == null ? void 0 : N.id) === R.id ? null : N), u(!0));
  }, []), b = B.useCallback((R) => {
    a(R);
  }, []), _ = B.useCallback((R) => {
    t((N) => ({
      ...N,
      promptTemplates: [...N.promptTemplates, R]
    })), u(!0);
  }, []), E = B.useCallback((R) => {
    t((N) => ({
      ...N,
      promptTemplates: N.promptTemplates.map((O) => O.id === R.id ? R : O)
    })), a(R), u(!0);
  }, []), k = B.useCallback((R) => {
    R.isBuiltIn || (t((N) => ({
      ...N,
      promptTemplates: N.promptTemplates.filter((O) => O.id !== R.id)
    })), a((N) => (N == null ? void 0 : N.id) === R.id ? null : N), u(!0));
  }, []), T = B.useCallback(() => {
    const R = tt.get("apiSettings") || {};
    tt.set("apiSettings", {
      ...R,
      llmPresets: e.llmPresets,
      selectedPresetId: e.selectedPresetId,
      promptTemplates: e.promptTemplates
    }), u(!1);
  }, [e]);
  return {
    llmPresets: e.llmPresets,
    selectedPresetId: e.selectedPresetId,
    promptTemplates: e.promptTemplates,
    editingPreset: n,
    editingTemplate: i,
    hasChanges: o,
    selectPreset: c,
    addPreset: f,
    updatePreset: p,
    copyPreset: g,
    deletePreset: x,
    selectTemplate: b,
    addTemplate: _,
    updateTemplate: E,
    deleteTemplate: k,
    saveLLMSettings: T
  };
}
function tT() {
  const e = nm(), [t, n] = B.useState(e.vectorConfig), [r, i] = B.useState(e.rerankConfig), [a, o] = B.useState(e.recallConfig), [u, c] = B.useState(e.regexConfig), [f, p] = B.useState(e.entityExtractConfig || { enabled: !1, trigger: "floor", floorInterval: 10, keepRecentCount: 5 }), [g, x] = B.useState(e.customMacros || []), [b, _] = B.useState(!1);
  B.useEffect(() => {
    const Y = tt.get("apiSettings");
    Y && (Y.vectorConfig && n(Y.vectorConfig), Y.rerankConfig && i(Y.rerankConfig), Y.recallConfig && o(Y.recallConfig), Y.regexConfig && c(Y.regexConfig), Y.entityExtractConfig && p(Y.entityExtractConfig), Y.customMacros && x(Y.customMacros));
  }, []);
  const E = B.useCallback((Y) => {
    n(Y), _(!0);
  }, []), k = B.useCallback((Y) => {
    i(Y), _(!0);
  }, []), T = B.useCallback((Y) => {
    o(Y), _(!0);
  }, []), R = B.useCallback((Y) => {
    c(Y), _(!0);
  }, []), N = B.useCallback((Y) => {
    p(Y), _(!0);
  }, []), O = B.useCallback(() => {
    const Y = {
      id: `custom_${Date.now()}`,
      name: "",
      content: "",
      enabled: !0,
      createdAt: Date.now()
    };
    x((W) => [...W, Y]), _(!0);
  }, []), P = B.useCallback((Y, W) => {
    x((F) => F.map((X) => X.id === Y ? { ...X, ...W } : X)), _(!0);
  }, []), z = B.useCallback((Y) => {
    x((W) => W.filter((F) => F.id !== Y)), _(!0);
  }, []), q = B.useCallback((Y) => {
    x((W) => W.map((F) => F.id === Y ? { ...F, enabled: !F.enabled } : F)), _(!0);
  }, []), G = B.useCallback(() => {
    const Y = tt.get("apiSettings") || {};
    tt.set("apiSettings", {
      ...Y,
      vectorConfig: t,
      rerankConfig: r,
      recallConfig: a,
      regexConfig: u,
      entityExtractConfig: f,
      customMacros: g
    }), _(!1);
  }, [t, r, a, u, f, g]);
  return {
    vectorConfig: t,
    rerankConfig: r,
    recallConfig: a,
    regexConfig: u,
    entityExtractConfig: f,
    customMacros: g,
    updateVectorConfig: E,
    updateRerankConfig: k,
    updateRecallConfig: T,
    updateRegexConfig: R,
    updateEntityExtractConfig: N,
    addCustomMacro: O,
    updateCustomMacro: P,
    deleteCustomMacro: z,
    toggleCustomMacro: q,
    saveConfig: G,
    hasChanges: b
  };
}
function Rle() {
  const [e, t] = B.useState([...im]), [n, r] = B.useState(null), [i, a] = B.useState(!1);
  B.useEffect(() => {
    const _ = tt.getRegexRules();
    _ && _.length > 0 && t(_);
  }, []);
  const o = B.useCallback((_) => {
    const E = e.find((k) => k.id === _);
    r(E || null);
  }, [e]), u = B.useCallback(() => {
    const _ = {
      id: `rule_${Date.now()}`,
      name: "",
      pattern: "",
      replacement: "",
      enabled: !0,
      flags: "gi",
      scope: "both",
      description: ""
    };
    t((E) => [...E, _]), r(_), a(!0);
  }, []), c = B.useCallback((_) => {
    if (!n) return;
    const E = { ...n, ..._ };
    r(E), t((k) => k.map((T) => T.id === E.id ? E : T)), a(!0);
  }, [n]), f = B.useCallback((_) => {
    t((E) => E.map(
      (k) => k.id === _ ? { ...k, enabled: !k.enabled } : k
    )), a(!0);
  }, []), p = B.useCallback((_) => {
    t((E) => E.filter((k) => k.id !== _)), r((E) => (E == null ? void 0 : E.id) === _ ? null : E), a(!0);
  }, []), g = B.useCallback(() => {
    t([...im]), r(null), a(!0);
  }, []), x = B.useCallback((_) => {
    t(_), a(!0);
  }, []), b = B.useCallback(async () => {
    tt.setRegexRules(e);
    const { regexProcessor: _ } = await Promise.resolve().then(() => fk);
    _.setRules(e), a(!1);
  }, [e]);
  return {
    regexRules: e,
    editingRule: n,
    hasChanges: i,
    selectRule: o,
    addRule: u,
    updateRule: c,
    toggleRule: f,
    deleteRule: p,
    resetRules: g,
    reorderRules: x,
    saveRegexRules: b
  };
}
function Mle() {
  var T;
  const [e, t] = B.useState({}), [n, r] = B.useState({}), [i, a] = B.useState([]), [o, u] = B.useState(null), [c, f] = B.useState(((T = tt.get("apiSettings")) == null ? void 0 : T.worldbookConfig) || nm().worldbookConfig), [p, g] = B.useState(!1), x = B.useCallback(async () => {
    var z, q;
    const R = await Yr.getWorldbookStructure();
    t(R);
    const N = Zs(), O = (z = N == null ? void 0 : N.getCharWorldbookNames) == null ? void 0 : z.call(N, "current");
    if (O != null && O.primary) {
      u(O.primary);
      const G = await GE.loadState(O.primary);
      G.disabledEntries && r(G.disabledEntries);
    }
    const P = (q = tt.get("apiSettings")) == null ? void 0 : q.worldbookConfig;
    f(P), P != null && P.disabledWorldbooks && a(P.disabledWorldbooks);
  }, []);
  B.useEffect(() => {
    x();
  }, [x]);
  const b = B.useCallback((R, N) => {
    a((O) => {
      const P = N ? [.../* @__PURE__ */ new Set([...O, R])] : O.filter((z) => z !== R);
      return f((z) => z ? { ...z, disabledWorldbooks: P } : { ...nm().worldbookConfig, disabledWorldbooks: P }), P;
    }), g(!0);
  }, []), _ = B.useCallback((R, N, O) => {
    r((P) => {
      const z = P[R] || [], q = O ? [.../* @__PURE__ */ new Set([...z, N])] : z.filter((G) => G !== N);
      return { ...P, [R]: q };
    }), g(!0);
  }, []), E = B.useCallback((R) => {
    f(R), R.disabledWorldbooks && a(R.disabledWorldbooks), g(!0);
  }, []), k = B.useCallback(async () => {
    const R = tt.get("apiSettings") || {}, N = {
      ...R.worldbookConfig,
      ...c,
      disabledWorldbooks: i
    };
    tt.set("apiSettings", {
      ...R,
      worldbookConfig: N
    }), o && await GE.saveState(o, {
      disabledEntries: n
    }), g(!1);
  }, [i, n, o, c]);
  return {
    worldbookStructure: e,
    disabledEntries: n,
    disabledWorldbooks: i,
    currentCharWorldbook: o,
    worldbookConfig: c,
    toggleWorldbook: b,
    toggleEntry: _,
    updateWorldbookConfig: E,
    refreshWorldbooks: x,
    saveWorldInfo: k,
    hasChanges: p
  };
}
const Ole = [
  { id: "llm", label: "LLM ", icon: Yx },
  { id: "vector", label: "", icon: D5 },
  { id: "rerank", label: "Rerank", icon: $0 }
], Dle = {
  model: { title: "", subtitle: " LLM" },
  prompt: { title: "", subtitle: "" },
  regex: { title: "", subtitle: "" },
  worldbook: { title: "", subtitle: "" }
}, zle = ({ initialTab: e }) => {
  var Rn;
  const [t, n] = B.useState(e || "model"), r = Dle[t], [i, a] = B.useState("llm"), [o, u] = B.useState("templates"), [c, f] = B.useState(null), { isMobile: p } = xL(), [g, x] = B.useState(!1);
  B.useEffect(() => {
    p || x(!1);
  }, [p]);
  const {
    llmPresets: b,
    selectedPresetId: _,
    promptTemplates: E,
    editingPreset: k,
    editingTemplate: T,
    hasChanges: R,
    selectPreset: N,
    addPreset: O,
    updatePreset: P,
    copyPreset: z,
    deletePreset: q,
    selectTemplate: G,
    addTemplate: Y,
    updateTemplate: W,
    deleteTemplate: F,
    saveLLMSettings: X
  } = Nle(), {
    vectorConfig: me,
    rerankConfig: J,
    regexConfig: le,
    customMacros: Q,
    updateVectorConfig: oe,
    updateRerankConfig: fe,
    updateRegexConfig: ce,
    addCustomMacro: K,
    updateCustomMacro: re,
    deleteCustomMacro: de,
    toggleCustomMacro: V,
    saveConfig: ae,
    hasChanges: ge
  } = tT(), {
    regexRules: we,
    editingRule: Re,
    hasChanges: Ie,
    selectRule: Me,
    addRule: dt,
    updateRule: ut,
    toggleRule: Je,
    deleteRule: ct,
    resetRules: mt,
    reorderRules: ft,
    saveRegexRules: At
  } = Rle(), {
    worldbookConfig: xt,
    worldbookStructure: qn,
    disabledEntries: An,
    hasChanges: jn,
    updateWorldbookConfig: Yt,
    toggleWorldbook: Nn,
    toggleEntry: rn,
    refreshWorldbooks: bn,
    saveWorldInfo: $n
  } = Mle(), Le = async () => {
    R && X(), ge && ae(), Ie && At(), jn && $n();
  }, We = R || ge || Ie || jn, at = {
    llmPresets: b,
    selectedPresetId: _,
    vectorConfig: me,
    rerankConfig: J,
    promptTemplates: E,
    worldbookConfig: xt,
    regexConfig: le,
    customMacros: Q
  }, Ct = (bt) => {
    bt(), p && x(!0);
  }, Rt = () => {
    x(!1);
  }, In = ["prompt", "regex"].includes(t) || t === "model" && i === "llm";
  if (p && g) {
    if (t === "model" && i === "llm" && k)
      return /* @__PURE__ */ h.jsx(
        _0,
        {
          title: " LLM ",
          onClose: Rt,
          actions: We && /* @__PURE__ */ h.jsx("button", { className: "p-2 text-primary", onClick: Le, children: /* @__PURE__ */ h.jsx(Xc, { size: 18 }) }),
          children: /* @__PURE__ */ h.jsx(rj, { preset: k, onChange: P })
        }
      );
    if (t === "prompt") {
      if (o === "templates" && T)
        return /* @__PURE__ */ h.jsx(
          _0,
          {
            title: "",
            onClose: Rt,
            actions: We && /* @__PURE__ */ h.jsx("button", { className: "p-2 text-primary", onClick: Le, children: /* @__PURE__ */ h.jsx(Xc, { size: 18 }) }),
            children: /* @__PURE__ */ h.jsx(
              oj,
              {
                template: T,
                llmPresets: at.llmPresets,
                defaultPresetId: at.selectedPresetId,
                onChange: W
              }
            )
          }
        );
      if (o === "macros") {
        const bt = (at.customMacros || []).find(($t) => $t.id === c);
        if (bt)
          return /* @__PURE__ */ h.jsx(
            _0,
            {
              title: "",
              onClose: Rt,
              actions: We && /* @__PURE__ */ h.jsx("button", { className: "p-2 text-primary", onClick: Le, children: /* @__PURE__ */ h.jsx(Xc, { size: 18 }) }),
              children: /* @__PURE__ */ h.jsx(
                _N,
                {
                  macro: bt,
                  onChange: ($t) => re(bt.id, $t)
                }
              )
            }
          );
      }
    }
    if (t === "regex" && Re)
      return /* @__PURE__ */ h.jsx(
        _0,
        {
          title: "",
          onClose: Rt,
          actions: We && /* @__PURE__ */ h.jsx("button", { className: "p-2 text-primary", onClick: Le, children: /* @__PURE__ */ h.jsx(Xc, { size: 18 }) }),
          children: /* @__PURE__ */ h.jsx(wN, { rule: Re, onChange: ut })
        }
      );
  }
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full animate-in fade-in", children: [
    /* @__PURE__ */ h.jsx(
      xm,
      {
        breadcrumbs: ["API "],
        title: r.title,
        subtitle: r.subtitle,
        className: "mb-2"
      }
    ),
    /* @__PURE__ */ h.jsx(
      xy,
      {
        tabs: [
          { id: "model", label: "" },
          { id: "prompt", label: "" },
          { id: "regex", label: "" },
          { id: "worldbook", label: "" }
        ],
        activeTab: t,
        onChange: (bt) => n(bt),
        actions: We && /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-primary hover:text-primary-foreground hover:bg-primary border border-primary/50 rounded transition-colors",
            onClick: Le,
            children: [
              /* @__PURE__ */ h.jsx(Xc, { size: 12 }),
              ""
            ]
          }
        )
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: `flex-1 ${In ? "overflow-hidden flex flex-col" : "overflow-y-auto no-scrollbar"}`, children: [
      t === "model" && /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
        /* @__PURE__ */ h.jsx(
          DP,
          {
            tabs: Ole.map((bt) => ({ ...bt, icon: /* @__PURE__ */ h.jsx(bt.icon, { size: 14 }) })),
            activeTab: i,
            onChange: (bt) => a(bt),
            sticky: !1,
            top: 0,
            className: "!mb-4"
          }
        ),
        i === "llm" && /* @__PURE__ */ h.jsx(
          ox,
          {
            className: "h-full",
            mobileDetailOpen: !1,
            onMobileDetailClose: Rt,
            listWidth: "30%",
            list: /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-4", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
                /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-bold text-muted-foreground uppercase tracking-wider", children: "" }),
                /* @__PURE__ */ h.jsx("button", { className: "text-muted-foreground hover:text-foreground transition-colors", onClick: O, children: /* @__PURE__ */ h.jsx(P5, { size: 16 }) })
              ] }),
              /* @__PURE__ */ h.jsx("div", { className: "flex flex-col gap-1", children: at.llmPresets.map((bt) => /* @__PURE__ */ h.jsx(
                Are,
                {
                  preset: bt,
                  isSelected: at.selectedPresetId === bt.id,
                  onSelect: () => Ct(() => N(bt)),
                  onEdit: () => Ct(() => N(bt)),
                  onCopy: () => z(bt),
                  onDelete: () => q(bt)
                },
                bt.id
              )) })
            ] }),
            detail: k ? /* @__PURE__ */ h.jsx("div", { className: "animate-in fade-in slide-in-from-right-2 duration-300", children: /* @__PURE__ */ h.jsx(rj, { preset: k, onChange: P }) }) : /* @__PURE__ */ h.jsx(
              S0,
              {
                icon: Yx,
                title: "",
                description: ""
              }
            )
          }
        ),
        i === "vector" && /* @__PURE__ */ h.jsx(Ore, { config: at.vectorConfig, onChange: oe }),
        i === "rerank" && /* @__PURE__ */ h.jsx(Dre, { config: at.rerankConfig, onChange: fe })
      ] }),
      t === "prompt" && /* @__PURE__ */ h.jsx(
        ox,
        {
          listWidth: "30%",
          list: /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mb-4", children: [
              /* @__PURE__ */ h.jsx(
                "button",
                {
                  onClick: () => u("templates"),
                  className: `text-xs font-bold uppercase tracking-wider transition-colors ${o === "templates" ? "text-primary" : "text-muted-foreground hover:text-foreground"}`,
                  children: ""
                }
              ),
              /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground/30", children: "|" }),
              /* @__PURE__ */ h.jsx(
                "button",
                {
                  onClick: () => u("macros"),
                  className: `text-xs font-bold uppercase tracking-wider transition-colors ${o === "macros" ? "text-primary" : "text-muted-foreground hover:text-foreground"}`,
                  children: ""
                }
              )
            ] }),
            o === "templates" ? /* @__PURE__ */ h.jsx(
              Lre,
              {
                templates: at.promptTemplates,
                selectedId: (T == null ? void 0 : T.id) || null,
                onSelect: (bt) => Ct(() => G(bt)),
                onAdd: Y,
                onUpdate: W,
                onDelete: F
              }
            ) : /* @__PURE__ */ h.jsx(
              Ale,
              {
                macros: at.customMacros || [],
                selectedId: c,
                onSelect: (bt) => Ct(() => f(bt.id)),
                onAdd: K,
                onToggle: V,
                onDelete: de
              }
            )
          ] }),
          detail: o === "templates" ? T ? /* @__PURE__ */ h.jsx("div", { className: "animate-in fade-in slide-in-from-right-2 duration-300", children: /* @__PURE__ */ h.jsx(
            oj,
            {
              template: T,
              llmPresets: at.llmPresets,
              defaultPresetId: at.selectedPresetId,
              onChange: W
            }
          ) }) : /* @__PURE__ */ h.jsx(
            S0,
            {
              icon: sh,
              title: "",
              description: ""
            }
          ) : (() => {
            const bt = (at.customMacros || []).find(($t) => $t.id === c);
            return bt ? /* @__PURE__ */ h.jsx("div", { className: "animate-in fade-in slide-in-from-right-2 duration-300", children: /* @__PURE__ */ h.jsx(
              _N,
              {
                macro: bt,
                onChange: ($t) => re(bt.id, $t)
              }
            ) }) : /* @__PURE__ */ h.jsx(
              S0,
              {
                icon: QO,
                title: "",
                description: ""
              }
            );
          })()
        }
      ),
      t === "regex" && /* @__PURE__ */ h.jsx(
        ox,
        {
          mobileDetailOpen: !1,
          onMobileDetailClose: Rt,
          listWidth: "30%",
          list: /* @__PURE__ */ h.jsx(
            Ele,
            {
              rules: we,
              selectedId: (Re == null ? void 0 : Re.id) || null,
              onSelect: (bt) => Ct(() => Me(bt)),
              onToggle: Je,
              onDelete: ct,
              onAdd: dt,
              onReset: mt,
              onReorder: ft,
              enableNativeRegex: ((Rn = at.regexConfig) == null ? void 0 : Rn.enableNativeRegex) ?? !0,
              onToggleNativeRegex: (bt) => ce({
                ...at.regexConfig,
                enableNativeRegex: bt
              })
            }
          ),
          detail: Re ? /* @__PURE__ */ h.jsx("div", { className: "animate-in fade-in slide-in-from-right-2 duration-300", children: /* @__PURE__ */ h.jsx(wN, { rule: Re, onChange: ut }) }) : /* @__PURE__ */ h.jsx(
            S0,
            {
              icon: nD,
              title: "",
              description: ""
            }
          )
        }
      ),
      t === "worldbook" && /* @__PURE__ */ h.jsx("div", { className: "max-w-2xl py-4", children: /* @__PURE__ */ h.jsx(
        Tle,
        {
          config: at.worldbookConfig || { enabled: !1, includeGlobal: !1, disabledWorldbooks: [] },
          onChange: Yt,
          worldbookStructure: qn,
          disabledEntries: An,
          onToggleWorldbook: Nn,
          onToggleEntry: rn,
          onRefresh: bn
        }
      ) })
    ] })
  ] });
}, Ple = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  APIPresets: zle
}, Symbol.toStringTag, { value: "Module" })), Ile = () => {
  const [e, t] = B.useState("claudeDark");
  B.useEffect(() => {
    t(ef.getTheme());
  }, []);
  const n = (i) => {
    ef.setTheme(i), tt.set("theme", i), t(i);
  }, r = Object.entries(Y1).map(([i, a]) => {
    let o = a.colors.background, u = a.colors.primary;
    return {
      id: i,
      name: a.name,
      background: o,
      sidebar: a.colors.sidebar,
      // Add sidebar color
      primary: u
    };
  });
  return /* @__PURE__ */ h.jsxs("div", { className: "space-y-4", children: [
    /* @__PURE__ */ h.jsx("h3", { className: "text-lg font-medium", children: "" }),
    /* @__PURE__ */ h.jsx("div", { className: "grid grid-cols-2 sm:grid-cols-4 gap-4", children: r.map((i) => /* @__PURE__ */ h.jsxs(
      "button",
      {
        onClick: () => n(i.id),
        className: `
                            relative group flex flex-col items-center gap-2 p-3 rounded-xl border-2 transition-all
                            ${e === i.id ? "border-primary bg-accent/10" : "border-transparent hover:bg-accent/5"}
                        `,
        children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-center -space-x-3 mb-2", children: [
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "w-8 h-8 rounded-full border border-border shadow-sm z-10",
                style: { background: i.background },
                title: "Background"
              }
            ),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "w-8 h-8 rounded-full border border-border shadow-sm z-20",
                style: { background: i.sidebar },
                title: "Sidebar"
              }
            ),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "w-8 h-8 rounded-full border border-border shadow-sm z-30 ring-2 ring-background",
                style: { background: i.primary },
                title: "Primary"
              }
            )
          ] }),
          /* @__PURE__ */ h.jsx("span", { className: `text-sm font-medium ${e === i.id ? "text-primary" : "text-muted-foreground"}`, children: i.name }),
          e === i.id && /* @__PURE__ */ h.jsx("div", { className: "absolute top-2 right-2 w-2 h-2 rounded-full bg-primary" })
        ]
      },
      i.id
    )) })
  ] });
}, Lle = () => {
  var u, c, f, p, g, x;
  const [e, t] = B.useState(((u = tt.getSettings().summarizerConfig) == null ? void 0 : u.previewEnabled) ?? !0), [n, r] = B.useState(((c = tt.getSettings().preprocessingConfig) == null ? void 0 : c.preview) ?? Y0.preview), [, i] = B.useState({});
  B.useEffect(() => {
    tt.loadSettings();
  }, []);
  const [a, o] = B.useState(tt.getSettings().linkedDeletion);
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full animate-in fade-in", children: [
    /* @__PURE__ */ h.jsx(
      xm,
      {
        breadcrumbs: [""],
        title: "",
        subtitle: ""
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "p-6 space-y-8", children: [
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
        /* @__PURE__ */ h.jsx(Ile, {})
      ] }),
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: " (Glass Effect)" }),
        /* @__PURE__ */ h.jsxs("div", { className: "bg-muted/30 border border-border rounded-lg p-4 space-y-6", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-3", children: [
            /* @__PURE__ */ h.jsx("div", { className: "flex items-center gap-3 min-w-0 flex-1", children: /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
              /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground truncate", children: "" }),
              /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground line-clamp-2", children: "" })
            ] }) }),
            /* @__PURE__ */ h.jsx(
              ui,
              {
                checked: ((f = tt.getSettings().glassSettings) == null ? void 0 : f.enabled) ?? !0,
                onChange: (b) => {
                  const E = {
                    ...tt.getSettings().glassSettings,
                    enabled: b
                  };
                  tt.set("glassSettings", E), Promise.resolve().then(() => X1).then(({ ThemeManager: k }) => {
                    k.setTheme(k.getTheme());
                  }), i({});
                }
              }
            )
          ] }),
          (((p = tt.getSettings().glassSettings) == null ? void 0 : p.enabled) ?? !0) && /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            /* @__PURE__ */ h.jsx(
              Rr,
              {
                label: " (Opacity)",
                description: "",
                value: ((g = tt.getSettings().glassSettings) == null ? void 0 : g.opacity) ?? 0.8,
                onChange: (b) => {
                  const E = {
                    ...tt.getSettings().glassSettings,
                    opacity: b
                  };
                  tt.set("glassSettings", E), Promise.resolve().then(() => X1).then(({ ThemeManager: k }) => {
                    k.setTheme(k.getTheme());
                  }), i({});
                },
                min: 0,
                max: 1,
                step: 0.05,
                showSlider: !0
              }
            ),
            /* @__PURE__ */ h.jsx(
              Rr,
              {
                label: " (Blur)",
                description: " (px)",
                value: ((x = tt.getSettings().glassSettings) == null ? void 0 : x.blur) ?? 10,
                onChange: (b) => {
                  const E = {
                    ...tt.getSettings().glassSettings,
                    blur: b
                  };
                  tt.set("glassSettings", E), Promise.resolve().then(() => X1).then(({ ThemeManager: k }) => {
                    k.setTheme(k.getTheme());
                  }), i({});
                },
                min: 0,
                max: 50,
                step: 1,
                showSlider: !0
              }
            )
          ] })
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "bg-muted/30 border border-border rounded-lg p-4", children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-3", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 min-w-0 flex-1", children: [
            /* @__PURE__ */ h.jsx("div", { className: "p-2 rounded-lg bg-primary/10 text-primary flex-shrink-0", children: /* @__PURE__ */ h.jsx(QT, { size: 20 }) }),
            /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
              /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground truncate", children: "" }),
              /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground line-clamp-2", children: "" })
            ] })
          ] }),
          /* @__PURE__ */ h.jsx(
            ui,
            {
              checked: e,
              onChange: (b) => {
                t(b), Bo.updateConfig({ previewEnabled: b });
              }
            }
          )
        ] }) })
      ] }),
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
        /* @__PURE__ */ h.jsx("div", { className: "bg-muted/30 border border-border rounded-lg p-4", children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-3", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 min-w-0 flex-1", children: [
            /* @__PURE__ */ h.jsx("div", { className: "p-2 rounded-lg bg-primary/10 text-primary flex-shrink-0", children: /* @__PURE__ */ h.jsx(QT, { size: 20 }) }),
            /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
              /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground truncate", children: "" }),
              /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground line-clamp-2", children: "" })
            ] })
          ] }),
          /* @__PURE__ */ h.jsx(
            ui,
            {
              checked: n,
              onChange: (b) => {
                r(b);
                const _ = Hd.getConfig();
                Hd.saveConfig({ ..._, preview: b });
              }
            }
          )
        ] }) })
      ] }),
      /* @__PURE__ */ h.jsxs("section", { children: [
        /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4", children: "" }),
        /* @__PURE__ */ h.jsxs("div", { className: "bg-muted/30 border border-border rounded-lg p-4 space-y-4", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 min-w-0 flex-1", children: [
              /* @__PURE__ */ h.jsx("div", { className: "p-2 rounded-lg bg-red-500/10 text-red-500 flex-shrink-0", children: /* @__PURE__ */ h.jsx(Ja, { size: 20 }) }),
              /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
                /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground truncate", children: "" }),
                /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground line-clamp-2", children: "/" })
              ] })
            ] }),
            /* @__PURE__ */ h.jsx(
              ui,
              {
                checked: a.enabled,
                onChange: (b) => {
                  const _ = { ...a, enabled: b };
                  o(_), tt.set("linkedDeletion", _);
                }
              }
            )
          ] }),
          a.enabled && /* @__PURE__ */ h.jsxs("div", { className: "pl-14 space-y-3 border-t border-border pt-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-sm text-muted-foreground", children: "" }),
              /* @__PURE__ */ h.jsx(
                ui,
                {
                  checked: a.showConfirmation,
                  onChange: (b) => {
                    const _ = { ...a, showConfirmation: b };
                    o(_), tt.set("linkedDeletion", _);
                  },
                  className: "scale-90"
                }
              )
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-3", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
                /* @__PURE__ */ h.jsx("span", { className: "text-sm text-muted-foreground block truncate", children: " Worldbook" }),
                /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/60 line-clamp-2", children: ":  Worldbook " })
              ] }),
              /* @__PURE__ */ h.jsx(
                ui,
                {
                  checked: a.deleteChatWorldbook ?? !1,
                  onChange: (b) => {
                    const _ = { ...a, deleteChatWorldbook: b };
                    o(_), tt.set("linkedDeletion", _);
                  },
                  className: "scale-90"
                }
              )
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsx(qle, {}),
        /* @__PURE__ */ h.jsx(Ble, {})
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "mt-8 pt-8 border-t border-border", children: /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center text-muted-foreground gap-2 py-8 opacity-50", children: [
        /* @__PURE__ */ h.jsx(F0, { size: 32 }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "..." })
      ] }) })
    ] })
  ] });
}, Ble = () => {
  const [e, t] = B.useState(tt.getSettings().syncConfig || { enabled: !1, autoSync: !0 }), [n, r] = B.useState("idle"), [i, a] = B.useState(""), [o, u] = B.useState(0), c = (p) => (g) => {
    const x = { ...e, [p]: g };
    t(x), tt.set("syncConfig", x);
  }, f = async () => {
    try {
      r("check"), a("...");
      const { getSTContext: p } = await Promise.resolve().then(() => vV);
      if (!p().chatId) {
        alert(""), r("idle"), a("");
        return;
      }
      const g = p().chatId;
      r("syncing"), a("...");
      const { syncService: x } = await Promise.resolve().then(() => VV), b = await x.autoSync(g);
      switch (u(Date.now()), b) {
        case "downloaded":
          r("success"), a("");
          break;
        case "uploaded":
          r("success"), a("");
          break;
        case "synced":
          r("success"), a("");
          break;
        case "ignored":
          r("idle"), a("");
          break;
        case "error":
        default:
          r("error"), a("");
          break;
      }
      b !== "error" && setTimeout(() => {
        r("idle"), a("");
      }, 3e3);
    } catch (p) {
      console.error(p), r("error"), a("");
    }
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "bg-muted/30 border border-border rounded-lg p-4 mt-4", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between gap-3 mb-4", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 min-w-0 flex-1", children: [
        /* @__PURE__ */ h.jsx("div", { className: "p-2 rounded-lg bg-blue-500/10 text-blue-500 flex-shrink-0", children: /* @__PURE__ */ h.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [
          /* @__PURE__ */ h.jsx("path", { d: "M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" }),
          /* @__PURE__ */ h.jsx("path", { d: "M3 3v5h5" }),
          /* @__PURE__ */ h.jsx("path", { d: "M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" }),
          /* @__PURE__ */ h.jsx("path", { d: "M16 16h5v5" })
        ] }) }),
        /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground truncate", children: " (Beta)" }),
            n !== "idle" && /* @__PURE__ */ h.jsx("span", { className: `text-xs ${n === "error" ? "text-red-500" : n === "success" ? "text-green-500" : "text-blue-500 animate-pulse"}`, children: i })
          ] }),
          /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground line-clamp-2", children: " WebLLM " })
        ] })
      ] }),
      /* @__PURE__ */ h.jsx(
        ui,
        {
          checked: e.enabled,
          onChange: c("enabled")
        }
      )
    ] }),
    e.enabled && /* @__PURE__ */ h.jsxs("div", { className: "pl-14 space-y-3 border-t border-border pt-3", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-sm text-muted-foreground", children: "" }),
          /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/60", children: "3" })
        ] }),
        /* @__PURE__ */ h.jsx(
          ui,
          {
            checked: e.autoSync,
            onChange: c("autoSync"),
            className: "scale-90"
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-sm text-muted-foreground", children: "" }),
          /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/60", children: o > 0 ? new Date(o).toLocaleString() : "" })
        ] }),
        /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: f,
            disabled: n === "syncing",
            className: "px-3 py-1.5 text-xs font-medium rounded-md bg-background border border-border hover:bg-muted transition-colors disabled:opacity-50",
            children: ""
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "mt-2 text-xs text-muted-foreground/60 p-2 bg-background/50 rounded", children: [
        /* @__PURE__ */ h.jsx("p", { children: " Beta " }),
        /* @__PURE__ */ h.jsxs("ul", { className: "list-disc pl-4 mt-1 space-y-1", children: [
          /* @__PURE__ */ h.jsx("li", { children: ": `data/default-user/vectors/webllm`" }),
          /* @__PURE__ */ h.jsx("li", { children: '""' }),
          /* @__PURE__ */ h.jsx("li", { children: "" })
        ] })
      ] })
    ] })
  ] });
}, qle = () => {
  const e = Zi(), [t, n] = B.useState({}), r = async () => {
    if (!fi()) {
      alert("");
      return;
    }
    if (confirm(` IndexedDB 
`) && confirm(""))
      try {
        await e.clearChatDatabase(), alert(""), n({});
      } catch (o) {
        alert(": " + o);
      }
  }, i = async () => {
    if (!fi()) {
      alert("");
      return;
    }
    if (confirm(`
 Engram `) && confirm(""))
      try {
        await e.deleteChatDatabase(), alert(""), n({});
      } catch (o) {
        alert(": " + o);
      }
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "bg-muted/30 border border-border rounded-lg p-4 mt-4 space-y-4", children: [
    /* @__PURE__ */ h.jsx("div", { className: "flex items-center justify-between gap-3", children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 min-w-0 flex-1", children: [
      /* @__PURE__ */ h.jsx("div", { className: "p-2 rounded-lg bg-orange-500/10 text-orange-500 flex-shrink-0", children: /* @__PURE__ */ h.jsx(Or, { size: 20 }) }),
      /* @__PURE__ */ h.jsxs("div", { className: "min-w-0 flex-1", children: [
        /* @__PURE__ */ h.jsx("h4", { className: "font-medium text-foreground truncate", children: "" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground line-clamp-2", children: "" })
      ] })
    ] }) }),
    /* @__PURE__ */ h.jsxs("div", { className: "pl-14 flex gap-4", children: [
      /* @__PURE__ */ h.jsx(
        "button",
        {
          onClick: r,
          className: "px-3 py-1.5 text-xs font-medium rounded-md bg-background border border-border hover:bg-muted text-yellow-600 transition-colors",
          children: " (DB)"
        }
      ),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          onClick: i,
          className: "px-3 py-1.5 text-xs font-medium rounded-md bg-background border border-border hover:bg-red-500/10 text-red-600 transition-colors",
          children: " ()"
        }
      )
    ] })
  ] });
}, $le = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Settings: Lle
}, Symbol.toStringTag, { value: "Module" }));
function Fle({ score: e }) {
  const t = Math.round(e * 5);
  return /* @__PURE__ */ h.jsx("div", { className: "flex gap-0.5", children: [0, 1, 2, 3, 4].map((n) => /* @__PURE__ */ h.jsx(
    "span",
    {
      className: `w-1.5 h-1.5 rounded-full ${n < t ? "bg-primary" : "bg-muted"}`
    },
    n
  )) });
}
function Ule({ isEmbedded: e }) {
  return e ? /* @__PURE__ */ h.jsxs(
    "span",
    {
      className: "inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-primary/10 text-primary rounded text-[10px] font-medium",
      title: "",
      children: [
        /* @__PURE__ */ h.jsx(sf, { size: 10 }),
        /* @__PURE__ */ h.jsx("span", { children: "" })
      ]
    }
  ) : null;
}
function Vle({ event: e }) {
  const t = e.structured_kv, n = [];
  return t.time_anchor && n.push(t.time_anchor), t.location && n.push(t.location), t.role && t.role.length > 0 && n.push(t.role.join(", ")), n.length === 0 ? null : /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground truncate", children: [
    "(",
    n.join(" | "),
    ")"
  ] });
}
const Hle = ({
  event: e,
  isSelected: t = !1,
  isCompact: n = !1,
  onSelect: r,
  onCheck: i,
  checked: a = !1,
  hasChanges: o = !1
}) => {
  var g;
  const u = e.structured_kv, c = e.summary.split(`
`), f = u.event || ((g = c[0]) == null ? void 0 : g.replace(/:\s*$/, "")) || "", p = c.length > 1 ? c.slice(1).join(" ").trim() : e.summary;
  return n ? /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: `
                    flex items-center gap-3 p-3 cursor-pointer
                    border-b border-border
                    transition-colors duration-150
                    ${t ? "border-l-2 border-l-primary bg-transparent" : "hover:bg-accent/30"}
                `,
      onClick: r,
      children: [
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "checkbox",
            checked: a,
            onChange: (x) => {
              x.stopPropagation(), i == null || i(x.target.checked);
            },
            className: "w-4 h-4 rounded border-border accent-primary"
          }
        ),
        /* @__PURE__ */ h.jsxs("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ h.jsx("span", { className: "text-xs font-medium text-primary", children: f }),
            e.is_embedded && /* @__PURE__ */ h.jsx(sf, { size: 10, className: "text-primary" }),
            /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground", children: e.significance_score.toFixed(1) })
          ] }),
          /* @__PURE__ */ h.jsxs("p", { className: "text-sm text-foreground truncate mt-1", children: [
            p.substring(0, 50),
            "..."
          ] })
        ] }),
        /* @__PURE__ */ h.jsx(ih, { size: 16, className: "text-muted-foreground" })
      ]
    }
  ) : /* @__PURE__ */ h.jsxs(
    "div",
    {
      className: `
                p-4 cursor-pointer rounded-lg
                transition-all duration-150
                ${t ? "border border-primary bg-transparent" : "border border-transparent hover:border-border/50"}
            `,
      onClick: r,
      children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 mb-2", children: [
          /* @__PURE__ */ h.jsx(
            "input",
            {
              type: "checkbox",
              checked: a,
              onChange: (x) => {
                x.stopPropagation(), i == null || i(x.target.checked);
              },
              className: "w-4 h-4 rounded border-border accent-primary"
            }
          ),
          /* @__PURE__ */ h.jsx("span", { className: "text-xs font-medium text-primary", children: f }),
          /* @__PURE__ */ h.jsx(Ule, { isEmbedded: e.is_embedded }),
          o && /* @__PURE__ */ h.jsx("span", { className: "w-2 h-2 rounded-full bg-yellow-500", title: "" }),
          /* @__PURE__ */ h.jsx("div", { className: "flex-1" }),
          /* @__PURE__ */ h.jsx(Fle, { score: e.significance_score })
        ] }),
        /* @__PURE__ */ h.jsx(Vle, { event: e }),
        /* @__PURE__ */ h.jsx("p", { className: "text-sm text-foreground mt-1 line-clamp-2", children: p }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 mt-2 text-xs text-muted-foreground", children: [
          /* @__PURE__ */ h.jsxs("span", { children: [
            "Level ",
            e.level
          ] }),
          e.source_range && /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            /* @__PURE__ */ h.jsx("span", { children: "" }),
            /* @__PURE__ */ h.jsxs("span", { children: [
              ": ",
              e.source_range.start_index,
              "-",
              e.source_range.end_index,
              ""
            ] })
          ] })
        ] })
      ]
    }
  );
}, m0 = {
  background: "transparent",
  backgroundColor: "transparent",
  border: "none",
  borderBottom: "1px solid var(--border)",
  borderRadius: 0,
  boxShadow: "none",
  outline: "none",
  padding: "8px 0",
  fontSize: "14px",
  width: "100%",
  color: "var(--foreground, inherit)"
};
function SN(e) {
  const t = [];
  return e.time_anchor && e.location ? t.push(`${e.time_anchor}${e.location}`) : e.time_anchor ? t.push(`${e.time_anchor}`) : e.location && t.push(`${e.location}`), e.role && e.role.length > 0 && t.push(e.role.join("")), e.event && t.push(e.event), e.logic && e.logic.length > 0 && t.push(`(${e.logic.join("/")})`), t.join(" ");
}
const m5 = B.forwardRef(({
  event: e,
  isFullScreen: t = !1,
  onSave: n,
  onDelete: r,
  onClose: i
}, a) => {
  const [o, u] = B.useState(""), [c, f] = B.useState(""), [p, g] = B.useState(""), [x, b] = B.useState(""), [_, E] = B.useState(""), [k, T] = B.useState(""), [R, N] = B.useState(0.5), [O, P] = B.useState(!1), [z, q] = B.useState(null), G = B.useRef(!1), Y = B.useRef(!0), W = B.useRef(null);
  B.useEffect(() => () => {
    Y.current = !1, W.current && clearTimeout(W.current);
  }, []), B.useEffect(() => {
    var ce, K;
    e && e.id !== z && (u(e.summary), f(e.structured_kv.event || ""), g(e.structured_kv.time_anchor || ""), b(e.structured_kv.location || ""), E(((ce = e.structured_kv.role) == null ? void 0 : ce.join(", ")) || ""), T(((K = e.structured_kv.logic) == null ? void 0 : K.join(", ")) || ""), N(e.significance_score), P(!1), q(e.id));
  }, [e, z]);
  const F = () => {
    confirm("") && (r == null || r(e.id));
  }, X = B.useCallback((ce = {}) => {
    var ae;
    if (!e) return;
    const K = {
      eventType: ce.eventType ?? c,
      timeAnchor: ce.timeAnchor ?? p,
      location: ce.location ?? x,
      roleText: ce.roleText ?? _,
      logicText: ce.logicText ?? k,
      score: ce.score ?? R
    }, re = (ge) => ge.split(",").map((we) => we.trim()).filter(Boolean), de = {
      event: K.eventType,
      time_anchor: K.timeAnchor,
      location: K.location,
      role: re(K.roleText),
      logic: re(K.logicText),
      causality: ((ae = e.structured_kv) == null ? void 0 : ae.causality) || ""
    }, V = SN(de);
    n == null || n(e.id, {
      summary: V || o,
      structured_kv: { ...e.structured_kv, ...de },
      significance_score: K.score
    });
  }, [e, c, p, x, _, k, R, o, n]);
  B.useImperativeHandle(a, () => ({
    save: () => X(),
    isDirty: () => O
  }), [X, O]);
  const me = () => {
    G.current = !0;
  }, J = (ce, K, re) => {
    if (G.current = !1, !Y.current) return;
    const de = ce.currentTarget.value;
    K(de), P(!0), X({ [re]: de });
  }, le = (ce, K, re) => {
    ce(K), P(!0), G.current || X({ [re]: K });
  }, Q = () => {
    W.current && clearTimeout(W.current), W.current = window.setTimeout(() => {
      Y.current && O && X();
    }, 50);
  }, oe = (ce) => {
    N(ce), P(!0), X({ score: ce });
  };
  if (!e)
    return /* @__PURE__ */ h.jsx("div", { className: "flex flex-col items-center justify-center h-full text-muted-foreground gap-2 p-8", children: /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "" }) });
  const fe = /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
      /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
      /* @__PURE__ */ h.jsx(
        "input",
        {
          type: "text",
          value: c,
          onChange: (ce) => le(f, ce.target.value, "eventType"),
          onCompositionStart: me,
          onCompositionEnd: (ce) => J(ce, f, "eventType"),
          onBlur: Q,
          style: m0,
          className: "placeholder:text-muted-foreground/40 focus:border-primary transition-colors",
          placeholder: ""
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between items-center", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
        /* @__PURE__ */ h.jsx(
          "button",
          {
            onClick: () => {
              const ce = SN({
                event: c,
                time_anchor: p,
                location: x,
                role: _.split(",").map((K) => K.trim()).filter(Boolean),
                logic: k.split(",").map((K) => K.trim()).filter(Boolean)
              });
              u(ce), P(!0), X({ summary: ce });
            },
            className: "text-[10px] text-primary hover:underline",
            children: " KV "
          }
        )
      ] }),
      /* @__PURE__ */ h.jsx(
        bs,
        {
          label: "",
          value: o,
          onChange: (ce) => {
            var K;
            u(ce), P(!0), n == null || n(e.id, {
              summary: ce,
              structured_kv: {
                event: c,
                time_anchor: p,
                location: x,
                role: _.split(",").map((re) => re.trim()).filter(Boolean),
                logic: k.split(",").map((re) => re.trim()).filter(Boolean),
                causality: ((K = e.structured_kv) == null ? void 0 : K.causality) || ""
              },
              significance_score: R
            });
          },
          multiline: !0,
          rows: 6,
          placeholder: "...",
          className: "font-mono text-sm"
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
      /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
      /* @__PURE__ */ h.jsx(
        "input",
        {
          type: "text",
          value: p,
          onChange: (ce) => le(g, ce.target.value, "timeAnchor"),
          onCompositionStart: me,
          onCompositionEnd: (ce) => J(ce, g, "timeAnchor"),
          onBlur: Q,
          style: m0,
          className: "placeholder:text-muted-foreground/40 focus:border-primary transition-colors",
          placeholder: "102344"
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
      /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
      /* @__PURE__ */ h.jsx(
        "input",
        {
          type: "text",
          value: x,
          onChange: (ce) => le(b, ce.target.value, "location"),
          onCompositionStart: me,
          onCompositionEnd: (ce) => J(ce, b, "location"),
          onBlur: Q,
          style: m0,
          className: "placeholder:text-muted-foreground/40 focus:border-primary transition-colors",
          placeholder: ""
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
      /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
      /* @__PURE__ */ h.jsx(
        "input",
        {
          type: "text",
          value: _,
          onChange: (ce) => le(E, ce.target.value, "roleText"),
          onCompositionStart: me,
          onCompositionEnd: (ce) => J(ce, E, "roleText"),
          onBlur: Q,
          style: m0,
          className: "placeholder:text-muted-foreground/40 focus:border-primary transition-colors",
          placeholder: "{{user}}, "
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
      /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
      /* @__PURE__ */ h.jsx(
        "input",
        {
          type: "text",
          value: k,
          onChange: (ce) => le(T, ce.target.value, "logicText"),
          onCompositionStart: me,
          onCompositionEnd: (ce) => J(ce, T, "logicText"),
          onBlur: Q,
          style: m0,
          className: "placeholder:text-muted-foreground/40 focus:border-primary transition-colors",
          placeholder: ", "
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-2", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between items-center", children: [
        /* @__PURE__ */ h.jsx("label", { className: "text-xs text-muted-foreground", children: "" }),
        /* @__PURE__ */ h.jsx("span", { className: "text-xs font-mono text-foreground", children: R.toFixed(2) })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute inset-x-0 h-[1px]",
            style: { backgroundColor: "var(--border)" }
          }
        ),
        /* @__PURE__ */ h.jsx(
          "div",
          {
            className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
            style: { left: `${R * 100}%`, transform: "translate(-50%, -50%)" }
          }
        ),
        /* @__PURE__ */ h.jsx(
          "input",
          {
            type: "range",
            min: "0",
            max: "1",
            step: "0.05",
            value: R,
            onChange: (ce) => oe(parseFloat(ce.target.value)),
            className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
            style: { appearance: "none", WebkitAppearance: "none" }
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ h.jsx(ci, { spacing: "md" }),
    /* @__PURE__ */ h.jsxs("div", { className: "space-y-1 text-xs text-muted-foreground", children: [
      /* @__PURE__ */ h.jsxs("p", { children: [
        "ID: ",
        /* @__PURE__ */ h.jsxs("span", { className: "font-mono", children: [
          e.id.substring(0, 8),
          "..."
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs("p", { children: [
        "Level: ",
        e.level
      ] }),
      e.source_range && /* @__PURE__ */ h.jsxs("p", { children: [
        ": ",
        e.source_range.start_index,
        "-",
        e.source_range.end_index,
        ""
      ] }),
      /* @__PURE__ */ h.jsxs("p", { children: [
        ": ",
        new Date(e.timestamp).toLocaleString()
      ] }),
      /* @__PURE__ */ h.jsxs("p", { children: [
        ":",
        e.is_archived && /* @__PURE__ */ h.jsx("span", { className: "ml-1 text-yellow-500", children: "" }),
        e.is_embedded && /* @__PURE__ */ h.jsx("span", { className: "ml-1 text-green-500", children: "" }),
        !e.is_archived && !e.is_embedded && /* @__PURE__ */ h.jsx("span", { className: "ml-1", children: "" })
      ] })
    ] })
  ] });
  return t ? /* @__PURE__ */ h.jsxs("div", { className: "fixed inset-0 bg-background z-50 flex flex-col", style: { height: "100dvh" }, children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3 px-4 py-3 border-b border-border shrink-0", children: [
      /* @__PURE__ */ h.jsx(
        "button",
        {
          onClick: i,
          className: "p-1 hover:bg-accent rounded",
          children: /* @__PURE__ */ h.jsx(N5, { size: 20 })
        }
      ),
      /* @__PURE__ */ h.jsx("h2", { className: "text-lg font-light flex-1", children: "" }),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          onClick: F,
          className: "p-2 text-destructive hover:bg-destructive/10 rounded",
          children: /* @__PURE__ */ h.jsx(Ja, { size: 18 })
        }
      )
    ] }),
    /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto p-4 space-y-4", children: fe }),
    /* @__PURE__ */ h.jsx("div", { className: "p-4 border-t border-border shrink-0", children: /* @__PURE__ */ h.jsx(
      "button",
      {
        onClick: i,
        className: "w-full py-2 text-sm border border-border rounded-md hover:bg-accent",
        children: ""
      }
    ) })
  ] }) : /* @__PURE__ */ h.jsxs("div", { className: "h-full flex flex-col", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 pb-4 border-b border-border shrink-0", children: [
      /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-primary flex-1", children: "" }),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          onClick: F,
          className: "p-1.5 text-destructive hover:bg-destructive/10 rounded",
          title: "",
          children: /* @__PURE__ */ h.jsx(Ja, { size: 16 })
        }
      )
    ] }),
    /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto py-4 space-y-4 no-scrollbar", children: fe })
  ] });
});
m5.displayName = "EventEditor";
function Zr(e) {
  if (typeof e == "string" || typeof e == "number") return "" + e;
  let t = "";
  if (Array.isArray(e))
    for (let n = 0, r; n < e.length; n++)
      (r = Zr(e[n])) !== "" && (t += (t && " ") + r);
  else
    for (let n in e)
      e[n] && (t += (t && " ") + n);
  return t;
}
var Gle = { value: () => {
} };
function gb() {
  for (var e = 0, t = arguments.length, n = {}, r; e < t; ++e) {
    if (!(r = arguments[e] + "") || r in n || /[\s.]/.test(r)) throw new Error("illegal type: " + r);
    n[r] = [];
  }
  return new lx(n);
}
function lx(e) {
  this._ = e;
}
function Kle(e, t) {
  return e.trim().split(/^|\s+/).map(function(n) {
    var r = "", i = n.indexOf(".");
    if (i >= 0 && (r = n.slice(i + 1), n = n.slice(0, i)), n && !t.hasOwnProperty(n)) throw new Error("unknown type: " + n);
    return { type: n, name: r };
  });
}
lx.prototype = gb.prototype = {
  constructor: lx,
  on: function(e, t) {
    var n = this._, r = Kle(e + "", n), i, a = -1, o = r.length;
    if (arguments.length < 2) {
      for (; ++a < o; ) if ((i = (e = r[a]).type) && (i = Yle(n[i], e.name))) return i;
      return;
    }
    if (t != null && typeof t != "function") throw new Error("invalid callback: " + t);
    for (; ++a < o; )
      if (i = (e = r[a]).type) n[i] = CN(n[i], e.name, t);
      else if (t == null) for (i in n) n[i] = CN(n[i], e.name, null);
    return this;
  },
  copy: function() {
    var e = {}, t = this._;
    for (var n in t) e[n] = t[n].slice();
    return new lx(e);
  },
  call: function(e, t) {
    if ((i = arguments.length - 2) > 0) for (var n = new Array(i), r = 0, i, a; r < i; ++r) n[r] = arguments[r + 2];
    if (!this._.hasOwnProperty(e)) throw new Error("unknown type: " + e);
    for (a = this._[e], r = 0, i = a.length; r < i; ++r) a[r].value.apply(t, n);
  },
  apply: function(e, t, n) {
    if (!this._.hasOwnProperty(e)) throw new Error("unknown type: " + e);
    for (var r = this._[e], i = 0, a = r.length; i < a; ++i) r[i].value.apply(t, n);
  }
};
function Yle(e, t) {
  for (var n = 0, r = e.length, i; n < r; ++n)
    if ((i = e[n]).name === t)
      return i.value;
}
function CN(e, t, n) {
  for (var r = 0, i = e.length; r < i; ++r)
    if (e[r].name === t) {
      e[r] = Gle, e = e.slice(0, r).concat(e.slice(r + 1));
      break;
    }
  return n != null && e.push({ name: t, value: n }), e;
}
var g5 = "http://www.w3.org/1999/xhtml";
const EN = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: g5,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function yb(e) {
  var t = e += "", n = t.indexOf(":");
  return n >= 0 && (t = e.slice(0, n)) !== "xmlns" && (e = e.slice(n + 1)), EN.hasOwnProperty(t) ? { space: EN[t], local: e } : e;
}
function Wle(e) {
  return function() {
    var t = this.ownerDocument, n = this.namespaceURI;
    return n === g5 && t.documentElement.namespaceURI === g5 ? t.createElement(e) : t.createElementNS(n, e);
  };
}
function Zle(e) {
  return function() {
    return this.ownerDocument.createElementNS(e.space, e.local);
  };
}
function bL(e) {
  var t = yb(e);
  return (t.local ? Zle : Wle)(t);
}
function Xle() {
}
function nT(e) {
  return e == null ? Xle : function() {
    return this.querySelector(e);
  };
}
function Qle(e) {
  typeof e != "function" && (e = nT(e));
  for (var t = this._groups, n = t.length, r = new Array(n), i = 0; i < n; ++i)
    for (var a = t[i], o = a.length, u = r[i] = new Array(o), c, f, p = 0; p < o; ++p)
      (c = a[p]) && (f = e.call(c, c.__data__, p, a)) && ("__data__" in c && (f.__data__ = c.__data__), u[p] = f);
  return new ja(r, this._parents);
}
function Jle(e) {
  return e == null ? [] : Array.isArray(e) ? e : Array.from(e);
}
function eue() {
  return [];
}
function wL(e) {
  return e == null ? eue : function() {
    return this.querySelectorAll(e);
  };
}
function tue(e) {
  return function() {
    return Jle(e.apply(this, arguments));
  };
}
function nue(e) {
  typeof e == "function" ? e = tue(e) : e = wL(e);
  for (var t = this._groups, n = t.length, r = [], i = [], a = 0; a < n; ++a)
    for (var o = t[a], u = o.length, c, f = 0; f < u; ++f)
      (c = o[f]) && (r.push(e.call(c, c.__data__, f, o)), i.push(c));
  return new ja(r, i);
}
function _L(e) {
  return function() {
    return this.matches(e);
  };
}
function SL(e) {
  return function(t) {
    return t.matches(e);
  };
}
var rue = Array.prototype.find;
function iue(e) {
  return function() {
    return rue.call(this.children, e);
  };
}
function sue() {
  return this.firstElementChild;
}
function aue(e) {
  return this.select(e == null ? sue : iue(typeof e == "function" ? e : SL(e)));
}
var oue = Array.prototype.filter;
function lue() {
  return Array.from(this.children);
}
function uue(e) {
  return function() {
    return oue.call(this.children, e);
  };
}
function cue(e) {
  return this.selectAll(e == null ? lue : uue(typeof e == "function" ? e : SL(e)));
}
function fue(e) {
  typeof e != "function" && (e = _L(e));
  for (var t = this._groups, n = t.length, r = new Array(n), i = 0; i < n; ++i)
    for (var a = t[i], o = a.length, u = r[i] = [], c, f = 0; f < o; ++f)
      (c = a[f]) && e.call(c, c.__data__, f, a) && u.push(c);
  return new ja(r, this._parents);
}
function CL(e) {
  return new Array(e.length);
}
function due() {
  return new ja(this._enter || this._groups.map(CL), this._parents);
}
function zx(e, t) {
  this.ownerDocument = e.ownerDocument, this.namespaceURI = e.namespaceURI, this._next = null, this._parent = e, this.__data__ = t;
}
zx.prototype = {
  constructor: zx,
  appendChild: function(e) {
    return this._parent.insertBefore(e, this._next);
  },
  insertBefore: function(e, t) {
    return this._parent.insertBefore(e, t);
  },
  querySelector: function(e) {
    return this._parent.querySelector(e);
  },
  querySelectorAll: function(e) {
    return this._parent.querySelectorAll(e);
  }
};
function hue(e) {
  return function() {
    return e;
  };
}
function pue(e, t, n, r, i, a) {
  for (var o = 0, u, c = t.length, f = a.length; o < f; ++o)
    (u = t[o]) ? (u.__data__ = a[o], r[o] = u) : n[o] = new zx(e, a[o]);
  for (; o < c; ++o)
    (u = t[o]) && (i[o] = u);
}
function mue(e, t, n, r, i, a, o) {
  var u, c, f = /* @__PURE__ */ new Map(), p = t.length, g = a.length, x = new Array(p), b;
  for (u = 0; u < p; ++u)
    (c = t[u]) && (x[u] = b = o.call(c, c.__data__, u, t) + "", f.has(b) ? i[u] = c : f.set(b, c));
  for (u = 0; u < g; ++u)
    b = o.call(e, a[u], u, a) + "", (c = f.get(b)) ? (r[u] = c, c.__data__ = a[u], f.delete(b)) : n[u] = new zx(e, a[u]);
  for (u = 0; u < p; ++u)
    (c = t[u]) && f.get(x[u]) === c && (i[u] = c);
}
function gue(e) {
  return e.__data__;
}
function yue(e, t) {
  if (!arguments.length) return Array.from(this, gue);
  var n = t ? mue : pue, r = this._parents, i = this._groups;
  typeof e != "function" && (e = hue(e));
  for (var a = i.length, o = new Array(a), u = new Array(a), c = new Array(a), f = 0; f < a; ++f) {
    var p = r[f], g = i[f], x = g.length, b = vue(e.call(p, p && p.__data__, f, r)), _ = b.length, E = u[f] = new Array(_), k = o[f] = new Array(_), T = c[f] = new Array(x);
    n(p, g, E, k, T, b, t);
    for (var R = 0, N = 0, O, P; R < _; ++R)
      if (O = E[R]) {
        for (R >= N && (N = R + 1); !(P = k[N]) && ++N < _; ) ;
        O._next = P || null;
      }
  }
  return o = new ja(o, r), o._enter = u, o._exit = c, o;
}
function vue(e) {
  return typeof e == "object" && "length" in e ? e : Array.from(e);
}
function xue() {
  return new ja(this._exit || this._groups.map(CL), this._parents);
}
function bue(e, t, n) {
  var r = this.enter(), i = this, a = this.exit();
  return typeof e == "function" ? (r = e(r), r && (r = r.selection())) : r = r.append(e + ""), t != null && (i = t(i), i && (i = i.selection())), n == null ? a.remove() : n(a), r && i ? r.merge(i).order() : i;
}
function wue(e) {
  for (var t = e.selection ? e.selection() : e, n = this._groups, r = t._groups, i = n.length, a = r.length, o = Math.min(i, a), u = new Array(i), c = 0; c < o; ++c)
    for (var f = n[c], p = r[c], g = f.length, x = u[c] = new Array(g), b, _ = 0; _ < g; ++_)
      (b = f[_] || p[_]) && (x[_] = b);
  for (; c < i; ++c)
    u[c] = n[c];
  return new ja(u, this._parents);
}
function _ue() {
  for (var e = this._groups, t = -1, n = e.length; ++t < n; )
    for (var r = e[t], i = r.length - 1, a = r[i], o; --i >= 0; )
      (o = r[i]) && (a && o.compareDocumentPosition(a) ^ 4 && a.parentNode.insertBefore(o, a), a = o);
  return this;
}
function Sue(e) {
  e || (e = Cue);
  function t(g, x) {
    return g && x ? e(g.__data__, x.__data__) : !g - !x;
  }
  for (var n = this._groups, r = n.length, i = new Array(r), a = 0; a < r; ++a) {
    for (var o = n[a], u = o.length, c = i[a] = new Array(u), f, p = 0; p < u; ++p)
      (f = o[p]) && (c[p] = f);
    c.sort(t);
  }
  return new ja(i, this._parents).order();
}
function Cue(e, t) {
  return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN;
}
function Eue() {
  var e = arguments[0];
  return arguments[0] = this, e.apply(null, arguments), this;
}
function kue() {
  return Array.from(this);
}
function Tue() {
  for (var e = this._groups, t = 0, n = e.length; t < n; ++t)
    for (var r = e[t], i = 0, a = r.length; i < a; ++i) {
      var o = r[i];
      if (o) return o;
    }
  return null;
}
function Aue() {
  let e = 0;
  for (const t of this) ++e;
  return e;
}
function jue() {
  return !this.node();
}
function Nue(e) {
  for (var t = this._groups, n = 0, r = t.length; n < r; ++n)
    for (var i = t[n], a = 0, o = i.length, u; a < o; ++a)
      (u = i[a]) && e.call(u, u.__data__, a, i);
  return this;
}
function Rue(e) {
  return function() {
    this.removeAttribute(e);
  };
}
function Mue(e) {
  return function() {
    this.removeAttributeNS(e.space, e.local);
  };
}
function Oue(e, t) {
  return function() {
    this.setAttribute(e, t);
  };
}
function Due(e, t) {
  return function() {
    this.setAttributeNS(e.space, e.local, t);
  };
}
function zue(e, t) {
  return function() {
    var n = t.apply(this, arguments);
    n == null ? this.removeAttribute(e) : this.setAttribute(e, n);
  };
}
function Pue(e, t) {
  return function() {
    var n = t.apply(this, arguments);
    n == null ? this.removeAttributeNS(e.space, e.local) : this.setAttributeNS(e.space, e.local, n);
  };
}
function Iue(e, t) {
  var n = yb(e);
  if (arguments.length < 2) {
    var r = this.node();
    return n.local ? r.getAttributeNS(n.space, n.local) : r.getAttribute(n);
  }
  return this.each((t == null ? n.local ? Mue : Rue : typeof t == "function" ? n.local ? Pue : zue : n.local ? Due : Oue)(n, t));
}
function EL(e) {
  return e.ownerDocument && e.ownerDocument.defaultView || e.document && e || e.defaultView;
}
function Lue(e) {
  return function() {
    this.style.removeProperty(e);
  };
}
function Bue(e, t, n) {
  return function() {
    this.style.setProperty(e, t, n);
  };
}
function que(e, t, n) {
  return function() {
    var r = t.apply(this, arguments);
    r == null ? this.style.removeProperty(e) : this.style.setProperty(e, r, n);
  };
}
function $ue(e, t, n) {
  return arguments.length > 1 ? this.each((t == null ? Lue : typeof t == "function" ? que : Bue)(e, t, n ?? "")) : um(this.node(), e);
}
function um(e, t) {
  return e.style.getPropertyValue(t) || EL(e).getComputedStyle(e, null).getPropertyValue(t);
}
function Fue(e) {
  return function() {
    delete this[e];
  };
}
function Uue(e, t) {
  return function() {
    this[e] = t;
  };
}
function Vue(e, t) {
  return function() {
    var n = t.apply(this, arguments);
    n == null ? delete this[e] : this[e] = n;
  };
}
function Hue(e, t) {
  return arguments.length > 1 ? this.each((t == null ? Fue : typeof t == "function" ? Vue : Uue)(e, t)) : this.node()[e];
}
function kL(e) {
  return e.trim().split(/^|\s+/);
}
function rT(e) {
  return e.classList || new TL(e);
}
function TL(e) {
  this._node = e, this._names = kL(e.getAttribute("class") || "");
}
TL.prototype = {
  add: function(e) {
    var t = this._names.indexOf(e);
    t < 0 && (this._names.push(e), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(e) {
    var t = this._names.indexOf(e);
    t >= 0 && (this._names.splice(t, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(e) {
    return this._names.indexOf(e) >= 0;
  }
};
function AL(e, t) {
  for (var n = rT(e), r = -1, i = t.length; ++r < i; ) n.add(t[r]);
}
function jL(e, t) {
  for (var n = rT(e), r = -1, i = t.length; ++r < i; ) n.remove(t[r]);
}
function Gue(e) {
  return function() {
    AL(this, e);
  };
}
function Kue(e) {
  return function() {
    jL(this, e);
  };
}
function Yue(e, t) {
  return function() {
    (t.apply(this, arguments) ? AL : jL)(this, e);
  };
}
function Wue(e, t) {
  var n = kL(e + "");
  if (arguments.length < 2) {
    for (var r = rT(this.node()), i = -1, a = n.length; ++i < a; ) if (!r.contains(n[i])) return !1;
    return !0;
  }
  return this.each((typeof t == "function" ? Yue : t ? Gue : Kue)(n, t));
}
function Zue() {
  this.textContent = "";
}
function Xue(e) {
  return function() {
    this.textContent = e;
  };
}
function Que(e) {
  return function() {
    var t = e.apply(this, arguments);
    this.textContent = t ?? "";
  };
}
function Jue(e) {
  return arguments.length ? this.each(e == null ? Zue : (typeof e == "function" ? Que : Xue)(e)) : this.node().textContent;
}
function ece() {
  this.innerHTML = "";
}
function tce(e) {
  return function() {
    this.innerHTML = e;
  };
}
function nce(e) {
  return function() {
    var t = e.apply(this, arguments);
    this.innerHTML = t ?? "";
  };
}
function rce(e) {
  return arguments.length ? this.each(e == null ? ece : (typeof e == "function" ? nce : tce)(e)) : this.node().innerHTML;
}
function ice() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function sce() {
  return this.each(ice);
}
function ace() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function oce() {
  return this.each(ace);
}
function lce(e) {
  var t = typeof e == "function" ? e : bL(e);
  return this.select(function() {
    return this.appendChild(t.apply(this, arguments));
  });
}
function uce() {
  return null;
}
function cce(e, t) {
  var n = typeof e == "function" ? e : bL(e), r = t == null ? uce : typeof t == "function" ? t : nT(t);
  return this.select(function() {
    return this.insertBefore(n.apply(this, arguments), r.apply(this, arguments) || null);
  });
}
function fce() {
  var e = this.parentNode;
  e && e.removeChild(this);
}
function dce() {
  return this.each(fce);
}
function hce() {
  var e = this.cloneNode(!1), t = this.parentNode;
  return t ? t.insertBefore(e, this.nextSibling) : e;
}
function pce() {
  var e = this.cloneNode(!0), t = this.parentNode;
  return t ? t.insertBefore(e, this.nextSibling) : e;
}
function mce(e) {
  return this.select(e ? pce : hce);
}
function gce(e) {
  return arguments.length ? this.property("__data__", e) : this.node().__data__;
}
function yce(e) {
  return function(t) {
    e.call(this, t, this.__data__);
  };
}
function vce(e) {
  return e.trim().split(/^|\s+/).map(function(t) {
    var n = "", r = t.indexOf(".");
    return r >= 0 && (n = t.slice(r + 1), t = t.slice(0, r)), { type: t, name: n };
  });
}
function xce(e) {
  return function() {
    var t = this.__on;
    if (t) {
      for (var n = 0, r = -1, i = t.length, a; n < i; ++n)
        a = t[n], (!e.type || a.type === e.type) && a.name === e.name ? this.removeEventListener(a.type, a.listener, a.options) : t[++r] = a;
      ++r ? t.length = r : delete this.__on;
    }
  };
}
function bce(e, t, n) {
  return function() {
    var r = this.__on, i, a = yce(t);
    if (r) {
      for (var o = 0, u = r.length; o < u; ++o)
        if ((i = r[o]).type === e.type && i.name === e.name) {
          this.removeEventListener(i.type, i.listener, i.options), this.addEventListener(i.type, i.listener = a, i.options = n), i.value = t;
          return;
        }
    }
    this.addEventListener(e.type, a, n), i = { type: e.type, name: e.name, value: t, listener: a, options: n }, r ? r.push(i) : this.__on = [i];
  };
}
function wce(e, t, n) {
  var r = vce(e + ""), i, a = r.length, o;
  if (arguments.length < 2) {
    var u = this.node().__on;
    if (u) {
      for (var c = 0, f = u.length, p; c < f; ++c)
        for (i = 0, p = u[c]; i < a; ++i)
          if ((o = r[i]).type === p.type && o.name === p.name)
            return p.value;
    }
    return;
  }
  for (u = t ? bce : xce, i = 0; i < a; ++i) this.each(u(r[i], t, n));
  return this;
}
function NL(e, t, n) {
  var r = EL(e), i = r.CustomEvent;
  typeof i == "function" ? i = new i(t, n) : (i = r.document.createEvent("Event"), n ? (i.initEvent(t, n.bubbles, n.cancelable), i.detail = n.detail) : i.initEvent(t, !1, !1)), e.dispatchEvent(i);
}
function _ce(e, t) {
  return function() {
    return NL(this, e, t);
  };
}
function Sce(e, t) {
  return function() {
    return NL(this, e, t.apply(this, arguments));
  };
}
function Cce(e, t) {
  return this.each((typeof t == "function" ? Sce : _ce)(e, t));
}
function* Ece() {
  for (var e = this._groups, t = 0, n = e.length; t < n; ++t)
    for (var r = e[t], i = 0, a = r.length, o; i < a; ++i)
      (o = r[i]) && (yield o);
}
var RL = [null];
function ja(e, t) {
  this._groups = e, this._parents = t;
}
function Ey() {
  return new ja([[document.documentElement]], RL);
}
function kce() {
  return this;
}
ja.prototype = Ey.prototype = {
  constructor: ja,
  select: Qle,
  selectAll: nue,
  selectChild: aue,
  selectChildren: cue,
  filter: fue,
  data: yue,
  enter: due,
  exit: xue,
  join: bue,
  merge: wue,
  selection: kce,
  order: _ue,
  sort: Sue,
  call: Eue,
  nodes: kue,
  node: Tue,
  size: Aue,
  empty: jue,
  each: Nue,
  attr: Iue,
  style: $ue,
  property: Hue,
  classed: Wue,
  text: Jue,
  html: rce,
  raise: sce,
  lower: oce,
  append: lce,
  insert: cce,
  remove: dce,
  clone: mce,
  datum: gce,
  on: wce,
  dispatch: Cce,
  [Symbol.iterator]: Ece
};
function ka(e) {
  return typeof e == "string" ? new ja([[document.querySelector(e)]], [document.documentElement]) : new ja([[e]], RL);
}
function Tce(e) {
  let t;
  for (; t = e.sourceEvent; ) e = t;
  return e;
}
function Lo(e, t) {
  if (e = Tce(e), t === void 0 && (t = e.currentTarget), t) {
    var n = t.ownerSVGElement || t;
    if (n.createSVGPoint) {
      var r = n.createSVGPoint();
      return r.x = e.clientX, r.y = e.clientY, r = r.matrixTransform(t.getScreenCTM().inverse()), [r.x, r.y];
    }
    if (t.getBoundingClientRect) {
      var i = t.getBoundingClientRect();
      return [e.clientX - i.left - t.clientLeft, e.clientY - i.top - t.clientTop];
    }
  }
  return [e.pageX, e.pageY];
}
const Ace = { passive: !1 }, ty = { capture: !0, passive: !1 };
function zw(e) {
  e.stopImmediatePropagation();
}
function Qp(e) {
  e.preventDefault(), e.stopImmediatePropagation();
}
function ML(e) {
  var t = e.document.documentElement, n = ka(e).on("dragstart.drag", Qp, ty);
  "onselectstart" in t ? n.on("selectstart.drag", Qp, ty) : (t.__noselect = t.style.MozUserSelect, t.style.MozUserSelect = "none");
}
function OL(e, t) {
  var n = e.document.documentElement, r = ka(e).on("dragstart.drag", null);
  t && (r.on("click.drag", Qp, ty), setTimeout(function() {
    r.on("click.drag", null);
  }, 0)), "onselectstart" in n ? r.on("selectstart.drag", null) : (n.style.MozUserSelect = n.__noselect, delete n.__noselect);
}
const P1 = (e) => () => e;
function y5(e, {
  sourceEvent: t,
  subject: n,
  target: r,
  identifier: i,
  active: a,
  x: o,
  y: u,
  dx: c,
  dy: f,
  dispatch: p
}) {
  Object.defineProperties(this, {
    type: { value: e, enumerable: !0, configurable: !0 },
    sourceEvent: { value: t, enumerable: !0, configurable: !0 },
    subject: { value: n, enumerable: !0, configurable: !0 },
    target: { value: r, enumerable: !0, configurable: !0 },
    identifier: { value: i, enumerable: !0, configurable: !0 },
    active: { value: a, enumerable: !0, configurable: !0 },
    x: { value: o, enumerable: !0, configurable: !0 },
    y: { value: u, enumerable: !0, configurable: !0 },
    dx: { value: c, enumerable: !0, configurable: !0 },
    dy: { value: f, enumerable: !0, configurable: !0 },
    _: { value: p }
  });
}
y5.prototype.on = function() {
  var e = this._.on.apply(this._, arguments);
  return e === this._ ? this : e;
};
function jce(e) {
  return !e.ctrlKey && !e.button;
}
function Nce() {
  return this.parentNode;
}
function Rce(e, t) {
  return t ?? { x: e.x, y: e.y };
}
function Mce() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function DL() {
  var e = jce, t = Nce, n = Rce, r = Mce, i = {}, a = gb("start", "drag", "end"), o = 0, u, c, f, p, g = 0;
  function x(O) {
    O.on("mousedown.drag", b).filter(r).on("touchstart.drag", k).on("touchmove.drag", T, Ace).on("touchend.drag touchcancel.drag", R).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  function b(O, P) {
    if (!(p || !e.call(this, O, P))) {
      var z = N(this, t.call(this, O, P), O, P, "mouse");
      z && (ka(O.view).on("mousemove.drag", _, ty).on("mouseup.drag", E, ty), ML(O.view), zw(O), f = !1, u = O.clientX, c = O.clientY, z("start", O));
    }
  }
  function _(O) {
    if (Qp(O), !f) {
      var P = O.clientX - u, z = O.clientY - c;
      f = P * P + z * z > g;
    }
    i.mouse("drag", O);
  }
  function E(O) {
    ka(O.view).on("mousemove.drag mouseup.drag", null), OL(O.view, f), Qp(O), i.mouse("end", O);
  }
  function k(O, P) {
    if (e.call(this, O, P)) {
      var z = O.changedTouches, q = t.call(this, O, P), G = z.length, Y, W;
      for (Y = 0; Y < G; ++Y)
        (W = N(this, q, O, P, z[Y].identifier, z[Y])) && (zw(O), W("start", O, z[Y]));
    }
  }
  function T(O) {
    var P = O.changedTouches, z = P.length, q, G;
    for (q = 0; q < z; ++q)
      (G = i[P[q].identifier]) && (Qp(O), G("drag", O, P[q]));
  }
  function R(O) {
    var P = O.changedTouches, z = P.length, q, G;
    for (p && clearTimeout(p), p = setTimeout(function() {
      p = null;
    }, 500), q = 0; q < z; ++q)
      (G = i[P[q].identifier]) && (zw(O), G("end", O, P[q]));
  }
  function N(O, P, z, q, G, Y) {
    var W = a.copy(), F = Lo(Y || z, P), X, me, J;
    if ((J = n.call(O, new y5("beforestart", {
      sourceEvent: z,
      target: x,
      identifier: G,
      active: o,
      x: F[0],
      y: F[1],
      dx: 0,
      dy: 0,
      dispatch: W
    }), q)) != null)
      return X = J.x - F[0] || 0, me = J.y - F[1] || 0, function le(Q, oe, fe) {
        var ce = F, K;
        switch (Q) {
          case "start":
            i[G] = le, K = o++;
            break;
          case "end":
            delete i[G], --o;
          // falls through
          case "drag":
            F = Lo(fe || oe, P), K = o;
            break;
        }
        W.call(
          Q,
          O,
          new y5(Q, {
            sourceEvent: oe,
            subject: J,
            target: x,
            identifier: G,
            active: K,
            x: F[0] + X,
            y: F[1] + me,
            dx: F[0] - ce[0],
            dy: F[1] - ce[1],
            dispatch: W
          }),
          q
        );
      };
  }
  return x.filter = function(O) {
    return arguments.length ? (e = typeof O == "function" ? O : P1(!!O), x) : e;
  }, x.container = function(O) {
    return arguments.length ? (t = typeof O == "function" ? O : P1(O), x) : t;
  }, x.subject = function(O) {
    return arguments.length ? (n = typeof O == "function" ? O : P1(O), x) : n;
  }, x.touchable = function(O) {
    return arguments.length ? (r = typeof O == "function" ? O : P1(!!O), x) : r;
  }, x.on = function() {
    var O = a.on.apply(a, arguments);
    return O === a ? x : O;
  }, x.clickDistance = function(O) {
    return arguments.length ? (g = (O = +O) * O, x) : Math.sqrt(g);
  }, x;
}
function iT(e, t, n) {
  e.prototype = t.prototype = n, n.constructor = e;
}
function zL(e, t) {
  var n = Object.create(e.prototype);
  for (var r in t) n[r] = t[r];
  return n;
}
function ky() {
}
var ny = 0.7, Px = 1 / ny, Jp = "\\s*([+-]?\\d+)\\s*", ry = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", Hl = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", Oce = /^#([0-9a-f]{3,8})$/, Dce = new RegExp(`^rgb\\(${Jp},${Jp},${Jp}\\)$`), zce = new RegExp(`^rgb\\(${Hl},${Hl},${Hl}\\)$`), Pce = new RegExp(`^rgba\\(${Jp},${Jp},${Jp},${ry}\\)$`), Ice = new RegExp(`^rgba\\(${Hl},${Hl},${Hl},${ry}\\)$`), Lce = new RegExp(`^hsl\\(${ry},${Hl},${Hl}\\)$`), Bce = new RegExp(`^hsla\\(${ry},${Hl},${Hl},${ry}\\)$`), kN = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
iT(ky, eh, {
  copy(e) {
    return Object.assign(new this.constructor(), this, e);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: TN,
  // Deprecated! Use color.formatHex.
  formatHex: TN,
  formatHex8: qce,
  formatHsl: $ce,
  formatRgb: AN,
  toString: AN
});
function TN() {
  return this.rgb().formatHex();
}
function qce() {
  return this.rgb().formatHex8();
}
function $ce() {
  return PL(this).formatHsl();
}
function AN() {
  return this.rgb().formatRgb();
}
function eh(e) {
  var t, n;
  return e = (e + "").trim().toLowerCase(), (t = Oce.exec(e)) ? (n = t[1].length, t = parseInt(t[1], 16), n === 6 ? jN(t) : n === 3 ? new ea(t >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | t & 240, (t & 15) << 4 | t & 15, 1) : n === 8 ? I1(t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, (t & 255) / 255) : n === 4 ? I1(t >> 12 & 15 | t >> 8 & 240, t >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | t & 240, ((t & 15) << 4 | t & 15) / 255) : null) : (t = Dce.exec(e)) ? new ea(t[1], t[2], t[3], 1) : (t = zce.exec(e)) ? new ea(t[1] * 255 / 100, t[2] * 255 / 100, t[3] * 255 / 100, 1) : (t = Pce.exec(e)) ? I1(t[1], t[2], t[3], t[4]) : (t = Ice.exec(e)) ? I1(t[1] * 255 / 100, t[2] * 255 / 100, t[3] * 255 / 100, t[4]) : (t = Lce.exec(e)) ? MN(t[1], t[2] / 100, t[3] / 100, 1) : (t = Bce.exec(e)) ? MN(t[1], t[2] / 100, t[3] / 100, t[4]) : kN.hasOwnProperty(e) ? jN(kN[e]) : e === "transparent" ? new ea(NaN, NaN, NaN, 0) : null;
}
function jN(e) {
  return new ea(e >> 16 & 255, e >> 8 & 255, e & 255, 1);
}
function I1(e, t, n, r) {
  return r <= 0 && (e = t = n = NaN), new ea(e, t, n, r);
}
function Fce(e) {
  return e instanceof ky || (e = eh(e)), e ? (e = e.rgb(), new ea(e.r, e.g, e.b, e.opacity)) : new ea();
}
function v5(e, t, n, r) {
  return arguments.length === 1 ? Fce(e) : new ea(e, t, n, r ?? 1);
}
function ea(e, t, n, r) {
  this.r = +e, this.g = +t, this.b = +n, this.opacity = +r;
}
iT(ea, v5, zL(ky, {
  brighter(e) {
    return e = e == null ? Px : Math.pow(Px, e), new ea(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  darker(e) {
    return e = e == null ? ny : Math.pow(ny, e), new ea(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new ea(Yd(this.r), Yd(this.g), Yd(this.b), Ix(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: NN,
  // Deprecated! Use color.formatHex.
  formatHex: NN,
  formatHex8: Uce,
  formatRgb: RN,
  toString: RN
}));
function NN() {
  return `#${Fd(this.r)}${Fd(this.g)}${Fd(this.b)}`;
}
function Uce() {
  return `#${Fd(this.r)}${Fd(this.g)}${Fd(this.b)}${Fd((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function RN() {
  const e = Ix(this.opacity);
  return `${e === 1 ? "rgb(" : "rgba("}${Yd(this.r)}, ${Yd(this.g)}, ${Yd(this.b)}${e === 1 ? ")" : `, ${e})`}`;
}
function Ix(e) {
  return isNaN(e) ? 1 : Math.max(0, Math.min(1, e));
}
function Yd(e) {
  return Math.max(0, Math.min(255, Math.round(e) || 0));
}
function Fd(e) {
  return e = Yd(e), (e < 16 ? "0" : "") + e.toString(16);
}
function MN(e, t, n, r) {
  return r <= 0 ? e = t = n = NaN : n <= 0 || n >= 1 ? e = t = NaN : t <= 0 && (e = NaN), new $o(e, t, n, r);
}
function PL(e) {
  if (e instanceof $o) return new $o(e.h, e.s, e.l, e.opacity);
  if (e instanceof ky || (e = eh(e)), !e) return new $o();
  if (e instanceof $o) return e;
  e = e.rgb();
  var t = e.r / 255, n = e.g / 255, r = e.b / 255, i = Math.min(t, n, r), a = Math.max(t, n, r), o = NaN, u = a - i, c = (a + i) / 2;
  return u ? (t === a ? o = (n - r) / u + (n < r) * 6 : n === a ? o = (r - t) / u + 2 : o = (t - n) / u + 4, u /= c < 0.5 ? a + i : 2 - a - i, o *= 60) : u = c > 0 && c < 1 ? 0 : o, new $o(o, u, c, e.opacity);
}
function Vce(e, t, n, r) {
  return arguments.length === 1 ? PL(e) : new $o(e, t, n, r ?? 1);
}
function $o(e, t, n, r) {
  this.h = +e, this.s = +t, this.l = +n, this.opacity = +r;
}
iT($o, Vce, zL(ky, {
  brighter(e) {
    return e = e == null ? Px : Math.pow(Px, e), new $o(this.h, this.s, this.l * e, this.opacity);
  },
  darker(e) {
    return e = e == null ? ny : Math.pow(ny, e), new $o(this.h, this.s, this.l * e, this.opacity);
  },
  rgb() {
    var e = this.h % 360 + (this.h < 0) * 360, t = isNaN(e) || isNaN(this.s) ? 0 : this.s, n = this.l, r = n + (n < 0.5 ? n : 1 - n) * t, i = 2 * n - r;
    return new ea(
      Pw(e >= 240 ? e - 240 : e + 120, i, r),
      Pw(e, i, r),
      Pw(e < 120 ? e + 240 : e - 120, i, r),
      this.opacity
    );
  },
  clamp() {
    return new $o(ON(this.h), L1(this.s), L1(this.l), Ix(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const e = Ix(this.opacity);
    return `${e === 1 ? "hsl(" : "hsla("}${ON(this.h)}, ${L1(this.s) * 100}%, ${L1(this.l) * 100}%${e === 1 ? ")" : `, ${e})`}`;
  }
}));
function ON(e) {
  return e = (e || 0) % 360, e < 0 ? e + 360 : e;
}
function L1(e) {
  return Math.max(0, Math.min(1, e || 0));
}
function Pw(e, t, n) {
  return (e < 60 ? t + (n - t) * e / 60 : e < 180 ? n : e < 240 ? t + (n - t) * (240 - e) / 60 : t) * 255;
}
const sT = (e) => () => e;
function Hce(e, t) {
  return function(n) {
    return e + n * t;
  };
}
function Gce(e, t, n) {
  return e = Math.pow(e, n), t = Math.pow(t, n) - e, n = 1 / n, function(r) {
    return Math.pow(e + r * t, n);
  };
}
function Kce(e) {
  return (e = +e) == 1 ? IL : function(t, n) {
    return n - t ? Gce(t, n, e) : sT(isNaN(t) ? n : t);
  };
}
function IL(e, t) {
  var n = t - e;
  return n ? Hce(e, n) : sT(isNaN(e) ? t : e);
}
const Lx = (function e(t) {
  var n = Kce(t);
  function r(i, a) {
    var o = n((i = v5(i)).r, (a = v5(a)).r), u = n(i.g, a.g), c = n(i.b, a.b), f = IL(i.opacity, a.opacity);
    return function(p) {
      return i.r = o(p), i.g = u(p), i.b = c(p), i.opacity = f(p), i + "";
    };
  }
  return r.gamma = e, r;
})(1);
function Yce(e, t) {
  t || (t = []);
  var n = e ? Math.min(t.length, e.length) : 0, r = t.slice(), i;
  return function(a) {
    for (i = 0; i < n; ++i) r[i] = e[i] * (1 - a) + t[i] * a;
    return r;
  };
}
function Wce(e) {
  return ArrayBuffer.isView(e) && !(e instanceof DataView);
}
function Zce(e, t) {
  var n = t ? t.length : 0, r = e ? Math.min(n, e.length) : 0, i = new Array(r), a = new Array(n), o;
  for (o = 0; o < r; ++o) i[o] = B0(e[o], t[o]);
  for (; o < n; ++o) a[o] = t[o];
  return function(u) {
    for (o = 0; o < r; ++o) a[o] = i[o](u);
    return a;
  };
}
function Xce(e, t) {
  var n = /* @__PURE__ */ new Date();
  return e = +e, t = +t, function(r) {
    return n.setTime(e * (1 - r) + t * r), n;
  };
}
function Ll(e, t) {
  return e = +e, t = +t, function(n) {
    return e * (1 - n) + t * n;
  };
}
function Qce(e, t) {
  var n = {}, r = {}, i;
  (e === null || typeof e != "object") && (e = {}), (t === null || typeof t != "object") && (t = {});
  for (i in t)
    i in e ? n[i] = B0(e[i], t[i]) : r[i] = t[i];
  return function(a) {
    for (i in n) r[i] = n[i](a);
    return r;
  };
}
var x5 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, Iw = new RegExp(x5.source, "g");
function Jce(e) {
  return function() {
    return e;
  };
}
function efe(e) {
  return function(t) {
    return e(t) + "";
  };
}
function LL(e, t) {
  var n = x5.lastIndex = Iw.lastIndex = 0, r, i, a, o = -1, u = [], c = [];
  for (e = e + "", t = t + ""; (r = x5.exec(e)) && (i = Iw.exec(t)); )
    (a = i.index) > n && (a = t.slice(n, a), u[o] ? u[o] += a : u[++o] = a), (r = r[0]) === (i = i[0]) ? u[o] ? u[o] += i : u[++o] = i : (u[++o] = null, c.push({ i: o, x: Ll(r, i) })), n = Iw.lastIndex;
  return n < t.length && (a = t.slice(n), u[o] ? u[o] += a : u[++o] = a), u.length < 2 ? c[0] ? efe(c[0].x) : Jce(t) : (t = c.length, function(f) {
    for (var p = 0, g; p < t; ++p) u[(g = c[p]).i] = g.x(f);
    return u.join("");
  });
}
function B0(e, t) {
  var n = typeof t, r;
  return t == null || n === "boolean" ? sT(t) : (n === "number" ? Ll : n === "string" ? (r = eh(t)) ? (t = r, Lx) : LL : t instanceof eh ? Lx : t instanceof Date ? Xce : Wce(t) ? Yce : Array.isArray(t) ? Zce : typeof t.valueOf != "function" && typeof t.toString != "function" || isNaN(t) ? Qce : Ll)(e, t);
}
var DN = 180 / Math.PI, b5 = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function BL(e, t, n, r, i, a) {
  var o, u, c;
  return (o = Math.sqrt(e * e + t * t)) && (e /= o, t /= o), (c = e * n + t * r) && (n -= e * c, r -= t * c), (u = Math.sqrt(n * n + r * r)) && (n /= u, r /= u, c /= u), e * r < t * n && (e = -e, t = -t, c = -c, o = -o), {
    translateX: i,
    translateY: a,
    rotate: Math.atan2(t, e) * DN,
    skewX: Math.atan(c) * DN,
    scaleX: o,
    scaleY: u
  };
}
var B1;
function tfe(e) {
  const t = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(e + "");
  return t.isIdentity ? b5 : BL(t.a, t.b, t.c, t.d, t.e, t.f);
}
function nfe(e) {
  return e == null || (B1 || (B1 = document.createElementNS("http://www.w3.org/2000/svg", "g")), B1.setAttribute("transform", e), !(e = B1.transform.baseVal.consolidate())) ? b5 : (e = e.matrix, BL(e.a, e.b, e.c, e.d, e.e, e.f));
}
function qL(e, t, n, r) {
  function i(f) {
    return f.length ? f.pop() + " " : "";
  }
  function a(f, p, g, x, b, _) {
    if (f !== g || p !== x) {
      var E = b.push("translate(", null, t, null, n);
      _.push({ i: E - 4, x: Ll(f, g) }, { i: E - 2, x: Ll(p, x) });
    } else (g || x) && b.push("translate(" + g + t + x + n);
  }
  function o(f, p, g, x) {
    f !== p ? (f - p > 180 ? p += 360 : p - f > 180 && (f += 360), x.push({ i: g.push(i(g) + "rotate(", null, r) - 2, x: Ll(f, p) })) : p && g.push(i(g) + "rotate(" + p + r);
  }
  function u(f, p, g, x) {
    f !== p ? x.push({ i: g.push(i(g) + "skewX(", null, r) - 2, x: Ll(f, p) }) : p && g.push(i(g) + "skewX(" + p + r);
  }
  function c(f, p, g, x, b, _) {
    if (f !== g || p !== x) {
      var E = b.push(i(b) + "scale(", null, ",", null, ")");
      _.push({ i: E - 4, x: Ll(f, g) }, { i: E - 2, x: Ll(p, x) });
    } else (g !== 1 || x !== 1) && b.push(i(b) + "scale(" + g + "," + x + ")");
  }
  return function(f, p) {
    var g = [], x = [];
    return f = e(f), p = e(p), a(f.translateX, f.translateY, p.translateX, p.translateY, g, x), o(f.rotate, p.rotate, g, x), u(f.skewX, p.skewX, g, x), c(f.scaleX, f.scaleY, p.scaleX, p.scaleY, g, x), f = p = null, function(b) {
      for (var _ = -1, E = x.length, k; ++_ < E; ) g[(k = x[_]).i] = k.x(b);
      return g.join("");
    };
  };
}
var rfe = qL(tfe, "px, ", "px)", "deg)"), ife = qL(nfe, ", ", ")", ")"), sfe = 1e-12;
function zN(e) {
  return ((e = Math.exp(e)) + 1 / e) / 2;
}
function afe(e) {
  return ((e = Math.exp(e)) - 1 / e) / 2;
}
function ofe(e) {
  return ((e = Math.exp(2 * e)) - 1) / (e + 1);
}
const ux = (function e(t, n, r) {
  function i(a, o) {
    var u = a[0], c = a[1], f = a[2], p = o[0], g = o[1], x = o[2], b = p - u, _ = g - c, E = b * b + _ * _, k, T;
    if (E < sfe)
      T = Math.log(x / f) / t, k = function(q) {
        return [
          u + q * b,
          c + q * _,
          f * Math.exp(t * q * T)
        ];
      };
    else {
      var R = Math.sqrt(E), N = (x * x - f * f + r * E) / (2 * f * n * R), O = (x * x - f * f - r * E) / (2 * x * n * R), P = Math.log(Math.sqrt(N * N + 1) - N), z = Math.log(Math.sqrt(O * O + 1) - O);
      T = (z - P) / t, k = function(q) {
        var G = q * T, Y = zN(P), W = f / (n * R) * (Y * ofe(t * G + P) - afe(P));
        return [
          u + W * b,
          c + W * _,
          f * Y / zN(t * G + P)
        ];
      };
    }
    return k.duration = T * 1e3 * t / Math.SQRT2, k;
  }
  return i.rho = function(a) {
    var o = Math.max(1e-3, +a), u = o * o, c = u * u;
    return e(o, u, c);
  }, i;
})(Math.SQRT2, 2, 4);
var cm = 0, C0 = 0, g0 = 0, $L = 1e3, Bx, E0, qx = 0, th = 0, vb = 0, iy = typeof performance == "object" && performance.now ? performance : Date, FL = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(e) {
  setTimeout(e, 17);
};
function aT() {
  return th || (FL(lfe), th = iy.now() + vb);
}
function lfe() {
  th = 0;
}
function $x() {
  this._call = this._time = this._next = null;
}
$x.prototype = UL.prototype = {
  constructor: $x,
  restart: function(e, t, n) {
    if (typeof e != "function") throw new TypeError("callback is not a function");
    n = (n == null ? aT() : +n) + (t == null ? 0 : +t), !this._next && E0 !== this && (E0 ? E0._next = this : Bx = this, E0 = this), this._call = e, this._time = n, w5();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, w5());
  }
};
function UL(e, t, n) {
  var r = new $x();
  return r.restart(e, t, n), r;
}
function ufe() {
  aT(), ++cm;
  for (var e = Bx, t; e; )
    (t = th - e._time) >= 0 && e._call.call(void 0, t), e = e._next;
  --cm;
}
function PN() {
  th = (qx = iy.now()) + vb, cm = C0 = 0;
  try {
    ufe();
  } finally {
    cm = 0, ffe(), th = 0;
  }
}
function cfe() {
  var e = iy.now(), t = e - qx;
  t > $L && (vb -= t, qx = e);
}
function ffe() {
  for (var e, t = Bx, n, r = 1 / 0; t; )
    t._call ? (r > t._time && (r = t._time), e = t, t = t._next) : (n = t._next, t._next = null, t = e ? e._next = n : Bx = n);
  E0 = e, w5(r);
}
function w5(e) {
  if (!cm) {
    C0 && (C0 = clearTimeout(C0));
    var t = e - th;
    t > 24 ? (e < 1 / 0 && (C0 = setTimeout(PN, e - iy.now() - vb)), g0 && (g0 = clearInterval(g0))) : (g0 || (qx = iy.now(), g0 = setInterval(cfe, $L)), cm = 1, FL(PN));
  }
}
function IN(e, t, n) {
  var r = new $x();
  return t = t == null ? 0 : +t, r.restart((i) => {
    r.stop(), e(i + t);
  }, t, n), r;
}
var dfe = gb("start", "end", "cancel", "interrupt"), hfe = [], VL = 0, LN = 1, _5 = 2, cx = 3, BN = 4, S5 = 5, fx = 6;
function xb(e, t, n, r, i, a) {
  var o = e.__transition;
  if (!o) e.__transition = {};
  else if (n in o) return;
  pfe(e, n, {
    name: t,
    index: r,
    // For context during callback.
    group: i,
    // For context during callback.
    on: dfe,
    tween: hfe,
    time: a.time,
    delay: a.delay,
    duration: a.duration,
    ease: a.ease,
    timer: null,
    state: VL
  });
}
function oT(e, t) {
  var n = Go(e, t);
  if (n.state > VL) throw new Error("too late; already scheduled");
  return n;
}
function Wl(e, t) {
  var n = Go(e, t);
  if (n.state > cx) throw new Error("too late; already running");
  return n;
}
function Go(e, t) {
  var n = e.__transition;
  if (!n || !(n = n[t])) throw new Error("transition not found");
  return n;
}
function pfe(e, t, n) {
  var r = e.__transition, i;
  r[t] = n, n.timer = UL(a, 0, n.time);
  function a(f) {
    n.state = LN, n.timer.restart(o, n.delay, n.time), n.delay <= f && o(f - n.delay);
  }
  function o(f) {
    var p, g, x, b;
    if (n.state !== LN) return c();
    for (p in r)
      if (b = r[p], b.name === n.name) {
        if (b.state === cx) return IN(o);
        b.state === BN ? (b.state = fx, b.timer.stop(), b.on.call("interrupt", e, e.__data__, b.index, b.group), delete r[p]) : +p < t && (b.state = fx, b.timer.stop(), b.on.call("cancel", e, e.__data__, b.index, b.group), delete r[p]);
      }
    if (IN(function() {
      n.state === cx && (n.state = BN, n.timer.restart(u, n.delay, n.time), u(f));
    }), n.state = _5, n.on.call("start", e, e.__data__, n.index, n.group), n.state === _5) {
      for (n.state = cx, i = new Array(x = n.tween.length), p = 0, g = -1; p < x; ++p)
        (b = n.tween[p].value.call(e, e.__data__, n.index, n.group)) && (i[++g] = b);
      i.length = g + 1;
    }
  }
  function u(f) {
    for (var p = f < n.duration ? n.ease.call(null, f / n.duration) : (n.timer.restart(c), n.state = S5, 1), g = -1, x = i.length; ++g < x; )
      i[g].call(e, p);
    n.state === S5 && (n.on.call("end", e, e.__data__, n.index, n.group), c());
  }
  function c() {
    n.state = fx, n.timer.stop(), delete r[t];
    for (var f in r) return;
    delete e.__transition;
  }
}
function dx(e, t) {
  var n = e.__transition, r, i, a = !0, o;
  if (n) {
    t = t == null ? null : t + "";
    for (o in n) {
      if ((r = n[o]).name !== t) {
        a = !1;
        continue;
      }
      i = r.state > _5 && r.state < S5, r.state = fx, r.timer.stop(), r.on.call(i ? "interrupt" : "cancel", e, e.__data__, r.index, r.group), delete n[o];
    }
    a && delete e.__transition;
  }
}
function mfe(e) {
  return this.each(function() {
    dx(this, e);
  });
}
function gfe(e, t) {
  var n, r;
  return function() {
    var i = Wl(this, e), a = i.tween;
    if (a !== n) {
      r = n = a;
      for (var o = 0, u = r.length; o < u; ++o)
        if (r[o].name === t) {
          r = r.slice(), r.splice(o, 1);
          break;
        }
    }
    i.tween = r;
  };
}
function yfe(e, t, n) {
  var r, i;
  if (typeof n != "function") throw new Error();
  return function() {
    var a = Wl(this, e), o = a.tween;
    if (o !== r) {
      i = (r = o).slice();
      for (var u = { name: t, value: n }, c = 0, f = i.length; c < f; ++c)
        if (i[c].name === t) {
          i[c] = u;
          break;
        }
      c === f && i.push(u);
    }
    a.tween = i;
  };
}
function vfe(e, t) {
  var n = this._id;
  if (e += "", arguments.length < 2) {
    for (var r = Go(this.node(), n).tween, i = 0, a = r.length, o; i < a; ++i)
      if ((o = r[i]).name === e)
        return o.value;
    return null;
  }
  return this.each((t == null ? gfe : yfe)(n, e, t));
}
function lT(e, t, n) {
  var r = e._id;
  return e.each(function() {
    var i = Wl(this, r);
    (i.value || (i.value = {}))[t] = n.apply(this, arguments);
  }), function(i) {
    return Go(i, r).value[t];
  };
}
function HL(e, t) {
  var n;
  return (typeof t == "number" ? Ll : t instanceof eh ? Lx : (n = eh(t)) ? (t = n, Lx) : LL)(e, t);
}
function xfe(e) {
  return function() {
    this.removeAttribute(e);
  };
}
function bfe(e) {
  return function() {
    this.removeAttributeNS(e.space, e.local);
  };
}
function wfe(e, t, n) {
  var r, i = n + "", a;
  return function() {
    var o = this.getAttribute(e);
    return o === i ? null : o === r ? a : a = t(r = o, n);
  };
}
function _fe(e, t, n) {
  var r, i = n + "", a;
  return function() {
    var o = this.getAttributeNS(e.space, e.local);
    return o === i ? null : o === r ? a : a = t(r = o, n);
  };
}
function Sfe(e, t, n) {
  var r, i, a;
  return function() {
    var o, u = n(this), c;
    return u == null ? void this.removeAttribute(e) : (o = this.getAttribute(e), c = u + "", o === c ? null : o === r && c === i ? a : (i = c, a = t(r = o, u)));
  };
}
function Cfe(e, t, n) {
  var r, i, a;
  return function() {
    var o, u = n(this), c;
    return u == null ? void this.removeAttributeNS(e.space, e.local) : (o = this.getAttributeNS(e.space, e.local), c = u + "", o === c ? null : o === r && c === i ? a : (i = c, a = t(r = o, u)));
  };
}
function Efe(e, t) {
  var n = yb(e), r = n === "transform" ? ife : HL;
  return this.attrTween(e, typeof t == "function" ? (n.local ? Cfe : Sfe)(n, r, lT(this, "attr." + e, t)) : t == null ? (n.local ? bfe : xfe)(n) : (n.local ? _fe : wfe)(n, r, t));
}
function kfe(e, t) {
  return function(n) {
    this.setAttribute(e, t.call(this, n));
  };
}
function Tfe(e, t) {
  return function(n) {
    this.setAttributeNS(e.space, e.local, t.call(this, n));
  };
}
function Afe(e, t) {
  var n, r;
  function i() {
    var a = t.apply(this, arguments);
    return a !== r && (n = (r = a) && Tfe(e, a)), n;
  }
  return i._value = t, i;
}
function jfe(e, t) {
  var n, r;
  function i() {
    var a = t.apply(this, arguments);
    return a !== r && (n = (r = a) && kfe(e, a)), n;
  }
  return i._value = t, i;
}
function Nfe(e, t) {
  var n = "attr." + e;
  if (arguments.length < 2) return (n = this.tween(n)) && n._value;
  if (t == null) return this.tween(n, null);
  if (typeof t != "function") throw new Error();
  var r = yb(e);
  return this.tween(n, (r.local ? Afe : jfe)(r, t));
}
function Rfe(e, t) {
  return function() {
    oT(this, e).delay = +t.apply(this, arguments);
  };
}
function Mfe(e, t) {
  return t = +t, function() {
    oT(this, e).delay = t;
  };
}
function Ofe(e) {
  var t = this._id;
  return arguments.length ? this.each((typeof e == "function" ? Rfe : Mfe)(t, e)) : Go(this.node(), t).delay;
}
function Dfe(e, t) {
  return function() {
    Wl(this, e).duration = +t.apply(this, arguments);
  };
}
function zfe(e, t) {
  return t = +t, function() {
    Wl(this, e).duration = t;
  };
}
function Pfe(e) {
  var t = this._id;
  return arguments.length ? this.each((typeof e == "function" ? Dfe : zfe)(t, e)) : Go(this.node(), t).duration;
}
function Ife(e, t) {
  if (typeof t != "function") throw new Error();
  return function() {
    Wl(this, e).ease = t;
  };
}
function Lfe(e) {
  var t = this._id;
  return arguments.length ? this.each(Ife(t, e)) : Go(this.node(), t).ease;
}
function Bfe(e, t) {
  return function() {
    var n = t.apply(this, arguments);
    if (typeof n != "function") throw new Error();
    Wl(this, e).ease = n;
  };
}
function qfe(e) {
  if (typeof e != "function") throw new Error();
  return this.each(Bfe(this._id, e));
}
function $fe(e) {
  typeof e != "function" && (e = _L(e));
  for (var t = this._groups, n = t.length, r = new Array(n), i = 0; i < n; ++i)
    for (var a = t[i], o = a.length, u = r[i] = [], c, f = 0; f < o; ++f)
      (c = a[f]) && e.call(c, c.__data__, f, a) && u.push(c);
  return new qu(r, this._parents, this._name, this._id);
}
function Ffe(e) {
  if (e._id !== this._id) throw new Error();
  for (var t = this._groups, n = e._groups, r = t.length, i = n.length, a = Math.min(r, i), o = new Array(r), u = 0; u < a; ++u)
    for (var c = t[u], f = n[u], p = c.length, g = o[u] = new Array(p), x, b = 0; b < p; ++b)
      (x = c[b] || f[b]) && (g[b] = x);
  for (; u < r; ++u)
    o[u] = t[u];
  return new qu(o, this._parents, this._name, this._id);
}
function Ufe(e) {
  return (e + "").trim().split(/^|\s+/).every(function(t) {
    var n = t.indexOf(".");
    return n >= 0 && (t = t.slice(0, n)), !t || t === "start";
  });
}
function Vfe(e, t, n) {
  var r, i, a = Ufe(t) ? oT : Wl;
  return function() {
    var o = a(this, e), u = o.on;
    u !== r && (i = (r = u).copy()).on(t, n), o.on = i;
  };
}
function Hfe(e, t) {
  var n = this._id;
  return arguments.length < 2 ? Go(this.node(), n).on.on(e) : this.each(Vfe(n, e, t));
}
function Gfe(e) {
  return function() {
    var t = this.parentNode;
    for (var n in this.__transition) if (+n !== e) return;
    t && t.removeChild(this);
  };
}
function Kfe() {
  return this.on("end.remove", Gfe(this._id));
}
function Yfe(e) {
  var t = this._name, n = this._id;
  typeof e != "function" && (e = nT(e));
  for (var r = this._groups, i = r.length, a = new Array(i), o = 0; o < i; ++o)
    for (var u = r[o], c = u.length, f = a[o] = new Array(c), p, g, x = 0; x < c; ++x)
      (p = u[x]) && (g = e.call(p, p.__data__, x, u)) && ("__data__" in p && (g.__data__ = p.__data__), f[x] = g, xb(f[x], t, n, x, f, Go(p, n)));
  return new qu(a, this._parents, t, n);
}
function Wfe(e) {
  var t = this._name, n = this._id;
  typeof e != "function" && (e = wL(e));
  for (var r = this._groups, i = r.length, a = [], o = [], u = 0; u < i; ++u)
    for (var c = r[u], f = c.length, p, g = 0; g < f; ++g)
      if (p = c[g]) {
        for (var x = e.call(p, p.__data__, g, c), b, _ = Go(p, n), E = 0, k = x.length; E < k; ++E)
          (b = x[E]) && xb(b, t, n, E, x, _);
        a.push(x), o.push(p);
      }
  return new qu(a, o, t, n);
}
var Zfe = Ey.prototype.constructor;
function Xfe() {
  return new Zfe(this._groups, this._parents);
}
function Qfe(e, t) {
  var n, r, i;
  return function() {
    var a = um(this, e), o = (this.style.removeProperty(e), um(this, e));
    return a === o ? null : a === n && o === r ? i : i = t(n = a, r = o);
  };
}
function GL(e) {
  return function() {
    this.style.removeProperty(e);
  };
}
function Jfe(e, t, n) {
  var r, i = n + "", a;
  return function() {
    var o = um(this, e);
    return o === i ? null : o === r ? a : a = t(r = o, n);
  };
}
function ede(e, t, n) {
  var r, i, a;
  return function() {
    var o = um(this, e), u = n(this), c = u + "";
    return u == null && (c = u = (this.style.removeProperty(e), um(this, e))), o === c ? null : o === r && c === i ? a : (i = c, a = t(r = o, u));
  };
}
function tde(e, t) {
  var n, r, i, a = "style." + t, o = "end." + a, u;
  return function() {
    var c = Wl(this, e), f = c.on, p = c.value[a] == null ? u || (u = GL(t)) : void 0;
    (f !== n || i !== p) && (r = (n = f).copy()).on(o, i = p), c.on = r;
  };
}
function nde(e, t, n) {
  var r = (e += "") == "transform" ? rfe : HL;
  return t == null ? this.styleTween(e, Qfe(e, r)).on("end.style." + e, GL(e)) : typeof t == "function" ? this.styleTween(e, ede(e, r, lT(this, "style." + e, t))).each(tde(this._id, e)) : this.styleTween(e, Jfe(e, r, t), n).on("end.style." + e, null);
}
function rde(e, t, n) {
  return function(r) {
    this.style.setProperty(e, t.call(this, r), n);
  };
}
function ide(e, t, n) {
  var r, i;
  function a() {
    var o = t.apply(this, arguments);
    return o !== i && (r = (i = o) && rde(e, o, n)), r;
  }
  return a._value = t, a;
}
function sde(e, t, n) {
  var r = "style." + (e += "");
  if (arguments.length < 2) return (r = this.tween(r)) && r._value;
  if (t == null) return this.tween(r, null);
  if (typeof t != "function") throw new Error();
  return this.tween(r, ide(e, t, n ?? ""));
}
function ade(e) {
  return function() {
    this.textContent = e;
  };
}
function ode(e) {
  return function() {
    var t = e(this);
    this.textContent = t ?? "";
  };
}
function lde(e) {
  return this.tween("text", typeof e == "function" ? ode(lT(this, "text", e)) : ade(e == null ? "" : e + ""));
}
function ude(e) {
  return function(t) {
    this.textContent = e.call(this, t);
  };
}
function cde(e) {
  var t, n;
  function r() {
    var i = e.apply(this, arguments);
    return i !== n && (t = (n = i) && ude(i)), t;
  }
  return r._value = e, r;
}
function fde(e) {
  var t = "text";
  if (arguments.length < 1) return (t = this.tween(t)) && t._value;
  if (e == null) return this.tween(t, null);
  if (typeof e != "function") throw new Error();
  return this.tween(t, cde(e));
}
function dde() {
  for (var e = this._name, t = this._id, n = KL(), r = this._groups, i = r.length, a = 0; a < i; ++a)
    for (var o = r[a], u = o.length, c, f = 0; f < u; ++f)
      if (c = o[f]) {
        var p = Go(c, t);
        xb(c, e, n, f, o, {
          time: p.time + p.delay + p.duration,
          delay: 0,
          duration: p.duration,
          ease: p.ease
        });
      }
  return new qu(r, this._parents, e, n);
}
function hde() {
  var e, t, n = this, r = n._id, i = n.size();
  return new Promise(function(a, o) {
    var u = { value: o }, c = { value: function() {
      --i === 0 && a();
    } };
    n.each(function() {
      var f = Wl(this, r), p = f.on;
      p !== e && (t = (e = p).copy(), t._.cancel.push(u), t._.interrupt.push(u), t._.end.push(c)), f.on = t;
    }), i === 0 && a();
  });
}
var pde = 0;
function qu(e, t, n, r) {
  this._groups = e, this._parents = t, this._name = n, this._id = r;
}
function KL() {
  return ++pde;
}
var Nu = Ey.prototype;
qu.prototype = {
  constructor: qu,
  select: Yfe,
  selectAll: Wfe,
  selectChild: Nu.selectChild,
  selectChildren: Nu.selectChildren,
  filter: $fe,
  merge: Ffe,
  selection: Xfe,
  transition: dde,
  call: Nu.call,
  nodes: Nu.nodes,
  node: Nu.node,
  size: Nu.size,
  empty: Nu.empty,
  each: Nu.each,
  on: Hfe,
  attr: Efe,
  attrTween: Nfe,
  style: nde,
  styleTween: sde,
  text: lde,
  textTween: fde,
  remove: Kfe,
  tween: vfe,
  delay: Ofe,
  duration: Pfe,
  ease: Lfe,
  easeVarying: qfe,
  end: hde,
  [Symbol.iterator]: Nu[Symbol.iterator]
};
function mde(e) {
  return ((e *= 2) <= 1 ? e * e * e : (e -= 2) * e * e + 2) / 2;
}
var gde = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: mde
};
function yde(e, t) {
  for (var n; !(n = e.__transition) || !(n = n[t]); )
    if (!(e = e.parentNode))
      throw new Error(`transition ${t} not found`);
  return n;
}
function vde(e) {
  var t, n;
  e instanceof qu ? (t = e._id, e = e._name) : (t = KL(), (n = gde).time = aT(), e = e == null ? null : e + "");
  for (var r = this._groups, i = r.length, a = 0; a < i; ++a)
    for (var o = r[a], u = o.length, c, f = 0; f < u; ++f)
      (c = o[f]) && xb(c, e, t, f, o, n || yde(c, t));
  return new qu(r, this._parents, e, t);
}
Ey.prototype.interrupt = mfe;
Ey.prototype.transition = vde;
const q1 = (e) => () => e;
function xde(e, {
  sourceEvent: t,
  target: n,
  transform: r,
  dispatch: i
}) {
  Object.defineProperties(this, {
    type: { value: e, enumerable: !0, configurable: !0 },
    sourceEvent: { value: t, enumerable: !0, configurable: !0 },
    target: { value: n, enumerable: !0, configurable: !0 },
    transform: { value: r, enumerable: !0, configurable: !0 },
    _: { value: i }
  });
}
function Pu(e, t, n) {
  this.k = e, this.x = t, this.y = n;
}
Pu.prototype = {
  constructor: Pu,
  scale: function(e) {
    return e === 1 ? this : new Pu(this.k * e, this.x, this.y);
  },
  translate: function(e, t) {
    return e === 0 & t === 0 ? this : new Pu(this.k, this.x + this.k * e, this.y + this.k * t);
  },
  apply: function(e) {
    return [e[0] * this.k + this.x, e[1] * this.k + this.y];
  },
  applyX: function(e) {
    return e * this.k + this.x;
  },
  applyY: function(e) {
    return e * this.k + this.y;
  },
  invert: function(e) {
    return [(e[0] - this.x) / this.k, (e[1] - this.y) / this.k];
  },
  invertX: function(e) {
    return (e - this.x) / this.k;
  },
  invertY: function(e) {
    return (e - this.y) / this.k;
  },
  rescaleX: function(e) {
    return e.copy().domain(e.range().map(this.invertX, this).map(e.invert, e));
  },
  rescaleY: function(e) {
    return e.copy().domain(e.range().map(this.invertY, this).map(e.invert, e));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var bb = new Pu(1, 0, 0);
YL.prototype = Pu.prototype;
function YL(e) {
  for (; !e.__zoom; ) if (!(e = e.parentNode)) return bb;
  return e.__zoom;
}
function Lw(e) {
  e.stopImmediatePropagation();
}
function y0(e) {
  e.preventDefault(), e.stopImmediatePropagation();
}
function bde(e) {
  return (!e.ctrlKey || e.type === "wheel") && !e.button;
}
function wde() {
  var e = this;
  return e instanceof SVGElement ? (e = e.ownerSVGElement || e, e.hasAttribute("viewBox") ? (e = e.viewBox.baseVal, [[e.x, e.y], [e.x + e.width, e.y + e.height]]) : [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]]) : [[0, 0], [e.clientWidth, e.clientHeight]];
}
function qN() {
  return this.__zoom || bb;
}
function _de(e) {
  return -e.deltaY * (e.deltaMode === 1 ? 0.05 : e.deltaMode ? 1 : 2e-3) * (e.ctrlKey ? 10 : 1);
}
function Sde() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function Cde(e, t, n) {
  var r = e.invertX(t[0][0]) - n[0][0], i = e.invertX(t[1][0]) - n[1][0], a = e.invertY(t[0][1]) - n[0][1], o = e.invertY(t[1][1]) - n[1][1];
  return e.translate(
    i > r ? (r + i) / 2 : Math.min(0, r) || Math.max(0, i),
    o > a ? (a + o) / 2 : Math.min(0, a) || Math.max(0, o)
  );
}
function WL() {
  var e = bde, t = wde, n = Cde, r = _de, i = Sde, a = [0, 1 / 0], o = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], u = 250, c = ux, f = gb("start", "zoom", "end"), p, g, x, b = 500, _ = 150, E = 0, k = 10;
  function T(J) {
    J.property("__zoom", qN).on("wheel.zoom", G, { passive: !1 }).on("mousedown.zoom", Y).on("dblclick.zoom", W).filter(i).on("touchstart.zoom", F).on("touchmove.zoom", X).on("touchend.zoom touchcancel.zoom", me).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  T.transform = function(J, le, Q, oe) {
    var fe = J.selection ? J.selection() : J;
    fe.property("__zoom", qN), J !== fe ? P(J, le, Q, oe) : fe.interrupt().each(function() {
      z(this, arguments).event(oe).start().zoom(null, typeof le == "function" ? le.apply(this, arguments) : le).end();
    });
  }, T.scaleBy = function(J, le, Q, oe) {
    T.scaleTo(J, function() {
      var fe = this.__zoom.k, ce = typeof le == "function" ? le.apply(this, arguments) : le;
      return fe * ce;
    }, Q, oe);
  }, T.scaleTo = function(J, le, Q, oe) {
    T.transform(J, function() {
      var fe = t.apply(this, arguments), ce = this.__zoom, K = Q == null ? O(fe) : typeof Q == "function" ? Q.apply(this, arguments) : Q, re = ce.invert(K), de = typeof le == "function" ? le.apply(this, arguments) : le;
      return n(N(R(ce, de), K, re), fe, o);
    }, Q, oe);
  }, T.translateBy = function(J, le, Q, oe) {
    T.transform(J, function() {
      return n(this.__zoom.translate(
        typeof le == "function" ? le.apply(this, arguments) : le,
        typeof Q == "function" ? Q.apply(this, arguments) : Q
      ), t.apply(this, arguments), o);
    }, null, oe);
  }, T.translateTo = function(J, le, Q, oe, fe) {
    T.transform(J, function() {
      var ce = t.apply(this, arguments), K = this.__zoom, re = oe == null ? O(ce) : typeof oe == "function" ? oe.apply(this, arguments) : oe;
      return n(bb.translate(re[0], re[1]).scale(K.k).translate(
        typeof le == "function" ? -le.apply(this, arguments) : -le,
        typeof Q == "function" ? -Q.apply(this, arguments) : -Q
      ), ce, o);
    }, oe, fe);
  };
  function R(J, le) {
    return le = Math.max(a[0], Math.min(a[1], le)), le === J.k ? J : new Pu(le, J.x, J.y);
  }
  function N(J, le, Q) {
    var oe = le[0] - Q[0] * J.k, fe = le[1] - Q[1] * J.k;
    return oe === J.x && fe === J.y ? J : new Pu(J.k, oe, fe);
  }
  function O(J) {
    return [(+J[0][0] + +J[1][0]) / 2, (+J[0][1] + +J[1][1]) / 2];
  }
  function P(J, le, Q, oe) {
    J.on("start.zoom", function() {
      z(this, arguments).event(oe).start();
    }).on("interrupt.zoom end.zoom", function() {
      z(this, arguments).event(oe).end();
    }).tween("zoom", function() {
      var fe = this, ce = arguments, K = z(fe, ce).event(oe), re = t.apply(fe, ce), de = Q == null ? O(re) : typeof Q == "function" ? Q.apply(fe, ce) : Q, V = Math.max(re[1][0] - re[0][0], re[1][1] - re[0][1]), ae = fe.__zoom, ge = typeof le == "function" ? le.apply(fe, ce) : le, we = c(ae.invert(de).concat(V / ae.k), ge.invert(de).concat(V / ge.k));
      return function(Re) {
        if (Re === 1) Re = ge;
        else {
          var Ie = we(Re), Me = V / Ie[2];
          Re = new Pu(Me, de[0] - Ie[0] * Me, de[1] - Ie[1] * Me);
        }
        K.zoom(null, Re);
      };
    });
  }
  function z(J, le, Q) {
    return !Q && J.__zooming || new q(J, le);
  }
  function q(J, le) {
    this.that = J, this.args = le, this.active = 0, this.sourceEvent = null, this.extent = t.apply(J, le), this.taps = 0;
  }
  q.prototype = {
    event: function(J) {
      return J && (this.sourceEvent = J), this;
    },
    start: function() {
      return ++this.active === 1 && (this.that.__zooming = this, this.emit("start")), this;
    },
    zoom: function(J, le) {
      return this.mouse && J !== "mouse" && (this.mouse[1] = le.invert(this.mouse[0])), this.touch0 && J !== "touch" && (this.touch0[1] = le.invert(this.touch0[0])), this.touch1 && J !== "touch" && (this.touch1[1] = le.invert(this.touch1[0])), this.that.__zoom = le, this.emit("zoom"), this;
    },
    end: function() {
      return --this.active === 0 && (delete this.that.__zooming, this.emit("end")), this;
    },
    emit: function(J) {
      var le = ka(this.that).datum();
      f.call(
        J,
        this.that,
        new xde(J, {
          sourceEvent: this.sourceEvent,
          target: T,
          transform: this.that.__zoom,
          dispatch: f
        }),
        le
      );
    }
  };
  function G(J, ...le) {
    if (!e.apply(this, arguments)) return;
    var Q = z(this, le).event(J), oe = this.__zoom, fe = Math.max(a[0], Math.min(a[1], oe.k * Math.pow(2, r.apply(this, arguments)))), ce = Lo(J);
    if (Q.wheel)
      (Q.mouse[0][0] !== ce[0] || Q.mouse[0][1] !== ce[1]) && (Q.mouse[1] = oe.invert(Q.mouse[0] = ce)), clearTimeout(Q.wheel);
    else {
      if (oe.k === fe) return;
      Q.mouse = [ce, oe.invert(ce)], dx(this), Q.start();
    }
    y0(J), Q.wheel = setTimeout(K, _), Q.zoom("mouse", n(N(R(oe, fe), Q.mouse[0], Q.mouse[1]), Q.extent, o));
    function K() {
      Q.wheel = null, Q.end();
    }
  }
  function Y(J, ...le) {
    if (x || !e.apply(this, arguments)) return;
    var Q = J.currentTarget, oe = z(this, le, !0).event(J), fe = ka(J.view).on("mousemove.zoom", de, !0).on("mouseup.zoom", V, !0), ce = Lo(J, Q), K = J.clientX, re = J.clientY;
    ML(J.view), Lw(J), oe.mouse = [ce, this.__zoom.invert(ce)], dx(this), oe.start();
    function de(ae) {
      if (y0(ae), !oe.moved) {
        var ge = ae.clientX - K, we = ae.clientY - re;
        oe.moved = ge * ge + we * we > E;
      }
      oe.event(ae).zoom("mouse", n(N(oe.that.__zoom, oe.mouse[0] = Lo(ae, Q), oe.mouse[1]), oe.extent, o));
    }
    function V(ae) {
      fe.on("mousemove.zoom mouseup.zoom", null), OL(ae.view, oe.moved), y0(ae), oe.event(ae).end();
    }
  }
  function W(J, ...le) {
    if (e.apply(this, arguments)) {
      var Q = this.__zoom, oe = Lo(J.changedTouches ? J.changedTouches[0] : J, this), fe = Q.invert(oe), ce = Q.k * (J.shiftKey ? 0.5 : 2), K = n(N(R(Q, ce), oe, fe), t.apply(this, le), o);
      y0(J), u > 0 ? ka(this).transition().duration(u).call(P, K, oe, J) : ka(this).call(T.transform, K, oe, J);
    }
  }
  function F(J, ...le) {
    if (e.apply(this, arguments)) {
      var Q = J.touches, oe = Q.length, fe = z(this, le, J.changedTouches.length === oe).event(J), ce, K, re, de;
      for (Lw(J), K = 0; K < oe; ++K)
        re = Q[K], de = Lo(re, this), de = [de, this.__zoom.invert(de), re.identifier], fe.touch0 ? !fe.touch1 && fe.touch0[2] !== de[2] && (fe.touch1 = de, fe.taps = 0) : (fe.touch0 = de, ce = !0, fe.taps = 1 + !!p);
      p && (p = clearTimeout(p)), ce && (fe.taps < 2 && (g = de[0], p = setTimeout(function() {
        p = null;
      }, b)), dx(this), fe.start());
    }
  }
  function X(J, ...le) {
    if (this.__zooming) {
      var Q = z(this, le).event(J), oe = J.changedTouches, fe = oe.length, ce, K, re, de;
      for (y0(J), ce = 0; ce < fe; ++ce)
        K = oe[ce], re = Lo(K, this), Q.touch0 && Q.touch0[2] === K.identifier ? Q.touch0[0] = re : Q.touch1 && Q.touch1[2] === K.identifier && (Q.touch1[0] = re);
      if (K = Q.that.__zoom, Q.touch1) {
        var V = Q.touch0[0], ae = Q.touch0[1], ge = Q.touch1[0], we = Q.touch1[1], Re = (Re = ge[0] - V[0]) * Re + (Re = ge[1] - V[1]) * Re, Ie = (Ie = we[0] - ae[0]) * Ie + (Ie = we[1] - ae[1]) * Ie;
        K = R(K, Math.sqrt(Re / Ie)), re = [(V[0] + ge[0]) / 2, (V[1] + ge[1]) / 2], de = [(ae[0] + we[0]) / 2, (ae[1] + we[1]) / 2];
      } else if (Q.touch0) re = Q.touch0[0], de = Q.touch0[1];
      else return;
      Q.zoom("touch", n(N(K, re, de), Q.extent, o));
    }
  }
  function me(J, ...le) {
    if (this.__zooming) {
      var Q = z(this, le).event(J), oe = J.changedTouches, fe = oe.length, ce, K;
      for (Lw(J), x && clearTimeout(x), x = setTimeout(function() {
        x = null;
      }, b), ce = 0; ce < fe; ++ce)
        K = oe[ce], Q.touch0 && Q.touch0[2] === K.identifier ? delete Q.touch0 : Q.touch1 && Q.touch1[2] === K.identifier && delete Q.touch1;
      if (Q.touch1 && !Q.touch0 && (Q.touch0 = Q.touch1, delete Q.touch1), Q.touch0) Q.touch0[1] = this.__zoom.invert(Q.touch0[0]);
      else if (Q.end(), Q.taps === 2 && (K = Lo(K, this), Math.hypot(g[0] - K[0], g[1] - K[1]) < k)) {
        var re = ka(this).on("dblclick.zoom");
        re && re.apply(this, arguments);
      }
    }
  }
  return T.wheelDelta = function(J) {
    return arguments.length ? (r = typeof J == "function" ? J : q1(+J), T) : r;
  }, T.filter = function(J) {
    return arguments.length ? (e = typeof J == "function" ? J : q1(!!J), T) : e;
  }, T.touchable = function(J) {
    return arguments.length ? (i = typeof J == "function" ? J : q1(!!J), T) : i;
  }, T.extent = function(J) {
    return arguments.length ? (t = typeof J == "function" ? J : q1([[+J[0][0], +J[0][1]], [+J[1][0], +J[1][1]]]), T) : t;
  }, T.scaleExtent = function(J) {
    return arguments.length ? (a[0] = +J[0], a[1] = +J[1], T) : [a[0], a[1]];
  }, T.translateExtent = function(J) {
    return arguments.length ? (o[0][0] = +J[0][0], o[1][0] = +J[1][0], o[0][1] = +J[0][1], o[1][1] = +J[1][1], T) : [[o[0][0], o[0][1]], [o[1][0], o[1][1]]];
  }, T.constrain = function(J) {
    return arguments.length ? (n = J, T) : n;
  }, T.duration = function(J) {
    return arguments.length ? (u = +J, T) : u;
  }, T.interpolate = function(J) {
    return arguments.length ? (c = J, T) : c;
  }, T.on = function() {
    var J = f.on.apply(f, arguments);
    return J === f ? T : J;
  }, T.clickDistance = function(J) {
    return arguments.length ? (E = (J = +J) * J, T) : Math.sqrt(E);
  }, T.tapDistance = function(J) {
    return arguments.length ? (k = +J, T) : k;
  }, T;
}
const Gl = {
  error001: () => "[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",
  error002: () => "It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",
  error003: (e) => `Node type "${e}" not found. Using fallback type "default".`,
  error004: () => "The React Flow parent container needs a width and a height to render the graph.",
  error005: () => "Only child nodes can use a parent extent.",
  error006: () => "Can't create edge. An edge needs a source and a target.",
  error007: (e) => `The old edge with id=${e} does not exist.`,
  error009: (e) => `Marker type "${e}" doesn't exist.`,
  error008: (e, { id: t, sourceHandle: n, targetHandle: r }) => `Couldn't create edge for ${e} handle id: "${e === "source" ? n : r}", edge id: ${t}.`,
  error010: () => "Handle: No node id found. Make sure to only use a Handle inside a custom Node.",
  error011: (e) => `Edge type "${e}" not found. Using fallback type "default".`,
  error012: (e) => `Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,
  error013: (e = "react") => `It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,
  error014: () => "useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",
  error015: () => "It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."
}, sy = [
  [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],
  [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY]
], ZL = ["Enter", " ", "Escape"], XL = {
  "node.a11yDescription.default": "Press enter or space to select a node. Press delete to remove it and escape to cancel.",
  "node.a11yDescription.keyboardDisabled": "Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.",
  "node.a11yDescription.ariaLiveMessage": ({ direction: e, x: t, y: n }) => `Moved selected node ${e}. New position, x: ${t}, y: ${n}`,
  "edge.a11yDescription.default": "Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.",
  // Control elements
  "controls.ariaLabel": "Control Panel",
  "controls.zoomIn.ariaLabel": "Zoom In",
  "controls.zoomOut.ariaLabel": "Zoom Out",
  "controls.fitView.ariaLabel": "Fit View",
  "controls.interactive.ariaLabel": "Toggle Interactivity",
  // Mini map
  "minimap.ariaLabel": "Mini Map",
  // Handle
  "handle.ariaLabel": "Handle"
};
var fm;
(function(e) {
  e.Strict = "strict", e.Loose = "loose";
})(fm || (fm = {}));
var Wd;
(function(e) {
  e.Free = "free", e.Vertical = "vertical", e.Horizontal = "horizontal";
})(Wd || (Wd = {}));
var ay;
(function(e) {
  e.Partial = "partial", e.Full = "full";
})(ay || (ay = {}));
const QL = {
  inProgress: !1,
  isValid: null,
  from: null,
  fromHandle: null,
  fromPosition: null,
  fromNode: null,
  to: null,
  toHandle: null,
  toPosition: null,
  toNode: null,
  pointer: null
};
var Jc;
(function(e) {
  e.Bezier = "default", e.Straight = "straight", e.Step = "step", e.SmoothStep = "smoothstep", e.SimpleBezier = "simplebezier";
})(Jc || (Jc = {}));
var oy;
(function(e) {
  e.Arrow = "arrow", e.ArrowClosed = "arrowclosed";
})(oy || (oy = {}));
var vt;
(function(e) {
  e.Left = "left", e.Top = "top", e.Right = "right", e.Bottom = "bottom";
})(vt || (vt = {}));
const $N = {
  [vt.Left]: vt.Right,
  [vt.Right]: vt.Left,
  [vt.Top]: vt.Bottom,
  [vt.Bottom]: vt.Top
};
function JL(e) {
  return e === null ? null : e ? "valid" : "invalid";
}
const eB = (e) => "id" in e && "source" in e && "target" in e, Ede = (e) => "id" in e && "position" in e && !("source" in e) && !("target" in e), uT = (e) => "id" in e && "internals" in e && !("source" in e) && !("target" in e), Ty = (e, t = [0, 0]) => {
  const { width: n, height: r } = Uu(e), i = e.origin ?? t, a = n * i[0], o = r * i[1];
  return {
    x: e.position.x - a,
    y: e.position.y - o
  };
}, kde = (e, t = { nodeOrigin: [0, 0] }) => {
  if (e.length === 0)
    return { x: 0, y: 0, width: 0, height: 0 };
  const n = e.reduce((r, i) => {
    const a = typeof i == "string";
    let o = !t.nodeLookup && !a ? i : void 0;
    t.nodeLookup && (o = a ? t.nodeLookup.get(i) : uT(i) ? i : t.nodeLookup.get(i.id));
    const u = o ? Fx(o, t.nodeOrigin) : { x: 0, y: 0, x2: 0, y2: 0 };
    return wb(r, u);
  }, { x: 1 / 0, y: 1 / 0, x2: -1 / 0, y2: -1 / 0 });
  return _b(n);
}, Ay = (e, t = {}) => {
  let n = { x: 1 / 0, y: 1 / 0, x2: -1 / 0, y2: -1 / 0 }, r = !1;
  return e.forEach((i) => {
    (t.filter === void 0 || t.filter(i)) && (n = wb(n, Fx(i)), r = !0);
  }), r ? _b(n) : { x: 0, y: 0, width: 0, height: 0 };
}, cT = (e, t, [n, r, i] = [0, 0, 1], a = !1, o = !1) => {
  const u = {
    ...Ny(t, [n, r, i]),
    width: t.width / i,
    height: t.height / i
  }, c = [];
  for (const f of e.values()) {
    const { measured: p, selectable: g = !0, hidden: x = !1 } = f;
    if (o && !g || x)
      continue;
    const b = p.width ?? f.width ?? f.initialWidth ?? null, _ = p.height ?? f.height ?? f.initialHeight ?? null, E = ly(u, hm(f)), k = (b ?? 0) * (_ ?? 0), T = a && E > 0;
    (!f.internals.handleBounds || T || E >= k || f.dragging) && c.push(f);
  }
  return c;
}, Tde = (e, t) => {
  const n = /* @__PURE__ */ new Set();
  return e.forEach((r) => {
    n.add(r.id);
  }), t.filter((r) => n.has(r.source) || n.has(r.target));
};
function Ade(e, t) {
  const n = /* @__PURE__ */ new Map(), r = t != null && t.nodes ? new Set(t.nodes.map((i) => i.id)) : null;
  return e.forEach((i) => {
    i.measured.width && i.measured.height && ((t == null ? void 0 : t.includeHiddenNodes) || !i.hidden) && (!r || r.has(i.id)) && n.set(i.id, i);
  }), n;
}
async function jde({ nodes: e, width: t, height: n, panZoom: r, minZoom: i, maxZoom: a }, o) {
  if (e.size === 0)
    return Promise.resolve(!0);
  const u = Ade(e, o), c = Ay(u), f = fT(c, t, n, (o == null ? void 0 : o.minZoom) ?? i, (o == null ? void 0 : o.maxZoom) ?? a, (o == null ? void 0 : o.padding) ?? 0.1);
  return await r.setViewport(f, {
    duration: o == null ? void 0 : o.duration,
    ease: o == null ? void 0 : o.ease,
    interpolate: o == null ? void 0 : o.interpolate
  }), Promise.resolve(!0);
}
function tB({ nodeId: e, nextPosition: t, nodeLookup: n, nodeOrigin: r = [0, 0], nodeExtent: i, onError: a }) {
  const o = n.get(e), u = o.parentId ? n.get(o.parentId) : void 0, { x: c, y: f } = u ? u.internals.positionAbsolute : { x: 0, y: 0 }, p = o.origin ?? r;
  let g = o.extent || i;
  if (o.extent === "parent" && !o.expandParent)
    if (!u)
      a == null || a("005", Gl.error005());
    else {
      const b = u.measured.width, _ = u.measured.height;
      b && _ && (g = [
        [c, f],
        [c + b, f + _]
      ]);
    }
  else u && pm(o.extent) && (g = [
    [o.extent[0][0] + c, o.extent[0][1] + f],
    [o.extent[1][0] + c, o.extent[1][1] + f]
  ]);
  const x = pm(g) ? nh(t, g, o.measured) : t;
  return (o.measured.width === void 0 || o.measured.height === void 0) && (a == null || a("015", Gl.error015())), {
    position: {
      x: x.x - c + (o.measured.width ?? 0) * p[0],
      y: x.y - f + (o.measured.height ?? 0) * p[1]
    },
    positionAbsolute: x
  };
}
async function Nde({ nodesToRemove: e = [], edgesToRemove: t = [], nodes: n, edges: r, onBeforeDelete: i }) {
  const a = new Set(e.map((x) => x.id)), o = [];
  for (const x of n) {
    if (x.deletable === !1)
      continue;
    const b = a.has(x.id), _ = !b && x.parentId && o.find((E) => E.id === x.parentId);
    (b || _) && o.push(x);
  }
  const u = new Set(t.map((x) => x.id)), c = r.filter((x) => x.deletable !== !1), p = Tde(o, c);
  for (const x of c)
    u.has(x.id) && !p.find((_) => _.id === x.id) && p.push(x);
  if (!i)
    return {
      edges: p,
      nodes: o
    };
  const g = await i({
    nodes: o,
    edges: p
  });
  return typeof g == "boolean" ? g ? { edges: p, nodes: o } : { edges: [], nodes: [] } : g;
}
const dm = (e, t = 0, n = 1) => Math.min(Math.max(e, t), n), nh = (e = { x: 0, y: 0 }, t, n) => ({
  x: dm(e.x, t[0][0], t[1][0] - ((n == null ? void 0 : n.width) ?? 0)),
  y: dm(e.y, t[0][1], t[1][1] - ((n == null ? void 0 : n.height) ?? 0))
});
function nB(e, t, n) {
  const { width: r, height: i } = Uu(n), { x: a, y: o } = n.internals.positionAbsolute;
  return nh(e, [
    [a, o],
    [a + r, o + i]
  ], t);
}
const FN = (e, t, n) => e < t ? dm(Math.abs(e - t), 1, t) / t : e > n ? -dm(Math.abs(e - n), 1, t) / t : 0, rB = (e, t, n = 15, r = 40) => {
  const i = FN(e.x, r, t.width - r) * n, a = FN(e.y, r, t.height - r) * n;
  return [i, a];
}, wb = (e, t) => ({
  x: Math.min(e.x, t.x),
  y: Math.min(e.y, t.y),
  x2: Math.max(e.x2, t.x2),
  y2: Math.max(e.y2, t.y2)
}), C5 = ({ x: e, y: t, width: n, height: r }) => ({
  x: e,
  y: t,
  x2: e + n,
  y2: t + r
}), _b = ({ x: e, y: t, x2: n, y2: r }) => ({
  x: e,
  y: t,
  width: n - e,
  height: r - t
}), hm = (e, t = [0, 0]) => {
  var i, a;
  const { x: n, y: r } = uT(e) ? e.internals.positionAbsolute : Ty(e, t);
  return {
    x: n,
    y: r,
    width: ((i = e.measured) == null ? void 0 : i.width) ?? e.width ?? e.initialWidth ?? 0,
    height: ((a = e.measured) == null ? void 0 : a.height) ?? e.height ?? e.initialHeight ?? 0
  };
}, Fx = (e, t = [0, 0]) => {
  var i, a;
  const { x: n, y: r } = uT(e) ? e.internals.positionAbsolute : Ty(e, t);
  return {
    x: n,
    y: r,
    x2: n + (((i = e.measured) == null ? void 0 : i.width) ?? e.width ?? e.initialWidth ?? 0),
    y2: r + (((a = e.measured) == null ? void 0 : a.height) ?? e.height ?? e.initialHeight ?? 0)
  };
}, iB = (e, t) => _b(wb(C5(e), C5(t))), ly = (e, t) => {
  const n = Math.max(0, Math.min(e.x + e.width, t.x + t.width) - Math.max(e.x, t.x)), r = Math.max(0, Math.min(e.y + e.height, t.y + t.height) - Math.max(e.y, t.y));
  return Math.ceil(n * r);
}, UN = (e) => Fo(e.width) && Fo(e.height) && Fo(e.x) && Fo(e.y), Fo = (e) => !isNaN(e) && isFinite(e), Rde = (e, t) => {
}, jy = (e, t = [1, 1]) => ({
  x: t[0] * Math.round(e.x / t[0]),
  y: t[1] * Math.round(e.y / t[1])
}), Ny = ({ x: e, y: t }, [n, r, i], a = !1, o = [1, 1]) => {
  const u = {
    x: (e - n) / i,
    y: (t - r) / i
  };
  return a ? jy(u, o) : u;
}, Ux = ({ x: e, y: t }, [n, r, i]) => ({
  x: e * i + n,
  y: t * i + r
});
function Mp(e, t) {
  if (typeof e == "number")
    return Math.floor((t - t / (1 + e)) * 0.5);
  if (typeof e == "string" && e.endsWith("px")) {
    const n = parseFloat(e);
    if (!Number.isNaN(n))
      return Math.floor(n);
  }
  if (typeof e == "string" && e.endsWith("%")) {
    const n = parseFloat(e);
    if (!Number.isNaN(n))
      return Math.floor(t * n * 0.01);
  }
  return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`), 0;
}
function Mde(e, t, n) {
  if (typeof e == "string" || typeof e == "number") {
    const r = Mp(e, n), i = Mp(e, t);
    return {
      top: r,
      right: i,
      bottom: r,
      left: i,
      x: i * 2,
      y: r * 2
    };
  }
  if (typeof e == "object") {
    const r = Mp(e.top ?? e.y ?? 0, n), i = Mp(e.bottom ?? e.y ?? 0, n), a = Mp(e.left ?? e.x ?? 0, t), o = Mp(e.right ?? e.x ?? 0, t);
    return { top: r, right: o, bottom: i, left: a, x: a + o, y: r + i };
  }
  return { top: 0, right: 0, bottom: 0, left: 0, x: 0, y: 0 };
}
function Ode(e, t, n, r, i, a) {
  const { x: o, y: u } = Ux(e, [t, n, r]), { x: c, y: f } = Ux({ x: e.x + e.width, y: e.y + e.height }, [t, n, r]), p = i - c, g = a - f;
  return {
    left: Math.floor(o),
    top: Math.floor(u),
    right: Math.floor(p),
    bottom: Math.floor(g)
  };
}
const fT = (e, t, n, r, i, a) => {
  const o = Mde(a, t, n), u = (t - o.x) / e.width, c = (n - o.y) / e.height, f = Math.min(u, c), p = dm(f, r, i), g = e.x + e.width / 2, x = e.y + e.height / 2, b = t / 2 - g * p, _ = n / 2 - x * p, E = Ode(e, b, _, p, t, n), k = {
    left: Math.min(E.left - o.left, 0),
    top: Math.min(E.top - o.top, 0),
    right: Math.min(E.right - o.right, 0),
    bottom: Math.min(E.bottom - o.bottom, 0)
  };
  return {
    x: b - k.left + k.right,
    y: _ - k.top + k.bottom,
    zoom: p
  };
}, uy = () => {
  var e;
  return typeof navigator < "u" && ((e = navigator == null ? void 0 : navigator.userAgent) == null ? void 0 : e.indexOf("Mac")) >= 0;
};
function pm(e) {
  return e != null && e !== "parent";
}
function Uu(e) {
  var t, n;
  return {
    width: ((t = e.measured) == null ? void 0 : t.width) ?? e.width ?? e.initialWidth ?? 0,
    height: ((n = e.measured) == null ? void 0 : n.height) ?? e.height ?? e.initialHeight ?? 0
  };
}
function sB(e) {
  var t, n;
  return (((t = e.measured) == null ? void 0 : t.width) ?? e.width ?? e.initialWidth) !== void 0 && (((n = e.measured) == null ? void 0 : n.height) ?? e.height ?? e.initialHeight) !== void 0;
}
function aB(e, t = { width: 0, height: 0 }, n, r, i) {
  const a = { ...e }, o = r.get(n);
  if (o) {
    const u = o.origin || i;
    a.x += o.internals.positionAbsolute.x - (t.width ?? 0) * u[0], a.y += o.internals.positionAbsolute.y - (t.height ?? 0) * u[1];
  }
  return a;
}
function VN(e, t) {
  if (e.size !== t.size)
    return !1;
  for (const n of e)
    if (!t.has(n))
      return !1;
  return !0;
}
function Dde() {
  let e, t;
  return { promise: new Promise((r, i) => {
    e = r, t = i;
  }), resolve: e, reject: t };
}
function zde(e) {
  return { ...XL, ...e || {} };
}
function q0(e, { snapGrid: t = [0, 0], snapToGrid: n = !1, transform: r, containerBounds: i }) {
  const { x: a, y: o } = Uo(e), u = Ny({ x: a - ((i == null ? void 0 : i.left) ?? 0), y: o - ((i == null ? void 0 : i.top) ?? 0) }, r), { x: c, y: f } = n ? jy(u, t) : u;
  return {
    xSnapped: c,
    ySnapped: f,
    ...u
  };
}
const dT = (e) => ({
  width: e.offsetWidth,
  height: e.offsetHeight
}), oB = (e) => {
  var t;
  return ((t = e == null ? void 0 : e.getRootNode) == null ? void 0 : t.call(e)) || (window == null ? void 0 : window.document);
}, Pde = ["INPUT", "SELECT", "TEXTAREA"];
function lB(e) {
  var r, i;
  const t = ((i = (r = e.composedPath) == null ? void 0 : r.call(e)) == null ? void 0 : i[0]) || e.target;
  return (t == null ? void 0 : t.nodeType) !== 1 ? !1 : Pde.includes(t.nodeName) || t.hasAttribute("contenteditable") || !!t.closest(".nokey");
}
const uB = (e) => "clientX" in e, Uo = (e, t) => {
  var a, o;
  const n = uB(e), r = n ? e.clientX : (a = e.touches) == null ? void 0 : a[0].clientX, i = n ? e.clientY : (o = e.touches) == null ? void 0 : o[0].clientY;
  return {
    x: r - ((t == null ? void 0 : t.left) ?? 0),
    y: i - ((t == null ? void 0 : t.top) ?? 0)
  };
}, HN = (e, t, n, r, i) => {
  const a = t.querySelectorAll(`.${e}`);
  return !a || !a.length ? null : Array.from(a).map((o) => {
    const u = o.getBoundingClientRect();
    return {
      id: o.getAttribute("data-handleid"),
      type: e,
      nodeId: i,
      position: o.getAttribute("data-handlepos"),
      x: (u.left - n.left) / r,
      y: (u.top - n.top) / r,
      ...dT(o)
    };
  });
};
function cB({ sourceX: e, sourceY: t, targetX: n, targetY: r, sourceControlX: i, sourceControlY: a, targetControlX: o, targetControlY: u }) {
  const c = e * 0.125 + i * 0.375 + o * 0.375 + n * 0.125, f = t * 0.125 + a * 0.375 + u * 0.375 + r * 0.125, p = Math.abs(c - e), g = Math.abs(f - t);
  return [c, f, p, g];
}
function $1(e, t) {
  return e >= 0 ? 0.5 * e : t * 25 * Math.sqrt(-e);
}
function GN({ pos: e, x1: t, y1: n, x2: r, y2: i, c: a }) {
  switch (e) {
    case vt.Left:
      return [t - $1(t - r, a), n];
    case vt.Right:
      return [t + $1(r - t, a), n];
    case vt.Top:
      return [t, n - $1(n - i, a)];
    case vt.Bottom:
      return [t, n + $1(i - n, a)];
  }
}
function fB({ sourceX: e, sourceY: t, sourcePosition: n = vt.Bottom, targetX: r, targetY: i, targetPosition: a = vt.Top, curvature: o = 0.25 }) {
  const [u, c] = GN({
    pos: n,
    x1: e,
    y1: t,
    x2: r,
    y2: i,
    c: o
  }), [f, p] = GN({
    pos: a,
    x1: r,
    y1: i,
    x2: e,
    y2: t,
    c: o
  }), [g, x, b, _] = cB({
    sourceX: e,
    sourceY: t,
    targetX: r,
    targetY: i,
    sourceControlX: u,
    sourceControlY: c,
    targetControlX: f,
    targetControlY: p
  });
  return [
    `M${e},${t} C${u},${c} ${f},${p} ${r},${i}`,
    g,
    x,
    b,
    _
  ];
}
function dB({ sourceX: e, sourceY: t, targetX: n, targetY: r }) {
  const i = Math.abs(n - e) / 2, a = n < e ? n + i : n - i, o = Math.abs(r - t) / 2, u = r < t ? r + o : r - o;
  return [a, u, i, o];
}
function Ide({ sourceNode: e, targetNode: t, selected: n = !1, zIndex: r = 0, elevateOnSelect: i = !1, zIndexMode: a = "basic" }) {
  if (a === "manual")
    return r;
  const o = i && n ? r + 1e3 : r, u = Math.max(e.parentId || i && e.selected ? e.internals.z : 0, t.parentId || i && t.selected ? t.internals.z : 0);
  return o + u;
}
function Lde({ sourceNode: e, targetNode: t, width: n, height: r, transform: i }) {
  const a = wb(Fx(e), Fx(t));
  a.x === a.x2 && (a.x2 += 1), a.y === a.y2 && (a.y2 += 1);
  const o = {
    x: -i[0] / i[2],
    y: -i[1] / i[2],
    width: n / i[2],
    height: r / i[2]
  };
  return ly(o, _b(a)) > 0;
}
const Bde = ({ source: e, sourceHandle: t, target: n, targetHandle: r }) => `xy-edge__${e}${t || ""}-${n}${r || ""}`, qde = (e, t) => t.some((n) => n.source === e.source && n.target === e.target && (n.sourceHandle === e.sourceHandle || !n.sourceHandle && !e.sourceHandle) && (n.targetHandle === e.targetHandle || !n.targetHandle && !e.targetHandle)), $de = (e, t, n = {}) => {
  if (!e.source || !e.target)
    return t;
  const r = n.getEdgeId || Bde;
  let i;
  return eB(e) ? i = { ...e } : i = {
    ...e,
    id: r(e)
  }, qde(i, t) ? t : (i.sourceHandle === null && delete i.sourceHandle, i.targetHandle === null && delete i.targetHandle, t.concat(i));
};
function hB({ sourceX: e, sourceY: t, targetX: n, targetY: r }) {
  const [i, a, o, u] = dB({
    sourceX: e,
    sourceY: t,
    targetX: n,
    targetY: r
  });
  return [`M ${e},${t}L ${n},${r}`, i, a, o, u];
}
const KN = {
  [vt.Left]: { x: -1, y: 0 },
  [vt.Right]: { x: 1, y: 0 },
  [vt.Top]: { x: 0, y: -1 },
  [vt.Bottom]: { x: 0, y: 1 }
}, Fde = ({ source: e, sourcePosition: t = vt.Bottom, target: n }) => t === vt.Left || t === vt.Right ? e.x < n.x ? { x: 1, y: 0 } : { x: -1, y: 0 } : e.y < n.y ? { x: 0, y: 1 } : { x: 0, y: -1 }, YN = (e, t) => Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2));
function Ude({ source: e, sourcePosition: t = vt.Bottom, target: n, targetPosition: r = vt.Top, center: i, offset: a, stepPosition: o }) {
  const u = KN[t], c = KN[r], f = { x: e.x + u.x * a, y: e.y + u.y * a }, p = { x: n.x + c.x * a, y: n.y + c.y * a }, g = Fde({
    source: f,
    sourcePosition: t,
    target: p
  }), x = g.x !== 0 ? "x" : "y", b = g[x];
  let _ = [], E, k;
  const T = { x: 0, y: 0 }, R = { x: 0, y: 0 }, [, , N, O] = dB({
    sourceX: e.x,
    sourceY: e.y,
    targetX: n.x,
    targetY: n.y
  });
  if (u[x] * c[x] === -1) {
    x === "x" ? (E = i.x ?? f.x + (p.x - f.x) * o, k = i.y ?? (f.y + p.y) / 2) : (E = i.x ?? (f.x + p.x) / 2, k = i.y ?? f.y + (p.y - f.y) * o);
    const z = [
      { x: E, y: f.y },
      { x: E, y: p.y }
    ], q = [
      { x: f.x, y: k },
      { x: p.x, y: k }
    ];
    u[x] === b ? _ = x === "x" ? z : q : _ = x === "x" ? q : z;
  } else {
    const z = [{ x: f.x, y: p.y }], q = [{ x: p.x, y: f.y }];
    if (x === "x" ? _ = u.x === b ? q : z : _ = u.y === b ? z : q, t === r) {
      const X = Math.abs(e[x] - n[x]);
      if (X <= a) {
        const me = Math.min(a - 1, a - X);
        u[x] === b ? T[x] = (f[x] > e[x] ? -1 : 1) * me : R[x] = (p[x] > n[x] ? -1 : 1) * me;
      }
    }
    if (t !== r) {
      const X = x === "x" ? "y" : "x", me = u[x] === c[X], J = f[X] > p[X], le = f[X] < p[X];
      (u[x] === 1 && (!me && J || me && le) || u[x] !== 1 && (!me && le || me && J)) && (_ = x === "x" ? z : q);
    }
    const G = { x: f.x + T.x, y: f.y + T.y }, Y = { x: p.x + R.x, y: p.y + R.y }, W = Math.max(Math.abs(G.x - _[0].x), Math.abs(Y.x - _[0].x)), F = Math.max(Math.abs(G.y - _[0].y), Math.abs(Y.y - _[0].y));
    W >= F ? (E = (G.x + Y.x) / 2, k = _[0].y) : (E = _[0].x, k = (G.y + Y.y) / 2);
  }
  return [[
    e,
    { x: f.x + T.x, y: f.y + T.y },
    ..._,
    { x: p.x + R.x, y: p.y + R.y },
    n
  ], E, k, N, O];
}
function Vde(e, t, n, r) {
  const i = Math.min(YN(e, t) / 2, YN(t, n) / 2, r), { x: a, y: o } = t;
  if (e.x === a && a === n.x || e.y === o && o === n.y)
    return `L${a} ${o}`;
  if (e.y === o) {
    const f = e.x < n.x ? -1 : 1, p = e.y < n.y ? 1 : -1;
    return `L ${a + i * f},${o}Q ${a},${o} ${a},${o + i * p}`;
  }
  const u = e.x < n.x ? 1 : -1, c = e.y < n.y ? -1 : 1;
  return `L ${a},${o + i * c}Q ${a},${o} ${a + i * u},${o}`;
}
function E5({ sourceX: e, sourceY: t, sourcePosition: n = vt.Bottom, targetX: r, targetY: i, targetPosition: a = vt.Top, borderRadius: o = 5, centerX: u, centerY: c, offset: f = 20, stepPosition: p = 0.5 }) {
  const [g, x, b, _, E] = Ude({
    source: { x: e, y: t },
    sourcePosition: n,
    target: { x: r, y: i },
    targetPosition: a,
    center: { x: u, y: c },
    offset: f,
    stepPosition: p
  });
  return [g.reduce((T, R, N) => {
    let O = "";
    return N > 0 && N < g.length - 1 ? O = Vde(g[N - 1], R, g[N + 1], o) : O = `${N === 0 ? "M" : "L"}${R.x} ${R.y}`, T += O, T;
  }, ""), x, b, _, E];
}
function WN(e) {
  var t;
  return e && !!(e.internals.handleBounds || (t = e.handles) != null && t.length) && !!(e.measured.width || e.width || e.initialWidth);
}
function Hde(e) {
  var g;
  const { sourceNode: t, targetNode: n } = e;
  if (!WN(t) || !WN(n))
    return null;
  const r = t.internals.handleBounds || ZN(t.handles), i = n.internals.handleBounds || ZN(n.handles), a = XN((r == null ? void 0 : r.source) ?? [], e.sourceHandle), o = XN(
    // when connection type is loose we can define all handles as sources and connect source -> source
    e.connectionMode === fm.Strict ? (i == null ? void 0 : i.target) ?? [] : ((i == null ? void 0 : i.target) ?? []).concat((i == null ? void 0 : i.source) ?? []),
    e.targetHandle
  );
  if (!a || !o)
    return (g = e.onError) == null || g.call(e, "008", Gl.error008(a ? "target" : "source", {
      id: e.id,
      sourceHandle: e.sourceHandle,
      targetHandle: e.targetHandle
    })), null;
  const u = (a == null ? void 0 : a.position) || vt.Bottom, c = (o == null ? void 0 : o.position) || vt.Top, f = rh(t, a, u), p = rh(n, o, c);
  return {
    sourceX: f.x,
    sourceY: f.y,
    targetX: p.x,
    targetY: p.y,
    sourcePosition: u,
    targetPosition: c
  };
}
function ZN(e) {
  if (!e)
    return null;
  const t = [], n = [];
  for (const r of e)
    r.width = r.width ?? 1, r.height = r.height ?? 1, r.type === "source" ? t.push(r) : r.type === "target" && n.push(r);
  return {
    source: t,
    target: n
  };
}
function rh(e, t, n = vt.Left, r = !1) {
  const i = ((t == null ? void 0 : t.x) ?? 0) + e.internals.positionAbsolute.x, a = ((t == null ? void 0 : t.y) ?? 0) + e.internals.positionAbsolute.y, { width: o, height: u } = t ?? Uu(e);
  if (r)
    return { x: i + o / 2, y: a + u / 2 };
  switch ((t == null ? void 0 : t.position) ?? n) {
    case vt.Top:
      return { x: i + o / 2, y: a };
    case vt.Right:
      return { x: i + o, y: a + u / 2 };
    case vt.Bottom:
      return { x: i + o / 2, y: a + u };
    case vt.Left:
      return { x: i, y: a + u / 2 };
  }
}
function XN(e, t) {
  return e && (t ? e.find((n) => n.id === t) : e[0]) || null;
}
function k5(e, t) {
  return e ? typeof e == "string" ? e : `${t ? `${t}__` : ""}${Object.keys(e).sort().map((r) => `${r}=${e[r]}`).join("&")}` : "";
}
function Gde(e, { id: t, defaultColor: n, defaultMarkerStart: r, defaultMarkerEnd: i }) {
  const a = /* @__PURE__ */ new Set();
  return e.reduce((o, u) => ([u.markerStart || r, u.markerEnd || i].forEach((c) => {
    if (c && typeof c == "object") {
      const f = k5(c, t);
      a.has(f) || (o.push({ id: f, color: c.color || n, ...c }), a.add(f));
    }
  }), o), []).sort((o, u) => o.id.localeCompare(u.id));
}
const pB = 1e3, Kde = 10, hT = {
  nodeOrigin: [0, 0],
  nodeExtent: sy,
  elevateNodesOnSelect: !0,
  zIndexMode: "basic",
  defaults: {}
}, Yde = {
  ...hT,
  checkEquality: !0
};
function pT(e, t) {
  const n = { ...e };
  for (const r in t)
    t[r] !== void 0 && (n[r] = t[r]);
  return n;
}
function Wde(e, t, n) {
  const r = pT(hT, n);
  for (const i of e.values())
    if (i.parentId)
      gT(i, e, t, r);
    else {
      const a = Ty(i, r.nodeOrigin), o = pm(i.extent) ? i.extent : r.nodeExtent, u = nh(a, o, Uu(i));
      i.internals.positionAbsolute = u;
    }
}
function Zde(e, t) {
  if (!e.handles)
    return e.measured ? t == null ? void 0 : t.internals.handleBounds : void 0;
  const n = [], r = [];
  for (const i of e.handles) {
    const a = {
      id: i.id,
      width: i.width ?? 1,
      height: i.height ?? 1,
      nodeId: e.id,
      x: i.x,
      y: i.y,
      position: i.position,
      type: i.type
    };
    i.type === "source" ? n.push(a) : i.type === "target" && r.push(a);
  }
  return {
    source: n,
    target: r
  };
}
function mT(e) {
  return e === "manual";
}
function T5(e, t, n, r = {}) {
  var f, p;
  const i = pT(Yde, r), a = { i: 0 }, o = new Map(t), u = i != null && i.elevateNodesOnSelect && !mT(i.zIndexMode) ? pB : 0;
  let c = e.length > 0;
  t.clear(), n.clear();
  for (const g of e) {
    let x = o.get(g.id);
    if (i.checkEquality && g === (x == null ? void 0 : x.internals.userNode))
      t.set(g.id, x);
    else {
      const b = Ty(g, i.nodeOrigin), _ = pm(g.extent) ? g.extent : i.nodeExtent, E = nh(b, _, Uu(g));
      x = {
        ...i.defaults,
        ...g,
        measured: {
          width: (f = g.measured) == null ? void 0 : f.width,
          height: (p = g.measured) == null ? void 0 : p.height
        },
        internals: {
          positionAbsolute: E,
          // if user re-initializes the node or removes `measured` for whatever reason, we reset the handleBounds so that the node gets re-measured
          handleBounds: Zde(g, x),
          z: mB(g, u, i.zIndexMode),
          userNode: g
        }
      }, t.set(g.id, x);
    }
    (x.measured === void 0 || x.measured.width === void 0 || x.measured.height === void 0) && !x.hidden && (c = !1), g.parentId && gT(x, t, n, r, a);
  }
  return c;
}
function Xde(e, t) {
  if (!e.parentId)
    return;
  const n = t.get(e.parentId);
  n ? n.set(e.id, e) : t.set(e.parentId, /* @__PURE__ */ new Map([[e.id, e]]));
}
function gT(e, t, n, r, i) {
  const { elevateNodesOnSelect: a, nodeOrigin: o, nodeExtent: u, zIndexMode: c } = pT(hT, r), f = e.parentId, p = t.get(f);
  if (!p) {
    console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);
    return;
  }
  Xde(e, n), i && !p.parentId && p.internals.rootParentIndex === void 0 && c === "auto" && (p.internals.rootParentIndex = ++i.i, p.internals.z = p.internals.z + i.i * Kde), i && p.internals.rootParentIndex !== void 0 && (i.i = p.internals.rootParentIndex);
  const g = a && !mT(c) ? pB : 0, { x, y: b, z: _ } = Qde(e, p, o, u, g, c), { positionAbsolute: E } = e.internals, k = x !== E.x || b !== E.y;
  (k || _ !== e.internals.z) && t.set(e.id, {
    ...e,
    internals: {
      ...e.internals,
      positionAbsolute: k ? { x, y: b } : E,
      z: _
    }
  });
}
function mB(e, t, n) {
  const r = Fo(e.zIndex) ? e.zIndex : 0;
  return mT(n) ? r : r + (e.selected ? t : 0);
}
function Qde(e, t, n, r, i, a) {
  const { x: o, y: u } = t.internals.positionAbsolute, c = Uu(e), f = Ty(e, n), p = pm(e.extent) ? nh(f, e.extent, c) : f;
  let g = nh({ x: o + p.x, y: u + p.y }, r, c);
  e.extent === "parent" && (g = nB(g, c, t));
  const x = mB(e, i, a), b = t.internals.z ?? 0;
  return {
    x: g.x,
    y: g.y,
    z: b >= x ? b + 1 : x
  };
}
function yT(e, t, n, r = [0, 0]) {
  var o;
  const i = [], a = /* @__PURE__ */ new Map();
  for (const u of e) {
    const c = t.get(u.parentId);
    if (!c)
      continue;
    const f = ((o = a.get(u.parentId)) == null ? void 0 : o.expandedRect) ?? hm(c), p = iB(f, u.rect);
    a.set(u.parentId, { expandedRect: p, parent: c });
  }
  return a.size > 0 && a.forEach(({ expandedRect: u, parent: c }, f) => {
    var N;
    const p = c.internals.positionAbsolute, g = Uu(c), x = c.origin ?? r, b = u.x < p.x ? Math.round(Math.abs(p.x - u.x)) : 0, _ = u.y < p.y ? Math.round(Math.abs(p.y - u.y)) : 0, E = Math.max(g.width, Math.round(u.width)), k = Math.max(g.height, Math.round(u.height)), T = (E - g.width) * x[0], R = (k - g.height) * x[1];
    (b > 0 || _ > 0 || T || R) && (i.push({
      id: f,
      type: "position",
      position: {
        x: c.position.x - b + T,
        y: c.position.y - _ + R
      }
    }), (N = n.get(f)) == null || N.forEach((O) => {
      e.some((P) => P.id === O.id) || i.push({
        id: O.id,
        type: "position",
        position: {
          x: O.position.x + b,
          y: O.position.y + _
        }
      });
    })), (g.width < u.width || g.height < u.height || b || _) && i.push({
      id: f,
      type: "dimensions",
      setAttributes: !0,
      dimensions: {
        width: E + (b ? x[0] * b - T : 0),
        height: k + (_ ? x[1] * _ - R : 0)
      }
    });
  }), i;
}
function Jde(e, t, n, r, i, a, o) {
  const u = r == null ? void 0 : r.querySelector(".xyflow__viewport");
  let c = !1;
  if (!u)
    return { changes: [], updatedInternals: c };
  const f = [], p = window.getComputedStyle(u), { m22: g } = new window.DOMMatrixReadOnly(p.transform), x = [];
  for (const b of e.values()) {
    const _ = t.get(b.id);
    if (!_)
      continue;
    if (_.hidden) {
      t.set(_.id, {
        ..._,
        internals: {
          ..._.internals,
          handleBounds: void 0
        }
      }), c = !0;
      continue;
    }
    const E = dT(b.nodeElement), k = _.measured.width !== E.width || _.measured.height !== E.height;
    if (!!(E.width && E.height && (k || !_.internals.handleBounds || b.force))) {
      const R = b.nodeElement.getBoundingClientRect(), N = pm(_.extent) ? _.extent : a;
      let { positionAbsolute: O } = _.internals;
      _.parentId && _.extent === "parent" ? O = nB(O, E, t.get(_.parentId)) : N && (O = nh(O, N, E));
      const P = {
        ..._,
        measured: E,
        internals: {
          ..._.internals,
          positionAbsolute: O,
          handleBounds: {
            source: HN("source", b.nodeElement, R, g, _.id),
            target: HN("target", b.nodeElement, R, g, _.id)
          }
        }
      };
      t.set(_.id, P), _.parentId && gT(P, t, n, { nodeOrigin: i, zIndexMode: o }), c = !0, k && (f.push({
        id: _.id,
        type: "dimensions",
        dimensions: E
      }), _.expandParent && _.parentId && x.push({
        id: _.id,
        parentId: _.parentId,
        rect: hm(P, i)
      }));
    }
  }
  if (x.length > 0) {
    const b = yT(x, t, n, i);
    f.push(...b);
  }
  return { changes: f, updatedInternals: c };
}
async function ehe({ delta: e, panZoom: t, transform: n, translateExtent: r, width: i, height: a }) {
  if (!t || !e.x && !e.y)
    return Promise.resolve(!1);
  const o = await t.setViewportConstrained({
    x: n[0] + e.x,
    y: n[1] + e.y,
    zoom: n[2]
  }, [
    [0, 0],
    [i, a]
  ], r), u = !!o && (o.x !== n[0] || o.y !== n[1] || o.k !== n[2]);
  return Promise.resolve(u);
}
function QN(e, t, n, r, i, a) {
  let o = i;
  const u = r.get(o) || /* @__PURE__ */ new Map();
  r.set(o, u.set(n, t)), o = `${i}-${e}`;
  const c = r.get(o) || /* @__PURE__ */ new Map();
  if (r.set(o, c.set(n, t)), a) {
    o = `${i}-${e}-${a}`;
    const f = r.get(o) || /* @__PURE__ */ new Map();
    r.set(o, f.set(n, t));
  }
}
function gB(e, t, n) {
  e.clear(), t.clear();
  for (const r of n) {
    const { source: i, target: a, sourceHandle: o = null, targetHandle: u = null } = r, c = { edgeId: r.id, source: i, target: a, sourceHandle: o, targetHandle: u }, f = `${i}-${o}--${a}-${u}`, p = `${a}-${u}--${i}-${o}`;
    QN("source", c, p, e, i, o), QN("target", c, f, e, a, u), t.set(r.id, r);
  }
}
function yB(e, t) {
  if (!e.parentId)
    return !1;
  const n = t.get(e.parentId);
  return n ? n.selected ? !0 : yB(n, t) : !1;
}
function JN(e, t, n) {
  var i;
  let r = e;
  do {
    if ((i = r == null ? void 0 : r.matches) != null && i.call(r, t))
      return !0;
    if (r === n)
      return !1;
    r = r == null ? void 0 : r.parentElement;
  } while (r);
  return !1;
}
function the(e, t, n, r) {
  const i = /* @__PURE__ */ new Map();
  for (const [a, o] of e)
    if ((o.selected || o.id === r) && (!o.parentId || !yB(o, e)) && (o.draggable || t && typeof o.draggable > "u")) {
      const u = e.get(a);
      u && i.set(a, {
        id: a,
        position: u.position || { x: 0, y: 0 },
        distance: {
          x: n.x - u.internals.positionAbsolute.x,
          y: n.y - u.internals.positionAbsolute.y
        },
        extent: u.extent,
        parentId: u.parentId,
        origin: u.origin,
        expandParent: u.expandParent,
        internals: {
          positionAbsolute: u.internals.positionAbsolute || { x: 0, y: 0 }
        },
        measured: {
          width: u.measured.width ?? 0,
          height: u.measured.height ?? 0
        }
      });
    }
  return i;
}
function Bw({ nodeId: e, dragItems: t, nodeLookup: n, dragging: r = !0 }) {
  var o, u, c;
  const i = [];
  for (const [f, p] of t) {
    const g = (o = n.get(f)) == null ? void 0 : o.internals.userNode;
    g && i.push({
      ...g,
      position: p.position,
      dragging: r
    });
  }
  if (!e)
    return [i[0], i];
  const a = (u = n.get(e)) == null ? void 0 : u.internals.userNode;
  return [
    a ? {
      ...a,
      position: ((c = t.get(e)) == null ? void 0 : c.position) || a.position,
      dragging: r
    } : i[0],
    i
  ];
}
function nhe({ dragItems: e, snapGrid: t, x: n, y: r }) {
  const i = e.values().next().value;
  if (!i)
    return null;
  const a = {
    x: n - i.distance.x,
    y: r - i.distance.y
  }, o = jy(a, t);
  return {
    x: o.x - a.x,
    y: o.y - a.y
  };
}
function rhe({ onNodeMouseDown: e, getStoreItems: t, onDragStart: n, onDrag: r, onDragStop: i }) {
  let a = { x: null, y: null }, o = 0, u = /* @__PURE__ */ new Map(), c = !1, f = { x: 0, y: 0 }, p = null, g = !1, x = null, b = !1, _ = !1, E = null;
  function k({ noDragClassName: R, handleSelector: N, domNode: O, isSelectable: P, nodeId: z, nodeClickDistance: q = 0 }) {
    x = ka(O);
    function G({ x: X, y: me }) {
      const { nodeLookup: J, nodeExtent: le, snapGrid: Q, snapToGrid: oe, nodeOrigin: fe, onNodeDrag: ce, onSelectionDrag: K, onError: re, updateNodePositions: de } = t();
      a = { x: X, y: me };
      let V = !1;
      const ae = u.size > 1, ge = ae && le ? C5(Ay(u)) : null, we = ae && oe ? nhe({
        dragItems: u,
        snapGrid: Q,
        x: X,
        y: me
      }) : null;
      for (const [Re, Ie] of u) {
        if (!J.has(Re))
          continue;
        let Me = { x: X - Ie.distance.x, y: me - Ie.distance.y };
        oe && (Me = we ? {
          x: Math.round(Me.x + we.x),
          y: Math.round(Me.y + we.y)
        } : jy(Me, Q));
        let dt = null;
        if (ae && le && !Ie.extent && ge) {
          const { positionAbsolute: ct } = Ie.internals, mt = ct.x - ge.x + le[0][0], ft = ct.x + Ie.measured.width - ge.x2 + le[1][0], At = ct.y - ge.y + le[0][1], xt = ct.y + Ie.measured.height - ge.y2 + le[1][1];
          dt = [
            [mt, At],
            [ft, xt]
          ];
        }
        const { position: ut, positionAbsolute: Je } = tB({
          nodeId: Re,
          nextPosition: Me,
          nodeLookup: J,
          nodeExtent: dt || le,
          nodeOrigin: fe,
          onError: re
        });
        V = V || Ie.position.x !== ut.x || Ie.position.y !== ut.y, Ie.position = ut, Ie.internals.positionAbsolute = Je;
      }
      if (_ = _ || V, !!V && (de(u, !0), E && (r || ce || !z && K))) {
        const [Re, Ie] = Bw({
          nodeId: z,
          dragItems: u,
          nodeLookup: J
        });
        r == null || r(E, u, Re, Ie), ce == null || ce(E, Re, Ie), z || K == null || K(E, Ie);
      }
    }
    async function Y() {
      if (!p)
        return;
      const { transform: X, panBy: me, autoPanSpeed: J, autoPanOnNodeDrag: le } = t();
      if (!le) {
        c = !1, cancelAnimationFrame(o);
        return;
      }
      const [Q, oe] = rB(f, p, J);
      (Q !== 0 || oe !== 0) && (a.x = (a.x ?? 0) - Q / X[2], a.y = (a.y ?? 0) - oe / X[2], await me({ x: Q, y: oe }) && G(a)), o = requestAnimationFrame(Y);
    }
    function W(X) {
      var ae;
      const { nodeLookup: me, multiSelectionActive: J, nodesDraggable: le, transform: Q, snapGrid: oe, snapToGrid: fe, selectNodesOnDrag: ce, onNodeDragStart: K, onSelectionDragStart: re, unselectNodesAndEdges: de } = t();
      g = !0, (!ce || !P) && !J && z && ((ae = me.get(z)) != null && ae.selected || de()), P && ce && z && (e == null || e(z));
      const V = q0(X.sourceEvent, { transform: Q, snapGrid: oe, snapToGrid: fe, containerBounds: p });
      if (a = V, u = the(me, le, V, z), u.size > 0 && (n || K || !z && re)) {
        const [ge, we] = Bw({
          nodeId: z,
          dragItems: u,
          nodeLookup: me
        });
        n == null || n(X.sourceEvent, u, ge, we), K == null || K(X.sourceEvent, ge, we), z || re == null || re(X.sourceEvent, we);
      }
    }
    const F = DL().clickDistance(q).on("start", (X) => {
      const { domNode: me, nodeDragThreshold: J, transform: le, snapGrid: Q, snapToGrid: oe } = t();
      p = (me == null ? void 0 : me.getBoundingClientRect()) || null, b = !1, _ = !1, E = X.sourceEvent, J === 0 && W(X), a = q0(X.sourceEvent, { transform: le, snapGrid: Q, snapToGrid: oe, containerBounds: p }), f = Uo(X.sourceEvent, p);
    }).on("drag", (X) => {
      const { autoPanOnNodeDrag: me, transform: J, snapGrid: le, snapToGrid: Q, nodeDragThreshold: oe, nodeLookup: fe } = t(), ce = q0(X.sourceEvent, { transform: J, snapGrid: le, snapToGrid: Q, containerBounds: p });
      if (E = X.sourceEvent, (X.sourceEvent.type === "touchmove" && X.sourceEvent.touches.length > 1 || // if user deletes a node while dragging, we need to abort the drag to prevent errors
      z && !fe.has(z)) && (b = !0), !b) {
        if (!c && me && g && (c = !0, Y()), !g) {
          const K = Uo(X.sourceEvent, p), re = K.x - f.x, de = K.y - f.y;
          Math.sqrt(re * re + de * de) > oe && W(X);
        }
        (a.x !== ce.xSnapped || a.y !== ce.ySnapped) && u && g && (f = Uo(X.sourceEvent, p), G(ce));
      }
    }).on("end", (X) => {
      if (!(!g || b) && (c = !1, g = !1, cancelAnimationFrame(o), u.size > 0)) {
        const { nodeLookup: me, updateNodePositions: J, onNodeDragStop: le, onSelectionDragStop: Q } = t();
        if (_ && (J(u, !1), _ = !1), i || le || !z && Q) {
          const [oe, fe] = Bw({
            nodeId: z,
            dragItems: u,
            nodeLookup: me,
            dragging: !1
          });
          i == null || i(X.sourceEvent, u, oe, fe), le == null || le(X.sourceEvent, oe, fe), z || Q == null || Q(X.sourceEvent, fe);
        }
      }
    }).filter((X) => {
      const me = X.target;
      return !X.button && (!R || !JN(me, `.${R}`, O)) && (!N || JN(me, N, O));
    });
    x.call(F);
  }
  function T() {
    x == null || x.on(".drag", null);
  }
  return {
    update: k,
    destroy: T
  };
}
function ihe(e, t, n) {
  const r = [], i = {
    x: e.x - n,
    y: e.y - n,
    width: n * 2,
    height: n * 2
  };
  for (const a of t.values())
    ly(i, hm(a)) > 0 && r.push(a);
  return r;
}
const she = 250;
function ahe(e, t, n, r) {
  var u, c;
  let i = [], a = 1 / 0;
  const o = ihe(e, n, t + she);
  for (const f of o) {
    const p = [...((u = f.internals.handleBounds) == null ? void 0 : u.source) ?? [], ...((c = f.internals.handleBounds) == null ? void 0 : c.target) ?? []];
    for (const g of p) {
      if (r.nodeId === g.nodeId && r.type === g.type && r.id === g.id)
        continue;
      const { x, y: b } = rh(f, g, g.position, !0), _ = Math.sqrt(Math.pow(x - e.x, 2) + Math.pow(b - e.y, 2));
      _ > t || (_ < a ? (i = [{ ...g, x, y: b }], a = _) : _ === a && i.push({ ...g, x, y: b }));
    }
  }
  if (!i.length)
    return null;
  if (i.length > 1) {
    const f = r.type === "source" ? "target" : "source";
    return i.find((p) => p.type === f) ?? i[0];
  }
  return i[0];
}
function vB(e, t, n, r, i, a = !1) {
  var f, p, g;
  const o = r.get(e);
  if (!o)
    return null;
  const u = i === "strict" ? (f = o.internals.handleBounds) == null ? void 0 : f[t] : [...((p = o.internals.handleBounds) == null ? void 0 : p.source) ?? [], ...((g = o.internals.handleBounds) == null ? void 0 : g.target) ?? []], c = (n ? u == null ? void 0 : u.find((x) => x.id === n) : u == null ? void 0 : u[0]) ?? null;
  return c && a ? { ...c, ...rh(o, c, c.position, !0) } : c;
}
function xB(e, t) {
  return e || (t != null && t.classList.contains("target") ? "target" : t != null && t.classList.contains("source") ? "source" : null);
}
function ohe(e, t) {
  let n = null;
  return t ? n = !0 : e && !t && (n = !1), n;
}
const bB = () => !0;
function lhe(e, { connectionMode: t, connectionRadius: n, handleId: r, nodeId: i, edgeUpdaterType: a, isTarget: o, domNode: u, nodeLookup: c, lib: f, autoPanOnConnect: p, flowId: g, panBy: x, cancelConnection: b, onConnectStart: _, onConnect: E, onConnectEnd: k, isValidConnection: T = bB, onReconnectEnd: R, updateConnection: N, getTransform: O, getFromHandle: P, autoPanSpeed: z, dragThreshold: q = 1, handleDomNode: G }) {
  const Y = oB(e.target);
  let W = 0, F;
  const { x: X, y: me } = Uo(e), J = xB(a, G), le = u == null ? void 0 : u.getBoundingClientRect();
  let Q = !1;
  if (!le || !J)
    return;
  const oe = vB(i, J, r, c, t);
  if (!oe)
    return;
  let fe = Uo(e, le), ce = !1, K = null, re = !1, de = null;
  function V() {
    if (!p || !le)
      return;
    const [ut, Je] = rB(fe, le, z);
    x({ x: ut, y: Je }), W = requestAnimationFrame(V);
  }
  const ae = {
    ...oe,
    nodeId: i,
    type: J,
    position: oe.position
  }, ge = c.get(i);
  let Re = {
    inProgress: !0,
    isValid: null,
    from: rh(ge, ae, vt.Left, !0),
    fromHandle: ae,
    fromPosition: ae.position,
    fromNode: ge,
    to: fe,
    toHandle: null,
    toPosition: $N[ae.position],
    toNode: null,
    pointer: fe
  };
  function Ie() {
    Q = !0, N(Re), _ == null || _(e, { nodeId: i, handleId: r, handleType: J });
  }
  q === 0 && Ie();
  function Me(ut) {
    if (!Q) {
      const { x: xt, y: qn } = Uo(ut), An = xt - X, jn = qn - me;
      if (!(An * An + jn * jn > q * q))
        return;
      Ie();
    }
    if (!P() || !ae) {
      dt(ut);
      return;
    }
    const Je = O();
    fe = Uo(ut, le), F = ahe(Ny(fe, Je, !1, [1, 1]), n, c, ae), ce || (V(), ce = !0);
    const ct = wB(ut, {
      handle: F,
      connectionMode: t,
      fromNodeId: i,
      fromHandleId: r,
      fromType: o ? "target" : "source",
      isValidConnection: T,
      doc: Y,
      lib: f,
      flowId: g,
      nodeLookup: c
    });
    de = ct.handleDomNode, K = ct.connection, re = ohe(!!F, ct.isValid);
    const mt = c.get(i), ft = mt ? rh(mt, ae, vt.Left, !0) : Re.from, At = {
      ...Re,
      from: ft,
      isValid: re,
      to: ct.toHandle && re ? Ux({ x: ct.toHandle.x, y: ct.toHandle.y }, Je) : fe,
      toHandle: ct.toHandle,
      toPosition: re && ct.toHandle ? ct.toHandle.position : $N[ae.position],
      toNode: ct.toHandle ? c.get(ct.toHandle.nodeId) : null,
      pointer: fe
    };
    N(At), Re = At;
  }
  function dt(ut) {
    if (!("touches" in ut && ut.touches.length > 0)) {
      if (Q) {
        (F || de) && K && re && (E == null || E(K));
        const { inProgress: Je, ...ct } = Re, mt = {
          ...ct,
          toPosition: Re.toHandle ? Re.toPosition : null
        };
        k == null || k(ut, mt), a && (R == null || R(ut, mt));
      }
      b(), cancelAnimationFrame(W), ce = !1, re = !1, K = null, de = null, Y.removeEventListener("mousemove", Me), Y.removeEventListener("mouseup", dt), Y.removeEventListener("touchmove", Me), Y.removeEventListener("touchend", dt);
    }
  }
  Y.addEventListener("mousemove", Me), Y.addEventListener("mouseup", dt), Y.addEventListener("touchmove", Me), Y.addEventListener("touchend", dt);
}
function wB(e, { handle: t, connectionMode: n, fromNodeId: r, fromHandleId: i, fromType: a, doc: o, lib: u, flowId: c, isValidConnection: f = bB, nodeLookup: p }) {
  const g = a === "target", x = t ? o.querySelector(`.${u}-flow__handle[data-id="${c}-${t == null ? void 0 : t.nodeId}-${t == null ? void 0 : t.id}-${t == null ? void 0 : t.type}"]`) : null, { x: b, y: _ } = Uo(e), E = o.elementFromPoint(b, _), k = E != null && E.classList.contains(`${u}-flow__handle`) ? E : x, T = {
    handleDomNode: k,
    isValid: !1,
    connection: null,
    toHandle: null
  };
  if (k) {
    const R = xB(void 0, k), N = k.getAttribute("data-nodeid"), O = k.getAttribute("data-handleid"), P = k.classList.contains("connectable"), z = k.classList.contains("connectableend");
    if (!N || !R)
      return T;
    const q = {
      source: g ? N : r,
      sourceHandle: g ? O : i,
      target: g ? r : N,
      targetHandle: g ? i : O
    };
    T.connection = q;
    const Y = P && z && (n === fm.Strict ? g && R === "source" || !g && R === "target" : N !== r || O !== i);
    T.isValid = Y && f(q), T.toHandle = vB(N, R, O, p, n, !0);
  }
  return T;
}
const A5 = {
  onPointerDown: lhe,
  isValid: wB
};
function uhe({ domNode: e, panZoom: t, getTransform: n, getViewScale: r }) {
  const i = ka(e);
  function a({ translateExtent: u, width: c, height: f, zoomStep: p = 1, pannable: g = !0, zoomable: x = !0, inversePan: b = !1 }) {
    const _ = (N) => {
      if (N.sourceEvent.type !== "wheel" || !t)
        return;
      const O = n(), P = N.sourceEvent.ctrlKey && uy() ? 10 : 1, z = -N.sourceEvent.deltaY * (N.sourceEvent.deltaMode === 1 ? 0.05 : N.sourceEvent.deltaMode ? 1 : 2e-3) * p, q = O[2] * Math.pow(2, z * P);
      t.scaleTo(q);
    };
    let E = [0, 0];
    const k = (N) => {
      (N.sourceEvent.type === "mousedown" || N.sourceEvent.type === "touchstart") && (E = [
        N.sourceEvent.clientX ?? N.sourceEvent.touches[0].clientX,
        N.sourceEvent.clientY ?? N.sourceEvent.touches[0].clientY
      ]);
    }, T = (N) => {
      const O = n();
      if (N.sourceEvent.type !== "mousemove" && N.sourceEvent.type !== "touchmove" || !t)
        return;
      const P = [
        N.sourceEvent.clientX ?? N.sourceEvent.touches[0].clientX,
        N.sourceEvent.clientY ?? N.sourceEvent.touches[0].clientY
      ], z = [P[0] - E[0], P[1] - E[1]];
      E = P;
      const q = r() * Math.max(O[2], Math.log(O[2])) * (b ? -1 : 1), G = {
        x: O[0] - z[0] * q,
        y: O[1] - z[1] * q
      }, Y = [
        [0, 0],
        [c, f]
      ];
      t.setViewportConstrained({
        x: G.x,
        y: G.y,
        zoom: O[2]
      }, Y, u);
    }, R = WL().on("start", k).on("zoom", g ? T : null).on("zoom.wheel", x ? _ : null);
    i.call(R, {});
  }
  function o() {
    i.on("zoom", null);
  }
  return {
    update: a,
    destroy: o,
    pointer: Lo
  };
}
const Sb = (e) => ({
  x: e.x,
  y: e.y,
  zoom: e.k
}), qw = ({ x: e, y: t, zoom: n }) => bb.translate(e, t).scale(n), Gp = (e, t) => e.target.closest(`.${t}`), _B = (e, t) => t === 2 && Array.isArray(e) && e.includes(2), che = (e) => ((e *= 2) <= 1 ? e * e * e : (e -= 2) * e * e + 2) / 2, $w = (e, t = 0, n = che, r = () => {
}) => {
  const i = typeof t == "number" && t > 0;
  return i || r(), i ? e.transition().duration(t).ease(n).on("end", r) : e;
}, SB = (e) => {
  const t = e.ctrlKey && uy() ? 10 : 1;
  return -e.deltaY * (e.deltaMode === 1 ? 0.05 : e.deltaMode ? 1 : 2e-3) * t;
};
function fhe({ zoomPanValues: e, noWheelClassName: t, d3Selection: n, d3Zoom: r, panOnScrollMode: i, panOnScrollSpeed: a, zoomOnPinch: o, onPanZoomStart: u, onPanZoom: c, onPanZoomEnd: f }) {
  return (p) => {
    if (Gp(p, t))
      return p.ctrlKey && p.preventDefault(), !1;
    p.preventDefault(), p.stopImmediatePropagation();
    const g = n.property("__zoom").k || 1;
    if (p.ctrlKey && o) {
      const k = Lo(p), T = SB(p), R = g * Math.pow(2, T);
      r.scaleTo(n, R, k, p);
      return;
    }
    const x = p.deltaMode === 1 ? 20 : 1;
    let b = i === Wd.Vertical ? 0 : p.deltaX * x, _ = i === Wd.Horizontal ? 0 : p.deltaY * x;
    !uy() && p.shiftKey && i !== Wd.Vertical && (b = p.deltaY * x, _ = 0), r.translateBy(
      n,
      -(b / g) * a,
      -(_ / g) * a,
      // @ts-ignore
      { internal: !0 }
    );
    const E = Sb(n.property("__zoom"));
    clearTimeout(e.panScrollTimeout), e.isPanScrolling ? (c == null || c(p, E), e.panScrollTimeout = setTimeout(() => {
      f == null || f(p, E), e.isPanScrolling = !1;
    }, 150)) : (e.isPanScrolling = !0, u == null || u(p, E));
  };
}
function dhe({ noWheelClassName: e, preventScrolling: t, d3ZoomHandler: n }) {
  return function(r, i) {
    const a = r.type === "wheel", o = !t && a && !r.ctrlKey, u = Gp(r, e);
    if (r.ctrlKey && a && u && r.preventDefault(), o || u)
      return null;
    r.preventDefault(), n.call(this, r, i);
  };
}
function hhe({ zoomPanValues: e, onDraggingChange: t, onPanZoomStart: n }) {
  return (r) => {
    var a, o, u;
    if ((a = r.sourceEvent) != null && a.internal)
      return;
    const i = Sb(r.transform);
    e.mouseButton = ((o = r.sourceEvent) == null ? void 0 : o.button) || 0, e.isZoomingOrPanning = !0, e.prevViewport = i, ((u = r.sourceEvent) == null ? void 0 : u.type) === "mousedown" && t(!0), n && (n == null || n(r.sourceEvent, i));
  };
}
function phe({ zoomPanValues: e, panOnDrag: t, onPaneContextMenu: n, onTransformChange: r, onPanZoom: i }) {
  return (a) => {
    var o, u;
    e.usedRightMouseButton = !!(n && _B(t, e.mouseButton ?? 0)), (o = a.sourceEvent) != null && o.sync || r([a.transform.x, a.transform.y, a.transform.k]), i && !((u = a.sourceEvent) != null && u.internal) && (i == null || i(a.sourceEvent, Sb(a.transform)));
  };
}
function mhe({ zoomPanValues: e, panOnDrag: t, panOnScroll: n, onDraggingChange: r, onPanZoomEnd: i, onPaneContextMenu: a }) {
  return (o) => {
    var u;
    if (!((u = o.sourceEvent) != null && u.internal) && (e.isZoomingOrPanning = !1, a && _B(t, e.mouseButton ?? 0) && !e.usedRightMouseButton && o.sourceEvent && a(o.sourceEvent), e.usedRightMouseButton = !1, r(!1), i)) {
      const c = Sb(o.transform);
      e.prevViewport = c, clearTimeout(e.timerId), e.timerId = setTimeout(
        () => {
          i == null || i(o.sourceEvent, c);
        },
        // we need a setTimeout for panOnScroll to supress multiple end events fired during scroll
        n ? 150 : 0
      );
    }
  };
}
function ghe({ zoomActivationKeyPressed: e, zoomOnScroll: t, zoomOnPinch: n, panOnDrag: r, panOnScroll: i, zoomOnDoubleClick: a, userSelectionActive: o, noWheelClassName: u, noPanClassName: c, lib: f, connectionInProgress: p }) {
  return (g) => {
    var k;
    const x = e || t, b = n && g.ctrlKey, _ = g.type === "wheel";
    if (g.button === 1 && g.type === "mousedown" && (Gp(g, `${f}-flow__node`) || Gp(g, `${f}-flow__edge`)))
      return !0;
    if (!r && !x && !i && !a && !n || o || p && !_ || Gp(g, u) && _ || Gp(g, c) && (!_ || i && _ && !e) || !n && g.ctrlKey && _)
      return !1;
    if (!n && g.type === "touchstart" && ((k = g.touches) == null ? void 0 : k.length) > 1)
      return g.preventDefault(), !1;
    if (!x && !i && !b && _ || !r && (g.type === "mousedown" || g.type === "touchstart") || Array.isArray(r) && !r.includes(g.button) && g.type === "mousedown")
      return !1;
    const E = Array.isArray(r) && r.includes(g.button) || !g.button || g.button <= 1;
    return (!g.ctrlKey || _) && E;
  };
}
function yhe({ domNode: e, minZoom: t, maxZoom: n, translateExtent: r, viewport: i, onPanZoom: a, onPanZoomStart: o, onPanZoomEnd: u, onDraggingChange: c }) {
  const f = {
    isZoomingOrPanning: !1,
    usedRightMouseButton: !1,
    prevViewport: {},
    mouseButton: 0,
    timerId: void 0,
    panScrollTimeout: void 0,
    isPanScrolling: !1
  }, p = e.getBoundingClientRect(), g = WL().scaleExtent([t, n]).translateExtent(r), x = ka(e).call(g);
  R({
    x: i.x,
    y: i.y,
    zoom: dm(i.zoom, t, n)
  }, [
    [0, 0],
    [p.width, p.height]
  ], r);
  const b = x.on("wheel.zoom"), _ = x.on("dblclick.zoom");
  g.wheelDelta(SB);
  function E(F, X) {
    return x ? new Promise((me) => {
      g == null || g.interpolate((X == null ? void 0 : X.interpolate) === "linear" ? B0 : ux).transform($w(x, X == null ? void 0 : X.duration, X == null ? void 0 : X.ease, () => me(!0)), F);
    }) : Promise.resolve(!1);
  }
  function k({ noWheelClassName: F, noPanClassName: X, onPaneContextMenu: me, userSelectionActive: J, panOnScroll: le, panOnDrag: Q, panOnScrollMode: oe, panOnScrollSpeed: fe, preventScrolling: ce, zoomOnPinch: K, zoomOnScroll: re, zoomOnDoubleClick: de, zoomActivationKeyPressed: V, lib: ae, onTransformChange: ge, connectionInProgress: we, paneClickDistance: Re, selectionOnDrag: Ie }) {
    J && !f.isZoomingOrPanning && T();
    const Me = le && !V && !J;
    g.clickDistance(Ie ? 1 / 0 : !Fo(Re) || Re < 0 ? 0 : Re);
    const dt = Me ? fhe({
      zoomPanValues: f,
      noWheelClassName: F,
      d3Selection: x,
      d3Zoom: g,
      panOnScrollMode: oe,
      panOnScrollSpeed: fe,
      zoomOnPinch: K,
      onPanZoomStart: o,
      onPanZoom: a,
      onPanZoomEnd: u
    }) : dhe({
      noWheelClassName: F,
      preventScrolling: ce,
      d3ZoomHandler: b
    });
    if (x.on("wheel.zoom", dt, { passive: !1 }), !J) {
      const Je = hhe({
        zoomPanValues: f,
        onDraggingChange: c,
        onPanZoomStart: o
      });
      g.on("start", Je);
      const ct = phe({
        zoomPanValues: f,
        panOnDrag: Q,
        onPaneContextMenu: !!me,
        onPanZoom: a,
        onTransformChange: ge
      });
      g.on("zoom", ct);
      const mt = mhe({
        zoomPanValues: f,
        panOnDrag: Q,
        panOnScroll: le,
        onPaneContextMenu: me,
        onPanZoomEnd: u,
        onDraggingChange: c
      });
      g.on("end", mt);
    }
    const ut = ghe({
      zoomActivationKeyPressed: V,
      panOnDrag: Q,
      zoomOnScroll: re,
      panOnScroll: le,
      zoomOnDoubleClick: de,
      zoomOnPinch: K,
      userSelectionActive: J,
      noPanClassName: X,
      noWheelClassName: F,
      lib: ae,
      connectionInProgress: we
    });
    g.filter(ut), de ? x.on("dblclick.zoom", _) : x.on("dblclick.zoom", null);
  }
  function T() {
    g.on("zoom", null);
  }
  async function R(F, X, me) {
    const J = qw(F), le = g == null ? void 0 : g.constrain()(J, X, me);
    return le && await E(le), new Promise((Q) => Q(le));
  }
  async function N(F, X) {
    const me = qw(F);
    return await E(me, X), new Promise((J) => J(me));
  }
  function O(F) {
    if (x) {
      const X = qw(F), me = x.property("__zoom");
      (me.k !== F.zoom || me.x !== F.x || me.y !== F.y) && (g == null || g.transform(x, X, null, { sync: !0 }));
    }
  }
  function P() {
    const F = x ? YL(x.node()) : { x: 0, y: 0, k: 1 };
    return { x: F.x, y: F.y, zoom: F.k };
  }
  function z(F, X) {
    return x ? new Promise((me) => {
      g == null || g.interpolate((X == null ? void 0 : X.interpolate) === "linear" ? B0 : ux).scaleTo($w(x, X == null ? void 0 : X.duration, X == null ? void 0 : X.ease, () => me(!0)), F);
    }) : Promise.resolve(!1);
  }
  function q(F, X) {
    return x ? new Promise((me) => {
      g == null || g.interpolate((X == null ? void 0 : X.interpolate) === "linear" ? B0 : ux).scaleBy($w(x, X == null ? void 0 : X.duration, X == null ? void 0 : X.ease, () => me(!0)), F);
    }) : Promise.resolve(!1);
  }
  function G(F) {
    g == null || g.scaleExtent(F);
  }
  function Y(F) {
    g == null || g.translateExtent(F);
  }
  function W(F) {
    const X = !Fo(F) || F < 0 ? 0 : F;
    g == null || g.clickDistance(X);
  }
  return {
    update: k,
    destroy: T,
    setViewport: N,
    setViewportConstrained: R,
    getViewport: P,
    scaleTo: z,
    scaleBy: q,
    setScaleExtent: G,
    setTranslateExtent: Y,
    syncViewport: O,
    setClickDistance: W
  };
}
var mm;
(function(e) {
  e.Line = "line", e.Handle = "handle";
})(mm || (mm = {}));
function vhe({ width: e, prevWidth: t, height: n, prevHeight: r, affectsX: i, affectsY: a }) {
  const o = e - t, u = n - r, c = [o > 0 ? 1 : o < 0 ? -1 : 0, u > 0 ? 1 : u < 0 ? -1 : 0];
  return o && i && (c[0] = c[0] * -1), u && a && (c[1] = c[1] * -1), c;
}
function e8(e) {
  const t = e.includes("right") || e.includes("left"), n = e.includes("bottom") || e.includes("top"), r = e.includes("left"), i = e.includes("top");
  return {
    isHorizontal: t,
    isVertical: n,
    affectsX: r,
    affectsY: i
  };
}
function Yc(e, t) {
  return Math.max(0, t - e);
}
function Wc(e, t) {
  return Math.max(0, e - t);
}
function F1(e, t, n) {
  return Math.max(0, t - e, e - n);
}
function t8(e, t) {
  return e ? !t : t;
}
function xhe(e, t, n, r, i, a, o, u) {
  let { affectsX: c, affectsY: f } = t;
  const { isHorizontal: p, isVertical: g } = t, x = p && g, { xSnapped: b, ySnapped: _ } = n, { minWidth: E, maxWidth: k, minHeight: T, maxHeight: R } = r, { x: N, y: O, width: P, height: z, aspectRatio: q } = e;
  let G = Math.floor(p ? b - e.pointerX : 0), Y = Math.floor(g ? _ - e.pointerY : 0);
  const W = P + (c ? -G : G), F = z + (f ? -Y : Y), X = -a[0] * P, me = -a[1] * z;
  let J = F1(W, E, k), le = F1(F, T, R);
  if (o) {
    let fe = 0, ce = 0;
    c && G < 0 ? fe = Yc(N + G + X, o[0][0]) : !c && G > 0 && (fe = Wc(N + W + X, o[1][0])), f && Y < 0 ? ce = Yc(O + Y + me, o[0][1]) : !f && Y > 0 && (ce = Wc(O + F + me, o[1][1])), J = Math.max(J, fe), le = Math.max(le, ce);
  }
  if (u) {
    let fe = 0, ce = 0;
    c && G > 0 ? fe = Wc(N + G, u[0][0]) : !c && G < 0 && (fe = Yc(N + W, u[1][0])), f && Y > 0 ? ce = Wc(O + Y, u[0][1]) : !f && Y < 0 && (ce = Yc(O + F, u[1][1])), J = Math.max(J, fe), le = Math.max(le, ce);
  }
  if (i) {
    if (p) {
      const fe = F1(W / q, T, R) * q;
      if (J = Math.max(J, fe), o) {
        let ce = 0;
        !c && !f || c && !f && x ? ce = Wc(O + me + W / q, o[1][1]) * q : ce = Yc(O + me + (c ? G : -G) / q, o[0][1]) * q, J = Math.max(J, ce);
      }
      if (u) {
        let ce = 0;
        !c && !f || c && !f && x ? ce = Yc(O + W / q, u[1][1]) * q : ce = Wc(O + (c ? G : -G) / q, u[0][1]) * q, J = Math.max(J, ce);
      }
    }
    if (g) {
      const fe = F1(F * q, E, k) / q;
      if (le = Math.max(le, fe), o) {
        let ce = 0;
        !c && !f || f && !c && x ? ce = Wc(N + F * q + X, o[1][0]) / q : ce = Yc(N + (f ? Y : -Y) * q + X, o[0][0]) / q, le = Math.max(le, ce);
      }
      if (u) {
        let ce = 0;
        !c && !f || f && !c && x ? ce = Yc(N + F * q, u[1][0]) / q : ce = Wc(N + (f ? Y : -Y) * q, u[0][0]) / q, le = Math.max(le, ce);
      }
    }
  }
  Y = Y + (Y < 0 ? le : -le), G = G + (G < 0 ? J : -J), i && (x ? W > F * q ? Y = (t8(c, f) ? -G : G) / q : G = (t8(c, f) ? -Y : Y) * q : p ? (Y = G / q, f = c) : (G = Y * q, c = f));
  const Q = c ? N + G : N, oe = f ? O + Y : O;
  return {
    width: P + (c ? -G : G),
    height: z + (f ? -Y : Y),
    x: a[0] * G * (c ? -1 : 1) + Q,
    y: a[1] * Y * (f ? -1 : 1) + oe
  };
}
const CB = { width: 0, height: 0, x: 0, y: 0 }, bhe = {
  ...CB,
  pointerX: 0,
  pointerY: 0,
  aspectRatio: 1
};
function whe(e) {
  return [
    [0, 0],
    [e.measured.width, e.measured.height]
  ];
}
function _he(e, t, n) {
  const r = t.position.x + e.position.x, i = t.position.y + e.position.y, a = e.measured.width ?? 0, o = e.measured.height ?? 0, u = n[0] * a, c = n[1] * o;
  return [
    [r - u, i - c],
    [r + a - u, i + o - c]
  ];
}
function She({ domNode: e, nodeId: t, getStoreItems: n, onChange: r, onEnd: i }) {
  const a = ka(e);
  let o = {
    controlDirection: e8("bottom-right"),
    boundaries: {
      minWidth: 0,
      minHeight: 0,
      maxWidth: Number.MAX_VALUE,
      maxHeight: Number.MAX_VALUE
    },
    resizeDirection: void 0,
    keepAspectRatio: !1
  };
  function u({ controlPosition: f, boundaries: p, keepAspectRatio: g, resizeDirection: x, onResizeStart: b, onResize: _, onResizeEnd: E, shouldResize: k }) {
    let T = { ...CB }, R = { ...bhe };
    o = {
      boundaries: p,
      resizeDirection: x,
      keepAspectRatio: g,
      controlDirection: e8(f)
    };
    let N, O = null, P = [], z, q, G, Y = !1;
    const W = DL().on("start", (F) => {
      const { nodeLookup: X, transform: me, snapGrid: J, snapToGrid: le, nodeOrigin: Q, paneDomNode: oe } = n();
      if (N = X.get(t), !N)
        return;
      O = (oe == null ? void 0 : oe.getBoundingClientRect()) ?? null;
      const { xSnapped: fe, ySnapped: ce } = q0(F.sourceEvent, {
        transform: me,
        snapGrid: J,
        snapToGrid: le,
        containerBounds: O
      });
      T = {
        width: N.measured.width ?? 0,
        height: N.measured.height ?? 0,
        x: N.position.x ?? 0,
        y: N.position.y ?? 0
      }, R = {
        ...T,
        pointerX: fe,
        pointerY: ce,
        aspectRatio: T.width / T.height
      }, z = void 0, N.parentId && (N.extent === "parent" || N.expandParent) && (z = X.get(N.parentId), q = z && N.extent === "parent" ? whe(z) : void 0), P = [], G = void 0;
      for (const [K, re] of X)
        if (re.parentId === t && (P.push({
          id: K,
          position: { ...re.position },
          extent: re.extent
        }), re.extent === "parent" || re.expandParent)) {
          const de = _he(re, N, re.origin ?? Q);
          G ? G = [
            [Math.min(de[0][0], G[0][0]), Math.min(de[0][1], G[0][1])],
            [Math.max(de[1][0], G[1][0]), Math.max(de[1][1], G[1][1])]
          ] : G = de;
        }
      b == null || b(F, { ...T });
    }).on("drag", (F) => {
      const { transform: X, snapGrid: me, snapToGrid: J, nodeOrigin: le } = n(), Q = q0(F.sourceEvent, {
        transform: X,
        snapGrid: me,
        snapToGrid: J,
        containerBounds: O
      }), oe = [];
      if (!N)
        return;
      const { x: fe, y: ce, width: K, height: re } = T, de = {}, V = N.origin ?? le, { width: ae, height: ge, x: we, y: Re } = xhe(R, o.controlDirection, Q, o.boundaries, o.keepAspectRatio, V, q, G), Ie = ae !== K, Me = ge !== re, dt = we !== fe && Ie, ut = Re !== ce && Me;
      if (!dt && !ut && !Ie && !Me)
        return;
      if ((dt || ut || V[0] === 1 || V[1] === 1) && (de.x = dt ? we : T.x, de.y = ut ? Re : T.y, T.x = de.x, T.y = de.y, P.length > 0)) {
        const ft = we - fe, At = Re - ce;
        for (const xt of P)
          xt.position = {
            x: xt.position.x - ft + V[0] * (ae - K),
            y: xt.position.y - At + V[1] * (ge - re)
          }, oe.push(xt);
      }
      if ((Ie || Me) && (de.width = Ie && (!o.resizeDirection || o.resizeDirection === "horizontal") ? ae : T.width, de.height = Me && (!o.resizeDirection || o.resizeDirection === "vertical") ? ge : T.height, T.width = de.width, T.height = de.height), z && N.expandParent) {
        const ft = V[0] * (de.width ?? 0);
        de.x && de.x < ft && (T.x = ft, R.x = R.x - (de.x - ft));
        const At = V[1] * (de.height ?? 0);
        de.y && de.y < At && (T.y = At, R.y = R.y - (de.y - At));
      }
      const Je = vhe({
        width: T.width,
        prevWidth: K,
        height: T.height,
        prevHeight: re,
        affectsX: o.controlDirection.affectsX,
        affectsY: o.controlDirection.affectsY
      }), ct = { ...T, direction: Je };
      (k == null ? void 0 : k(F, ct)) !== !1 && (Y = !0, _ == null || _(F, ct), r(de, oe));
    }).on("end", (F) => {
      Y && (E == null || E(F, { ...T }), i == null || i({ ...T }), Y = !1);
    });
    a.call(W);
  }
  function c() {
    a.on(".drag", null);
  }
  return {
    update: u,
    destroy: c
  };
}
const { useDebugValue: Che } = dy, { useSyncExternalStoreWithSelector: Ehe } = cD, khe = (e) => e;
function EB(e, t = khe, n) {
  const r = Ehe(
    e.subscribe,
    e.getState,
    e.getServerState || e.getInitialState,
    t,
    n
  );
  return Che(r), r;
}
const n8 = (e, t) => {
  const n = uD(e), r = (i, a = t) => EB(n, i, a);
  return Object.assign(r, n), r;
}, The = (e, t) => e ? n8(e, t) : n8;
function fr(e, t) {
  if (Object.is(e, t))
    return !0;
  if (typeof e != "object" || e === null || typeof t != "object" || t === null)
    return !1;
  if (e instanceof Map && t instanceof Map) {
    if (e.size !== t.size) return !1;
    for (const [r, i] of e)
      if (!Object.is(i, t.get(r)))
        return !1;
    return !0;
  }
  if (e instanceof Set && t instanceof Set) {
    if (e.size !== t.size) return !1;
    for (const r of e)
      if (!t.has(r))
        return !1;
    return !0;
  }
  const n = Object.keys(e);
  if (n.length !== Object.keys(t).length)
    return !1;
  for (const r of n)
    if (!Object.prototype.hasOwnProperty.call(t, r) || !Object.is(e[r], t[r]))
      return !1;
  return !0;
}
const Cb = B.createContext(null), Ahe = Cb.Provider, kB = Gl.error001();
function un(e, t) {
  const n = B.useContext(Cb);
  if (n === null)
    throw new Error(kB);
  return EB(n, e, t);
}
function hr() {
  const e = B.useContext(Cb);
  if (e === null)
    throw new Error(kB);
  return B.useMemo(() => ({
    getState: e.getState,
    setState: e.setState,
    subscribe: e.subscribe
  }), [e]);
}
const r8 = { display: "none" }, jhe = {
  position: "absolute",
  width: 1,
  height: 1,
  margin: -1,
  border: 0,
  padding: 0,
  overflow: "hidden",
  clip: "rect(0px, 0px, 0px, 0px)",
  clipPath: "inset(100%)"
}, TB = "react-flow__node-desc", AB = "react-flow__edge-desc", Nhe = "react-flow__aria-live", Rhe = (e) => e.ariaLiveMessage, Mhe = (e) => e.ariaLabelConfig;
function Ohe({ rfId: e }) {
  const t = un(Rhe);
  return h.jsx("div", { id: `${Nhe}-${e}`, "aria-live": "assertive", "aria-atomic": "true", style: jhe, children: t });
}
function Dhe({ rfId: e, disableKeyboardA11y: t }) {
  const n = un(Mhe);
  return h.jsxs(h.Fragment, { children: [h.jsx("div", { id: `${TB}-${e}`, style: r8, children: t ? n["node.a11yDescription.default"] : n["node.a11yDescription.keyboardDisabled"] }), h.jsx("div", { id: `${AB}-${e}`, style: r8, children: n["edge.a11yDescription.default"] }), !t && h.jsx(Ohe, { rfId: e })] });
}
const Eb = B.forwardRef(({ position: e = "top-left", children: t, className: n, style: r, ...i }, a) => {
  const o = `${e}`.split("-");
  return h.jsx("div", { className: Zr(["react-flow__panel", n, ...o]), style: r, ref: a, ...i, children: t });
});
Eb.displayName = "Panel";
function zhe({ proOptions: e, position: t = "bottom-right" }) {
  return e != null && e.hideAttribution ? null : h.jsx(Eb, { position: t, className: "react-flow__attribution", "data-message": "Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev", children: h.jsx("a", { href: "https://reactflow.dev", target: "_blank", rel: "noopener noreferrer", "aria-label": "React Flow attribution", children: "React Flow" }) });
}
const Phe = (e) => {
  const t = [], n = [];
  for (const [, r] of e.nodeLookup)
    r.selected && t.push(r.internals.userNode);
  for (const [, r] of e.edgeLookup)
    r.selected && n.push(r);
  return { selectedNodes: t, selectedEdges: n };
}, U1 = (e) => e.id;
function Ihe(e, t) {
  return fr(e.selectedNodes.map(U1), t.selectedNodes.map(U1)) && fr(e.selectedEdges.map(U1), t.selectedEdges.map(U1));
}
function Lhe({ onSelectionChange: e }) {
  const t = hr(), { selectedNodes: n, selectedEdges: r } = un(Phe, Ihe);
  return B.useEffect(() => {
    const i = { nodes: n, edges: r };
    e == null || e(i), t.getState().onSelectionChangeHandlers.forEach((a) => a(i));
  }, [n, r, e]), null;
}
const Bhe = (e) => !!e.onSelectionChangeHandlers;
function qhe({ onSelectionChange: e }) {
  const t = un(Bhe);
  return e || t ? h.jsx(Lhe, { onSelectionChange: e }) : null;
}
const jB = [0, 0], $he = { x: 0, y: 0, zoom: 1 }, Fhe = [
  "nodes",
  "edges",
  "defaultNodes",
  "defaultEdges",
  "onConnect",
  "onConnectStart",
  "onConnectEnd",
  "onClickConnectStart",
  "onClickConnectEnd",
  "nodesDraggable",
  "autoPanOnNodeFocus",
  "nodesConnectable",
  "nodesFocusable",
  "edgesFocusable",
  "edgesReconnectable",
  "elevateNodesOnSelect",
  "elevateEdgesOnSelect",
  "minZoom",
  "maxZoom",
  "nodeExtent",
  "onNodesChange",
  "onEdgesChange",
  "elementsSelectable",
  "connectionMode",
  "snapGrid",
  "snapToGrid",
  "translateExtent",
  "connectOnClick",
  "defaultEdgeOptions",
  "fitView",
  "fitViewOptions",
  "onNodesDelete",
  "onEdgesDelete",
  "onDelete",
  "onNodeDrag",
  "onNodeDragStart",
  "onNodeDragStop",
  "onSelectionDrag",
  "onSelectionDragStart",
  "onSelectionDragStop",
  "onMoveStart",
  "onMove",
  "onMoveEnd",
  "noPanClassName",
  "nodeOrigin",
  "autoPanOnConnect",
  "autoPanOnNodeDrag",
  "onError",
  "connectionRadius",
  "isValidConnection",
  "selectNodesOnDrag",
  "nodeDragThreshold",
  "connectionDragThreshold",
  "onBeforeDelete",
  "debug",
  "autoPanSpeed",
  "ariaLabelConfig",
  "zIndexMode"
], i8 = [...Fhe, "rfId"], Uhe = (e) => ({
  setNodes: e.setNodes,
  setEdges: e.setEdges,
  setMinZoom: e.setMinZoom,
  setMaxZoom: e.setMaxZoom,
  setTranslateExtent: e.setTranslateExtent,
  setNodeExtent: e.setNodeExtent,
  reset: e.reset,
  setDefaultNodesAndEdges: e.setDefaultNodesAndEdges
}), s8 = {
  /*
   * these are values that are also passed directly to other components
   * than the StoreUpdater. We can reduce the number of setStore calls
   * by setting the same values here as prev fields.
   */
  translateExtent: sy,
  nodeOrigin: jB,
  minZoom: 0.5,
  maxZoom: 2,
  elementsSelectable: !0,
  noPanClassName: "nopan",
  rfId: "1"
};
function Vhe(e) {
  const { setNodes: t, setEdges: n, setMinZoom: r, setMaxZoom: i, setTranslateExtent: a, setNodeExtent: o, reset: u, setDefaultNodesAndEdges: c } = un(Uhe, fr), f = hr();
  B.useEffect(() => (c(e.defaultNodes, e.defaultEdges), () => {
    p.current = s8, u();
  }), []);
  const p = B.useRef(s8);
  return B.useEffect(
    () => {
      for (const g of i8) {
        const x = e[g], b = p.current[g];
        x !== b && (typeof e[g] > "u" || (g === "nodes" ? t(x) : g === "edges" ? n(x) : g === "minZoom" ? r(x) : g === "maxZoom" ? i(x) : g === "translateExtent" ? a(x) : g === "nodeExtent" ? o(x) : g === "ariaLabelConfig" ? f.setState({ ariaLabelConfig: zde(x) }) : g === "fitView" ? f.setState({ fitViewQueued: x }) : g === "fitViewOptions" ? f.setState({ fitViewOptions: x }) : f.setState({ [g]: x })));
      }
      p.current = e;
    },
    // Only re-run the effect if one of the fields we track changes
    i8.map((g) => e[g])
  ), null;
}
function a8() {
  return typeof window > "u" || !window.matchMedia ? null : window.matchMedia("(prefers-color-scheme: dark)");
}
function Hhe(e) {
  var r;
  const [t, n] = B.useState(e === "system" ? null : e);
  return B.useEffect(() => {
    if (e !== "system") {
      n(e);
      return;
    }
    const i = a8(), a = () => n(i != null && i.matches ? "dark" : "light");
    return a(), i == null || i.addEventListener("change", a), () => {
      i == null || i.removeEventListener("change", a);
    };
  }, [e]), t !== null ? t : (r = a8()) != null && r.matches ? "dark" : "light";
}
const o8 = typeof document < "u" ? document : null;
function cy(e = null, t = { target: o8, actInsideInputWithModifier: !0 }) {
  const [n, r] = B.useState(!1), i = B.useRef(!1), a = B.useRef(/* @__PURE__ */ new Set([])), [o, u] = B.useMemo(() => {
    if (e !== null) {
      const f = (Array.isArray(e) ? e : [e]).filter((g) => typeof g == "string").map((g) => g.replace("+", `
`).replace(`

`, `
+`).split(`
`)), p = f.reduce((g, x) => g.concat(...x), []);
      return [f, p];
    }
    return [[], []];
  }, [e]);
  return B.useEffect(() => {
    const c = (t == null ? void 0 : t.target) ?? o8, f = (t == null ? void 0 : t.actInsideInputWithModifier) ?? !0;
    if (e !== null) {
      const p = (b) => {
        var k, T;
        if (i.current = b.ctrlKey || b.metaKey || b.shiftKey || b.altKey, (!i.current || i.current && !f) && lB(b))
          return !1;
        const E = u8(b.code, u);
        if (a.current.add(b[E]), l8(o, a.current, !1)) {
          const R = ((T = (k = b.composedPath) == null ? void 0 : k.call(b)) == null ? void 0 : T[0]) || b.target, N = (R == null ? void 0 : R.nodeName) === "BUTTON" || (R == null ? void 0 : R.nodeName) === "A";
          t.preventDefault !== !1 && (i.current || !N) && b.preventDefault(), r(!0);
        }
      }, g = (b) => {
        const _ = u8(b.code, u);
        l8(o, a.current, !0) ? (r(!1), a.current.clear()) : a.current.delete(b[_]), b.key === "Meta" && a.current.clear(), i.current = !1;
      }, x = () => {
        a.current.clear(), r(!1);
      };
      return c == null || c.addEventListener("keydown", p), c == null || c.addEventListener("keyup", g), window.addEventListener("blur", x), window.addEventListener("contextmenu", x), () => {
        c == null || c.removeEventListener("keydown", p), c == null || c.removeEventListener("keyup", g), window.removeEventListener("blur", x), window.removeEventListener("contextmenu", x);
      };
    }
  }, [e, r]), n;
}
function l8(e, t, n) {
  return e.filter((r) => n || r.length === t.size).some((r) => r.every((i) => t.has(i)));
}
function u8(e, t) {
  return t.includes(e) ? "code" : "key";
}
const Ghe = () => {
  const e = hr();
  return B.useMemo(() => ({
    zoomIn: (t) => {
      const { panZoom: n } = e.getState();
      return n ? n.scaleBy(1.2, { duration: t == null ? void 0 : t.duration }) : Promise.resolve(!1);
    },
    zoomOut: (t) => {
      const { panZoom: n } = e.getState();
      return n ? n.scaleBy(1 / 1.2, { duration: t == null ? void 0 : t.duration }) : Promise.resolve(!1);
    },
    zoomTo: (t, n) => {
      const { panZoom: r } = e.getState();
      return r ? r.scaleTo(t, { duration: n == null ? void 0 : n.duration }) : Promise.resolve(!1);
    },
    getZoom: () => e.getState().transform[2],
    setViewport: async (t, n) => {
      const { transform: [r, i, a], panZoom: o } = e.getState();
      return o ? (await o.setViewport({
        x: t.x ?? r,
        y: t.y ?? i,
        zoom: t.zoom ?? a
      }, n), Promise.resolve(!0)) : Promise.resolve(!1);
    },
    getViewport: () => {
      const [t, n, r] = e.getState().transform;
      return { x: t, y: n, zoom: r };
    },
    setCenter: async (t, n, r) => e.getState().setCenter(t, n, r),
    fitBounds: async (t, n) => {
      const { width: r, height: i, minZoom: a, maxZoom: o, panZoom: u } = e.getState(), c = fT(t, r, i, a, o, (n == null ? void 0 : n.padding) ?? 0.1);
      return u ? (await u.setViewport(c, {
        duration: n == null ? void 0 : n.duration,
        ease: n == null ? void 0 : n.ease,
        interpolate: n == null ? void 0 : n.interpolate
      }), Promise.resolve(!0)) : Promise.resolve(!1);
    },
    screenToFlowPosition: (t, n = {}) => {
      const { transform: r, snapGrid: i, snapToGrid: a, domNode: o } = e.getState();
      if (!o)
        return t;
      const { x: u, y: c } = o.getBoundingClientRect(), f = {
        x: t.x - u,
        y: t.y - c
      }, p = n.snapGrid ?? i, g = n.snapToGrid ?? a;
      return Ny(f, r, g, p);
    },
    flowToScreenPosition: (t) => {
      const { transform: n, domNode: r } = e.getState();
      if (!r)
        return t;
      const { x: i, y: a } = r.getBoundingClientRect(), o = Ux(t, n);
      return {
        x: o.x + i,
        y: o.y + a
      };
    }
  }), []);
};
function NB(e, t) {
  const n = [], r = /* @__PURE__ */ new Map(), i = [];
  for (const a of e)
    if (a.type === "add") {
      i.push(a);
      continue;
    } else if (a.type === "remove" || a.type === "replace")
      r.set(a.id, [a]);
    else {
      const o = r.get(a.id);
      o ? o.push(a) : r.set(a.id, [a]);
    }
  for (const a of t) {
    const o = r.get(a.id);
    if (!o) {
      n.push(a);
      continue;
    }
    if (o[0].type === "remove")
      continue;
    if (o[0].type === "replace") {
      n.push({ ...o[0].item });
      continue;
    }
    const u = { ...a };
    for (const c of o)
      Khe(c, u);
    n.push(u);
  }
  return i.length && i.forEach((a) => {
    a.index !== void 0 ? n.splice(a.index, 0, { ...a.item }) : n.push({ ...a.item });
  }), n;
}
function Khe(e, t) {
  switch (e.type) {
    case "select": {
      t.selected = e.selected;
      break;
    }
    case "position": {
      typeof e.position < "u" && (t.position = e.position), typeof e.dragging < "u" && (t.dragging = e.dragging);
      break;
    }
    case "dimensions": {
      typeof e.dimensions < "u" && (t.measured = {
        ...e.dimensions
      }, e.setAttributes && ((e.setAttributes === !0 || e.setAttributes === "width") && (t.width = e.dimensions.width), (e.setAttributes === !0 || e.setAttributes === "height") && (t.height = e.dimensions.height))), typeof e.resizing == "boolean" && (t.resizing = e.resizing);
      break;
    }
  }
}
function RB(e, t) {
  return NB(e, t);
}
function MB(e, t) {
  return NB(e, t);
}
function Dd(e, t) {
  return {
    id: e,
    type: "select",
    selected: t
  };
}
function Kp(e, t = /* @__PURE__ */ new Set(), n = !1) {
  const r = [];
  for (const [i, a] of e) {
    const o = t.has(i);
    !(a.selected === void 0 && !o) && a.selected !== o && (n && (a.selected = o), r.push(Dd(a.id, o)));
  }
  return r;
}
function c8({ items: e = [], lookup: t }) {
  var i;
  const n = [], r = new Map(e.map((a) => [a.id, a]));
  for (const [a, o] of e.entries()) {
    const u = t.get(o.id), c = ((i = u == null ? void 0 : u.internals) == null ? void 0 : i.userNode) ?? u;
    c !== void 0 && c !== o && n.push({ id: o.id, item: o, type: "replace" }), c === void 0 && n.push({ item: o, type: "add", index: a });
  }
  for (const [a] of t)
    r.get(a) === void 0 && n.push({ id: a, type: "remove" });
  return n;
}
function f8(e) {
  return {
    id: e.id,
    type: "remove"
  };
}
const d8 = (e) => Ede(e), Yhe = (e) => eB(e);
function OB(e) {
  return B.forwardRef(e);
}
const Whe = typeof window < "u" ? B.useLayoutEffect : B.useEffect;
function h8(e) {
  const [t, n] = B.useState(BigInt(0)), [r] = B.useState(() => Zhe(() => n((i) => i + BigInt(1))));
  return Whe(() => {
    const i = r.get();
    i.length && (e(i), r.reset());
  }, [t]), r;
}
function Zhe(e) {
  let t = [];
  return {
    get: () => t,
    reset: () => {
      t = [];
    },
    push: (n) => {
      t.push(n), e();
    }
  };
}
const DB = B.createContext(null);
function Xhe({ children: e }) {
  const t = hr(), n = B.useCallback((u) => {
    const { nodes: c = [], setNodes: f, hasDefaultNodes: p, onNodesChange: g, nodeLookup: x, fitViewQueued: b, onNodesChangeMiddlewareMap: _ } = t.getState();
    let E = c;
    for (const T of u)
      E = typeof T == "function" ? T(E) : T;
    let k = c8({
      items: E,
      lookup: x
    });
    for (const T of _.values())
      k = T(k);
    p && f(E), k.length > 0 ? g == null || g(k) : b && window.requestAnimationFrame(() => {
      const { fitViewQueued: T, nodes: R, setNodes: N } = t.getState();
      T && N(R);
    });
  }, []), r = h8(n), i = B.useCallback((u) => {
    const { edges: c = [], setEdges: f, hasDefaultEdges: p, onEdgesChange: g, edgeLookup: x } = t.getState();
    let b = c;
    for (const _ of u)
      b = typeof _ == "function" ? _(b) : _;
    p ? f(b) : g && g(c8({
      items: b,
      lookup: x
    }));
  }, []), a = h8(i), o = B.useMemo(() => ({ nodeQueue: r, edgeQueue: a }), []);
  return h.jsx(DB.Provider, { value: o, children: e });
}
function Qhe() {
  const e = B.useContext(DB);
  if (!e)
    throw new Error("useBatchContext must be used within a BatchProvider");
  return e;
}
const Jhe = (e) => !!e.panZoom;
function vT() {
  const e = Ghe(), t = hr(), n = Qhe(), r = un(Jhe), i = B.useMemo(() => {
    const a = (g) => t.getState().nodeLookup.get(g), o = (g) => {
      n.nodeQueue.push(g);
    }, u = (g) => {
      n.edgeQueue.push(g);
    }, c = (g) => {
      var T, R;
      const { nodeLookup: x, nodeOrigin: b } = t.getState(), _ = d8(g) ? g : x.get(g.id), E = _.parentId ? aB(_.position, _.measured, _.parentId, x, b) : _.position, k = {
        ..._,
        position: E,
        width: ((T = _.measured) == null ? void 0 : T.width) ?? _.width,
        height: ((R = _.measured) == null ? void 0 : R.height) ?? _.height
      };
      return hm(k);
    }, f = (g, x, b = { replace: !1 }) => {
      o((_) => _.map((E) => {
        if (E.id === g) {
          const k = typeof x == "function" ? x(E) : x;
          return b.replace && d8(k) ? k : { ...E, ...k };
        }
        return E;
      }));
    }, p = (g, x, b = { replace: !1 }) => {
      u((_) => _.map((E) => {
        if (E.id === g) {
          const k = typeof x == "function" ? x(E) : x;
          return b.replace && Yhe(k) ? k : { ...E, ...k };
        }
        return E;
      }));
    };
    return {
      getNodes: () => t.getState().nodes.map((g) => ({ ...g })),
      getNode: (g) => {
        var x;
        return (x = a(g)) == null ? void 0 : x.internals.userNode;
      },
      getInternalNode: a,
      getEdges: () => {
        const { edges: g = [] } = t.getState();
        return g.map((x) => ({ ...x }));
      },
      getEdge: (g) => t.getState().edgeLookup.get(g),
      setNodes: o,
      setEdges: u,
      addNodes: (g) => {
        const x = Array.isArray(g) ? g : [g];
        n.nodeQueue.push((b) => [...b, ...x]);
      },
      addEdges: (g) => {
        const x = Array.isArray(g) ? g : [g];
        n.edgeQueue.push((b) => [...b, ...x]);
      },
      toObject: () => {
        const { nodes: g = [], edges: x = [], transform: b } = t.getState(), [_, E, k] = b;
        return {
          nodes: g.map((T) => ({ ...T })),
          edges: x.map((T) => ({ ...T })),
          viewport: {
            x: _,
            y: E,
            zoom: k
          }
        };
      },
      deleteElements: async ({ nodes: g = [], edges: x = [] }) => {
        const { nodes: b, edges: _, onNodesDelete: E, onEdgesDelete: k, triggerNodeChanges: T, triggerEdgeChanges: R, onDelete: N, onBeforeDelete: O } = t.getState(), { nodes: P, edges: z } = await Nde({
          nodesToRemove: g,
          edgesToRemove: x,
          nodes: b,
          edges: _,
          onBeforeDelete: O
        }), q = z.length > 0, G = P.length > 0;
        if (q) {
          const Y = z.map(f8);
          k == null || k(z), R(Y);
        }
        if (G) {
          const Y = P.map(f8);
          E == null || E(P), T(Y);
        }
        return (G || q) && (N == null || N({ nodes: P, edges: z })), { deletedNodes: P, deletedEdges: z };
      },
      /**
       * Partial is defined as "the 2 nodes/areas are intersecting partially".
       * If a is contained in b or b is contained in a, they are both
       * considered fully intersecting.
       */
      getIntersectingNodes: (g, x = !0, b) => {
        const _ = UN(g), E = _ ? g : c(g), k = b !== void 0;
        return E ? (b || t.getState().nodes).filter((T) => {
          const R = t.getState().nodeLookup.get(T.id);
          if (R && !_ && (T.id === g.id || !R.internals.positionAbsolute))
            return !1;
          const N = hm(k ? T : R), O = ly(N, E);
          return x && O > 0 || O >= N.width * N.height || O >= E.width * E.height;
        }) : [];
      },
      isNodeIntersecting: (g, x, b = !0) => {
        const E = UN(g) ? g : c(g);
        if (!E)
          return !1;
        const k = ly(E, x);
        return b && k > 0 || k >= x.width * x.height || k >= E.width * E.height;
      },
      updateNode: f,
      updateNodeData: (g, x, b = { replace: !1 }) => {
        f(g, (_) => {
          const E = typeof x == "function" ? x(_) : x;
          return b.replace ? { ..._, data: E } : { ..._, data: { ..._.data, ...E } };
        }, b);
      },
      updateEdge: p,
      updateEdgeData: (g, x, b = { replace: !1 }) => {
        p(g, (_) => {
          const E = typeof x == "function" ? x(_) : x;
          return b.replace ? { ..._, data: E } : { ..._, data: { ..._.data, ...E } };
        }, b);
      },
      getNodesBounds: (g) => {
        const { nodeLookup: x, nodeOrigin: b } = t.getState();
        return kde(g, { nodeLookup: x, nodeOrigin: b });
      },
      getHandleConnections: ({ type: g, id: x, nodeId: b }) => {
        var _;
        return Array.from(((_ = t.getState().connectionLookup.get(`${b}-${g}${x ? `-${x}` : ""}`)) == null ? void 0 : _.values()) ?? []);
      },
      getNodeConnections: ({ type: g, handleId: x, nodeId: b }) => {
        var _;
        return Array.from(((_ = t.getState().connectionLookup.get(`${b}${g ? x ? `-${g}-${x}` : `-${g}` : ""}`)) == null ? void 0 : _.values()) ?? []);
      },
      fitView: async (g) => {
        const x = t.getState().fitViewResolver ?? Dde();
        return t.setState({ fitViewQueued: !0, fitViewOptions: g, fitViewResolver: x }), n.nodeQueue.push((b) => [...b]), x.promise;
      }
    };
  }, []);
  return B.useMemo(() => ({
    ...i,
    ...e,
    viewportInitialized: r
  }), [r]);
}
const p8 = (e) => e.selected, epe = typeof window < "u" ? window : void 0;
function tpe({ deleteKeyCode: e, multiSelectionKeyCode: t }) {
  const n = hr(), { deleteElements: r } = vT(), i = cy(e, { actInsideInputWithModifier: !1 }), a = cy(t, { target: epe });
  B.useEffect(() => {
    if (i) {
      const { edges: o, nodes: u } = n.getState();
      r({ nodes: u.filter(p8), edges: o.filter(p8) }), n.setState({ nodesSelectionActive: !1 });
    }
  }, [i]), B.useEffect(() => {
    n.setState({ multiSelectionActive: a });
  }, [a]);
}
function npe(e) {
  const t = hr();
  B.useEffect(() => {
    const n = () => {
      var i, a, o, u;
      if (!e.current || !(((a = (i = e.current).checkVisibility) == null ? void 0 : a.call(i)) ?? !0))
        return !1;
      const r = dT(e.current);
      (r.height === 0 || r.width === 0) && ((u = (o = t.getState()).onError) == null || u.call(o, "004", Gl.error004())), t.setState({ width: r.width || 500, height: r.height || 500 });
    };
    if (e.current) {
      n(), window.addEventListener("resize", n);
      const r = new ResizeObserver(() => n());
      return r.observe(e.current), () => {
        window.removeEventListener("resize", n), r && e.current && r.unobserve(e.current);
      };
    }
  }, []);
}
const kb = {
  position: "absolute",
  width: "100%",
  height: "100%",
  top: 0,
  left: 0
}, rpe = (e) => ({
  userSelectionActive: e.userSelectionActive,
  lib: e.lib,
  connectionInProgress: e.connection.inProgress
});
function ipe({ onPaneContextMenu: e, zoomOnScroll: t = !0, zoomOnPinch: n = !0, panOnScroll: r = !1, panOnScrollSpeed: i = 0.5, panOnScrollMode: a = Wd.Free, zoomOnDoubleClick: o = !0, panOnDrag: u = !0, defaultViewport: c, translateExtent: f, minZoom: p, maxZoom: g, zoomActivationKeyCode: x, preventScrolling: b = !0, children: _, noWheelClassName: E, noPanClassName: k, onViewportChange: T, isControlledViewport: R, paneClickDistance: N, selectionOnDrag: O }) {
  const P = hr(), z = B.useRef(null), { userSelectionActive: q, lib: G, connectionInProgress: Y } = un(rpe, fr), W = cy(x), F = B.useRef();
  npe(z);
  const X = B.useCallback((me) => {
    T == null || T({ x: me[0], y: me[1], zoom: me[2] }), R || P.setState({ transform: me });
  }, [T, R]);
  return B.useEffect(() => {
    if (z.current) {
      F.current = yhe({
        domNode: z.current,
        minZoom: p,
        maxZoom: g,
        translateExtent: f,
        viewport: c,
        onDraggingChange: (Q) => P.setState({ paneDragging: Q }),
        onPanZoomStart: (Q, oe) => {
          const { onViewportChangeStart: fe, onMoveStart: ce } = P.getState();
          ce == null || ce(Q, oe), fe == null || fe(oe);
        },
        onPanZoom: (Q, oe) => {
          const { onViewportChange: fe, onMove: ce } = P.getState();
          ce == null || ce(Q, oe), fe == null || fe(oe);
        },
        onPanZoomEnd: (Q, oe) => {
          const { onViewportChangeEnd: fe, onMoveEnd: ce } = P.getState();
          ce == null || ce(Q, oe), fe == null || fe(oe);
        }
      });
      const { x: me, y: J, zoom: le } = F.current.getViewport();
      return P.setState({
        panZoom: F.current,
        transform: [me, J, le],
        domNode: z.current.closest(".react-flow")
      }), () => {
        var Q;
        (Q = F.current) == null || Q.destroy();
      };
    }
  }, []), B.useEffect(() => {
    var me;
    (me = F.current) == null || me.update({
      onPaneContextMenu: e,
      zoomOnScroll: t,
      zoomOnPinch: n,
      panOnScroll: r,
      panOnScrollSpeed: i,
      panOnScrollMode: a,
      zoomOnDoubleClick: o,
      panOnDrag: u,
      zoomActivationKeyPressed: W,
      preventScrolling: b,
      noPanClassName: k,
      userSelectionActive: q,
      noWheelClassName: E,
      lib: G,
      onTransformChange: X,
      connectionInProgress: Y,
      selectionOnDrag: O,
      paneClickDistance: N
    });
  }, [
    e,
    t,
    n,
    r,
    i,
    a,
    o,
    u,
    W,
    b,
    k,
    q,
    E,
    G,
    X,
    Y,
    O,
    N
  ]), h.jsx("div", { className: "react-flow__renderer", ref: z, style: kb, children: _ });
}
const spe = (e) => ({
  userSelectionActive: e.userSelectionActive,
  userSelectionRect: e.userSelectionRect
});
function ape() {
  const { userSelectionActive: e, userSelectionRect: t } = un(spe, fr);
  return e && t ? h.jsx("div", { className: "react-flow__selection react-flow__container", style: {
    width: t.width,
    height: t.height,
    transform: `translate(${t.x}px, ${t.y}px)`
  } }) : null;
}
const Fw = (e, t) => (n) => {
  n.target === t.current && (e == null || e(n));
}, ope = (e) => ({
  userSelectionActive: e.userSelectionActive,
  elementsSelectable: e.elementsSelectable,
  connectionInProgress: e.connection.inProgress,
  dragging: e.paneDragging
});
function lpe({ isSelecting: e, selectionKeyPressed: t, selectionMode: n = ay.Full, panOnDrag: r, paneClickDistance: i, selectionOnDrag: a, onSelectionStart: o, onSelectionEnd: u, onPaneClick: c, onPaneContextMenu: f, onPaneScroll: p, onPaneMouseEnter: g, onPaneMouseMove: x, onPaneMouseLeave: b, children: _ }) {
  const E = hr(), { userSelectionActive: k, elementsSelectable: T, dragging: R, connectionInProgress: N } = un(ope, fr), O = T && (e || k), P = B.useRef(null), z = B.useRef(), q = B.useRef(/* @__PURE__ */ new Set()), G = B.useRef(/* @__PURE__ */ new Set()), Y = B.useRef(!1), W = (fe) => {
    if (Y.current || N) {
      Y.current = !1;
      return;
    }
    c == null || c(fe), E.getState().resetSelectedElements(), E.setState({ nodesSelectionActive: !1 });
  }, F = (fe) => {
    if (Array.isArray(r) && (r != null && r.includes(2))) {
      fe.preventDefault();
      return;
    }
    f == null || f(fe);
  }, X = p ? (fe) => p(fe) : void 0, me = (fe) => {
    Y.current && (fe.stopPropagation(), Y.current = !1);
  }, J = (fe) => {
    var ge, we;
    const { domNode: ce } = E.getState();
    if (z.current = ce == null ? void 0 : ce.getBoundingClientRect(), !z.current)
      return;
    const K = fe.target === P.current;
    if (!K && !!fe.target.closest(".nokey") || !e || !(a && K || t) || fe.button !== 0 || !fe.isPrimary)
      return;
    (we = (ge = fe.target) == null ? void 0 : ge.setPointerCapture) == null || we.call(ge, fe.pointerId), Y.current = !1;
    const { x: V, y: ae } = Uo(fe.nativeEvent, z.current);
    E.setState({
      userSelectionRect: {
        width: 0,
        height: 0,
        startX: V,
        startY: ae,
        x: V,
        y: ae
      }
    }), K || (fe.stopPropagation(), fe.preventDefault());
  }, le = (fe) => {
    const { userSelectionRect: ce, transform: K, nodeLookup: re, edgeLookup: de, connectionLookup: V, triggerNodeChanges: ae, triggerEdgeChanges: ge, defaultEdgeOptions: we, resetSelectedElements: Re } = E.getState();
    if (!z.current || !ce)
      return;
    const { x: Ie, y: Me } = Uo(fe.nativeEvent, z.current), { startX: dt, startY: ut } = ce;
    if (!Y.current) {
      const At = t ? 0 : i;
      if (Math.hypot(Ie - dt, Me - ut) <= At)
        return;
      Re(), o == null || o(fe);
    }
    Y.current = !0;
    const Je = {
      startX: dt,
      startY: ut,
      x: Ie < dt ? Ie : dt,
      y: Me < ut ? Me : ut,
      width: Math.abs(Ie - dt),
      height: Math.abs(Me - ut)
    }, ct = q.current, mt = G.current;
    q.current = new Set(cT(re, Je, K, n === ay.Partial, !0).map((At) => At.id)), G.current = /* @__PURE__ */ new Set();
    const ft = (we == null ? void 0 : we.selectable) ?? !0;
    for (const At of q.current) {
      const xt = V.get(At);
      if (xt)
        for (const { edgeId: qn } of xt.values()) {
          const An = de.get(qn);
          An && (An.selectable ?? ft) && G.current.add(qn);
        }
    }
    if (!VN(ct, q.current)) {
      const At = Kp(re, q.current, !0);
      ae(At);
    }
    if (!VN(mt, G.current)) {
      const At = Kp(de, G.current);
      ge(At);
    }
    E.setState({
      userSelectionRect: Je,
      userSelectionActive: !0,
      nodesSelectionActive: !1
    });
  }, Q = (fe) => {
    var ce, K;
    fe.button === 0 && ((K = (ce = fe.target) == null ? void 0 : ce.releasePointerCapture) == null || K.call(ce, fe.pointerId), !k && fe.target === P.current && E.getState().userSelectionRect && (W == null || W(fe)), E.setState({
      userSelectionActive: !1,
      userSelectionRect: null
    }), Y.current && (u == null || u(fe), E.setState({
      nodesSelectionActive: q.current.size > 0
    })));
  }, oe = r === !0 || Array.isArray(r) && r.includes(0);
  return h.jsxs("div", { className: Zr(["react-flow__pane", { draggable: oe, dragging: R, selection: e }]), onClick: O ? void 0 : Fw(W, P), onContextMenu: Fw(F, P), onWheel: Fw(X, P), onPointerEnter: O ? void 0 : g, onPointerMove: O ? le : x, onPointerUp: O ? Q : void 0, onPointerDownCapture: O ? J : void 0, onClickCapture: O ? me : void 0, onPointerLeave: b, ref: P, style: kb, children: [_, h.jsx(ape, {})] });
}
function j5({ id: e, store: t, unselect: n = !1, nodeRef: r }) {
  const { addSelectedNodes: i, unselectNodesAndEdges: a, multiSelectionActive: o, nodeLookup: u, onError: c } = t.getState(), f = u.get(e);
  if (!f) {
    c == null || c("012", Gl.error012(e));
    return;
  }
  t.setState({ nodesSelectionActive: !1 }), f.selected ? (n || f.selected && o) && (a({ nodes: [f], edges: [] }), requestAnimationFrame(() => {
    var p;
    return (p = r == null ? void 0 : r.current) == null ? void 0 : p.blur();
  })) : i([e]);
}
function zB({ nodeRef: e, disabled: t = !1, noDragClassName: n, handleSelector: r, nodeId: i, isSelectable: a, nodeClickDistance: o }) {
  const u = hr(), [c, f] = B.useState(!1), p = B.useRef();
  return B.useEffect(() => {
    p.current = rhe({
      getStoreItems: () => u.getState(),
      onNodeMouseDown: (g) => {
        j5({
          id: g,
          store: u,
          nodeRef: e
        });
      },
      onDragStart: () => {
        f(!0);
      },
      onDragStop: () => {
        f(!1);
      }
    });
  }, []), B.useEffect(() => {
    var g, x;
    if (t)
      (g = p.current) == null || g.destroy();
    else if (e.current)
      return (x = p.current) == null || x.update({
        noDragClassName: n,
        handleSelector: r,
        domNode: e.current,
        isSelectable: a,
        nodeId: i,
        nodeClickDistance: o
      }), () => {
        var b;
        (b = p.current) == null || b.destroy();
      };
  }, [n, r, t, a, e, i]), c;
}
const upe = (e) => (t) => t.selected && (t.draggable || e && typeof t.draggable > "u");
function PB() {
  const e = hr();
  return B.useCallback((n) => {
    const { nodeExtent: r, snapToGrid: i, snapGrid: a, nodesDraggable: o, onError: u, updateNodePositions: c, nodeLookup: f, nodeOrigin: p } = e.getState(), g = /* @__PURE__ */ new Map(), x = upe(o), b = i ? a[0] : 5, _ = i ? a[1] : 5, E = n.direction.x * b * n.factor, k = n.direction.y * _ * n.factor;
    for (const [, T] of f) {
      if (!x(T))
        continue;
      let R = {
        x: T.internals.positionAbsolute.x + E,
        y: T.internals.positionAbsolute.y + k
      };
      i && (R = jy(R, a));
      const { position: N, positionAbsolute: O } = tB({
        nodeId: T.id,
        nextPosition: R,
        nodeLookup: f,
        nodeExtent: r,
        nodeOrigin: p,
        onError: u
      });
      T.position = N, T.internals.positionAbsolute = O, g.set(T.id, T);
    }
    c(g);
  }, []);
}
const IB = B.createContext(null), cpe = IB.Provider, LB = () => B.useContext(IB), fpe = (e) => ({
  connectOnClick: e.connectOnClick,
  noPanClassName: e.noPanClassName,
  rfId: e.rfId
}), dpe = (e, t, n) => (r) => {
  const { connectionClickStartHandle: i, connectionMode: a, connection: o } = r, { fromHandle: u, toHandle: c, isValid: f } = o, p = (c == null ? void 0 : c.nodeId) === e && (c == null ? void 0 : c.id) === t && (c == null ? void 0 : c.type) === n;
  return {
    connectingFrom: (u == null ? void 0 : u.nodeId) === e && (u == null ? void 0 : u.id) === t && (u == null ? void 0 : u.type) === n,
    connectingTo: p,
    clickConnecting: (i == null ? void 0 : i.nodeId) === e && (i == null ? void 0 : i.id) === t && (i == null ? void 0 : i.type) === n,
    isPossibleEndHandle: a === fm.Strict ? (u == null ? void 0 : u.type) !== n : e !== (u == null ? void 0 : u.nodeId) || t !== (u == null ? void 0 : u.id),
    connectionInProcess: !!u,
    clickConnectionInProcess: !!i,
    valid: p && f
  };
};
function hpe({ type: e = "source", position: t = vt.Top, isValidConnection: n, isConnectable: r = !0, isConnectableStart: i = !0, isConnectableEnd: a = !0, id: o, onConnect: u, children: c, className: f, onMouseDown: p, onTouchStart: g, ...x }, b) {
  var le, Q;
  const _ = o || null, E = e === "target", k = hr(), T = LB(), { connectOnClick: R, noPanClassName: N, rfId: O } = un(fpe, fr), { connectingFrom: P, connectingTo: z, clickConnecting: q, isPossibleEndHandle: G, connectionInProcess: Y, clickConnectionInProcess: W, valid: F } = un(dpe(T, _, e), fr);
  T || (Q = (le = k.getState()).onError) == null || Q.call(le, "010", Gl.error010());
  const X = (oe) => {
    const { defaultEdgeOptions: fe, onConnect: ce, hasDefaultEdges: K } = k.getState(), re = {
      ...fe,
      ...oe
    };
    if (K) {
      const { edges: de, setEdges: V } = k.getState();
      V($de(re, de));
    }
    ce == null || ce(re), u == null || u(re);
  }, me = (oe) => {
    if (!T)
      return;
    const fe = uB(oe.nativeEvent);
    if (i && (fe && oe.button === 0 || !fe)) {
      const ce = k.getState();
      A5.onPointerDown(oe.nativeEvent, {
        handleDomNode: oe.currentTarget,
        autoPanOnConnect: ce.autoPanOnConnect,
        connectionMode: ce.connectionMode,
        connectionRadius: ce.connectionRadius,
        domNode: ce.domNode,
        nodeLookup: ce.nodeLookup,
        lib: ce.lib,
        isTarget: E,
        handleId: _,
        nodeId: T,
        flowId: ce.rfId,
        panBy: ce.panBy,
        cancelConnection: ce.cancelConnection,
        onConnectStart: ce.onConnectStart,
        onConnectEnd: ce.onConnectEnd,
        updateConnection: ce.updateConnection,
        onConnect: X,
        isValidConnection: n || ce.isValidConnection,
        getTransform: () => k.getState().transform,
        getFromHandle: () => k.getState().connection.fromHandle,
        autoPanSpeed: ce.autoPanSpeed,
        dragThreshold: ce.connectionDragThreshold
      });
    }
    fe ? p == null || p(oe) : g == null || g(oe);
  }, J = (oe) => {
    const { onClickConnectStart: fe, onClickConnectEnd: ce, connectionClickStartHandle: K, connectionMode: re, isValidConnection: de, lib: V, rfId: ae, nodeLookup: ge, connection: we } = k.getState();
    if (!T || !K && !i)
      return;
    if (!K) {
      fe == null || fe(oe.nativeEvent, { nodeId: T, handleId: _, handleType: e }), k.setState({ connectionClickStartHandle: { nodeId: T, type: e, id: _ } });
      return;
    }
    const Re = oB(oe.target), Ie = n || de, { connection: Me, isValid: dt } = A5.isValid(oe.nativeEvent, {
      handle: {
        nodeId: T,
        id: _,
        type: e
      },
      connectionMode: re,
      fromNodeId: K.nodeId,
      fromHandleId: K.id || null,
      fromType: K.type,
      isValidConnection: Ie,
      flowId: ae,
      doc: Re,
      lib: V,
      nodeLookup: ge
    });
    dt && Me && X(Me);
    const ut = structuredClone(we);
    delete ut.inProgress, ut.toPosition = ut.toHandle ? ut.toHandle.position : null, ce == null || ce(oe, ut), k.setState({ connectionClickStartHandle: null });
  };
  return h.jsx("div", { "data-handleid": _, "data-nodeid": T, "data-handlepos": t, "data-id": `${O}-${T}-${_}-${e}`, className: Zr([
    "react-flow__handle",
    `react-flow__handle-${t}`,
    "nodrag",
    N,
    f,
    {
      source: !E,
      target: E,
      connectable: r,
      connectablestart: i,
      connectableend: a,
      clickconnecting: q,
      connectingfrom: P,
      connectingto: z,
      valid: F,
      /*
       * shows where you can start a connection from
       * and where you can end it while connecting
       */
      connectionindicator: r && (!Y || G) && (Y || W ? a : i)
    }
  ]), onMouseDown: me, onTouchStart: me, onClick: R ? J : void 0, ref: b, ...x, children: c });
}
const Yi = B.memo(OB(hpe));
function ppe({ data: e, isConnectable: t, sourcePosition: n = vt.Bottom }) {
  return h.jsxs(h.Fragment, { children: [e == null ? void 0 : e.label, h.jsx(Yi, { type: "source", position: n, isConnectable: t })] });
}
function mpe({ data: e, isConnectable: t, targetPosition: n = vt.Top, sourcePosition: r = vt.Bottom }) {
  return h.jsxs(h.Fragment, { children: [h.jsx(Yi, { type: "target", position: n, isConnectable: t }), e == null ? void 0 : e.label, h.jsx(Yi, { type: "source", position: r, isConnectable: t })] });
}
function gpe() {
  return null;
}
function ype({ data: e, isConnectable: t, targetPosition: n = vt.Top }) {
  return h.jsxs(h.Fragment, { children: [h.jsx(Yi, { type: "target", position: n, isConnectable: t }), e == null ? void 0 : e.label] });
}
const Vx = {
  ArrowUp: { x: 0, y: -1 },
  ArrowDown: { x: 0, y: 1 },
  ArrowLeft: { x: -1, y: 0 },
  ArrowRight: { x: 1, y: 0 }
}, m8 = {
  input: ppe,
  default: mpe,
  output: ype,
  group: gpe
};
function vpe(e) {
  var t, n, r, i;
  return e.internals.handleBounds === void 0 ? {
    width: e.width ?? e.initialWidth ?? ((t = e.style) == null ? void 0 : t.width),
    height: e.height ?? e.initialHeight ?? ((n = e.style) == null ? void 0 : n.height)
  } : {
    width: e.width ?? ((r = e.style) == null ? void 0 : r.width),
    height: e.height ?? ((i = e.style) == null ? void 0 : i.height)
  };
}
const xpe = (e) => {
  const { width: t, height: n, x: r, y: i } = Ay(e.nodeLookup, {
    filter: (a) => !!a.selected
  });
  return {
    width: Fo(t) ? t : null,
    height: Fo(n) ? n : null,
    userSelectionActive: e.userSelectionActive,
    transformString: `translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`
  };
};
function bpe({ onSelectionContextMenu: e, noPanClassName: t, disableKeyboardA11y: n }) {
  const r = hr(), { width: i, height: a, transformString: o, userSelectionActive: u } = un(xpe, fr), c = PB(), f = B.useRef(null);
  if (B.useEffect(() => {
    var x;
    n || (x = f.current) == null || x.focus({
      preventScroll: !0
    });
  }, [n]), zB({
    nodeRef: f
  }), u || !i || !a)
    return null;
  const p = e ? (x) => {
    const b = r.getState().nodes.filter((_) => _.selected);
    e(x, b);
  } : void 0, g = (x) => {
    Object.prototype.hasOwnProperty.call(Vx, x.key) && (x.preventDefault(), c({
      direction: Vx[x.key],
      factor: x.shiftKey ? 4 : 1
    }));
  };
  return h.jsx("div", { className: Zr(["react-flow__nodesselection", "react-flow__container", t]), style: {
    transform: o
  }, children: h.jsx("div", { ref: f, className: "react-flow__nodesselection-rect", onContextMenu: p, tabIndex: n ? void 0 : -1, onKeyDown: n ? void 0 : g, style: {
    width: i,
    height: a
  } }) });
}
const g8 = typeof window < "u" ? window : void 0, wpe = (e) => ({ nodesSelectionActive: e.nodesSelectionActive, userSelectionActive: e.userSelectionActive });
function BB({ children: e, onPaneClick: t, onPaneMouseEnter: n, onPaneMouseMove: r, onPaneMouseLeave: i, onPaneContextMenu: a, onPaneScroll: o, paneClickDistance: u, deleteKeyCode: c, selectionKeyCode: f, selectionOnDrag: p, selectionMode: g, onSelectionStart: x, onSelectionEnd: b, multiSelectionKeyCode: _, panActivationKeyCode: E, zoomActivationKeyCode: k, elementsSelectable: T, zoomOnScroll: R, zoomOnPinch: N, panOnScroll: O, panOnScrollSpeed: P, panOnScrollMode: z, zoomOnDoubleClick: q, panOnDrag: G, defaultViewport: Y, translateExtent: W, minZoom: F, maxZoom: X, preventScrolling: me, onSelectionContextMenu: J, noWheelClassName: le, noPanClassName: Q, disableKeyboardA11y: oe, onViewportChange: fe, isControlledViewport: ce }) {
  const { nodesSelectionActive: K, userSelectionActive: re } = un(wpe, fr), de = cy(f, { target: g8 }), V = cy(E, { target: g8 }), ae = V || G, ge = V || O, we = p && ae !== !0, Re = de || re || we;
  return tpe({ deleteKeyCode: c, multiSelectionKeyCode: _ }), h.jsx(ipe, { onPaneContextMenu: a, elementsSelectable: T, zoomOnScroll: R, zoomOnPinch: N, panOnScroll: ge, panOnScrollSpeed: P, panOnScrollMode: z, zoomOnDoubleClick: q, panOnDrag: !de && ae, defaultViewport: Y, translateExtent: W, minZoom: F, maxZoom: X, zoomActivationKeyCode: k, preventScrolling: me, noWheelClassName: le, noPanClassName: Q, onViewportChange: fe, isControlledViewport: ce, paneClickDistance: u, selectionOnDrag: we, children: h.jsxs(lpe, { onSelectionStart: x, onSelectionEnd: b, onPaneClick: t, onPaneMouseEnter: n, onPaneMouseMove: r, onPaneMouseLeave: i, onPaneContextMenu: a, onPaneScroll: o, panOnDrag: ae, isSelecting: !!Re, selectionMode: g, selectionKeyPressed: de, paneClickDistance: u, selectionOnDrag: we, children: [e, K && h.jsx(bpe, { onSelectionContextMenu: J, noPanClassName: Q, disableKeyboardA11y: oe })] }) });
}
BB.displayName = "FlowRenderer";
const _pe = B.memo(BB), Spe = (e) => (t) => e ? cT(t.nodeLookup, { x: 0, y: 0, width: t.width, height: t.height }, t.transform, !0).map((n) => n.id) : Array.from(t.nodeLookup.keys());
function Cpe(e) {
  return un(B.useCallback(Spe(e), [e]), fr);
}
const Epe = (e) => e.updateNodeInternals;
function kpe() {
  const e = un(Epe), [t] = B.useState(() => typeof ResizeObserver > "u" ? null : new ResizeObserver((n) => {
    const r = /* @__PURE__ */ new Map();
    n.forEach((i) => {
      const a = i.target.getAttribute("data-id");
      r.set(a, {
        id: a,
        nodeElement: i.target,
        force: !0
      });
    }), e(r);
  }));
  return B.useEffect(() => () => {
    t == null || t.disconnect();
  }, [t]), t;
}
function Tpe({ node: e, nodeType: t, hasDimensions: n, resizeObserver: r }) {
  const i = hr(), a = B.useRef(null), o = B.useRef(null), u = B.useRef(e.sourcePosition), c = B.useRef(e.targetPosition), f = B.useRef(t), p = n && !!e.internals.handleBounds;
  return B.useEffect(() => {
    a.current && !e.hidden && (!p || o.current !== a.current) && (o.current && (r == null || r.unobserve(o.current)), r == null || r.observe(a.current), o.current = a.current);
  }, [p, e.hidden]), B.useEffect(() => () => {
    o.current && (r == null || r.unobserve(o.current), o.current = null);
  }, []), B.useEffect(() => {
    if (a.current) {
      const g = f.current !== t, x = u.current !== e.sourcePosition, b = c.current !== e.targetPosition;
      (g || x || b) && (f.current = t, u.current = e.sourcePosition, c.current = e.targetPosition, i.getState().updateNodeInternals(/* @__PURE__ */ new Map([[e.id, { id: e.id, nodeElement: a.current, force: !0 }]])));
    }
  }, [e.id, t, e.sourcePosition, e.targetPosition]), a;
}
function Ape({ id: e, onClick: t, onMouseEnter: n, onMouseMove: r, onMouseLeave: i, onContextMenu: a, onDoubleClick: o, nodesDraggable: u, elementsSelectable: c, nodesConnectable: f, nodesFocusable: p, resizeObserver: g, noDragClassName: x, noPanClassName: b, disableKeyboardA11y: _, rfId: E, nodeTypes: k, nodeClickDistance: T, onError: R }) {
  const { node: N, internals: O, isParent: P } = un((Ie) => {
    const Me = Ie.nodeLookup.get(e), dt = Ie.parentLookup.has(e);
    return {
      node: Me,
      internals: Me.internals,
      isParent: dt
    };
  }, fr);
  let z = N.type || "default", q = (k == null ? void 0 : k[z]) || m8[z];
  q === void 0 && (R == null || R("003", Gl.error003(z)), z = "default", q = (k == null ? void 0 : k.default) || m8.default);
  const G = !!(N.draggable || u && typeof N.draggable > "u"), Y = !!(N.selectable || c && typeof N.selectable > "u"), W = !!(N.connectable || f && typeof N.connectable > "u"), F = !!(N.focusable || p && typeof N.focusable > "u"), X = hr(), me = sB(N), J = Tpe({ node: N, nodeType: z, hasDimensions: me, resizeObserver: g }), le = zB({
    nodeRef: J,
    disabled: N.hidden || !G,
    noDragClassName: x,
    handleSelector: N.dragHandle,
    nodeId: e,
    isSelectable: Y,
    nodeClickDistance: T
  }), Q = PB();
  if (N.hidden)
    return null;
  const oe = Uu(N), fe = vpe(N), ce = Y || G || t || n || r || i, K = n ? (Ie) => n(Ie, { ...O.userNode }) : void 0, re = r ? (Ie) => r(Ie, { ...O.userNode }) : void 0, de = i ? (Ie) => i(Ie, { ...O.userNode }) : void 0, V = a ? (Ie) => a(Ie, { ...O.userNode }) : void 0, ae = o ? (Ie) => o(Ie, { ...O.userNode }) : void 0, ge = (Ie) => {
    const { selectNodesOnDrag: Me, nodeDragThreshold: dt } = X.getState();
    Y && (!Me || !G || dt > 0) && j5({
      id: e,
      store: X,
      nodeRef: J
    }), t && t(Ie, { ...O.userNode });
  }, we = (Ie) => {
    if (!(lB(Ie.nativeEvent) || _)) {
      if (ZL.includes(Ie.key) && Y) {
        const Me = Ie.key === "Escape";
        j5({
          id: e,
          store: X,
          unselect: Me,
          nodeRef: J
        });
      } else if (G && N.selected && Object.prototype.hasOwnProperty.call(Vx, Ie.key)) {
        Ie.preventDefault();
        const { ariaLabelConfig: Me } = X.getState();
        X.setState({
          ariaLiveMessage: Me["node.a11yDescription.ariaLiveMessage"]({
            direction: Ie.key.replace("Arrow", "").toLowerCase(),
            x: ~~O.positionAbsolute.x,
            y: ~~O.positionAbsolute.y
          })
        }), Q({
          direction: Vx[Ie.key],
          factor: Ie.shiftKey ? 4 : 1
        });
      }
    }
  }, Re = () => {
    var mt;
    if (_ || !((mt = J.current) != null && mt.matches(":focus-visible")))
      return;
    const { transform: Ie, width: Me, height: dt, autoPanOnNodeFocus: ut, setCenter: Je } = X.getState();
    if (!ut)
      return;
    cT(/* @__PURE__ */ new Map([[e, N]]), { x: 0, y: 0, width: Me, height: dt }, Ie, !0).length > 0 || Je(N.position.x + oe.width / 2, N.position.y + oe.height / 2, {
      zoom: Ie[2]
    });
  };
  return h.jsx("div", { className: Zr([
    "react-flow__node",
    `react-flow__node-${z}`,
    {
      // this is overwritable by passing `nopan` as a class name
      [b]: G
    },
    N.className,
    {
      selected: N.selected,
      selectable: Y,
      parent: P,
      draggable: G,
      dragging: le
    }
  ]), ref: J, style: {
    zIndex: O.z,
    transform: `translate(${O.positionAbsolute.x}px,${O.positionAbsolute.y}px)`,
    pointerEvents: ce ? "all" : "none",
    visibility: me ? "visible" : "hidden",
    ...N.style,
    ...fe
  }, "data-id": e, "data-testid": `rf__node-${e}`, onMouseEnter: K, onMouseMove: re, onMouseLeave: de, onContextMenu: V, onClick: ge, onDoubleClick: ae, onKeyDown: F ? we : void 0, tabIndex: F ? 0 : void 0, onFocus: F ? Re : void 0, role: N.ariaRole ?? (F ? "group" : void 0), "aria-roledescription": "node", "aria-describedby": _ ? void 0 : `${TB}-${E}`, "aria-label": N.ariaLabel, ...N.domAttributes, children: h.jsx(cpe, { value: e, children: h.jsx(q, { id: e, data: N.data, type: z, positionAbsoluteX: O.positionAbsolute.x, positionAbsoluteY: O.positionAbsolute.y, selected: N.selected ?? !1, selectable: Y, draggable: G, deletable: N.deletable ?? !0, isConnectable: W, sourcePosition: N.sourcePosition, targetPosition: N.targetPosition, dragging: le, dragHandle: N.dragHandle, zIndex: O.z, parentId: N.parentId, ...oe }) }) });
}
var jpe = B.memo(Ape);
const Npe = (e) => ({
  nodesDraggable: e.nodesDraggable,
  nodesConnectable: e.nodesConnectable,
  nodesFocusable: e.nodesFocusable,
  elementsSelectable: e.elementsSelectable,
  onError: e.onError
});
function qB(e) {
  const { nodesDraggable: t, nodesConnectable: n, nodesFocusable: r, elementsSelectable: i, onError: a } = un(Npe, fr), o = Cpe(e.onlyRenderVisibleElements), u = kpe();
  return h.jsx("div", { className: "react-flow__nodes", style: kb, children: o.map((c) => (
    /*
     * The split of responsibilities between NodeRenderer and
     * NodeComponentWrapper may appear weird. However, its designed to
     * minimize the cost of updates when individual nodes change.
     *
     * For example, when youre dragging a single node, that node gets
     * updated multiple times per second. If `NodeRenderer` were to update
     * every time, it would have to re-run the `nodes.map()` loop every
     * time. This gets pricey with hundreds of nodes, especially if every
     * loop cycle does more than just rendering a JSX element!
     *
     * As a result of this choice, we took the following implementation
     * decisions:
     * - NodeRenderer subscribes *only* to node IDs  and therefore
     *   rerender *only* when visible nodes are added or removed.
     * - NodeRenderer performs all operations the result of which can be
     *   shared between nodes (such as creating the `ResizeObserver`
     *   instance, or subscribing to `selector`). This means extra prop
     *   drilling into `NodeComponentWrapper`, but it means we need to run
     *   these operations only once  instead of once per node.
     * - Any operations that youd normally write inside `nodes.map` are
     *   moved into `NodeComponentWrapper`. This ensures they are
     *   memorized  so if `NodeRenderer` *has* to rerender, it only
     *   needs to regenerate the list of nodes, nothing else.
     */
    h.jsx(jpe, { id: c, nodeTypes: e.nodeTypes, nodeExtent: e.nodeExtent, onClick: e.onNodeClick, onMouseEnter: e.onNodeMouseEnter, onMouseMove: e.onNodeMouseMove, onMouseLeave: e.onNodeMouseLeave, onContextMenu: e.onNodeContextMenu, onDoubleClick: e.onNodeDoubleClick, noDragClassName: e.noDragClassName, noPanClassName: e.noPanClassName, rfId: e.rfId, disableKeyboardA11y: e.disableKeyboardA11y, resizeObserver: u, nodesDraggable: t, nodesConnectable: n, nodesFocusable: r, elementsSelectable: i, nodeClickDistance: e.nodeClickDistance, onError: a }, c)
  )) });
}
qB.displayName = "NodeRenderer";
const Rpe = B.memo(qB);
function Mpe(e) {
  return un(B.useCallback((n) => {
    if (!e)
      return n.edges.map((i) => i.id);
    const r = [];
    if (n.width && n.height)
      for (const i of n.edges) {
        const a = n.nodeLookup.get(i.source), o = n.nodeLookup.get(i.target);
        a && o && Lde({
          sourceNode: a,
          targetNode: o,
          width: n.width,
          height: n.height,
          transform: n.transform
        }) && r.push(i.id);
      }
    return r;
  }, [e]), fr);
}
const Ope = ({ color: e = "none", strokeWidth: t = 1 }) => {
  const n = {
    strokeWidth: t,
    ...e && { stroke: e }
  };
  return h.jsx("polyline", { className: "arrow", style: n, strokeLinecap: "round", fill: "none", strokeLinejoin: "round", points: "-5,-4 0,0 -5,4" });
}, Dpe = ({ color: e = "none", strokeWidth: t = 1 }) => {
  const n = {
    strokeWidth: t,
    ...e && { stroke: e, fill: e }
  };
  return h.jsx("polyline", { className: "arrowclosed", style: n, strokeLinecap: "round", strokeLinejoin: "round", points: "-5,-4 0,0 -5,4 -5,-4" });
}, y8 = {
  [oy.Arrow]: Ope,
  [oy.ArrowClosed]: Dpe
};
function zpe(e) {
  const t = hr();
  return B.useMemo(() => {
    var i, a;
    return Object.prototype.hasOwnProperty.call(y8, e) ? y8[e] : ((a = (i = t.getState()).onError) == null || a.call(i, "009", Gl.error009(e)), null);
  }, [e]);
}
const Ppe = ({ id: e, type: t, color: n, width: r = 12.5, height: i = 12.5, markerUnits: a = "strokeWidth", strokeWidth: o, orient: u = "auto-start-reverse" }) => {
  const c = zpe(t);
  return c ? h.jsx("marker", { className: "react-flow__arrowhead", id: e, markerWidth: `${r}`, markerHeight: `${i}`, viewBox: "-10 -10 20 20", markerUnits: a, orient: u, refX: "0", refY: "0", children: h.jsx(c, { color: n, strokeWidth: o }) }) : null;
}, $B = ({ defaultColor: e, rfId: t }) => {
  const n = un((a) => a.edges), r = un((a) => a.defaultEdgeOptions), i = B.useMemo(() => Gde(n, {
    id: t,
    defaultColor: e,
    defaultMarkerStart: r == null ? void 0 : r.markerStart,
    defaultMarkerEnd: r == null ? void 0 : r.markerEnd
  }), [n, r, t, e]);
  return i.length ? h.jsx("svg", { className: "react-flow__marker", "aria-hidden": "true", children: h.jsx("defs", { children: i.map((a) => h.jsx(Ppe, { id: a.id, type: a.type, color: a.color, width: a.width, height: a.height, markerUnits: a.markerUnits, strokeWidth: a.strokeWidth, orient: a.orient }, a.id)) }) }) : null;
};
$B.displayName = "MarkerDefinitions";
var Ipe = B.memo($B);
function FB({ x: e, y: t, label: n, labelStyle: r, labelShowBg: i = !0, labelBgStyle: a, labelBgPadding: o = [2, 4], labelBgBorderRadius: u = 2, children: c, className: f, ...p }) {
  const [g, x] = B.useState({ x: 1, y: 0, width: 0, height: 0 }), b = Zr(["react-flow__edge-textwrapper", f]), _ = B.useRef(null);
  return B.useEffect(() => {
    if (_.current) {
      const E = _.current.getBBox();
      x({
        x: E.x,
        y: E.y,
        width: E.width,
        height: E.height
      });
    }
  }, [n]), n ? h.jsxs("g", { transform: `translate(${e - g.width / 2} ${t - g.height / 2})`, className: b, visibility: g.width ? "visible" : "hidden", ...p, children: [i && h.jsx("rect", { width: g.width + 2 * o[0], x: -o[0], y: -o[1], height: g.height + 2 * o[1], className: "react-flow__edge-textbg", style: a, rx: u, ry: u }), h.jsx("text", { className: "react-flow__edge-text", y: g.height / 2, dy: "0.3em", ref: _, style: r, children: n }), c] }) : null;
}
FB.displayName = "EdgeText";
const Lpe = B.memo(FB);
function Tb({ path: e, labelX: t, labelY: n, label: r, labelStyle: i, labelShowBg: a, labelBgStyle: o, labelBgPadding: u, labelBgBorderRadius: c, interactionWidth: f = 20, ...p }) {
  return h.jsxs(h.Fragment, { children: [h.jsx("path", { ...p, d: e, fill: "none", className: Zr(["react-flow__edge-path", p.className]) }), f ? h.jsx("path", { d: e, fill: "none", strokeOpacity: 0, strokeWidth: f, className: "react-flow__edge-interaction" }) : null, r && Fo(t) && Fo(n) ? h.jsx(Lpe, { x: t, y: n, label: r, labelStyle: i, labelShowBg: a, labelBgStyle: o, labelBgPadding: u, labelBgBorderRadius: c }) : null] });
}
function v8({ pos: e, x1: t, y1: n, x2: r, y2: i }) {
  return e === vt.Left || e === vt.Right ? [0.5 * (t + r), n] : [t, 0.5 * (n + i)];
}
function UB({ sourceX: e, sourceY: t, sourcePosition: n = vt.Bottom, targetX: r, targetY: i, targetPosition: a = vt.Top }) {
  const [o, u] = v8({
    pos: n,
    x1: e,
    y1: t,
    x2: r,
    y2: i
  }), [c, f] = v8({
    pos: a,
    x1: r,
    y1: i,
    x2: e,
    y2: t
  }), [p, g, x, b] = cB({
    sourceX: e,
    sourceY: t,
    targetX: r,
    targetY: i,
    sourceControlX: o,
    sourceControlY: u,
    targetControlX: c,
    targetControlY: f
  });
  return [
    `M${e},${t} C${o},${u} ${c},${f} ${r},${i}`,
    p,
    g,
    x,
    b
  ];
}
function VB(e) {
  return B.memo(({ id: t, sourceX: n, sourceY: r, targetX: i, targetY: a, sourcePosition: o, targetPosition: u, label: c, labelStyle: f, labelShowBg: p, labelBgStyle: g, labelBgPadding: x, labelBgBorderRadius: b, style: _, markerEnd: E, markerStart: k, interactionWidth: T }) => {
    const [R, N, O] = UB({
      sourceX: n,
      sourceY: r,
      sourcePosition: o,
      targetX: i,
      targetY: a,
      targetPosition: u
    }), P = e.isInternal ? void 0 : t;
    return h.jsx(Tb, { id: P, path: R, labelX: N, labelY: O, label: c, labelStyle: f, labelShowBg: p, labelBgStyle: g, labelBgPadding: x, labelBgBorderRadius: b, style: _, markerEnd: E, markerStart: k, interactionWidth: T });
  });
}
const Bpe = VB({ isInternal: !1 }), HB = VB({ isInternal: !0 });
Bpe.displayName = "SimpleBezierEdge";
HB.displayName = "SimpleBezierEdgeInternal";
function GB(e) {
  return B.memo(({ id: t, sourceX: n, sourceY: r, targetX: i, targetY: a, label: o, labelStyle: u, labelShowBg: c, labelBgStyle: f, labelBgPadding: p, labelBgBorderRadius: g, style: x, sourcePosition: b = vt.Bottom, targetPosition: _ = vt.Top, markerEnd: E, markerStart: k, pathOptions: T, interactionWidth: R }) => {
    const [N, O, P] = E5({
      sourceX: n,
      sourceY: r,
      sourcePosition: b,
      targetX: i,
      targetY: a,
      targetPosition: _,
      borderRadius: T == null ? void 0 : T.borderRadius,
      offset: T == null ? void 0 : T.offset,
      stepPosition: T == null ? void 0 : T.stepPosition
    }), z = e.isInternal ? void 0 : t;
    return h.jsx(Tb, { id: z, path: N, labelX: O, labelY: P, label: o, labelStyle: u, labelShowBg: c, labelBgStyle: f, labelBgPadding: p, labelBgBorderRadius: g, style: x, markerEnd: E, markerStart: k, interactionWidth: R });
  });
}
const KB = GB({ isInternal: !1 }), YB = GB({ isInternal: !0 });
KB.displayName = "SmoothStepEdge";
YB.displayName = "SmoothStepEdgeInternal";
function WB(e) {
  return B.memo(({ id: t, ...n }) => {
    var i;
    const r = e.isInternal ? void 0 : t;
    return h.jsx(KB, { ...n, id: r, pathOptions: B.useMemo(() => {
      var a;
      return { borderRadius: 0, offset: (a = n.pathOptions) == null ? void 0 : a.offset };
    }, [(i = n.pathOptions) == null ? void 0 : i.offset]) });
  });
}
const qpe = WB({ isInternal: !1 }), ZB = WB({ isInternal: !0 });
qpe.displayName = "StepEdge";
ZB.displayName = "StepEdgeInternal";
function XB(e) {
  return B.memo(({ id: t, sourceX: n, sourceY: r, targetX: i, targetY: a, label: o, labelStyle: u, labelShowBg: c, labelBgStyle: f, labelBgPadding: p, labelBgBorderRadius: g, style: x, markerEnd: b, markerStart: _, interactionWidth: E }) => {
    const [k, T, R] = hB({ sourceX: n, sourceY: r, targetX: i, targetY: a }), N = e.isInternal ? void 0 : t;
    return h.jsx(Tb, { id: N, path: k, labelX: T, labelY: R, label: o, labelStyle: u, labelShowBg: c, labelBgStyle: f, labelBgPadding: p, labelBgBorderRadius: g, style: x, markerEnd: b, markerStart: _, interactionWidth: E });
  });
}
const $pe = XB({ isInternal: !1 }), QB = XB({ isInternal: !0 });
$pe.displayName = "StraightEdge";
QB.displayName = "StraightEdgeInternal";
function JB(e) {
  return B.memo(({ id: t, sourceX: n, sourceY: r, targetX: i, targetY: a, sourcePosition: o = vt.Bottom, targetPosition: u = vt.Top, label: c, labelStyle: f, labelShowBg: p, labelBgStyle: g, labelBgPadding: x, labelBgBorderRadius: b, style: _, markerEnd: E, markerStart: k, pathOptions: T, interactionWidth: R }) => {
    const [N, O, P] = fB({
      sourceX: n,
      sourceY: r,
      sourcePosition: o,
      targetX: i,
      targetY: a,
      targetPosition: u,
      curvature: T == null ? void 0 : T.curvature
    }), z = e.isInternal ? void 0 : t;
    return h.jsx(Tb, { id: z, path: N, labelX: O, labelY: P, label: c, labelStyle: f, labelShowBg: p, labelBgStyle: g, labelBgPadding: x, labelBgBorderRadius: b, style: _, markerEnd: E, markerStart: k, interactionWidth: R });
  });
}
const Fpe = JB({ isInternal: !1 }), eq = JB({ isInternal: !0 });
Fpe.displayName = "BezierEdge";
eq.displayName = "BezierEdgeInternal";
const x8 = {
  default: eq,
  straight: QB,
  step: ZB,
  smoothstep: YB,
  simplebezier: HB
}, b8 = {
  sourceX: null,
  sourceY: null,
  targetX: null,
  targetY: null,
  sourcePosition: null,
  targetPosition: null
}, Upe = (e, t, n) => n === vt.Left ? e - t : n === vt.Right ? e + t : e, Vpe = (e, t, n) => n === vt.Top ? e - t : n === vt.Bottom ? e + t : e, w8 = "react-flow__edgeupdater";
function _8({ position: e, centerX: t, centerY: n, radius: r = 10, onMouseDown: i, onMouseEnter: a, onMouseOut: o, type: u }) {
  return h.jsx("circle", { onMouseDown: i, onMouseEnter: a, onMouseOut: o, className: Zr([w8, `${w8}-${u}`]), cx: Upe(t, r, e), cy: Vpe(n, r, e), r, stroke: "transparent", fill: "transparent" });
}
function Hpe({ isReconnectable: e, reconnectRadius: t, edge: n, sourceX: r, sourceY: i, targetX: a, targetY: o, sourcePosition: u, targetPosition: c, onReconnect: f, onReconnectStart: p, onReconnectEnd: g, setReconnecting: x, setUpdateHover: b }) {
  const _ = hr(), E = (O, P) => {
    if (O.button !== 0)
      return;
    const { autoPanOnConnect: z, domNode: q, isValidConnection: G, connectionMode: Y, connectionRadius: W, lib: F, onConnectStart: X, onConnectEnd: me, cancelConnection: J, nodeLookup: le, rfId: Q, panBy: oe, updateConnection: fe } = _.getState(), ce = P.type === "target", K = (V, ae) => {
      x(!1), g == null || g(V, n, P.type, ae);
    }, re = (V) => f == null ? void 0 : f(n, V), de = (V, ae) => {
      x(!0), p == null || p(O, n, P.type), X == null || X(V, ae);
    };
    A5.onPointerDown(O.nativeEvent, {
      autoPanOnConnect: z,
      connectionMode: Y,
      connectionRadius: W,
      domNode: q,
      handleId: P.id,
      nodeId: P.nodeId,
      nodeLookup: le,
      isTarget: ce,
      edgeUpdaterType: P.type,
      lib: F,
      flowId: Q,
      cancelConnection: J,
      panBy: oe,
      isValidConnection: G,
      onConnect: re,
      onConnectStart: de,
      onConnectEnd: me,
      onReconnectEnd: K,
      updateConnection: fe,
      getTransform: () => _.getState().transform,
      getFromHandle: () => _.getState().connection.fromHandle,
      dragThreshold: _.getState().connectionDragThreshold,
      handleDomNode: O.currentTarget
    });
  }, k = (O) => E(O, { nodeId: n.target, id: n.targetHandle ?? null, type: "target" }), T = (O) => E(O, { nodeId: n.source, id: n.sourceHandle ?? null, type: "source" }), R = () => b(!0), N = () => b(!1);
  return h.jsxs(h.Fragment, { children: [(e === !0 || e === "source") && h.jsx(_8, { position: u, centerX: r, centerY: i, radius: t, onMouseDown: k, onMouseEnter: R, onMouseOut: N, type: "source" }), (e === !0 || e === "target") && h.jsx(_8, { position: c, centerX: a, centerY: o, radius: t, onMouseDown: T, onMouseEnter: R, onMouseOut: N, type: "target" })] });
}
function Gpe({ id: e, edgesFocusable: t, edgesReconnectable: n, elementsSelectable: r, onClick: i, onDoubleClick: a, onContextMenu: o, onMouseEnter: u, onMouseMove: c, onMouseLeave: f, reconnectRadius: p, onReconnect: g, onReconnectStart: x, onReconnectEnd: b, rfId: _, edgeTypes: E, noPanClassName: k, onError: T, disableKeyboardA11y: R }) {
  let N = un((Je) => Je.edgeLookup.get(e));
  const O = un((Je) => Je.defaultEdgeOptions);
  N = O ? { ...O, ...N } : N;
  let P = N.type || "default", z = (E == null ? void 0 : E[P]) || x8[P];
  z === void 0 && (T == null || T("011", Gl.error011(P)), P = "default", z = (E == null ? void 0 : E.default) || x8.default);
  const q = !!(N.focusable || t && typeof N.focusable > "u"), G = typeof g < "u" && (N.reconnectable || n && typeof N.reconnectable > "u"), Y = !!(N.selectable || r && typeof N.selectable > "u"), W = B.useRef(null), [F, X] = B.useState(!1), [me, J] = B.useState(!1), le = hr(), { zIndex: Q, sourceX: oe, sourceY: fe, targetX: ce, targetY: K, sourcePosition: re, targetPosition: de } = un(B.useCallback((Je) => {
    const ct = Je.nodeLookup.get(N.source), mt = Je.nodeLookup.get(N.target);
    if (!ct || !mt)
      return {
        zIndex: N.zIndex,
        ...b8
      };
    const ft = Hde({
      id: e,
      sourceNode: ct,
      targetNode: mt,
      sourceHandle: N.sourceHandle || null,
      targetHandle: N.targetHandle || null,
      connectionMode: Je.connectionMode,
      onError: T
    });
    return {
      zIndex: Ide({
        selected: N.selected,
        zIndex: N.zIndex,
        sourceNode: ct,
        targetNode: mt,
        elevateOnSelect: Je.elevateEdgesOnSelect,
        zIndexMode: Je.zIndexMode
      }),
      ...ft || b8
    };
  }, [N.source, N.target, N.sourceHandle, N.targetHandle, N.selected, N.zIndex]), fr), V = B.useMemo(() => N.markerStart ? `url('#${k5(N.markerStart, _)}')` : void 0, [N.markerStart, _]), ae = B.useMemo(() => N.markerEnd ? `url('#${k5(N.markerEnd, _)}')` : void 0, [N.markerEnd, _]);
  if (N.hidden || oe === null || fe === null || ce === null || K === null)
    return null;
  const ge = (Je) => {
    var At;
    const { addSelectedEdges: ct, unselectNodesAndEdges: mt, multiSelectionActive: ft } = le.getState();
    Y && (le.setState({ nodesSelectionActive: !1 }), N.selected && ft ? (mt({ nodes: [], edges: [N] }), (At = W.current) == null || At.blur()) : ct([e])), i && i(Je, N);
  }, we = a ? (Je) => {
    a(Je, { ...N });
  } : void 0, Re = o ? (Je) => {
    o(Je, { ...N });
  } : void 0, Ie = u ? (Je) => {
    u(Je, { ...N });
  } : void 0, Me = c ? (Je) => {
    c(Je, { ...N });
  } : void 0, dt = f ? (Je) => {
    f(Je, { ...N });
  } : void 0, ut = (Je) => {
    var ct;
    if (!R && ZL.includes(Je.key) && Y) {
      const { unselectNodesAndEdges: mt, addSelectedEdges: ft } = le.getState();
      Je.key === "Escape" ? ((ct = W.current) == null || ct.blur(), mt({ edges: [N] })) : ft([e]);
    }
  };
  return h.jsx("svg", { style: { zIndex: Q }, children: h.jsxs("g", { className: Zr([
    "react-flow__edge",
    `react-flow__edge-${P}`,
    N.className,
    k,
    {
      selected: N.selected,
      animated: N.animated,
      inactive: !Y && !i,
      updating: F,
      selectable: Y
    }
  ]), onClick: ge, onDoubleClick: we, onContextMenu: Re, onMouseEnter: Ie, onMouseMove: Me, onMouseLeave: dt, onKeyDown: q ? ut : void 0, tabIndex: q ? 0 : void 0, role: N.ariaRole ?? (q ? "group" : "img"), "aria-roledescription": "edge", "data-id": e, "data-testid": `rf__edge-${e}`, "aria-label": N.ariaLabel === null ? void 0 : N.ariaLabel || `Edge from ${N.source} to ${N.target}`, "aria-describedby": q ? `${AB}-${_}` : void 0, ref: W, ...N.domAttributes, children: [!me && h.jsx(z, { id: e, source: N.source, target: N.target, type: N.type, selected: N.selected, animated: N.animated, selectable: Y, deletable: N.deletable ?? !0, label: N.label, labelStyle: N.labelStyle, labelShowBg: N.labelShowBg, labelBgStyle: N.labelBgStyle, labelBgPadding: N.labelBgPadding, labelBgBorderRadius: N.labelBgBorderRadius, sourceX: oe, sourceY: fe, targetX: ce, targetY: K, sourcePosition: re, targetPosition: de, data: N.data, style: N.style, sourceHandleId: N.sourceHandle, targetHandleId: N.targetHandle, markerStart: V, markerEnd: ae, pathOptions: "pathOptions" in N ? N.pathOptions : void 0, interactionWidth: N.interactionWidth }), G && h.jsx(Hpe, { edge: N, isReconnectable: G, reconnectRadius: p, onReconnect: g, onReconnectStart: x, onReconnectEnd: b, sourceX: oe, sourceY: fe, targetX: ce, targetY: K, sourcePosition: re, targetPosition: de, setUpdateHover: X, setReconnecting: J })] }) });
}
var Kpe = B.memo(Gpe);
const Ype = (e) => ({
  edgesFocusable: e.edgesFocusable,
  edgesReconnectable: e.edgesReconnectable,
  elementsSelectable: e.elementsSelectable,
  connectionMode: e.connectionMode,
  onError: e.onError
});
function tq({ defaultMarkerColor: e, onlyRenderVisibleElements: t, rfId: n, edgeTypes: r, noPanClassName: i, onReconnect: a, onEdgeContextMenu: o, onEdgeMouseEnter: u, onEdgeMouseMove: c, onEdgeMouseLeave: f, onEdgeClick: p, reconnectRadius: g, onEdgeDoubleClick: x, onReconnectStart: b, onReconnectEnd: _, disableKeyboardA11y: E }) {
  const { edgesFocusable: k, edgesReconnectable: T, elementsSelectable: R, onError: N } = un(Ype, fr), O = Mpe(t);
  return h.jsxs("div", { className: "react-flow__edges", children: [h.jsx(Ipe, { defaultColor: e, rfId: n }), O.map((P) => h.jsx(Kpe, { id: P, edgesFocusable: k, edgesReconnectable: T, elementsSelectable: R, noPanClassName: i, onReconnect: a, onContextMenu: o, onMouseEnter: u, onMouseMove: c, onMouseLeave: f, onClick: p, reconnectRadius: g, onDoubleClick: x, onReconnectStart: b, onReconnectEnd: _, rfId: n, onError: N, edgeTypes: r, disableKeyboardA11y: E }, P))] });
}
tq.displayName = "EdgeRenderer";
const Wpe = B.memo(tq), Zpe = (e) => `translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;
function Xpe({ children: e }) {
  const t = un(Zpe);
  return h.jsx("div", { className: "react-flow__viewport xyflow__viewport react-flow__container", style: { transform: t }, children: e });
}
function Qpe(e) {
  const t = vT(), n = B.useRef(!1);
  B.useEffect(() => {
    !n.current && t.viewportInitialized && e && (setTimeout(() => e(t), 1), n.current = !0);
  }, [e, t.viewportInitialized]);
}
const Jpe = (e) => {
  var t;
  return (t = e.panZoom) == null ? void 0 : t.syncViewport;
};
function eme(e) {
  const t = un(Jpe), n = hr();
  return B.useEffect(() => {
    e && (t == null || t(e), n.setState({ transform: [e.x, e.y, e.zoom] }));
  }, [e, t]), null;
}
function tme(e) {
  return e.connection.inProgress ? { ...e.connection, to: Ny(e.connection.to, e.transform) } : { ...e.connection };
}
function nme(e) {
  return tme;
}
function rme(e) {
  const t = nme();
  return un(t, fr);
}
const ime = (e) => ({
  nodesConnectable: e.nodesConnectable,
  isValid: e.connection.isValid,
  inProgress: e.connection.inProgress,
  width: e.width,
  height: e.height
});
function sme({ containerStyle: e, style: t, type: n, component: r }) {
  const { nodesConnectable: i, width: a, height: o, isValid: u, inProgress: c } = un(ime, fr);
  return !(a && i && c) ? null : h.jsx("svg", { style: e, width: a, height: o, className: "react-flow__connectionline react-flow__container", children: h.jsx("g", { className: Zr(["react-flow__connection", JL(u)]), children: h.jsx(nq, { style: t, type: n, CustomComponent: r, isValid: u }) }) });
}
const nq = ({ style: e, type: t = Jc.Bezier, CustomComponent: n, isValid: r }) => {
  const { inProgress: i, from: a, fromNode: o, fromHandle: u, fromPosition: c, to: f, toNode: p, toHandle: g, toPosition: x, pointer: b } = rme();
  if (!i)
    return;
  if (n)
    return h.jsx(n, { connectionLineType: t, connectionLineStyle: e, fromNode: o, fromHandle: u, fromX: a.x, fromY: a.y, toX: f.x, toY: f.y, fromPosition: c, toPosition: x, connectionStatus: JL(r), toNode: p, toHandle: g, pointer: b });
  let _ = "";
  const E = {
    sourceX: a.x,
    sourceY: a.y,
    sourcePosition: c,
    targetX: f.x,
    targetY: f.y,
    targetPosition: x
  };
  switch (t) {
    case Jc.Bezier:
      [_] = fB(E);
      break;
    case Jc.SimpleBezier:
      [_] = UB(E);
      break;
    case Jc.Step:
      [_] = E5({
        ...E,
        borderRadius: 0
      });
      break;
    case Jc.SmoothStep:
      [_] = E5(E);
      break;
    default:
      [_] = hB(E);
  }
  return h.jsx("path", { d: _, fill: "none", className: "react-flow__connection-path", style: e });
};
nq.displayName = "ConnectionLine";
const ame = {};
function S8(e = ame) {
  B.useRef(e), hr(), B.useEffect(() => {
  }, [e]);
}
function ome() {
  hr(), B.useRef(!1), B.useEffect(() => {
  }, []);
}
function rq({ nodeTypes: e, edgeTypes: t, onInit: n, onNodeClick: r, onEdgeClick: i, onNodeDoubleClick: a, onEdgeDoubleClick: o, onNodeMouseEnter: u, onNodeMouseMove: c, onNodeMouseLeave: f, onNodeContextMenu: p, onSelectionContextMenu: g, onSelectionStart: x, onSelectionEnd: b, connectionLineType: _, connectionLineStyle: E, connectionLineComponent: k, connectionLineContainerStyle: T, selectionKeyCode: R, selectionOnDrag: N, selectionMode: O, multiSelectionKeyCode: P, panActivationKeyCode: z, zoomActivationKeyCode: q, deleteKeyCode: G, onlyRenderVisibleElements: Y, elementsSelectable: W, defaultViewport: F, translateExtent: X, minZoom: me, maxZoom: J, preventScrolling: le, defaultMarkerColor: Q, zoomOnScroll: oe, zoomOnPinch: fe, panOnScroll: ce, panOnScrollSpeed: K, panOnScrollMode: re, zoomOnDoubleClick: de, panOnDrag: V, onPaneClick: ae, onPaneMouseEnter: ge, onPaneMouseMove: we, onPaneMouseLeave: Re, onPaneScroll: Ie, onPaneContextMenu: Me, paneClickDistance: dt, nodeClickDistance: ut, onEdgeContextMenu: Je, onEdgeMouseEnter: ct, onEdgeMouseMove: mt, onEdgeMouseLeave: ft, reconnectRadius: At, onReconnect: xt, onReconnectStart: qn, onReconnectEnd: An, noDragClassName: jn, noWheelClassName: Yt, noPanClassName: Nn, disableKeyboardA11y: rn, nodeExtent: bn, rfId: $n, viewport: Le, onViewportChange: We }) {
  return S8(e), S8(t), ome(), Qpe(n), eme(Le), h.jsx(_pe, { onPaneClick: ae, onPaneMouseEnter: ge, onPaneMouseMove: we, onPaneMouseLeave: Re, onPaneContextMenu: Me, onPaneScroll: Ie, paneClickDistance: dt, deleteKeyCode: G, selectionKeyCode: R, selectionOnDrag: N, selectionMode: O, onSelectionStart: x, onSelectionEnd: b, multiSelectionKeyCode: P, panActivationKeyCode: z, zoomActivationKeyCode: q, elementsSelectable: W, zoomOnScroll: oe, zoomOnPinch: fe, zoomOnDoubleClick: de, panOnScroll: ce, panOnScrollSpeed: K, panOnScrollMode: re, panOnDrag: V, defaultViewport: F, translateExtent: X, minZoom: me, maxZoom: J, onSelectionContextMenu: g, preventScrolling: le, noDragClassName: jn, noWheelClassName: Yt, noPanClassName: Nn, disableKeyboardA11y: rn, onViewportChange: We, isControlledViewport: !!Le, children: h.jsxs(Xpe, { children: [h.jsx(Wpe, { edgeTypes: t, onEdgeClick: i, onEdgeDoubleClick: o, onReconnect: xt, onReconnectStart: qn, onReconnectEnd: An, onlyRenderVisibleElements: Y, onEdgeContextMenu: Je, onEdgeMouseEnter: ct, onEdgeMouseMove: mt, onEdgeMouseLeave: ft, reconnectRadius: At, defaultMarkerColor: Q, noPanClassName: Nn, disableKeyboardA11y: rn, rfId: $n }), h.jsx(sme, { style: E, type: _, component: k, containerStyle: T }), h.jsx("div", { className: "react-flow__edgelabel-renderer" }), h.jsx(Rpe, { nodeTypes: e, onNodeClick: r, onNodeDoubleClick: a, onNodeMouseEnter: u, onNodeMouseMove: c, onNodeMouseLeave: f, onNodeContextMenu: p, nodeClickDistance: ut, onlyRenderVisibleElements: Y, noPanClassName: Nn, noDragClassName: jn, disableKeyboardA11y: rn, nodeExtent: bn, rfId: $n }), h.jsx("div", { className: "react-flow__viewport-portal" })] }) });
}
rq.displayName = "GraphView";
const lme = B.memo(rq), C8 = ({ nodes: e, edges: t, defaultNodes: n, defaultEdges: r, width: i, height: a, fitView: o, fitViewOptions: u, minZoom: c = 0.5, maxZoom: f = 2, nodeOrigin: p, nodeExtent: g, zIndexMode: x = "basic" } = {}) => {
  const b = /* @__PURE__ */ new Map(), _ = /* @__PURE__ */ new Map(), E = /* @__PURE__ */ new Map(), k = /* @__PURE__ */ new Map(), T = r ?? t ?? [], R = n ?? e ?? [], N = p ?? [0, 0], O = g ?? sy;
  gB(E, k, T);
  const P = T5(R, b, _, {
    nodeOrigin: N,
    nodeExtent: O,
    zIndexMode: x
  });
  let z = [0, 0, 1];
  if (o && i && a) {
    const q = Ay(b, {
      filter: (F) => !!((F.width || F.initialWidth) && (F.height || F.initialHeight))
    }), { x: G, y: Y, zoom: W } = fT(q, i, a, c, f, (u == null ? void 0 : u.padding) ?? 0.1);
    z = [G, Y, W];
  }
  return {
    rfId: "1",
    width: i ?? 0,
    height: a ?? 0,
    transform: z,
    nodes: R,
    nodesInitialized: P,
    nodeLookup: b,
    parentLookup: _,
    edges: T,
    edgeLookup: k,
    connectionLookup: E,
    onNodesChange: null,
    onEdgesChange: null,
    hasDefaultNodes: n !== void 0,
    hasDefaultEdges: r !== void 0,
    panZoom: null,
    minZoom: c,
    maxZoom: f,
    translateExtent: sy,
    nodeExtent: O,
    nodesSelectionActive: !1,
    userSelectionActive: !1,
    userSelectionRect: null,
    connectionMode: fm.Strict,
    domNode: null,
    paneDragging: !1,
    noPanClassName: "nopan",
    nodeOrigin: N,
    nodeDragThreshold: 1,
    connectionDragThreshold: 1,
    snapGrid: [15, 15],
    snapToGrid: !1,
    nodesDraggable: !0,
    nodesConnectable: !0,
    nodesFocusable: !0,
    edgesFocusable: !0,
    edgesReconnectable: !0,
    elementsSelectable: !0,
    elevateNodesOnSelect: !0,
    elevateEdgesOnSelect: !0,
    selectNodesOnDrag: !0,
    multiSelectionActive: !1,
    fitViewQueued: o ?? !1,
    fitViewOptions: u,
    fitViewResolver: null,
    connection: { ...QL },
    connectionClickStartHandle: null,
    connectOnClick: !0,
    ariaLiveMessage: "",
    autoPanOnConnect: !0,
    autoPanOnNodeDrag: !0,
    autoPanOnNodeFocus: !0,
    autoPanSpeed: 15,
    connectionRadius: 20,
    onError: Rde,
    isValidConnection: void 0,
    onSelectionChangeHandlers: [],
    lib: "react",
    debug: !1,
    ariaLabelConfig: XL,
    zIndexMode: x,
    onNodesChangeMiddlewareMap: /* @__PURE__ */ new Map(),
    onEdgesChangeMiddlewareMap: /* @__PURE__ */ new Map()
  };
}, ume = ({ nodes: e, edges: t, defaultNodes: n, defaultEdges: r, width: i, height: a, fitView: o, fitViewOptions: u, minZoom: c, maxZoom: f, nodeOrigin: p, nodeExtent: g, zIndexMode: x }) => The((b, _) => {
  async function E() {
    const { nodeLookup: k, panZoom: T, fitViewOptions: R, fitViewResolver: N, width: O, height: P, minZoom: z, maxZoom: q } = _();
    T && (await jde({
      nodes: k,
      width: O,
      height: P,
      panZoom: T,
      minZoom: z,
      maxZoom: q
    }, R), N == null || N.resolve(!0), b({ fitViewResolver: null }));
  }
  return {
    ...C8({
      nodes: e,
      edges: t,
      width: i,
      height: a,
      fitView: o,
      fitViewOptions: u,
      minZoom: c,
      maxZoom: f,
      nodeOrigin: p,
      nodeExtent: g,
      defaultNodes: n,
      defaultEdges: r,
      zIndexMode: x
    }),
    setNodes: (k) => {
      const { nodeLookup: T, parentLookup: R, nodeOrigin: N, elevateNodesOnSelect: O, fitViewQueued: P, zIndexMode: z } = _(), q = T5(k, T, R, {
        nodeOrigin: N,
        nodeExtent: g,
        elevateNodesOnSelect: O,
        checkEquality: !0,
        zIndexMode: z
      });
      P && q ? (E(), b({ nodes: k, nodesInitialized: q, fitViewQueued: !1, fitViewOptions: void 0 })) : b({ nodes: k, nodesInitialized: q });
    },
    setEdges: (k) => {
      const { connectionLookup: T, edgeLookup: R } = _();
      gB(T, R, k), b({ edges: k });
    },
    setDefaultNodesAndEdges: (k, T) => {
      if (k) {
        const { setNodes: R } = _();
        R(k), b({ hasDefaultNodes: !0 });
      }
      if (T) {
        const { setEdges: R } = _();
        R(T), b({ hasDefaultEdges: !0 });
      }
    },
    /*
     * Every node gets registerd at a ResizeObserver. Whenever a node
     * changes its dimensions, this function is called to measure the
     * new dimensions and update the nodes.
     */
    updateNodeInternals: (k) => {
      const { triggerNodeChanges: T, nodeLookup: R, parentLookup: N, domNode: O, nodeOrigin: P, nodeExtent: z, debug: q, fitViewQueued: G, zIndexMode: Y } = _(), { changes: W, updatedInternals: F } = Jde(k, R, N, O, P, z, Y);
      F && (Wde(R, N, { nodeOrigin: P, nodeExtent: z, zIndexMode: Y }), G ? (E(), b({ fitViewQueued: !1, fitViewOptions: void 0 })) : b({}), (W == null ? void 0 : W.length) > 0 && (q && console.log("React Flow: trigger node changes", W), T == null || T(W)));
    },
    updateNodePositions: (k, T = !1) => {
      const R = [];
      let N = [];
      const { nodeLookup: O, triggerNodeChanges: P, connection: z, updateConnection: q, onNodesChangeMiddlewareMap: G } = _();
      for (const [Y, W] of k) {
        const F = O.get(Y), X = !!(F != null && F.expandParent && (F != null && F.parentId) && (W != null && W.position)), me = {
          id: Y,
          type: "position",
          position: X ? {
            x: Math.max(0, W.position.x),
            y: Math.max(0, W.position.y)
          } : W.position,
          dragging: T
        };
        if (F && z.inProgress && z.fromNode.id === F.id) {
          const J = rh(F, z.fromHandle, vt.Left, !0);
          q({ ...z, from: J });
        }
        X && F.parentId && R.push({
          id: Y,
          parentId: F.parentId,
          rect: {
            ...W.internals.positionAbsolute,
            width: W.measured.width ?? 0,
            height: W.measured.height ?? 0
          }
        }), N.push(me);
      }
      if (R.length > 0) {
        const { parentLookup: Y, nodeOrigin: W } = _(), F = yT(R, O, Y, W);
        N.push(...F);
      }
      for (const Y of G.values())
        N = Y(N);
      P(N);
    },
    triggerNodeChanges: (k) => {
      const { onNodesChange: T, setNodes: R, nodes: N, hasDefaultNodes: O, debug: P } = _();
      if (k != null && k.length) {
        if (O) {
          const z = RB(k, N);
          R(z);
        }
        P && console.log("React Flow: trigger node changes", k), T == null || T(k);
      }
    },
    triggerEdgeChanges: (k) => {
      const { onEdgesChange: T, setEdges: R, edges: N, hasDefaultEdges: O, debug: P } = _();
      if (k != null && k.length) {
        if (O) {
          const z = MB(k, N);
          R(z);
        }
        P && console.log("React Flow: trigger edge changes", k), T == null || T(k);
      }
    },
    addSelectedNodes: (k) => {
      const { multiSelectionActive: T, edgeLookup: R, nodeLookup: N, triggerNodeChanges: O, triggerEdgeChanges: P } = _();
      if (T) {
        const z = k.map((q) => Dd(q, !0));
        O(z);
        return;
      }
      O(Kp(N, /* @__PURE__ */ new Set([...k]), !0)), P(Kp(R));
    },
    addSelectedEdges: (k) => {
      const { multiSelectionActive: T, edgeLookup: R, nodeLookup: N, triggerNodeChanges: O, triggerEdgeChanges: P } = _();
      if (T) {
        const z = k.map((q) => Dd(q, !0));
        P(z);
        return;
      }
      P(Kp(R, /* @__PURE__ */ new Set([...k]))), O(Kp(N, /* @__PURE__ */ new Set(), !0));
    },
    unselectNodesAndEdges: ({ nodes: k, edges: T } = {}) => {
      const { edges: R, nodes: N, nodeLookup: O, triggerNodeChanges: P, triggerEdgeChanges: z } = _(), q = k || N, G = T || R, Y = q.map((F) => {
        const X = O.get(F.id);
        return X && (X.selected = !1), Dd(F.id, !1);
      }), W = G.map((F) => Dd(F.id, !1));
      P(Y), z(W);
    },
    setMinZoom: (k) => {
      const { panZoom: T, maxZoom: R } = _();
      T == null || T.setScaleExtent([k, R]), b({ minZoom: k });
    },
    setMaxZoom: (k) => {
      const { panZoom: T, minZoom: R } = _();
      T == null || T.setScaleExtent([R, k]), b({ maxZoom: k });
    },
    setTranslateExtent: (k) => {
      var T;
      (T = _().panZoom) == null || T.setTranslateExtent(k), b({ translateExtent: k });
    },
    resetSelectedElements: () => {
      const { edges: k, nodes: T, triggerNodeChanges: R, triggerEdgeChanges: N, elementsSelectable: O } = _();
      if (!O)
        return;
      const P = T.reduce((q, G) => G.selected ? [...q, Dd(G.id, !1)] : q, []), z = k.reduce((q, G) => G.selected ? [...q, Dd(G.id, !1)] : q, []);
      R(P), N(z);
    },
    setNodeExtent: (k) => {
      const { nodes: T, nodeLookup: R, parentLookup: N, nodeOrigin: O, elevateNodesOnSelect: P, nodeExtent: z, zIndexMode: q } = _();
      k[0][0] === z[0][0] && k[0][1] === z[0][1] && k[1][0] === z[1][0] && k[1][1] === z[1][1] || (T5(T, R, N, {
        nodeOrigin: O,
        nodeExtent: k,
        elevateNodesOnSelect: P,
        checkEquality: !1,
        zIndexMode: q
      }), b({ nodeExtent: k }));
    },
    panBy: (k) => {
      const { transform: T, width: R, height: N, panZoom: O, translateExtent: P } = _();
      return ehe({ delta: k, panZoom: O, transform: T, translateExtent: P, width: R, height: N });
    },
    setCenter: async (k, T, R) => {
      const { width: N, height: O, maxZoom: P, panZoom: z } = _();
      if (!z)
        return Promise.resolve(!1);
      const q = typeof (R == null ? void 0 : R.zoom) < "u" ? R.zoom : P;
      return await z.setViewport({
        x: N / 2 - k * q,
        y: O / 2 - T * q,
        zoom: q
      }, { duration: R == null ? void 0 : R.duration, ease: R == null ? void 0 : R.ease, interpolate: R == null ? void 0 : R.interpolate }), Promise.resolve(!0);
    },
    cancelConnection: () => {
      b({
        connection: { ...QL }
      });
    },
    updateConnection: (k) => {
      b({ connection: k });
    },
    reset: () => b({ ...C8() })
  };
}, Object.is);
function cme({ initialNodes: e, initialEdges: t, defaultNodes: n, defaultEdges: r, initialWidth: i, initialHeight: a, initialMinZoom: o, initialMaxZoom: u, initialFitViewOptions: c, fitView: f, nodeOrigin: p, nodeExtent: g, zIndexMode: x, children: b }) {
  const [_] = B.useState(() => ume({
    nodes: e,
    edges: t,
    defaultNodes: n,
    defaultEdges: r,
    width: i,
    height: a,
    fitView: f,
    minZoom: o,
    maxZoom: u,
    fitViewOptions: c,
    nodeOrigin: p,
    nodeExtent: g,
    zIndexMode: x
  }));
  return h.jsx(Ahe, { value: _, children: h.jsx(Xhe, { children: b }) });
}
function fme({ children: e, nodes: t, edges: n, defaultNodes: r, defaultEdges: i, width: a, height: o, fitView: u, fitViewOptions: c, minZoom: f, maxZoom: p, nodeOrigin: g, nodeExtent: x, zIndexMode: b }) {
  return B.useContext(Cb) ? h.jsx(h.Fragment, { children: e }) : h.jsx(cme, { initialNodes: t, initialEdges: n, defaultNodes: r, defaultEdges: i, initialWidth: a, initialHeight: o, fitView: u, initialFitViewOptions: c, initialMinZoom: f, initialMaxZoom: p, nodeOrigin: g, nodeExtent: x, zIndexMode: b, children: e });
}
const dme = {
  width: "100%",
  height: "100%",
  overflow: "hidden",
  position: "relative",
  zIndex: 0
};
function hme({ nodes: e, edges: t, defaultNodes: n, defaultEdges: r, className: i, nodeTypes: a, edgeTypes: o, onNodeClick: u, onEdgeClick: c, onInit: f, onMove: p, onMoveStart: g, onMoveEnd: x, onConnect: b, onConnectStart: _, onConnectEnd: E, onClickConnectStart: k, onClickConnectEnd: T, onNodeMouseEnter: R, onNodeMouseMove: N, onNodeMouseLeave: O, onNodeContextMenu: P, onNodeDoubleClick: z, onNodeDragStart: q, onNodeDrag: G, onNodeDragStop: Y, onNodesDelete: W, onEdgesDelete: F, onDelete: X, onSelectionChange: me, onSelectionDragStart: J, onSelectionDrag: le, onSelectionDragStop: Q, onSelectionContextMenu: oe, onSelectionStart: fe, onSelectionEnd: ce, onBeforeDelete: K, connectionMode: re, connectionLineType: de = Jc.Bezier, connectionLineStyle: V, connectionLineComponent: ae, connectionLineContainerStyle: ge, deleteKeyCode: we = "Backspace", selectionKeyCode: Re = "Shift", selectionOnDrag: Ie = !1, selectionMode: Me = ay.Full, panActivationKeyCode: dt = "Space", multiSelectionKeyCode: ut = uy() ? "Meta" : "Control", zoomActivationKeyCode: Je = uy() ? "Meta" : "Control", snapToGrid: ct, snapGrid: mt, onlyRenderVisibleElements: ft = !1, selectNodesOnDrag: At, nodesDraggable: xt, autoPanOnNodeFocus: qn, nodesConnectable: An, nodesFocusable: jn, nodeOrigin: Yt = jB, edgesFocusable: Nn, edgesReconnectable: rn, elementsSelectable: bn = !0, defaultViewport: $n = $he, minZoom: Le = 0.5, maxZoom: We = 2, translateExtent: at = sy, preventScrolling: Ct = !0, nodeExtent: Rt, defaultMarkerColor: In = "#b1b1b7", zoomOnScroll: Rn = !0, zoomOnPinch: bt = !0, panOnScroll: $t = !1, panOnScrollSpeed: Ln = 0.5, panOnScrollMode: nt = Wd.Free, zoomOnDoubleClick: Br = !0, panOnDrag: mr = !0, onPaneClick: Yo, onPaneMouseEnter: lt, onPaneMouseMove: ia, onPaneMouseLeave: Na, onPaneScroll: Qi, onPaneContextMenu: io, paneClickDistance: sa = 1, nodeClickDistance: mf = 0, children: Xl, onReconnect: _s, onReconnectStart: Mi, onReconnectEnd: Ql, onEdgeContextMenu: aa, onEdgeDoubleClick: wn, onEdgeMouseEnter: Fn, onEdgeMouseMove: Jl, onEdgeMouseLeave: Ra, reconnectRadius: so = 10, onNodesChange: ao, onEdgesChange: Ss, noDragClassName: Cn = "nodrag", noWheelClassName: er = "nowheel", noPanClassName: qr = "nopan", fitView: Cs, fitViewOptions: Gu, connectOnClick: Es, attributionPosition: eu, proOptions: bi, defaultEdgeOptions: Wo, elevateNodesOnSelect: ks = !0, elevateEdgesOnSelect: cn = !1, disableKeyboardA11y: di = !1, autoPanOnConnect: gr, autoPanOnNodeDrag: tr, autoPanSpeed: oa, connectionRadius: oo, isValidConnection: Oi, onError: Ji, style: Ts, id: Zo, nodeDragThreshold: lo, connectionDragThreshold: Ku, viewport: Ft, onViewportChange: Ma, width: wi, height: Cr, colorMode: As = "light", debug: Yu, onScroll: js, ariaLabelConfig: Oa, zIndexMode: sn = "basic", ...uo }, yr) {
  const _i = Zo || "1", Da = Hhe(As), co = B.useCallback((Si) => {
    Si.currentTarget.scrollTo({ top: 0, left: 0, behavior: "instant" }), js == null || js(Si);
  }, [js]);
  return h.jsx("div", { "data-testid": "rf__wrapper", ...uo, onScroll: co, style: { ...Ts, ...dme }, ref: yr, className: Zr(["react-flow", i, Da]), id: Zo, role: "application", children: h.jsxs(fme, { nodes: e, edges: t, width: wi, height: Cr, fitView: Cs, fitViewOptions: Gu, minZoom: Le, maxZoom: We, nodeOrigin: Yt, nodeExtent: Rt, zIndexMode: sn, children: [h.jsx(lme, { onInit: f, onNodeClick: u, onEdgeClick: c, onNodeMouseEnter: R, onNodeMouseMove: N, onNodeMouseLeave: O, onNodeContextMenu: P, onNodeDoubleClick: z, nodeTypes: a, edgeTypes: o, connectionLineType: de, connectionLineStyle: V, connectionLineComponent: ae, connectionLineContainerStyle: ge, selectionKeyCode: Re, selectionOnDrag: Ie, selectionMode: Me, deleteKeyCode: we, multiSelectionKeyCode: ut, panActivationKeyCode: dt, zoomActivationKeyCode: Je, onlyRenderVisibleElements: ft, defaultViewport: $n, translateExtent: at, minZoom: Le, maxZoom: We, preventScrolling: Ct, zoomOnScroll: Rn, zoomOnPinch: bt, zoomOnDoubleClick: Br, panOnScroll: $t, panOnScrollSpeed: Ln, panOnScrollMode: nt, panOnDrag: mr, onPaneClick: Yo, onPaneMouseEnter: lt, onPaneMouseMove: ia, onPaneMouseLeave: Na, onPaneScroll: Qi, onPaneContextMenu: io, paneClickDistance: sa, nodeClickDistance: mf, onSelectionContextMenu: oe, onSelectionStart: fe, onSelectionEnd: ce, onReconnect: _s, onReconnectStart: Mi, onReconnectEnd: Ql, onEdgeContextMenu: aa, onEdgeDoubleClick: wn, onEdgeMouseEnter: Fn, onEdgeMouseMove: Jl, onEdgeMouseLeave: Ra, reconnectRadius: so, defaultMarkerColor: In, noDragClassName: Cn, noWheelClassName: er, noPanClassName: qr, rfId: _i, disableKeyboardA11y: di, nodeExtent: Rt, viewport: Ft, onViewportChange: Ma }), h.jsx(Vhe, { nodes: e, edges: t, defaultNodes: n, defaultEdges: r, onConnect: b, onConnectStart: _, onConnectEnd: E, onClickConnectStart: k, onClickConnectEnd: T, nodesDraggable: xt, autoPanOnNodeFocus: qn, nodesConnectable: An, nodesFocusable: jn, edgesFocusable: Nn, edgesReconnectable: rn, elementsSelectable: bn, elevateNodesOnSelect: ks, elevateEdgesOnSelect: cn, minZoom: Le, maxZoom: We, nodeExtent: Rt, onNodesChange: ao, onEdgesChange: Ss, snapToGrid: ct, snapGrid: mt, connectionMode: re, translateExtent: at, connectOnClick: Es, defaultEdgeOptions: Wo, fitView: Cs, fitViewOptions: Gu, onNodesDelete: W, onEdgesDelete: F, onDelete: X, onNodeDragStart: q, onNodeDrag: G, onNodeDragStop: Y, onSelectionDrag: le, onSelectionDragStart: J, onSelectionDragStop: Q, onMove: p, onMoveStart: g, onMoveEnd: x, noPanClassName: qr, nodeOrigin: Yt, rfId: _i, autoPanOnConnect: gr, autoPanOnNodeDrag: tr, autoPanSpeed: oa, onError: Ji, connectionRadius: oo, isValidConnection: Oi, selectNodesOnDrag: At, nodeDragThreshold: lo, connectionDragThreshold: Ku, onBeforeDelete: K, debug: Yu, ariaLabelConfig: Oa, zIndexMode: sn }), h.jsx(qhe, { onSelectionChange: me }), Xl, h.jsx(zhe, { proOptions: bi, position: eu }), h.jsx(Dhe, { rfId: _i, disableKeyboardA11y: di })] }) });
}
var pme = OB(hme);
function mme(e) {
  const [t, n] = B.useState(e), r = B.useCallback((i) => n((a) => RB(i, a)), []);
  return [t, n, r];
}
function gme(e) {
  const [t, n] = B.useState(e), r = B.useCallback((i) => n((a) => MB(i, a)), []);
  return [t, n, r];
}
function yme({ dimensions: e, lineWidth: t, variant: n, className: r }) {
  return h.jsx("path", { strokeWidth: t, d: `M${e[0] / 2} 0 V${e[1]} M0 ${e[1] / 2} H${e[0]}`, className: Zr(["react-flow__background-pattern", n, r]) });
}
function vme({ radius: e, className: t }) {
  return h.jsx("circle", { cx: e, cy: e, r: e, className: Zr(["react-flow__background-pattern", "dots", t]) });
}
var nf;
(function(e) {
  e.Lines = "lines", e.Dots = "dots", e.Cross = "cross";
})(nf || (nf = {}));
const xme = {
  [nf.Dots]: 1,
  [nf.Lines]: 1,
  [nf.Cross]: 6
}, bme = (e) => ({ transform: e.transform, patternId: `pattern-${e.rfId}` });
function iq({
  id: e,
  variant: t = nf.Dots,
  // only used for dots and cross
  gap: n = 20,
  // only used for lines and cross
  size: r,
  lineWidth: i = 1,
  offset: a = 0,
  color: o,
  bgColor: u,
  style: c,
  className: f,
  patternClassName: p
}) {
  const g = B.useRef(null), { transform: x, patternId: b } = un(bme, fr), _ = r || xme[t], E = t === nf.Dots, k = t === nf.Cross, T = Array.isArray(n) ? n : [n, n], R = [T[0] * x[2] || 1, T[1] * x[2] || 1], N = _ * x[2], O = Array.isArray(a) ? a : [a, a], P = k ? [N, N] : R, z = [
    O[0] * x[2] || 1 + P[0] / 2,
    O[1] * x[2] || 1 + P[1] / 2
  ], q = `${b}${e || ""}`;
  return h.jsxs("svg", { className: Zr(["react-flow__background", f]), style: {
    ...c,
    ...kb,
    "--xy-background-color-props": u,
    "--xy-background-pattern-color-props": o
  }, ref: g, "data-testid": "rf__background", children: [h.jsx("pattern", { id: q, x: x[0] % R[0], y: x[1] % R[1], width: R[0], height: R[1], patternUnits: "userSpaceOnUse", patternTransform: `translate(-${z[0]},-${z[1]})`, children: E ? h.jsx(vme, { radius: N / 2, className: p }) : h.jsx(yme, { dimensions: P, lineWidth: i, variant: t, className: p }) }), h.jsx("rect", { x: "0", y: "0", width: "100%", height: "100%", fill: `url(#${q})` })] });
}
iq.displayName = "Background";
const wme = B.memo(iq);
function _me() {
  return h.jsx("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 32 32", children: h.jsx("path", { d: "M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z" }) });
}
function Sme() {
  return h.jsx("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 32 5", children: h.jsx("path", { d: "M0 0h32v4.2H0z" }) });
}
function Cme() {
  return h.jsx("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 32 30", children: h.jsx("path", { d: "M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z" }) });
}
function Eme() {
  return h.jsx("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 25 32", children: h.jsx("path", { d: "M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z" }) });
}
function kme() {
  return h.jsx("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 25 32", children: h.jsx("path", { d: "M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z" }) });
}
function V1({ children: e, className: t, ...n }) {
  return h.jsx("button", { type: "button", className: Zr(["react-flow__controls-button", t]), ...n, children: e });
}
const Tme = (e) => ({
  isInteractive: e.nodesDraggable || e.nodesConnectable || e.elementsSelectable,
  minZoomReached: e.transform[2] <= e.minZoom,
  maxZoomReached: e.transform[2] >= e.maxZoom,
  ariaLabelConfig: e.ariaLabelConfig
});
function sq({ style: e, showZoom: t = !0, showFitView: n = !0, showInteractive: r = !0, fitViewOptions: i, onZoomIn: a, onZoomOut: o, onFitView: u, onInteractiveChange: c, className: f, children: p, position: g = "bottom-left", orientation: x = "vertical", "aria-label": b }) {
  const _ = hr(), { isInteractive: E, minZoomReached: k, maxZoomReached: T, ariaLabelConfig: R } = un(Tme, fr), { zoomIn: N, zoomOut: O, fitView: P } = vT(), z = () => {
    N(), a == null || a();
  }, q = () => {
    O(), o == null || o();
  }, G = () => {
    P(i), u == null || u();
  }, Y = () => {
    _.setState({
      nodesDraggable: !E,
      nodesConnectable: !E,
      elementsSelectable: !E
    }), c == null || c(!E);
  }, W = x === "horizontal" ? "horizontal" : "vertical";
  return h.jsxs(Eb, { className: Zr(["react-flow__controls", W, f]), position: g, style: e, "data-testid": "rf__controls", "aria-label": b ?? R["controls.ariaLabel"], children: [t && h.jsxs(h.Fragment, { children: [h.jsx(V1, { onClick: z, className: "react-flow__controls-zoomin", title: R["controls.zoomIn.ariaLabel"], "aria-label": R["controls.zoomIn.ariaLabel"], disabled: T, children: h.jsx(_me, {}) }), h.jsx(V1, { onClick: q, className: "react-flow__controls-zoomout", title: R["controls.zoomOut.ariaLabel"], "aria-label": R["controls.zoomOut.ariaLabel"], disabled: k, children: h.jsx(Sme, {}) })] }), n && h.jsx(V1, { className: "react-flow__controls-fitview", onClick: G, title: R["controls.fitView.ariaLabel"], "aria-label": R["controls.fitView.ariaLabel"], children: h.jsx(Cme, {}) }), r && h.jsx(V1, { className: "react-flow__controls-interactive", onClick: Y, title: R["controls.interactive.ariaLabel"], "aria-label": R["controls.interactive.ariaLabel"], children: E ? h.jsx(kme, {}) : h.jsx(Eme, {}) }), p] });
}
sq.displayName = "Controls";
const Ame = B.memo(sq);
function jme({ id: e, x: t, y: n, width: r, height: i, style: a, color: o, strokeColor: u, strokeWidth: c, className: f, borderRadius: p, shapeRendering: g, selected: x, onClick: b }) {
  const { background: _, backgroundColor: E } = a || {}, k = o || _ || E;
  return h.jsx("rect", { className: Zr(["react-flow__minimap-node", { selected: x }, f]), x: t, y: n, rx: p, ry: p, width: r, height: i, style: {
    fill: k,
    stroke: u,
    strokeWidth: c
  }, shapeRendering: g, onClick: b ? (T) => b(T, e) : void 0 });
}
const Nme = B.memo(jme), Rme = (e) => e.nodes.map((t) => t.id), Uw = (e) => e instanceof Function ? e : () => e;
function Mme({
  nodeStrokeColor: e,
  nodeColor: t,
  nodeClassName: n = "",
  nodeBorderRadius: r = 5,
  nodeStrokeWidth: i,
  /*
   * We need to rename the prop to be `CapitalCase` so that JSX will render it as
   * a component properly.
   */
  nodeComponent: a = Nme,
  onClick: o
}) {
  const u = un(Rme, fr), c = Uw(t), f = Uw(e), p = Uw(n), g = typeof window > "u" || window.chrome ? "crispEdges" : "geometricPrecision";
  return h.jsx(h.Fragment, { children: u.map((x) => (
    /*
     * The split of responsibilities between MiniMapNodes and
     * NodeComponentWrapper may appear weird. However, its designed to
     * minimize the cost of updates when individual nodes change.
     *
     * For more details, see a similar commit in `NodeRenderer/index.tsx`.
     */
    h.jsx(Dme, { id: x, nodeColorFunc: c, nodeStrokeColorFunc: f, nodeClassNameFunc: p, nodeBorderRadius: r, nodeStrokeWidth: i, NodeComponent: a, onClick: o, shapeRendering: g }, x)
  )) });
}
function Ome({ id: e, nodeColorFunc: t, nodeStrokeColorFunc: n, nodeClassNameFunc: r, nodeBorderRadius: i, nodeStrokeWidth: a, shapeRendering: o, NodeComponent: u, onClick: c }) {
  const { node: f, x: p, y: g, width: x, height: b } = un((_) => {
    const { internals: E } = _.nodeLookup.get(e), k = E.userNode, { x: T, y: R } = E.positionAbsolute, { width: N, height: O } = Uu(k);
    return {
      node: k,
      x: T,
      y: R,
      width: N,
      height: O
    };
  }, fr);
  return !f || f.hidden || !sB(f) ? null : h.jsx(u, { x: p, y: g, width: x, height: b, style: f.style, selected: !!f.selected, className: r(f), color: t(f), borderRadius: i, strokeColor: n(f), strokeWidth: a, shapeRendering: o, onClick: c, id: f.id });
}
const Dme = B.memo(Ome);
var zme = B.memo(Mme);
const Pme = 200, Ime = 150, Lme = (e) => !e.hidden, Bme = (e) => {
  const t = {
    x: -e.transform[0] / e.transform[2],
    y: -e.transform[1] / e.transform[2],
    width: e.width / e.transform[2],
    height: e.height / e.transform[2]
  };
  return {
    viewBB: t,
    boundingRect: e.nodeLookup.size > 0 ? iB(Ay(e.nodeLookup, { filter: Lme }), t) : t,
    rfId: e.rfId,
    panZoom: e.panZoom,
    translateExtent: e.translateExtent,
    flowWidth: e.width,
    flowHeight: e.height,
    ariaLabelConfig: e.ariaLabelConfig
  };
}, qme = "react-flow__minimap-desc";
function aq({
  style: e,
  className: t,
  nodeStrokeColor: n,
  nodeColor: r,
  nodeClassName: i = "",
  nodeBorderRadius: a = 5,
  nodeStrokeWidth: o,
  /*
   * We need to rename the prop to be `CapitalCase` so that JSX will render it as
   * a component properly.
   */
  nodeComponent: u,
  bgColor: c,
  maskColor: f,
  maskStrokeColor: p,
  maskStrokeWidth: g,
  position: x = "bottom-right",
  onClick: b,
  onNodeClick: _,
  pannable: E = !1,
  zoomable: k = !1,
  ariaLabel: T,
  inversePan: R,
  zoomStep: N = 1,
  offsetScale: O = 5
}) {
  const P = hr(), z = B.useRef(null), { boundingRect: q, viewBB: G, rfId: Y, panZoom: W, translateExtent: F, flowWidth: X, flowHeight: me, ariaLabelConfig: J } = un(Bme, fr), le = (e == null ? void 0 : e.width) ?? Pme, Q = (e == null ? void 0 : e.height) ?? Ime, oe = q.width / le, fe = q.height / Q, ce = Math.max(oe, fe), K = ce * le, re = ce * Q, de = O * ce, V = q.x - (K - q.width) / 2 - de, ae = q.y - (re - q.height) / 2 - de, ge = K + de * 2, we = re + de * 2, Re = `${qme}-${Y}`, Ie = B.useRef(0), Me = B.useRef();
  Ie.current = ce, B.useEffect(() => {
    if (z.current && W)
      return Me.current = uhe({
        domNode: z.current,
        panZoom: W,
        getTransform: () => P.getState().transform,
        getViewScale: () => Ie.current
      }), () => {
        var ct;
        (ct = Me.current) == null || ct.destroy();
      };
  }, [W]), B.useEffect(() => {
    var ct;
    (ct = Me.current) == null || ct.update({
      translateExtent: F,
      width: X,
      height: me,
      inversePan: R,
      pannable: E,
      zoomStep: N,
      zoomable: k
    });
  }, [E, k, R, N, F, X, me]);
  const dt = b ? (ct) => {
    var At;
    const [mt, ft] = ((At = Me.current) == null ? void 0 : At.pointer(ct)) || [0, 0];
    b(ct, { x: mt, y: ft });
  } : void 0, ut = _ ? B.useCallback((ct, mt) => {
    const ft = P.getState().nodeLookup.get(mt).internals.userNode;
    _(ct, ft);
  }, []) : void 0, Je = T ?? J["minimap.ariaLabel"];
  return h.jsx(Eb, { position: x, style: {
    ...e,
    "--xy-minimap-background-color-props": typeof c == "string" ? c : void 0,
    "--xy-minimap-mask-background-color-props": typeof f == "string" ? f : void 0,
    "--xy-minimap-mask-stroke-color-props": typeof p == "string" ? p : void 0,
    "--xy-minimap-mask-stroke-width-props": typeof g == "number" ? g * ce : void 0,
    "--xy-minimap-node-background-color-props": typeof r == "string" ? r : void 0,
    "--xy-minimap-node-stroke-color-props": typeof n == "string" ? n : void 0,
    "--xy-minimap-node-stroke-width-props": typeof o == "number" ? o : void 0
  }, className: Zr(["react-flow__minimap", t]), "data-testid": "rf__minimap", children: h.jsxs("svg", { width: le, height: Q, viewBox: `${V} ${ae} ${ge} ${we}`, className: "react-flow__minimap-svg", role: "img", "aria-labelledby": Re, ref: z, onClick: dt, children: [Je && h.jsx("title", { id: Re, children: Je }), h.jsx(zme, { onClick: ut, nodeColor: r, nodeStrokeColor: n, nodeBorderRadius: a, nodeClassName: i, nodeStrokeWidth: o, nodeComponent: u }), h.jsx("path", { className: "react-flow__minimap-mask", d: `M${V - de},${ae - de}h${ge + de * 2}v${we + de * 2}h${-ge - de * 2}z
        M${G.x},${G.y}h${G.width}v${G.height}h${-G.width}z`, fillRule: "evenodd", pointerEvents: "none" })] }) });
}
aq.displayName = "MiniMap";
const $me = B.memo(aq), Fme = (e) => (t) => e ? `${Math.max(1 / t.transform[2], 1)}` : void 0, Ume = {
  [mm.Line]: "right",
  [mm.Handle]: "bottom-right"
};
function Vme({ nodeId: e, position: t, variant: n = mm.Handle, className: r, style: i = void 0, children: a, color: o, minWidth: u = 10, minHeight: c = 10, maxWidth: f = Number.MAX_VALUE, maxHeight: p = Number.MAX_VALUE, keepAspectRatio: g = !1, resizeDirection: x, autoScale: b = !0, shouldResize: _, onResizeStart: E, onResize: k, onResizeEnd: T }) {
  const R = LB(), N = typeof e == "string" ? e : R, O = hr(), P = B.useRef(null), z = n === mm.Handle, q = un(B.useCallback(Fme(z && b), [z, b]), fr), G = B.useRef(null), Y = t ?? Ume[n];
  B.useEffect(() => {
    if (!(!P.current || !N))
      return G.current || (G.current = She({
        domNode: P.current,
        nodeId: N,
        getStoreItems: () => {
          const { nodeLookup: F, transform: X, snapGrid: me, snapToGrid: J, nodeOrigin: le, domNode: Q } = O.getState();
          return {
            nodeLookup: F,
            transform: X,
            snapGrid: me,
            snapToGrid: J,
            nodeOrigin: le,
            paneDomNode: Q
          };
        },
        onChange: (F, X) => {
          const { triggerNodeChanges: me, nodeLookup: J, parentLookup: le, nodeOrigin: Q } = O.getState(), oe = [], fe = { x: F.x, y: F.y }, ce = J.get(N);
          if (ce && ce.expandParent && ce.parentId) {
            const K = ce.origin ?? Q, re = F.width ?? ce.measured.width ?? 0, de = F.height ?? ce.measured.height ?? 0, V = {
              id: ce.id,
              parentId: ce.parentId,
              rect: {
                width: re,
                height: de,
                ...aB({
                  x: F.x ?? ce.position.x,
                  y: F.y ?? ce.position.y
                }, { width: re, height: de }, ce.parentId, J, K)
              }
            }, ae = yT([V], J, le, Q);
            oe.push(...ae), fe.x = F.x ? Math.max(K[0] * re, F.x) : void 0, fe.y = F.y ? Math.max(K[1] * de, F.y) : void 0;
          }
          if (fe.x !== void 0 && fe.y !== void 0) {
            const K = {
              id: N,
              type: "position",
              position: { ...fe }
            };
            oe.push(K);
          }
          if (F.width !== void 0 && F.height !== void 0) {
            const re = {
              id: N,
              type: "dimensions",
              resizing: !0,
              setAttributes: x ? x === "horizontal" ? "width" : "height" : !0,
              dimensions: {
                width: F.width,
                height: F.height
              }
            };
            oe.push(re);
          }
          for (const K of X) {
            const re = {
              ...K,
              type: "position"
            };
            oe.push(re);
          }
          me(oe);
        },
        onEnd: ({ width: F, height: X }) => {
          const me = {
            id: N,
            type: "dimensions",
            resizing: !1,
            dimensions: {
              width: F,
              height: X
            }
          };
          O.getState().triggerNodeChanges([me]);
        }
      })), G.current.update({
        controlPosition: Y,
        boundaries: {
          minWidth: u,
          minHeight: c,
          maxWidth: f,
          maxHeight: p
        },
        keepAspectRatio: g,
        resizeDirection: x,
        onResizeStart: E,
        onResize: k,
        onResizeEnd: T,
        shouldResize: _
      }), () => {
        var F;
        (F = G.current) == null || F.destroy();
      };
  }, [
    Y,
    u,
    c,
    f,
    p,
    g,
    E,
    k,
    T,
    _
  ]);
  const W = Y.split("-");
  return h.jsx("div", { className: Zr(["react-flow__resize-control", "nodrag", ...W, n, r]), ref: P, style: {
    ...i,
    scale: q,
    ...o && { [z ? "backgroundColor" : "borderColor"]: o }
  }, children: a });
}
B.memo(Vme);
function xT(e) {
  throw new Error('Could not dynamically require "' + e + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var Vw, E8;
function Hme() {
  if (E8) return Vw;
  E8 = 1;
  function e() {
    this.__data__ = [], this.size = 0;
  }
  return Vw = e, Vw;
}
var Hw, k8;
function Cm() {
  if (k8) return Hw;
  k8 = 1;
  function e(t, n) {
    return t === n || t !== t && n !== n;
  }
  return Hw = e, Hw;
}
var Gw, T8;
function Ab() {
  if (T8) return Gw;
  T8 = 1;
  var e = /* @__PURE__ */ Cm();
  function t(n, r) {
    for (var i = n.length; i--; )
      if (e(n[i][0], r))
        return i;
    return -1;
  }
  return Gw = t, Gw;
}
var Kw, A8;
function Gme() {
  if (A8) return Kw;
  A8 = 1;
  var e = /* @__PURE__ */ Ab(), t = Array.prototype, n = t.splice;
  function r(i) {
    var a = this.__data__, o = e(a, i);
    if (o < 0)
      return !1;
    var u = a.length - 1;
    return o == u ? a.pop() : n.call(a, o, 1), --this.size, !0;
  }
  return Kw = r, Kw;
}
var Yw, j8;
function Kme() {
  if (j8) return Yw;
  j8 = 1;
  var e = /* @__PURE__ */ Ab();
  function t(n) {
    var r = this.__data__, i = e(r, n);
    return i < 0 ? void 0 : r[i][1];
  }
  return Yw = t, Yw;
}
var Ww, N8;
function Yme() {
  if (N8) return Ww;
  N8 = 1;
  var e = /* @__PURE__ */ Ab();
  function t(n) {
    return e(this.__data__, n) > -1;
  }
  return Ww = t, Ww;
}
var Zw, R8;
function Wme() {
  if (R8) return Zw;
  R8 = 1;
  var e = /* @__PURE__ */ Ab();
  function t(n, r) {
    var i = this.__data__, a = e(i, n);
    return a < 0 ? (++this.size, i.push([n, r])) : i[a][1] = r, this;
  }
  return Zw = t, Zw;
}
var Xw, M8;
function jb() {
  if (M8) return Xw;
  M8 = 1;
  var e = /* @__PURE__ */ Hme(), t = /* @__PURE__ */ Gme(), n = /* @__PURE__ */ Kme(), r = /* @__PURE__ */ Yme(), i = /* @__PURE__ */ Wme();
  function a(o) {
    var u = -1, c = o == null ? 0 : o.length;
    for (this.clear(); ++u < c; ) {
      var f = o[u];
      this.set(f[0], f[1]);
    }
  }
  return a.prototype.clear = e, a.prototype.delete = t, a.prototype.get = n, a.prototype.has = r, a.prototype.set = i, Xw = a, Xw;
}
var Qw, O8;
function Zme() {
  if (O8) return Qw;
  O8 = 1;
  var e = /* @__PURE__ */ jb();
  function t() {
    this.__data__ = new e(), this.size = 0;
  }
  return Qw = t, Qw;
}
var Jw, D8;
function Xme() {
  if (D8) return Jw;
  D8 = 1;
  function e(t) {
    var n = this.__data__, r = n.delete(t);
    return this.size = n.size, r;
  }
  return Jw = e, Jw;
}
var e_, z8;
function Qme() {
  if (z8) return e_;
  z8 = 1;
  function e(t) {
    return this.__data__.get(t);
  }
  return e_ = e, e_;
}
var t_, P8;
function Jme() {
  if (P8) return t_;
  P8 = 1;
  function e(t) {
    return this.__data__.has(t);
  }
  return t_ = e, t_;
}
var n_, I8;
function oq() {
  if (I8) return n_;
  I8 = 1;
  var e = typeof Ou == "object" && Ou && Ou.Object === Object && Ou;
  return n_ = e, n_;
}
var r_, L8;
function Ko() {
  if (L8) return r_;
  L8 = 1;
  var e = /* @__PURE__ */ oq(), t = typeof self == "object" && self && self.Object === Object && self, n = e || t || Function("return this")();
  return r_ = n, r_;
}
var i_, B8;
function Em() {
  if (B8) return i_;
  B8 = 1;
  var e = /* @__PURE__ */ Ko(), t = e.Symbol;
  return i_ = t, i_;
}
var s_, q8;
function ege() {
  if (q8) return s_;
  q8 = 1;
  var e = /* @__PURE__ */ Em(), t = Object.prototype, n = t.hasOwnProperty, r = t.toString, i = e ? e.toStringTag : void 0;
  function a(o) {
    var u = n.call(o, i), c = o[i];
    try {
      o[i] = void 0;
      var f = !0;
    } catch {
    }
    var p = r.call(o);
    return f && (u ? o[i] = c : delete o[i]), p;
  }
  return s_ = a, s_;
}
var a_, $8;
function tge() {
  if ($8) return a_;
  $8 = 1;
  var e = Object.prototype, t = e.toString;
  function n(r) {
    return t.call(r);
  }
  return a_ = n, a_;
}
var o_, F8;
function lh() {
  if (F8) return o_;
  F8 = 1;
  var e = /* @__PURE__ */ Em(), t = /* @__PURE__ */ ege(), n = /* @__PURE__ */ tge(), r = "[object Null]", i = "[object Undefined]", a = e ? e.toStringTag : void 0;
  function o(u) {
    return u == null ? u === void 0 ? i : r : a && a in Object(u) ? t(u) : n(u);
  }
  return o_ = o, o_;
}
var l_, U8;
function no() {
  if (U8) return l_;
  U8 = 1;
  function e(t) {
    var n = typeof t;
    return t != null && (n == "object" || n == "function");
  }
  return l_ = e, l_;
}
var u_, V8;
function Ry() {
  if (V8) return u_;
  V8 = 1;
  var e = /* @__PURE__ */ lh(), t = /* @__PURE__ */ no(), n = "[object AsyncFunction]", r = "[object Function]", i = "[object GeneratorFunction]", a = "[object Proxy]";
  function o(u) {
    if (!t(u))
      return !1;
    var c = e(u);
    return c == r || c == i || c == n || c == a;
  }
  return u_ = o, u_;
}
var c_, H8;
function nge() {
  if (H8) return c_;
  H8 = 1;
  var e = /* @__PURE__ */ Ko(), t = e["__core-js_shared__"];
  return c_ = t, c_;
}
var f_, G8;
function rge() {
  if (G8) return f_;
  G8 = 1;
  var e = /* @__PURE__ */ nge(), t = (function() {
    var r = /[^.]+$/.exec(e && e.keys && e.keys.IE_PROTO || "");
    return r ? "Symbol(src)_1." + r : "";
  })();
  function n(r) {
    return !!t && t in r;
  }
  return f_ = n, f_;
}
var d_, K8;
function lq() {
  if (K8) return d_;
  K8 = 1;
  var e = Function.prototype, t = e.toString;
  function n(r) {
    if (r != null) {
      try {
        return t.call(r);
      } catch {
      }
      try {
        return r + "";
      } catch {
      }
    }
    return "";
  }
  return d_ = n, d_;
}
var h_, Y8;
function ige() {
  if (Y8) return h_;
  Y8 = 1;
  var e = /* @__PURE__ */ Ry(), t = /* @__PURE__ */ rge(), n = /* @__PURE__ */ no(), r = /* @__PURE__ */ lq(), i = /[\\^$.*+?()[\]{}|]/g, a = /^\[object .+?Constructor\]$/, o = Function.prototype, u = Object.prototype, c = o.toString, f = u.hasOwnProperty, p = RegExp(
    "^" + c.call(f).replace(i, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
  );
  function g(x) {
    if (!n(x) || t(x))
      return !1;
    var b = e(x) ? p : a;
    return b.test(r(x));
  }
  return h_ = g, h_;
}
var p_, W8;
function sge() {
  if (W8) return p_;
  W8 = 1;
  function e(t, n) {
    return t == null ? void 0 : t[n];
  }
  return p_ = e, p_;
}
var m_, Z8;
function uh() {
  if (Z8) return m_;
  Z8 = 1;
  var e = /* @__PURE__ */ ige(), t = /* @__PURE__ */ sge();
  function n(r, i) {
    var a = t(r, i);
    return e(a) ? a : void 0;
  }
  return m_ = n, m_;
}
var g_, X8;
function bT() {
  if (X8) return g_;
  X8 = 1;
  var e = /* @__PURE__ */ uh(), t = /* @__PURE__ */ Ko(), n = e(t, "Map");
  return g_ = n, g_;
}
var y_, Q8;
function Nb() {
  if (Q8) return y_;
  Q8 = 1;
  var e = /* @__PURE__ */ uh(), t = e(Object, "create");
  return y_ = t, y_;
}
var v_, J8;
function age() {
  if (J8) return v_;
  J8 = 1;
  var e = /* @__PURE__ */ Nb();
  function t() {
    this.__data__ = e ? e(null) : {}, this.size = 0;
  }
  return v_ = t, v_;
}
var x_, eR;
function oge() {
  if (eR) return x_;
  eR = 1;
  function e(t) {
    var n = this.has(t) && delete this.__data__[t];
    return this.size -= n ? 1 : 0, n;
  }
  return x_ = e, x_;
}
var b_, tR;
function lge() {
  if (tR) return b_;
  tR = 1;
  var e = /* @__PURE__ */ Nb(), t = "__lodash_hash_undefined__", n = Object.prototype, r = n.hasOwnProperty;
  function i(a) {
    var o = this.__data__;
    if (e) {
      var u = o[a];
      return u === t ? void 0 : u;
    }
    return r.call(o, a) ? o[a] : void 0;
  }
  return b_ = i, b_;
}
var w_, nR;
function uge() {
  if (nR) return w_;
  nR = 1;
  var e = /* @__PURE__ */ Nb(), t = Object.prototype, n = t.hasOwnProperty;
  function r(i) {
    var a = this.__data__;
    return e ? a[i] !== void 0 : n.call(a, i);
  }
  return w_ = r, w_;
}
var __, rR;
function cge() {
  if (rR) return __;
  rR = 1;
  var e = /* @__PURE__ */ Nb(), t = "__lodash_hash_undefined__";
  function n(r, i) {
    var a = this.__data__;
    return this.size += this.has(r) ? 0 : 1, a[r] = e && i === void 0 ? t : i, this;
  }
  return __ = n, __;
}
var S_, iR;
function fge() {
  if (iR) return S_;
  iR = 1;
  var e = /* @__PURE__ */ age(), t = /* @__PURE__ */ oge(), n = /* @__PURE__ */ lge(), r = /* @__PURE__ */ uge(), i = /* @__PURE__ */ cge();
  function a(o) {
    var u = -1, c = o == null ? 0 : o.length;
    for (this.clear(); ++u < c; ) {
      var f = o[u];
      this.set(f[0], f[1]);
    }
  }
  return a.prototype.clear = e, a.prototype.delete = t, a.prototype.get = n, a.prototype.has = r, a.prototype.set = i, S_ = a, S_;
}
var C_, sR;
function dge() {
  if (sR) return C_;
  sR = 1;
  var e = /* @__PURE__ */ fge(), t = /* @__PURE__ */ jb(), n = /* @__PURE__ */ bT();
  function r() {
    this.size = 0, this.__data__ = {
      hash: new e(),
      map: new (n || t)(),
      string: new e()
    };
  }
  return C_ = r, C_;
}
var E_, aR;
function hge() {
  if (aR) return E_;
  aR = 1;
  function e(t) {
    var n = typeof t;
    return n == "string" || n == "number" || n == "symbol" || n == "boolean" ? t !== "__proto__" : t === null;
  }
  return E_ = e, E_;
}
var k_, oR;
function Rb() {
  if (oR) return k_;
  oR = 1;
  var e = /* @__PURE__ */ hge();
  function t(n, r) {
    var i = n.__data__;
    return e(r) ? i[typeof r == "string" ? "string" : "hash"] : i.map;
  }
  return k_ = t, k_;
}
var T_, lR;
function pge() {
  if (lR) return T_;
  lR = 1;
  var e = /* @__PURE__ */ Rb();
  function t(n) {
    var r = e(this, n).delete(n);
    return this.size -= r ? 1 : 0, r;
  }
  return T_ = t, T_;
}
var A_, uR;
function mge() {
  if (uR) return A_;
  uR = 1;
  var e = /* @__PURE__ */ Rb();
  function t(n) {
    return e(this, n).get(n);
  }
  return A_ = t, A_;
}
var j_, cR;
function gge() {
  if (cR) return j_;
  cR = 1;
  var e = /* @__PURE__ */ Rb();
  function t(n) {
    return e(this, n).has(n);
  }
  return j_ = t, j_;
}
var N_, fR;
function yge() {
  if (fR) return N_;
  fR = 1;
  var e = /* @__PURE__ */ Rb();
  function t(n, r) {
    var i = e(this, n), a = i.size;
    return i.set(n, r), this.size += i.size == a ? 0 : 1, this;
  }
  return N_ = t, N_;
}
var R_, dR;
function wT() {
  if (dR) return R_;
  dR = 1;
  var e = /* @__PURE__ */ dge(), t = /* @__PURE__ */ pge(), n = /* @__PURE__ */ mge(), r = /* @__PURE__ */ gge(), i = /* @__PURE__ */ yge();
  function a(o) {
    var u = -1, c = o == null ? 0 : o.length;
    for (this.clear(); ++u < c; ) {
      var f = o[u];
      this.set(f[0], f[1]);
    }
  }
  return a.prototype.clear = e, a.prototype.delete = t, a.prototype.get = n, a.prototype.has = r, a.prototype.set = i, R_ = a, R_;
}
var M_, hR;
function vge() {
  if (hR) return M_;
  hR = 1;
  var e = /* @__PURE__ */ jb(), t = /* @__PURE__ */ bT(), n = /* @__PURE__ */ wT(), r = 200;
  function i(a, o) {
    var u = this.__data__;
    if (u instanceof e) {
      var c = u.__data__;
      if (!t || c.length < r - 1)
        return c.push([a, o]), this.size = ++u.size, this;
      u = this.__data__ = new n(c);
    }
    return u.set(a, o), this.size = u.size, this;
  }
  return M_ = i, M_;
}
var O_, pR;
function Mb() {
  if (pR) return O_;
  pR = 1;
  var e = /* @__PURE__ */ jb(), t = /* @__PURE__ */ Zme(), n = /* @__PURE__ */ Xme(), r = /* @__PURE__ */ Qme(), i = /* @__PURE__ */ Jme(), a = /* @__PURE__ */ vge();
  function o(u) {
    var c = this.__data__ = new e(u);
    this.size = c.size;
  }
  return o.prototype.clear = t, o.prototype.delete = n, o.prototype.get = r, o.prototype.has = i, o.prototype.set = a, O_ = o, O_;
}
var D_, mR;
function _T() {
  if (mR) return D_;
  mR = 1;
  function e(t, n) {
    for (var r = -1, i = t == null ? 0 : t.length; ++r < i && n(t[r], r, t) !== !1; )
      ;
    return t;
  }
  return D_ = e, D_;
}
var z_, gR;
function uq() {
  if (gR) return z_;
  gR = 1;
  var e = /* @__PURE__ */ uh(), t = (function() {
    try {
      var n = e(Object, "defineProperty");
      return n({}, "", {}), n;
    } catch {
    }
  })();
  return z_ = t, z_;
}
var P_, yR;
function Ob() {
  if (yR) return P_;
  yR = 1;
  var e = /* @__PURE__ */ uq();
  function t(n, r, i) {
    r == "__proto__" && e ? e(n, r, {
      configurable: !0,
      enumerable: !0,
      value: i,
      writable: !0
    }) : n[r] = i;
  }
  return P_ = t, P_;
}
var I_, vR;
function Db() {
  if (vR) return I_;
  vR = 1;
  var e = /* @__PURE__ */ Ob(), t = /* @__PURE__ */ Cm(), n = Object.prototype, r = n.hasOwnProperty;
  function i(a, o, u) {
    var c = a[o];
    (!(r.call(a, o) && t(c, u)) || u === void 0 && !(o in a)) && e(a, o, u);
  }
  return I_ = i, I_;
}
var L_, xR;
function My() {
  if (xR) return L_;
  xR = 1;
  var e = /* @__PURE__ */ Db(), t = /* @__PURE__ */ Ob();
  function n(r, i, a, o) {
    var u = !a;
    a || (a = {});
    for (var c = -1, f = i.length; ++c < f; ) {
      var p = i[c], g = o ? o(a[p], r[p], p, a, r) : void 0;
      g === void 0 && (g = r[p]), u ? t(a, p, g) : e(a, p, g);
    }
    return a;
  }
  return L_ = n, L_;
}
var B_, bR;
function xge() {
  if (bR) return B_;
  bR = 1;
  function e(t, n) {
    for (var r = -1, i = Array(t); ++r < t; )
      i[r] = n(r);
    return i;
  }
  return B_ = e, B_;
}
var q_, wR;
function Zl() {
  if (wR) return q_;
  wR = 1;
  function e(t) {
    return t != null && typeof t == "object";
  }
  return q_ = e, q_;
}
var $_, _R;
function bge() {
  if (_R) return $_;
  _R = 1;
  var e = /* @__PURE__ */ lh(), t = /* @__PURE__ */ Zl(), n = "[object Arguments]";
  function r(i) {
    return t(i) && e(i) == n;
  }
  return $_ = r, $_;
}
var F_, SR;
function Oy() {
  if (SR) return F_;
  SR = 1;
  var e = /* @__PURE__ */ bge(), t = /* @__PURE__ */ Zl(), n = Object.prototype, r = n.hasOwnProperty, i = n.propertyIsEnumerable, a = e(/* @__PURE__ */ (function() {
    return arguments;
  })()) ? e : function(o) {
    return t(o) && r.call(o, "callee") && !i.call(o, "callee");
  };
  return F_ = a, F_;
}
var U_, CR;
function Xr() {
  if (CR) return U_;
  CR = 1;
  var e = Array.isArray;
  return U_ = e, U_;
}
var H1 = { exports: {} }, V_, ER;
function wge() {
  if (ER) return V_;
  ER = 1;
  function e() {
    return !1;
  }
  return V_ = e, V_;
}
var kR;
function km() {
  return kR || (kR = 1, (function(e, t) {
    var n = /* @__PURE__ */ Ko(), r = /* @__PURE__ */ wge(), i = t && !t.nodeType && t, a = i && !0 && e && !e.nodeType && e, o = a && a.exports === i, u = o ? n.Buffer : void 0, c = u ? u.isBuffer : void 0, f = c || r;
    e.exports = f;
  })(H1, H1.exports)), H1.exports;
}
var H_, TR;
function zb() {
  if (TR) return H_;
  TR = 1;
  var e = 9007199254740991, t = /^(?:0|[1-9]\d*)$/;
  function n(r, i) {
    var a = typeof r;
    return i = i ?? e, !!i && (a == "number" || a != "symbol" && t.test(r)) && r > -1 && r % 1 == 0 && r < i;
  }
  return H_ = n, H_;
}
var G_, AR;
function ST() {
  if (AR) return G_;
  AR = 1;
  var e = 9007199254740991;
  function t(n) {
    return typeof n == "number" && n > -1 && n % 1 == 0 && n <= e;
  }
  return G_ = t, G_;
}
var K_, jR;
function _ge() {
  if (jR) return K_;
  jR = 1;
  var e = /* @__PURE__ */ lh(), t = /* @__PURE__ */ ST(), n = /* @__PURE__ */ Zl(), r = "[object Arguments]", i = "[object Array]", a = "[object Boolean]", o = "[object Date]", u = "[object Error]", c = "[object Function]", f = "[object Map]", p = "[object Number]", g = "[object Object]", x = "[object RegExp]", b = "[object Set]", _ = "[object String]", E = "[object WeakMap]", k = "[object ArrayBuffer]", T = "[object DataView]", R = "[object Float32Array]", N = "[object Float64Array]", O = "[object Int8Array]", P = "[object Int16Array]", z = "[object Int32Array]", q = "[object Uint8Array]", G = "[object Uint8ClampedArray]", Y = "[object Uint16Array]", W = "[object Uint32Array]", F = {};
  F[R] = F[N] = F[O] = F[P] = F[z] = F[q] = F[G] = F[Y] = F[W] = !0, F[r] = F[i] = F[k] = F[a] = F[T] = F[o] = F[u] = F[c] = F[f] = F[p] = F[g] = F[x] = F[b] = F[_] = F[E] = !1;
  function X(me) {
    return n(me) && t(me.length) && !!F[e(me)];
  }
  return K_ = X, K_;
}
var Y_, NR;
function Pb() {
  if (NR) return Y_;
  NR = 1;
  function e(t) {
    return function(n) {
      return t(n);
    };
  }
  return Y_ = e, Y_;
}
var G1 = { exports: {} }, RR;
function CT() {
  return RR || (RR = 1, (function(e, t) {
    var n = /* @__PURE__ */ oq(), r = t && !t.nodeType && t, i = r && !0 && e && !e.nodeType && e, a = i && i.exports === r, o = a && n.process, u = (function() {
      try {
        var c = i && i.require && i.require("util").types;
        return c || o && o.binding && o.binding("util");
      } catch {
      }
    })();
    e.exports = u;
  })(G1, G1.exports)), G1.exports;
}
var W_, MR;
function Dy() {
  if (MR) return W_;
  MR = 1;
  var e = /* @__PURE__ */ _ge(), t = /* @__PURE__ */ Pb(), n = /* @__PURE__ */ CT(), r = n && n.isTypedArray, i = r ? t(r) : e;
  return W_ = i, W_;
}
var Z_, OR;
function cq() {
  if (OR) return Z_;
  OR = 1;
  var e = /* @__PURE__ */ xge(), t = /* @__PURE__ */ Oy(), n = /* @__PURE__ */ Xr(), r = /* @__PURE__ */ km(), i = /* @__PURE__ */ zb(), a = /* @__PURE__ */ Dy(), o = Object.prototype, u = o.hasOwnProperty;
  function c(f, p) {
    var g = n(f), x = !g && t(f), b = !g && !x && r(f), _ = !g && !x && !b && a(f), E = g || x || b || _, k = E ? e(f.length, String) : [], T = k.length;
    for (var R in f)
      (p || u.call(f, R)) && !(E && // Safari 9 has enumerable `arguments.length` in strict mode.
      (R == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
      b && (R == "offset" || R == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
      _ && (R == "buffer" || R == "byteLength" || R == "byteOffset") || // Skip index properties.
      i(R, T))) && k.push(R);
    return k;
  }
  return Z_ = c, Z_;
}
var X_, DR;
function Ib() {
  if (DR) return X_;
  DR = 1;
  var e = Object.prototype;
  function t(n) {
    var r = n && n.constructor, i = typeof r == "function" && r.prototype || e;
    return n === i;
  }
  return X_ = t, X_;
}
var Q_, zR;
function fq() {
  if (zR) return Q_;
  zR = 1;
  function e(t, n) {
    return function(r) {
      return t(n(r));
    };
  }
  return Q_ = e, Q_;
}
var J_, PR;
function Sge() {
  if (PR) return J_;
  PR = 1;
  var e = /* @__PURE__ */ fq(), t = e(Object.keys, Object);
  return J_ = t, J_;
}
var eS, IR;
function ET() {
  if (IR) return eS;
  IR = 1;
  var e = /* @__PURE__ */ Ib(), t = /* @__PURE__ */ Sge(), n = Object.prototype, r = n.hasOwnProperty;
  function i(a) {
    if (!e(a))
      return t(a);
    var o = [];
    for (var u in Object(a))
      r.call(a, u) && u != "constructor" && o.push(u);
    return o;
  }
  return eS = i, eS;
}
var tS, LR;
function Vu() {
  if (LR) return tS;
  LR = 1;
  var e = /* @__PURE__ */ Ry(), t = /* @__PURE__ */ ST();
  function n(r) {
    return r != null && t(r.length) && !e(r);
  }
  return tS = n, tS;
}
var nS, BR;
function pf() {
  if (BR) return nS;
  BR = 1;
  var e = /* @__PURE__ */ cq(), t = /* @__PURE__ */ ET(), n = /* @__PURE__ */ Vu();
  function r(i) {
    return n(i) ? e(i) : t(i);
  }
  return nS = r, nS;
}
var rS, qR;
function Cge() {
  if (qR) return rS;
  qR = 1;
  var e = /* @__PURE__ */ My(), t = /* @__PURE__ */ pf();
  function n(r, i) {
    return r && e(i, t(i), r);
  }
  return rS = n, rS;
}
var iS, $R;
function Ege() {
  if ($R) return iS;
  $R = 1;
  function e(t) {
    var n = [];
    if (t != null)
      for (var r in Object(t))
        n.push(r);
    return n;
  }
  return iS = e, iS;
}
var sS, FR;
function kge() {
  if (FR) return sS;
  FR = 1;
  var e = /* @__PURE__ */ no(), t = /* @__PURE__ */ Ib(), n = /* @__PURE__ */ Ege(), r = Object.prototype, i = r.hasOwnProperty;
  function a(o) {
    if (!e(o))
      return n(o);
    var u = t(o), c = [];
    for (var f in o)
      f == "constructor" && (u || !i.call(o, f)) || c.push(f);
    return c;
  }
  return sS = a, sS;
}
var aS, UR;
function ch() {
  if (UR) return aS;
  UR = 1;
  var e = /* @__PURE__ */ cq(), t = /* @__PURE__ */ kge(), n = /* @__PURE__ */ Vu();
  function r(i) {
    return n(i) ? e(i, !0) : t(i);
  }
  return aS = r, aS;
}
var oS, VR;
function Tge() {
  if (VR) return oS;
  VR = 1;
  var e = /* @__PURE__ */ My(), t = /* @__PURE__ */ ch();
  function n(r, i) {
    return r && e(i, t(i), r);
  }
  return oS = n, oS;
}
var K1 = { exports: {} }, HR;
function dq() {
  return HR || (HR = 1, (function(e, t) {
    var n = /* @__PURE__ */ Ko(), r = t && !t.nodeType && t, i = r && !0 && e && !e.nodeType && e, a = i && i.exports === r, o = a ? n.Buffer : void 0, u = o ? o.allocUnsafe : void 0;
    function c(f, p) {
      if (p)
        return f.slice();
      var g = f.length, x = u ? u(g) : new f.constructor(g);
      return f.copy(x), x;
    }
    e.exports = c;
  })(K1, K1.exports)), K1.exports;
}
var lS, GR;
function hq() {
  if (GR) return lS;
  GR = 1;
  function e(t, n) {
    var r = -1, i = t.length;
    for (n || (n = Array(i)); ++r < i; )
      n[r] = t[r];
    return n;
  }
  return lS = e, lS;
}
var uS, KR;
function pq() {
  if (KR) return uS;
  KR = 1;
  function e(t, n) {
    for (var r = -1, i = t == null ? 0 : t.length, a = 0, o = []; ++r < i; ) {
      var u = t[r];
      n(u, r, t) && (o[a++] = u);
    }
    return o;
  }
  return uS = e, uS;
}
var cS, YR;
function mq() {
  if (YR) return cS;
  YR = 1;
  function e() {
    return [];
  }
  return cS = e, cS;
}
var fS, WR;
function kT() {
  if (WR) return fS;
  WR = 1;
  var e = /* @__PURE__ */ pq(), t = /* @__PURE__ */ mq(), n = Object.prototype, r = n.propertyIsEnumerable, i = Object.getOwnPropertySymbols, a = i ? function(o) {
    return o == null ? [] : (o = Object(o), e(i(o), function(u) {
      return r.call(o, u);
    }));
  } : t;
  return fS = a, fS;
}
var dS, ZR;
function Age() {
  if (ZR) return dS;
  ZR = 1;
  var e = /* @__PURE__ */ My(), t = /* @__PURE__ */ kT();
  function n(r, i) {
    return e(r, t(r), i);
  }
  return dS = n, dS;
}
var hS, XR;
function TT() {
  if (XR) return hS;
  XR = 1;
  function e(t, n) {
    for (var r = -1, i = n.length, a = t.length; ++r < i; )
      t[a + r] = n[r];
    return t;
  }
  return hS = e, hS;
}
var pS, QR;
function Lb() {
  if (QR) return pS;
  QR = 1;
  var e = /* @__PURE__ */ fq(), t = e(Object.getPrototypeOf, Object);
  return pS = t, pS;
}
var mS, JR;
function gq() {
  if (JR) return mS;
  JR = 1;
  var e = /* @__PURE__ */ TT(), t = /* @__PURE__ */ Lb(), n = /* @__PURE__ */ kT(), r = /* @__PURE__ */ mq(), i = Object.getOwnPropertySymbols, a = i ? function(o) {
    for (var u = []; o; )
      e(u, n(o)), o = t(o);
    return u;
  } : r;
  return mS = a, mS;
}
var gS, e9;
function jge() {
  if (e9) return gS;
  e9 = 1;
  var e = /* @__PURE__ */ My(), t = /* @__PURE__ */ gq();
  function n(r, i) {
    return e(r, t(r), i);
  }
  return gS = n, gS;
}
var yS, t9;
function yq() {
  if (t9) return yS;
  t9 = 1;
  var e = /* @__PURE__ */ TT(), t = /* @__PURE__ */ Xr();
  function n(r, i, a) {
    var o = i(r);
    return t(r) ? o : e(o, a(r));
  }
  return yS = n, yS;
}
var vS, n9;
function vq() {
  if (n9) return vS;
  n9 = 1;
  var e = /* @__PURE__ */ yq(), t = /* @__PURE__ */ kT(), n = /* @__PURE__ */ pf();
  function r(i) {
    return e(i, n, t);
  }
  return vS = r, vS;
}
var xS, r9;
function Nge() {
  if (r9) return xS;
  r9 = 1;
  var e = /* @__PURE__ */ yq(), t = /* @__PURE__ */ gq(), n = /* @__PURE__ */ ch();
  function r(i) {
    return e(i, n, t);
  }
  return xS = r, xS;
}
var bS, i9;
function Rge() {
  if (i9) return bS;
  i9 = 1;
  var e = /* @__PURE__ */ uh(), t = /* @__PURE__ */ Ko(), n = e(t, "DataView");
  return bS = n, bS;
}
var wS, s9;
function Mge() {
  if (s9) return wS;
  s9 = 1;
  var e = /* @__PURE__ */ uh(), t = /* @__PURE__ */ Ko(), n = e(t, "Promise");
  return wS = n, wS;
}
var _S, a9;
function xq() {
  if (a9) return _S;
  a9 = 1;
  var e = /* @__PURE__ */ uh(), t = /* @__PURE__ */ Ko(), n = e(t, "Set");
  return _S = n, _S;
}
var SS, o9;
function Oge() {
  if (o9) return SS;
  o9 = 1;
  var e = /* @__PURE__ */ uh(), t = /* @__PURE__ */ Ko(), n = e(t, "WeakMap");
  return SS = n, SS;
}
var CS, l9;
function Tm() {
  if (l9) return CS;
  l9 = 1;
  var e = /* @__PURE__ */ Rge(), t = /* @__PURE__ */ bT(), n = /* @__PURE__ */ Mge(), r = /* @__PURE__ */ xq(), i = /* @__PURE__ */ Oge(), a = /* @__PURE__ */ lh(), o = /* @__PURE__ */ lq(), u = "[object Map]", c = "[object Object]", f = "[object Promise]", p = "[object Set]", g = "[object WeakMap]", x = "[object DataView]", b = o(e), _ = o(t), E = o(n), k = o(r), T = o(i), R = a;
  return (e && R(new e(new ArrayBuffer(1))) != x || t && R(new t()) != u || n && R(n.resolve()) != f || r && R(new r()) != p || i && R(new i()) != g) && (R = function(N) {
    var O = a(N), P = O == c ? N.constructor : void 0, z = P ? o(P) : "";
    if (z)
      switch (z) {
        case b:
          return x;
        case _:
          return u;
        case E:
          return f;
        case k:
          return p;
        case T:
          return g;
      }
    return O;
  }), CS = R, CS;
}
var ES, u9;
function Dge() {
  if (u9) return ES;
  u9 = 1;
  var e = Object.prototype, t = e.hasOwnProperty;
  function n(r) {
    var i = r.length, a = new r.constructor(i);
    return i && typeof r[0] == "string" && t.call(r, "index") && (a.index = r.index, a.input = r.input), a;
  }
  return ES = n, ES;
}
var kS, c9;
function bq() {
  if (c9) return kS;
  c9 = 1;
  var e = /* @__PURE__ */ Ko(), t = e.Uint8Array;
  return kS = t, kS;
}
var TS, f9;
function AT() {
  if (f9) return TS;
  f9 = 1;
  var e = /* @__PURE__ */ bq();
  function t(n) {
    var r = new n.constructor(n.byteLength);
    return new e(r).set(new e(n)), r;
  }
  return TS = t, TS;
}
var AS, d9;
function zge() {
  if (d9) return AS;
  d9 = 1;
  var e = /* @__PURE__ */ AT();
  function t(n, r) {
    var i = r ? e(n.buffer) : n.buffer;
    return new n.constructor(i, n.byteOffset, n.byteLength);
  }
  return AS = t, AS;
}
var jS, h9;
function Pge() {
  if (h9) return jS;
  h9 = 1;
  var e = /\w*$/;
  function t(n) {
    var r = new n.constructor(n.source, e.exec(n));
    return r.lastIndex = n.lastIndex, r;
  }
  return jS = t, jS;
}
var NS, p9;
function Ige() {
  if (p9) return NS;
  p9 = 1;
  var e = /* @__PURE__ */ Em(), t = e ? e.prototype : void 0, n = t ? t.valueOf : void 0;
  function r(i) {
    return n ? Object(n.call(i)) : {};
  }
  return NS = r, NS;
}
var RS, m9;
function wq() {
  if (m9) return RS;
  m9 = 1;
  var e = /* @__PURE__ */ AT();
  function t(n, r) {
    var i = r ? e(n.buffer) : n.buffer;
    return new n.constructor(i, n.byteOffset, n.length);
  }
  return RS = t, RS;
}
var MS, g9;
function Lge() {
  if (g9) return MS;
  g9 = 1;
  var e = /* @__PURE__ */ AT(), t = /* @__PURE__ */ zge(), n = /* @__PURE__ */ Pge(), r = /* @__PURE__ */ Ige(), i = /* @__PURE__ */ wq(), a = "[object Boolean]", o = "[object Date]", u = "[object Map]", c = "[object Number]", f = "[object RegExp]", p = "[object Set]", g = "[object String]", x = "[object Symbol]", b = "[object ArrayBuffer]", _ = "[object DataView]", E = "[object Float32Array]", k = "[object Float64Array]", T = "[object Int8Array]", R = "[object Int16Array]", N = "[object Int32Array]", O = "[object Uint8Array]", P = "[object Uint8ClampedArray]", z = "[object Uint16Array]", q = "[object Uint32Array]";
  function G(Y, W, F) {
    var X = Y.constructor;
    switch (W) {
      case b:
        return e(Y);
      case a:
      case o:
        return new X(+Y);
      case _:
        return t(Y, F);
      case E:
      case k:
      case T:
      case R:
      case N:
      case O:
      case P:
      case z:
      case q:
        return i(Y, F);
      case u:
        return new X();
      case c:
      case g:
        return new X(Y);
      case f:
        return n(Y);
      case p:
        return new X();
      case x:
        return r(Y);
    }
  }
  return MS = G, MS;
}
var OS, y9;
function _q() {
  if (y9) return OS;
  y9 = 1;
  var e = /* @__PURE__ */ no(), t = Object.create, n = /* @__PURE__ */ (function() {
    function r() {
    }
    return function(i) {
      if (!e(i))
        return {};
      if (t)
        return t(i);
      r.prototype = i;
      var a = new r();
      return r.prototype = void 0, a;
    };
  })();
  return OS = n, OS;
}
var DS, v9;
function Sq() {
  if (v9) return DS;
  v9 = 1;
  var e = /* @__PURE__ */ _q(), t = /* @__PURE__ */ Lb(), n = /* @__PURE__ */ Ib();
  function r(i) {
    return typeof i.constructor == "function" && !n(i) ? e(t(i)) : {};
  }
  return DS = r, DS;
}
var zS, x9;
function Bge() {
  if (x9) return zS;
  x9 = 1;
  var e = /* @__PURE__ */ Tm(), t = /* @__PURE__ */ Zl(), n = "[object Map]";
  function r(i) {
    return t(i) && e(i) == n;
  }
  return zS = r, zS;
}
var PS, b9;
function qge() {
  if (b9) return PS;
  b9 = 1;
  var e = /* @__PURE__ */ Bge(), t = /* @__PURE__ */ Pb(), n = /* @__PURE__ */ CT(), r = n && n.isMap, i = r ? t(r) : e;
  return PS = i, PS;
}
var IS, w9;
function $ge() {
  if (w9) return IS;
  w9 = 1;
  var e = /* @__PURE__ */ Tm(), t = /* @__PURE__ */ Zl(), n = "[object Set]";
  function r(i) {
    return t(i) && e(i) == n;
  }
  return IS = r, IS;
}
var LS, _9;
function Fge() {
  if (_9) return LS;
  _9 = 1;
  var e = /* @__PURE__ */ $ge(), t = /* @__PURE__ */ Pb(), n = /* @__PURE__ */ CT(), r = n && n.isSet, i = r ? t(r) : e;
  return LS = i, LS;
}
var BS, S9;
function Cq() {
  if (S9) return BS;
  S9 = 1;
  var e = /* @__PURE__ */ Mb(), t = /* @__PURE__ */ _T(), n = /* @__PURE__ */ Db(), r = /* @__PURE__ */ Cge(), i = /* @__PURE__ */ Tge(), a = /* @__PURE__ */ dq(), o = /* @__PURE__ */ hq(), u = /* @__PURE__ */ Age(), c = /* @__PURE__ */ jge(), f = /* @__PURE__ */ vq(), p = /* @__PURE__ */ Nge(), g = /* @__PURE__ */ Tm(), x = /* @__PURE__ */ Dge(), b = /* @__PURE__ */ Lge(), _ = /* @__PURE__ */ Sq(), E = /* @__PURE__ */ Xr(), k = /* @__PURE__ */ km(), T = /* @__PURE__ */ qge(), R = /* @__PURE__ */ no(), N = /* @__PURE__ */ Fge(), O = /* @__PURE__ */ pf(), P = /* @__PURE__ */ ch(), z = 1, q = 2, G = 4, Y = "[object Arguments]", W = "[object Array]", F = "[object Boolean]", X = "[object Date]", me = "[object Error]", J = "[object Function]", le = "[object GeneratorFunction]", Q = "[object Map]", oe = "[object Number]", fe = "[object Object]", ce = "[object RegExp]", K = "[object Set]", re = "[object String]", de = "[object Symbol]", V = "[object WeakMap]", ae = "[object ArrayBuffer]", ge = "[object DataView]", we = "[object Float32Array]", Re = "[object Float64Array]", Ie = "[object Int8Array]", Me = "[object Int16Array]", dt = "[object Int32Array]", ut = "[object Uint8Array]", Je = "[object Uint8ClampedArray]", ct = "[object Uint16Array]", mt = "[object Uint32Array]", ft = {};
  ft[Y] = ft[W] = ft[ae] = ft[ge] = ft[F] = ft[X] = ft[we] = ft[Re] = ft[Ie] = ft[Me] = ft[dt] = ft[Q] = ft[oe] = ft[fe] = ft[ce] = ft[K] = ft[re] = ft[de] = ft[ut] = ft[Je] = ft[ct] = ft[mt] = !0, ft[me] = ft[J] = ft[V] = !1;
  function At(xt, qn, An, jn, Yt, Nn) {
    var rn, bn = qn & z, $n = qn & q, Le = qn & G;
    if (An && (rn = Yt ? An(xt, jn, Yt, Nn) : An(xt)), rn !== void 0)
      return rn;
    if (!R(xt))
      return xt;
    var We = E(xt);
    if (We) {
      if (rn = x(xt), !bn)
        return o(xt, rn);
    } else {
      var at = g(xt), Ct = at == J || at == le;
      if (k(xt))
        return a(xt, bn);
      if (at == fe || at == Y || Ct && !Yt) {
        if (rn = $n || Ct ? {} : _(xt), !bn)
          return $n ? c(xt, i(rn, xt)) : u(xt, r(rn, xt));
      } else {
        if (!ft[at])
          return Yt ? xt : {};
        rn = b(xt, at, bn);
      }
    }
    Nn || (Nn = new e());
    var Rt = Nn.get(xt);
    if (Rt)
      return Rt;
    Nn.set(xt, rn), N(xt) ? xt.forEach(function(bt) {
      rn.add(At(bt, qn, An, bt, xt, Nn));
    }) : T(xt) && xt.forEach(function(bt, $t) {
      rn.set($t, At(bt, qn, An, $t, xt, Nn));
    });
    var In = Le ? $n ? p : f : $n ? P : O, Rn = We ? void 0 : In(xt);
    return t(Rn || xt, function(bt, $t) {
      Rn && ($t = bt, bt = xt[$t]), n(rn, $t, At(bt, qn, An, $t, xt, Nn));
    }), rn;
  }
  return BS = At, BS;
}
var qS, C9;
function Uge() {
  if (C9) return qS;
  C9 = 1;
  var e = /* @__PURE__ */ Cq(), t = 4;
  function n(r) {
    return e(r, t);
  }
  return qS = n, qS;
}
var $S, E9;
function jT() {
  if (E9) return $S;
  E9 = 1;
  function e(t) {
    return function() {
      return t;
    };
  }
  return $S = e, $S;
}
var FS, k9;
function Vge() {
  if (k9) return FS;
  k9 = 1;
  function e(t) {
    return function(n, r, i) {
      for (var a = -1, o = Object(n), u = i(n), c = u.length; c--; ) {
        var f = u[t ? c : ++a];
        if (r(o[f], f, o) === !1)
          break;
      }
      return n;
    };
  }
  return FS = e, FS;
}
var US, T9;
function NT() {
  if (T9) return US;
  T9 = 1;
  var e = /* @__PURE__ */ Vge(), t = e();
  return US = t, US;
}
var VS, A9;
function RT() {
  if (A9) return VS;
  A9 = 1;
  var e = /* @__PURE__ */ NT(), t = /* @__PURE__ */ pf();
  function n(r, i) {
    return r && e(r, i, t);
  }
  return VS = n, VS;
}
var HS, j9;
function Hge() {
  if (j9) return HS;
  j9 = 1;
  var e = /* @__PURE__ */ Vu();
  function t(n, r) {
    return function(i, a) {
      if (i == null)
        return i;
      if (!e(i))
        return n(i, a);
      for (var o = i.length, u = r ? o : -1, c = Object(i); (r ? u-- : ++u < o) && a(c[u], u, c) !== !1; )
        ;
      return i;
    };
  }
  return HS = t, HS;
}
var GS, N9;
function Bb() {
  if (N9) return GS;
  N9 = 1;
  var e = /* @__PURE__ */ RT(), t = /* @__PURE__ */ Hge(), n = t(e);
  return GS = n, GS;
}
var KS, R9;
function fh() {
  if (R9) return KS;
  R9 = 1;
  function e(t) {
    return t;
  }
  return KS = e, KS;
}
var YS, M9;
function Eq() {
  if (M9) return YS;
  M9 = 1;
  var e = /* @__PURE__ */ fh();
  function t(n) {
    return typeof n == "function" ? n : e;
  }
  return YS = t, YS;
}
var WS, O9;
function kq() {
  if (O9) return WS;
  O9 = 1;
  var e = /* @__PURE__ */ _T(), t = /* @__PURE__ */ Bb(), n = /* @__PURE__ */ Eq(), r = /* @__PURE__ */ Xr();
  function i(a, o) {
    var u = r(a) ? e : t;
    return u(a, n(o));
  }
  return WS = i, WS;
}
var ZS, D9;
function Tq() {
  return D9 || (D9 = 1, ZS = /* @__PURE__ */ kq()), ZS;
}
var XS, z9;
function Gge() {
  if (z9) return XS;
  z9 = 1;
  var e = /* @__PURE__ */ Bb();
  function t(n, r) {
    var i = [];
    return e(n, function(a, o, u) {
      r(a, o, u) && i.push(a);
    }), i;
  }
  return XS = t, XS;
}
var QS, P9;
function Kge() {
  if (P9) return QS;
  P9 = 1;
  var e = "__lodash_hash_undefined__";
  function t(n) {
    return this.__data__.set(n, e), this;
  }
  return QS = t, QS;
}
var JS, I9;
function Yge() {
  if (I9) return JS;
  I9 = 1;
  function e(t) {
    return this.__data__.has(t);
  }
  return JS = e, JS;
}
var e4, L9;
function Aq() {
  if (L9) return e4;
  L9 = 1;
  var e = /* @__PURE__ */ wT(), t = /* @__PURE__ */ Kge(), n = /* @__PURE__ */ Yge();
  function r(i) {
    var a = -1, o = i == null ? 0 : i.length;
    for (this.__data__ = new e(); ++a < o; )
      this.add(i[a]);
  }
  return r.prototype.add = r.prototype.push = t, r.prototype.has = n, e4 = r, e4;
}
var t4, B9;
function Wge() {
  if (B9) return t4;
  B9 = 1;
  function e(t, n) {
    for (var r = -1, i = t == null ? 0 : t.length; ++r < i; )
      if (n(t[r], r, t))
        return !0;
    return !1;
  }
  return t4 = e, t4;
}
var n4, q9;
function jq() {
  if (q9) return n4;
  q9 = 1;
  function e(t, n) {
    return t.has(n);
  }
  return n4 = e, n4;
}
var r4, $9;
function Nq() {
  if ($9) return r4;
  $9 = 1;
  var e = /* @__PURE__ */ Aq(), t = /* @__PURE__ */ Wge(), n = /* @__PURE__ */ jq(), r = 1, i = 2;
  function a(o, u, c, f, p, g) {
    var x = c & r, b = o.length, _ = u.length;
    if (b != _ && !(x && _ > b))
      return !1;
    var E = g.get(o), k = g.get(u);
    if (E && k)
      return E == u && k == o;
    var T = -1, R = !0, N = c & i ? new e() : void 0;
    for (g.set(o, u), g.set(u, o); ++T < b; ) {
      var O = o[T], P = u[T];
      if (f)
        var z = x ? f(P, O, T, u, o, g) : f(O, P, T, o, u, g);
      if (z !== void 0) {
        if (z)
          continue;
        R = !1;
        break;
      }
      if (N) {
        if (!t(u, function(q, G) {
          if (!n(N, G) && (O === q || p(O, q, c, f, g)))
            return N.push(G);
        })) {
          R = !1;
          break;
        }
      } else if (!(O === P || p(O, P, c, f, g))) {
        R = !1;
        break;
      }
    }
    return g.delete(o), g.delete(u), R;
  }
  return r4 = a, r4;
}
var i4, F9;
function Zge() {
  if (F9) return i4;
  F9 = 1;
  function e(t) {
    var n = -1, r = Array(t.size);
    return t.forEach(function(i, a) {
      r[++n] = [a, i];
    }), r;
  }
  return i4 = e, i4;
}
var s4, U9;
function MT() {
  if (U9) return s4;
  U9 = 1;
  function e(t) {
    var n = -1, r = Array(t.size);
    return t.forEach(function(i) {
      r[++n] = i;
    }), r;
  }
  return s4 = e, s4;
}
var a4, V9;
function Xge() {
  if (V9) return a4;
  V9 = 1;
  var e = /* @__PURE__ */ Em(), t = /* @__PURE__ */ bq(), n = /* @__PURE__ */ Cm(), r = /* @__PURE__ */ Nq(), i = /* @__PURE__ */ Zge(), a = /* @__PURE__ */ MT(), o = 1, u = 2, c = "[object Boolean]", f = "[object Date]", p = "[object Error]", g = "[object Map]", x = "[object Number]", b = "[object RegExp]", _ = "[object Set]", E = "[object String]", k = "[object Symbol]", T = "[object ArrayBuffer]", R = "[object DataView]", N = e ? e.prototype : void 0, O = N ? N.valueOf : void 0;
  function P(z, q, G, Y, W, F, X) {
    switch (G) {
      case R:
        if (z.byteLength != q.byteLength || z.byteOffset != q.byteOffset)
          return !1;
        z = z.buffer, q = q.buffer;
      case T:
        return !(z.byteLength != q.byteLength || !F(new t(z), new t(q)));
      case c:
      case f:
      case x:
        return n(+z, +q);
      case p:
        return z.name == q.name && z.message == q.message;
      case b:
      case E:
        return z == q + "";
      case g:
        var me = i;
      case _:
        var J = Y & o;
        if (me || (me = a), z.size != q.size && !J)
          return !1;
        var le = X.get(z);
        if (le)
          return le == q;
        Y |= u, X.set(z, q);
        var Q = r(me(z), me(q), Y, W, F, X);
        return X.delete(z), Q;
      case k:
        if (O)
          return O.call(z) == O.call(q);
    }
    return !1;
  }
  return a4 = P, a4;
}
var o4, H9;
function Qge() {
  if (H9) return o4;
  H9 = 1;
  var e = /* @__PURE__ */ vq(), t = 1, n = Object.prototype, r = n.hasOwnProperty;
  function i(a, o, u, c, f, p) {
    var g = u & t, x = e(a), b = x.length, _ = e(o), E = _.length;
    if (b != E && !g)
      return !1;
    for (var k = b; k--; ) {
      var T = x[k];
      if (!(g ? T in o : r.call(o, T)))
        return !1;
    }
    var R = p.get(a), N = p.get(o);
    if (R && N)
      return R == o && N == a;
    var O = !0;
    p.set(a, o), p.set(o, a);
    for (var P = g; ++k < b; ) {
      T = x[k];
      var z = a[T], q = o[T];
      if (c)
        var G = g ? c(q, z, T, o, a, p) : c(z, q, T, a, o, p);
      if (!(G === void 0 ? z === q || f(z, q, u, c, p) : G)) {
        O = !1;
        break;
      }
      P || (P = T == "constructor");
    }
    if (O && !P) {
      var Y = a.constructor, W = o.constructor;
      Y != W && "constructor" in a && "constructor" in o && !(typeof Y == "function" && Y instanceof Y && typeof W == "function" && W instanceof W) && (O = !1);
    }
    return p.delete(a), p.delete(o), O;
  }
  return o4 = i, o4;
}
var l4, G9;
function Jge() {
  if (G9) return l4;
  G9 = 1;
  var e = /* @__PURE__ */ Mb(), t = /* @__PURE__ */ Nq(), n = /* @__PURE__ */ Xge(), r = /* @__PURE__ */ Qge(), i = /* @__PURE__ */ Tm(), a = /* @__PURE__ */ Xr(), o = /* @__PURE__ */ km(), u = /* @__PURE__ */ Dy(), c = 1, f = "[object Arguments]", p = "[object Array]", g = "[object Object]", x = Object.prototype, b = x.hasOwnProperty;
  function _(E, k, T, R, N, O) {
    var P = a(E), z = a(k), q = P ? p : i(E), G = z ? p : i(k);
    q = q == f ? g : q, G = G == f ? g : G;
    var Y = q == g, W = G == g, F = q == G;
    if (F && o(E)) {
      if (!o(k))
        return !1;
      P = !0, Y = !1;
    }
    if (F && !Y)
      return O || (O = new e()), P || u(E) ? t(E, k, T, R, N, O) : n(E, k, q, T, R, N, O);
    if (!(T & c)) {
      var X = Y && b.call(E, "__wrapped__"), me = W && b.call(k, "__wrapped__");
      if (X || me) {
        var J = X ? E.value() : E, le = me ? k.value() : k;
        return O || (O = new e()), N(J, le, T, R, O);
      }
    }
    return F ? (O || (O = new e()), r(E, k, T, R, N, O)) : !1;
  }
  return l4 = _, l4;
}
var u4, K9;
function Rq() {
  if (K9) return u4;
  K9 = 1;
  var e = /* @__PURE__ */ Jge(), t = /* @__PURE__ */ Zl();
  function n(r, i, a, o, u) {
    return r === i ? !0 : r == null || i == null || !t(r) && !t(i) ? r !== r && i !== i : e(r, i, a, o, n, u);
  }
  return u4 = n, u4;
}
var c4, Y9;
function e0e() {
  if (Y9) return c4;
  Y9 = 1;
  var e = /* @__PURE__ */ Mb(), t = /* @__PURE__ */ Rq(), n = 1, r = 2;
  function i(a, o, u, c) {
    var f = u.length, p = f, g = !c;
    if (a == null)
      return !p;
    for (a = Object(a); f--; ) {
      var x = u[f];
      if (g && x[2] ? x[1] !== a[x[0]] : !(x[0] in a))
        return !1;
    }
    for (; ++f < p; ) {
      x = u[f];
      var b = x[0], _ = a[b], E = x[1];
      if (g && x[2]) {
        if (_ === void 0 && !(b in a))
          return !1;
      } else {
        var k = new e();
        if (c)
          var T = c(_, E, b, a, o, k);
        if (!(T === void 0 ? t(E, _, n | r, c, k) : T))
          return !1;
      }
    }
    return !0;
  }
  return c4 = i, c4;
}
var f4, W9;
function Mq() {
  if (W9) return f4;
  W9 = 1;
  var e = /* @__PURE__ */ no();
  function t(n) {
    return n === n && !e(n);
  }
  return f4 = t, f4;
}
var d4, Z9;
function t0e() {
  if (Z9) return d4;
  Z9 = 1;
  var e = /* @__PURE__ */ Mq(), t = /* @__PURE__ */ pf();
  function n(r) {
    for (var i = t(r), a = i.length; a--; ) {
      var o = i[a], u = r[o];
      i[a] = [o, u, e(u)];
    }
    return i;
  }
  return d4 = n, d4;
}
var h4, X9;
function Oq() {
  if (X9) return h4;
  X9 = 1;
  function e(t, n) {
    return function(r) {
      return r == null ? !1 : r[t] === n && (n !== void 0 || t in Object(r));
    };
  }
  return h4 = e, h4;
}
var p4, Q9;
function n0e() {
  if (Q9) return p4;
  Q9 = 1;
  var e = /* @__PURE__ */ e0e(), t = /* @__PURE__ */ t0e(), n = /* @__PURE__ */ Oq();
  function r(i) {
    var a = t(i);
    return a.length == 1 && a[0][2] ? n(a[0][0], a[0][1]) : function(o) {
      return o === i || e(o, i, a);
    };
  }
  return p4 = r, p4;
}
var m4, J9;
function Am() {
  if (J9) return m4;
  J9 = 1;
  var e = /* @__PURE__ */ lh(), t = /* @__PURE__ */ Zl(), n = "[object Symbol]";
  function r(i) {
    return typeof i == "symbol" || t(i) && e(i) == n;
  }
  return m4 = r, m4;
}
var g4, eM;
function OT() {
  if (eM) return g4;
  eM = 1;
  var e = /* @__PURE__ */ Xr(), t = /* @__PURE__ */ Am(), n = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, r = /^\w*$/;
  function i(a, o) {
    if (e(a))
      return !1;
    var u = typeof a;
    return u == "number" || u == "symbol" || u == "boolean" || a == null || t(a) ? !0 : r.test(a) || !n.test(a) || o != null && a in Object(o);
  }
  return g4 = i, g4;
}
var y4, tM;
function r0e() {
  if (tM) return y4;
  tM = 1;
  var e = /* @__PURE__ */ wT(), t = "Expected a function";
  function n(r, i) {
    if (typeof r != "function" || i != null && typeof i != "function")
      throw new TypeError(t);
    var a = function() {
      var o = arguments, u = i ? i.apply(this, o) : o[0], c = a.cache;
      if (c.has(u))
        return c.get(u);
      var f = r.apply(this, o);
      return a.cache = c.set(u, f) || c, f;
    };
    return a.cache = new (n.Cache || e)(), a;
  }
  return n.Cache = e, y4 = n, y4;
}
var v4, nM;
function i0e() {
  if (nM) return v4;
  nM = 1;
  var e = /* @__PURE__ */ r0e(), t = 500;
  function n(r) {
    var i = e(r, function(o) {
      return a.size === t && a.clear(), o;
    }), a = i.cache;
    return i;
  }
  return v4 = n, v4;
}
var x4, rM;
function s0e() {
  if (rM) return x4;
  rM = 1;
  var e = /* @__PURE__ */ i0e(), t = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, n = /\\(\\)?/g, r = e(function(i) {
    var a = [];
    return i.charCodeAt(0) === 46 && a.push(""), i.replace(t, function(o, u, c, f) {
      a.push(c ? f.replace(n, "$1") : u || o);
    }), a;
  });
  return x4 = r, x4;
}
var b4, iM;
function qb() {
  if (iM) return b4;
  iM = 1;
  function e(t, n) {
    for (var r = -1, i = t == null ? 0 : t.length, a = Array(i); ++r < i; )
      a[r] = n(t[r], r, t);
    return a;
  }
  return b4 = e, b4;
}
var w4, sM;
function a0e() {
  if (sM) return w4;
  sM = 1;
  var e = /* @__PURE__ */ Em(), t = /* @__PURE__ */ qb(), n = /* @__PURE__ */ Xr(), r = /* @__PURE__ */ Am(), i = e ? e.prototype : void 0, a = i ? i.toString : void 0;
  function o(u) {
    if (typeof u == "string")
      return u;
    if (n(u))
      return t(u, o) + "";
    if (r(u))
      return a ? a.call(u) : "";
    var c = u + "";
    return c == "0" && 1 / u == -1 / 0 ? "-0" : c;
  }
  return w4 = o, w4;
}
var _4, aM;
function Dq() {
  if (aM) return _4;
  aM = 1;
  var e = /* @__PURE__ */ a0e();
  function t(n) {
    return n == null ? "" : e(n);
  }
  return _4 = t, _4;
}
var S4, oM;
function $b() {
  if (oM) return S4;
  oM = 1;
  var e = /* @__PURE__ */ Xr(), t = /* @__PURE__ */ OT(), n = /* @__PURE__ */ s0e(), r = /* @__PURE__ */ Dq();
  function i(a, o) {
    return e(a) ? a : t(a, o) ? [a] : n(r(a));
  }
  return S4 = i, S4;
}
var C4, lM;
function zy() {
  if (lM) return C4;
  lM = 1;
  var e = /* @__PURE__ */ Am();
  function t(n) {
    if (typeof n == "string" || e(n))
      return n;
    var r = n + "";
    return r == "0" && 1 / n == -1 / 0 ? "-0" : r;
  }
  return C4 = t, C4;
}
var E4, uM;
function Fb() {
  if (uM) return E4;
  uM = 1;
  var e = /* @__PURE__ */ $b(), t = /* @__PURE__ */ zy();
  function n(r, i) {
    i = e(i, r);
    for (var a = 0, o = i.length; r != null && a < o; )
      r = r[t(i[a++])];
    return a && a == o ? r : void 0;
  }
  return E4 = n, E4;
}
var k4, cM;
function o0e() {
  if (cM) return k4;
  cM = 1;
  var e = /* @__PURE__ */ Fb();
  function t(n, r, i) {
    var a = n == null ? void 0 : e(n, r);
    return a === void 0 ? i : a;
  }
  return k4 = t, k4;
}
var T4, fM;
function l0e() {
  if (fM) return T4;
  fM = 1;
  function e(t, n) {
    return t != null && n in Object(t);
  }
  return T4 = e, T4;
}
var A4, dM;
function zq() {
  if (dM) return A4;
  dM = 1;
  var e = /* @__PURE__ */ $b(), t = /* @__PURE__ */ Oy(), n = /* @__PURE__ */ Xr(), r = /* @__PURE__ */ zb(), i = /* @__PURE__ */ ST(), a = /* @__PURE__ */ zy();
  function o(u, c, f) {
    c = e(c, u);
    for (var p = -1, g = c.length, x = !1; ++p < g; ) {
      var b = a(c[p]);
      if (!(x = u != null && f(u, b)))
        break;
      u = u[b];
    }
    return x || ++p != g ? x : (g = u == null ? 0 : u.length, !!g && i(g) && r(b, g) && (n(u) || t(u)));
  }
  return A4 = o, A4;
}
var j4, hM;
function Pq() {
  if (hM) return j4;
  hM = 1;
  var e = /* @__PURE__ */ l0e(), t = /* @__PURE__ */ zq();
  function n(r, i) {
    return r != null && t(r, i, e);
  }
  return j4 = n, j4;
}
var N4, pM;
function u0e() {
  if (pM) return N4;
  pM = 1;
  var e = /* @__PURE__ */ Rq(), t = /* @__PURE__ */ o0e(), n = /* @__PURE__ */ Pq(), r = /* @__PURE__ */ OT(), i = /* @__PURE__ */ Mq(), a = /* @__PURE__ */ Oq(), o = /* @__PURE__ */ zy(), u = 1, c = 2;
  function f(p, g) {
    return r(p) && i(g) ? a(o(p), g) : function(x) {
      var b = t(x, p);
      return b === void 0 && b === g ? n(x, p) : e(g, b, u | c);
    };
  }
  return N4 = f, N4;
}
var R4, mM;
function Iq() {
  if (mM) return R4;
  mM = 1;
  function e(t) {
    return function(n) {
      return n == null ? void 0 : n[t];
    };
  }
  return R4 = e, R4;
}
var M4, gM;
function c0e() {
  if (gM) return M4;
  gM = 1;
  var e = /* @__PURE__ */ Fb();
  function t(n) {
    return function(r) {
      return e(r, n);
    };
  }
  return M4 = t, M4;
}
var O4, yM;
function f0e() {
  if (yM) return O4;
  yM = 1;
  var e = /* @__PURE__ */ Iq(), t = /* @__PURE__ */ c0e(), n = /* @__PURE__ */ OT(), r = /* @__PURE__ */ zy();
  function i(a) {
    return n(a) ? e(r(a)) : t(a);
  }
  return O4 = i, O4;
}
var D4, vM;
function Hu() {
  if (vM) return D4;
  vM = 1;
  var e = /* @__PURE__ */ n0e(), t = /* @__PURE__ */ u0e(), n = /* @__PURE__ */ fh(), r = /* @__PURE__ */ Xr(), i = /* @__PURE__ */ f0e();
  function a(o) {
    return typeof o == "function" ? o : o == null ? n : typeof o == "object" ? r(o) ? t(o[0], o[1]) : e(o) : i(o);
  }
  return D4 = a, D4;
}
var z4, xM;
function Lq() {
  if (xM) return z4;
  xM = 1;
  var e = /* @__PURE__ */ pq(), t = /* @__PURE__ */ Gge(), n = /* @__PURE__ */ Hu(), r = /* @__PURE__ */ Xr();
  function i(a, o) {
    var u = r(a) ? e : t;
    return u(a, n(o, 3));
  }
  return z4 = i, z4;
}
var P4, bM;
function d0e() {
  if (bM) return P4;
  bM = 1;
  var e = Object.prototype, t = e.hasOwnProperty;
  function n(r, i) {
    return r != null && t.call(r, i);
  }
  return P4 = n, P4;
}
var I4, wM;
function Bq() {
  if (wM) return I4;
  wM = 1;
  var e = /* @__PURE__ */ d0e(), t = /* @__PURE__ */ zq();
  function n(r, i) {
    return r != null && t(r, i, e);
  }
  return I4 = n, I4;
}
var L4, _M;
function h0e() {
  if (_M) return L4;
  _M = 1;
  var e = /* @__PURE__ */ ET(), t = /* @__PURE__ */ Tm(), n = /* @__PURE__ */ Oy(), r = /* @__PURE__ */ Xr(), i = /* @__PURE__ */ Vu(), a = /* @__PURE__ */ km(), o = /* @__PURE__ */ Ib(), u = /* @__PURE__ */ Dy(), c = "[object Map]", f = "[object Set]", p = Object.prototype, g = p.hasOwnProperty;
  function x(b) {
    if (b == null)
      return !0;
    if (i(b) && (r(b) || typeof b == "string" || typeof b.splice == "function" || a(b) || u(b) || n(b)))
      return !b.length;
    var _ = t(b);
    if (_ == c || _ == f)
      return !b.size;
    if (o(b))
      return !e(b).length;
    for (var E in b)
      if (g.call(b, E))
        return !1;
    return !0;
  }
  return L4 = x, L4;
}
var B4, SM;
function qq() {
  if (SM) return B4;
  SM = 1;
  function e(t) {
    return t === void 0;
  }
  return B4 = e, B4;
}
var q4, CM;
function $q() {
  if (CM) return q4;
  CM = 1;
  var e = /* @__PURE__ */ Bb(), t = /* @__PURE__ */ Vu();
  function n(r, i) {
    var a = -1, o = t(r) ? Array(r.length) : [];
    return e(r, function(u, c, f) {
      o[++a] = i(u, c, f);
    }), o;
  }
  return q4 = n, q4;
}
var $4, EM;
function Fq() {
  if (EM) return $4;
  EM = 1;
  var e = /* @__PURE__ */ qb(), t = /* @__PURE__ */ Hu(), n = /* @__PURE__ */ $q(), r = /* @__PURE__ */ Xr();
  function i(a, o) {
    var u = r(a) ? e : n;
    return u(a, t(o, 3));
  }
  return $4 = i, $4;
}
var F4, kM;
function p0e() {
  if (kM) return F4;
  kM = 1;
  function e(t, n, r, i) {
    var a = -1, o = t == null ? 0 : t.length;
    for (i && o && (r = t[++a]); ++a < o; )
      r = n(r, t[a], a, t);
    return r;
  }
  return F4 = e, F4;
}
var U4, TM;
function m0e() {
  if (TM) return U4;
  TM = 1;
  function e(t, n, r, i, a) {
    return a(t, function(o, u, c) {
      r = i ? (i = !1, o) : n(r, o, u, c);
    }), r;
  }
  return U4 = e, U4;
}
var V4, AM;
function Uq() {
  if (AM) return V4;
  AM = 1;
  var e = /* @__PURE__ */ p0e(), t = /* @__PURE__ */ Bb(), n = /* @__PURE__ */ Hu(), r = /* @__PURE__ */ m0e(), i = /* @__PURE__ */ Xr();
  function a(o, u, c) {
    var f = i(o) ? e : r, p = arguments.length < 3;
    return f(o, n(u, 4), c, p, t);
  }
  return V4 = a, V4;
}
var H4, jM;
function g0e() {
  if (jM) return H4;
  jM = 1;
  var e = /* @__PURE__ */ lh(), t = /* @__PURE__ */ Xr(), n = /* @__PURE__ */ Zl(), r = "[object String]";
  function i(a) {
    return typeof a == "string" || !t(a) && n(a) && e(a) == r;
  }
  return H4 = i, H4;
}
var G4, NM;
function y0e() {
  if (NM) return G4;
  NM = 1;
  var e = /* @__PURE__ */ Iq(), t = e("length");
  return G4 = t, G4;
}
var K4, RM;
function v0e() {
  if (RM) return K4;
  RM = 1;
  var e = "\\ud800-\\udfff", t = "\\u0300-\\u036f", n = "\\ufe20-\\ufe2f", r = "\\u20d0-\\u20ff", i = t + n + r, a = "\\ufe0e\\ufe0f", o = "\\u200d", u = RegExp("[" + o + e + i + a + "]");
  function c(f) {
    return u.test(f);
  }
  return K4 = c, K4;
}
var Y4, MM;
function x0e() {
  if (MM) return Y4;
  MM = 1;
  var e = "\\ud800-\\udfff", t = "\\u0300-\\u036f", n = "\\ufe20-\\ufe2f", r = "\\u20d0-\\u20ff", i = t + n + r, a = "\\ufe0e\\ufe0f", o = "[" + e + "]", u = "[" + i + "]", c = "\\ud83c[\\udffb-\\udfff]", f = "(?:" + u + "|" + c + ")", p = "[^" + e + "]", g = "(?:\\ud83c[\\udde6-\\uddff]){2}", x = "[\\ud800-\\udbff][\\udc00-\\udfff]", b = "\\u200d", _ = f + "?", E = "[" + a + "]?", k = "(?:" + b + "(?:" + [p, g, x].join("|") + ")" + E + _ + ")*", T = E + _ + k, R = "(?:" + [p + u + "?", u, g, x, o].join("|") + ")", N = RegExp(c + "(?=" + c + ")|" + R + T, "g");
  function O(P) {
    for (var z = N.lastIndex = 0; N.test(P); )
      ++z;
    return z;
  }
  return Y4 = O, Y4;
}
var W4, OM;
function b0e() {
  if (OM) return W4;
  OM = 1;
  var e = /* @__PURE__ */ y0e(), t = /* @__PURE__ */ v0e(), n = /* @__PURE__ */ x0e();
  function r(i) {
    return t(i) ? n(i) : e(i);
  }
  return W4 = r, W4;
}
var Z4, DM;
function w0e() {
  if (DM) return Z4;
  DM = 1;
  var e = /* @__PURE__ */ ET(), t = /* @__PURE__ */ Tm(), n = /* @__PURE__ */ Vu(), r = /* @__PURE__ */ g0e(), i = /* @__PURE__ */ b0e(), a = "[object Map]", o = "[object Set]";
  function u(c) {
    if (c == null)
      return 0;
    if (n(c))
      return r(c) ? i(c) : c.length;
    var f = t(c);
    return f == a || f == o ? c.size : e(c).length;
  }
  return Z4 = u, Z4;
}
var X4, zM;
function _0e() {
  if (zM) return X4;
  zM = 1;
  var e = /* @__PURE__ */ _T(), t = /* @__PURE__ */ _q(), n = /* @__PURE__ */ RT(), r = /* @__PURE__ */ Hu(), i = /* @__PURE__ */ Lb(), a = /* @__PURE__ */ Xr(), o = /* @__PURE__ */ km(), u = /* @__PURE__ */ Ry(), c = /* @__PURE__ */ no(), f = /* @__PURE__ */ Dy();
  function p(g, x, b) {
    var _ = a(g), E = _ || o(g) || f(g);
    if (x = r(x, 4), b == null) {
      var k = g && g.constructor;
      E ? b = _ ? new k() : [] : c(g) ? b = u(k) ? t(i(g)) : {} : b = {};
    }
    return (E ? e : n)(g, function(T, R, N) {
      return x(b, T, R, N);
    }), b;
  }
  return X4 = p, X4;
}
var Q4, PM;
function S0e() {
  if (PM) return Q4;
  PM = 1;
  var e = /* @__PURE__ */ Em(), t = /* @__PURE__ */ Oy(), n = /* @__PURE__ */ Xr(), r = e ? e.isConcatSpreadable : void 0;
  function i(a) {
    return n(a) || t(a) || !!(r && a && a[r]);
  }
  return Q4 = i, Q4;
}
var J4, IM;
function DT() {
  if (IM) return J4;
  IM = 1;
  var e = /* @__PURE__ */ TT(), t = /* @__PURE__ */ S0e();
  function n(r, i, a, o, u) {
    var c = -1, f = r.length;
    for (a || (a = t), u || (u = []); ++c < f; ) {
      var p = r[c];
      i > 0 && a(p) ? i > 1 ? n(p, i - 1, a, o, u) : e(u, p) : o || (u[u.length] = p);
    }
    return u;
  }
  return J4 = n, J4;
}
var e3, LM;
function C0e() {
  if (LM) return e3;
  LM = 1;
  function e(t, n, r) {
    switch (r.length) {
      case 0:
        return t.call(n);
      case 1:
        return t.call(n, r[0]);
      case 2:
        return t.call(n, r[0], r[1]);
      case 3:
        return t.call(n, r[0], r[1], r[2]);
    }
    return t.apply(n, r);
  }
  return e3 = e, e3;
}
var t3, BM;
function Vq() {
  if (BM) return t3;
  BM = 1;
  var e = /* @__PURE__ */ C0e(), t = Math.max;
  function n(r, i, a) {
    return i = t(i === void 0 ? r.length - 1 : i, 0), function() {
      for (var o = arguments, u = -1, c = t(o.length - i, 0), f = Array(c); ++u < c; )
        f[u] = o[i + u];
      u = -1;
      for (var p = Array(i + 1); ++u < i; )
        p[u] = o[u];
      return p[i] = a(f), e(r, this, p);
    };
  }
  return t3 = n, t3;
}
var n3, qM;
function E0e() {
  if (qM) return n3;
  qM = 1;
  var e = /* @__PURE__ */ jT(), t = /* @__PURE__ */ uq(), n = /* @__PURE__ */ fh(), r = t ? function(i, a) {
    return t(i, "toString", {
      configurable: !0,
      enumerable: !1,
      value: e(a),
      writable: !0
    });
  } : n;
  return n3 = r, n3;
}
var r3, $M;
function k0e() {
  if ($M) return r3;
  $M = 1;
  var e = 800, t = 16, n = Date.now;
  function r(i) {
    var a = 0, o = 0;
    return function() {
      var u = n(), c = t - (u - o);
      if (o = u, c > 0) {
        if (++a >= e)
          return arguments[0];
      } else
        a = 0;
      return i.apply(void 0, arguments);
    };
  }
  return r3 = r, r3;
}
var i3, FM;
function Hq() {
  if (FM) return i3;
  FM = 1;
  var e = /* @__PURE__ */ E0e(), t = /* @__PURE__ */ k0e(), n = t(e);
  return i3 = n, i3;
}
var s3, UM;
function Ub() {
  if (UM) return s3;
  UM = 1;
  var e = /* @__PURE__ */ fh(), t = /* @__PURE__ */ Vq(), n = /* @__PURE__ */ Hq();
  function r(i, a) {
    return n(t(i, a, e), i + "");
  }
  return s3 = r, s3;
}
var a3, VM;
function Gq() {
  if (VM) return a3;
  VM = 1;
  function e(t, n, r, i) {
    for (var a = t.length, o = r + (i ? 1 : -1); i ? o-- : ++o < a; )
      if (n(t[o], o, t))
        return o;
    return -1;
  }
  return a3 = e, a3;
}
var o3, HM;
function T0e() {
  if (HM) return o3;
  HM = 1;
  function e(t) {
    return t !== t;
  }
  return o3 = e, o3;
}
var l3, GM;
function A0e() {
  if (GM) return l3;
  GM = 1;
  function e(t, n, r) {
    for (var i = r - 1, a = t.length; ++i < a; )
      if (t[i] === n)
        return i;
    return -1;
  }
  return l3 = e, l3;
}
var u3, KM;
function j0e() {
  if (KM) return u3;
  KM = 1;
  var e = /* @__PURE__ */ Gq(), t = /* @__PURE__ */ T0e(), n = /* @__PURE__ */ A0e();
  function r(i, a, o) {
    return a === a ? n(i, a, o) : e(i, t, o);
  }
  return u3 = r, u3;
}
var c3, YM;
function N0e() {
  if (YM) return c3;
  YM = 1;
  var e = /* @__PURE__ */ j0e();
  function t(n, r) {
    var i = n == null ? 0 : n.length;
    return !!i && e(n, r, 0) > -1;
  }
  return c3 = t, c3;
}
var f3, WM;
function R0e() {
  if (WM) return f3;
  WM = 1;
  function e(t, n, r) {
    for (var i = -1, a = t == null ? 0 : t.length; ++i < a; )
      if (r(n, t[i]))
        return !0;
    return !1;
  }
  return f3 = e, f3;
}
var d3, ZM;
function M0e() {
  if (ZM) return d3;
  ZM = 1;
  function e() {
  }
  return d3 = e, d3;
}
var h3, XM;
function O0e() {
  if (XM) return h3;
  XM = 1;
  var e = /* @__PURE__ */ xq(), t = /* @__PURE__ */ M0e(), n = /* @__PURE__ */ MT(), r = 1 / 0, i = e && 1 / n(new e([, -0]))[1] == r ? function(a) {
    return new e(a);
  } : t;
  return h3 = i, h3;
}
var p3, QM;
function D0e() {
  if (QM) return p3;
  QM = 1;
  var e = /* @__PURE__ */ Aq(), t = /* @__PURE__ */ N0e(), n = /* @__PURE__ */ R0e(), r = /* @__PURE__ */ jq(), i = /* @__PURE__ */ O0e(), a = /* @__PURE__ */ MT(), o = 200;
  function u(c, f, p) {
    var g = -1, x = t, b = c.length, _ = !0, E = [], k = E;
    if (p)
      _ = !1, x = n;
    else if (b >= o) {
      var T = f ? null : i(c);
      if (T)
        return a(T);
      _ = !1, x = r, k = new e();
    } else
      k = f ? [] : E;
    e:
      for (; ++g < b; ) {
        var R = c[g], N = f ? f(R) : R;
        if (R = p || R !== 0 ? R : 0, _ && N === N) {
          for (var O = k.length; O--; )
            if (k[O] === N)
              continue e;
          f && k.push(N), E.push(R);
        } else x(k, N, p) || (k !== E && k.push(N), E.push(R));
      }
    return E;
  }
  return p3 = u, p3;
}
var m3, JM;
function Kq() {
  if (JM) return m3;
  JM = 1;
  var e = /* @__PURE__ */ Vu(), t = /* @__PURE__ */ Zl();
  function n(r) {
    return t(r) && e(r);
  }
  return m3 = n, m3;
}
var g3, e7;
function z0e() {
  if (e7) return g3;
  e7 = 1;
  var e = /* @__PURE__ */ DT(), t = /* @__PURE__ */ Ub(), n = /* @__PURE__ */ D0e(), r = /* @__PURE__ */ Kq(), i = t(function(a) {
    return n(e(a, 1, r, !0));
  });
  return g3 = i, g3;
}
var y3, t7;
function P0e() {
  if (t7) return y3;
  t7 = 1;
  var e = /* @__PURE__ */ qb();
  function t(n, r) {
    return e(r, function(i) {
      return n[i];
    });
  }
  return y3 = t, y3;
}
var v3, n7;
function Yq() {
  if (n7) return v3;
  n7 = 1;
  var e = /* @__PURE__ */ P0e(), t = /* @__PURE__ */ pf();
  function n(r) {
    return r == null ? [] : e(r, t(r));
  }
  return v3 = n, v3;
}
var x3, r7;
function ro() {
  if (r7) return x3;
  r7 = 1;
  var e;
  if (typeof xT == "function")
    try {
      e = {
        clone: /* @__PURE__ */ Uge(),
        constant: /* @__PURE__ */ jT(),
        each: /* @__PURE__ */ Tq(),
        filter: /* @__PURE__ */ Lq(),
        has: /* @__PURE__ */ Bq(),
        isArray: /* @__PURE__ */ Xr(),
        isEmpty: /* @__PURE__ */ h0e(),
        isFunction: /* @__PURE__ */ Ry(),
        isUndefined: /* @__PURE__ */ qq(),
        keys: /* @__PURE__ */ pf(),
        map: /* @__PURE__ */ Fq(),
        reduce: /* @__PURE__ */ Uq(),
        size: /* @__PURE__ */ w0e(),
        transform: /* @__PURE__ */ _0e(),
        union: /* @__PURE__ */ z0e(),
        values: /* @__PURE__ */ Yq()
      };
    } catch {
    }
  return e || (e = window._), x3 = e, x3;
}
var b3, i7;
function zT() {
  if (i7) return b3;
  i7 = 1;
  var e = /* @__PURE__ */ ro();
  b3 = i;
  var t = "\0", n = "\0", r = "";
  function i(p) {
    this._isDirected = e.has(p, "directed") ? p.directed : !0, this._isMultigraph = e.has(p, "multigraph") ? p.multigraph : !1, this._isCompound = e.has(p, "compound") ? p.compound : !1, this._label = void 0, this._defaultNodeLabelFn = e.constant(void 0), this._defaultEdgeLabelFn = e.constant(void 0), this._nodes = {}, this._isCompound && (this._parent = {}, this._children = {}, this._children[n] = {}), this._in = {}, this._preds = {}, this._out = {}, this._sucs = {}, this._edgeObjs = {}, this._edgeLabels = {};
  }
  i.prototype._nodeCount = 0, i.prototype._edgeCount = 0, i.prototype.isDirected = function() {
    return this._isDirected;
  }, i.prototype.isMultigraph = function() {
    return this._isMultigraph;
  }, i.prototype.isCompound = function() {
    return this._isCompound;
  }, i.prototype.setGraph = function(p) {
    return this._label = p, this;
  }, i.prototype.graph = function() {
    return this._label;
  }, i.prototype.setDefaultNodeLabel = function(p) {
    return e.isFunction(p) || (p = e.constant(p)), this._defaultNodeLabelFn = p, this;
  }, i.prototype.nodeCount = function() {
    return this._nodeCount;
  }, i.prototype.nodes = function() {
    return e.keys(this._nodes);
  }, i.prototype.sources = function() {
    var p = this;
    return e.filter(this.nodes(), function(g) {
      return e.isEmpty(p._in[g]);
    });
  }, i.prototype.sinks = function() {
    var p = this;
    return e.filter(this.nodes(), function(g) {
      return e.isEmpty(p._out[g]);
    });
  }, i.prototype.setNodes = function(p, g) {
    var x = arguments, b = this;
    return e.each(p, function(_) {
      x.length > 1 ? b.setNode(_, g) : b.setNode(_);
    }), this;
  }, i.prototype.setNode = function(p, g) {
    return e.has(this._nodes, p) ? (arguments.length > 1 && (this._nodes[p] = g), this) : (this._nodes[p] = arguments.length > 1 ? g : this._defaultNodeLabelFn(p), this._isCompound && (this._parent[p] = n, this._children[p] = {}, this._children[n][p] = !0), this._in[p] = {}, this._preds[p] = {}, this._out[p] = {}, this._sucs[p] = {}, ++this._nodeCount, this);
  }, i.prototype.node = function(p) {
    return this._nodes[p];
  }, i.prototype.hasNode = function(p) {
    return e.has(this._nodes, p);
  }, i.prototype.removeNode = function(p) {
    var g = this;
    if (e.has(this._nodes, p)) {
      var x = function(b) {
        g.removeEdge(g._edgeObjs[b]);
      };
      delete this._nodes[p], this._isCompound && (this._removeFromParentsChildList(p), delete this._parent[p], e.each(this.children(p), function(b) {
        g.setParent(b);
      }), delete this._children[p]), e.each(e.keys(this._in[p]), x), delete this._in[p], delete this._preds[p], e.each(e.keys(this._out[p]), x), delete this._out[p], delete this._sucs[p], --this._nodeCount;
    }
    return this;
  }, i.prototype.setParent = function(p, g) {
    if (!this._isCompound)
      throw new Error("Cannot set parent in a non-compound graph");
    if (e.isUndefined(g))
      g = n;
    else {
      g += "";
      for (var x = g; !e.isUndefined(x); x = this.parent(x))
        if (x === p)
          throw new Error("Setting " + g + " as parent of " + p + " would create a cycle");
      this.setNode(g);
    }
    return this.setNode(p), this._removeFromParentsChildList(p), this._parent[p] = g, this._children[g][p] = !0, this;
  }, i.prototype._removeFromParentsChildList = function(p) {
    delete this._children[this._parent[p]][p];
  }, i.prototype.parent = function(p) {
    if (this._isCompound) {
      var g = this._parent[p];
      if (g !== n)
        return g;
    }
  }, i.prototype.children = function(p) {
    if (e.isUndefined(p) && (p = n), this._isCompound) {
      var g = this._children[p];
      if (g)
        return e.keys(g);
    } else {
      if (p === n)
        return this.nodes();
      if (this.hasNode(p))
        return [];
    }
  }, i.prototype.predecessors = function(p) {
    var g = this._preds[p];
    if (g)
      return e.keys(g);
  }, i.prototype.successors = function(p) {
    var g = this._sucs[p];
    if (g)
      return e.keys(g);
  }, i.prototype.neighbors = function(p) {
    var g = this.predecessors(p);
    if (g)
      return e.union(g, this.successors(p));
  }, i.prototype.isLeaf = function(p) {
    var g;
    return this.isDirected() ? g = this.successors(p) : g = this.neighbors(p), g.length === 0;
  }, i.prototype.filterNodes = function(p) {
    var g = new this.constructor({
      directed: this._isDirected,
      multigraph: this._isMultigraph,
      compound: this._isCompound
    });
    g.setGraph(this.graph());
    var x = this;
    e.each(this._nodes, function(E, k) {
      p(k) && g.setNode(k, E);
    }), e.each(this._edgeObjs, function(E) {
      g.hasNode(E.v) && g.hasNode(E.w) && g.setEdge(E, x.edge(E));
    });
    var b = {};
    function _(E) {
      var k = x.parent(E);
      return k === void 0 || g.hasNode(k) ? (b[E] = k, k) : k in b ? b[k] : _(k);
    }
    return this._isCompound && e.each(g.nodes(), function(E) {
      g.setParent(E, _(E));
    }), g;
  }, i.prototype.setDefaultEdgeLabel = function(p) {
    return e.isFunction(p) || (p = e.constant(p)), this._defaultEdgeLabelFn = p, this;
  }, i.prototype.edgeCount = function() {
    return this._edgeCount;
  }, i.prototype.edges = function() {
    return e.values(this._edgeObjs);
  }, i.prototype.setPath = function(p, g) {
    var x = this, b = arguments;
    return e.reduce(p, function(_, E) {
      return b.length > 1 ? x.setEdge(_, E, g) : x.setEdge(_, E), E;
    }), this;
  }, i.prototype.setEdge = function() {
    var p, g, x, b, _ = !1, E = arguments[0];
    typeof E == "object" && E !== null && "v" in E ? (p = E.v, g = E.w, x = E.name, arguments.length === 2 && (b = arguments[1], _ = !0)) : (p = E, g = arguments[1], x = arguments[3], arguments.length > 2 && (b = arguments[2], _ = !0)), p = "" + p, g = "" + g, e.isUndefined(x) || (x = "" + x);
    var k = u(this._isDirected, p, g, x);
    if (e.has(this._edgeLabels, k))
      return _ && (this._edgeLabels[k] = b), this;
    if (!e.isUndefined(x) && !this._isMultigraph)
      throw new Error("Cannot set a named edge when isMultigraph = false");
    this.setNode(p), this.setNode(g), this._edgeLabels[k] = _ ? b : this._defaultEdgeLabelFn(p, g, x);
    var T = c(this._isDirected, p, g, x);
    return p = T.v, g = T.w, Object.freeze(T), this._edgeObjs[k] = T, a(this._preds[g], p), a(this._sucs[p], g), this._in[g][k] = T, this._out[p][k] = T, this._edgeCount++, this;
  }, i.prototype.edge = function(p, g, x) {
    var b = arguments.length === 1 ? f(this._isDirected, arguments[0]) : u(this._isDirected, p, g, x);
    return this._edgeLabels[b];
  }, i.prototype.hasEdge = function(p, g, x) {
    var b = arguments.length === 1 ? f(this._isDirected, arguments[0]) : u(this._isDirected, p, g, x);
    return e.has(this._edgeLabels, b);
  }, i.prototype.removeEdge = function(p, g, x) {
    var b = arguments.length === 1 ? f(this._isDirected, arguments[0]) : u(this._isDirected, p, g, x), _ = this._edgeObjs[b];
    return _ && (p = _.v, g = _.w, delete this._edgeLabels[b], delete this._edgeObjs[b], o(this._preds[g], p), o(this._sucs[p], g), delete this._in[g][b], delete this._out[p][b], this._edgeCount--), this;
  }, i.prototype.inEdges = function(p, g) {
    var x = this._in[p];
    if (x) {
      var b = e.values(x);
      return g ? e.filter(b, function(_) {
        return _.v === g;
      }) : b;
    }
  }, i.prototype.outEdges = function(p, g) {
    var x = this._out[p];
    if (x) {
      var b = e.values(x);
      return g ? e.filter(b, function(_) {
        return _.w === g;
      }) : b;
    }
  }, i.prototype.nodeEdges = function(p, g) {
    var x = this.inEdges(p, g);
    if (x)
      return x.concat(this.outEdges(p, g));
  };
  function a(p, g) {
    p[g] ? p[g]++ : p[g] = 1;
  }
  function o(p, g) {
    --p[g] || delete p[g];
  }
  function u(p, g, x, b) {
    var _ = "" + g, E = "" + x;
    if (!p && _ > E) {
      var k = _;
      _ = E, E = k;
    }
    return _ + r + E + r + (e.isUndefined(b) ? t : b);
  }
  function c(p, g, x, b) {
    var _ = "" + g, E = "" + x;
    if (!p && _ > E) {
      var k = _;
      _ = E, E = k;
    }
    var T = { v: _, w: E };
    return b && (T.name = b), T;
  }
  function f(p, g) {
    return u(p, g.v, g.w, g.name);
  }
  return b3;
}
var w3, s7;
function I0e() {
  return s7 || (s7 = 1, w3 = "2.1.8"), w3;
}
var _3, a7;
function L0e() {
  return a7 || (a7 = 1, _3 = {
    Graph: /* @__PURE__ */ zT(),
    version: /* @__PURE__ */ I0e()
  }), _3;
}
var S3, o7;
function B0e() {
  if (o7) return S3;
  o7 = 1;
  var e = /* @__PURE__ */ ro(), t = /* @__PURE__ */ zT();
  S3 = {
    write: n,
    read: a
  };
  function n(o) {
    var u = {
      options: {
        directed: o.isDirected(),
        multigraph: o.isMultigraph(),
        compound: o.isCompound()
      },
      nodes: r(o),
      edges: i(o)
    };
    return e.isUndefined(o.graph()) || (u.value = e.clone(o.graph())), u;
  }
  function r(o) {
    return e.map(o.nodes(), function(u) {
      var c = o.node(u), f = o.parent(u), p = { v: u };
      return e.isUndefined(c) || (p.value = c), e.isUndefined(f) || (p.parent = f), p;
    });
  }
  function i(o) {
    return e.map(o.edges(), function(u) {
      var c = o.edge(u), f = { v: u.v, w: u.w };
      return e.isUndefined(u.name) || (f.name = u.name), e.isUndefined(c) || (f.value = c), f;
    });
  }
  function a(o) {
    var u = new t(o.options).setGraph(o.value);
    return e.each(o.nodes, function(c) {
      u.setNode(c.v, c.value), c.parent && u.setParent(c.v, c.parent);
    }), e.each(o.edges, function(c) {
      u.setEdge({ v: c.v, w: c.w, name: c.name }, c.value);
    }), u;
  }
  return S3;
}
var C3, l7;
function q0e() {
  if (l7) return C3;
  l7 = 1;
  var e = /* @__PURE__ */ ro();
  C3 = t;
  function t(n) {
    var r = {}, i = [], a;
    function o(u) {
      e.has(r, u) || (r[u] = !0, a.push(u), e.each(n.successors(u), o), e.each(n.predecessors(u), o));
    }
    return e.each(n.nodes(), function(u) {
      a = [], o(u), a.length && i.push(a);
    }), i;
  }
  return C3;
}
var E3, u7;
function Wq() {
  if (u7) return E3;
  u7 = 1;
  var e = /* @__PURE__ */ ro();
  E3 = t;
  function t() {
    this._arr = [], this._keyIndices = {};
  }
  return t.prototype.size = function() {
    return this._arr.length;
  }, t.prototype.keys = function() {
    return this._arr.map(function(n) {
      return n.key;
    });
  }, t.prototype.has = function(n) {
    return e.has(this._keyIndices, n);
  }, t.prototype.priority = function(n) {
    var r = this._keyIndices[n];
    if (r !== void 0)
      return this._arr[r].priority;
  }, t.prototype.min = function() {
    if (this.size() === 0)
      throw new Error("Queue underflow");
    return this._arr[0].key;
  }, t.prototype.add = function(n, r) {
    var i = this._keyIndices;
    if (n = String(n), !e.has(i, n)) {
      var a = this._arr, o = a.length;
      return i[n] = o, a.push({ key: n, priority: r }), this._decrease(o), !0;
    }
    return !1;
  }, t.prototype.removeMin = function() {
    this._swap(0, this._arr.length - 1);
    var n = this._arr.pop();
    return delete this._keyIndices[n.key], this._heapify(0), n.key;
  }, t.prototype.decrease = function(n, r) {
    var i = this._keyIndices[n];
    if (r > this._arr[i].priority)
      throw new Error("New priority is greater than current priority. Key: " + n + " Old: " + this._arr[i].priority + " New: " + r);
    this._arr[i].priority = r, this._decrease(i);
  }, t.prototype._heapify = function(n) {
    var r = this._arr, i = 2 * n, a = i + 1, o = n;
    i < r.length && (o = r[i].priority < r[o].priority ? i : o, a < r.length && (o = r[a].priority < r[o].priority ? a : o), o !== n && (this._swap(n, o), this._heapify(o)));
  }, t.prototype._decrease = function(n) {
    for (var r = this._arr, i = r[n].priority, a; n !== 0 && (a = n >> 1, !(r[a].priority < i)); )
      this._swap(n, a), n = a;
  }, t.prototype._swap = function(n, r) {
    var i = this._arr, a = this._keyIndices, o = i[n], u = i[r];
    i[n] = u, i[r] = o, a[u.key] = n, a[o.key] = r;
  }, E3;
}
var k3, c7;
function Zq() {
  if (c7) return k3;
  c7 = 1;
  var e = /* @__PURE__ */ ro(), t = /* @__PURE__ */ Wq();
  k3 = r;
  var n = e.constant(1);
  function r(a, o, u, c) {
    return i(
      a,
      String(o),
      u || n,
      c || function(f) {
        return a.outEdges(f);
      }
    );
  }
  function i(a, o, u, c) {
    var f = {}, p = new t(), g, x, b = function(_) {
      var E = _.v !== g ? _.v : _.w, k = f[E], T = u(_), R = x.distance + T;
      if (T < 0)
        throw new Error("dijkstra does not allow negative edge weights. Bad edge: " + _ + " Weight: " + T);
      R < k.distance && (k.distance = R, k.predecessor = g, p.decrease(E, R));
    };
    for (a.nodes().forEach(function(_) {
      var E = _ === o ? 0 : Number.POSITIVE_INFINITY;
      f[_] = { distance: E }, p.add(_, E);
    }); p.size() > 0 && (g = p.removeMin(), x = f[g], x.distance !== Number.POSITIVE_INFINITY); )
      c(g).forEach(b);
    return f;
  }
  return k3;
}
var T3, f7;
function $0e() {
  if (f7) return T3;
  f7 = 1;
  var e = /* @__PURE__ */ Zq(), t = /* @__PURE__ */ ro();
  T3 = n;
  function n(r, i, a) {
    return t.transform(r.nodes(), function(o, u) {
      o[u] = e(r, u, i, a);
    }, {});
  }
  return T3;
}
var A3, d7;
function Xq() {
  if (d7) return A3;
  d7 = 1;
  var e = /* @__PURE__ */ ro();
  A3 = t;
  function t(n) {
    var r = 0, i = [], a = {}, o = [];
    function u(c) {
      var f = a[c] = {
        onStack: !0,
        lowlink: r,
        index: r++
      };
      if (i.push(c), n.successors(c).forEach(function(x) {
        e.has(a, x) ? a[x].onStack && (f.lowlink = Math.min(f.lowlink, a[x].index)) : (u(x), f.lowlink = Math.min(f.lowlink, a[x].lowlink));
      }), f.lowlink === f.index) {
        var p = [], g;
        do
          g = i.pop(), a[g].onStack = !1, p.push(g);
        while (c !== g);
        o.push(p);
      }
    }
    return n.nodes().forEach(function(c) {
      e.has(a, c) || u(c);
    }), o;
  }
  return A3;
}
var j3, h7;
function F0e() {
  if (h7) return j3;
  h7 = 1;
  var e = /* @__PURE__ */ ro(), t = /* @__PURE__ */ Xq();
  j3 = n;
  function n(r) {
    return e.filter(t(r), function(i) {
      return i.length > 1 || i.length === 1 && r.hasEdge(i[0], i[0]);
    });
  }
  return j3;
}
var N3, p7;
function U0e() {
  if (p7) return N3;
  p7 = 1;
  var e = /* @__PURE__ */ ro();
  N3 = n;
  var t = e.constant(1);
  function n(i, a, o) {
    return r(
      i,
      a || t,
      o || function(u) {
        return i.outEdges(u);
      }
    );
  }
  function r(i, a, o) {
    var u = {}, c = i.nodes();
    return c.forEach(function(f) {
      u[f] = {}, u[f][f] = { distance: 0 }, c.forEach(function(p) {
        f !== p && (u[f][p] = { distance: Number.POSITIVE_INFINITY });
      }), o(f).forEach(function(p) {
        var g = p.v === f ? p.w : p.v, x = a(p);
        u[f][g] = { distance: x, predecessor: f };
      });
    }), c.forEach(function(f) {
      var p = u[f];
      c.forEach(function(g) {
        var x = u[g];
        c.forEach(function(b) {
          var _ = x[f], E = p[b], k = x[b], T = _.distance + E.distance;
          T < k.distance && (k.distance = T, k.predecessor = E.predecessor);
        });
      });
    }), u;
  }
  return N3;
}
var R3, m7;
function Qq() {
  if (m7) return R3;
  m7 = 1;
  var e = /* @__PURE__ */ ro();
  R3 = t, t.CycleException = n;
  function t(r) {
    var i = {}, a = {}, o = [];
    function u(c) {
      if (e.has(a, c))
        throw new n();
      e.has(i, c) || (a[c] = !0, i[c] = !0, e.each(r.predecessors(c), u), delete a[c], o.push(c));
    }
    if (e.each(r.sinks(), u), e.size(i) !== r.nodeCount())
      throw new n();
    return o;
  }
  function n() {
  }
  return n.prototype = new Error(), R3;
}
var M3, g7;
function V0e() {
  if (g7) return M3;
  g7 = 1;
  var e = /* @__PURE__ */ Qq();
  M3 = t;
  function t(n) {
    try {
      e(n);
    } catch (r) {
      if (r instanceof e.CycleException)
        return !1;
      throw r;
    }
    return !0;
  }
  return M3;
}
var O3, y7;
function Jq() {
  if (y7) return O3;
  y7 = 1;
  var e = /* @__PURE__ */ ro();
  O3 = t;
  function t(r, i, a) {
    e.isArray(i) || (i = [i]);
    var o = (r.isDirected() ? r.successors : r.neighbors).bind(r), u = [], c = {};
    return e.each(i, function(f) {
      if (!r.hasNode(f))
        throw new Error("Graph does not have node: " + f);
      n(r, f, a === "post", c, o, u);
    }), u;
  }
  function n(r, i, a, o, u, c) {
    e.has(o, i) || (o[i] = !0, a || c.push(i), e.each(u(i), function(f) {
      n(r, f, a, o, u, c);
    }), a && c.push(i));
  }
  return O3;
}
var D3, v7;
function H0e() {
  if (v7) return D3;
  v7 = 1;
  var e = /* @__PURE__ */ Jq();
  D3 = t;
  function t(n, r) {
    return e(n, r, "post");
  }
  return D3;
}
var z3, x7;
function G0e() {
  if (x7) return z3;
  x7 = 1;
  var e = /* @__PURE__ */ Jq();
  z3 = t;
  function t(n, r) {
    return e(n, r, "pre");
  }
  return z3;
}
var P3, b7;
function K0e() {
  if (b7) return P3;
  b7 = 1;
  var e = /* @__PURE__ */ ro(), t = /* @__PURE__ */ zT(), n = /* @__PURE__ */ Wq();
  P3 = r;
  function r(i, a) {
    var o = new t(), u = {}, c = new n(), f;
    function p(x) {
      var b = x.v === f ? x.w : x.v, _ = c.priority(b);
      if (_ !== void 0) {
        var E = a(x);
        E < _ && (u[b] = f, c.decrease(b, E));
      }
    }
    if (i.nodeCount() === 0)
      return o;
    e.each(i.nodes(), function(x) {
      c.add(x, Number.POSITIVE_INFINITY), o.setNode(x);
    }), c.decrease(i.nodes()[0], 0);
    for (var g = !1; c.size() > 0; ) {
      if (f = c.removeMin(), e.has(u, f))
        o.setEdge(f, u[f]);
      else {
        if (g)
          throw new Error("Input graph is not connected: " + i);
        g = !0;
      }
      i.nodeEdges(f).forEach(p);
    }
    return o;
  }
  return P3;
}
var I3, w7;
function Y0e() {
  return w7 || (w7 = 1, I3 = {
    components: /* @__PURE__ */ q0e(),
    dijkstra: /* @__PURE__ */ Zq(),
    dijkstraAll: /* @__PURE__ */ $0e(),
    findCycles: /* @__PURE__ */ F0e(),
    floydWarshall: /* @__PURE__ */ U0e(),
    isAcyclic: /* @__PURE__ */ V0e(),
    postorder: /* @__PURE__ */ H0e(),
    preorder: /* @__PURE__ */ G0e(),
    prim: /* @__PURE__ */ K0e(),
    tarjan: /* @__PURE__ */ Xq(),
    topsort: /* @__PURE__ */ Qq()
  }), I3;
}
var L3, _7;
function W0e() {
  if (_7) return L3;
  _7 = 1;
  var e = /* @__PURE__ */ L0e();
  return L3 = {
    Graph: e.Graph,
    json: /* @__PURE__ */ B0e(),
    alg: /* @__PURE__ */ Y0e(),
    version: e.version
  }, L3;
}
var B3, S7;
function Ho() {
  if (S7) return B3;
  S7 = 1;
  var e;
  if (typeof xT == "function")
    try {
      e = /* @__PURE__ */ W0e();
    } catch {
    }
  return e || (e = window.graphlib), B3 = e, B3;
}
var q3, C7;
function Z0e() {
  if (C7) return q3;
  C7 = 1;
  var e = /* @__PURE__ */ Cq(), t = 1, n = 4;
  function r(i) {
    return e(i, t | n);
  }
  return q3 = r, q3;
}
var $3, E7;
function Vb() {
  if (E7) return $3;
  E7 = 1;
  var e = /* @__PURE__ */ Cm(), t = /* @__PURE__ */ Vu(), n = /* @__PURE__ */ zb(), r = /* @__PURE__ */ no();
  function i(a, o, u) {
    if (!r(u))
      return !1;
    var c = typeof o;
    return (c == "number" ? t(u) && n(o, u.length) : c == "string" && o in u) ? e(u[o], a) : !1;
  }
  return $3 = i, $3;
}
var F3, k7;
function X0e() {
  if (k7) return F3;
  k7 = 1;
  var e = /* @__PURE__ */ Ub(), t = /* @__PURE__ */ Cm(), n = /* @__PURE__ */ Vb(), r = /* @__PURE__ */ ch(), i = Object.prototype, a = i.hasOwnProperty, o = e(function(u, c) {
    u = Object(u);
    var f = -1, p = c.length, g = p > 2 ? c[2] : void 0;
    for (g && n(c[0], c[1], g) && (p = 1); ++f < p; )
      for (var x = c[f], b = r(x), _ = -1, E = b.length; ++_ < E; ) {
        var k = b[_], T = u[k];
        (T === void 0 || t(T, i[k]) && !a.call(u, k)) && (u[k] = x[k]);
      }
    return u;
  });
  return F3 = o, F3;
}
var U3, T7;
function Q0e() {
  if (T7) return U3;
  T7 = 1;
  var e = /* @__PURE__ */ Hu(), t = /* @__PURE__ */ Vu(), n = /* @__PURE__ */ pf();
  function r(i) {
    return function(a, o, u) {
      var c = Object(a);
      if (!t(a)) {
        var f = e(o, 3);
        a = n(a), o = function(g) {
          return f(c[g], g, c);
        };
      }
      var p = i(a, o, u);
      return p > -1 ? c[f ? a[p] : p] : void 0;
    };
  }
  return U3 = r, U3;
}
var V3, A7;
function J0e() {
  if (A7) return V3;
  A7 = 1;
  var e = /\s/;
  function t(n) {
    for (var r = n.length; r-- && e.test(n.charAt(r)); )
      ;
    return r;
  }
  return V3 = t, V3;
}
var H3, j7;
function eye() {
  if (j7) return H3;
  j7 = 1;
  var e = /* @__PURE__ */ J0e(), t = /^\s+/;
  function n(r) {
    return r && r.slice(0, e(r) + 1).replace(t, "");
  }
  return H3 = n, H3;
}
var G3, N7;
function tye() {
  if (N7) return G3;
  N7 = 1;
  var e = /* @__PURE__ */ eye(), t = /* @__PURE__ */ no(), n = /* @__PURE__ */ Am(), r = NaN, i = /^[-+]0x[0-9a-f]+$/i, a = /^0b[01]+$/i, o = /^0o[0-7]+$/i, u = parseInt;
  function c(f) {
    if (typeof f == "number")
      return f;
    if (n(f))
      return r;
    if (t(f)) {
      var p = typeof f.valueOf == "function" ? f.valueOf() : f;
      f = t(p) ? p + "" : p;
    }
    if (typeof f != "string")
      return f === 0 ? f : +f;
    f = e(f);
    var g = a.test(f);
    return g || o.test(f) ? u(f.slice(2), g ? 2 : 8) : i.test(f) ? r : +f;
  }
  return G3 = c, G3;
}
var K3, R7;
function e$() {
  if (R7) return K3;
  R7 = 1;
  var e = /* @__PURE__ */ tye(), t = 1 / 0, n = 17976931348623157e292;
  function r(i) {
    if (!i)
      return i === 0 ? i : 0;
    if (i = e(i), i === t || i === -t) {
      var a = i < 0 ? -1 : 1;
      return a * n;
    }
    return i === i ? i : 0;
  }
  return K3 = r, K3;
}
var Y3, M7;
function nye() {
  if (M7) return Y3;
  M7 = 1;
  var e = /* @__PURE__ */ e$();
  function t(n) {
    var r = e(n), i = r % 1;
    return r === r ? i ? r - i : r : 0;
  }
  return Y3 = t, Y3;
}
var W3, O7;
function rye() {
  if (O7) return W3;
  O7 = 1;
  var e = /* @__PURE__ */ Gq(), t = /* @__PURE__ */ Hu(), n = /* @__PURE__ */ nye(), r = Math.max;
  function i(a, o, u) {
    var c = a == null ? 0 : a.length;
    if (!c)
      return -1;
    var f = u == null ? 0 : n(u);
    return f < 0 && (f = r(c + f, 0)), e(a, t(o, 3), f);
  }
  return W3 = i, W3;
}
var Z3, D7;
function iye() {
  if (D7) return Z3;
  D7 = 1;
  var e = /* @__PURE__ */ Q0e(), t = /* @__PURE__ */ rye(), n = e(t);
  return Z3 = n, Z3;
}
var X3, z7;
function t$() {
  if (z7) return X3;
  z7 = 1;
  var e = /* @__PURE__ */ DT();
  function t(n) {
    var r = n == null ? 0 : n.length;
    return r ? e(n, 1) : [];
  }
  return X3 = t, X3;
}
var Q3, P7;
function sye() {
  if (P7) return Q3;
  P7 = 1;
  var e = /* @__PURE__ */ NT(), t = /* @__PURE__ */ Eq(), n = /* @__PURE__ */ ch();
  function r(i, a) {
    return i == null ? i : e(i, t(a), n);
  }
  return Q3 = r, Q3;
}
var J3, I7;
function aye() {
  if (I7) return J3;
  I7 = 1;
  function e(t) {
    var n = t == null ? 0 : t.length;
    return n ? t[n - 1] : void 0;
  }
  return J3 = e, J3;
}
var eC, L7;
function oye() {
  if (L7) return eC;
  L7 = 1;
  var e = /* @__PURE__ */ Ob(), t = /* @__PURE__ */ RT(), n = /* @__PURE__ */ Hu();
  function r(i, a) {
    var o = {};
    return a = n(a, 3), t(i, function(u, c, f) {
      e(o, c, a(u, c, f));
    }), o;
  }
  return eC = r, eC;
}
var tC, B7;
function PT() {
  if (B7) return tC;
  B7 = 1;
  var e = /* @__PURE__ */ Am();
  function t(n, r, i) {
    for (var a = -1, o = n.length; ++a < o; ) {
      var u = n[a], c = r(u);
      if (c != null && (f === void 0 ? c === c && !e(c) : i(c, f)))
        var f = c, p = u;
    }
    return p;
  }
  return tC = t, tC;
}
var nC, q7;
function lye() {
  if (q7) return nC;
  q7 = 1;
  function e(t, n) {
    return t > n;
  }
  return nC = e, nC;
}
var rC, $7;
function uye() {
  if ($7) return rC;
  $7 = 1;
  var e = /* @__PURE__ */ PT(), t = /* @__PURE__ */ lye(), n = /* @__PURE__ */ fh();
  function r(i) {
    return i && i.length ? e(i, n, t) : void 0;
  }
  return rC = r, rC;
}
var iC, F7;
function n$() {
  if (F7) return iC;
  F7 = 1;
  var e = /* @__PURE__ */ Ob(), t = /* @__PURE__ */ Cm();
  function n(r, i, a) {
    (a !== void 0 && !t(r[i], a) || a === void 0 && !(i in r)) && e(r, i, a);
  }
  return iC = n, iC;
}
var sC, U7;
function cye() {
  if (U7) return sC;
  U7 = 1;
  var e = /* @__PURE__ */ lh(), t = /* @__PURE__ */ Lb(), n = /* @__PURE__ */ Zl(), r = "[object Object]", i = Function.prototype, a = Object.prototype, o = i.toString, u = a.hasOwnProperty, c = o.call(Object);
  function f(p) {
    if (!n(p) || e(p) != r)
      return !1;
    var g = t(p);
    if (g === null)
      return !0;
    var x = u.call(g, "constructor") && g.constructor;
    return typeof x == "function" && x instanceof x && o.call(x) == c;
  }
  return sC = f, sC;
}
var aC, V7;
function r$() {
  if (V7) return aC;
  V7 = 1;
  function e(t, n) {
    if (!(n === "constructor" && typeof t[n] == "function") && n != "__proto__")
      return t[n];
  }
  return aC = e, aC;
}
var oC, H7;
function fye() {
  if (H7) return oC;
  H7 = 1;
  var e = /* @__PURE__ */ My(), t = /* @__PURE__ */ ch();
  function n(r) {
    return e(r, t(r));
  }
  return oC = n, oC;
}
var lC, G7;
function dye() {
  if (G7) return lC;
  G7 = 1;
  var e = /* @__PURE__ */ n$(), t = /* @__PURE__ */ dq(), n = /* @__PURE__ */ wq(), r = /* @__PURE__ */ hq(), i = /* @__PURE__ */ Sq(), a = /* @__PURE__ */ Oy(), o = /* @__PURE__ */ Xr(), u = /* @__PURE__ */ Kq(), c = /* @__PURE__ */ km(), f = /* @__PURE__ */ Ry(), p = /* @__PURE__ */ no(), g = /* @__PURE__ */ cye(), x = /* @__PURE__ */ Dy(), b = /* @__PURE__ */ r$(), _ = /* @__PURE__ */ fye();
  function E(k, T, R, N, O, P, z) {
    var q = b(k, R), G = b(T, R), Y = z.get(G);
    if (Y) {
      e(k, R, Y);
      return;
    }
    var W = P ? P(q, G, R + "", k, T, z) : void 0, F = W === void 0;
    if (F) {
      var X = o(G), me = !X && c(G), J = !X && !me && x(G);
      W = G, X || me || J ? o(q) ? W = q : u(q) ? W = r(q) : me ? (F = !1, W = t(G, !0)) : J ? (F = !1, W = n(G, !0)) : W = [] : g(G) || a(G) ? (W = q, a(q) ? W = _(q) : (!p(q) || f(q)) && (W = i(G))) : F = !1;
    }
    F && (z.set(G, W), O(W, G, N, P, z), z.delete(G)), e(k, R, W);
  }
  return lC = E, lC;
}
var uC, K7;
function hye() {
  if (K7) return uC;
  K7 = 1;
  var e = /* @__PURE__ */ Mb(), t = /* @__PURE__ */ n$(), n = /* @__PURE__ */ NT(), r = /* @__PURE__ */ dye(), i = /* @__PURE__ */ no(), a = /* @__PURE__ */ ch(), o = /* @__PURE__ */ r$();
  function u(c, f, p, g, x) {
    c !== f && n(f, function(b, _) {
      if (x || (x = new e()), i(b))
        r(c, f, _, p, u, g, x);
      else {
        var E = g ? g(o(c, _), b, _ + "", c, f, x) : void 0;
        E === void 0 && (E = b), t(c, _, E);
      }
    }, a);
  }
  return uC = u, uC;
}
var cC, Y7;
function pye() {
  if (Y7) return cC;
  Y7 = 1;
  var e = /* @__PURE__ */ Ub(), t = /* @__PURE__ */ Vb();
  function n(r) {
    return e(function(i, a) {
      var o = -1, u = a.length, c = u > 1 ? a[u - 1] : void 0, f = u > 2 ? a[2] : void 0;
      for (c = r.length > 3 && typeof c == "function" ? (u--, c) : void 0, f && t(a[0], a[1], f) && (c = u < 3 ? void 0 : c, u = 1), i = Object(i); ++o < u; ) {
        var p = a[o];
        p && r(i, p, o, c);
      }
      return i;
    });
  }
  return cC = n, cC;
}
var fC, W7;
function mye() {
  if (W7) return fC;
  W7 = 1;
  var e = /* @__PURE__ */ hye(), t = /* @__PURE__ */ pye(), n = t(function(r, i, a) {
    e(r, i, a);
  });
  return fC = n, fC;
}
var dC, Z7;
function i$() {
  if (Z7) return dC;
  Z7 = 1;
  function e(t, n) {
    return t < n;
  }
  return dC = e, dC;
}
var hC, X7;
function gye() {
  if (X7) return hC;
  X7 = 1;
  var e = /* @__PURE__ */ PT(), t = /* @__PURE__ */ i$(), n = /* @__PURE__ */ fh();
  function r(i) {
    return i && i.length ? e(i, n, t) : void 0;
  }
  return hC = r, hC;
}
var pC, Q7;
function yye() {
  if (Q7) return pC;
  Q7 = 1;
  var e = /* @__PURE__ */ PT(), t = /* @__PURE__ */ Hu(), n = /* @__PURE__ */ i$();
  function r(i, a) {
    return i && i.length ? e(i, t(a, 2), n) : void 0;
  }
  return pC = r, pC;
}
var mC, J7;
function vye() {
  if (J7) return mC;
  J7 = 1;
  var e = /* @__PURE__ */ Ko(), t = function() {
    return e.Date.now();
  };
  return mC = t, mC;
}
var gC, eO;
function xye() {
  if (eO) return gC;
  eO = 1;
  var e = /* @__PURE__ */ Db(), t = /* @__PURE__ */ $b(), n = /* @__PURE__ */ zb(), r = /* @__PURE__ */ no(), i = /* @__PURE__ */ zy();
  function a(o, u, c, f) {
    if (!r(o))
      return o;
    u = t(u, o);
    for (var p = -1, g = u.length, x = g - 1, b = o; b != null && ++p < g; ) {
      var _ = i(u[p]), E = c;
      if (_ === "__proto__" || _ === "constructor" || _ === "prototype")
        return o;
      if (p != x) {
        var k = b[_];
        E = f ? f(k, _, b) : void 0, E === void 0 && (E = r(k) ? k : n(u[p + 1]) ? [] : {});
      }
      e(b, _, E), b = b[_];
    }
    return o;
  }
  return gC = a, gC;
}
var yC, tO;
function bye() {
  if (tO) return yC;
  tO = 1;
  var e = /* @__PURE__ */ Fb(), t = /* @__PURE__ */ xye(), n = /* @__PURE__ */ $b();
  function r(i, a, o) {
    for (var u = -1, c = a.length, f = {}; ++u < c; ) {
      var p = a[u], g = e(i, p);
      o(g, p) && t(f, n(p, i), g);
    }
    return f;
  }
  return yC = r, yC;
}
var vC, nO;
function wye() {
  if (nO) return vC;
  nO = 1;
  var e = /* @__PURE__ */ bye(), t = /* @__PURE__ */ Pq();
  function n(r, i) {
    return e(r, i, function(a, o) {
      return t(r, o);
    });
  }
  return vC = n, vC;
}
var xC, rO;
function _ye() {
  if (rO) return xC;
  rO = 1;
  var e = /* @__PURE__ */ t$(), t = /* @__PURE__ */ Vq(), n = /* @__PURE__ */ Hq();
  function r(i) {
    return n(t(i, void 0, e), i + "");
  }
  return xC = r, xC;
}
var bC, iO;
function Sye() {
  if (iO) return bC;
  iO = 1;
  var e = /* @__PURE__ */ wye(), t = /* @__PURE__ */ _ye(), n = t(function(r, i) {
    return r == null ? {} : e(r, i);
  });
  return bC = n, bC;
}
var wC, sO;
function Cye() {
  if (sO) return wC;
  sO = 1;
  var e = Math.ceil, t = Math.max;
  function n(r, i, a, o) {
    for (var u = -1, c = t(e((i - r) / (a || 1)), 0), f = Array(c); c--; )
      f[o ? c : ++u] = r, r += a;
    return f;
  }
  return wC = n, wC;
}
var _C, aO;
function Eye() {
  if (aO) return _C;
  aO = 1;
  var e = /* @__PURE__ */ Cye(), t = /* @__PURE__ */ Vb(), n = /* @__PURE__ */ e$();
  function r(i) {
    return function(a, o, u) {
      return u && typeof u != "number" && t(a, o, u) && (o = u = void 0), a = n(a), o === void 0 ? (o = a, a = 0) : o = n(o), u = u === void 0 ? a < o ? 1 : -1 : n(u), e(a, o, u, i);
    };
  }
  return _C = r, _C;
}
var SC, oO;
function kye() {
  if (oO) return SC;
  oO = 1;
  var e = /* @__PURE__ */ Eye(), t = e();
  return SC = t, SC;
}
var CC, lO;
function Tye() {
  if (lO) return CC;
  lO = 1;
  function e(t, n) {
    var r = t.length;
    for (t.sort(n); r--; )
      t[r] = t[r].value;
    return t;
  }
  return CC = e, CC;
}
var EC, uO;
function Aye() {
  if (uO) return EC;
  uO = 1;
  var e = /* @__PURE__ */ Am();
  function t(n, r) {
    if (n !== r) {
      var i = n !== void 0, a = n === null, o = n === n, u = e(n), c = r !== void 0, f = r === null, p = r === r, g = e(r);
      if (!f && !g && !u && n > r || u && c && p && !f && !g || a && c && p || !i && p || !o)
        return 1;
      if (!a && !u && !g && n < r || g && i && o && !a && !u || f && i && o || !c && o || !p)
        return -1;
    }
    return 0;
  }
  return EC = t, EC;
}
var kC, cO;
function jye() {
  if (cO) return kC;
  cO = 1;
  var e = /* @__PURE__ */ Aye();
  function t(n, r, i) {
    for (var a = -1, o = n.criteria, u = r.criteria, c = o.length, f = i.length; ++a < c; ) {
      var p = e(o[a], u[a]);
      if (p) {
        if (a >= f)
          return p;
        var g = i[a];
        return p * (g == "desc" ? -1 : 1);
      }
    }
    return n.index - r.index;
  }
  return kC = t, kC;
}
var TC, fO;
function Nye() {
  if (fO) return TC;
  fO = 1;
  var e = /* @__PURE__ */ qb(), t = /* @__PURE__ */ Fb(), n = /* @__PURE__ */ Hu(), r = /* @__PURE__ */ $q(), i = /* @__PURE__ */ Tye(), a = /* @__PURE__ */ Pb(), o = /* @__PURE__ */ jye(), u = /* @__PURE__ */ fh(), c = /* @__PURE__ */ Xr();
  function f(p, g, x) {
    g.length ? g = e(g, function(E) {
      return c(E) ? function(k) {
        return t(k, E.length === 1 ? E[0] : E);
      } : E;
    }) : g = [u];
    var b = -1;
    g = e(g, a(n));
    var _ = r(p, function(E, k, T) {
      var R = e(g, function(N) {
        return N(E);
      });
      return { criteria: R, index: ++b, value: E };
    });
    return i(_, function(E, k) {
      return o(E, k, x);
    });
  }
  return TC = f, TC;
}
var AC, dO;
function Rye() {
  if (dO) return AC;
  dO = 1;
  var e = /* @__PURE__ */ DT(), t = /* @__PURE__ */ Nye(), n = /* @__PURE__ */ Ub(), r = /* @__PURE__ */ Vb(), i = n(function(a, o) {
    if (a == null)
      return [];
    var u = o.length;
    return u > 1 && r(a, o[0], o[1]) ? o = [] : u > 2 && r(o[0], o[1], o[2]) && (o = [o[0]]), t(a, e(o, 1), []);
  });
  return AC = i, AC;
}
var jC, hO;
function Mye() {
  if (hO) return jC;
  hO = 1;
  var e = /* @__PURE__ */ Dq(), t = 0;
  function n(r) {
    var i = ++t;
    return e(r) + i;
  }
  return jC = n, jC;
}
var NC, pO;
function Oye() {
  if (pO) return NC;
  pO = 1;
  function e(t, n, r) {
    for (var i = -1, a = t.length, o = n.length, u = {}; ++i < a; ) {
      var c = i < o ? n[i] : void 0;
      r(u, t[i], c);
    }
    return u;
  }
  return NC = e, NC;
}
var RC, mO;
function Dye() {
  if (mO) return RC;
  mO = 1;
  var e = /* @__PURE__ */ Db(), t = /* @__PURE__ */ Oye();
  function n(r, i) {
    return t(r || [], i || [], e);
  }
  return RC = n, RC;
}
var MC, gO;
function pr() {
  if (gO) return MC;
  gO = 1;
  var e;
  if (typeof xT == "function")
    try {
      e = {
        cloneDeep: /* @__PURE__ */ Z0e(),
        constant: /* @__PURE__ */ jT(),
        defaults: /* @__PURE__ */ X0e(),
        each: /* @__PURE__ */ Tq(),
        filter: /* @__PURE__ */ Lq(),
        find: /* @__PURE__ */ iye(),
        flatten: /* @__PURE__ */ t$(),
        forEach: /* @__PURE__ */ kq(),
        forIn: /* @__PURE__ */ sye(),
        has: /* @__PURE__ */ Bq(),
        isUndefined: /* @__PURE__ */ qq(),
        last: /* @__PURE__ */ aye(),
        map: /* @__PURE__ */ Fq(),
        mapValues: /* @__PURE__ */ oye(),
        max: /* @__PURE__ */ uye(),
        merge: /* @__PURE__ */ mye(),
        min: /* @__PURE__ */ gye(),
        minBy: /* @__PURE__ */ yye(),
        now: /* @__PURE__ */ vye(),
        pick: /* @__PURE__ */ Sye(),
        range: /* @__PURE__ */ kye(),
        reduce: /* @__PURE__ */ Uq(),
        sortBy: /* @__PURE__ */ Rye(),
        uniqueId: /* @__PURE__ */ Mye(),
        values: /* @__PURE__ */ Yq(),
        zipObject: /* @__PURE__ */ Dye()
      };
    } catch {
    }
  return e || (e = window._), MC = e, MC;
}
var OC, yO;
function zye() {
  if (yO) return OC;
  yO = 1, OC = e;
  function e() {
    var r = {};
    r._next = r._prev = r, this._sentinel = r;
  }
  e.prototype.dequeue = function() {
    var r = this._sentinel, i = r._prev;
    if (i !== r)
      return t(i), i;
  }, e.prototype.enqueue = function(r) {
    var i = this._sentinel;
    r._prev && r._next && t(r), r._next = i._next, i._next._prev = r, i._next = r, r._prev = i;
  }, e.prototype.toString = function() {
    for (var r = [], i = this._sentinel, a = i._prev; a !== i; )
      r.push(JSON.stringify(a, n)), a = a._prev;
    return "[" + r.join(", ") + "]";
  };
  function t(r) {
    r._prev._next = r._next, r._next._prev = r._prev, delete r._next, delete r._prev;
  }
  function n(r, i) {
    if (r !== "_next" && r !== "_prev")
      return i;
  }
  return OC;
}
var DC, vO;
function Pye() {
  if (vO) return DC;
  vO = 1;
  var e = /* @__PURE__ */ pr(), t = Ho().Graph, n = /* @__PURE__ */ zye();
  DC = i;
  var r = e.constant(1);
  function i(f, p) {
    if (f.nodeCount() <= 1)
      return [];
    var g = u(f, p || r), x = a(g.graph, g.buckets, g.zeroIdx);
    return e.flatten(e.map(x, function(b) {
      return f.outEdges(b.v, b.w);
    }), !0);
  }
  function a(f, p, g) {
    for (var x = [], b = p[p.length - 1], _ = p[0], E; f.nodeCount(); ) {
      for (; E = _.dequeue(); )
        o(f, p, g, E);
      for (; E = b.dequeue(); )
        o(f, p, g, E);
      if (f.nodeCount()) {
        for (var k = p.length - 2; k > 0; --k)
          if (E = p[k].dequeue(), E) {
            x = x.concat(o(f, p, g, E, !0));
            break;
          }
      }
    }
    return x;
  }
  function o(f, p, g, x, b) {
    var _ = b ? [] : void 0;
    return e.forEach(f.inEdges(x.v), function(E) {
      var k = f.edge(E), T = f.node(E.v);
      b && _.push({ v: E.v, w: E.w }), T.out -= k, c(p, g, T);
    }), e.forEach(f.outEdges(x.v), function(E) {
      var k = f.edge(E), T = E.w, R = f.node(T);
      R.in -= k, c(p, g, R);
    }), f.removeNode(x.v), _;
  }
  function u(f, p) {
    var g = new t(), x = 0, b = 0;
    e.forEach(f.nodes(), function(k) {
      g.setNode(k, { v: k, in: 0, out: 0 });
    }), e.forEach(f.edges(), function(k) {
      var T = g.edge(k.v, k.w) || 0, R = p(k), N = T + R;
      g.setEdge(k.v, k.w, N), b = Math.max(b, g.node(k.v).out += R), x = Math.max(x, g.node(k.w).in += R);
    });
    var _ = e.range(b + x + 3).map(function() {
      return new n();
    }), E = x + 1;
    return e.forEach(g.nodes(), function(k) {
      c(_, E, g.node(k));
    }), { graph: g, buckets: _, zeroIdx: E };
  }
  function c(f, p, g) {
    g.out ? g.in ? f[g.out - g.in + p].enqueue(g) : f[f.length - 1].enqueue(g) : f[0].enqueue(g);
  }
  return DC;
}
var zC, xO;
function Iye() {
  if (xO) return zC;
  xO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ Pye();
  zC = {
    run: n,
    undo: i
  };
  function n(a) {
    var o = a.graph().acyclicer === "greedy" ? t(a, u(a)) : r(a);
    e.forEach(o, function(c) {
      var f = a.edge(c);
      a.removeEdge(c), f.forwardName = c.name, f.reversed = !0, a.setEdge(c.w, c.v, f, e.uniqueId("rev"));
    });
    function u(c) {
      return function(f) {
        return c.edge(f).weight;
      };
    }
  }
  function r(a) {
    var o = [], u = {}, c = {};
    function f(p) {
      e.has(c, p) || (c[p] = !0, u[p] = !0, e.forEach(a.outEdges(p), function(g) {
        e.has(u, g.w) ? o.push(g) : f(g.w);
      }), delete u[p]);
    }
    return e.forEach(a.nodes(), f), o;
  }
  function i(a) {
    e.forEach(a.edges(), function(o) {
      var u = a.edge(o);
      if (u.reversed) {
        a.removeEdge(o);
        var c = u.forwardName;
        delete u.reversed, delete u.forwardName, a.setEdge(o.w, o.v, u, c);
      }
    });
  }
  return zC;
}
var PC, bO;
function na() {
  if (bO) return PC;
  bO = 1;
  var e = /* @__PURE__ */ pr(), t = Ho().Graph;
  PC = {
    addDummyNode: n,
    simplify: r,
    asNonCompoundGraph: i,
    successorWeights: a,
    predecessorWeights: o,
    intersectRect: u,
    buildLayerMatrix: c,
    normalizeRanks: f,
    removeEmptyRanks: p,
    addBorderNode: g,
    maxRank: x,
    partition: b,
    time: _,
    notime: E
  };
  function n(k, T, R, N) {
    var O;
    do
      O = e.uniqueId(N);
    while (k.hasNode(O));
    return R.dummy = T, k.setNode(O, R), O;
  }
  function r(k) {
    var T = new t().setGraph(k.graph());
    return e.forEach(k.nodes(), function(R) {
      T.setNode(R, k.node(R));
    }), e.forEach(k.edges(), function(R) {
      var N = T.edge(R.v, R.w) || { weight: 0, minlen: 1 }, O = k.edge(R);
      T.setEdge(R.v, R.w, {
        weight: N.weight + O.weight,
        minlen: Math.max(N.minlen, O.minlen)
      });
    }), T;
  }
  function i(k) {
    var T = new t({ multigraph: k.isMultigraph() }).setGraph(k.graph());
    return e.forEach(k.nodes(), function(R) {
      k.children(R).length || T.setNode(R, k.node(R));
    }), e.forEach(k.edges(), function(R) {
      T.setEdge(R, k.edge(R));
    }), T;
  }
  function a(k) {
    var T = e.map(k.nodes(), function(R) {
      var N = {};
      return e.forEach(k.outEdges(R), function(O) {
        N[O.w] = (N[O.w] || 0) + k.edge(O).weight;
      }), N;
    });
    return e.zipObject(k.nodes(), T);
  }
  function o(k) {
    var T = e.map(k.nodes(), function(R) {
      var N = {};
      return e.forEach(k.inEdges(R), function(O) {
        N[O.v] = (N[O.v] || 0) + k.edge(O).weight;
      }), N;
    });
    return e.zipObject(k.nodes(), T);
  }
  function u(k, T) {
    var R = k.x, N = k.y, O = T.x - R, P = T.y - N, z = k.width / 2, q = k.height / 2;
    if (!O && !P)
      throw new Error("Not possible to find intersection inside of the rectangle");
    var G, Y;
    return Math.abs(P) * z > Math.abs(O) * q ? (P < 0 && (q = -q), G = q * O / P, Y = q) : (O < 0 && (z = -z), G = z, Y = z * P / O), { x: R + G, y: N + Y };
  }
  function c(k) {
    var T = e.map(e.range(x(k) + 1), function() {
      return [];
    });
    return e.forEach(k.nodes(), function(R) {
      var N = k.node(R), O = N.rank;
      e.isUndefined(O) || (T[O][N.order] = R);
    }), T;
  }
  function f(k) {
    var T = e.min(e.map(k.nodes(), function(R) {
      return k.node(R).rank;
    }));
    e.forEach(k.nodes(), function(R) {
      var N = k.node(R);
      e.has(N, "rank") && (N.rank -= T);
    });
  }
  function p(k) {
    var T = e.min(e.map(k.nodes(), function(P) {
      return k.node(P).rank;
    })), R = [];
    e.forEach(k.nodes(), function(P) {
      var z = k.node(P).rank - T;
      R[z] || (R[z] = []), R[z].push(P);
    });
    var N = 0, O = k.graph().nodeRankFactor;
    e.forEach(R, function(P, z) {
      e.isUndefined(P) && z % O !== 0 ? --N : N && e.forEach(P, function(q) {
        k.node(q).rank += N;
      });
    });
  }
  function g(k, T, R, N) {
    var O = {
      width: 0,
      height: 0
    };
    return arguments.length >= 4 && (O.rank = R, O.order = N), n(k, "border", O, T);
  }
  function x(k) {
    return e.max(e.map(k.nodes(), function(T) {
      var R = k.node(T).rank;
      if (!e.isUndefined(R))
        return R;
    }));
  }
  function b(k, T) {
    var R = { lhs: [], rhs: [] };
    return e.forEach(k, function(N) {
      T(N) ? R.lhs.push(N) : R.rhs.push(N);
    }), R;
  }
  function _(k, T) {
    var R = e.now();
    try {
      return T();
    } finally {
      console.log(k + " time: " + (e.now() - R) + "ms");
    }
  }
  function E(k, T) {
    return T();
  }
  return PC;
}
var IC, wO;
function Lye() {
  if (wO) return IC;
  wO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ na();
  IC = {
    run: n,
    undo: i
  };
  function n(a) {
    a.graph().dummyChains = [], e.forEach(a.edges(), function(o) {
      r(a, o);
    });
  }
  function r(a, o) {
    var u = o.v, c = a.node(u).rank, f = o.w, p = a.node(f).rank, g = o.name, x = a.edge(o), b = x.labelRank;
    if (p !== c + 1) {
      a.removeEdge(o);
      var _, E, k;
      for (k = 0, ++c; c < p; ++k, ++c)
        x.points = [], E = {
          width: 0,
          height: 0,
          edgeLabel: x,
          edgeObj: o,
          rank: c
        }, _ = t.addDummyNode(a, "edge", E, "_d"), c === b && (E.width = x.width, E.height = x.height, E.dummy = "edge-label", E.labelpos = x.labelpos), a.setEdge(u, _, { weight: x.weight }, g), k === 0 && a.graph().dummyChains.push(_), u = _;
      a.setEdge(u, f, { weight: x.weight }, g);
    }
  }
  function i(a) {
    e.forEach(a.graph().dummyChains, function(o) {
      var u = a.node(o), c = u.edgeLabel, f;
      for (a.setEdge(u.edgeObj, c); u.dummy; )
        f = a.successors(o)[0], a.removeNode(o), c.points.push({ x: u.x, y: u.y }), u.dummy === "edge-label" && (c.x = u.x, c.y = u.y, c.width = u.width, c.height = u.height), o = f, u = a.node(o);
    });
  }
  return IC;
}
var LC, _O;
function Hx() {
  if (_O) return LC;
  _O = 1;
  var e = /* @__PURE__ */ pr();
  LC = {
    longestPath: t,
    slack: n
  };
  function t(r) {
    var i = {};
    function a(o) {
      var u = r.node(o);
      if (e.has(i, o))
        return u.rank;
      i[o] = !0;
      var c = e.min(e.map(r.outEdges(o), function(f) {
        return a(f.w) - r.edge(f).minlen;
      }));
      return (c === Number.POSITIVE_INFINITY || // return value of _.map([]) for Lodash 3
      c === void 0 || // return value of _.map([]) for Lodash 4
      c === null) && (c = 0), u.rank = c;
    }
    e.forEach(r.sources(), a);
  }
  function n(r, i) {
    return r.node(i.w).rank - r.node(i.v).rank - r.edge(i).minlen;
  }
  return LC;
}
var BC, SO;
function s$() {
  if (SO) return BC;
  SO = 1;
  var e = /* @__PURE__ */ pr(), t = Ho().Graph, n = Hx().slack;
  BC = r;
  function r(u) {
    var c = new t({ directed: !1 }), f = u.nodes()[0], p = u.nodeCount();
    c.setNode(f, {});
    for (var g, x; i(c, u) < p; )
      g = a(c, u), x = c.hasNode(g.v) ? n(u, g) : -n(u, g), o(c, u, x);
    return c;
  }
  function i(u, c) {
    function f(p) {
      e.forEach(c.nodeEdges(p), function(g) {
        var x = g.v, b = p === x ? g.w : x;
        !u.hasNode(b) && !n(c, g) && (u.setNode(b, {}), u.setEdge(p, b, {}), f(b));
      });
    }
    return e.forEach(u.nodes(), f), u.nodeCount();
  }
  function a(u, c) {
    return e.minBy(c.edges(), function(f) {
      if (u.hasNode(f.v) !== u.hasNode(f.w))
        return n(c, f);
    });
  }
  function o(u, c, f) {
    e.forEach(u.nodes(), function(p) {
      c.node(p).rank += f;
    });
  }
  return BC;
}
var qC, CO;
function Bye() {
  if (CO) return qC;
  CO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ s$(), n = Hx().slack, r = Hx().longestPath, i = Ho().alg.preorder, a = Ho().alg.postorder, o = na().simplify;
  qC = u, u.initLowLimValues = g, u.initCutValues = c, u.calcCutValue = p, u.leaveEdge = b, u.enterEdge = _, u.exchangeEdges = E;
  function u(N) {
    N = o(N), r(N);
    var O = t(N);
    g(O), c(O, N);
    for (var P, z; P = b(O); )
      z = _(O, N, P), E(O, N, P, z);
  }
  function c(N, O) {
    var P = a(N, N.nodes());
    P = P.slice(0, P.length - 1), e.forEach(P, function(z) {
      f(N, O, z);
    });
  }
  function f(N, O, P) {
    var z = N.node(P), q = z.parent;
    N.edge(P, q).cutvalue = p(N, O, P);
  }
  function p(N, O, P) {
    var z = N.node(P), q = z.parent, G = !0, Y = O.edge(P, q), W = 0;
    return Y || (G = !1, Y = O.edge(q, P)), W = Y.weight, e.forEach(O.nodeEdges(P), function(F) {
      var X = F.v === P, me = X ? F.w : F.v;
      if (me !== q) {
        var J = X === G, le = O.edge(F).weight;
        if (W += J ? le : -le, T(N, P, me)) {
          var Q = N.edge(P, me).cutvalue;
          W += J ? -Q : Q;
        }
      }
    }), W;
  }
  function g(N, O) {
    arguments.length < 2 && (O = N.nodes()[0]), x(N, {}, 1, O);
  }
  function x(N, O, P, z, q) {
    var G = P, Y = N.node(z);
    return O[z] = !0, e.forEach(N.neighbors(z), function(W) {
      e.has(O, W) || (P = x(N, O, P, W, z));
    }), Y.low = G, Y.lim = P++, q ? Y.parent = q : delete Y.parent, P;
  }
  function b(N) {
    return e.find(N.edges(), function(O) {
      return N.edge(O).cutvalue < 0;
    });
  }
  function _(N, O, P) {
    var z = P.v, q = P.w;
    O.hasEdge(z, q) || (z = P.w, q = P.v);
    var G = N.node(z), Y = N.node(q), W = G, F = !1;
    G.lim > Y.lim && (W = Y, F = !0);
    var X = e.filter(O.edges(), function(me) {
      return F === R(N, N.node(me.v), W) && F !== R(N, N.node(me.w), W);
    });
    return e.minBy(X, function(me) {
      return n(O, me);
    });
  }
  function E(N, O, P, z) {
    var q = P.v, G = P.w;
    N.removeEdge(q, G), N.setEdge(z.v, z.w, {}), g(N), c(N, O), k(N, O);
  }
  function k(N, O) {
    var P = e.find(N.nodes(), function(q) {
      return !O.node(q).parent;
    }), z = i(N, P);
    z = z.slice(1), e.forEach(z, function(q) {
      var G = N.node(q).parent, Y = O.edge(q, G), W = !1;
      Y || (Y = O.edge(G, q), W = !0), O.node(q).rank = O.node(G).rank + (W ? Y.minlen : -Y.minlen);
    });
  }
  function T(N, O, P) {
    return N.hasEdge(O, P);
  }
  function R(N, O, P) {
    return P.low <= O.lim && O.lim <= P.lim;
  }
  return qC;
}
var $C, EO;
function qye() {
  if (EO) return $C;
  EO = 1;
  var e = /* @__PURE__ */ Hx(), t = e.longestPath, n = /* @__PURE__ */ s$(), r = /* @__PURE__ */ Bye();
  $C = i;
  function i(c) {
    switch (c.graph().ranker) {
      case "network-simplex":
        u(c);
        break;
      case "tight-tree":
        o(c);
        break;
      case "longest-path":
        a(c);
        break;
      default:
        u(c);
    }
  }
  var a = t;
  function o(c) {
    t(c), n(c);
  }
  function u(c) {
    r(c);
  }
  return $C;
}
var FC, kO;
function $ye() {
  if (kO) return FC;
  kO = 1;
  var e = /* @__PURE__ */ pr();
  FC = t;
  function t(i) {
    var a = r(i);
    e.forEach(i.graph().dummyChains, function(o) {
      for (var u = i.node(o), c = u.edgeObj, f = n(i, a, c.v, c.w), p = f.path, g = f.lca, x = 0, b = p[x], _ = !0; o !== c.w; ) {
        if (u = i.node(o), _) {
          for (; (b = p[x]) !== g && i.node(b).maxRank < u.rank; )
            x++;
          b === g && (_ = !1);
        }
        if (!_) {
          for (; x < p.length - 1 && i.node(b = p[x + 1]).minRank <= u.rank; )
            x++;
          b = p[x];
        }
        i.setParent(o, b), o = i.successors(o)[0];
      }
    });
  }
  function n(i, a, o, u) {
    var c = [], f = [], p = Math.min(a[o].low, a[u].low), g = Math.max(a[o].lim, a[u].lim), x, b;
    x = o;
    do
      x = i.parent(x), c.push(x);
    while (x && (a[x].low > p || g > a[x].lim));
    for (b = x, x = u; (x = i.parent(x)) !== b; )
      f.push(x);
    return { path: c.concat(f.reverse()), lca: b };
  }
  function r(i) {
    var a = {}, o = 0;
    function u(c) {
      var f = o;
      e.forEach(i.children(c), u), a[c] = { low: f, lim: o++ };
    }
    return e.forEach(i.children(), u), a;
  }
  return FC;
}
var UC, TO;
function Fye() {
  if (TO) return UC;
  TO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ na();
  UC = {
    run: n,
    cleanup: o
  };
  function n(u) {
    var c = t.addDummyNode(u, "root", {}, "_root"), f = i(u), p = e.max(e.values(f)) - 1, g = 2 * p + 1;
    u.graph().nestingRoot = c, e.forEach(u.edges(), function(b) {
      u.edge(b).minlen *= g;
    });
    var x = a(u) + 1;
    e.forEach(u.children(), function(b) {
      r(u, c, g, x, p, f, b);
    }), u.graph().nodeRankFactor = g;
  }
  function r(u, c, f, p, g, x, b) {
    var _ = u.children(b);
    if (!_.length) {
      b !== c && u.setEdge(c, b, { weight: 0, minlen: f });
      return;
    }
    var E = t.addBorderNode(u, "_bt"), k = t.addBorderNode(u, "_bb"), T = u.node(b);
    u.setParent(E, b), T.borderTop = E, u.setParent(k, b), T.borderBottom = k, e.forEach(_, function(R) {
      r(u, c, f, p, g, x, R);
      var N = u.node(R), O = N.borderTop ? N.borderTop : R, P = N.borderBottom ? N.borderBottom : R, z = N.borderTop ? p : 2 * p, q = O !== P ? 1 : g - x[b] + 1;
      u.setEdge(E, O, {
        weight: z,
        minlen: q,
        nestingEdge: !0
      }), u.setEdge(P, k, {
        weight: z,
        minlen: q,
        nestingEdge: !0
      });
    }), u.parent(b) || u.setEdge(c, E, { weight: 0, minlen: g + x[b] });
  }
  function i(u) {
    var c = {};
    function f(p, g) {
      var x = u.children(p);
      x && x.length && e.forEach(x, function(b) {
        f(b, g + 1);
      }), c[p] = g;
    }
    return e.forEach(u.children(), function(p) {
      f(p, 1);
    }), c;
  }
  function a(u) {
    return e.reduce(u.edges(), function(c, f) {
      return c + u.edge(f).weight;
    }, 0);
  }
  function o(u) {
    var c = u.graph();
    u.removeNode(c.nestingRoot), delete c.nestingRoot, e.forEach(u.edges(), function(f) {
      var p = u.edge(f);
      p.nestingEdge && u.removeEdge(f);
    });
  }
  return UC;
}
var VC, AO;
function Uye() {
  if (AO) return VC;
  AO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ na();
  VC = n;
  function n(i) {
    function a(o) {
      var u = i.children(o), c = i.node(o);
      if (u.length && e.forEach(u, a), e.has(c, "minRank")) {
        c.borderLeft = [], c.borderRight = [];
        for (var f = c.minRank, p = c.maxRank + 1; f < p; ++f)
          r(i, "borderLeft", "_bl", o, c, f), r(i, "borderRight", "_br", o, c, f);
      }
    }
    e.forEach(i.children(), a);
  }
  function r(i, a, o, u, c, f) {
    var p = { width: 0, height: 0, rank: f, borderType: a }, g = c[a][f - 1], x = t.addDummyNode(i, "border", p, o);
    c[a][f] = x, i.setParent(x, u), g && i.setEdge(g, x, { weight: 1 });
  }
  return VC;
}
var HC, jO;
function Vye() {
  if (jO) return HC;
  jO = 1;
  var e = /* @__PURE__ */ pr();
  HC = {
    adjust: t,
    undo: n
  };
  function t(f) {
    var p = f.graph().rankdir.toLowerCase();
    (p === "lr" || p === "rl") && r(f);
  }
  function n(f) {
    var p = f.graph().rankdir.toLowerCase();
    (p === "bt" || p === "rl") && a(f), (p === "lr" || p === "rl") && (u(f), r(f));
  }
  function r(f) {
    e.forEach(f.nodes(), function(p) {
      i(f.node(p));
    }), e.forEach(f.edges(), function(p) {
      i(f.edge(p));
    });
  }
  function i(f) {
    var p = f.width;
    f.width = f.height, f.height = p;
  }
  function a(f) {
    e.forEach(f.nodes(), function(p) {
      o(f.node(p));
    }), e.forEach(f.edges(), function(p) {
      var g = f.edge(p);
      e.forEach(g.points, o), e.has(g, "y") && o(g);
    });
  }
  function o(f) {
    f.y = -f.y;
  }
  function u(f) {
    e.forEach(f.nodes(), function(p) {
      c(f.node(p));
    }), e.forEach(f.edges(), function(p) {
      var g = f.edge(p);
      e.forEach(g.points, c), e.has(g, "x") && c(g);
    });
  }
  function c(f) {
    var p = f.x;
    f.x = f.y, f.y = p;
  }
  return HC;
}
var GC, NO;
function Hye() {
  if (NO) return GC;
  NO = 1;
  var e = /* @__PURE__ */ pr();
  GC = t;
  function t(n) {
    var r = {}, i = e.filter(n.nodes(), function(f) {
      return !n.children(f).length;
    }), a = e.max(e.map(i, function(f) {
      return n.node(f).rank;
    })), o = e.map(e.range(a + 1), function() {
      return [];
    });
    function u(f) {
      if (!e.has(r, f)) {
        r[f] = !0;
        var p = n.node(f);
        o[p.rank].push(f), e.forEach(n.successors(f), u);
      }
    }
    var c = e.sortBy(i, function(f) {
      return n.node(f).rank;
    });
    return e.forEach(c, u), o;
  }
  return GC;
}
var KC, RO;
function Gye() {
  if (RO) return KC;
  RO = 1;
  var e = /* @__PURE__ */ pr();
  KC = t;
  function t(r, i) {
    for (var a = 0, o = 1; o < i.length; ++o)
      a += n(r, i[o - 1], i[o]);
    return a;
  }
  function n(r, i, a) {
    for (var o = e.zipObject(
      a,
      e.map(a, function(x, b) {
        return b;
      })
    ), u = e.flatten(e.map(i, function(x) {
      return e.sortBy(e.map(r.outEdges(x), function(b) {
        return { pos: o[b.w], weight: r.edge(b).weight };
      }), "pos");
    }), !0), c = 1; c < a.length; ) c <<= 1;
    var f = 2 * c - 1;
    c -= 1;
    var p = e.map(new Array(f), function() {
      return 0;
    }), g = 0;
    return e.forEach(u.forEach(function(x) {
      var b = x.pos + c;
      p[b] += x.weight;
      for (var _ = 0; b > 0; )
        b % 2 && (_ += p[b + 1]), b = b - 1 >> 1, p[b] += x.weight;
      g += x.weight * _;
    })), g;
  }
  return KC;
}
var YC, MO;
function Kye() {
  if (MO) return YC;
  MO = 1;
  var e = /* @__PURE__ */ pr();
  YC = t;
  function t(n, r) {
    return e.map(r, function(i) {
      var a = n.inEdges(i);
      if (a.length) {
        var o = e.reduce(a, function(u, c) {
          var f = n.edge(c), p = n.node(c.v);
          return {
            sum: u.sum + f.weight * p.order,
            weight: u.weight + f.weight
          };
        }, { sum: 0, weight: 0 });
        return {
          v: i,
          barycenter: o.sum / o.weight,
          weight: o.weight
        };
      } else
        return { v: i };
    });
  }
  return YC;
}
var WC, OO;
function Yye() {
  if (OO) return WC;
  OO = 1;
  var e = /* @__PURE__ */ pr();
  WC = t;
  function t(i, a) {
    var o = {};
    e.forEach(i, function(c, f) {
      var p = o[c.v] = {
        indegree: 0,
        in: [],
        out: [],
        vs: [c.v],
        i: f
      };
      e.isUndefined(c.barycenter) || (p.barycenter = c.barycenter, p.weight = c.weight);
    }), e.forEach(a.edges(), function(c) {
      var f = o[c.v], p = o[c.w];
      !e.isUndefined(f) && !e.isUndefined(p) && (p.indegree++, f.out.push(o[c.w]));
    });
    var u = e.filter(o, function(c) {
      return !c.indegree;
    });
    return n(u);
  }
  function n(i) {
    var a = [];
    function o(f) {
      return function(p) {
        p.merged || (e.isUndefined(p.barycenter) || e.isUndefined(f.barycenter) || p.barycenter >= f.barycenter) && r(f, p);
      };
    }
    function u(f) {
      return function(p) {
        p.in.push(f), --p.indegree === 0 && i.push(p);
      };
    }
    for (; i.length; ) {
      var c = i.pop();
      a.push(c), e.forEach(c.in.reverse(), o(c)), e.forEach(c.out, u(c));
    }
    return e.map(
      e.filter(a, function(f) {
        return !f.merged;
      }),
      function(f) {
        return e.pick(f, ["vs", "i", "barycenter", "weight"]);
      }
    );
  }
  function r(i, a) {
    var o = 0, u = 0;
    i.weight && (o += i.barycenter * i.weight, u += i.weight), a.weight && (o += a.barycenter * a.weight, u += a.weight), i.vs = a.vs.concat(i.vs), i.barycenter = o / u, i.weight = u, i.i = Math.min(a.i, i.i), a.merged = !0;
  }
  return WC;
}
var ZC, DO;
function Wye() {
  if (DO) return ZC;
  DO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ na();
  ZC = n;
  function n(a, o) {
    var u = t.partition(a, function(E) {
      return e.has(E, "barycenter");
    }), c = u.lhs, f = e.sortBy(u.rhs, function(E) {
      return -E.i;
    }), p = [], g = 0, x = 0, b = 0;
    c.sort(i(!!o)), b = r(p, f, b), e.forEach(c, function(E) {
      b += E.vs.length, p.push(E.vs), g += E.barycenter * E.weight, x += E.weight, b = r(p, f, b);
    });
    var _ = { vs: e.flatten(p, !0) };
    return x && (_.barycenter = g / x, _.weight = x), _;
  }
  function r(a, o, u) {
    for (var c; o.length && (c = e.last(o)).i <= u; )
      o.pop(), a.push(c.vs), u++;
    return u;
  }
  function i(a) {
    return function(o, u) {
      return o.barycenter < u.barycenter ? -1 : o.barycenter > u.barycenter ? 1 : a ? u.i - o.i : o.i - u.i;
    };
  }
  return ZC;
}
var XC, zO;
function Zye() {
  if (zO) return XC;
  zO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ Kye(), n = /* @__PURE__ */ Yye(), r = /* @__PURE__ */ Wye();
  XC = i;
  function i(u, c, f, p) {
    var g = u.children(c), x = u.node(c), b = x ? x.borderLeft : void 0, _ = x ? x.borderRight : void 0, E = {};
    b && (g = e.filter(g, function(P) {
      return P !== b && P !== _;
    }));
    var k = t(u, g);
    e.forEach(k, function(P) {
      if (u.children(P.v).length) {
        var z = i(u, P.v, f, p);
        E[P.v] = z, e.has(z, "barycenter") && o(P, z);
      }
    });
    var T = n(k, f);
    a(T, E);
    var R = r(T, p);
    if (b && (R.vs = e.flatten([b, R.vs, _], !0), u.predecessors(b).length)) {
      var N = u.node(u.predecessors(b)[0]), O = u.node(u.predecessors(_)[0]);
      e.has(R, "barycenter") || (R.barycenter = 0, R.weight = 0), R.barycenter = (R.barycenter * R.weight + N.order + O.order) / (R.weight + 2), R.weight += 2;
    }
    return R;
  }
  function a(u, c) {
    e.forEach(u, function(f) {
      f.vs = e.flatten(f.vs.map(function(p) {
        return c[p] ? c[p].vs : p;
      }), !0);
    });
  }
  function o(u, c) {
    e.isUndefined(u.barycenter) ? (u.barycenter = c.barycenter, u.weight = c.weight) : (u.barycenter = (u.barycenter * u.weight + c.barycenter * c.weight) / (u.weight + c.weight), u.weight += c.weight);
  }
  return XC;
}
var QC, PO;
function Xye() {
  if (PO) return QC;
  PO = 1;
  var e = /* @__PURE__ */ pr(), t = Ho().Graph;
  QC = n;
  function n(i, a, o) {
    var u = r(i), c = new t({ compound: !0 }).setGraph({ root: u }).setDefaultNodeLabel(function(f) {
      return i.node(f);
    });
    return e.forEach(i.nodes(), function(f) {
      var p = i.node(f), g = i.parent(f);
      (p.rank === a || p.minRank <= a && a <= p.maxRank) && (c.setNode(f), c.setParent(f, g || u), e.forEach(i[o](f), function(x) {
        var b = x.v === f ? x.w : x.v, _ = c.edge(b, f), E = e.isUndefined(_) ? 0 : _.weight;
        c.setEdge(b, f, { weight: i.edge(x).weight + E });
      }), e.has(p, "minRank") && c.setNode(f, {
        borderLeft: p.borderLeft[a],
        borderRight: p.borderRight[a]
      }));
    }), c;
  }
  function r(i) {
    for (var a; i.hasNode(a = e.uniqueId("_root")); ) ;
    return a;
  }
  return QC;
}
var JC, IO;
function Qye() {
  if (IO) return JC;
  IO = 1;
  var e = /* @__PURE__ */ pr();
  JC = t;
  function t(n, r, i) {
    var a = {}, o;
    e.forEach(i, function(u) {
      for (var c = n.parent(u), f, p; c; ) {
        if (f = n.parent(c), f ? (p = a[f], a[f] = c) : (p = o, o = c), p && p !== c) {
          r.setEdge(p, c);
          return;
        }
        c = f;
      }
    });
  }
  return JC;
}
var eE, LO;
function Jye() {
  if (LO) return eE;
  LO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ Hye(), n = /* @__PURE__ */ Gye(), r = /* @__PURE__ */ Zye(), i = /* @__PURE__ */ Xye(), a = /* @__PURE__ */ Qye(), o = Ho().Graph, u = /* @__PURE__ */ na();
  eE = c;
  function c(x) {
    var b = u.maxRank(x), _ = f(x, e.range(1, b + 1), "inEdges"), E = f(x, e.range(b - 1, -1, -1), "outEdges"), k = t(x);
    g(x, k);
    for (var T = Number.POSITIVE_INFINITY, R, N = 0, O = 0; O < 4; ++N, ++O) {
      p(N % 2 ? _ : E, N % 4 >= 2), k = u.buildLayerMatrix(x);
      var P = n(x, k);
      P < T && (O = 0, R = e.cloneDeep(k), T = P);
    }
    g(x, R);
  }
  function f(x, b, _) {
    return e.map(b, function(E) {
      return i(x, E, _);
    });
  }
  function p(x, b) {
    var _ = new o();
    e.forEach(x, function(E) {
      var k = E.graph().root, T = r(E, k, _, b);
      e.forEach(T.vs, function(R, N) {
        E.node(R).order = N;
      }), a(E, _, T.vs);
    });
  }
  function g(x, b) {
    e.forEach(b, function(_) {
      e.forEach(_, function(E, k) {
        x.node(E).order = k;
      });
    });
  }
  return eE;
}
var tE, BO;
function eve() {
  if (BO) return tE;
  BO = 1;
  var e = /* @__PURE__ */ pr(), t = Ho().Graph, n = /* @__PURE__ */ na();
  tE = {
    positionX: _,
    findType1Conflicts: r,
    findType2Conflicts: i,
    addConflict: o,
    hasConflict: u,
    verticalAlignment: c,
    horizontalCompaction: f,
    alignCoordinates: x,
    findSmallestWidthAlignment: g,
    balance: b
  };
  function r(T, R) {
    var N = {};
    function O(P, z) {
      var q = 0, G = 0, Y = P.length, W = e.last(z);
      return e.forEach(z, function(F, X) {
        var me = a(T, F), J = me ? T.node(me).order : Y;
        (me || F === W) && (e.forEach(z.slice(G, X + 1), function(le) {
          e.forEach(T.predecessors(le), function(Q) {
            var oe = T.node(Q), fe = oe.order;
            (fe < q || J < fe) && !(oe.dummy && T.node(le).dummy) && o(N, Q, le);
          });
        }), G = X + 1, q = J);
      }), z;
    }
    return e.reduce(R, O), N;
  }
  function i(T, R) {
    var N = {};
    function O(z, q, G, Y, W) {
      var F;
      e.forEach(e.range(q, G), function(X) {
        F = z[X], T.node(F).dummy && e.forEach(T.predecessors(F), function(me) {
          var J = T.node(me);
          J.dummy && (J.order < Y || J.order > W) && o(N, me, F);
        });
      });
    }
    function P(z, q) {
      var G = -1, Y, W = 0;
      return e.forEach(q, function(F, X) {
        if (T.node(F).dummy === "border") {
          var me = T.predecessors(F);
          me.length && (Y = T.node(me[0]).order, O(q, W, X, G, Y), W = X, G = Y);
        }
        O(q, W, q.length, Y, z.length);
      }), q;
    }
    return e.reduce(R, P), N;
  }
  function a(T, R) {
    if (T.node(R).dummy)
      return e.find(T.predecessors(R), function(N) {
        return T.node(N).dummy;
      });
  }
  function o(T, R, N) {
    if (R > N) {
      var O = R;
      R = N, N = O;
    }
    var P = T[R];
    P || (T[R] = P = {}), P[N] = !0;
  }
  function u(T, R, N) {
    if (R > N) {
      var O = R;
      R = N, N = O;
    }
    return e.has(T[R], N);
  }
  function c(T, R, N, O) {
    var P = {}, z = {}, q = {};
    return e.forEach(R, function(G) {
      e.forEach(G, function(Y, W) {
        P[Y] = Y, z[Y] = Y, q[Y] = W;
      });
    }), e.forEach(R, function(G) {
      var Y = -1;
      e.forEach(G, function(W) {
        var F = O(W);
        if (F.length) {
          F = e.sortBy(F, function(Q) {
            return q[Q];
          });
          for (var X = (F.length - 1) / 2, me = Math.floor(X), J = Math.ceil(X); me <= J; ++me) {
            var le = F[me];
            z[W] === W && Y < q[le] && !u(N, W, le) && (z[le] = W, z[W] = P[W] = P[le], Y = q[le]);
          }
        }
      });
    }), { root: P, align: z };
  }
  function f(T, R, N, O, P) {
    var z = {}, q = p(T, R, N, P), G = P ? "borderLeft" : "borderRight";
    function Y(X, me) {
      for (var J = q.nodes(), le = J.pop(), Q = {}; le; )
        Q[le] ? X(le) : (Q[le] = !0, J.push(le), J = J.concat(me(le))), le = J.pop();
    }
    function W(X) {
      z[X] = q.inEdges(X).reduce(function(me, J) {
        return Math.max(me, z[J.v] + q.edge(J));
      }, 0);
    }
    function F(X) {
      var me = q.outEdges(X).reduce(function(le, Q) {
        return Math.min(le, z[Q.w] - q.edge(Q));
      }, Number.POSITIVE_INFINITY), J = T.node(X);
      me !== Number.POSITIVE_INFINITY && J.borderType !== G && (z[X] = Math.max(z[X], me));
    }
    return Y(W, q.predecessors.bind(q)), Y(F, q.successors.bind(q)), e.forEach(O, function(X) {
      z[X] = z[N[X]];
    }), z;
  }
  function p(T, R, N, O) {
    var P = new t(), z = T.graph(), q = E(z.nodesep, z.edgesep, O);
    return e.forEach(R, function(G) {
      var Y;
      e.forEach(G, function(W) {
        var F = N[W];
        if (P.setNode(F), Y) {
          var X = N[Y], me = P.edge(X, F);
          P.setEdge(X, F, Math.max(q(T, W, Y), me || 0));
        }
        Y = W;
      });
    }), P;
  }
  function g(T, R) {
    return e.minBy(e.values(R), function(N) {
      var O = Number.NEGATIVE_INFINITY, P = Number.POSITIVE_INFINITY;
      return e.forIn(N, function(z, q) {
        var G = k(T, q) / 2;
        O = Math.max(z + G, O), P = Math.min(z - G, P);
      }), O - P;
    });
  }
  function x(T, R) {
    var N = e.values(R), O = e.min(N), P = e.max(N);
    e.forEach(["u", "d"], function(z) {
      e.forEach(["l", "r"], function(q) {
        var G = z + q, Y = T[G], W;
        if (Y !== R) {
          var F = e.values(Y);
          W = q === "l" ? O - e.min(F) : P - e.max(F), W && (T[G] = e.mapValues(Y, function(X) {
            return X + W;
          }));
        }
      });
    });
  }
  function b(T, R) {
    return e.mapValues(T.ul, function(N, O) {
      if (R)
        return T[R.toLowerCase()][O];
      var P = e.sortBy(e.map(T, O));
      return (P[1] + P[2]) / 2;
    });
  }
  function _(T) {
    var R = n.buildLayerMatrix(T), N = e.merge(
      r(T, R),
      i(T, R)
    ), O = {}, P;
    e.forEach(["u", "d"], function(q) {
      P = q === "u" ? R : e.values(R).reverse(), e.forEach(["l", "r"], function(G) {
        G === "r" && (P = e.map(P, function(X) {
          return e.values(X).reverse();
        }));
        var Y = (q === "u" ? T.predecessors : T.successors).bind(T), W = c(T, P, N, Y), F = f(
          T,
          P,
          W.root,
          W.align,
          G === "r"
        );
        G === "r" && (F = e.mapValues(F, function(X) {
          return -X;
        })), O[q + G] = F;
      });
    });
    var z = g(T, O);
    return x(O, z), b(O, T.graph().align);
  }
  function E(T, R, N) {
    return function(O, P, z) {
      var q = O.node(P), G = O.node(z), Y = 0, W;
      if (Y += q.width / 2, e.has(q, "labelpos"))
        switch (q.labelpos.toLowerCase()) {
          case "l":
            W = -q.width / 2;
            break;
          case "r":
            W = q.width / 2;
            break;
        }
      if (W && (Y += N ? W : -W), W = 0, Y += (q.dummy ? R : T) / 2, Y += (G.dummy ? R : T) / 2, Y += G.width / 2, e.has(G, "labelpos"))
        switch (G.labelpos.toLowerCase()) {
          case "l":
            W = G.width / 2;
            break;
          case "r":
            W = -G.width / 2;
            break;
        }
      return W && (Y += N ? W : -W), W = 0, Y;
    };
  }
  function k(T, R) {
    return T.node(R).width;
  }
  return tE;
}
var nE, qO;
function tve() {
  if (qO) return nE;
  qO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ na(), n = eve().positionX;
  nE = r;
  function r(a) {
    a = t.asNonCompoundGraph(a), i(a), e.forEach(n(a), function(o, u) {
      a.node(u).x = o;
    });
  }
  function i(a) {
    var o = t.buildLayerMatrix(a), u = a.graph().ranksep, c = 0;
    e.forEach(o, function(f) {
      var p = e.max(e.map(f, function(g) {
        return a.node(g).height;
      }));
      e.forEach(f, function(g) {
        a.node(g).y = c + p / 2;
      }), c += p + u;
    });
  }
  return nE;
}
var rE, $O;
function nve() {
  if ($O) return rE;
  $O = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ Iye(), n = /* @__PURE__ */ Lye(), r = /* @__PURE__ */ qye(), i = na().normalizeRanks, a = /* @__PURE__ */ $ye(), o = na().removeEmptyRanks, u = /* @__PURE__ */ Fye(), c = /* @__PURE__ */ Uye(), f = /* @__PURE__ */ Vye(), p = /* @__PURE__ */ Jye(), g = /* @__PURE__ */ tve(), x = /* @__PURE__ */ na(), b = Ho().Graph;
  rE = _;
  function _(ae, ge) {
    var we = ge && ge.debugTiming ? x.time : x.notime;
    we("layout", function() {
      var Re = we("  buildLayoutGraph", function() {
        return Y(ae);
      });
      we("  runLayout", function() {
        E(Re, we);
      }), we("  updateInputGraph", function() {
        k(ae, Re);
      });
    });
  }
  function E(ae, ge) {
    ge("    makeSpaceForEdgeLabels", function() {
      W(ae);
    }), ge("    removeSelfEdges", function() {
      ce(ae);
    }), ge("    acyclic", function() {
      t.run(ae);
    }), ge("    nestingGraph.run", function() {
      u.run(ae);
    }), ge("    rank", function() {
      r(x.asNonCompoundGraph(ae));
    }), ge("    injectEdgeLabelProxies", function() {
      F(ae);
    }), ge("    removeEmptyRanks", function() {
      o(ae);
    }), ge("    nestingGraph.cleanup", function() {
      u.cleanup(ae);
    }), ge("    normalizeRanks", function() {
      i(ae);
    }), ge("    assignRankMinMax", function() {
      X(ae);
    }), ge("    removeEdgeLabelProxies", function() {
      me(ae);
    }), ge("    normalize.run", function() {
      n.run(ae);
    }), ge("    parentDummyChains", function() {
      a(ae);
    }), ge("    addBorderSegments", function() {
      c(ae);
    }), ge("    order", function() {
      p(ae);
    }), ge("    insertSelfEdges", function() {
      K(ae);
    }), ge("    adjustCoordinateSystem", function() {
      f.adjust(ae);
    }), ge("    position", function() {
      g(ae);
    }), ge("    positionSelfEdges", function() {
      re(ae);
    }), ge("    removeBorderNodes", function() {
      fe(ae);
    }), ge("    normalize.undo", function() {
      n.undo(ae);
    }), ge("    fixupEdgeLabelCoords", function() {
      Q(ae);
    }), ge("    undoCoordinateSystem", function() {
      f.undo(ae);
    }), ge("    translateGraph", function() {
      J(ae);
    }), ge("    assignNodeIntersects", function() {
      le(ae);
    }), ge("    reversePoints", function() {
      oe(ae);
    }), ge("    acyclic.undo", function() {
      t.undo(ae);
    });
  }
  function k(ae, ge) {
    e.forEach(ae.nodes(), function(we) {
      var Re = ae.node(we), Ie = ge.node(we);
      Re && (Re.x = Ie.x, Re.y = Ie.y, ge.children(we).length && (Re.width = Ie.width, Re.height = Ie.height));
    }), e.forEach(ae.edges(), function(we) {
      var Re = ae.edge(we), Ie = ge.edge(we);
      Re.points = Ie.points, e.has(Ie, "x") && (Re.x = Ie.x, Re.y = Ie.y);
    }), ae.graph().width = ge.graph().width, ae.graph().height = ge.graph().height;
  }
  var T = ["nodesep", "edgesep", "ranksep", "marginx", "marginy"], R = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: "tb" }, N = ["acyclicer", "ranker", "rankdir", "align"], O = ["width", "height"], P = { width: 0, height: 0 }, z = ["minlen", "weight", "width", "height", "labeloffset"], q = {
    minlen: 1,
    weight: 1,
    width: 0,
    height: 0,
    labeloffset: 10,
    labelpos: "r"
  }, G = ["labelpos"];
  function Y(ae) {
    var ge = new b({ multigraph: !0, compound: !0 }), we = V(ae.graph());
    return ge.setGraph(e.merge(
      {},
      R,
      de(we, T),
      e.pick(we, N)
    )), e.forEach(ae.nodes(), function(Re) {
      var Ie = V(ae.node(Re));
      ge.setNode(Re, e.defaults(de(Ie, O), P)), ge.setParent(Re, ae.parent(Re));
    }), e.forEach(ae.edges(), function(Re) {
      var Ie = V(ae.edge(Re));
      ge.setEdge(Re, e.merge(
        {},
        q,
        de(Ie, z),
        e.pick(Ie, G)
      ));
    }), ge;
  }
  function W(ae) {
    var ge = ae.graph();
    ge.ranksep /= 2, e.forEach(ae.edges(), function(we) {
      var Re = ae.edge(we);
      Re.minlen *= 2, Re.labelpos.toLowerCase() !== "c" && (ge.rankdir === "TB" || ge.rankdir === "BT" ? Re.width += Re.labeloffset : Re.height += Re.labeloffset);
    });
  }
  function F(ae) {
    e.forEach(ae.edges(), function(ge) {
      var we = ae.edge(ge);
      if (we.width && we.height) {
        var Re = ae.node(ge.v), Ie = ae.node(ge.w), Me = { rank: (Ie.rank - Re.rank) / 2 + Re.rank, e: ge };
        x.addDummyNode(ae, "edge-proxy", Me, "_ep");
      }
    });
  }
  function X(ae) {
    var ge = 0;
    e.forEach(ae.nodes(), function(we) {
      var Re = ae.node(we);
      Re.borderTop && (Re.minRank = ae.node(Re.borderTop).rank, Re.maxRank = ae.node(Re.borderBottom).rank, ge = e.max(ge, Re.maxRank));
    }), ae.graph().maxRank = ge;
  }
  function me(ae) {
    e.forEach(ae.nodes(), function(ge) {
      var we = ae.node(ge);
      we.dummy === "edge-proxy" && (ae.edge(we.e).labelRank = we.rank, ae.removeNode(ge));
    });
  }
  function J(ae) {
    var ge = Number.POSITIVE_INFINITY, we = 0, Re = Number.POSITIVE_INFINITY, Ie = 0, Me = ae.graph(), dt = Me.marginx || 0, ut = Me.marginy || 0;
    function Je(ct) {
      var mt = ct.x, ft = ct.y, At = ct.width, xt = ct.height;
      ge = Math.min(ge, mt - At / 2), we = Math.max(we, mt + At / 2), Re = Math.min(Re, ft - xt / 2), Ie = Math.max(Ie, ft + xt / 2);
    }
    e.forEach(ae.nodes(), function(ct) {
      Je(ae.node(ct));
    }), e.forEach(ae.edges(), function(ct) {
      var mt = ae.edge(ct);
      e.has(mt, "x") && Je(mt);
    }), ge -= dt, Re -= ut, e.forEach(ae.nodes(), function(ct) {
      var mt = ae.node(ct);
      mt.x -= ge, mt.y -= Re;
    }), e.forEach(ae.edges(), function(ct) {
      var mt = ae.edge(ct);
      e.forEach(mt.points, function(ft) {
        ft.x -= ge, ft.y -= Re;
      }), e.has(mt, "x") && (mt.x -= ge), e.has(mt, "y") && (mt.y -= Re);
    }), Me.width = we - ge + dt, Me.height = Ie - Re + ut;
  }
  function le(ae) {
    e.forEach(ae.edges(), function(ge) {
      var we = ae.edge(ge), Re = ae.node(ge.v), Ie = ae.node(ge.w), Me, dt;
      we.points ? (Me = we.points[0], dt = we.points[we.points.length - 1]) : (we.points = [], Me = Ie, dt = Re), we.points.unshift(x.intersectRect(Re, Me)), we.points.push(x.intersectRect(Ie, dt));
    });
  }
  function Q(ae) {
    e.forEach(ae.edges(), function(ge) {
      var we = ae.edge(ge);
      if (e.has(we, "x"))
        switch ((we.labelpos === "l" || we.labelpos === "r") && (we.width -= we.labeloffset), we.labelpos) {
          case "l":
            we.x -= we.width / 2 + we.labeloffset;
            break;
          case "r":
            we.x += we.width / 2 + we.labeloffset;
            break;
        }
    });
  }
  function oe(ae) {
    e.forEach(ae.edges(), function(ge) {
      var we = ae.edge(ge);
      we.reversed && we.points.reverse();
    });
  }
  function fe(ae) {
    e.forEach(ae.nodes(), function(ge) {
      if (ae.children(ge).length) {
        var we = ae.node(ge), Re = ae.node(we.borderTop), Ie = ae.node(we.borderBottom), Me = ae.node(e.last(we.borderLeft)), dt = ae.node(e.last(we.borderRight));
        we.width = Math.abs(dt.x - Me.x), we.height = Math.abs(Ie.y - Re.y), we.x = Me.x + we.width / 2, we.y = Re.y + we.height / 2;
      }
    }), e.forEach(ae.nodes(), function(ge) {
      ae.node(ge).dummy === "border" && ae.removeNode(ge);
    });
  }
  function ce(ae) {
    e.forEach(ae.edges(), function(ge) {
      if (ge.v === ge.w) {
        var we = ae.node(ge.v);
        we.selfEdges || (we.selfEdges = []), we.selfEdges.push({ e: ge, label: ae.edge(ge) }), ae.removeEdge(ge);
      }
    });
  }
  function K(ae) {
    var ge = x.buildLayerMatrix(ae);
    e.forEach(ge, function(we) {
      var Re = 0;
      e.forEach(we, function(Ie, Me) {
        var dt = ae.node(Ie);
        dt.order = Me + Re, e.forEach(dt.selfEdges, function(ut) {
          x.addDummyNode(ae, "selfedge", {
            width: ut.label.width,
            height: ut.label.height,
            rank: dt.rank,
            order: Me + ++Re,
            e: ut.e,
            label: ut.label
          }, "_se");
        }), delete dt.selfEdges;
      });
    });
  }
  function re(ae) {
    e.forEach(ae.nodes(), function(ge) {
      var we = ae.node(ge);
      if (we.dummy === "selfedge") {
        var Re = ae.node(we.e.v), Ie = Re.x + Re.width / 2, Me = Re.y, dt = we.x - Ie, ut = Re.height / 2;
        ae.setEdge(we.e, we.label), ae.removeNode(ge), we.label.points = [
          { x: Ie + 2 * dt / 3, y: Me - ut },
          { x: Ie + 5 * dt / 6, y: Me - ut },
          { x: Ie + dt, y: Me },
          { x: Ie + 5 * dt / 6, y: Me + ut },
          { x: Ie + 2 * dt / 3, y: Me + ut }
        ], we.label.x = we.x, we.label.y = we.y;
      }
    });
  }
  function de(ae, ge) {
    return e.mapValues(e.pick(ae, ge), Number);
  }
  function V(ae) {
    var ge = {};
    return e.forEach(ae, function(we, Re) {
      ge[Re.toLowerCase()] = we;
    }), ge;
  }
  return rE;
}
var iE, FO;
function rve() {
  if (FO) return iE;
  FO = 1;
  var e = /* @__PURE__ */ pr(), t = /* @__PURE__ */ na(), n = Ho().Graph;
  iE = {
    debugOrdering: r
  };
  function r(i) {
    var a = t.buildLayerMatrix(i), o = new n({ compound: !0, multigraph: !0 }).setGraph({});
    return e.forEach(i.nodes(), function(u) {
      o.setNode(u, { label: u }), o.setParent(u, "layer" + i.node(u).rank);
    }), e.forEach(i.edges(), function(u) {
      o.setEdge(u.v, u.w, {}, u.name);
    }), e.forEach(a, function(u, c) {
      var f = "layer" + c;
      o.setNode(f, { rank: "same" }), e.reduce(u, function(p, g) {
        return o.setEdge(p, g, { style: "invis" }), g;
      });
    }), o;
  }
  return iE;
}
var sE, UO;
function ive() {
  return UO || (UO = 1, sE = "0.8.5"), sE;
}
var aE, VO;
function sve() {
  return VO || (VO = 1, aE = {
    graphlib: /* @__PURE__ */ Ho(),
    layout: /* @__PURE__ */ nve(),
    debug: /* @__PURE__ */ rve(),
    util: {
      time: na().time,
      notime: na().notime
    },
    version: /* @__PURE__ */ ive()
  }), aE;
}
var ave = /* @__PURE__ */ sve();
const HO = /* @__PURE__ */ uf(ave);
function ove(e, t, n = "TB") {
  const r = new HO.graphlib.Graph();
  r.setDefaultEdgeLabel(() => ({}));
  const i = n === "LR";
  return r.setGraph({
    rankdir: n,
    nodesep: 50,
    // 
    ranksep: 80,
    // 
    marginx: 20,
    marginy: 20
  }), e.forEach((o) => {
    const u = o.type === "event" ? 250 : 150, c = o.type === "event" ? 100 : 60;
    r.setNode(o.id, { width: u, height: c });
  }), t.forEach((o) => {
    r.setEdge(o.source, o.target);
  }), HO.layout(r), { nodes: e.map((o) => {
    const u = r.node(o.id);
    if (!u) return o;
    const c = o.type === "event" ? 250 : 150, f = o.type === "event" ? 100 : 60;
    return {
      ...o,
      targetPosition: i ? vt.Left : vt.Top,
      sourcePosition: i ? vt.Right : vt.Bottom,
      position: {
        x: u.x - c / 2,
        y: u.y - f / 2
      }
    };
  }), edges: t };
}
const lve = ({ data: e }) => {
  var n;
  const t = un((r) => r.transform[2]);
  return t < 0.15 ? /* @__PURE__ */ h.jsxs("div", { style: { width: 32, height: 32, borderRadius: "50%", backgroundColor: "#e07850", border: "2px solid #e07850", display: "flex", alignItems: "center", justifyContent: "center" }, children: [
    /* @__PURE__ */ h.jsx(Yi, { type: "target", position: vt.Top, style: { backgroundColor: "#e07850" } }),
    /* @__PURE__ */ h.jsx(Yi, { type: "source", position: vt.Bottom, style: { backgroundColor: "#e07850" } })
  ] }) : t > 1 ? /* @__PURE__ */ h.jsxs("div", { className: "w-[280px] p-3 rounded-lg border border-border bg-card shadow-md", children: [
    /* @__PURE__ */ h.jsx(Yi, { type: "target", position: vt.Top, className: "!bg-primary" }),
    /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground mb-1", children: e.time_anchor || "" }),
    /* @__PURE__ */ h.jsx("div", { className: "text-sm font-medium text-foreground mb-2 line-clamp-3", children: e.summary }),
    /* @__PURE__ */ h.jsx("div", { className: "flex flex-wrap gap-1", children: (n = e.roles) == null ? void 0 : n.map((r, i) => /* @__PURE__ */ h.jsx("span", { className: "px-1.5 py-0.5 text-xs bg-primary/10 text-primary rounded", children: r }, i)) }),
    /* @__PURE__ */ h.jsx(Yi, { type: "source", position: vt.Bottom, className: "!bg-primary" })
  ] }) : /* @__PURE__ */ h.jsxs("div", { style: { width: 220, padding: 8, borderRadius: 8, border: "1px solid #444", backgroundColor: "#2a2a2a", boxShadow: "0 1px 3px rgba(0,0,0,0.3)" }, children: [
    /* @__PURE__ */ h.jsx(Yi, { type: "target", position: vt.Top, style: { backgroundColor: "#e07850" } }),
    /* @__PURE__ */ h.jsx("div", { style: { fontSize: 11, color: "#888", marginBottom: 4, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }, children: e.time_anchor || "" }),
    /* @__PURE__ */ h.jsx("div", { style: { fontSize: 13, color: "#eee", display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }, children: e.label }),
    /* @__PURE__ */ h.jsx(Yi, { type: "source", position: vt.Bottom, style: { backgroundColor: "#e07850" } })
  ] });
}, uve = ({ data: e }) => {
  const t = un((n) => n.transform[2]);
  return t < 0.15 ? /* @__PURE__ */ h.jsxs("div", { style: { width: 24, height: 24, borderRadius: "50%", backgroundColor: "#555", border: "1px solid #666", display: "flex", alignItems: "center", justifyContent: "center" }, children: [
    /* @__PURE__ */ h.jsx(Yi, { type: "target", position: vt.Top, style: { backgroundColor: "#888" } }),
    /* @__PURE__ */ h.jsx(Yi, { type: "source", position: vt.Bottom, style: { backgroundColor: "#888" } })
  ] }) : t > 1 ? /* @__PURE__ */ h.jsxs("div", { className: "w-[160px] p-2 rounded-lg border border-border bg-muted/50", children: [
    /* @__PURE__ */ h.jsx(Yi, { type: "target", position: vt.Top, className: "!bg-muted-foreground" }),
    /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground uppercase", children: e.type }),
    /* @__PURE__ */ h.jsx("div", { className: "text-sm font-medium text-foreground", children: e.label }),
    /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground mt-1 line-clamp-2", children: e.description }),
    /* @__PURE__ */ h.jsx(Yi, { type: "source", position: vt.Bottom, className: "!bg-muted-foreground" })
  ] }) : /* @__PURE__ */ h.jsxs("div", { style: { width: 120, padding: 6, borderRadius: 6, border: "1px solid #555", backgroundColor: "#333" }, children: [
    /* @__PURE__ */ h.jsx(Yi, { type: "target", position: vt.Top, style: { backgroundColor: "#888" } }),
    /* @__PURE__ */ h.jsx("div", { style: { fontSize: 12, color: "#ddd", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }, children: e.label }),
    /* @__PURE__ */ h.jsx(Yi, { type: "source", position: vt.Bottom, style: { backgroundColor: "#888" } })
  ] });
}, cve = {
  event: lve,
  entity: uve
}, fve = ({ events: e, entities: t }) => {
  const [n, r, i] = mme([]), [a, o, u] = gme([]), [c, f] = B.useState(!1), p = B.useRef(null), g = B.useCallback(() => {
    const b = [], _ = [];
    return e.forEach((E, k) => {
      var T, R;
      b.push({
        id: E.id,
        type: "event",
        position: { x: 0, y: k * 120 },
        data: {
          label: E.summary.substring(0, 50) + (E.summary.length > 50 ? "..." : ""),
          summary: E.summary,
          time_anchor: (T = E.structured_kv) == null ? void 0 : T.time_anchor,
          roles: (R = E.structured_kv) == null ? void 0 : R.role,
          significance: E.significance_score
        }
      }), k > 0 && _.push({
        id: `e-${e[k - 1].id}-${E.id}`,
        source: e[k - 1].id,
        target: E.id,
        type: "smoothstep",
        animated: !1,
        style: { stroke: "var(--primary)", strokeWidth: 2 },
        markerEnd: { type: oy.ArrowClosed, color: "var(--primary)" }
      });
    }), t.forEach((E, k) => {
      b.push({
        id: E.id,
        type: "entity",
        position: { x: 300 + k % 3 * 100, y: Math.floor(k / 3) * 80 },
        data: {
          label: E.name,
          type: E.type,
          description: E.description,
          profile: E.profile
        }
      });
    }), t.forEach((E) => {
      var T;
      const k = (T = E.profile) == null ? void 0 : T.relations;
      k && Array.isArray(k) && k.forEach((R) => {
        const N = t.find((O) => O.name === R.target);
        N && _.push({
          id: `rel-${E.id}-${N.id}`,
          source: E.id,
          target: N.id,
          type: "smoothstep",
          animated: !1,
          label: R.type,
          style: { stroke: "#888", strokeWidth: 1 },
          labelStyle: { fontSize: 10, fill: "#aaa" }
        });
      });
    }), e.forEach((E) => {
      var R;
      const k = ((R = E.structured_kv) == null ? void 0 : R.role) || [];
      t.filter(
        (N) => {
          var O;
          return k.includes(N.name) || ((O = N.aliases) == null ? void 0 : O.some((P) => k.includes(P)));
        }
      ).forEach((N) => {
        _.push({
          id: `co-${N.id}-${E.id}`,
          source: N.id,
          target: E.id,
          type: "smoothstep",
          animated: !1,
          style: { stroke: "var(--muted-foreground)", strokeWidth: 1, strokeDasharray: "4 2" }
        });
      });
    }), { nodes: b, edges: _ };
  }, [e, t]), x = B.useCallback(() => {
    f(!0);
    const { nodes: b, edges: _ } = g(), { nodes: E, edges: k } = ove(b, _, "TB");
    r(E), o(k), f(!1), setTimeout(() => {
      var T;
      (T = p.current) == null || T.fitView({ padding: 0.2 });
    }, 50);
  }, [g, r, o]);
  return B.useEffect(() => {
    (e.length > 0 || t.length > 0) && x();
  }, [e.length, t.length]), e.length === 0 && t.length === 0 ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-full text-muted-foreground gap-4", children: [
    /* @__PURE__ */ h.jsx(MF, { size: 48, className: "opacity-20" }),
    /* @__PURE__ */ h.jsx("p", { className: "text-sm", children: "" }),
    /* @__PURE__ */ h.jsx("p", { className: "text-xs", children: "" })
  ] }) : /* @__PURE__ */ h.jsxs("div", { style: { position: "relative", width: "100%", height: "400px" }, children: [
    /* @__PURE__ */ h.jsx("div", { className: "absolute top-2 left-2 z-10 flex gap-2", children: /* @__PURE__ */ h.jsxs(
      "button",
      {
        onClick: x,
        disabled: c,
        className: "flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md bg-card border border-border text-foreground hover:bg-accent transition-colors disabled:opacity-50",
        children: [
          /* @__PURE__ */ h.jsx(Or, { size: 12, className: c ? "animate-spin" : "" }),
          ""
        ]
      }
    ) }),
    /* @__PURE__ */ h.jsxs(
      pme,
      {
        nodes: n,
        edges: a,
        onNodesChange: i,
        onEdgesChange: u,
        onInit: (b) => {
          p.current = b;
        },
        nodeTypes: cve,
        fitView: !0,
        minZoom: 0.1,
        maxZoom: 2,
        colorMode: "dark",
        defaultEdgeOptions: {
          type: "smoothstep"
        },
        proOptions: { hideAttribution: !0 },
        children: [
          /* @__PURE__ */ h.jsx(wme, { color: "#333", gap: 20 }),
          /* @__PURE__ */ h.jsx(Ame, { className: "!bg-card !border-border" }),
          /* @__PURE__ */ h.jsx(
            $me,
            {
              nodeColor: (b) => b.type === "event" ? "#e07850" : "#888",
              className: "!bg-card !border-border"
            }
          )
        ]
      }
    )
  ] });
}, GO = 768, dve = [
  { id: "list", label: "", icon: /* @__PURE__ */ h.jsx(PF, { size: 14 }) },
  { id: "graph", label: "", icon: /* @__PURE__ */ h.jsx(yF, { size: 14 }) }
], hve = () => {
  const [e, t] = B.useState([]), [n, r] = B.useState(null), [i, a] = B.useState(/* @__PURE__ */ new Set()), [o, u] = B.useState(""), [c, f] = B.useState(!0), [p, g] = B.useState(window.innerWidth < GO), [x, b] = B.useState(!1), [_, E] = B.useState("list"), [k, T] = B.useState([]), [R, N] = B.useState(/* @__PURE__ */ new Map()), O = R.size > 0, [P, z] = B.useState(!1), q = Zi.getState(), G = B.useRef(null);
  B.useEffect(() => {
    const V = () => {
      g(window.innerWidth < GO);
    };
    return window.addEventListener("resize", V), () => window.removeEventListener("resize", V);
  }, []);
  const Y = async () => {
    f(!0);
    try {
      const V = await q.getAllEvents();
      t(V.sort((ae, ge) => ge.timestamp - ae.timestamp));
    } catch (V) {
      console.error("[MemoryStream] Failed to load events:", V);
    } finally {
      f(!1);
    }
  };
  B.useEffect(() => {
    Y(), W();
  }, []);
  const W = async () => {
    try {
      const V = await q.getAllEntities();
      T(V);
    } catch (V) {
      console.error("[MemoryStream] Failed to load entities:", V);
    }
  }, F = B.useMemo(() => {
    if (!o.trim()) return e;
    const V = o.toLowerCase();
    return e.filter(
      (ae) => {
        var ge, we;
        return ae.summary.toLowerCase().includes(V) || ((ge = ae.structured_kv.event) == null ? void 0 : ge.toLowerCase().includes(V)) || ((we = ae.structured_kv.role) == null ? void 0 : we.some((Re) => Re.toLowerCase().includes(V)));
      }
    );
  }, [e, o]), X = B.useMemo(() => {
    const V = e.find((ge) => ge.id === n);
    if (!V) return null;
    const ae = R.get(V.id);
    return ae ? { ...V, ...ae } : V;
  }, [e, n, R]), me = (V) => {
    r(V), p && b(!0);
  }, J = (V, ae) => {
    const ge = new Set(i);
    ae ? ge.add(V) : ge.delete(V), a(ge);
  }, le = B.useCallback((V, ae) => {
    N((ge) => {
      const we = new Map(ge), Re = we.get(V) || {};
      return we.set(V, { ...Re, ...ae }), we;
    }), t((ge) => ge.map(
      (we) => we.id === V ? { ...we, ...ae } : we
    ));
  }, []), Q = async () => {
    if (R.size !== 0)
      try {
        const V = Array.from(R.entries()).map(
          ([ae, ge]) => q.updateEvent(ae, ge)
        );
        await Promise.all(V), console.log(`[MemoryStream] Batch saved ${R.size} events`), N(/* @__PURE__ */ new Map());
      } catch (V) {
        console.error("[MemoryStream] Batch save failed:", V);
      }
  }, oe = async () => {
    const V = tt.get("apiSettings"), ae = V == null ? void 0 : V.vectorConfig;
    if (!ae) {
      alert(" API ");
      return;
    }
    if (confirm("")) {
      z(!0);
      try {
        Gr.setConfig(ae);
        const ge = V == null ? void 0 : V.embeddingConfig;
        ge != null && ge.concurrency && Gr.setConcurrency(ge.concurrency), await Gr.reembedAllEvents((we, Re, Ie) => {
          console.log(`[MemoryStream] Reembedding: ${we}/${Re}, errors: ${Ie}`);
        }), await Y(), alert("");
      } catch (ge) {
        console.error("[MemoryStream] Reembed failed:", ge), alert(": " + (ge.message || ""));
      } finally {
        z(!1);
      }
    }
  }, fe = async (V) => {
    await q.deleteEvents([V]), t((ae) => ae.filter((ge) => ge.id !== V)), r(null), b(!1), N((ae) => {
      const ge = new Map(ae);
      return ge.delete(V), ge;
    });
  }, ce = async () => {
    i.size !== 0 && confirm(` ${i.size} `) && (await q.deleteEvents(Array.from(i)), t((V) => V.filter((ae) => !i.has(ae.id))), a(/* @__PURE__ */ new Set()), N((V) => {
      const ae = new Map(V);
      return i.forEach((ge) => ae.delete(ge)), ae;
    }));
  }, K = () => {
    b(!1), p && r(null);
  };
  if (p && x && X)
    return /* @__PURE__ */ h.jsx(
      m5,
      {
        ref: G,
        event: X,
        isFullScreen: !0,
        onSave: le,
        onDelete: fe,
        onClose: K
      }
    );
  const de = {
    list: { title: "", subtitle: "" },
    graph: { title: "", subtitle: "" }
  }[_];
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full animate-in fade-in overflow-hidden", children: [
    /* @__PURE__ */ h.jsx(
      xm,
      {
        breadcrumbs: [""],
        title: de.title,
        subtitle: de.subtitle
      }
    ),
    /* @__PURE__ */ h.jsx(ci, { className: "mb-6" }),
    /* @__PURE__ */ h.jsx(
      xy,
      {
        tabs: dve,
        activeTab: _,
        onChange: (V) => E(V),
        actions: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
          O && /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-primary hover:text-primary-foreground hover:bg-primary border border-primary/50 rounded transition-colors",
              onClick: Q,
              children: [
                /* @__PURE__ */ h.jsx(Xc, { size: 12 }),
                " (",
                R.size,
                ")"
              ]
            }
          ),
          /* @__PURE__ */ h.jsxs(
            "button",
            {
              onClick: oe,
              disabled: P,
              className: "inline-flex items-center gap-1.5 px-2 py-1.5 text-xs text-muted-foreground hover:text-foreground hover:bg-accent rounded transition-colors disabled:opacity-50",
              title: "",
              children: [
                /* @__PURE__ */ h.jsx(iD, { size: 12, className: P ? "animate-pulse" : "" }),
                P ? "..." : ""
              ]
            }
          ),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              onClick: Y,
              className: "p-1.5 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-colors",
              title: "",
              children: /* @__PURE__ */ h.jsx(Or, { size: 14, className: c ? "animate-spin" : "" })
            }
          ),
          i.size > 0 && /* @__PURE__ */ h.jsxs(
            "button",
            {
              onClick: ce,
              className: "flex items-center gap-1 px-2 py-1 text-xs text-destructive hover:bg-destructive/10 rounded-md",
              children: [
                /* @__PURE__ */ h.jsx(Ja, { size: 12 }),
                " (",
                i.size,
                ")"
              ]
            }
          )
        ] })
      }
    ),
    _ === "list" && /* @__PURE__ */ h.jsx(
      "div",
      {
        className: "flex flex-col overflow-hidden",
        style: {
          // 
          height: "calc(100vh - 100px)",
          minHeight: "300px"
        },
        children: /* @__PURE__ */ h.jsx(
          ox,
          {
            mobileDetailOpen: p && x,
            onMobileDetailClose: K,
            mobileDetailTitle: "",
            mobileDetailActions: /* @__PURE__ */ h.jsx(
              "button",
              {
                onClick: () => n && fe(n),
                className: "p-2 text-destructive hover:bg-destructive/10 rounded",
                children: /* @__PURE__ */ h.jsx(Ja, { size: 18 })
              }
            ),
            header: /* @__PURE__ */ h.jsxs("div", { className: "relative mb-4 shrink-0", children: [
              /* @__PURE__ */ h.jsx(ta, { size: 14, className: "absolute left-0 top-1/2 -translate-y-1/2 text-muted-foreground" }),
              /* @__PURE__ */ h.jsx(
                "input",
                {
                  type: "text",
                  value: o,
                  onChange: (V) => u(V.target.value),
                  placeholder: "...",
                  style: {
                    background: "transparent",
                    border: "none",
                    borderBottom: "1px solid var(--border)",
                    borderRadius: 0,
                    outline: "none",
                    padding: "8px 0 8px 24px",
                    fontSize: "14px",
                    width: "100%",
                    color: "var(--foreground)"
                  },
                  className: "placeholder:text-muted-foreground/40 focus:border-primary transition-colors"
                }
              )
            ] }),
            list: c ? /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col items-center justify-center h-48 text-muted-foreground gap-2", children: [
              /* @__PURE__ */ h.jsx(Or, { size: 24, className: "animate-spin" }),
              /* @__PURE__ */ h.jsx("p", { className: "text-sm font-light", children: "..." })
            ] }) : F.length === 0 ? /* @__PURE__ */ h.jsx(
              S0,
              {
                icon: hy,
                title: o ? "" : "",
                description: o ? void 0 : ""
              }
            ) : /* @__PURE__ */ h.jsx("div", { className: p ? "" : "space-y-1 pb-4", children: F.map((V) => /* @__PURE__ */ h.jsx(
              Hle,
              {
                event: V,
                isSelected: V.id === n,
                isCompact: p,
                checked: i.has(V.id),
                hasChanges: R.has(V.id),
                onSelect: () => me(V.id),
                onCheck: (ae) => J(V.id, ae)
              },
              V.id
            )) }),
            detail: /* @__PURE__ */ h.jsx(
              m5,
              {
                ref: G,
                event: X,
                isFullScreen: !1,
                onSave: le,
                onDelete: fe,
                onClose: () => r(null)
              }
            )
          }
        )
      }
    ),
    _ === "graph" && /* @__PURE__ */ h.jsx(
      "div",
      {
        className: "flex-1 min-h-0",
        style: {
          // 
          height: "calc(100vh - 270px)",
          minHeight: "400px"
        },
        children: /* @__PURE__ */ h.jsx(fve, { events: e, entities: k })
      }
    )
  ] });
}, pve = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  MemoryStream: hve
}, Symbol.toStringTag, { value: "Module" })), mve = ({ links: e, onNavigate: t, className: n = "" }) => e.length === 0 ? null : /* @__PURE__ */ h.jsx("div", { className: `hidden sm:flex items-center gap-4 ${n}`, children: e.map((r) => {
  const i = r.icon || uF;
  return /* @__PURE__ */ h.jsxs(
    "button",
    {
      className: "group inline-flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors duration-[var(--duration-fast)]",
      onClick: () => t(r.linkTo),
      title: r.label,
      children: [
        /* @__PURE__ */ h.jsx(i, { size: 12, className: "transition-transform duration-[var(--duration-fast)] group-hover:scale-110" }),
        /* @__PURE__ */ h.jsx("span", { children: r.label })
      ]
    },
    r.id
  );
}) }), gve = [
  { id: "token", label: "Token ", icon: U$ },
  { id: "count", label: "", icon: _F }
], yve = () => {
  const [e, t] = B.useState(null), [n, r] = B.useState(!1), [i, a] = B.useState(!1), [o, u] = B.useState({
    autoEnabled: !0,
    floorInterval: 10,
    bufferSize: 3,
    autoHide: !1
  }), [c, f] = B.useState({ ...W0, keepRecentCount: 3 }), [p, g] = B.useState(null), [x, b] = B.useState(0), [_, E] = B.useState(0);
  B.useEffect(() => {
    k();
  }, []);
  const k = async () => {
    var X;
    try {
      const { summarizerService: me } = await Promise.resolve().then(() => ju);
      await me.initializeForCurrentChat();
      const J = me.getStatus();
      t(J);
      const le = me.getConfig();
      u({
        autoEnabled: le.enabled,
        floorInterval: le.floorInterval,
        bufferSize: le.bufferSize || 3,
        autoHide: le.autoHide || !1
      });
      const Q = (X = tt.getSummarizerSettings()) == null ? void 0 : X.trimConfig;
      Q && f({ ...W0, ...Q });
      const { eventTrimmer: oe } = await Promise.resolve().then(() => yw), fe = await oe.getStatus();
      g(fe);
      const { useMemoryStore: ce } = await Promise.resolve().then(() => Kz), K = ce.getState(), { totalTokens: re, activeEventCount: de } = await K.countEventTokens();
      b(re), E(de);
    } catch (me) {
      console.error(" Summarizer :", me);
    }
  }, T = async () => {
    try {
      const { summarizerService: X } = await Promise.resolve().then(() => ju);
      X.start(), await k();
    } catch (X) {
      console.error(":", X);
    }
  }, R = async () => {
    try {
      const { summarizerService: X } = await Promise.resolve().then(() => ju);
      X.stop(), await k();
    } catch (X) {
      console.error(":", X);
    }
  }, N = async () => {
    r(!0);
    try {
      const { summarizerService: X } = await Promise.resolve().then(() => ju);
      await X.triggerSummary(!0), await k();
    } catch (X) {
      console.error(":", X);
    } finally {
      r(!1);
    }
  }, O = async () => {
    if (confirm("")) {
      r(!0);
      try {
        const { summarizerService: X } = await Promise.resolve().then(() => ju);
        await X.setLastSummarizedFloor(0), await k();
      } catch (X) {
        console.error(":", X);
      } finally {
        r(!1);
      }
    }
  }, P = (X) => {
    const me = { ...c, trigger: X };
    f(me), q(me);
  }, z = (X, me) => {
    const J = { ...c, [X]: me };
    f(J), q(J);
  }, q = (X) => {
    tt.setSummarizerSettings({ trimConfig: X });
  }, G = async () => {
    const X = { ...c, enabled: !c.enabled };
    f(X), q(X);
    const { eventTrimmer: me } = await Promise.resolve().then(() => yw);
    me.updateConfig({ enabled: X.enabled });
  }, Y = async () => {
    a(!0);
    try {
      const { eventTrimmer: X } = await Promise.resolve().then(() => yw);
      await X.trim(!0), await k();
    } catch (X) {
      console.error(":", X);
    } finally {
      a(!1);
    }
  }, F = (() => {
    switch (c.trigger) {
      case "token":
        return { value: c.tokenLimit ?? 10240, min: 1024, max: 1e5, step: 1024, label: "Token " };
      case "count":
        return { value: c.countLimit ?? 5, min: 2, max: 20, step: 1, label: "" };
      default:
        return { value: 10240, min: 1024, max: 1e5, step: 1024, label: "Token " };
    }
  })();
  return /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12", children: [
    /* @__PURE__ */ h.jsxs("section", { className: "space-y-8", children: [
      /* @__PURE__ */ h.jsxs("div", { children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mb-6", children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider", children: "" }),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "p-1 rounded text-muted-foreground hover:text-foreground transition-colors",
              onClick: k,
              title: "",
              children: /* @__PURE__ */ h.jsx(Or, { size: 14 })
            }
          )
        ] }),
        e ? /* @__PURE__ */ h.jsxs("div", { className: "space-y-6", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-1", children: "" }),
              /* @__PURE__ */ h.jsxs("div", { className: `flex items-center gap-2 text-lg font-medium ${e.running ? "text-green-500" : "text-muted-foreground"}`, children: [
                e.running ? /* @__PURE__ */ h.jsx(Kx, { size: 18 }) : /* @__PURE__ */ h.jsx(rf, { size: 18 }),
                e.running ? "" : ""
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-3xl font-light text-amber-500 font-mono", children: e.pendingFloors })
            ] })
          ] }),
          /* @__PURE__ */ h.jsx(ci, { length: 100, spacing: "md" }),
          /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/70 uppercase tracking-wider block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-xl font-mono text-foreground/80", children: e.currentFloor })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/70 uppercase tracking-wider block mb-1", children: " ()" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-xl font-mono text-foreground/80", children: _ })
            ] })
          ] }),
          /* @__PURE__ */ h.jsx(ci, { length: 30, spacing: "md" }),
          /* @__PURE__ */ h.jsxs("div", { children: [
            /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/60 uppercase tracking-wider block mb-1", children: " Token (Engram)" }),
            /* @__PURE__ */ h.jsx("div", { className: "text-sm font-mono text-primary/80", children: x.toLocaleString() })
          ] })
        ] }) : /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: "..." })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex gap-3", children: [
        e != null && e.running ? /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors",
            onClick: R,
            children: [
              /* @__PURE__ */ h.jsx(tD, { size: 14 }),
              ""
            ]
          }
        ) : /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors hover:bg-accent",
            onClick: T,
            children: [
              /* @__PURE__ */ h.jsx(em, { size: 14 }),
              ""
            ]
          }
        ),
        /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors disabled:opacity-50",
            onClick: N,
            disabled: n || (e == null ? void 0 : e.isSummarizing),
            children: [
              /* @__PURE__ */ h.jsx(Or, { size: 14, className: n ? "animate-spin" : "" }),
              n ? "..." : ""
            ]
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "pt-6 space-y-6", children: [
        /* @__PURE__ */ h.jsx(ci, { length: 100 }),
        /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ h.jsx("span", { className: "text-sm text-foreground", children: "" }),
            /* @__PURE__ */ h.jsx(
              qo,
              {
                label: "",
                checked: o.autoEnabled,
                onChange: async (X) => {
                  u((J) => ({ ...J, autoEnabled: X }));
                  const { summarizerService: me } = await Promise.resolve().then(() => ju);
                  me.updateConfig({ enabled: X });
                }
              }
            )
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-sm text-foreground", children: "" }),
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground", children: "" })
            ] }),
            /* @__PURE__ */ h.jsx(
              qo,
              {
                label: "",
                checked: o.autoHide,
                onChange: (X) => {
                  u((me) => ({ ...me, autoHide: X })), Promise.resolve().then(() => ju).then(({ summarizerService: me }) => {
                    me.updateConfig({ autoHide: X });
                  });
                }
              }
            )
          ] })
        ] }),
        o.autoEnabled && /* @__PURE__ */ h.jsx(h.Fragment, { children: /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground", children: [
              " ",
              /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: o.floorInterval }),
              " "
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
              /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
              /* @__PURE__ */ h.jsx(
                "div",
                {
                  className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                  style: { left: `${(o.floorInterval - 5) / 95 * 100}%`, transform: "translate(-50%, -50%)" }
                }
              ),
              /* @__PURE__ */ h.jsx(
                "input",
                {
                  type: "range",
                  min: 5,
                  max: 100,
                  step: 5,
                  value: o.floorInterval,
                  onChange: async (X) => {
                    const me = Number(X.target.value);
                    u((le) => ({ ...le, floorInterval: me }));
                    const { summarizerService: J } = await Promise.resolve().then(() => ju);
                    J.updateConfig({ floorInterval: me });
                  },
                  className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                  style: { appearance: "none", WebkitAppearance: "none" }
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground", children: [
              " ",
              /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: o.bufferSize }),
              " "
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
              /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
              /* @__PURE__ */ h.jsx(
                "div",
                {
                  className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                  style: { left: `${o.bufferSize / 20 * 100}%`, transform: "translate(-50%, -50%)" }
                }
              ),
              /* @__PURE__ */ h.jsx(
                "input",
                {
                  type: "range",
                  min: 0,
                  max: 20,
                  step: 1,
                  value: o.bufferSize,
                  onChange: (X) => {
                    const me = Number(X.target.value);
                    u((J) => ({ ...J, bufferSize: me })), Promise.resolve().then(() => ju).then(({ summarizerService: J }) => {
                      J.updateConfig({ bufferSize: me });
                    });
                  },
                  className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                  style: { appearance: "none", WebkitAppearance: "none" }
                }
              )
            ] })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ h.jsxs(
        "button",
        {
          className: "inline-flex items-center gap-2 px-3 py-1.5 text-xs text-red-500 hover:text-red-400 border border-red-500/30 hover:border-red-500/50 hover:bg-red-500/10 rounded transition-colors",
          onClick: O,
          disabled: n,
          title: " ()",
          children: [
            /* @__PURE__ */ h.jsx(Or, { size: 12, className: n ? "animate-spin" : "" }),
            ""
          ]
        }
      ) })
    ] }),
    /* @__PURE__ */ h.jsxs("section", { className: "space-y-6 lg:pl-8 relative", children: [
      /* @__PURE__ */ h.jsx(ci, { responsive: !0, length: 30 }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-sm font-medium text-foreground", children: "" }),
          /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mt-0.5", children: "" })
        ] }),
        /* @__PURE__ */ h.jsx(
          qo,
          {
            label: "",
            checked: c.enabled ?? !1,
            onChange: G
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: `space-y-6 transition-opacity ${c.enabled ? "opacity-100" : "opacity-40 pointer-events-none"}`, children: [
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground", children: "" }),
          /* @__PURE__ */ h.jsx("div", { className: "flex gap-6", children: gve.map((X) => /* @__PURE__ */ h.jsxs(
            "label",
            {
              className: "flex items-center gap-2 cursor-pointer group",
              onClick: () => P(X.id),
              children: [
                /* @__PURE__ */ h.jsx(
                  "span",
                  {
                    className: `w-4 h-4 rounded-full border-2 flex items-center justify-center transition-colors
                                        ${c.trigger === X.id ? "border-primary bg-primary" : "border-border group-hover:border-muted-foreground"}`,
                    children: c.trigger === X.id && /* @__PURE__ */ h.jsx("span", { className: "w-1.5 h-1.5 rounded-full bg-primary-foreground" })
                  }
                ),
                /* @__PURE__ */ h.jsx("span", { className: `text-sm transition-colors ${c.trigger === X.id ? "text-foreground" : "text-muted-foreground"}`, children: X.label })
              ]
            },
            X.id
          )) })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground", children: F.label === "Token " ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            " Token  ",
            /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: F.value }),
            " "
          ] }) : /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            " ",
            /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: F.value }),
            " "
          ] }) }),
          /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
            /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                style: { left: `${(F.value - F.min) / (F.max - F.min) * 100}%`, transform: "translate(-50%, -50%)" }
              }
            ),
            /* @__PURE__ */ h.jsx(
              "input",
              {
                type: "range",
                min: F.min,
                max: F.max,
                step: F.step,
                value: F.value,
                onChange: (X) => {
                  const me = Number(X.target.value), J = c.trigger === "token" ? "tokenLimit" : "countLimit";
                  z(J, me);
                },
                className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                style: { appearance: "none", WebkitAppearance: "none" }
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground", children: [
            " ",
            /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: c.keepRecentCount ?? 3 }),
            " "
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
            /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                style: { left: `${(c.keepRecentCount ?? 3) / 10 * 100}%`, transform: "translate(-50%, -50%)" }
              }
            ),
            /* @__PURE__ */ h.jsx(
              "input",
              {
                type: "range",
                min: 0,
                max: 10,
                step: 1,
                value: c.keepRecentCount ?? 3,
                onChange: (X) => z("keepRecentCount", Number(X.target.value)),
                className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                style: { appearance: "none", WebkitAppearance: "none" }
              }
            )
          ] })
        ] }),
        p && /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground space-y-1", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ h.jsx("span", { children: ":" }),
            /* @__PURE__ */ h.jsx("span", { className: "font-mono", children: p.pendingEntryCount })
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ h.jsxs("span", { children: [
              "",
              c.trigger === "token" ? "Token" : "",
              ":"
            ] }),
            /* @__PURE__ */ h.jsxs("span", { className: `font-mono ${p.triggered ? "text-amber-500" : ""}`, children: [
              p.currentValue,
              " / ",
              F.value
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs(
          "button",
          {
            type: "button",
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg hover:bg-accent transition-colors disabled:opacity-50",
            onClick: Y,
            disabled: i || ((p == null ? void 0 : p.pendingEntryCount) ?? 0) < 2,
            children: [
              /* @__PURE__ */ h.jsx(iU, { size: 14, className: i ? "animate-pulse" : "" }),
              i ? "..." : ""
            ]
          }
        ),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/70 leading-relaxed", children: " Token " })
      ] })
    ] })
  ] });
}, vve = () => {
  const [e, t] = B.useState({ total: 0, embedded: 0, pending: 0 }), [n, r] = B.useState(null), [i, a] = B.useState(!1), [o, u] = B.useState(!0), [c, f] = B.useState(null), [p, g] = B.useState(null), [x, b] = B.useState({ ...mE }), [_, E] = B.useState(null);
  B.useEffect(() => {
    k();
  }, []);
  const k = async () => {
    u(!0), f(null);
    try {
      const G = tt.get("apiSettings");
      G != null && G.vectorConfig && (E(G.vectorConfig), Gr.setConfig(G.vectorConfig)), G != null && G.embeddingConfig && b({ ...mE, ...G.embeddingConfig });
      const Y = await Gr.getEmbeddingStats();
      t(Y);
    } catch (G) {
      f(G.message || "");
    } finally {
      u(!1);
    }
  }, T = B.useCallback(async () => {
    const G = await Gr.getEmbeddingStats();
    t(G);
  }, []), R = async () => {
    if (!_) {
      f("");
      return;
    }
    a(!0), r({ current: 0, total: e.pending, errors: 0 }), f(null), g(null);
    try {
      Gr.setConfig(_), Gr.setConcurrency(x.concurrency);
      const G = await Gr.embedUnprocessedEvents((Y, W, F) => {
        r({ current: Y, total: W, errors: F });
      });
      g(G), await T();
    } catch (G) {
      f(G.message || "");
    } finally {
      a(!1), r(null);
    }
  }, N = () => {
    Gr.stop();
  }, O = async () => {
    if (!_) {
      f("");
      return;
    }
    if (confirm("")) {
      a(!0), r({ current: 0, total: e.total, errors: 0 }), f(null), g(null);
      try {
        Gr.setConfig(_), Gr.setConcurrency(x.concurrency);
        const G = await Gr.reembedAllEvents((Y, W, F) => {
          r({ current: Y, total: W, errors: F });
        });
        g(G), await T();
      } catch (G) {
        f(G.message || "");
      } finally {
        a(!1), r(null);
      }
    }
  }, P = (G) => {
    const Y = { ...x, ...G };
    b(Y);
    const W = tt.get("apiSettings");
    W && tt.set("apiSettings", {
      ...W,
      embeddingConfig: Y
    });
  }, z = n && n.total > 0 ? Math.round(n.current / n.total * 100) : 0, q = _ && (_.source === "transformers" || _.model);
  return o ? /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-center h-48 text-muted-foreground gap-2", children: [
    /* @__PURE__ */ h.jsx($u, { size: 20, className: "animate-spin" }),
    /* @__PURE__ */ h.jsx("span", { className: "text-sm font-light", children: "..." })
  ] }) : /* @__PURE__ */ h.jsxs("div", { className: "py-4", children: [
    /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-3 gap-4 mb-6", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
        /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground uppercase tracking-wider", children: "" }),
        /* @__PURE__ */ h.jsx("span", { className: "text-2xl font-light", children: e.total })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
        /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground uppercase tracking-wider", children: "" }),
        /* @__PURE__ */ h.jsx("span", { className: "text-2xl font-light text-primary", children: e.embedded })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col gap-1", children: [
        /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground uppercase tracking-wider", children: "" }),
        /* @__PURE__ */ h.jsx("span", { className: "text-2xl font-light text-warning", children: e.pending })
      ] })
    ] }),
    n && /* @__PURE__ */ h.jsxs("div", { className: "mb-6 p-4 bg-muted/30 rounded-lg", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mb-2", children: [
        /* @__PURE__ */ h.jsxs("span", { className: "text-sm text-muted-foreground", children: [
          " ",
          n.current,
          "/",
          n.total
        ] }),
        /* @__PURE__ */ h.jsxs("span", { className: "text-sm font-medium", children: [
          z,
          "%"
        ] })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "h-2 bg-muted rounded-full overflow-hidden", children: /* @__PURE__ */ h.jsx(
        "div",
        {
          className: "h-full bg-primary transition-all duration-300",
          style: { width: `${z}%` }
        }
      ) }),
      n.errors > 0 && /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-destructive mt-2", children: [
        n.errors,
        " "
      ] })
    ] }),
    p && /* @__PURE__ */ h.jsxs("div", { className: `mb-6 p-3 rounded-lg flex items-center gap-2 ${p.failed > 0 ? "bg-warning/10 text-warning" : "bg-primary/10 text-primary"}`, children: [
      p.failed > 0 ? /* @__PURE__ */ h.jsx(rf, { size: 16 }) : /* @__PURE__ */ h.jsx(Kx, { size: 16 }),
      /* @__PURE__ */ h.jsxs("span", { className: "text-sm", children: [
        "",
        p.success,
        " ",
        p.failed > 0 && `${p.failed} `
      ] })
    ] }),
    c && /* @__PURE__ */ h.jsxs("div", { className: "mb-6 p-3 bg-destructive/10 text-destructive rounded-lg flex items-center gap-2", children: [
      /* @__PURE__ */ h.jsx(rf, { size: 16 }),
      /* @__PURE__ */ h.jsx("span", { className: "text-sm", children: c })
    ] }),
    !q && /* @__PURE__ */ h.jsx("div", { className: "mb-6 p-3 bg-muted/50 rounded-lg", children: /* @__PURE__ */ h.jsxs("p", { className: "text-sm text-muted-foreground", children: [
      "",
      /* @__PURE__ */ h.jsx("span", { className: "text-primary mx-1", children: "API     " }),
      ""
    ] }) }),
    /* @__PURE__ */ h.jsx("div", { className: "flex flex-wrap gap-3 mb-6", children: i ? /* @__PURE__ */ h.jsxs(
      "button",
      {
        onClick: N,
        className: "inline-flex items-center gap-2 px-4 py-2 bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90 transition-colors",
        children: [
          /* @__PURE__ */ h.jsx(sD, { size: 16 }),
          ""
        ]
      }
    ) : /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
      /* @__PURE__ */ h.jsxs(
        "button",
        {
          onClick: R,
          disabled: e.pending === 0 || !q,
          className: "inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
          children: [
            /* @__PURE__ */ h.jsx(em, { size: 16 }),
            " (",
            e.pending,
            ")"
          ]
        }
      ),
      /* @__PURE__ */ h.jsxs(
        "button",
        {
          onClick: O,
          disabled: e.total === 0 || !q,
          className: "inline-flex items-center gap-2 px-4 py-2 border border-border text-foreground rounded-md hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
          children: [
            /* @__PURE__ */ h.jsx(Or, { size: 16 }),
            ""
          ]
        }
      ),
      /* @__PURE__ */ h.jsx(
        "button",
        {
          onClick: T,
          className: "inline-flex items-center gap-2 px-3 py-2 text-muted-foreground hover:text-foreground transition-colors",
          children: /* @__PURE__ */ h.jsx(Or, { size: 16 })
        }
      )
    ] }) }),
    /* @__PURE__ */ h.jsx(ci, { className: "my-6" }),
    /* @__PURE__ */ h.jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider", children: "" }),
      /* @__PURE__ */ h.jsx(
        qo,
        {
          label: "",
          checked: x.enabled,
          onChange: (G) => P({ enabled: G }),
          description: ""
        }
      ),
      /* @__PURE__ */ h.jsx(
        zu,
        {
          label: "",
          value: x.trigger,
          onChange: (G) => P({ trigger: G }),
          options: [
            { value: "with_trim", label: " Trim " },
            { value: "standalone", label: "" },
            { value: "manual", label: "" }
          ],
          description: "with_trim: Trim  | standalone: "
        }
      ),
      /* @__PURE__ */ h.jsx(
        Rr,
        {
          label: "",
          value: x.concurrency,
          onChange: (G) => P({ concurrency: Math.max(1, Math.min(20, G)) }),
          min: 1,
          max: 20,
          description: " (1-20)"
        }
      ),
      _ && /* @__PURE__ */ h.jsxs("div", { className: "p-3 bg-muted/30 rounded-lg", children: [
        /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mb-1", children: "" }),
        /* @__PURE__ */ h.jsxs("p", { className: "text-sm", children: [
          /* @__PURE__ */ h.jsx("span", { className: "text-primary", children: _.source }),
          _.model && /* @__PURE__ */ h.jsxs("span", { className: "text-muted-foreground ml-2", children: [
            "/ ",
            _.model
          ] })
        ] })
      ] })
    ] })
  ] });
}, xve = ({ config: e, onChange: t, rerankConfig: n, onRerankChange: r }) => {
  var a, o, u, c, f, p, g, x, b, _, E;
  const i = (k) => {
    const T = { ...e, ...k };
    t(T);
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "space-y-6 animate-in fade-in slide-in-from-right-4 duration-500", children: [
    /* @__PURE__ */ h.jsx("div", { className: "bg-secondary/20 p-4 rounded-lg border border-border/50", children: /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ h.jsx("div", { className: `p-2 rounded-md ${e.enabled ? "bg-primary/20 text-primary" : "bg-muted text-muted-foreground"}`, children: /* @__PURE__ */ h.jsx(z5, { size: 20 }) }),
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("div", { className: "font-medium", children: " RAG " }),
          /* @__PURE__ */ h.jsx("div", { className: "text-xs text-muted-foreground", children: "" })
        ] })
      ] }),
      /* @__PURE__ */ h.jsx(
        ui,
        {
          checked: e.enabled,
          onChange: (k) => i({ enabled: k })
        }
      )
    ] }) }),
    /* @__PURE__ */ h.jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ h.jsx("h3", { className: "text-sm font-medium text-muted-foreground uppercase tracking-wider px-1", children: "" }),
      /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ h.jsxs("div", { className: `p-4 rounded-lg border transition-all ${e.useBruteForce ? "bg-primary/5 border-primary/30" : "bg-card border-border/50 hover:border-border"}`, children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-start justify-between mb-2", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-sm font-medium", children: [
              /* @__PURE__ */ h.jsx(sf, { size: 16, className: e.useBruteForce ? "text-primary" : "text-muted-foreground" }),
              " (Brute Force)"
            ] }),
            /* @__PURE__ */ h.jsx(
              ui,
              {
                checked: e.useBruteForce,
                onChange: (k) => i({ useBruteForce: k })
              }
            )
          ] }),
          /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground leading-relaxed", children: "" })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: `p-4 rounded-lg border transition-all ${e.useEmbedding ? "bg-primary/5 border-primary/30" : "bg-card border-border/50 hover:border-border"}`, children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-start justify-between mb-2", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-sm font-medium", children: [
              /* @__PURE__ */ h.jsx(py, { size: 16, className: e.useEmbedding ? "text-primary" : "text-muted-foreground" }),
              " (Embedding)"
            ] }),
            /* @__PURE__ */ h.jsx(
              ui,
              {
                checked: e.useEmbedding,
                onChange: (k) => i({ useEmbedding: k })
              }
            )
          ] }),
          /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground leading-relaxed", children: "RAG " })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: `p-4 rounded-lg border transition-all ${e.usePreprocessing ? "bg-primary/5 border-primary/30" : "bg-card border-border/50 hover:border-border"}`, children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-start justify-between mb-2", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-sm font-medium", children: [
              /* @__PURE__ */ h.jsx(WT, { size: 16, className: e.usePreprocessing ? "text-primary" : "text-muted-foreground" }),
              "LLM "
            ] }),
            /* @__PURE__ */ h.jsx(
              ui,
              {
                checked: e.usePreprocessing,
                onChange: (k) => i({ usePreprocessing: k })
              }
            )
          ] }),
          /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground leading-relaxed", children: " LLM " })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: `p-4 rounded-lg border transition-all ${e.useRerank ? "bg-primary/5 border-primary/30" : "bg-card border-border/50 hover:border-border"}`, children: [
          /* @__PURE__ */ h.jsxs("div", { className: "flex items-start justify-between mb-2", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-sm font-medium", children: [
              /* @__PURE__ */ h.jsx($0, { size: 16, className: e.useRerank ? "text-primary" : "text-muted-foreground" }),
              "Rerank "
            ] }),
            /* @__PURE__ */ h.jsx(
              ui,
              {
                checked: e.useRerank,
                disabled: !e.useEmbedding,
                onChange: (k) => i({ useRerank: k })
              }
            )
          ] }),
          /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground leading-relaxed", children: [
            " Rerank ",
            !e.useEmbedding && /* @__PURE__ */ h.jsxs("span", { className: "text-yellow-500 block mt-1 text-[10px] flex items-center gap-1", children: [
              /* @__PURE__ */ h.jsx(oE, { size: 10 }),
              " "
            ] })
          ] }),
          e.useRerank && n && /* @__PURE__ */ h.jsxs("div", { className: "mt-3 pt-3 border-t border-border/30 space-y-3", children: [
            /* @__PURE__ */ h.jsx(
              Rr,
              {
                label: "Top-N",
                description: "",
                min: 1,
                max: 50,
                step: 1,
                value: n.topN,
                onChange: (k) => r == null ? void 0 : r({ ...n, topN: k })
              }
            ),
            /* @__PURE__ */ h.jsx(
              Rr,
              {
                label: " (Hybrid Alpha)",
                description: "0 = 1 =  Rerank ",
                min: 0,
                max: 1,
                step: 0.1,
                value: n.hybridAlpha,
                onChange: (k) => r == null ? void 0 : r({ ...n, hybridAlpha: k })
              }
            )
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-border/30", children: [
      /* @__PURE__ */ h.jsx(
        Rr,
        {
          label: " (Top-K)",
          description: "",
          min: 1,
          max: 100,
          value: ((a = e.embedding) == null ? void 0 : a.topK) ?? 20,
          onChange: (k) => {
            var T;
            return i({
              embedding: {
                topK: k,
                minScoreThreshold: ((T = e.embedding) == null ? void 0 : T.minScoreThreshold) ?? 0.3
              }
            });
          }
        }
      ),
      /* @__PURE__ */ h.jsx(
        Rr,
        {
          label: "",
          description: " (0.0 - 1.0)",
          min: 0,
          max: 1,
          step: 0.05,
          value: ((o = e.embedding) == null ? void 0 : o.minScoreThreshold) ?? 0.3,
          onChange: (k) => {
            var T;
            return i({
              embedding: {
                topK: ((T = e.embedding) == null ? void 0 : T.topK) ?? 20,
                minScoreThreshold: k
              }
            });
          }
        }
      )
    ] }),
    /* @__PURE__ */ h.jsxs(
      "div",
      {
        className: `space-y-4 pt-4 border-t border-border/30 relative transition-all duration-300 ${(u = e.brainRecall) != null && u.enabled ? "p-4 rounded-lg border border-primary/30 bg-primary/5" : ""}`,
        style: (c = e.brainRecall) != null && c.enabled ? {
          boxShadow: "0 0 15px -3px color-mix(in srgb, var(--primary) 20%, transparent)"
        } : void 0,
        children: [
          /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ h.jsx(
                  "div",
                  {
                    className: `p-1.5 rounded-md transition-colors ${(f = e.brainRecall) != null && f.enabled ? "bg-primary/20 text-primary" : "bg-muted text-muted-foreground"}`,
                    style: (p = e.brainRecall) != null && p.enabled ? {
                      boxShadow: "0 0 10px color-mix(in srgb, var(--primary) 40%, transparent)"
                    } : void 0,
                    children: /* @__PURE__ */ h.jsx(WT, { size: 16 })
                  }
                ),
                /* @__PURE__ */ h.jsx(
                  "h3",
                  {
                    className: `text-sm font-medium uppercase tracking-wider transition-all ${(g = e.brainRecall) != null && g.enabled ? "text-primary" : "text-muted-foreground"}`,
                    style: (x = e.brainRecall) != null && x.enabled ? {
                      textShadow: "0 0 8px color-mix(in srgb, var(--primary) 60%, transparent)"
                    } : void 0,
                    children: ""
                  }
                ),
                /* @__PURE__ */ h.jsx("span", { className: `text-[10px] px-1.5 py-0.5 rounded font-medium border ${(b = e.brainRecall) != null && b.enabled ? "bg-yellow-500/10 text-yellow-500 border-yellow-500/30" : "bg-muted text-muted-foreground border-transparent"}`, children: "EXPERIMENTAL" })
              ] }),
              /* @__PURE__ */ h.jsx(
                ui,
                {
                  checked: ((_ = e.brainRecall) == null ? void 0 : _.enabled) ?? !1,
                  onChange: (k) => {
                    var T, R, N, O, P, z;
                    return i({
                      brainRecall: {
                        enabled: k,
                        workingLimit: ((T = e.brainRecall) == null ? void 0 : T.workingLimit) ?? 10,
                        shortTermLimit: ((R = e.brainRecall) == null ? void 0 : R.shortTermLimit) ?? 35,
                        reinforceFactor: ((N = e.brainRecall) == null ? void 0 : N.reinforceFactor) ?? 0.2,
                        decayRate: ((O = e.brainRecall) == null ? void 0 : O.decayRate) ?? 0.08,
                        evictionThreshold: ((P = e.brainRecall) == null ? void 0 : P.evictionThreshold) ?? 0.25,
                        contextSwitchThreshold: ((z = e.brainRecall) == null ? void 0 : z.contextSwitchThreshold) ?? 0.4
                      },
                      //  sticky 
                      sticky: k ? { ...e.sticky, enabled: !1 } : e.sticky
                    });
                  }
                }
              )
            ] }),
            /* @__PURE__ */ h.jsxs("p", { className: "text-xs text-muted-foreground mt-2 pl-8 leading-relaxed", children: [
              "",
              /* @__PURE__ */ h.jsx("span", { className: "opacity-70 ml-1", children: "" })
            ] })
          ] }),
          ((E = e.brainRecall) == null ? void 0 : E.enabled) && /* @__PURE__ */ h.jsxs("div", { className: "space-y-6 pt-2 animate-in fade-in slide-in-from-top-2 duration-300", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "space-y-3 pl-2 border-l-2 border-primary/20 ml-2", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-xs text-primary/80 font-medium uppercase tracking-wider", children: [
                /* @__PURE__ */ h.jsx($0, { size: 12 }),
                ""
              ] }),
              /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
                /* @__PURE__ */ h.jsx(
                  Rr,
                  {
                    label: "",
                    description: "",
                    min: 1,
                    max: 20,
                    step: 1,
                    value: e.brainRecall.workingLimit,
                    onChange: (k) => i({
                      brainRecall: { ...e.brainRecall, workingLimit: k }
                    })
                  }
                ),
                /* @__PURE__ */ h.jsx(
                  Rr,
                  {
                    label: "",
                    description: "",
                    min: 1,
                    max: 50,
                    step: 1,
                    value: e.brainRecall.shortTermLimit,
                    onChange: (k) => i({
                      brainRecall: { ...e.brainRecall, shortTermLimit: k }
                    })
                  }
                )
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "space-y-3 pl-2 border-l-2 border-primary/20 ml-2", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-xs text-primary/80 font-medium uppercase tracking-wider", children: [
                /* @__PURE__ */ h.jsx(sf, { size: 12 }),
                ""
              ] }),
              /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-3 gap-4", children: [
                /* @__PURE__ */ h.jsx(
                  Rr,
                  {
                    label: "",
                    description: "",
                    min: 0,
                    max: 1,
                    step: 0.05,
                    value: e.brainRecall.reinforceFactor,
                    onChange: (k) => i({
                      brainRecall: { ...e.brainRecall, reinforceFactor: k }
                    })
                  }
                ),
                /* @__PURE__ */ h.jsx(
                  Rr,
                  {
                    label: "",
                    description: "",
                    min: 0,
                    max: 1,
                    step: 0.01,
                    value: e.brainRecall.decayRate,
                    onChange: (k) => i({
                      brainRecall: { ...e.brainRecall, decayRate: k }
                    })
                  }
                ),
                /* @__PURE__ */ h.jsx(
                  Rr,
                  {
                    label: "",
                    description: "",
                    min: 0,
                    max: 1,
                    step: 0.05,
                    value: e.brainRecall.evictionThreshold,
                    onChange: (k) => i({
                      brainRecall: { ...e.brainRecall, evictionThreshold: k }
                    })
                  }
                )
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "space-y-3 pl-2 border-l-2 border-primary/20 ml-2", children: [
              /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-xs text-primary/80 font-medium uppercase tracking-wider", children: [
                /* @__PURE__ */ h.jsx(oE, { size: 12 }),
                ""
              ] }),
              /* @__PURE__ */ h.jsx(
                Rr,
                {
                  label: "",
                  description: "/",
                  min: 0,
                  max: 1,
                  step: 0.1,
                  value: e.brainRecall.contextSwitchThreshold,
                  onChange: (k) => i({
                    brainRecall: { ...e.brainRecall, contextSwitchThreshold: k }
                  })
                }
              )
            ] })
          ] })
        ]
      }
    )
  ] });
}, bve = () => {
  const {
    recallConfig: e,
    rerankConfig: t,
    updateRecallConfig: n,
    updateRerankConfig: r,
    saveConfig: i,
    hasChanges: a
  } = tT();
  return /* @__PURE__ */ h.jsxs("div", { className: "p-1 space-y-4", children: [
    /* @__PURE__ */ h.jsx(
      xve,
      {
        config: e,
        onChange: n,
        rerankConfig: t,
        onRerankChange: r
      }
    ),
    a && /* @__PURE__ */ h.jsx("div", { className: "flex justify-end pt-2", children: /* @__PURE__ */ h.jsxs(
      "button",
      {
        className: "inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-primary hover:text-primary-foreground hover:bg-primary border border-primary/50 rounded transition-colors",
        onClick: i,
        children: [
          /* @__PURE__ */ h.jsx(Xc, { size: 12 }),
          ""
        ]
      }
    ) })
  ] });
}, wve = () => {
  const {
    entityExtractConfig: e,
    updateEntityExtractConfig: t,
    saveConfig: n,
    hasChanges: r
  } = tT(), [i, a] = B.useState(null), [o, u] = B.useState(!1), c = async () => {
    try {
      const x = await Du.getStatus();
      a(x);
    } catch (x) {
      console.error("[EntityConfigPanel] Failed to load status:", x);
    }
  };
  B.useEffect(() => {
    c();
  }, []);
  const f = () => {
    const x = { ...e, enabled: !e.enabled };
    t(x), Du.updateConfig(x);
  }, p = (x) => {
    const b = { ...e, floorInterval: Math.max(10, x) };
    t(b), Du.updateConfig(b);
  }, g = async () => {
    u(!0);
    try {
      await Du.extractManual(), await c();
    } catch (x) {
      console.error("[EntityConfigPanel] Manual extraction failed:", x);
    } finally {
      u(!1);
    }
  };
  return /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12", children: [
    /* @__PURE__ */ h.jsxs("section", { className: "space-y-8", children: [
      /* @__PURE__ */ h.jsxs("div", { children: [
        /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between mb-6", children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider", children: "" }),
          /* @__PURE__ */ h.jsx(
            "button",
            {
              className: "p-1 rounded text-muted-foreground hover:text-foreground transition-colors",
              onClick: c,
              title: "",
              children: /* @__PURE__ */ h.jsx(Or, { size: 14 })
            }
          )
        ] }),
        i ? /* @__PURE__ */ h.jsxs("div", { className: "space-y-6", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: `text-lg font-medium ${e.enabled ? "text-green-500" : "text-muted-foreground"}`, children: e.enabled ? "" : "" })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-3xl font-light text-primary font-mono", children: i.entityCount })
            ] })
          ] }),
          /* @__PURE__ */ h.jsx(ci, { length: 100, spacing: "md" }),
          /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/70 uppercase tracking-wider block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-xl font-mono text-foreground/80", children: i.floorInterval })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-[10px] text-muted-foreground/70 uppercase tracking-wider block mb-1", children: "" }),
              /* @__PURE__ */ h.jsx("div", { className: "text-xl font-mono text-foreground/80", children: i.lastExtractedFloor })
            ] })
          ] })
        ] }) : /* @__PURE__ */ h.jsx("p", { className: "text-sm text-muted-foreground", children: "..." })
      ] }),
      /* @__PURE__ */ h.jsx("div", { className: "flex gap-3", children: /* @__PURE__ */ h.jsxs(
        "button",
        {
          onClick: g,
          disabled: o || (i == null ? void 0 : i.isExtracting) || !e.enabled,
          className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
          children: [
            /* @__PURE__ */ h.jsx(Or, { size: 14, className: o ? "animate-spin" : "" }),
            o ? "..." : ""
          ]
        }
      ) })
    ] }),
    /* @__PURE__ */ h.jsxs("section", { className: "space-y-6 lg:pl-8 relative", children: [
      /* @__PURE__ */ h.jsx(ci, { responsive: !0, length: 30 }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ h.jsxs("div", { children: [
          /* @__PURE__ */ h.jsx("h2", { className: "text-sm font-medium text-foreground", children: "" }),
          /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground mt-0.5", children: "" })
        ] }),
        /* @__PURE__ */ h.jsx(
          qo,
          {
            label: "",
            checked: e.enabled,
            onChange: f
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: `space-y-6 transition-opacity ${e.enabled ? "opacity-100" : "opacity-40 pointer-events-none"}`, children: [
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground", children: [
            " ",
            /* @__PURE__ */ h.jsx("span", { className: "text-base font-medium text-foreground mx-0.5", children: e.floorInterval }),
            " "
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "relative h-4 flex items-center group cursor-pointer", children: [
            /* @__PURE__ */ h.jsx("div", { className: "absolute inset-x-0 h-[1px]", style: { backgroundColor: "var(--border)" } }),
            /* @__PURE__ */ h.jsx(
              "div",
              {
                className: "absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-muted-foreground/80 rounded-full shadow-sm pointer-events-none transition-transform duration-75 ease-out group-hover:scale-125 group-hover:bg-foreground",
                style: { left: `${(e.floorInterval - 10) / 90 * 100}%`, transform: "translate(-50%, -50%)" }
              }
            ),
            /* @__PURE__ */ h.jsx(
              "input",
              {
                type: "range",
                min: 10,
                max: 100,
                step: 5,
                value: e.floorInterval,
                onChange: (x) => p(parseInt(x.target.value)),
                className: "absolute inset-x-0 w-full h-full opacity-0 cursor-pointer z-10 m-0",
                style: { appearance: "none", WebkitAppearance: "none" }
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground/70 leading-relaxed", children: "" }),
        r && /* @__PURE__ */ h.jsx("div", { className: "flex justify-end pt-4", children: /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-primary hover:text-primary-foreground hover:bg-primary border border-primary/50 rounded transition-colors",
            onClick: n,
            children: [
              /* @__PURE__ */ h.jsx(Xc, { size: 12 }),
              ""
            ]
          }
        ) })
      ] })
    ] })
  ] });
}, _ve = {
  mode: "detailed",
  chunkSize: 2e3,
  overlapSize: 200
};
class Sve {
  constructor() {
    yt(this, "queue", {
      tasks: [],
      isRunning: !1,
      isPaused: !1,
      currentTaskIndex: 0,
      overallProgress: { current: 0, total: 0 }
    });
    yt(this, "onProgress");
    yt(this, "stopSignal", !1);
  }
  /**  */
  async analyzeHistory(t = 0, n) {
    const i = Bo.getStatus().currentFloor, a = n ?? i, o = Bo.getConfig(), u = Du.getConfig(), c = O0.getConfig(), f = a - t, p = o.floorInterval || 10, g = u.floorInterval || 50, x = Math.ceil(f / p), b = u.enabled ? Math.ceil(f / g) : 0, _ = c.countLimit || 5, E = c.enabled ? Math.floor(x / _) : 0, k = x * 2, T = x * 2e3 + b * 2e3 + E * 2e3 + k * 200;
    return {
      currentFloor: i,
      startFloor: t,
      endFloor: a,
      summaryTasks: x,
      entityTasks: b,
      trimTasks: E,
      embedTasks: k,
      estimatedTokens: T
    };
  }
  /**  */
  buildQueue(t) {
    const n = [], { startFloor: r, endFloor: i, summaryTasks: a, entityTasks: o, trimTasks: u, embedTasks: c } = t, f = Bo.getConfig().floorInterval || 10, p = Du.getConfig().floorInterval || 50;
    for (let g = 0; g < a; g++) {
      const x = r + g * f, b = Math.min(x + f, i);
      n.push({
        id: Dp(),
        type: "summary",
        status: "pending",
        progress: { current: 0, total: 1 },
        floorRange: { start: x, end: b }
      });
    }
    for (let g = 0; g < o; g++) {
      const x = r + g * p, b = Math.min(x + p, i);
      n.push({
        id: Dp(),
        type: "entity",
        status: "pending",
        progress: { current: 0, total: 1 },
        floorRange: { start: x, end: b }
      });
    }
    for (let g = 0; g < u; g++)
      n.push({
        id: Dp(),
        type: "trim",
        status: "pending",
        progress: { current: 0, total: 1 }
      });
    return n.push({
      id: Dp(),
      type: "embed",
      status: "pending",
      progress: { current: 0, total: c }
    }), n;
  }
  /**  */
  async start(t = 0, n, r) {
    if (this.queue.isRunning) {
      pe.warn(qe.BATCH, "");
      return;
    }
    this.onProgress = r, this.stopSignal = !1;
    const i = await this.analyzeHistory(t, n);
    this.queue.tasks = this.buildQueue(i), this.queue.isRunning = !0, this.queue.isPaused = !1, this.queue.currentTaskIndex = 0, this.queue.overallProgress = { current: 0, total: this.queue.tasks.length }, pe.info(qe.BATCH, ` ${this.queue.tasks.length} `), this.notifyProgress(), await this.runQueue();
  }
  /**  */
  async runQueue() {
    for (; this.queue.currentTaskIndex < this.queue.tasks.length; ) {
      if (this.stopSignal) {
        pe.info(qe.BATCH, "");
        break;
      }
      if (this.queue.isPaused) {
        await new Promise((i) => setTimeout(i, 500));
        continue;
      }
      const r = this.queue.tasks[this.queue.currentTaskIndex];
      r.status = "running", this.notifyProgress();
      try {
        await this.executeTask(r), r.status = "done", r.progress.current = r.progress.total;
      } catch (i) {
        r.status = "error", r.error = String(i), pe.error(qe.BATCH, ` ${r.type} `, { error: String(i) }), Zt.error(`: ${r.type}`, "Engram ");
      }
      this.queue.currentTaskIndex++, this.queue.overallProgress.current = this.queue.currentTaskIndex, this.notifyProgress();
    }
    this.queue.isRunning = !1;
    const t = this.queue.tasks.filter((r) => r.status === "done").length, n = this.queue.tasks.filter((r) => r.status === "error").length;
    pe.success(qe.BATCH, ""), n === 0 ? Zt.success(`: ${t} `, "Engram", {
      action: { goto: "processing" }
    }) : Zt.warning(`: ${t} , ${n} `, "Engram", {
      action: { goto: "devlog" }
    }), this.notifyProgress();
  }
  /**  */
  async executeTask(t) {
    switch (t.type) {
      case "summary":
        await this.executeSummaryTask(t);
        break;
      case "entity":
        await this.executeEntityTask(t);
        break;
      case "trim":
        await this.executeTrimTask(t);
        break;
      case "embed":
        await this.executeEmbedTask(t);
        break;
    }
  }
  async executeSummaryTask(t) {
    if (!t.floorRange) return;
    await Bo.setLastSummarizedFloor(t.floorRange.start), await Bo.triggerSummary(!0) || (t.status = "skipped");
  }
  async executeEntityTask(t) {
    if (!t.floorRange) return;
    await Du.extractByRange([t.floorRange.start, t.floorRange.end], !0) || (t.status = "skipped");
  }
  async executeTrimTask(t) {
    const { canTrim: n } = await O0.canTrim();
    n ? await O0.trim(!0) : t.status = "skipped";
  }
  async executeEmbedTask(t) {
    const n = await Gr.embedUnprocessedEvents((r, i) => {
      t.progress.current = r, t.progress.total = i, this.notifyProgress();
    });
    t.progress.current = n.success;
  }
  pause() {
    this.queue.isPaused = !0, pe.info(qe.BATCH, ""), this.notifyProgress();
  }
  resume() {
    this.queue.isPaused = !1, pe.info(qe.BATCH, ""), this.notifyProgress();
  }
  stop() {
    this.stopSignal = !0, this.queue.isPaused = !1, pe.info(qe.BATCH, "");
  }
  reset() {
    this.stopSignal = !0, this.queue = {
      tasks: [],
      isRunning: !1,
      isPaused: !1,
      currentTaskIndex: 0,
      overallProgress: { current: 0, total: 0 }
    }, this.notifyProgress();
  }
  getStatus() {
    let t = "idle";
    this.queue.isRunning && (t = "running"), this.queue.isPaused && (t = "pending");
    const n = this.queue.tasks[this.queue.currentTaskIndex];
    n && n.status === "error" && (t = "error");
    const r = this.queue.overallProgress.total > 0 ? this.queue.overallProgress.current / this.queue.overallProgress.total * 100 : 0;
    return {
      status: t,
      queue: { ...this.queue },
      // Return copy
      progress: r,
      currentTask: n ? n.type : null,
      error: (n == null ? void 0 : n.error) || null
    };
  }
  clear() {
    this.reset();
  }
  getQueue() {
    return { ...this.queue };
  }
  notifyProgress() {
    if (this.onProgress)
      try {
        this.onProgress({ ...this.queue });
      } catch (t) {
        pe.debug(qe.BATCH, "UI ", t);
      }
  }
  // ====================  txt  ====================
  chunkText(t, n, r) {
    const i = [];
    let a = 0;
    for (; a < t.length; ) {
      const o = Math.min(a + n, t.length);
      if (i.push(t.slice(a, o)), a = o - r, a >= t.length - r) break;
    }
    return i;
  }
  /**
   * V0.9.7:  LLM 
   */
  async summarizeChunk(t, n) {
    const r = nb("summary"), i = (r == null ? void 0 : r.systemPrompt) || "", a = ` JSON

---
${t}
---`;
    try {
      const o = await Qd.generate({ systemPrompt: i, userPrompt: a });
      if (o.success && o.content)
        return pe.debug(qe.BATCH, ` ${n} `), o.content;
    } catch (o) {
      pe.warn(qe.BATCH, ` ${n} `, { error: o });
    }
    return "";
  }
  async importText(t, n = _ve, r) {
    var c;
    const i = this.chunkText(t, n.chunkSize, n.overlapSize), a = Zi.getState();
    await a.initChat();
    let o = 0, u = 0;
    this.queue = {
      tasks: [{
        id: Dp(),
        type: "embed",
        status: "running",
        progress: { current: 0, total: i.length }
      }],
      isRunning: !0,
      isPaused: !1,
      currentTaskIndex: 0,
      overallProgress: { current: 0, total: i.length }
    }, this.onProgress = r, this.stopSignal = !1, this.notifyProgress();
    for (let f = 0; f < i.length && !this.stopSignal; f++) {
      const p = i[f];
      try {
        if (n.mode === "detailed") {
          const x = await this.summarizeChunk(p, f);
          if (x) {
            const b = await Qz.run({
              jsonContent: x,
              sourceRange: { start: f, end: f }
            });
            if (b.success && ((c = b.events) != null && c.length)) {
              for (const _ of b.events)
                await Gr.embedEvent(_);
              o++, this.queue.tasks[0].progress.current = f + 1, this.queue.overallProgress.current = f + 1, this.notifyProgress();
              continue;
            }
          }
          pe.warn(qe.BATCH, ` ${f} `);
        }
        const g = await a.saveEvent({
          summary: p,
          structured_kv: {
            time_anchor: "",
            role: [],
            location: "",
            event: ` #${f + 1}`,
            logic: [],
            causality: ""
          },
          significance_score: 0.5,
          level: 0,
          is_embedded: !1,
          is_archived: !1,
          source_range: { start_index: f, end_index: f }
        });
        await Gr.embedEvent(g), o++;
      } catch (g) {
        pe.error(qe.BATCH, ` ${f} `, { error: String(g) }), u++;
      }
      this.queue.tasks[0].progress.current = f + 1, this.queue.overallProgress.current = f + 1, this.notifyProgress();
    }
    return this.queue.isRunning = !1, this.queue.tasks[0].status = "done", this.notifyProgress(), pe.success(qe.BATCH, `: ${o} , ${u} `), u === 0 ? Zt.success(`: ${o} `, "Engram", {
      action: { goto: "memory" }
    }) : Zt.warning(`: ${o} , ${u} `, "Engram", {
      action: { goto: "devlog" }
    }), { success: o, failed: u };
  }
}
const Ru = new Sve();
function Cve() {
  const [e, t] = B.useState("idle"), [n, r] = B.useState({ tasks: [], isRunning: !1, isPaused: !1, currentTaskIndex: 0, overallProgress: { current: 0, total: 0 } }), [i, a] = B.useState(0), [o, u] = B.useState(null), [c, f] = B.useState(null);
  B.useEffect(() => {
    const E = () => {
      const T = Ru.getStatus();
      t(T.status), r(T.queue), a(T.progress), u(T.currentTask || null), f(T.error || null);
    };
    E();
    const k = setInterval(E, 500);
    return () => clearInterval(k);
  }, []);
  const p = B.useCallback(() => Ru.start(), []), g = B.useCallback(() => Ru.pause(), []), x = B.useCallback(() => Ru.resume(), []), b = B.useCallback(() => Ru.stop(), []), _ = B.useCallback(() => Ru.clear(), []);
  return {
    status: e,
    queue: n,
    progress: i,
    currentTask: o,
    error: c,
    start: p,
    pause: g,
    resume: x,
    stop: b,
    clear: _
  };
}
const Eve = ({ status: e }) => {
  switch (e) {
    case "done":
      return /* @__PURE__ */ h.jsx(Kx, { size: 14, className: "text-green-500" });
    case "error":
      return /* @__PURE__ */ h.jsx(JO, { size: 14, className: "text-red-500" });
    case "running":
      return /* @__PURE__ */ h.jsx(Or, { size: 14, className: "text-primary animate-spin" });
    case "skipped":
      return /* @__PURE__ */ h.jsx(hx, { size: 14, className: "text-muted-foreground" });
    default:
      return /* @__PURE__ */ h.jsx(hx, { size: 14, className: "text-muted-foreground/50" });
  }
}, kve = {
  summary: "",
  entity: "",
  trim: "",
  embed: ""
}, Tve = () => {
  const {
    queue: e,
    pause: t,
    resume: n,
    stop: r,
    clear: i
  } = Cve(), a = B.useRef(null), [o, u] = B.useState(null), [c, f] = B.useState(!1), [p, g] = B.useState(0), [x, b] = B.useState(Bo.getStatus().currentFloor || 0), [_, E] = B.useState("detailed"), [k, T] = B.useState(2e3), [R, N] = B.useState(200), [O, P] = B.useState(""), [z, q] = B.useState(null), G = B.useCallback(async () => {
    f(!0);
    try {
      const oe = await Ru.analyzeHistory(p, x);
      u(oe), b(oe.endFloor);
    } catch (oe) {
      console.error("[BatchPanel] Analyze failed:", oe);
    } finally {
      f(!1);
    }
  }, [p, x]), Y = B.useCallback(async () => {
    o && await Ru.start(o.startFloor, o.endFloor);
  }, [o]), W = B.useCallback(() => {
    e.isPaused ? n() : t();
  }, [e.isPaused, n, t]), F = B.useCallback(() => r(), [r]), X = B.useCallback(() => {
    i(), u(null);
  }, [i]), me = B.useCallback(async () => {
    if (O.trim())
      try {
        const oe = await Ru.importText(
          O,
          { mode: _, chunkSize: k, overlapSize: R },
          (fe) => {
            fe.tasks[0] && q(fe.tasks[0].progress);
          }
        );
        alert(`${oe.success} ${oe.failed} `);
      } catch (oe) {
        console.error("Import failed", oe), alert("");
      } finally {
        q(null);
      }
  }, [O, _, k, R]), J = B.useCallback((oe) => {
    var K;
    const fe = (K = oe.target.files) == null ? void 0 : K[0];
    if (!fe) return;
    const ce = new FileReader();
    ce.onload = (re) => {
      var de;
      return P(((de = re.target) == null ? void 0 : de.result) || "");
    }, ce.readAsText(fe);
  }, []), le = B.useCallback(() => {
    var oe;
    (oe = a.current) == null || oe.click();
  }, []), Q = e != null && e.overallProgress && e.overallProgress.total > 0 ? Math.round(e.overallProgress.current / e.overallProgress.total * 100) : 0;
  return /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12", children: [
    /* @__PURE__ */ h.jsxs("section", { className: "space-y-6", children: [
      /* @__PURE__ */ h.jsxs("div", { children: [
        /* @__PURE__ */ h.jsx("h2", { className: "text-sm font-medium text-foreground mb-1", children: "" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground", children: "" })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
        /* @__PURE__ */ h.jsx(
          Rr,
          {
            label: "",
            value: p,
            onChange: g,
            min: 0,
            max: x,
            step: 1,
            showSlider: !1
          }
        ),
        /* @__PURE__ */ h.jsx(
          Rr,
          {
            label: "",
            value: x,
            onChange: b,
            min: p,
            step: 1,
            showSlider: !1
          }
        )
      ] }),
      /* @__PURE__ */ h.jsxs(
        "button",
        {
          className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors disabled:opacity-50",
          onClick: G,
          disabled: c || e.isRunning,
          children: [
            /* @__PURE__ */ h.jsx(Or, { size: 14, className: c ? "animate-spin" : "" }),
            c ? "..." : ""
          ]
        }
      ),
      o && /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
        /* @__PURE__ */ h.jsx(ci, { length: 100, spacing: "md" }),
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ h.jsx("h3", { className: "text-xs font-medium text-muted-foreground uppercase tracking-wider", children: "" }),
          /* @__PURE__ */ h.jsxs("div", { className: "space-y-2 text-sm", children: [
            /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground", children: " " }),
              /* @__PURE__ */ h.jsxs("span", { className: "font-mono text-foreground", children: [
                o.summaryTasks,
                " "
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground", children: " " }),
              /* @__PURE__ */ h.jsxs("span", { className: "font-mono text-foreground", children: [
                o.entityTasks,
                " "
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground", children: " " }),
              /* @__PURE__ */ h.jsxs("span", { className: "font-mono text-foreground", children: [
                "~",
                o.trimTasks,
                " "
              ] })
            ] }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground", children: " " }),
              /* @__PURE__ */ h.jsxs("span", { className: "font-mono text-foreground", children: [
                "~",
                o.embedTasks,
                " "
              ] })
            ] }),
            /* @__PURE__ */ h.jsx(ci, { length: 30, spacing: "sm" }),
            /* @__PURE__ */ h.jsxs("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ h.jsx("span", { className: "text-muted-foreground", children: " Token" }),
              /* @__PURE__ */ h.jsxs("span", { className: "font-mono text-primary", children: [
                "~",
                (o.estimatedTokens / 1e3).toFixed(0),
                "k"
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "flex gap-3 flex-wrap", children: [
          e.isRunning ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
            /* @__PURE__ */ h.jsxs(
              "button",
              {
                className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors",
                onClick: W,
                children: [
                  e.isPaused ? /* @__PURE__ */ h.jsx(em, { size: 14 }) : /* @__PURE__ */ h.jsx(tD, { size: 14 }),
                  e.isPaused ? "" : ""
                ]
              }
            ),
            /* @__PURE__ */ h.jsxs(
              "button",
              {
                className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-red-400 hover:text-red-300 border border-red-500/30 rounded-lg transition-colors",
                onClick: F,
                children: [
                  /* @__PURE__ */ h.jsx(sD, { size: 14 }),
                  ""
                ]
              }
            )
          ] }) : /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-2 px-4 py-2 text-sm bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",
              onClick: Y,
              children: [
                /* @__PURE__ */ h.jsx(em, { size: 14 }),
                ""
              ]
            }
          ),
          e && !e.isRunning && /* @__PURE__ */ h.jsxs(
            "button",
            {
              className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors",
              onClick: X,
              children: [
                /* @__PURE__ */ h.jsx(rD, { size: 14 }),
                ""
              ]
            }
          )
        ] }),
        e && (e.isRunning || e.tasks.length > 0) && /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ h.jsx("div", { className: "h-1.5 bg-muted rounded-full overflow-hidden", children: /* @__PURE__ */ h.jsx(
            "div",
            {
              className: "h-full bg-primary transition-all duration-300",
              style: { width: `${Q}%` }
            }
          ) }),
          /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground text-center", children: [
            Q,
            "% - ",
            e.currentTaskIndex,
            "/",
            e.overallProgress.total,
            " "
          ] }),
          /* @__PURE__ */ h.jsxs("div", { className: "space-y-1 max-h-40 overflow-y-auto", children: [
            e.tasks.slice(0, 10).map((oe) => /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-2 text-xs", children: [
              /* @__PURE__ */ h.jsx(Eve, { status: oe.status }),
              /* @__PURE__ */ h.jsx("span", { className: oe.status === "running" ? "text-foreground" : "text-muted-foreground", children: kve[oe.type] || oe.type }),
              oe.floorRange && /* @__PURE__ */ h.jsxs("span", { className: "text-muted-foreground/50 font-mono", children: [
                "#",
                oe.floorRange.start,
                "-",
                oe.floorRange.end
              ] })
            ] }, oe.id)),
            e.tasks.length > 10 && /* @__PURE__ */ h.jsxs("div", { className: "text-xs text-muted-foreground/50", children: [
              "... ",
              e.tasks.length - 10,
              " "
            ] })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ h.jsxs("section", { className: "space-y-6 lg:pl-8 relative", children: [
      /* @__PURE__ */ h.jsx(ci, { responsive: !0, length: 30 }),
      /* @__PURE__ */ h.jsxs("div", { children: [
        /* @__PURE__ */ h.jsx("h2", { className: "text-sm font-medium text-foreground mb-1", children: "" }),
        /* @__PURE__ */ h.jsx("p", { className: "text-xs text-muted-foreground", children: "" })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ h.jsx(
          "input",
          {
            ref: a,
            type: "file",
            accept: ".txt,.md",
            onChange: J,
            className: "hidden"
          }
        ),
        /* @__PURE__ */ h.jsxs(
          "button",
          {
            className: "inline-flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-lg transition-colors",
            onClick: le,
            children: [
              /* @__PURE__ */ h.jsx(aD, { size: 14 }),
              ""
            ]
          }
        ),
        O && /* @__PURE__ */ h.jsxs("span", { className: "text-xs text-muted-foreground", children: [
          " ",
          (O.length / 1024).toFixed(1),
          " KB"
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "space-y-3", children: [
        /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground", children: "" }),
        /* @__PURE__ */ h.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ h.jsxs("label", { className: "flex items-start gap-3 cursor-pointer group", onClick: () => E("fast"), children: [
            /* @__PURE__ */ h.jsx("span", { className: `mt-0.5 w-4 h-4 rounded-full border-2 flex items-center justify-center transition-colors ${_ === "fast" ? "border-primary bg-primary" : "border-border group-hover:border-muted-foreground"}`, children: _ === "fast" && /* @__PURE__ */ h.jsx("span", { className: "w-1.5 h-1.5 rounded-full bg-primary-foreground" }) }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: `text-sm ${_ === "fast" ? "text-foreground" : "text-muted-foreground"}`, children: "" }),
              /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground", children: "   LLM" })
            ] })
          ] }),
          /* @__PURE__ */ h.jsxs("label", { className: "flex items-start gap-3 cursor-pointer group", onClick: () => E("detailed"), children: [
            /* @__PURE__ */ h.jsx("span", { className: `mt-0.5 w-4 h-4 rounded-full border-2 flex items-center justify-center transition-colors ${_ === "detailed" ? "border-primary bg-primary" : "border-border group-hover:border-muted-foreground"}`, children: _ === "detailed" && /* @__PURE__ */ h.jsx("span", { className: "w-1.5 h-1.5 rounded-full bg-primary-foreground" }) }),
            /* @__PURE__ */ h.jsxs("div", { children: [
              /* @__PURE__ */ h.jsx("span", { className: `text-sm ${_ === "detailed" ? "text-foreground" : "text-muted-foreground"}`, children: "" }),
              /* @__PURE__ */ h.jsx("p", { className: "text-[10px] text-muted-foreground", children: "  LLM   " })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs("div", { className: "grid grid-cols-2 gap-6", children: [
        /* @__PURE__ */ h.jsx(
          Rr,
          {
            label: "",
            value: k,
            onChange: T,
            min: 100,
            max: 1e4,
            step: 100,
            showSlider: !1
          }
        ),
        /* @__PURE__ */ h.jsx(
          Rr,
          {
            label: "",
            value: R,
            onChange: N,
            min: 0,
            max: k / 2,
            step: 50,
            showSlider: !1
          }
        )
      ] }),
      O && /* @__PURE__ */ h.jsxs("div", { children: [
        /* @__PURE__ */ h.jsx("span", { className: "text-xs text-muted-foreground block mb-2", children: "" }),
        /* @__PURE__ */ h.jsxs("div", { className: "bg-muted/20 border border-border rounded-lg p-3 max-h-32 overflow-y-auto text-xs text-muted-foreground font-mono", children: [
          O.slice(0, 500),
          "..."
        ] }),
        /* @__PURE__ */ h.jsxs("div", { className: "text-[10px] text-muted-foreground mt-1", children: [
          " ",
          Math.ceil((O.length - R) / (k - R)),
          " "
        ] })
      ] }),
      /* @__PURE__ */ h.jsxs(
        "button",
        {
          className: "inline-flex items-center gap-2 px-4 py-2 text-sm bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",
          onClick: me,
          disabled: !O || z !== null,
          children: [
            /* @__PURE__ */ h.jsx(sh, { size: 14 }),
            z ? ` ${z.current}/${z.total}` : ""
          ]
        }
      ),
      z && /* @__PURE__ */ h.jsx("div", { className: "h-1.5 bg-muted rounded-full overflow-hidden", children: /* @__PURE__ */ h.jsx(
        "div",
        {
          className: "h-full bg-primary transition-all duration-300",
          style: { width: `${z.current / z.total * 100}%` }
        }
      ) })
    ] })
  ] });
}, Ave = [
  { id: "summary", label: "", icon: /* @__PURE__ */ h.jsx(sh, { size: 16 }) },
  { id: "entity", label: "", icon: /* @__PURE__ */ h.jsx(z5, { size: 16 }) },
  { id: "vectorization", label: "", icon: /* @__PURE__ */ h.jsx(py, { size: 16 }) },
  { id: "recall", label: "", icon: /* @__PURE__ */ h.jsx(ta, { size: 16 }) },
  { id: "batch", label: "", icon: /* @__PURE__ */ h.jsx($0, { size: 16 }) }
], jve = [
  { id: "devlog", label: "", icon: aU, linkTo: "devlog:model" },
  { id: "presets", label: "", icon: R5, linkTo: "presets:prompt" }
], Nve = {
  summary: { title: "", subtitle: "" },
  vectorization: { title: "", subtitle: "" },
  recall: { title: "", subtitle: " RAG " },
  entity: { title: "", subtitle: "" },
  batch: { title: "", subtitle: "" }
}, Rve = ({ onNavigate: e }) => {
  const [t, n] = B.useState("summary"), r = Nve[t];
  return /* @__PURE__ */ h.jsxs("div", { className: "flex flex-col h-full w-full overflow-x-hidden", children: [
    /* @__PURE__ */ h.jsx(
      xm,
      {
        breadcrumbs: [""],
        title: r.title,
        subtitle: r.subtitle,
        className: "mb-6"
      }
    ),
    /* @__PURE__ */ h.jsx(ci, { className: "mb-6" }),
    /* @__PURE__ */ h.jsx(
      xy,
      {
        tabs: Ave,
        activeTab: t,
        onChange: (i) => n(i),
        actions: /* @__PURE__ */ h.jsx(
          mve,
          {
            links: jve,
            onNavigate: (i) => e == null ? void 0 : e(i)
          }
        )
      }
    ),
    /* @__PURE__ */ h.jsxs("div", { className: "flex-1 overflow-y-auto no-scrollbar", children: [
      t === "summary" && /* @__PURE__ */ h.jsx(yve, {}),
      t === "vectorization" && /* @__PURE__ */ h.jsx(vve, {}),
      t === "recall" && /* @__PURE__ */ h.jsx(bve, {}),
      t === "entity" && /* @__PURE__ */ h.jsx(wve, {}),
      t === "batch" && /* @__PURE__ */ h.jsx(Tve, {})
    ] })
  ] });
}, Mve = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ProcessingView: Rve
}, Symbol.toStringTag, { value: "Module" })), Ove = ({ initialTab: e }) => {
  var p;
  const [t, n] = B.useState(e || ((p = Op[0]) == null ? void 0 : p.id) || ""), [r, i] = B.useState("");
  dy.useEffect(() => {
    e && n(e);
  }, [e]);
  const a = B.useMemo(
    () => Op.find((g) => g.id === t) || Op[0],
    [t]
  ), o = B.useMemo(() => {
    if (!r.trim()) return Op;
    const g = r.toLowerCase();
    return Op.filter(
      (x) => {
        var b;
        return x.label.toLowerCase().includes(g) || ((b = x.keywords) == null ? void 0 : b.some((_) => _.toLowerCase().includes(g)));
      }
    );
  }, [r]), u = B.useMemo(
    () => o.map((g) => ({
      id: g.id,
      label: g.label,
      icon: /* @__PURE__ */ h.jsx(g.icon, { size: 14 })
    })),
    [o]
  ), c = a == null ? void 0 : a.component, f = /* @__PURE__ */ h.jsxs("div", { className: "relative", children: [
    /* @__PURE__ */ h.jsx(ta, { size: 14, className: "absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground" }),
    /* @__PURE__ */ h.jsx(
      "input",
      {
        type: "text",
        placeholder: "...",
        value: r,
        onChange: (g) => i(g.target.value),
        className: `w-40 pl-8 pr-3 py-1 text-sm bg-muted/30 border border-border/50 rounded-md
                         focus:outline-none focus:ring-1 focus:ring-primary/30 focus:border-primary/50
                         placeholder:text-muted-foreground/60 transition-all duration-[var(--duration-fast)]`
      }
    )
  ] });
  return /* @__PURE__ */ h.jsxs("div", { className: "h-full flex flex-col", children: [
    /* @__PURE__ */ h.jsx(
      xy,
      {
        tabs: u,
        activeTab: t,
        onChange: n,
        actions: f
      }
    ),
    /* @__PURE__ */ h.jsx("div", { className: "flex-1 overflow-y-auto overflow-x-hidden", children: /* @__PURE__ */ h.jsx("div", { className: "w-full max-w-none px-4 py-4 md:px-6 lg:px-8", children: c ? /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
      /* @__PURE__ */ h.jsx("style", { children: `
                                #engram-docs-content {
                                    width: 100%;
                                    max-width: 100%;
                                }
                                #engram-docs-content * {
                                    max-width: 100% !important;
                                    white-space: normal !important;
                                    word-wrap: break-word !important;
                                    overflow-wrap: break-word !important;
                                    box-sizing: border-box !important;
                                }
                                #engram-docs-content p {
                                    margin-bottom: 1em !important;
                                }
                                #engram-docs-content pre {
                                    white-space: pre-wrap !important;
                                    overflow-x: auto !important;
                                }
                                #engram-docs-content code {
                                    white-space: pre-wrap !important;
                                    word-break: break-all !important;
                                }
                            ` }),
      /* @__PURE__ */ h.jsx("article", { id: "engram-docs-content", className: `prose prose-sm dark:prose-invert max-w-none
                                              prose-headings:font-light prose-headings:tracking-tight
                                              prose-h1:text-2xl prose-h1:text-primary prose-h1:mb-4 prose-h1:pb-2 prose-h1:border-b prose-h1:border-primary/20
                                              prose-h2:text-lg prose-h2:text-primary/90 prose-h2:mt-6 prose-h2:mb-3
                                              prose-h3:text-base prose-h3:text-foreground prose-h3:mt-4 prose-h3:mb-2
                                              prose-p:text-muted-foreground prose-p:leading-relaxed
                                              prose-li:text-muted-foreground
                                              prose-code:bg-muted/50 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-xs prose-code:font-normal
                                              prose-pre:bg-muted/30 prose-pre:border prose-pre:border-border
                                              prose-blockquote:border-primary/50 prose-blockquote:bg-primary/5 prose-blockquote:rounded-r-lg prose-blockquote:py-2
                                              prose-strong:text-foreground prose-strong:font-medium
                                              prose-a:text-primary prose-a:no-underline hover:prose-a:underline`, children: /* @__PURE__ */ h.jsx(c, {}) })
    ] }) : /* @__PURE__ */ h.jsx("div", { className: "text-center text-muted-foreground py-12", children: "" }) }) })
  ] });
}, Dve = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  DocsView: Ove
}, Symbol.toStringTag, { value: "Module" }));
export {
  ere as openCommandPalette,
  tre as setCommandPaletteCallback,
  Jne as toggleQuickPanel
};
//# sourceMappingURL=index.js.map
